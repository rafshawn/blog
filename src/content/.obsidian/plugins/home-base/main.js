/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// node_modules/.pnpm/obsidian-daily-notes-interf_8d9fc24b0fc622d94fd11fa5e9b185b3/node_modules/obsidian-daily-notes-interface/dist/main.js
var require_main = __commonJS({
  "node_modules/.pnpm/obsidian-daily-notes-interf_8d9fc24b0fc622d94fd11fa5e9b185b3/node_modules/obsidian-daily-notes-interface/dist/main.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var obsidian = require("obsidian");
    var DEFAULT_DAILY_NOTE_FORMAT = "YYYY-MM-DD";
    var DEFAULT_WEEKLY_NOTE_FORMAT = "gggg-[W]ww";
    var DEFAULT_MONTHLY_NOTE_FORMAT = "YYYY-MM";
    var DEFAULT_QUARTERLY_NOTE_FORMAT = "YYYY-[Q]Q";
    var DEFAULT_YEARLY_NOTE_FORMAT = "YYYY";
    function shouldUsePeriodicNotesSettings(periodicity) {
      var _a, _b;
      const periodicNotes = window.app.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a[periodicity]) == null ? void 0 : _b.enabled);
    }
    function getDailyNoteSettings() {
      var _a, _b, _c, _d;
      try {
        const { internalPlugins, plugins } = window.app;
        if (shouldUsePeriodicNotesSettings("daily")) {
          const { format: format2, folder: folder2, template: template2 } = ((_b = (_a = plugins.getPlugin("periodic-notes")) == null ? void 0 : _a.settings) == null ? void 0 : _b.daily) || {};
          return {
            format: format2 || DEFAULT_DAILY_NOTE_FORMAT,
            folder: (folder2 == null ? void 0 : folder2.trim()) || "",
            template: (template2 == null ? void 0 : template2.trim()) || ""
          };
        }
        const { folder, format, template } = ((_d = (_c = internalPlugins.getPluginById("daily-notes")) == null ? void 0 : _c.instance) == null ? void 0 : _d.options) || {};
        return {
          format: format || DEFAULT_DAILY_NOTE_FORMAT,
          folder: (folder == null ? void 0 : folder.trim()) || "",
          template: (template == null ? void 0 : template.trim()) || ""
        };
      } catch (err) {
        console.info("No custom daily note settings found!", err);
      }
    }
    function getWeeklyNoteSettings() {
      var _a, _b, _c, _d, _e, _f, _g;
      try {
        const pluginManager = window.app.plugins;
        const calendarSettings = (_a = pluginManager.getPlugin("calendar")) == null ? void 0 : _a.options;
        const periodicNotesSettings = (_c = (_b = pluginManager.getPlugin("periodic-notes")) == null ? void 0 : _b.settings) == null ? void 0 : _c.weekly;
        if (shouldUsePeriodicNotesSettings("weekly")) {
          return {
            format: periodicNotesSettings.format || DEFAULT_WEEKLY_NOTE_FORMAT,
            folder: ((_d = periodicNotesSettings.folder) == null ? void 0 : _d.trim()) || "",
            template: ((_e = periodicNotesSettings.template) == null ? void 0 : _e.trim()) || ""
          };
        }
        const settings = calendarSettings || {};
        return {
          format: settings.weeklyNoteFormat || DEFAULT_WEEKLY_NOTE_FORMAT,
          folder: ((_f = settings.weeklyNoteFolder) == null ? void 0 : _f.trim()) || "",
          template: ((_g = settings.weeklyNoteTemplate) == null ? void 0 : _g.trim()) || ""
        };
      } catch (err) {
        console.info("No custom weekly note settings found!", err);
      }
    }
    function getMonthlyNoteSettings() {
      var _a, _b, _c, _d;
      const pluginManager = window.app.plugins;
      try {
        const settings = shouldUsePeriodicNotesSettings("monthly") && ((_b = (_a = pluginManager.getPlugin("periodic-notes")) == null ? void 0 : _a.settings) == null ? void 0 : _b.monthly) || {};
        return {
          format: settings.format || DEFAULT_MONTHLY_NOTE_FORMAT,
          folder: ((_c = settings.folder) == null ? void 0 : _c.trim()) || "",
          template: ((_d = settings.template) == null ? void 0 : _d.trim()) || ""
        };
      } catch (err) {
        console.info("No custom monthly note settings found!", err);
      }
    }
    function getQuarterlyNoteSettings() {
      var _a, _b, _c, _d;
      const pluginManager = window.app.plugins;
      try {
        const settings = shouldUsePeriodicNotesSettings("quarterly") && ((_b = (_a = pluginManager.getPlugin("periodic-notes")) == null ? void 0 : _a.settings) == null ? void 0 : _b.quarterly) || {};
        return {
          format: settings.format || DEFAULT_QUARTERLY_NOTE_FORMAT,
          folder: ((_c = settings.folder) == null ? void 0 : _c.trim()) || "",
          template: ((_d = settings.template) == null ? void 0 : _d.trim()) || ""
        };
      } catch (err) {
        console.info("No custom quarterly note settings found!", err);
      }
    }
    function getYearlyNoteSettings() {
      var _a, _b, _c, _d;
      const pluginManager = window.app.plugins;
      try {
        const settings = shouldUsePeriodicNotesSettings("yearly") && ((_b = (_a = pluginManager.getPlugin("periodic-notes")) == null ? void 0 : _a.settings) == null ? void 0 : _b.yearly) || {};
        return {
          format: settings.format || DEFAULT_YEARLY_NOTE_FORMAT,
          folder: ((_c = settings.folder) == null ? void 0 : _c.trim()) || "",
          template: ((_d = settings.template) == null ? void 0 : _d.trim()) || ""
        };
      } catch (err) {
        console.info("No custom yearly note settings found!", err);
      }
    }
    function join(...partSegments) {
      let parts = [];
      for (let i = 0, l = partSegments.length; i < l; i++) {
        parts = parts.concat(partSegments[i].split("/"));
      }
      const newParts = [];
      for (let i = 0, l = parts.length; i < l; i++) {
        const part = parts[i];
        if (!part || part === ".")
          continue;
        else
          newParts.push(part);
      }
      if (parts[0] === "")
        newParts.unshift("");
      return newParts.join("/");
    }
    function basename(fullPath) {
      let base = fullPath.substring(fullPath.lastIndexOf("/") + 1);
      if (base.lastIndexOf(".") != -1)
        base = base.substring(0, base.lastIndexOf("."));
      return base;
    }
    async function ensureFolderExists(path) {
      const dirs = path.replace(/\\/g, "/").split("/");
      dirs.pop();
      if (dirs.length) {
        const dir = join(...dirs);
        if (!window.app.vault.getAbstractFileByPath(dir)) {
          await window.app.vault.createFolder(dir);
        }
      }
    }
    async function getNotePath(directory, filename) {
      if (!filename.endsWith(".md")) {
        filename += ".md";
      }
      const path = obsidian.normalizePath(join(directory, filename));
      await ensureFolderExists(path);
      return path;
    }
    async function getTemplateInfo(template) {
      const { metadataCache, vault } = window.app;
      const templatePath = obsidian.normalizePath(template);
      if (templatePath === "/") {
        return Promise.resolve(["", null]);
      }
      try {
        const templateFile = metadataCache.getFirstLinkpathDest(templatePath, "");
        const contents = await vault.cachedRead(templateFile);
        const IFoldInfo = window.app.foldManager.load(templateFile);
        return [contents, IFoldInfo];
      } catch (err) {
        console.error(`Failed to read the daily note template '${templatePath}'`, err);
        new obsidian.Notice("Failed to read the daily note template");
        return ["", null];
      }
    }
    function getDateUID(date, granularity = "day") {
      const ts = date.clone().startOf(granularity).format();
      return `${granularity}-${ts}`;
    }
    function removeEscapedCharacters(format) {
      return format.replace(/\[[^\]]*\]/g, "");
    }
    function isFormatAmbiguous(format, granularity) {
      if (granularity === "week") {
        const cleanFormat = removeEscapedCharacters(format);
        return /w{1,2}/i.test(cleanFormat) && (/M{1,4}/.test(cleanFormat) || /D{1,4}/.test(cleanFormat));
      }
      return false;
    }
    function getDateFromFile(file, granularity) {
      return getDateFromFilename(file.basename, granularity);
    }
    function getDateFromPath(path, granularity) {
      return getDateFromFilename(basename(path), granularity);
    }
    function getDateFromFilename(filename, granularity) {
      const getSettings = {
        day: getDailyNoteSettings,
        week: getWeeklyNoteSettings,
        month: getMonthlyNoteSettings,
        quarter: getQuarterlyNoteSettings,
        year: getYearlyNoteSettings
      };
      const format = getSettings[granularity]().format.split("/").pop();
      const noteDate = window.moment(filename, format, true);
      if (!noteDate.isValid()) {
        return null;
      }
      if (isFormatAmbiguous(format, granularity)) {
        if (granularity === "week") {
          const cleanFormat = removeEscapedCharacters(format);
          if (/w{1,2}/i.test(cleanFormat)) {
            return window.moment(
              filename,
              // If format contains week, remove day & month formatting
              format.replace(/M{1,4}/g, "").replace(/D{1,4}/g, ""),
              false
            );
          }
        }
      }
      return noteDate;
    }
    var DailyNotesFolderMissingError = class extends Error {
    };
    async function createDailyNote2(date) {
      const app = window.app;
      const { vault } = app;
      const moment2 = window.moment;
      const { template, format, folder } = getDailyNoteSettings();
      const [templateContents, IFoldInfo] = await getTemplateInfo(template);
      const filename = date.format(format);
      const normalizedPath = await getNotePath(folder, filename);
      try {
        const createdFile = await vault.create(normalizedPath, templateContents.replace(/{{\s*date\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, moment2().format("HH:mm")).replace(/{{\s*title\s*}}/gi, filename).replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
          const now = moment2();
          const currentDate = date.clone().set({
            hour: now.get("hour"),
            minute: now.get("minute"),
            second: now.get("second")
          });
          if (calc) {
            currentDate.add(parseInt(timeDelta, 10), unit);
          }
          if (momentFormat) {
            return currentDate.format(momentFormat.substring(1).trim());
          }
          return currentDate.format(format);
        }).replace(/{{\s*yesterday\s*}}/gi, date.clone().subtract(1, "day").format(format)).replace(/{{\s*tomorrow\s*}}/gi, date.clone().add(1, "d").format(format)));
        app.foldManager.save(createdFile, IFoldInfo);
        return createdFile;
      } catch (err) {
        console.error(`Failed to create file: '${normalizedPath}'`, err);
        new obsidian.Notice("Unable to create new file.");
      }
    }
    function getDailyNote2(date, dailyNotes) {
      var _a;
      return (_a = dailyNotes[getDateUID(date, "day")]) != null ? _a : null;
    }
    function getAllDailyNotes2() {
      const { vault } = window.app;
      const { folder } = getDailyNoteSettings();
      const dailyNotesFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!dailyNotesFolder) {
        throw new DailyNotesFolderMissingError("Failed to find daily notes folder");
      }
      const dailyNotes = {};
      obsidian.Vault.recurseChildren(dailyNotesFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile(note, "day");
          if (date) {
            const dateString = getDateUID(date, "day");
            dailyNotes[dateString] = note;
          }
        }
      });
      return dailyNotes;
    }
    var WeeklyNotesFolderMissingError = class extends Error {
    };
    function getDaysOfWeek() {
      const { moment: moment2 } = window;
      let weekStart = moment2.localeData()._week.dow;
      const daysOfWeek = [
        "sunday",
        "monday",
        "tuesday",
        "wednesday",
        "thursday",
        "friday",
        "saturday"
      ];
      while (weekStart) {
        daysOfWeek.push(daysOfWeek.shift());
        weekStart--;
      }
      return daysOfWeek;
    }
    function getDayOfWeekNumericalValue(dayOfWeekName) {
      return getDaysOfWeek().indexOf(dayOfWeekName.toLowerCase());
    }
    async function createWeeklyNote2(date) {
      const { vault } = window.app;
      const { template, format, folder } = getWeeklyNoteSettings();
      const [templateContents, IFoldInfo] = await getTemplateInfo(template);
      const filename = date.format(format);
      const normalizedPath = await getNotePath(folder, filename);
      try {
        const createdFile = await vault.create(normalizedPath, templateContents.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
          const now = window.moment();
          const currentDate = date.clone().set({
            hour: now.get("hour"),
            minute: now.get("minute"),
            second: now.get("second")
          });
          if (calc) {
            currentDate.add(parseInt(timeDelta, 10), unit);
          }
          if (momentFormat) {
            return currentDate.format(momentFormat.substring(1).trim());
          }
          return currentDate.format(format);
        }).replace(/{{\s*title\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, window.moment().format("HH:mm")).replace(/{{\s*(sunday|monday|tuesday|wednesday|thursday|friday|saturday)\s*:(.*?)}}/gi, (_, dayOfWeek, momentFormat) => {
          const day = getDayOfWeekNumericalValue(dayOfWeek);
          return date.weekday(day).format(momentFormat.trim());
        }));
        window.app.foldManager.save(createdFile, IFoldInfo);
        return createdFile;
      } catch (err) {
        console.error(`Failed to create file: '${normalizedPath}'`, err);
        new obsidian.Notice("Unable to create new file.");
      }
    }
    function getWeeklyNote2(date, weeklyNotes) {
      var _a;
      return (_a = weeklyNotes[getDateUID(date, "week")]) != null ? _a : null;
    }
    function getAllWeeklyNotes2() {
      const weeklyNotes = {};
      if (!appHasWeeklyNotesPluginLoaded()) {
        return weeklyNotes;
      }
      const { vault } = window.app;
      const { folder } = getWeeklyNoteSettings();
      const weeklyNotesFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!weeklyNotesFolder) {
        throw new WeeklyNotesFolderMissingError("Failed to find weekly notes folder");
      }
      obsidian.Vault.recurseChildren(weeklyNotesFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile(note, "week");
          if (date) {
            const dateString = getDateUID(date, "week");
            weeklyNotes[dateString] = note;
          }
        }
      });
      return weeklyNotes;
    }
    var MonthlyNotesFolderMissingError = class extends Error {
    };
    async function createMonthlyNote2(date) {
      const { vault } = window.app;
      const { template, format, folder } = getMonthlyNoteSettings();
      const [templateContents, IFoldInfo] = await getTemplateInfo(template);
      const filename = date.format(format);
      const normalizedPath = await getNotePath(folder, filename);
      try {
        const createdFile = await vault.create(normalizedPath, templateContents.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
          const now = window.moment();
          const currentDate = date.clone().set({
            hour: now.get("hour"),
            minute: now.get("minute"),
            second: now.get("second")
          });
          if (calc) {
            currentDate.add(parseInt(timeDelta, 10), unit);
          }
          if (momentFormat) {
            return currentDate.format(momentFormat.substring(1).trim());
          }
          return currentDate.format(format);
        }).replace(/{{\s*date\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi, filename));
        window.app.foldManager.save(createdFile, IFoldInfo);
        return createdFile;
      } catch (err) {
        console.error(`Failed to create file: '${normalizedPath}'`, err);
        new obsidian.Notice("Unable to create new file.");
      }
    }
    function getMonthlyNote2(date, monthlyNotes) {
      var _a;
      return (_a = monthlyNotes[getDateUID(date, "month")]) != null ? _a : null;
    }
    function getAllMonthlyNotes2() {
      const monthlyNotes = {};
      if (!appHasMonthlyNotesPluginLoaded()) {
        return monthlyNotes;
      }
      const { vault } = window.app;
      const { folder } = getMonthlyNoteSettings();
      const monthlyNotesFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!monthlyNotesFolder) {
        throw new MonthlyNotesFolderMissingError("Failed to find monthly notes folder");
      }
      obsidian.Vault.recurseChildren(monthlyNotesFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile(note, "month");
          if (date) {
            const dateString = getDateUID(date, "month");
            monthlyNotes[dateString] = note;
          }
        }
      });
      return monthlyNotes;
    }
    var QuarterlyNotesFolderMissingError = class extends Error {
    };
    async function createQuarterlyNote2(date) {
      const { vault } = window.app;
      const { template, format, folder } = getQuarterlyNoteSettings();
      const [templateContents, IFoldInfo] = await getTemplateInfo(template);
      const filename = date.format(format);
      const normalizedPath = await getNotePath(folder, filename);
      try {
        const createdFile = await vault.create(normalizedPath, templateContents.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
          const now = window.moment();
          const currentDate = date.clone().set({
            hour: now.get("hour"),
            minute: now.get("minute"),
            second: now.get("second")
          });
          if (calc) {
            currentDate.add(parseInt(timeDelta, 10), unit);
          }
          if (momentFormat) {
            return currentDate.format(momentFormat.substring(1).trim());
          }
          return currentDate.format(format);
        }).replace(/{{\s*date\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi, filename));
        window.app.foldManager.save(createdFile, IFoldInfo);
        return createdFile;
      } catch (err) {
        console.error(`Failed to create file: '${normalizedPath}'`, err);
        new obsidian.Notice("Unable to create new file.");
      }
    }
    function getQuarterlyNote2(date, quarterly) {
      var _a;
      return (_a = quarterly[getDateUID(date, "quarter")]) != null ? _a : null;
    }
    function getAllQuarterlyNotes2() {
      const quarterly = {};
      if (!appHasQuarterlyNotesPluginLoaded()) {
        return quarterly;
      }
      const { vault } = window.app;
      const { folder } = getQuarterlyNoteSettings();
      const quarterlyFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!quarterlyFolder) {
        throw new QuarterlyNotesFolderMissingError("Failed to find quarterly notes folder");
      }
      obsidian.Vault.recurseChildren(quarterlyFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile(note, "quarter");
          if (date) {
            const dateString = getDateUID(date, "quarter");
            quarterly[dateString] = note;
          }
        }
      });
      return quarterly;
    }
    var YearlyNotesFolderMissingError = class extends Error {
    };
    async function createYearlyNote2(date) {
      const { vault } = window.app;
      const { template, format, folder } = getYearlyNoteSettings();
      const [templateContents, IFoldInfo] = await getTemplateInfo(template);
      const filename = date.format(format);
      const normalizedPath = await getNotePath(folder, filename);
      try {
        const createdFile = await vault.create(normalizedPath, templateContents.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
          const now = window.moment();
          const currentDate = date.clone().set({
            hour: now.get("hour"),
            minute: now.get("minute"),
            second: now.get("second")
          });
          if (calc) {
            currentDate.add(parseInt(timeDelta, 10), unit);
          }
          if (momentFormat) {
            return currentDate.format(momentFormat.substring(1).trim());
          }
          return currentDate.format(format);
        }).replace(/{{\s*date\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi, filename));
        window.app.foldManager.save(createdFile, IFoldInfo);
        return createdFile;
      } catch (err) {
        console.error(`Failed to create file: '${normalizedPath}'`, err);
        new obsidian.Notice("Unable to create new file.");
      }
    }
    function getYearlyNote2(date, yearlyNotes) {
      var _a;
      return (_a = yearlyNotes[getDateUID(date, "year")]) != null ? _a : null;
    }
    function getAllYearlyNotes2() {
      const yearlyNotes = {};
      if (!appHasYearlyNotesPluginLoaded()) {
        return yearlyNotes;
      }
      const { vault } = window.app;
      const { folder } = getYearlyNoteSettings();
      const yearlyNotesFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!yearlyNotesFolder) {
        throw new YearlyNotesFolderMissingError("Failed to find yearly notes folder");
      }
      obsidian.Vault.recurseChildren(yearlyNotesFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile(note, "year");
          if (date) {
            const dateString = getDateUID(date, "year");
            yearlyNotes[dateString] = note;
          }
        }
      });
      return yearlyNotes;
    }
    function appHasDailyNotesPluginLoaded() {
      var _a, _b;
      const { app } = window;
      const dailyNotesPlugin = app.internalPlugins.plugins["daily-notes"];
      if (dailyNotesPlugin && dailyNotesPlugin.enabled) {
        return true;
      }
      const periodicNotes = app.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.daily) == null ? void 0 : _b.enabled);
    }
    function appHasWeeklyNotesPluginLoaded() {
      var _a, _b;
      const { app } = window;
      if (app.plugins.getPlugin("calendar")) {
        return true;
      }
      const periodicNotes = app.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.weekly) == null ? void 0 : _b.enabled);
    }
    function appHasMonthlyNotesPluginLoaded() {
      var _a, _b;
      const { app } = window;
      const periodicNotes = app.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.monthly) == null ? void 0 : _b.enabled);
    }
    function appHasQuarterlyNotesPluginLoaded() {
      var _a, _b;
      const { app } = window;
      const periodicNotes = app.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.quarterly) == null ? void 0 : _b.enabled);
    }
    function appHasYearlyNotesPluginLoaded() {
      var _a, _b;
      const { app } = window;
      const periodicNotes = app.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.yearly) == null ? void 0 : _b.enabled);
    }
    function getPeriodicNoteSettings(granularity) {
      const getSettings = {
        day: getDailyNoteSettings,
        week: getWeeklyNoteSettings,
        month: getMonthlyNoteSettings,
        quarter: getQuarterlyNoteSettings,
        year: getYearlyNoteSettings
      }[granularity];
      return getSettings();
    }
    function createPeriodicNote(granularity, date) {
      const createFn = {
        day: createDailyNote2,
        month: createMonthlyNote2,
        week: createWeeklyNote2
      };
      return createFn[granularity](date);
    }
    exports.DEFAULT_DAILY_NOTE_FORMAT = DEFAULT_DAILY_NOTE_FORMAT;
    exports.DEFAULT_MONTHLY_NOTE_FORMAT = DEFAULT_MONTHLY_NOTE_FORMAT;
    exports.DEFAULT_QUARTERLY_NOTE_FORMAT = DEFAULT_QUARTERLY_NOTE_FORMAT;
    exports.DEFAULT_WEEKLY_NOTE_FORMAT = DEFAULT_WEEKLY_NOTE_FORMAT;
    exports.DEFAULT_YEARLY_NOTE_FORMAT = DEFAULT_YEARLY_NOTE_FORMAT;
    exports.appHasDailyNotesPluginLoaded = appHasDailyNotesPluginLoaded;
    exports.appHasMonthlyNotesPluginLoaded = appHasMonthlyNotesPluginLoaded;
    exports.appHasQuarterlyNotesPluginLoaded = appHasQuarterlyNotesPluginLoaded;
    exports.appHasWeeklyNotesPluginLoaded = appHasWeeklyNotesPluginLoaded;
    exports.appHasYearlyNotesPluginLoaded = appHasYearlyNotesPluginLoaded;
    exports.createDailyNote = createDailyNote2;
    exports.createMonthlyNote = createMonthlyNote2;
    exports.createPeriodicNote = createPeriodicNote;
    exports.createQuarterlyNote = createQuarterlyNote2;
    exports.createWeeklyNote = createWeeklyNote2;
    exports.createYearlyNote = createYearlyNote2;
    exports.getAllDailyNotes = getAllDailyNotes2;
    exports.getAllMonthlyNotes = getAllMonthlyNotes2;
    exports.getAllQuarterlyNotes = getAllQuarterlyNotes2;
    exports.getAllWeeklyNotes = getAllWeeklyNotes2;
    exports.getAllYearlyNotes = getAllYearlyNotes2;
    exports.getDailyNote = getDailyNote2;
    exports.getDailyNoteSettings = getDailyNoteSettings;
    exports.getDateFromFile = getDateFromFile;
    exports.getDateFromPath = getDateFromPath;
    exports.getDateUID = getDateUID;
    exports.getMonthlyNote = getMonthlyNote2;
    exports.getMonthlyNoteSettings = getMonthlyNoteSettings;
    exports.getPeriodicNoteSettings = getPeriodicNoteSettings;
    exports.getQuarterlyNote = getQuarterlyNote2;
    exports.getQuarterlyNoteSettings = getQuarterlyNoteSettings;
    exports.getTemplateInfo = getTemplateInfo;
    exports.getWeeklyNote = getWeeklyNote2;
    exports.getWeeklyNoteSettings = getWeeklyNoteSettings;
    exports.getYearlyNote = getYearlyNote2;
    exports.getYearlyNoteSettings = getYearlyNoteSettings;
  }
});

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => HomeBasePlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian12 = require("obsidian");

// src/settings.ts
var HomeBaseType = /* @__PURE__ */ ((HomeBaseType2) => {
  HomeBaseType2["File"] = "File";
  HomeBaseType2["Workspace"] = "Workspace";
  HomeBaseType2["Random"] = "Random file";
  HomeBaseType2["RandomFolder"] = "Random in folder";
  HomeBaseType2["Graph"] = "Graph view";
  HomeBaseType2["None"] = "Nothing";
  HomeBaseType2["Journal"] = "Journal";
  HomeBaseType2["NewNote"] = "New note";
  HomeBaseType2["DailyNote"] = "Daily Note";
  HomeBaseType2["WeeklyNote"] = "Weekly Note";
  HomeBaseType2["MonthlyNote"] = "Monthly Note";
  HomeBaseType2["QuarterlyNote"] = "Quarterly Note";
  HomeBaseType2["YearlyNote"] = "Yearly Note";
  return HomeBaseType2;
})(HomeBaseType || {});
var DEFAULT_SETTINGS = {
  // General
  homeBaseType: "File" /* File */,
  homeBaseValue: "",
  openOnStartup: true,
  openViewMode: "default",
  openMode: "replace-all",
  manualOpenMode: "retain",
  // Tab Behavior
  replaceNewTab: false,
  newTabMode: "only-when-empty",
  // Default: only replace when no tabs are open
  openWhenAllTabsClosed: true,
  // Default: open home base when all tabs are closed
  useDifferentFileForNewTab: false,
  newTabType: "File" /* File */,
  newTabValue: "",
  newTabSeparateMobile: false,
  mobileNewTabType: "File" /* File */,
  mobileNewTabValue: "",
  // UI Features
  showStickyHomeIcon: false,
  stickyIconName: "home",
  hideHomeTabHeader: false,
  replaceMobileNewTab: false,
  // Mobile
  separateMobile: false,
  mobileHomeBaseType: "File" /* File */,
  mobileHomeBaseValue: "",
  // Automation
  commandOnOpen: "",
  waitForGitSync: false,
  gitSyncTimeout: 3,
  // Default 3 seconds
  // View behavior
  revertView: false,
  autoScroll: false,
  hideReleaseNotes: false
  // OFF by default
};
var VIEW_MODE_OPTIONS = {
  "default": "Default",
  "preview": "Reading view",
  "source": "Source mode",
  "live": "Live Preview"
};
var NEW_TAB_MODE_OPTIONS = {
  "only-when-empty": "Only when no tabs are open",
  "always": "Always replace new tabs"
};
var OPENING_MODE_OPTIONS = {
  "replace-all": "Replace all open notes",
  "replace-last": "Replace last note",
  "retain": "Keep open notes"
};
var UNCHANGEABLE_TYPES = [
  "Random file" /* Random */,
  "Graph view" /* Graph */,
  "Nothing" /* None */,
  "Daily Note" /* DailyNote */,
  "Weekly Note" /* WeeklyNote */,
  "Monthly Note" /* MonthlyNote */,
  "Quarterly Note" /* QuarterlyNote */,
  "Yearly Note" /* YearlyNote */
];

// src/ui/settings-tab.ts
var import_obsidian5 = require("obsidian");

// src/utils/settings-compat.ts
var import_obsidian = require("obsidian");
var ObsidianModule = __toESM(require("obsidian"), 1);
function createSettingsGroup(containerEl, heading, manifestId) {
  if (manifestId) {
    containerEl.addClass(`${manifestId}-settings-compat`);
  }
  if ((0, import_obsidian.requireApiVersion)("1.11.0")) {
    const SettingGroupClass = ObsidianModule.SettingGroup;
    if (SettingGroupClass) {
      const group = heading ? new SettingGroupClass(containerEl).setHeading(heading) : new SettingGroupClass(containerEl);
      return {
        addSetting(cb) {
          group.addSetting(cb);
        }
      };
    }
  }
  if (heading) {
    const headingEl = containerEl.createDiv("setting-group-heading");
    headingEl.createEl("h3", { text: heading });
  }
  return {
    addSetting(cb) {
      const setting = new import_obsidian.Setting(containerEl);
      cb(setting);
    }
  };
}

// src/ui/file-suggest.ts
var import_obsidian2 = require("obsidian");
var SUPPORTED_EXTENSIONS = ["md", "mdx", "canvas", "base"];
var FilePathSuggest = class extends import_obsidian2.AbstractInputSuggest {
  constructor(app, inputEl) {
    super(app, inputEl);
    this.inputEl = inputEl;
  }
  getSuggestions(query) {
    const lowerQuery = query.toLowerCase();
    const files = [];
    this.app.vault.getAllLoadedFiles().forEach((file) => {
      if (file instanceof import_obsidian2.TFile) {
        if (SUPPORTED_EXTENSIONS.includes(file.extension)) {
          if (file.path.toLowerCase().includes(lowerQuery) || file.basename.toLowerCase().includes(lowerQuery)) {
            files.push(file);
          }
        }
      }
    });
    files.sort((a, b) => {
      const aStartsWith = a.path.toLowerCase().startsWith(lowerQuery);
      const bStartsWith = b.path.toLowerCase().startsWith(lowerQuery);
      if (aStartsWith && !bStartsWith) return -1;
      if (!aStartsWith && bStartsWith) return 1;
      return a.path.localeCompare(b.path);
    });
    return files.slice(0, 20);
  }
  renderSuggestion(file, el) {
    el.addClass("home-base-suggestion-item");
    const titleEl = el.createEl("div", {
      cls: "suggestion-title"
    });
    titleEl.createEl("span", { text: file.basename });
    if (file.extension !== "md") {
      titleEl.createEl("span", {
        text: file.extension.toUpperCase(),
        cls: "suggestion-flair"
      });
    }
    if (file.parent && file.parent.path !== "/") {
      el.createEl("div", {
        text: file.parent.path,
        cls: "suggestion-note"
      });
    }
  }
  selectSuggestion(file) {
    this.inputEl.value = file.path;
    this.inputEl.trigger("input");
    this.close();
  }
};
var FolderSuggest = class extends import_obsidian2.AbstractInputSuggest {
  constructor(app, inputEl) {
    super(app, inputEl);
    this.inputEl = inputEl;
  }
  getSuggestions(query) {
    const lowerQuery = query.toLowerCase();
    const folders = [];
    this.app.vault.getAllLoadedFiles().forEach((file) => {
      if (file instanceof import_obsidian2.TFolder) {
        if (file.path.toLowerCase().includes(lowerQuery)) {
          folders.push(file);
        }
      }
    });
    folders.sort((a, b) => a.path.localeCompare(b.path));
    return folders.slice(0, 20);
  }
  renderSuggestion(folder, el) {
    el.createEl("div", { text: folder.path || "/" });
  }
  selectSuggestion(folder) {
    this.inputEl.value = folder.path;
    this.inputEl.trigger("input");
    this.close();
  }
};
var WorkspaceSuggest = class extends import_obsidian2.AbstractInputSuggest {
  constructor(app, inputEl) {
    super(app, inputEl);
    this.inputEl = inputEl;
  }
  getSuggestions(query) {
    var _a, _b, _c;
    const workspacesPlugin = (_b = (_a = this.app.internalPlugins) == null ? void 0 : _a.plugins) == null ? void 0 : _b.workspaces;
    if (!(workspacesPlugin == null ? void 0 : workspacesPlugin.enabled) || !((_c = workspacesPlugin.instance) == null ? void 0 : _c.workspaces)) {
      return [];
    }
    const workspaces = Object.keys(workspacesPlugin.instance.workspaces);
    const lowerQuery = query.toLowerCase();
    return workspaces.filter(
      (workspace) => workspace.toLowerCase().includes(lowerQuery)
    );
  }
  renderSuggestion(workspace, el) {
    el.createEl("div", { text: workspace });
  }
  selectSuggestion(workspace) {
    this.inputEl.value = workspace;
    this.inputEl.trigger("input");
    this.close();
  }
};

// src/ui/command-suggest.ts
var import_obsidian3 = require("obsidian");
var CommandSuggest = class extends import_obsidian3.AbstractInputSuggest {
  constructor(app, inputEl) {
    super(app, inputEl);
    this.inputEl = inputEl;
  }
  getSuggestions(query) {
    var _a;
    const lowerQuery = query.toLowerCase();
    const commands = [];
    const appWithCommands = this.app;
    const allCommands = (_a = appWithCommands.commands) == null ? void 0 : _a.commands;
    if (allCommands) {
      for (const command of Object.values(allCommands)) {
        if (command.name.toLowerCase().includes(lowerQuery) || command.id.toLowerCase().includes(lowerQuery)) {
          commands.push(command);
        }
      }
    }
    commands.sort((a, b) => a.name.localeCompare(b.name));
    return commands.slice(0, 30);
  }
  renderSuggestion(command, el) {
    el.createEl("div", {
      text: command.name,
      cls: "suggestion-title"
    });
    el.createEl("small", {
      text: command.id,
      cls: "suggestion-note"
    });
  }
  selectSuggestion(command) {
    this.inputEl.value = command.id;
    this.inputEl.trigger("input");
    this.close();
  }
};
function getCommandById(app, commandId) {
  var _a;
  const appWithCommands = app;
  const commands = (_a = appWithCommands.commands) == null ? void 0 : _a.commands;
  return commands == null ? void 0 : commands[commandId];
}
function executeCommand(app, commandId) {
  var _a, _b;
  if (!commandId) return false;
  const appWithCommands = app;
  const result = (_b = (_a = appWithCommands.commands) == null ? void 0 : _a.executeCommandById) == null ? void 0 : _b.call(_a, commandId);
  return result !== false;
}

// src/ui/icon-picker.ts
var import_obsidian4 = require("obsidian");
var IconPicker = class extends import_obsidian4.Modal {
  constructor(app, currentIcon, callback) {
    super(app);
    this.searchResults = [];
    this.selectedIcon = currentIcon;
    this.callback = callback;
  }
  onOpen() {
    this.containerEl.addClass("mod-confirmation");
    this.modalEl.addClass("iconic-icon-picker");
    this.setTitle("Change icon");
    const searchSetting = new import_obsidian4.Setting(this.contentEl);
    if (!import_obsidian4.Platform.isPhone) {
      searchSetting.setName("Search");
    }
    searchSetting.addSearch((searchField) => {
      searchField.setPlaceholder("Search icons...").onChange(() => this.updateSearchResults());
      searchField.inputEl.enterKeyHint = "go";
      this.searchField = searchField;
    });
    if (this.selectedIcon) {
      this.searchField.setValue(this.selectedIcon);
    }
    this.searchResultsSetting = new import_obsidian4.Setting(this.contentEl);
    this.searchResultsSetting.settingEl.addClass("iconic-search-results");
    this.searchResultsSetting.settingEl.tabIndex = 0;
    this.searchResultsSetting.settingEl.addEventListener("wheel", (event) => {
      if (document.body.hasClass("mod-rtl")) {
        this.searchResultsSetting.settingEl.scrollLeft -= event.deltaY;
      } else {
        this.searchResultsSetting.settingEl.scrollLeft += event.deltaY;
      }
    }, { passive: true });
    const buttonContainer = this.modalEl.createDiv({ cls: "modal-button-container" });
    new import_obsidian4.ButtonComponent(buttonContainer).setButtonText("Cancel").onClick(() => this.close()).buttonEl.addClass("mod-cancel");
    new import_obsidian4.ButtonComponent(buttonContainer).setButtonText("Save").setCta().onClick(() => {
      this.callback(this.selectedIcon);
      this.close();
    });
    requestAnimationFrame(() => {
      this.searchField.inputEl.select();
      this.updateSearchResults();
    });
  }
  /**
   * Update search results based on current query
   */
  updateSearchResults() {
    const query = this.searchField.getValue().toLowerCase().trim();
    const fuzzySearch = (0, import_obsidian4.prepareFuzzySearch)(query);
    const matches = [];
    const iconIds = (0, import_obsidian4.getIconIds)();
    if (query) {
      for (const iconId of iconIds) {
        const iconName = this.formatIconName(iconId);
        if (iconId === query || iconId.toLowerCase() === query) {
          matches.push([0, [iconId, iconName]]);
        } else {
          const fuzzyMatch = fuzzySearch(iconName);
          if (fuzzyMatch) {
            matches.push([fuzzyMatch.score, [iconId, iconName]]);
          }
        }
      }
    } else {
      for (const iconId of iconIds) {
        const iconName = this.formatIconName(iconId);
        matches.push([0, [iconId, iconName]]);
      }
    }
    matches.sort(([scoreA], [scoreB]) => scoreA > scoreB ? -1 : 1);
    this.searchResults.length = 0;
    const maxResults = 100;
    for (const [, iconEntry] of matches) {
      this.searchResults.push(iconEntry);
      if (this.searchResults.length >= maxResults) break;
    }
    this.searchResultsSetting.clear();
    for (const [iconId, iconName] of this.searchResults) {
      this.searchResultsSetting.addExtraButton((iconButton) => {
        iconButton.setTooltip(iconName, {
          delay: 300,
          placement: import_obsidian4.Platform.isPhone ? "top" : "bottom"
        });
        const iconEl = iconButton.extraSettingsEl;
        iconEl.addClass("iconic-search-result");
        iconEl.tabIndex = -1;
        (0, import_obsidian4.setIcon)(iconEl, iconId);
        if (iconId === this.selectedIcon) {
          iconEl.addClass("is-selected");
        }
        iconEl.addEventListener("click", () => {
          this.selectedIcon = iconId;
          this.callback(iconId);
          this.close();
        });
        if (import_obsidian4.Platform.isPhone) {
          iconEl.addEventListener("contextmenu", () => {
            var _a;
            (_a = navigator.vibrate) == null ? void 0 : _a.call(navigator, 100);
          });
        }
      });
    }
    if (this.searchResults.length === 0) {
      this.searchResultsSetting.addExtraButton((button) => {
        button.extraSettingsEl.addClasses(["iconic-invisible", "iconic-search-result"]);
      });
    }
  }
  /**
   * Format icon ID into readable name
   */
  formatIconName(iconId) {
    let name = iconId.replace(/^lucide-/, "");
    name = name.replace(/-/g, " ");
    return name.split(" ").map(
      (word) => word.charAt(0).toUpperCase() + word.slice(1)
    ).join(" ");
  }
  onClose() {
    this.contentEl.empty();
  }
};

// src/ui/settings-tab.ts
var HomeBaseSettingTab = class extends import_obsidian5.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.icon = "lucide-house";
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    const isMobile = this.plugin.settings.separateMobile;
    const activeType = isMobile ? this.plugin.settings.mobileHomeBaseType : this.plugin.settings.homeBaseType;
    const activeValue = isMobile ? this.plugin.settings.mobileHomeBaseValue : this.plugin.settings.homeBaseValue;
    const generalGroup = createSettingsGroup(containerEl, void 0, "home-base");
    generalGroup.addSetting((setting) => {
      setting.setName("Type").setDesc("What to open as your home base").addDropdown((dropdown) => {
        let pluginDisabled = false;
        for (const type of Object.values(HomeBaseType)) {
          if (!this.plugin.hasRequiredPlugin(type)) {
            if (type === activeType) {
              pluginDisabled = true;
              dropdown.addOption(type, type);
            } else {
              dropdown.selectEl.createEl("option", {
                text: type,
                attr: { disabled: "true" }
              });
              continue;
            }
          } else {
            dropdown.addOption(type, type);
          }
        }
        dropdown.setValue(activeType || "File" /* File */).onChange(async (value) => {
          if (isMobile) {
            this.plugin.settings.mobileHomeBaseType = value;
          } else {
            this.plugin.settings.homeBaseType = value;
          }
          await this.plugin.saveSettings();
          const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
          const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
          this.display();
          requestAnimationFrame(() => {
            if (scrollContainer) {
              scrollContainer.scrollTop = scrollTop;
            }
          });
        });
        if (pluginDisabled) {
          setting.descEl.createDiv({
            text: "The required plugin has not been enabled or configured for this type.",
            cls: "mod-warning"
          });
        }
      });
    });
    if (!UNCHANGEABLE_TYPES.includes(activeType)) {
      generalGroup.addSetting((setting) => {
        let desc = "";
        let placeholder = "";
        if (activeType === "File" /* File */) {
          desc = "The file to open as your home base (supports .md, .mdx, .canvas, .base)";
          placeholder = "Path to home base file";
        } else if (activeType === "Workspace" /* Workspace */) {
          desc = "The workspace to load as your home base";
          placeholder = "Workspace name";
        } else if (activeType === "Random in folder" /* RandomFolder */ || activeType === "New note" /* NewNote */) {
          desc = activeType === "Random in folder" /* RandomFolder */ ? "The folder to pick a random file from" : "The folder to create new notes in";
          placeholder = "Folder path";
        } else if (activeType === "Journal" /* Journal */) {
          desc = "The journal name";
          placeholder = "Journal name";
        }
        setting.setName(activeType === "File" /* File */ ? "File" : activeType === "Workspace" /* Workspace */ ? "Workspace" : activeType === "Random in folder" /* RandomFolder */ || activeType === "New note" /* NewNote */ ? "Folder" : activeType === "Journal" /* Journal */ ? "Journal" : "Value").setDesc(desc).addText((text) => {
          if (activeType === "File" /* File */) {
            new FilePathSuggest(this.app, text.inputEl);
          } else if (activeType === "Workspace" /* Workspace */) {
            new WorkspaceSuggest(this.app, text.inputEl);
          } else if (activeType === "Random in folder" /* RandomFolder */ || activeType === "New note" /* NewNote */) {
            new FolderSuggest(this.app, text.inputEl);
          }
          text.setPlaceholder(placeholder).setValue(activeValue || "").onChange(async (value) => {
            if (isMobile) {
              this.plugin.settings.mobileHomeBaseValue = value;
            } else {
              this.plugin.settings.homeBaseValue = value;
            }
            await this.plugin.saveSettings();
          });
        });
      });
    }
    generalGroup.addSetting((setting) => {
      setting.setName("Open on startup").setDesc("Open the home base when launching Obsidian").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.openOnStartup).onChange(async (value) => {
          this.plugin.settings.openOnStartup = value;
          await this.plugin.saveSettings();
        });
      });
      if ((0, import_obsidian5.requireApiVersion)("1.11.0")) {
        const nativeOpenBehavior = this.plugin.homeService.getNativeOpenBehavior();
        if (nativeOpenBehavior) {
          setting.descEl.createDiv({
            text: `Note: This will override Obsidian's native "Default file to open" setting (currently set to "${nativeOpenBehavior}").`,
            cls: "mod-warning"
          });
        }
      }
    });
    generalGroup.addSetting((setting) => {
      setting.setName("Opening mode (startup)").setDesc("How to handle existing tabs when opening on startup").addDropdown((dropdown) => {
        for (const [value, label] of Object.entries(OPENING_MODE_OPTIONS)) {
          dropdown.addOption(value, label);
        }
        dropdown.setValue(this.plugin.settings.openMode).onChange(async (value) => {
          this.plugin.settings.openMode = value;
          await this.plugin.saveSettings();
        });
      });
    });
    generalGroup.addSetting((setting) => {
      setting.setName("Opening mode (manual)").setDesc("How to handle existing tabs when opening manually").addDropdown((dropdown) => {
        for (const [value, label] of Object.entries(OPENING_MODE_OPTIONS)) {
          dropdown.addOption(value, label);
        }
        dropdown.setValue(this.plugin.settings.manualOpenMode).onChange(async (value) => {
          this.plugin.settings.manualOpenMode = value;
          await this.plugin.saveSettings();
        });
      });
    });
    generalGroup.addSetting((setting) => {
      setting.setName("View mode").setDesc("How to open Markdown files").addDropdown((dropdown) => {
        for (const [value, label] of Object.entries(VIEW_MODE_OPTIONS)) {
          dropdown.addOption(value, label);
        }
        dropdown.setValue(this.plugin.settings.openViewMode).onChange(async (value) => {
          this.plugin.settings.openViewMode = value;
          await this.plugin.saveSettings();
        });
      });
    });
    generalGroup.addSetting((setting) => {
      setting.setName("Revert view on close").setDesc("When navigating away from the home base, restore the default view").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.revertView).onChange(async (value) => {
          this.plugin.settings.revertView = value;
          await this.plugin.saveSettings();
        });
      });
    });
    generalGroup.addSetting((setting) => {
      setting.setName("Auto-scroll").setDesc("When opening the home base, scroll to the bottom and focus on the last line").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.autoScroll).onChange(async (value) => {
          this.plugin.settings.autoScroll = value;
          await this.plugin.saveSettings();
        });
      });
    });
    generalGroup.addSetting((setting) => {
      setting.setName("Hide release notes").setDesc("Never display release notes when Obsidian updates").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.hideReleaseNotes).onChange(async (value) => {
          this.plugin.settings.hideReleaseNotes = value;
          await this.plugin.saveSettings();
        });
      });
    });
    const tabGroup = createSettingsGroup(containerEl, "Tab Behavior", "home-base");
    tabGroup.addSetting((setting) => {
      setting.setName("Open home base when all tabs are closed").setDesc("When you close all tabs, automatically open the home base").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.openWhenAllTabsClosed).onChange(async (value) => {
          this.plugin.settings.openWhenAllTabsClosed = value;
          await this.plugin.saveSettings();
        });
      });
    });
    tabGroup.addSetting((setting) => {
      setting.setName("Replace new tabs").setDesc('Open home base instead of new empty tabs (works independently of "open home base when all tabs are closed")').addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.replaceNewTab).onChange(async (value) => {
          this.plugin.settings.replaceNewTab = value;
          await this.plugin.saveSettings();
          const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
          const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
          this.display();
          requestAnimationFrame(() => {
            if (scrollContainer) {
              scrollContainer.scrollTop = scrollTop;
            }
          });
        });
      });
    });
    if (this.plugin.settings.replaceNewTab) {
      tabGroup.addSetting((setting) => {
        setting.setName("New tab replacement mode").setDesc("When to replace new tabs (only when no tabs are open, or always)").addDropdown((dropdown) => {
          for (const [value, label] of Object.entries(NEW_TAB_MODE_OPTIONS)) {
            dropdown.addOption(value, label);
          }
          dropdown.setValue(this.plugin.settings.newTabMode).onChange(async (value) => {
            this.plugin.settings.newTabMode = value;
            await this.plugin.saveSettings();
          });
        });
      });
      tabGroup.addSetting((setting) => {
        setting.setName("Use different home base for new tabs").setDesc("Configure a different home base to open for new tabs (instead of the main home base)").addToggle((toggle) => {
          toggle.setValue(this.plugin.settings.useDifferentFileForNewTab).onChange(async (value) => {
            this.plugin.settings.useDifferentFileForNewTab = value;
            await this.plugin.saveSettings();
            const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
            const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
            this.display();
            requestAnimationFrame(() => {
              if (scrollContainer) {
                scrollContainer.scrollTop = scrollTop;
              }
            });
          });
        });
      });
      if (this.plugin.settings.useDifferentFileForNewTab) {
        const desktopType = this.plugin.settings.newTabType || "File" /* File */;
        const desktopValue = this.plugin.settings.newTabValue || "";
        tabGroup.addSetting((setting) => {
          setting.setName("New tab type").setDesc("What to open for new tabs").addDropdown((dropdown) => {
            let pluginDisabled = false;
            for (const type of Object.values(HomeBaseType)) {
              if (!this.plugin.hasRequiredPlugin(type)) {
                if (type === desktopType) {
                  pluginDisabled = true;
                  dropdown.addOption(type, type);
                } else {
                  dropdown.selectEl.createEl("option", {
                    text: type,
                    attr: { disabled: "true" }
                  });
                  continue;
                }
              } else {
                dropdown.addOption(type, type);
              }
            }
            dropdown.setValue(desktopType).onChange(async (value) => {
              this.plugin.settings.newTabType = value;
              await this.plugin.saveSettings();
              const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
              const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
              this.display();
              requestAnimationFrame(() => {
                if (scrollContainer) {
                  scrollContainer.scrollTop = scrollTop;
                }
              });
            });
            if (pluginDisabled) {
              setting.descEl.createDiv({
                text: "The required plugin has not been enabled or configured for this type.",
                cls: "mod-warning"
              });
            }
          });
        });
        if (!UNCHANGEABLE_TYPES.includes(desktopType)) {
          tabGroup.addSetting((setting) => {
            let desc = "";
            let placeholder = "";
            if (desktopType === "File" /* File */) {
              desc = "The file to open for new tabs (supports .md, .mdx, .canvas, .base)";
              placeholder = "Path to new tab file";
            } else if (desktopType === "Workspace" /* Workspace */) {
              desc = "The workspace to load for new tabs";
              placeholder = "Workspace name";
            } else if (desktopType === "Random in folder" /* RandomFolder */) {
              desc = "The folder to pick a random file from for new tabs";
              placeholder = "Folder path";
            } else if (desktopType === "Journal" /* Journal */) {
              desc = "The journal name for new tabs";
              placeholder = "Journal name";
            }
            setting.setName(desktopType === "File" /* File */ ? "New tab file" : desktopType === "Workspace" /* Workspace */ ? "New tab workspace" : desktopType === "Random in folder" /* RandomFolder */ ? "New tab folder" : desktopType === "Journal" /* Journal */ ? "New tab journal" : "New tab value").setDesc(desc).addText((text) => {
              if (desktopType === "File" /* File */) {
                new FilePathSuggest(this.app, text.inputEl);
              } else if (desktopType === "Workspace" /* Workspace */) {
                new WorkspaceSuggest(this.app, text.inputEl);
              } else if (desktopType === "Random in folder" /* RandomFolder */) {
                new FolderSuggest(this.app, text.inputEl);
              }
              text.setPlaceholder(placeholder).setValue(desktopValue || "").onChange(async (value) => {
                this.plugin.settings.newTabValue = value;
                await this.plugin.saveSettings();
              });
            });
          });
        }
      }
    }
    const uiGroup = createSettingsGroup(containerEl, "UI Features", "home-base");
    uiGroup.addSetting((setting) => {
      setting.setName("Sticky home icon").setDesc("Show a home icon in the tab bar that stays pinned to the left (desktop only)").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.showStickyHomeIcon).onChange(async (value) => {
          this.plugin.settings.showStickyHomeIcon = value;
          await this.plugin.saveSettings();
          this.plugin.updateStickyTabIcon();
          const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
          const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
          this.display();
          requestAnimationFrame(() => {
            if (scrollContainer) {
              scrollContainer.scrollTop = scrollTop;
            }
          });
        });
      });
    });
    if (this.plugin.settings.showStickyHomeIcon) {
      uiGroup.addSetting((setting) => {
        setting.setName("Icon").setDesc("The icon to display in the sticky home icon").addButton((button) => {
          const iconName = this.plugin.settings.stickyIconName || "home";
          button.setButtonText("Change icon").setIcon(iconName).onClick(() => {
            const picker = new IconPicker(
              this.app,
              this.plugin.settings.stickyIconName,
              (icon) => {
                void (async () => {
                  this.plugin.settings.stickyIconName = icon;
                  await this.plugin.saveSettings();
                  this.plugin.stickyTabService.update();
                  this.display();
                })();
              }
            );
            picker.open();
          });
        });
      });
      uiGroup.addSetting((setting) => {
        setting.setName("Hide tab header").setDesc("Hide the sticky home tab header when it's open, using the sticky icon as the tab indicator").addToggle((toggle) => {
          toggle.setValue(this.plugin.settings.hideHomeTabHeader).onChange(async (value) => {
            this.plugin.settings.hideHomeTabHeader = value;
            await this.plugin.saveSettings();
            this.plugin.stickyTabService.updateTabHeaders();
          });
        });
      });
    }
    const mobileGroup = createSettingsGroup(containerEl, "Mobile", "home-base");
    mobileGroup.addSetting((setting) => {
      setting.setName("Separate mobile home base").setDesc("Use a different home base on mobile devices").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.separateMobile).onChange(async (value) => {
          this.plugin.settings.separateMobile = value;
          await this.plugin.saveSettings();
          const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
          const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
          this.display();
          requestAnimationFrame(() => {
            if (scrollContainer) {
              scrollContainer.scrollTop = scrollTop;
            }
          });
        });
      });
    });
    if (this.plugin.settings.separateMobile) {
      mobileGroup.addSetting((setting) => {
        setting.setName("Mobile home base").setDesc("What to open as your home base on mobile").addDropdown((dropdown) => {
          const mobileType = this.plugin.settings.mobileHomeBaseType || "File" /* File */;
          let pluginDisabled = false;
          for (const type of Object.values(HomeBaseType)) {
            if (!this.plugin.hasRequiredPlugin(type)) {
              if (type === mobileType) {
                pluginDisabled = true;
                dropdown.addOption(type, type);
              } else {
                dropdown.selectEl.createEl("option", {
                  text: type,
                  attr: { disabled: "true" }
                });
                continue;
              }
            } else {
              dropdown.addOption(type, type);
            }
          }
          dropdown.setValue(mobileType).onChange(async (value) => {
            this.plugin.settings.mobileHomeBaseType = value;
            await this.plugin.saveSettings();
            const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
            const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
            this.display();
            requestAnimationFrame(() => {
              if (scrollContainer) {
                scrollContainer.scrollTop = scrollTop;
              }
            });
          });
          if (pluginDisabled) {
            setting.descEl.createDiv({
              text: "The required plugin has not been enabled or configured for this type.",
              cls: "mod-warning"
            });
          }
        });
      });
      if (!UNCHANGEABLE_TYPES.includes(this.plugin.settings.mobileHomeBaseType)) {
        mobileGroup.addSetting((setting) => {
          const mobileType = this.plugin.settings.mobileHomeBaseType;
          let desc = "";
          let placeholder = "";
          if (mobileType === "File" /* File */) {
            desc = "The file to open as your home base on mobile";
            placeholder = "Path to home base file";
          } else if (mobileType === "Workspace" /* Workspace */) {
            desc = "The workspace to load as your home base on mobile";
            placeholder = "Workspace name";
          } else if (mobileType === "Random in folder" /* RandomFolder */) {
            desc = "The folder to pick a random file from on mobile";
            placeholder = "Folder path";
          } else if (mobileType === "Journal" /* Journal */) {
            desc = "The journal name for mobile";
            placeholder = "Journal name";
          }
          setting.setName(mobileType === "File" /* File */ ? "Mobile file" : mobileType === "Workspace" /* Workspace */ ? "Mobile workspace" : mobileType === "Random in folder" /* RandomFolder */ ? "Mobile folder" : mobileType === "Journal" /* Journal */ ? "Mobile journal" : "Mobile value").setDesc(desc).addText((text) => {
            if (mobileType === "File" /* File */) {
              new FilePathSuggest(this.app, text.inputEl);
            } else if (mobileType === "Workspace" /* Workspace */) {
              new WorkspaceSuggest(this.app, text.inputEl);
            } else if (mobileType === "Random in folder" /* RandomFolder */) {
              new FolderSuggest(this.app, text.inputEl);
            }
            text.setPlaceholder(placeholder).setValue(this.plugin.settings.mobileHomeBaseValue || "").onChange(async (value) => {
              this.plugin.settings.mobileHomeBaseValue = value;
              await this.plugin.saveSettings();
            });
          });
        });
      }
    }
    mobileGroup.addSetting((setting) => {
      setting.setName("Replace mobile new tab button").setDesc("Change the mobile new tab button to a home icon").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.replaceMobileNewTab).onChange(async (value) => {
          this.plugin.settings.replaceMobileNewTab = value;
          await this.plugin.saveSettings();
          this.plugin.updateMobileButton();
        });
      });
    });
    if (this.plugin.settings.useDifferentFileForNewTab) {
      mobileGroup.addSetting((setting) => {
        setting.setName("Separate mobile new tab").setDesc("Use a different new tab file on mobile devices").addToggle((toggle) => {
          toggle.setValue(this.plugin.settings.newTabSeparateMobile).onChange(async (value) => {
            this.plugin.settings.newTabSeparateMobile = value;
            await this.plugin.saveSettings();
            const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
            const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
            this.display();
            requestAnimationFrame(() => {
              if (scrollContainer) {
                scrollContainer.scrollTop = scrollTop;
              }
            });
          });
        });
      });
      if (this.plugin.settings.newTabSeparateMobile) {
        const mobileType = this.plugin.settings.mobileNewTabType || "File" /* File */;
        const mobileValue = this.plugin.settings.mobileNewTabValue || "";
        mobileGroup.addSetting((setting) => {
          setting.setName("Mobile new tab type").setDesc("What to open for new tabs on mobile").addDropdown((dropdown) => {
            let pluginDisabled = false;
            for (const type of Object.values(HomeBaseType)) {
              if (!this.plugin.hasRequiredPlugin(type)) {
                if (type === mobileType) {
                  pluginDisabled = true;
                  dropdown.addOption(type, type);
                } else {
                  dropdown.selectEl.createEl("option", {
                    text: type,
                    attr: { disabled: "true" }
                  });
                  continue;
                }
              } else {
                dropdown.addOption(type, type);
              }
            }
            dropdown.setValue(mobileType).onChange(async (value) => {
              this.plugin.settings.mobileNewTabType = value;
              await this.plugin.saveSettings();
              const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
              const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
              this.display();
              requestAnimationFrame(() => {
                if (scrollContainer) {
                  scrollContainer.scrollTop = scrollTop;
                }
              });
            });
            if (pluginDisabled) {
              setting.descEl.createDiv({
                text: "The required plugin has not been enabled or configured for this type.",
                cls: "mod-warning"
              });
            }
          });
        });
        if (!UNCHANGEABLE_TYPES.includes(mobileType)) {
          mobileGroup.addSetting((setting) => {
            let desc = "";
            let placeholder = "";
            if (mobileType === "File" /* File */) {
              desc = "The file to open for new tabs on mobile";
              placeholder = "Path to mobile new tab file";
            } else if (mobileType === "Workspace" /* Workspace */) {
              desc = "The workspace to load for new tabs on mobile";
              placeholder = "Workspace name";
            } else if (mobileType === "Random in folder" /* RandomFolder */) {
              desc = "The folder to pick a random file from for new tabs on mobile";
              placeholder = "Folder path";
            } else if (mobileType === "Journal" /* Journal */) {
              desc = "The journal name for new tabs on mobile";
              placeholder = "Journal name";
            }
            setting.setName(mobileType === "File" /* File */ ? "Mobile new tab file" : mobileType === "Workspace" /* Workspace */ ? "Mobile new tab workspace" : mobileType === "Random in folder" /* RandomFolder */ ? "Mobile new tab folder" : mobileType === "Journal" /* Journal */ ? "Mobile new tab journal" : "Mobile new tab value").setDesc(desc).addText((text) => {
              if (mobileType === "File" /* File */) {
                new FilePathSuggest(this.app, text.inputEl);
              } else if (mobileType === "Workspace" /* Workspace */) {
                new WorkspaceSuggest(this.app, text.inputEl);
              } else if (mobileType === "Random in folder" /* RandomFolder */) {
                new FolderSuggest(this.app, text.inputEl);
              }
              text.setPlaceholder(placeholder).setValue(mobileValue || "").onChange(async (value) => {
                this.plugin.settings.mobileNewTabValue = value;
                await this.plugin.saveSettings();
              });
            });
          });
        }
      }
    }
    const automationGroup = createSettingsGroup(containerEl, "Automation", "home-base");
    automationGroup.addSetting((setting) => {
      const commandId = this.plugin.settings.commandOnOpen;
      const command = commandId ? getCommandById(this.app, commandId) : void 0;
      const displayValue = command ? command.name : commandId;
      setting.setName("Command on open").setDesc("Run an Obsidian command when opening home base").addText((text) => {
        new CommandSuggest(this.app, text.inputEl);
        text.setPlaceholder("Search for a command...").setValue(displayValue || "").onChange(async (value) => {
          this.plugin.settings.commandOnOpen = value;
          await this.plugin.saveSettings();
        });
      }).addExtraButton((btn) => {
        btn.setIcon("x").setTooltip("Clear command").onClick(async () => {
          this.plugin.settings.commandOnOpen = "";
          await this.plugin.saveSettings();
          const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
          const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
          this.display();
          requestAnimationFrame(() => {
            if (scrollContainer) {
              scrollContainer.scrollTop = scrollTop;
            }
          });
        });
      });
    });
    automationGroup.addSetting((setting) => {
      setting.setName("Wait for git sync").setDesc("Wait before creating periodic or journal notes to allow git sync to finish pulling existing notes. Only applies when a note doesn't already exist.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.waitForGitSync).onChange(async (value) => {
          this.plugin.settings.waitForGitSync = value;
          await this.plugin.saveSettings();
          this.display();
        });
      });
    });
    if (this.plugin.settings.waitForGitSync) {
      automationGroup.addSetting((setting) => {
        setting.setName("Git sync timeout (seconds)").setDesc("How long to wait for git sync to finish before creating a new note").addText((text) => {
          var _a;
          text.inputEl.type = "number";
          text.setPlaceholder("3").setValue(((_a = this.plugin.settings.gitSyncTimeout) == null ? void 0 : _a.toString()) || "3").onChange(async (value) => {
            const numValue = parseInt(value);
            if (!isNaN(numValue) && numValue >= 0) {
              this.plugin.settings.gitSyncTimeout = numValue;
              await this.plugin.saveSettings();
            }
          });
        });
      });
    }
  }
};

// src/services/home-service.ts
var import_obsidian8 = require("obsidian");

// src/utils/file-utils.ts
var import_obsidian6 = require("obsidian");
var SUPPORTED_EXTENSIONS2 = ["md", "mdx", "canvas", "base", "kanban"];
function isSupportedExtension(extension) {
  return SUPPORTED_EXTENSIONS2.includes(extension);
}
function isMarkdownLike(file) {
  const ext = file.extension.toLowerCase();
  return ext === "md" || ext === "mdx";
}
function getFileByPath(app, path) {
  const exactMatch = app.vault.getAbstractFileByPath(path);
  if (exactMatch instanceof import_obsidian6.TFile) {
    return exactMatch;
  }
  const file = app.metadataCache.getFirstLinkpathDest(path, "/");
  return file;
}
function trimFileExtension(path) {
  const lastDot = path.lastIndexOf(".");
  if (lastDot > 0) {
    const ext = path.slice(lastDot + 1).toLowerCase();
    if (SUPPORTED_EXTENSIONS2.includes(ext)) {
      return path.slice(0, lastDot);
    }
  }
  return path;
}
function pathsEqual(path1, path2) {
  const norm1 = trimFileExtension(path1).toLowerCase();
  const norm2 = trimFileExtension(path2).toLowerCase();
  return norm1 === norm2;
}
function leafHasFile(leaf, filePath) {
  var _a, _b;
  const state = (_b = (_a = leaf.view) == null ? void 0 : _a.getState) == null ? void 0 : _b.call(_a);
  const leafFile = state == null ? void 0 : state.file;
  if (!leafFile) return false;
  return pathsEqual(leafFile, filePath);
}

// src/utils/homebase-resolver.ts
var import_obsidian7 = require("obsidian");
var import_obsidian_daily_notes_interface = __toESM(require_main(), 1);
function randomFile(app, root) {
  let files = [];
  if (root) {
    const resolvedRoot = app.vault.getFolderByPath(root);
    if (resolvedRoot) {
      files = getFilesInFolder(resolvedRoot);
    } else {
      const allFiles = app.vault.getFiles();
      const pattern = root.toLowerCase();
      files = allFiles.filter((f) => {
        const fileName = f.name.toLowerCase();
        return fileName === pattern || fileName === pattern.replace(/\.md$/, "");
      });
    }
  } else {
    files = app.vault.getFiles();
  }
  files = files.filter((f) => ["md", "canvas", "base"].includes(f.extension));
  if (files.length) {
    const index = Math.floor(Math.random() * files.length);
    return files[index] || null;
  }
  return null;
}
function getFilesInFolder(folder) {
  let files = [];
  for (const item of folder.children) {
    if (item instanceof import_obsidian7.TFile) {
      files.push(item);
    } else if (item instanceof import_obsidian7.TFolder) {
      files.push(...getFilesInFolder(item));
    }
  }
  return files;
}
function trimFile(file) {
  if (!file) return "";
  return file.extension === "md" ? file.path.slice(0, -3) : file.path;
}
var PERIODIC_INFO = {
  ["Daily Note" /* DailyNote */]: {
    noun: "day",
    adjective: "daily",
    create: import_obsidian_daily_notes_interface.createDailyNote,
    get: import_obsidian_daily_notes_interface.getDailyNote,
    getAll: import_obsidian_daily_notes_interface.getAllDailyNotes
  },
  ["Weekly Note" /* WeeklyNote */]: {
    noun: "week",
    adjective: "weekly",
    create: import_obsidian_daily_notes_interface.createWeeklyNote,
    get: import_obsidian_daily_notes_interface.getWeeklyNote,
    getAll: import_obsidian_daily_notes_interface.getAllWeeklyNotes
  },
  ["Monthly Note" /* MonthlyNote */]: {
    noun: "month",
    adjective: "monthly",
    create: import_obsidian_daily_notes_interface.createMonthlyNote,
    get: import_obsidian_daily_notes_interface.getMonthlyNote,
    getAll: import_obsidian_daily_notes_interface.getAllMonthlyNotes
  },
  ["Quarterly Note" /* QuarterlyNote */]: {
    noun: "quarter",
    adjective: "quarterly",
    create: import_obsidian_daily_notes_interface.createQuarterlyNote,
    get: import_obsidian_daily_notes_interface.getQuarterlyNote,
    getAll: import_obsidian_daily_notes_interface.getAllQuarterlyNotes
  },
  ["Yearly Note" /* YearlyNote */]: {
    noun: "year",
    adjective: "yearly",
    create: import_obsidian_daily_notes_interface.createYearlyNote,
    get: import_obsidian_daily_notes_interface.getYearlyNote,
    getAll: import_obsidian_daily_notes_interface.getAllYearlyNotes
  },
  ["File" /* File */]: null,
  ["Random file" /* Random */]: null,
  ["Random in folder" /* RandomFolder */]: null,
  ["Workspace" /* Workspace */]: null,
  ["Graph view" /* Graph */]: null,
  ["Nothing" /* None */]: null,
  ["Journal" /* Journal */]: null,
  ["New note" /* NewNote */]: null
};
async function getPeriodicNote(kind, plugin) {
  var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l;
  if (!window.moment) {
    return null;
  }
  const info = PERIODIC_INFO[kind];
  if (!info) {
    return null;
  }
  const date = (0, import_obsidian7.moment)().startOf(info.noun);
  const communityPlugins = ((_a = plugin.app.plugins) == null ? void 0 : _a.plugins) || {};
  const periodicNotesPlugin = communityPlugins["periodic-notes"];
  const isLegacy = !periodicNotesPlugin || (((_b = periodicNotesPlugin.manifest) == null ? void 0 : _b.version) || "0").startsWith("0");
  let note = null;
  if (isLegacy) {
    let all = info.getAll();
    note = info.get(date, all);
    if (!note && plugin.settings.waitForGitSync) {
      new import_obsidian7.Notice(`Home Base: Waiting for git sync (${plugin.settings.gitSyncTimeout}s)...`, 5e3);
      await delay(plugin.settings.gitSyncTimeout * 1e3);
      all = info.getAll();
      note = info.get(date, all);
    }
    if (!note) {
      note = await info.create(date);
    }
  } else {
    (_d = (_c = periodicNotesPlugin.cache) == null ? void 0 : _c.initialize) == null ? void 0 : _d.call(_c);
    note = (_f = (_e = periodicNotesPlugin.getPeriodicNote) == null ? void 0 : _e.call(periodicNotesPlugin, info.noun, date)) != null ? _f : null;
    if (!note && plugin.settings.waitForGitSync) {
      new import_obsidian7.Notice(`Home Base: Waiting for git sync (${plugin.settings.gitSyncTimeout}s)...`, 5e3);
      await delay(plugin.settings.gitSyncTimeout * 1e3);
      (_h = (_g = periodicNotesPlugin.cache) == null ? void 0 : _g.initialize) == null ? void 0 : _h.call(_g);
      note = (_j = (_i = periodicNotesPlugin.getPeriodicNote) == null ? void 0 : _i.call(periodicNotesPlugin, info.noun, date)) != null ? _j : null;
    }
    if (!note) {
      note = (_l = await ((_k = periodicNotesPlugin.createPeriodicNote) == null ? void 0 : _k.call(periodicNotesPlugin, info.noun, date))) != null ? _l : null;
    }
  }
  return note ? trimFile(note) : null;
}
async function getJournalNote(journalName, plugin) {
  var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l;
  const communityPlugins = ((_a = plugin.app.plugins) == null ? void 0 : _a.plugins) || {};
  const journals = communityPlugins["journals"];
  if (!journals) return null;
  try {
    const journal = (_b = journals.getJournal) == null ? void 0 : _b.call(journals, journalName);
    if (!journal) return null;
    const origAutoCreate = (_d = (_c = journal.config) == null ? void 0 : _c.value) == null ? void 0 : _d.autoCreate;
    (_e = journals.reprocessNotes) == null ? void 0 : _e.call(journals);
    if ((_f = journal.config) == null ? void 0 : _f.value) {
      journal.config.value.autoCreate = true;
    }
    await ((_g = journal.autoCreate) == null ? void 0 : _g.call(journal));
    if ((_h = journal.config) == null ? void 0 : _h.value) {
      journal.config.value.autoCreate = origAutoCreate;
    }
    const today = (0, import_obsidian7.moment)().locale("custom-journal-locale").startOf("day");
    let note = (_i = journal.get) == null ? void 0 : _i.call(journal, today);
    if (!note && plugin.settings.waitForGitSync) {
      new import_obsidian7.Notice(`Home Base: Waiting for git sync (${plugin.settings.gitSyncTimeout}s)...`, 5e3);
      await delay(plugin.settings.gitSyncTimeout * 1e3);
      (_j = journals.reprocessNotes) == null ? void 0 : _j.call(journals);
      note = (_k = journal.get) == null ? void 0 : _k.call(journal, today);
    }
    if (!note) return null;
    const path = (_l = journal.getNotePath) == null ? void 0 : _l.call(journal, note);
    return path ? path.replace(/\.md$/, "") : null;
  } catch (e) {
    return null;
  }
}
function resolvePathSync(type, value, app) {
  switch (type) {
    case "File" /* File */:
      return value || null;
    case "Daily Note" /* DailyNote */:
    case "Weekly Note" /* WeeklyNote */:
    case "Monthly Note" /* MonthlyNote */:
    case "Quarterly Note" /* QuarterlyNote */:
    case "Yearly Note" /* YearlyNote */: {
      const info = PERIODIC_INFO[type];
      if (info) {
        const date = (0, import_obsidian7.moment)().startOf(info.noun);
        const all = info.getAll();
        const note = info.get(date, all);
        return note ? trimFile(note) : null;
      }
      return null;
    }
    default:
      return type === "Random in folder" /* RandomFolder */ || type === "New note" /* NewNote */ ? null : value || null;
  }
}
async function computeHomeBasePath(type, value, plugin) {
  switch (type) {
    case "File" /* File */:
      return value || null;
    case "Random file" /* Random */: {
      const file = randomFile(plugin.app);
      return file ? trimFile(file) : null;
    }
    case "Random in folder" /* RandomFolder */: {
      const file = randomFile(plugin.app, value);
      return file ? trimFile(file) : null;
    }
    case "Daily Note" /* DailyNote */:
    case "Weekly Note" /* WeeklyNote */:
    case "Monthly Note" /* MonthlyNote */:
    case "Quarterly Note" /* QuarterlyNote */:
    case "Yearly Note" /* YearlyNote */:
      return await getPeriodicNote(type, plugin);
    case "Journal" /* Journal */:
      return await getJournalNote(value, plugin);
    case "New note" /* NewNote */: {
      const fileManager = plugin.app.fileManager;
      if (fileManager.createNewFile) {
        const file = await fileManager.createNewFile(plugin.app.vault.getRoot(), value || "Untitled");
        return file ? trimFile(file) : null;
      }
      return null;
    }
    case "Workspace" /* Workspace */:
    case "Graph view" /* Graph */:
    case "Nothing" /* None */:
      return null;
    default:
      return value || null;
  }
}
function delay(ms) {
  return new Promise((resolve) => setTimeout(resolve, ms));
}

// src/services/home-service.ts
var LEAF_TYPES = ["markdown", "canvas", "bases", "kanban"];
var DETACH_DELAY = 100;
var GRAPH_INIT_DELAY = 200;
var GRAPH_COMMAND_FALLBACK_DELAY = 300;
function equalsCaseless(path1, path2) {
  const normalize = (p) => p.toLowerCase().replace(/\.md$/, "");
  return normalize(path1) === normalize(path2);
}
var HomeBaseService = class {
  constructor(plugin) {
    this.ghostLeaves = /* @__PURE__ */ new WeakSet();
    this.plugin = plugin;
    this.app = plugin.app;
  }
  /**
   * Open home base with a specific mode (for startup/manual opens)
   */
  async openHomeBaseWithMode(mode, runCommand = true) {
    var _a;
    const homeBaseSettings = this.plugin.getHomeBaseSettings();
    if (homeBaseSettings.type === "Workspace" /* Workspace */) {
      return this.openWorkspace(homeBaseSettings.value);
    }
    if (homeBaseSettings.type === "Graph view" /* Graph */) {
      if (this.plugin.settings.showStickyHomeIcon) {
        return this.openHomeBaseInGhostTab({ runCommand });
      }
      return this.openGraph();
    }
    if (homeBaseSettings.type === "Nothing" /* None */) {
      if (runCommand) {
        this.runCommandOnOpen();
      }
      return true;
    }
    const resolvedPath = await computeHomeBasePath(
      homeBaseSettings.type,
      homeBaseSettings.value,
      this.plugin
    );
    if (!resolvedPath) {
      return false;
    }
    let file = this.app.metadataCache.getFirstLinkpathDest(resolvedPath, "/");
    if (!file) {
      file = getFileByPath(this.app, resolvedPath);
    }
    if (!file) {
      const untrimmedPath = resolvedPath.endsWith(".md") ? resolvedPath : `${resolvedPath}.md`;
      file = getFileByPath(this.app, untrimmedPath);
      if (!file && homeBaseSettings.type === "File" /* File */) {
        return false;
      }
    }
    if (!file) {
      return false;
    }
    if (mode === "replace-all") {
      await this.detachAllLeaves();
    } else if (mode === "replace-last") {
      const activeLeaf = (_a = this.app.workspace.getActiveViewOfType(import_obsidian8.View)) == null ? void 0 : _a.leaf;
      if (activeLeaf) {
        const viewState = activeLeaf.getViewState();
        if (viewState.pinned !== true) {
          void activeLeaf.detach();
          await new Promise((resolve) => setTimeout(resolve, DETACH_DELAY));
        }
      }
    }
    const existingLeaf = this.findExistingHomeBaseLeaf(file);
    if (existingLeaf && mode !== "replace-all") {
      const viewState = existingLeaf.getViewState();
      if (viewState.pinned === true && this.plugin.settings.showStickyHomeIcon) {
      } else {
        this.app.workspace.setActiveLeaf(existingLeaf);
        await this.configureView(existingLeaf, file);
        if (runCommand) {
          this.runCommandOnOpen();
        }
        return true;
      }
    }
    const newLeaf = mode === "retain" ? this.app.workspace.getLeaf("tab") : this.app.workspace.getLeaf(false);
    if (!newLeaf) {
      return false;
    }
    await newLeaf.openFile(file);
    this.app.workspace.setActiveLeaf(newLeaf);
    await this.configureView(newLeaf, file);
    if (runCommand) {
      this.runCommandOnOpen();
    }
    return true;
  }
  /**
   * Open workspace
   */
  async openWorkspace(workspaceName) {
    var _a, _b, _c;
    const workspacePlugin = (_b = (_a = this.app.internalPlugins) == null ? void 0 : _a.plugins) == null ? void 0 : _b.workspaces;
    if (!(workspacePlugin == null ? void 0 : workspacePlugin.enabled) || !((_c = workspacePlugin.instance) == null ? void 0 : _c.loadWorkspace)) {
      return false;
    }
    workspacePlugin.instance.loadWorkspace(workspaceName);
    await new Promise((resolve) => setTimeout(resolve, DETACH_DELAY));
    return true;
  }
  /**
   * Open graph view
   */
  async openGraph() {
    var _a, _b;
    await ((_b = (_a = this.app.commands) == null ? void 0 : _a.executeCommandById) == null ? void 0 : _b.call(_a, "graph:open"));
    return true;
  }
  // Removed deprecated openGraphInGhostTab - now integrated into openHomeBaseInGhostTab
  /**
   * Open the home base file
   * @param options Options for opening
   */
  async openHomeBase(options = {}) {
    const { runCommand = true } = options;
    const mode = this.plugin.settings.manualOpenMode;
    return this.openHomeBaseWithMode(mode, runCommand);
  }
  /**
   * Open home base in an empty leaf (for new tab replacement)
   */
  async openInLeaf(leaf) {
    const homeBaseSettings = this.plugin.getHomeBaseSettings();
    return this.openInLeafWithSettings(leaf, homeBaseSettings);
  }
  /**
   * Open a file in an empty leaf with custom settings
   * @param leaf The leaf to open the file in
   * @param settings Settings object with type and value
   * @param isNewTab Whether this is for new tab replacement (skips pinning/ghost tab logic)
   */
  async openInLeafWithSettings(leaf, settings, isNewTab = false) {
    if (settings.type === "Workspace" /* Workspace */) {
      await this.openWorkspace(settings.value);
      return true;
    }
    if (settings.type === "Graph view" /* Graph */) {
      await this.openGraph();
      return true;
    }
    if (settings.type === "Nothing" /* None */) {
      this.runCommandOnOpen();
      return true;
    }
    const resolvedPath = await computeHomeBasePath(
      settings.type,
      settings.value,
      this.plugin
    );
    if (!resolvedPath) {
      console.warn("[Home Base] Could not resolve path for new tab:", settings.type, settings.value);
      return false;
    }
    let file = this.app.metadataCache.getFirstLinkpathDest(resolvedPath, "/");
    if (!file) {
      file = getFileByPath(this.app, resolvedPath);
    }
    if (!file && !resolvedPath.endsWith(".md") && !resolvedPath.endsWith(".canvas") && !resolvedPath.endsWith(".base")) {
      const untrimmedPath = `${resolvedPath}.md`;
      file = getFileByPath(this.app, untrimmedPath);
    }
    if (!file) {
      console.warn("[Home Base] File not found for new tab:", resolvedPath);
      return false;
    }
    if (isNewTab) {
      console.debug("[Home Base] openInLeafWithSettings: isNewTab=true, bypassing ghost tab logic", {
        file: file.path,
        settings
      });
      await leaf.openFile(file);
      await this.configureView(leaf, file);
      this.runCommandOnOpen();
      return true;
    }
    const isTrulyEmpty = !leaf.view || leaf.view.getViewType() === "empty";
    if (this.plugin.settings.showStickyHomeIcon && isTrulyEmpty) {
      const isRandom = settings.type === "Random file" /* Random */ || settings.type === "Random in folder" /* RandomFolder */ || settings.type === "Daily Note" /* DailyNote */ || settings.type === "Weekly Note" /* WeeklyNote */ || settings.type === "Monthly Note" /* MonthlyNote */ || settings.type === "Yearly Note" /* YearlyNote */;
      const ghostTab = this.findGhostTab(file, isRandom);
      if (ghostTab) {
        void leaf.detach();
        this.app.workspace.setActiveLeaf(ghostTab);
        await this.configureView(ghostTab, file);
        this.runCommandOnOpen();
        return true;
      }
      this.ghostLeaves.add(leaf);
      if (!isRandom) {
        leaf.setPinned(true);
      }
    }
    await leaf.openFile(file);
    await this.configureView(leaf, file);
    this.runCommandOnOpen();
    return true;
  }
  /**
   * Configure the view mode for a leaf
   */
  async configureView(leaf, file) {
    const settings = this.plugin.settings;
    const view = leaf.view;
    if (!isMarkdownLike(file) || !(view instanceof import_obsidian8.MarkdownView)) {
      return;
    }
    const state = view.getState();
    if (settings.revertView) {
      this.lastView = new WeakRef(view);
    }
    if (settings.autoScroll) {
      const count = view.editor.lineCount();
      if (state.mode === "preview") {
        view.previewMode.applyScroll(count - 4);
      } else {
        view.editor.setCursor(count);
        view.editor.focus();
      }
    }
    if (settings.openViewMode !== "default") {
      switch (settings.openViewMode) {
        case "preview":
          state.mode = "preview";
          break;
        case "source":
          state.mode = "source";
          state.source = true;
          break;
        case "live":
          state.mode = "source";
          state.source = false;
          break;
      }
      await leaf.setViewState({
        type: "markdown",
        state
      });
    }
  }
  /**
   * Revert view to default when navigating away from home base
   */
  async revertView() {
    const settings = this.plugin.settings;
    if (!settings.revertView || !this.lastView || settings.openViewMode === "default") {
      return;
    }
    const view = this.lastView.deref();
    if (!view) {
      this.lastView = void 0;
      return;
    }
    const homeBaseSettings = this.plugin.getHomeBaseSettings();
    const resolvedPath = await computeHomeBasePath(
      homeBaseSettings.type,
      homeBaseSettings.value,
      this.plugin
    );
    if (!resolvedPath) {
      this.lastView = void 0;
      return;
    }
    const currentFile = view.file;
    if (currentFile && equalsCaseless(trimFile(currentFile), resolvedPath)) {
      return;
    }
    const state = view.getState();
    const config = this.app.vault.config;
    const mode = (config == null ? void 0 : config.defaultViewMode) || "source";
    const source = (config == null ? void 0 : config.livePreview) !== void 0 ? !config.livePreview : false;
    if (view.leaf.getViewState().type === "markdown" && (mode !== state.mode || source !== state.source)) {
      state.mode = mode;
      state.source = source;
      await view.leaf.setViewState({ type: "markdown", state, active: true });
    }
    this.lastView = void 0;
  }
  /**
   * Run the configured command after opening
   */
  runCommandOnOpen() {
    const commandId = this.plugin.settings.commandOnOpen;
    if (commandId) {
      setTimeout(() => {
        executeCommand(this.app, commandId);
      }, 100);
    }
  }
  /**
   * Find an existing leaf that has the home base file open
   */
  findExistingHomeBaseLeaf(file) {
    if (!file) return null;
    const homeBasePath = file.path;
    const leaves = LEAF_TYPES.flatMap(
      (type) => this.app.workspace.getLeavesOfType(type)
    );
    for (const leaf of leaves) {
      if (leafHasFile(leaf, homeBasePath)) {
        return leaf;
      }
    }
    return null;
  }
  /**
   * Check if a leaf is a ghost tab
   * Ghost tab is identified by being in our internal ghostLeaves set
   * Only tabs specifically created for the sticky icon are ghost tabs
   */
  isGhostLeaf(leaf) {
    return this.ghostLeaves.has(leaf);
  }
  /**
   * Find the ghost tab (the one opened via sticky icon)
   * Ghost tab is identified by being in our internal ghostLeaves set
   * Only returns existing ghost tabs, doesn't create new ones
   */
  findGhostTab(file, isRandom = false) {
    if (!file) return null;
    const homeBasePath = file.path;
    const leaves = [];
    this.app.workspace.iterateAllLeaves((leaf) => {
      var _a;
      const viewType = (_a = leaf.view) == null ? void 0 : _a.getViewType();
      if (viewType && LEAF_TYPES.includes(viewType)) {
        leaves.push(leaf);
      }
    });
    for (const leaf of leaves) {
      if (this.ghostLeaves.has(leaf) && leafHasFile(leaf, homeBasePath)) {
        return leaf;
      }
    }
    return null;
  }
  /**
   * Open home base in ghost tab (for sticky icon)
   * Ghost tab is pinned and hidden (if setting enabled)
   * Only one ghost tab should exist at a time
   * Works for file-based types and Graph view
   * Note: Random types don't pin (since file changes each time)
   * Note: Workspace and None don't work (workspace changes layout, None doesn't open anything)
   */
  async openHomeBaseInGhostTab(options = {}) {
    const { runCommand = true } = options;
    const homeBaseSettings = this.plugin.getHomeBaseSettings();
    if (homeBaseSettings.type === "Workspace" /* Workspace */ || homeBaseSettings.type === "Nothing" /* None */) {
      return this.openHomeBaseWithMode("retain", runCommand);
    }
    if (homeBaseSettings.type === "Graph view" /* Graph */) {
      let ghostTab2 = this.findGraphGhostTab();
      if (ghostTab2) {
        this.ghostLeaves.add(ghostTab2);
        ghostTab2.setPinned(true);
        this.app.workspace.setActiveLeaf(ghostTab2, { focus: !this.isSettingsModalOpen() });
        if (runCommand) this.runCommandOnOpen();
        return true;
      }
      const newLeaf = this.app.workspace.getLeaf("tab");
      if (newLeaf) {
        await newLeaf.setViewState({ type: "graph", state: {} });
        await new Promise((resolve) => setTimeout(resolve, GRAPH_INIT_DELAY));
        this.ghostLeaves.add(newLeaf);
        newLeaf.setPinned(true);
        this.app.workspace.setActiveLeaf(newLeaf, { focus: !this.isSettingsModalOpen() });
        if (runCommand) this.runCommandOnOpen();
        return true;
      }
      await this.openGraph();
      await new Promise((resolve) => setTimeout(resolve, GRAPH_COMMAND_FALLBACK_DELAY));
      ghostTab2 = this.findGraphGhostTab();
      if (ghostTab2) {
        this.ghostLeaves.add(ghostTab2);
        ghostTab2.setPinned(true);
        this.app.workspace.setActiveLeaf(ghostTab2, { focus: !this.isSettingsModalOpen() });
        if (runCommand) this.runCommandOnOpen();
        return true;
      }
      return false;
    }
    const isRandom = homeBaseSettings.type === "Random file" /* Random */ || homeBaseSettings.type === "Random in folder" /* RandomFolder */ || homeBaseSettings.type === "Daily Note" /* DailyNote */ || homeBaseSettings.type === "Weekly Note" /* WeeklyNote */ || homeBaseSettings.type === "Monthly Note" /* MonthlyNote */ || homeBaseSettings.type === "Yearly Note" /* YearlyNote */;
    if (this.isSettingsModalOpen()) {
      return false;
    }
    const resolvedPath = await computeHomeBasePath(
      homeBaseSettings.type,
      homeBaseSettings.value,
      this.plugin
    );
    if (!resolvedPath) {
      return false;
    }
    let file = this.app.metadataCache.getFirstLinkpathDest(resolvedPath, "/");
    if (!file) {
      file = getFileByPath(this.app, resolvedPath);
    }
    if (!file && !resolvedPath.endsWith(".md") && !resolvedPath.endsWith(".canvas") && !resolvedPath.endsWith(".base")) {
      const untrimmedPath = `${resolvedPath}.md`;
      file = getFileByPath(this.app, untrimmedPath);
    }
    if (!file) {
      return false;
    }
    const ghostTab = this.findGhostTab(file, isRandom);
    console.debug("[Home Base] openHomeBaseInGhostTab:", {
      file: file.path,
      ghostTabFound: !!ghostTab,
      isRandom,
      zenMode: document.body.classList.contains("zenmode-active")
    });
    if (ghostTab) {
      const shouldFocus2 = !this.isSettingsModalOpen();
      this.app.workspace.setActiveLeaf(ghostTab, { focus: shouldFocus2 });
      await this.configureView(ghostTab, file);
      if (runCommand) {
        this.runCommandOnOpen();
      }
      return true;
    }
    const newGhostTab = this.app.workspace.getLeaf("tab");
    this.ghostLeaves.add(newGhostTab);
    await newGhostTab.openFile(file);
    if (!isRandom) {
      newGhostTab.setPinned(true);
    }
    setTimeout(() => {
      this.plugin.stickyTabService.updateTabHeaders();
    }, 50);
    const shouldFocus = !this.isSettingsModalOpen();
    this.app.workspace.setActiveLeaf(newGhostTab, { focus: shouldFocus });
    await this.configureView(newGhostTab, file);
    if (runCommand) {
      this.runCommandOnOpen();
    }
    return true;
  }
  /**
   * Find an empty leaf
   */
  findEmptyLeaf() {
    const leaves = this.app.workspace.getLeavesOfType("empty");
    return leaves[0] || null;
  }
  /**
   * Get the home base file
   */
  getHomeBaseFile() {
    const homeBaseSettings = this.plugin.getHomeBaseSettings();
    const path = resolvePathSync(homeBaseSettings.type, homeBaseSettings.value, this.app);
    if (!path) return null;
    return getFileByPath(this.app, path);
  }
  /**
   * Fast detach all leaves using changeLayout (like homepage plugin)
   * This is much faster than iterating and detaching leaves individually
   */
  async detachAllLeaves() {
    var _a, _b;
    const layout = this.app.workspace.getLayout();
    layout.main = {
      "id": "5324373015726ba8",
      "type": "split",
      "children": [{
        "id": "4509724f8bf84da7",
        "type": "tabs",
        "children": [{
          "id": "e7a7b303c61786dc",
          "type": "leaf",
          "state": { "type": "empty", "state": {}, "icon": "lucide-file", "title": "New tab" }
        }]
      }],
      "direction": "vertical"
    };
    layout.active = "e7a7b303c61786dc";
    await this.app.workspace.changeLayout(layout);
    if (import_obsidian8.Platform.isMobile) {
      (_b = (_a = this.app.workspace.rightSplit) == null ? void 0 : _a.updateInfo) == null ? void 0 : _b.call(_a);
    }
  }
  /**
   * Close all leaves in the main workspace except the specified one
   * Simplified approach: iterate all leaves and close those in main workspace
   */
  async closeAllLeavesExcept(exceptLeaf) {
    const leavesToClose = [];
    this.app.workspace.iterateAllLeaves((leaf) => {
      if (leaf === exceptLeaf) {
        return;
      }
      const view = leaf.view;
      let container = null;
      if (view) {
        const viewAny = view;
        container = viewAny.containerEl || null;
      }
      if (!container) {
        const leafAny = leaf;
        container = leafAny.containerEl || null;
      }
      if (container) {
        const rootWorkspace = container.closest(".workspace-split.mod-vertical.mod-root");
        const leftSidebar = container.closest(".workspace-split.mod-left-split");
        const rightSidebar = container.closest(".workspace-split.mod-right-split");
        if (rootWorkspace && !leftSidebar && !rightSidebar) {
          leavesToClose.push(leaf);
        }
      } else {
        if (exceptLeaf === null) {
          try {
            const viewState = leaf.getViewState();
            if (viewState) {
              leavesToClose.push(leaf);
            }
          } catch (e) {
          }
        }
      }
    });
    for (const leaf of leavesToClose) {
      void leaf.detach();
    }
    await new Promise((resolve) => setTimeout(resolve, 200));
  }
  /**
   * Find an existing graph leaf that should be treated as a ghost tab
   */
  findGraphGhostTab() {
    let graphLeaves = [];
    this.app.workspace.iterateAllLeaves((leaf) => {
      var _a;
      if (((_a = leaf.view) == null ? void 0 : _a.getViewType()) === "graph") {
        graphLeaves.push(leaf);
      }
    });
    const pinned = graphLeaves.find((l) => l.getViewState().pinned === true);
    if (pinned) return pinned;
    if (graphLeaves.length === 1 && graphLeaves[0]) return graphLeaves[0];
    return null;
  }
  /**
   * Check if the focused tab is the home base
   */
  isFocusedOnHomeBase() {
    var _a, _b;
    const activeLeaf = (_a = this.app.workspace.getActiveViewOfType(import_obsidian8.View)) == null ? void 0 : _a.leaf;
    if (!activeLeaf) return false;
    const homeBaseSettings = this.plugin.getHomeBaseSettings();
    if (homeBaseSettings.type === "Graph view" /* Graph */) {
      return ((_b = activeLeaf.view) == null ? void 0 : _b.getViewType()) === "graph";
    }
    const homeBaseFile = this.getHomeBaseFile();
    if (!homeBaseFile) return false;
    return leafHasFile(activeLeaf, homeBaseFile.path);
  }
  /**
   * Check if home base file exists
   */
  homeBaseExists() {
    const homeBaseSettings = this.plugin.getHomeBaseSettings();
    const path = resolvePathSync(homeBaseSettings.type, homeBaseSettings.value, this.app);
    if (!path) return false;
    return getFileByPath(this.app, path) !== null;
  }
  /**
   * Get the native Obsidian open behavior setting (from app.json)
   * @returns The native setting value or undefined if not supported/found
   */
  getNativeOpenBehavior() {
    const config = this.app.vault.config;
    if (!config) return void 0;
    return config.openBehavior;
  }
  /**
   * Check if the settings modal is currently open
   */
  isSettingsModalOpen() {
    const settingsModal = document.querySelector(".modal-container.mod-settings") || document.querySelector(".modal.mod-settings") || document.querySelector(".vertical-tab-content");
    if (!settingsModal) {
      const allModals = document.querySelectorAll(".modal-container");
      for (const modal of Array.from(allModals)) {
        if (modal.querySelector(".vertical-tab-content") || modal.querySelector(".settings-content") || modal.classList.contains("mod-settings")) {
          return true;
        }
      }
    }
    return settingsModal !== null;
  }
  /**
   * Set the active file as home base
   */
  async setActiveFileAsHomeBase() {
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile) return false;
    if (!isSupportedExtension(activeFile.extension.toLowerCase())) {
      return false;
    }
    if (this.plugin.settings.separateMobile && import_obsidian8.Platform.isMobile) {
      this.plugin.settings.mobileHomeBaseType = "File" /* File */;
      this.plugin.settings.mobileHomeBaseValue = activeFile.path;
    } else {
      this.plugin.settings.homeBaseType = "File" /* File */;
      this.plugin.settings.homeBaseValue = activeFile.path;
    }
    await this.plugin.saveSettings();
    return true;
  }
  /**
   * Check if active file can be set as home base
   */
  canSetActiveFileAsHomeBase() {
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile) return false;
    return isSupportedExtension(activeFile.extension.toLowerCase());
  }
  /**
   * Restore ghost leaves from previous session
   * This identifies pinned home base tabs that should be treated as ghost leaves
   */
  restoreGhostLeaves() {
    if (!this.plugin.settings.showStickyHomeIcon) {
      return;
    }
    const homeBaseSettings = this.plugin.getHomeBaseSettings();
    const homeBasePath = resolvePathSync(homeBaseSettings.type, homeBaseSettings.value, this.app);
    if (!homeBasePath && homeBaseSettings.type !== "Graph view" /* Graph */) return;
    const isRandom = homeBaseSettings.type === "Random file" /* Random */ || homeBaseSettings.type === "Random in folder" /* RandomFolder */ || homeBaseSettings.type === "Daily Note" /* DailyNote */ || homeBaseSettings.type === "Weekly Note" /* WeeklyNote */ || homeBaseSettings.type === "Monthly Note" /* MonthlyNote */ || homeBaseSettings.type === "Yearly Note" /* YearlyNote */;
    if (isRandom) return;
    if (homeBaseSettings.type === "Graph view" /* Graph */) {
      const ghostTab = this.findGraphGhostTab();
      if (ghostTab && ghostTab.getViewState().pinned === true) {
        this.ghostLeaves.add(ghostTab);
      }
      return;
    }
    const leaves = [];
    this.app.workspace.iterateAllLeaves((leaf) => {
      var _a;
      const viewType = (_a = leaf.view) == null ? void 0 : _a.getViewType();
      if (viewType && LEAF_TYPES.includes(viewType)) {
        leaves.push(leaf);
      }
    });
    for (const leaf of leaves) {
      if (homeBasePath && leafHasFile(leaf, homeBasePath)) {
        const viewState = leaf.getViewState();
        if (viewState.pinned === true && !this.ghostLeaves.has(leaf)) {
          this.ghostLeaves.add(leaf);
          break;
        }
      }
    }
  }
};

// src/services/new-tab-service.ts
var import_obsidian9 = require("obsidian");
var STARTUP_RESTORE_DELAY = 500;
var DETACH_SETTLE_DELAY = 200;
var PLUGIN_RACE_DELAY = 50;
var NewTabService = class {
  constructor(plugin) {
    this.existingLeaves = /* @__PURE__ */ new WeakSet();
    this.isStartup = true;
    this.startupCompleted = false;
    this.plugin = plugin;
    this.app = plugin.app;
  }
  /**
   * Track all existing leaves (for new tab detection)
   * This must be called even when startup is handled elsewhere
   */
  trackExistingLeaves() {
    this.app.workspace.iterateAllLeaves((leaf) => {
      this.existingLeaves.add(leaf);
    });
    this.startupCompleted = true;
    this.isStartup = false;
  }
  /**
   * Initialize the service - called when layout is ready
   */
  initialize() {
    this.trackExistingLeaves();
    void this.handleStartup();
  }
  /**
   * Handle app startup - open home base if needed
   * Only called on actual app startup, not plugin reloads
   */
  async handleStartup() {
    const settings = this.plugin.settings;
    const homeBaseSettings = this.plugin.getHomeBaseSettings();
    if (!settings.openOnStartup || !homeBaseSettings.value && homeBaseSettings.type === "File" /* File */) {
      this.startupCompleted = true;
      this.isStartup = false;
      return;
    }
    if (await this.hasUrlParams()) {
      this.startupCompleted = true;
      this.isStartup = false;
      return;
    }
    await new Promise((resolve) => setTimeout(resolve, STARTUP_RESTORE_DELAY));
    if (settings.openMode === "replace-all") {
      let exceptLeaf = null;
      if (!settings.hideReleaseNotes) {
        const allLeaves = this.app.workspace.getLeavesOfType("markdown");
        for (const leaf of allLeaves) {
          const view = leaf.view;
          const markdownView = view;
          if (markdownView.file) {
            const file = markdownView.file;
            const configDir = this.app.vault.configDir;
            if (file.path.includes("release") || file.path.includes(configDir)) {
              const container = markdownView.containerEl;
              if (container && container.querySelector(".release-notes")) {
                exceptLeaf = leaf;
                break;
              }
            }
          }
        }
      }
      await this.plugin.homeService.closeAllLeavesExcept(exceptLeaf);
      await new Promise((resolve) => setTimeout(resolve, DETACH_SETTLE_DELAY));
    }
    if (settings.showStickyHomeIcon) {
      await this.plugin.homeService.openHomeBaseInGhostTab({
        runCommand: true
      });
    } else {
      await this.plugin.homeService.openHomeBase({
        replaceActiveLeaf: false,
        runCommand: true
      });
    }
    this.startupCompleted = true;
    this.isStartup = false;
  }
  /**
   * Check if the settings modal is currently open
   */
  isSettingsModalOpen() {
    const settingsModal = document.querySelector(".modal-container.mod-settings") || document.querySelector(".modal.mod-settings") || document.querySelector(".vertical-tab-content");
    if (!settingsModal) {
      const allModals = document.querySelectorAll(".modal-container");
      for (const modal of Array.from(allModals)) {
        if (modal.querySelector(".vertical-tab-content") || modal.querySelector(".settings-content") || modal.classList.contains("mod-settings")) {
          return true;
        }
      }
    }
    return settingsModal !== null;
  }
  /**
   * Check for URL parameters that indicate Obsidian was opened via a link
   * Based on obsidian-homepage implementation
   */
  async hasUrlParams() {
    var _a;
    const windowAny = window;
    const capacitor = windowAny.Capacitor;
    if ((_a = capacitor == null ? void 0 : capacitor.Plugins) == null ? void 0 : _a.App) {
      try {
        const launchUrl = await capacitor.Plugins.App.getLaunchUrl();
        if (launchUrl == null ? void 0 : launchUrl.url) {
          const url = new URL(launchUrl.url);
          const params = Array.from(url.searchParams.keys());
          const action = url.hostname;
          if (["open", "advanced-uri"].includes(action) && ["file", "filepath", "workspace"].some((e) => params.includes(e))) {
            return true;
          }
        }
      } catch (e) {
      }
    }
    const obsAct = windowAny.OBS_ACT;
    if (obsAct) {
      const params = Object.keys(obsAct);
      const action = obsAct.action;
      if (action && ["open", "advanced-uri"].includes(action) && ["file", "filepath", "workspace"].some((e) => params.includes(e))) {
        return true;
      }
    }
    return false;
  }
  /**
   * Handle layout change event - check for new empty tabs
   * Based on new-tab-default-page implementation
   */
  handleLayoutChange() {
    if (this.isStartup || !this.startupCompleted) {
      return;
    }
    this.app.workspace.iterateAllLeaves((leaf) => {
      if (this.existingLeaves.has(leaf)) {
        return;
      }
      this.existingLeaves.add(leaf);
      if (!this.isEmptyTab(leaf)) {
        return;
      }
      const isOnlyTab = this.isOnlyTab(leaf);
      if (isOnlyTab && this.plugin.settings.openWhenAllTabsClosed === true) {
        void this.replaceEmptyTab(leaf, true);
        return;
      }
      if (this.plugin.settings.replaceNewTab !== true) {
        return;
      }
      if (this.plugin.settings.replaceNewTab !== true) {
        return;
      }
      if (this.plugin.settings.newTabMode === "only-when-empty") {
        if (!isOnlyTab) {
          return;
        }
      }
      void this.replaceEmptyTab(leaf, false);
    });
  }
  /**
   * Check if a leaf is an empty tab
   * IMPORTANT: Only returns true if the leaf is truly empty (no file opened)
   * If a file is already opened in the leaf, it's not empty and should NOT be replaced
   */
  isEmptyTab(leaf) {
    if (!leaf.view) return true;
    if (leaf.view.getViewType() !== "empty") {
      return false;
    }
    const viewState = leaf.getViewState();
    if (viewState && viewState.file) {
      return false;
    }
    return true;
  }
  /**
   * Check if this is the only tab in the main workspace
   * Only counts root leaves (main workspace tabs), not sidebar tabs
   * Based on obsidian-disable-tabs pattern using iterateRootLeaves
   */
  isOnlyTab(leaf) {
    let tabCount = 0;
    this.app.workspace.iterateRootLeaves((l) => {
      tabCount++;
    });
    const result = tabCount === 1;
    console.debug("[Home Base] isOnlyTab:", {
      leaf,
      tabCount,
      isOnlyTab: result
    });
    return result;
  }
  /**
   * Replace an empty tab with the home base or new tab file
   * @param leaf The leaf to replace
   * @param isAllTabsClosed Whether this is triggered by "all tabs closed" (true) or "new tab replacement" (false)
   */
  async replaceEmptyTab(leaf, isAllTabsClosed = false) {
    if (!isAllTabsClosed) {
      if (this.plugin.settings.replaceNewTab !== true) {
        console.debug("[Home Base] replaceEmptyTab: replaceNewTab is not true, aborting");
        return;
      }
    }
    await new Promise((resolve) => setTimeout(resolve, PLUGIN_RACE_DELAY));
    if (!isAllTabsClosed) {
      if (this.plugin.settings.replaceNewTab !== true) {
        console.debug("[Home Base] replaceEmptyTab: replaceNewTab changed during delay, aborting");
        return;
      }
    } else {
      if (this.plugin.settings.openWhenAllTabsClosed !== true) {
        console.debug("[Home Base] replaceEmptyTab: openWhenAllTabsClosed changed during delay, aborting");
        return;
      }
    }
    if (!this.isEmptyTab(leaf)) {
      console.debug("[Home Base] replaceEmptyTab: Tab is no longer empty, skipping");
      return;
    }
    const settings = isAllTabsClosed ? this.plugin.getHomeBaseSettings() : this.plugin.getNewTabSettings();
    console.debug("[Home Base] replaceEmptyTab:", {
      leaf,
      isAllTabsClosed,
      settings,
      replaceNewTab: this.plugin.settings.replaceNewTab,
      newTabMode: this.plugin.settings.newTabMode,
      useDifferentFileForNewTab: this.plugin.settings.useDifferentFileForNewTab
    });
    const success = await this.plugin.homeService.openInLeafWithSettings(leaf, settings, true);
    if (!success) {
      console.warn("[Home Base] Failed to open file:", settings);
    } else {
      console.debug("[Home Base] replaceEmptyTab: Successfully opened file");
    }
  }
  /**
   * Force check for empty workspace and open home base
   */
  async openIfEmpty() {
    const activeView = this.app.workspace.getActiveViewOfType(import_obsidian9.View);
    const activeLeaf = activeView == null ? void 0 : activeView.leaf;
    if (!activeLeaf) return;
    if (this.isEmptyTab(activeLeaf) && this.isOnlyTab(activeLeaf)) {
      await this.plugin.homeService.openInLeaf(activeLeaf);
    }
  }
};

// src/services/sticky-tab-service.ts
var import_obsidian10 = require("obsidian");
var TAB_HEADER_OPEN_DELAY = 150;
var ICON_PLACEMENT_CHECK_INTERVAL = 100;
var WINDOW_OPEN_CONTAINER_DELAY = 100;
var STICKY_ICON_CLASS = "home-base-sticky-icon";
var STICKY_ICON_ACTIVE_CLASS = "home-base-sticky-icon-active";
var StickyTabService = class {
  constructor(plugin) {
    this.stickyIconEl = null;
    this.layoutChangeHandler = null;
    this.tabHeaderUpdateTimeout = null;
    this.sidebarObserver = null;
    this.tabHeaderObserver = null;
    this.plugin = plugin;
  }
  /**
   * Update the sticky tab icon based on settings
   */
  update() {
    if (import_obsidian10.Platform.isMobile) {
      this.remove();
      this.updateTabHeaders();
      this.updateWorkspaceClass(false);
      return;
    }
    if (this.plugin.settings.showStickyHomeIcon) {
      if (this.stickyIconEl) {
        const iconName = this.plugin.settings.stickyIconName || "home";
        (0, import_obsidian10.setIcon)(this.stickyIconEl, iconName);
      } else {
        this.create();
      }
      this.updateWorkspaceClass(true);
    } else {
      this.remove();
      this.updateTabHeaders();
      this.updateWorkspaceClass(false);
    }
  }
  /**
   * Add/remove CSS class on all workspaces to conditionally apply styles
   */
  updateWorkspaceClass(enabled) {
    const applyToDocument = (doc) => {
      const mainWorkspace = doc.querySelector(".workspace-split.mod-vertical.mod-root");
      if (!mainWorkspace) return;
      if (enabled) {
        mainWorkspace.classList.add("home-base-sticky-icon-enabled");
      } else {
        mainWorkspace.classList.remove("home-base-sticky-icon-enabled");
      }
    };
    applyToDocument(document);
    this.plugin.app.workspace.iterateAllLeaves((leaf) => {
      var _a, _b;
      const doc = (_b = (_a = leaf.view) == null ? void 0 : _a.containerEl) == null ? void 0 : _b.ownerDocument;
      if (doc && doc !== document) {
        applyToDocument(doc);
      }
    });
  }
  /**
   * Create the sticky home icon
   */
  create() {
    this.remove();
    this.stickyIconEl = document.createElement("div");
    this.stickyIconEl.className = `${STICKY_ICON_CLASS} clickable-icon`;
    this.stickyIconEl.setAttribute("aria-label", "Open home base");
    this.stickyIconEl.setAttribute("data-tooltip-position", "bottom");
    const iconName = this.plugin.settings.stickyIconName || "home";
    (0, import_obsidian10.setIcon)(this.stickyIconEl, iconName);
    this.stickyIconEl.addEventListener("click", (e) => {
      e.preventDefault();
      e.stopPropagation();
      void this.plugin.homeService.openHomeBaseInGhostTab({
        runCommand: true
      }).then(() => {
        setTimeout(() => {
          this.updateTabHeaders();
        }, TAB_HEADER_OPEN_DELAY);
      });
    });
    this.stickyIconEl.addEventListener("contextmenu", (e) => {
      e.preventDefault();
      e.stopPropagation();
      const menu = new import_obsidian10.Menu();
      menu.addItem((item) => {
        item.setTitle("Close home base").setIcon("x").onClick(() => {
          void this.closeHomeBase(true);
        });
      });
      menu.addItem((item) => {
        item.setTitle("Change icon").setIcon("lucide-image-plus").onClick(() => {
          const picker = new IconPicker(
            this.plugin.app,
            this.plugin.settings.stickyIconName,
            (icon) => {
              void (async () => {
                this.plugin.settings.stickyIconName = icon;
                await this.plugin.saveSettings();
                if (this.stickyIconEl) {
                  (0, import_obsidian10.setIcon)(this.stickyIconEl, icon || "home");
                }
              })();
            }
          );
          picker.open();
        });
      });
      menu.showAtMouseEvent(e);
    });
    const ensureIconInPlace = () => {
      if (!this.stickyIconEl) return;
      const mainWorkspace2 = document.querySelector(".workspace-split.mod-vertical.mod-root");
      if (!mainWorkspace2) return;
      const tabHeaderContainerInner = mainWorkspace2.querySelector(".workspace-tab-header-container-inner");
      if (!tabHeaderContainerInner) return;
      const allIcons = tabHeaderContainerInner.querySelectorAll(`.${STICKY_ICON_CLASS}`);
      allIcons.forEach((icon) => {
        if (icon !== this.stickyIconEl) {
          icon.remove();
        }
      });
      if (tabHeaderContainerInner.contains(this.stickyIconEl)) {
        return;
      }
      tabHeaderContainerInner.insertBefore(this.stickyIconEl, tabHeaderContainerInner.firstChild);
      this.updateActiveState();
      this.updateTabHeaders();
      this.updateWorkspaceClass(true);
      this.updateIconPositionForSidebar();
      this.watchSidebarState();
    };
    ensureIconInPlace();
    const checkInterval = setInterval(() => {
      if (!this.stickyIconEl || !this.plugin.settings.showStickyHomeIcon) {
        clearInterval(checkInterval);
        return;
      }
      ensureIconInPlace();
    }, ICON_PLACEMENT_CHECK_INTERVAL);
    this.stickyIconEl._checkInterval = checkInterval;
    if (!this.layoutChangeHandler) {
      this.layoutChangeHandler = () => {
        if (this.stickyIconEl && this.plugin.settings.showStickyHomeIcon) {
          ensureIconInPlace();
          this.updateTabHeaders();
        }
      };
      this.plugin.registerEvent(
        this.plugin.app.workspace.on("layout-change", this.layoutChangeHandler)
      );
    }
    const mainWorkspace = document.querySelector(".workspace-split.mod-vertical.mod-root");
    if (mainWorkspace) {
      const containerObserver = new MutationObserver(() => {
        if (!this.stickyIconEl || !this.plugin.settings.showStickyHomeIcon) return;
        const tabHeaderContainerInner = mainWorkspace.querySelector(".workspace-tab-header-container-inner");
        if (tabHeaderContainerInner) {
          const allIcons = tabHeaderContainerInner.querySelectorAll(`.${STICKY_ICON_CLASS}`);
          allIcons.forEach((icon) => {
            if (icon !== this.stickyIconEl) {
              icon.remove();
            }
          });
          if (!tabHeaderContainerInner.contains(this.stickyIconEl)) {
            tabHeaderContainerInner.insertBefore(this.stickyIconEl, tabHeaderContainerInner.firstChild);
            this.updateActiveState();
          }
        }
      });
      containerObserver.observe(mainWorkspace, {
        childList: true,
        subtree: true
        // Watch subtree to catch tab container recreation
      });
      this.stickyIconEl._containerObserver = containerObserver;
    }
    this.setupTabHeaderObserver();
  }
  /**
   * Set up MutationObserver to watch for tab header changes and remove ghost tabs immediately
   * This prevents the flash when tabs are opened/closed
   */
  setupTabHeaderObserver() {
    if (this.tabHeaderObserver) {
      return;
    }
    this.tabHeaderObserver = new MutationObserver((mutations) => {
      if (!this.plugin.settings.showStickyHomeIcon || !this.plugin.settings.hideHomeTabHeader) {
        return;
      }
      let hasNewHeaders = false;
      for (const mutation of mutations) {
        if (mutation.type === "childList" && mutation.addedNodes.length > 0) {
          for (const node of Array.from(mutation.addedNodes)) {
            if (node instanceof HTMLElement && node.classList.contains("workspace-tab-header")) {
              hasNewHeaders = true;
              break;
            }
          }
        }
        if (hasNewHeaders) break;
      }
      if (hasNewHeaders) {
        this.plugin.app.workspace.iterateAllLeaves((leaf) => {
          const view = leaf.view;
          let container = null;
          if (view) {
            const viewAny = view;
            container = viewAny.containerEl || null;
          }
          if (!container) {
            const leafAny = leaf;
            container = leafAny.containerEl || null;
          }
          if (container) {
            const rootWorkspace = container.closest(".workspace-split.mod-vertical.mod-root");
            const leftSidebar = container.closest(".workspace-split.mod-left-split");
            const rightSidebar = container.closest(".workspace-split.mod-right-split");
            if (rootWorkspace && !leftSidebar && !rightSidebar) {
              if (this.plugin.homeService.isGhostLeaf(leaf)) {
                const tabHeader = this.getTabHeaderForLeaf(leaf);
                if (tabHeader && tabHeader.parentElement) {
                  const parent = tabHeader.parentElement;
                  if (parent && parent.classList.contains("workspace-tab-header-container-inner")) {
                    const tabHeaderExtended = tabHeader;
                    if (parent.contains(tabHeader)) {
                      tabHeaderExtended._homeBaseParent = parent;
                      tabHeaderExtended._homeBaseNextSibling = tabHeader.nextSibling;
                      tabHeader.remove();
                    }
                  }
                }
              }
            }
          }
        });
      }
    });
    const observeContainer = (container) => {
      var _a;
      (_a = this.tabHeaderObserver) == null ? void 0 : _a.observe(container, {
        childList: true,
        subtree: false
      });
    };
    const observeAllWindows = () => {
      const containers = document.querySelectorAll(".workspace-tab-header-container-inner");
      containers.forEach(observeContainer);
      this.plugin.app.workspace.iterateAllLeaves((leaf) => {
        var _a, _b;
        const doc = (_b = (_a = leaf.view) == null ? void 0 : _a.containerEl) == null ? void 0 : _b.ownerDocument;
        if (doc && doc !== document) {
          const windowContainers = doc.querySelectorAll(".workspace-tab-header-container-inner");
          windowContainers.forEach(observeContainer);
        }
      });
    };
    observeAllWindows();
    const setupWorkspaceObserver = (win) => {
      const doc = win.document;
      const workspaceObserver = new MutationObserver(() => {
        const newContainers = doc.querySelectorAll(".workspace-tab-header-container-inner");
        newContainers.forEach(observeContainer);
      });
      const mainWorkspace = doc.querySelector(".workspace-split.mod-vertical.mod-root");
      if (mainWorkspace) {
        workspaceObserver.observe(mainWorkspace, {
          childList: true,
          subtree: true
        });
      }
    };
    setupWorkspaceObserver(window);
    this.plugin.registerEvent(
      this.plugin.app.workspace.on("window-open", (win) => {
        const actualWindow = win.win;
        if (actualWindow instanceof Window) {
          setupWorkspaceObserver(actualWindow);
          setTimeout(observeAllWindows, WINDOW_OPEN_CONTAINER_DELAY);
        }
      })
    );
  }
  /**
   * Remove the sticky home icon
   */
  remove() {
    if (this.tabHeaderUpdateTimeout) {
      clearTimeout(this.tabHeaderUpdateTimeout);
      this.tabHeaderUpdateTimeout = null;
    }
    if (this.stickyIconEl && this.stickyIconEl._checkInterval) {
      clearInterval(this.stickyIconEl._checkInterval);
    }
    if (this.stickyIconEl && this.stickyIconEl._containerObserver) {
      this.stickyIconEl._containerObserver.disconnect();
    }
    if (this.sidebarObserver) {
      this.sidebarObserver.disconnect();
      this.sidebarObserver = null;
    }
    if (this.tabHeaderObserver) {
      this.tabHeaderObserver.disconnect();
      this.tabHeaderObserver = null;
    }
    this.updateWorkspaceClass(false);
    this.plugin.app.workspace.iterateAllLeaves((leaf) => {
      const view = leaf.view;
      let container = null;
      if (view) {
        const viewAny = view;
        container = viewAny.containerEl || null;
      }
      if (!container) {
        const leafAny = leaf;
        container = leafAny.containerEl || null;
      }
      if (container) {
        const rootWorkspace = container.closest(".workspace-split.mod-vertical.mod-root");
        const leftSidebar = container.closest(".workspace-split.mod-left-split");
        const rightSidebar = container.closest(".workspace-split.mod-right-split");
        if (rootWorkspace && !leftSidebar && !rightSidebar) {
          const tabHeader = this.getTabHeaderForLeaf(leaf);
          if (tabHeader) {
            tabHeader.classList.remove("is-home-base-tab");
            tabHeader.removeAttribute("data-home-base-ghost");
            tabHeader.removeAttribute("aria-hidden");
            const tabHeaderExtended = tabHeader;
            if (tabHeaderExtended._homeBaseParent && !tabHeaderExtended._homeBaseParent.contains(tabHeader)) {
              const parent = tabHeaderExtended._homeBaseParent;
              const nextSibling = tabHeaderExtended._homeBaseNextSibling;
              if (parent) {
                if (nextSibling && nextSibling.parentElement === parent) {
                  parent.insertBefore(tabHeader, nextSibling);
                } else {
                  parent.appendChild(tabHeader);
                }
              }
              delete tabHeaderExtended._homeBaseParent;
              delete tabHeaderExtended._homeBaseNextSibling;
            }
          }
        }
      }
    });
    if (this.stickyIconEl) {
      if (this.stickyIconEl.parentElement) {
        this.stickyIconEl.remove();
      }
      this.stickyIconEl = null;
    }
    const cleanupOrphans = (doc) => {
      doc.querySelectorAll(`.${STICKY_ICON_CLASS}`).forEach((el) => {
        const stickyEl = el;
        if (stickyEl._checkInterval) {
          clearInterval(stickyEl._checkInterval);
        }
        if (stickyEl._containerObserver) {
          stickyEl._containerObserver.disconnect();
        }
        el.remove();
      });
    };
    cleanupOrphans(document);
    this.plugin.app.workspace.iterateAllLeaves((leaf) => {
      var _a, _b;
      const doc = (_b = (_a = leaf.view) == null ? void 0 : _a.containerEl) == null ? void 0 : _b.ownerDocument;
      if (doc && doc !== document) {
        cleanupOrphans(doc);
      }
    });
  }
  /**
   * Update the active state of the sticky icon
   */
  updateActiveState() {
    if (!this.stickyIconEl) return;
    const isActive = this.plugin.homeService.isFocusedOnHomeBase();
    if (isActive) {
      this.stickyIconEl.classList.add(STICKY_ICON_ACTIVE_CLASS);
    } else {
      this.stickyIconEl.classList.remove(STICKY_ICON_ACTIVE_CLASS);
    }
    this.updateTabHeaders();
  }
  /**
   * Check if the left sidebar is collapsed
   * Based on obsidian-oxygen-settings implementation
   */
  isLeftSidebarCollapsed() {
    const leftSidebar = document.querySelector(".workspace-split.mod-left-split") || document.querySelector(".mod-left-split");
    if (!leftSidebar) return false;
    return leftSidebar.classList.contains("is-sidedock-collapsed");
  }
  /**
   * Update icon position based on sidebar state
   * Note: With inline positioning, icon flows naturally with tabs, so no special positioning needed
   */
  updateIconPositionForSidebar() {
  }
  /**
   * Update icon visibility based on tab bar visibility
   * REMOVED: JavaScript-based visibility checking was causing issues
   * Now relies entirely on CSS which is more reliable
   */
  updateIconVisibility() {
  }
  /**
   * Watch for sidebar state changes and update icon position
   * Based on obsidian-oxygen-settings implementation
   */
  watchSidebarState() {
    if (this.sidebarObserver) {
      this.sidebarObserver.disconnect();
    }
    const leftSidebar = document.querySelector(".workspace-split.mod-left-split") || document.querySelector(".mod-left-split");
    if (!leftSidebar) return;
    this.sidebarObserver = new MutationObserver((mutations) => {
      let shouldUpdate = false;
      mutations.forEach((mutation) => {
        if (mutation.type === "attributes" && mutation.attributeName === "class") {
          shouldUpdate = true;
        }
      });
      if (shouldUpdate) {
        this.updateIconPositionForSidebar();
      }
    });
    this.sidebarObserver.observe(leftSidebar, {
      attributes: true,
      attributeFilter: ["class"]
    });
  }
  /**
   * Watch for tab bar visibility changes (Oxygen theme auto-hide, focus mode, etc.)
   * REMOVED: No longer needed - CSS handles all visibility automatically
   */
  watchTabBarVisibility() {
  }
  /**
   * Toggle the sticky icon visibility
   */
  async toggle() {
    this.plugin.settings.showStickyHomeIcon = !this.plugin.settings.showStickyHomeIcon;
    await this.plugin.saveSettings();
    this.update();
    this.updateTabHeaders();
  }
  /**
   * Update tab headers to hide/show ghost tab
   * Only works when sticky icon is enabled
   * Removed debounce - must be immediate to prevent flash
   */
  updateTabHeaders() {
    if (this.tabHeaderUpdateTimeout) {
      clearTimeout(this.tabHeaderUpdateTimeout);
      this.tabHeaderUpdateTimeout = null;
    }
    this._doUpdateTabHeaders();
  }
  /**
   * Internal method that actually updates the tab headers
   */
  _doUpdateTabHeaders() {
    if (!this.plugin.settings.showStickyHomeIcon || !this.plugin.settings.hideHomeTabHeader) {
      this.plugin.app.workspace.iterateAllLeaves((leaf) => {
        const tabHeader = this.getTabHeaderForLeaf(leaf);
        if (tabHeader) {
          tabHeader.classList.remove("is-home-base-tab");
          tabHeader.removeAttribute("data-home-base-ghost");
          tabHeader.removeAttribute("aria-hidden");
          const tabHeaderExtended = tabHeader;
          if (tabHeaderExtended._homeBaseParent && !tabHeaderExtended._homeBaseParent.contains(tabHeader)) {
            const parent = tabHeaderExtended._homeBaseParent;
            const nextSibling = tabHeaderExtended._homeBaseNextSibling;
            if (parent) {
              if (nextSibling && nextSibling.parentElement === parent) {
                parent.insertBefore(tabHeader, nextSibling);
              } else {
                parent.appendChild(tabHeader);
              }
            }
            delete tabHeaderExtended._homeBaseParent;
            delete tabHeaderExtended._homeBaseNextSibling;
          }
        }
      });
      return;
    }
    const ghostTabHeadersToRemove = [];
    this.plugin.app.workspace.iterateAllLeaves((leaf) => {
      const view = leaf.view;
      let container = null;
      if (view) {
        const viewAny = view;
        container = viewAny.containerEl || null;
      }
      if (!container) {
        const leafAny = leaf;
        container = leafAny.containerEl || null;
      }
      if (container) {
        const rootWorkspace = container.closest(".workspace-split.mod-vertical.mod-root");
        const leftSidebar = container.closest(".workspace-split.mod-left-split");
        const rightSidebar = container.closest(".workspace-split.mod-right-split");
        if (rootWorkspace && !leftSidebar && !rightSidebar) {
          if (this.plugin.homeService.isGhostLeaf(leaf)) {
            const tabHeader = this.getTabHeaderForLeaf(leaf);
            if (tabHeader && tabHeader.parentElement) {
              ghostTabHeadersToRemove.push({ tabHeader, leaf });
            }
          }
        }
      }
    });
    ghostTabHeadersToRemove.forEach(({ tabHeader }) => {
      const parent = tabHeader.parentElement;
      if (parent && parent.classList.contains("workspace-tab-header-container-inner")) {
        const tabHeaderExtended = tabHeader;
        if (parent.contains(tabHeader)) {
          tabHeaderExtended._homeBaseParent = parent;
          tabHeaderExtended._homeBaseNextSibling = tabHeader.nextSibling;
          tabHeader.remove();
        }
      }
    });
    requestAnimationFrame(() => {
      const homeBaseSettings = this.plugin.getHomeBaseSettings();
      const homeBasePath = resolvePathSync(homeBaseSettings.type, homeBaseSettings.value, this.plugin.app);
      this.plugin.app.workspace.iterateAllLeaves((leaf) => {
        var _a;
        const view = leaf.view;
        let container = null;
        if (view) {
          const viewAny = view;
          container = viewAny.containerEl || null;
        }
        if (!container) {
          const leafAny = leaf;
          container = leafAny.containerEl || null;
        }
        if (container) {
          const rootWorkspace = container.closest(".workspace-split.mod-vertical.mod-root");
          const leftSidebar = container.closest(".workspace-split.mod-left-split");
          const rightSidebar = container.closest(".workspace-split.mod-right-split");
          if (rootWorkspace && !leftSidebar && !rightSidebar) {
            const isGhostTab = this.plugin.homeService.isGhostLeaf(leaf);
            const tabHeader = this.getTabHeaderForLeaf(leaf);
            if (!tabHeader) return;
            const tabHeaderExtended = tabHeader;
            const isRemoved = tabHeaderExtended._homeBaseParent && !tabHeaderExtended._homeBaseParent.contains(tabHeader);
            if (!isGhostTab) {
              if (isRemoved) {
                const parent = tabHeaderExtended._homeBaseParent;
                const nextSibling = tabHeaderExtended._homeBaseNextSibling;
                if (parent) {
                  if (nextSibling && nextSibling.parentElement === parent) {
                    parent.insertBefore(tabHeader, nextSibling);
                  } else {
                    parent.appendChild(tabHeader);
                  }
                  delete tabHeaderExtended._homeBaseParent;
                  delete tabHeaderExtended._homeBaseNextSibling;
                }
              }
              const isGraphHome = homeBaseSettings.type === "Graph view" /* Graph */ && ((_a = leaf.view) == null ? void 0 : _a.getViewType()) === "graph";
              if (homeBasePath && leafHasFile(leaf, homeBasePath) || isGraphHome) {
                tabHeader.classList.add("is-home-base-tab");
              } else {
                tabHeader.classList.remove("is-home-base-tab");
              }
              tabHeader.removeAttribute("data-home-base-ghost");
              tabHeader.removeAttribute("aria-hidden");
            }
          }
        }
      });
    });
  }
  /**
   * Get the tab header element for a given leaf
   */
  getTabHeaderForLeaf(leaf) {
    var _a, _b, _c;
    const leafAny = leaf;
    if (leafAny.tabHeaderEl) {
      return leafAny.tabHeaderEl;
    }
    const viewType = (_a = leaf.view) == null ? void 0 : _a.getViewType();
    if (!viewType) return null;
    const doc = ((_c = (_b = leaf.view) == null ? void 0 : _b.containerEl) == null ? void 0 : _c.ownerDocument) || document;
    const activeLeaf = this.plugin.app.workspace.getMostRecentLeaf();
    const isActive = leaf === activeLeaf;
    const tabHeaders = doc.querySelectorAll(`.workspace-tab-header[data-type="${viewType}"]`);
    if (isActive) {
      const activeHeader = doc.querySelector(".workspace-tab-header.is-active");
      if (activeHeader && activeHeader.getAttribute("data-type") === viewType) {
        return activeHeader;
      }
    }
    for (const header of Array.from(tabHeaders)) {
      const headerEl = header;
      const headerElWithLeaf = headerEl;
      const headerLeaf = headerElWithLeaf.leaf;
      if (headerLeaf === leaf) {
        return headerEl;
      }
    }
    if (tabHeaders.length === 1) {
      return tabHeaders[0];
    }
    if (isActive) {
      const activeHeader = doc.querySelector(".workspace-tab-header.is-active");
      if (activeHeader) {
        return activeHeader;
      }
    }
    return null;
  }
  /**
   * Close the home base tab
   * When called from context menu: Only closes the ghost tab (the "occupied" slot)
   * Other home base tabs are left alone
   */
  closeHomeBase(actuallyClose = false) {
    const homeBaseSettings = this.plugin.getHomeBaseSettings();
    const homeBasePath = resolvePathSync(homeBaseSettings.type, homeBaseSettings.value, this.plugin.app);
    const ghostTabs = [];
    const allHomeBaseLeaves = [];
    this.plugin.app.workspace.iterateAllLeaves((leaf) => {
      const isGhost = this.plugin.homeService.isGhostLeaf(leaf);
      if (isGhost) {
        ghostTabs.push(leaf);
      }
      if (homeBasePath && leafHasFile(leaf, homeBasePath)) {
        allHomeBaseLeaves.push(leaf);
      }
    });
    if (this.plugin.settings.showStickyHomeIcon) {
      for (const ghostTab of ghostTabs) {
        void ghostTab.detach();
      }
    } else {
      for (const leaf of allHomeBaseLeaves) {
        void leaf.detach();
      }
    }
    this.updateTabHeaders();
  }
  /**
   * Pin the home base tab
   */
  pinHomeBaseTab() {
    const homeBaseSettings = this.plugin.getHomeBaseSettings();
    const homeBasePath = resolvePathSync(homeBaseSettings.type, homeBaseSettings.value, this.plugin.app);
    if (!homeBasePath) return;
    const homeBaseFile = getFileByPath(this.plugin.app, homeBasePath);
    if (!homeBaseFile) return;
    const homeBaseLeaf = this.plugin.homeService.findExistingHomeBaseLeaf(homeBaseFile);
    if (homeBaseLeaf) {
      homeBaseLeaf.setPinned(true);
    }
  }
  /**
   * Unpin the home base tab
   */
  unpinHomeBaseTab() {
    const homeBaseSettings = this.plugin.getHomeBaseSettings();
    const homeBasePath = resolvePathSync(homeBaseSettings.type, homeBaseSettings.value, this.plugin.app);
    if (!homeBasePath) return;
    const homeBaseFile = getFileByPath(this.plugin.app, homeBasePath);
    if (!homeBaseFile) return;
    const homeBaseLeaf = this.plugin.homeService.findExistingHomeBaseLeaf(homeBaseFile);
    if (homeBaseLeaf) {
      homeBaseLeaf.setPinned(false);
    }
  }
  /**
   * Check if the home base tab is pinned
   */
  isHomeBaseTabPinned() {
    const homeBaseSettings = this.plugin.getHomeBaseSettings();
    const homeBasePath = resolvePathSync(homeBaseSettings.type, homeBaseSettings.value, this.plugin.app);
    if (!homeBasePath) return false;
    const homeBaseFile = getFileByPath(this.plugin.app, homeBasePath);
    if (!homeBaseFile) return false;
    const homeBaseLeaf = this.plugin.homeService.findExistingHomeBaseLeaf(homeBaseFile);
    if (!homeBaseLeaf) return false;
    const viewState = homeBaseLeaf.getViewState();
    return viewState.pinned === true;
  }
};

// src/services/mobile-button-service.ts
var import_obsidian11 = require("obsidian");
var MOBILE_HOME_CLASS = "home-base-mobile-enabled";
var MobileButtonService = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  /**
   * Update the mobile button based on settings
   */
  update() {
    if (!import_obsidian11.Platform.isMobile) {
      this.remove();
      return;
    }
    if (this.plugin.settings.replaceMobileNewTab) {
      this.apply();
    } else {
      this.remove();
    }
  }
  /**
   * Apply the mobile button replacement
   */
  apply() {
    document.body.classList.add(MOBILE_HOME_CLASS);
  }
  /**
   * Remove the mobile button replacement
   */
  remove() {
    document.body.classList.remove(MOBILE_HOME_CLASS);
  }
};

// src/migration.ts
async function migrateLegacySettings(plugin) {
  let needsSave = false;
  const settings = plugin.settings;
  if (settings.homeBasePath && !plugin.settings.homeBaseValue) {
    plugin.settings.homeBaseType = "File" /* File */;
    plugin.settings.homeBaseValue = settings.homeBasePath;
    needsSave = true;
  }
  if (settings.keepExistingTabs !== void 0) {
    if (plugin.settings.openMode === DEFAULT_SETTINGS.openMode) {
      plugin.settings.openMode = settings.keepExistingTabs ? "retain" : "replace-all";
      needsSave = true;
    }
    delete settings.keepExistingTabs;
    needsSave = true;
  }
  if (settings.mobileHomeBasePath && !plugin.settings.mobileHomeBaseValue) {
    plugin.settings.mobileHomeBaseType = "File" /* File */;
    plugin.settings.mobileHomeBaseValue = settings.mobileHomeBasePath;
    needsSave = true;
  }
  if (settings.mobileHomeBasePath !== void 0) {
    delete settings.mobileHomeBasePath;
    needsSave = true;
  }
  if (settings.homeBasePath !== void 0) {
    delete settings.homeBasePath;
    needsSave = true;
  }
  if (needsSave) {
    await plugin.saveSettings();
  }
}

// src/main.ts
var HOME_ICON = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"/><path d="M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/></svg>`;
var DOM_READY_DELAY = 100;
var TAB_HEADER_UPDATE_DELAY = 150;
var FILE_OPEN_ANIMATION_DELAY = 100;
var TAB_SWITCH_ANIMATION_DELAY = 100;
var STARTUP_COMPLETE_DELAY = 1e3;
var HomeBasePlugin = class extends import_obsidian12.Plugin {
  constructor() {
    super(...arguments);
    // Release notes tracking
    this.newRelease = false;
    // Track if patched opening behavior already ran
    this.openingBehaviorRan = false;
    // Track if we're currently in startup (to prevent handleOpenWhenEmpty from firing)
    this.isStartup = true;
  }
  async onload() {
    await this.loadSettings();
    await migrateLegacySettings(this);
    this.patchOpeningBehavior();
    (0, import_obsidian12.addIcon)("home-base", HOME_ICON);
    this.homeService = new HomeBaseService(this);
    this.newTabService = new NewTabService(this);
    this.stickyTabService = new StickyTabService(this);
    this.mobileButtonService = new MobileButtonService(this);
    this.addRibbonIcon("home", "Open home base", () => {
      void this.homeService.openHomeBase({
        replaceActiveLeaf: false,
        runCommand: true
      });
    });
    this.registerCommands();
    this.addSettingTab(new HomeBaseSettingTab(this.app, this));
    this.app.workspace.onLayoutReady(() => {
      setTimeout(() => {
        if (this.isSettingsModalOpen()) {
          this.updateStickyTabIcon();
          this.updateMobileButton();
          this.stickyTabService.updateTabHeaders();
          return;
        }
        if (!this.openingBehaviorRan) {
          this.newTabService.initialize();
        } else {
          this.newTabService.trackExistingLeaves();
        }
        this.homeService.restoreGhostLeaves();
        setTimeout(() => {
          this.isStartup = false;
        }, STARTUP_COMPLETE_DELAY);
        this.updateStickyTabIcon();
        this.updateMobileButton();
        this.stickyTabService.updateTabHeaders();
      }, DOM_READY_DELAY);
    });
    this.registerEvent(
      this.app.workspace.on("layout-change", async () => {
        this.newTabService.handleLayoutChange();
        if (this.settings.revertView) {
          await this.homeService.revertView();
        }
        setTimeout(() => {
          this.stickyTabService.updateActiveState();
          this.stickyTabService.updateTabHeaders();
          this.stickyTabService.updateIconPositionForSidebar();
        }, TAB_HEADER_UPDATE_DELAY);
      })
    );
    this.registerEvent(
      this.app.workspace.on("file-open", () => {
        setTimeout(() => {
          this.stickyTabService.updateActiveState();
          this.stickyTabService.updateTabHeaders();
        }, FILE_OPEN_ANIMATION_DELAY);
      })
    );
    this.registerEvent(
      this.app.workspace.on("active-leaf-change", () => {
        setTimeout(() => {
          this.stickyTabService.updateTabHeaders();
        }, TAB_SWITCH_ANIMATION_DELAY);
      })
    );
  }
  onunload() {
    this.unpatchReleaseNotes();
    this.unpatchOpeningBehavior();
    this.stickyTabService.remove();
    this.mobileButtonService.remove();
  }
  /**
   * Register plugin commands
   */
  registerCommands() {
    this.addCommand({
      id: "open",
      name: "Open",
      callback: () => {
        const homeBaseSettings = this.getHomeBaseSettings();
        if (!homeBaseSettings.value && homeBaseSettings.type === "File" /* File */) {
          new import_obsidian12.Notice("No home base configured. Set one in settings.");
          return;
        }
        void this.homeService.openHomeBase({
          replaceActiveLeaf: false,
          runCommand: true
        });
      }
    });
    this.addCommand({
      id: "set-current-file",
      name: "Set current file as home",
      checkCallback: (checking) => {
        if (!this.homeService.canSetActiveFileAsHomeBase()) {
          return false;
        }
        if (!checking) {
          void this.homeService.setActiveFileAsHomeBase().then((success) => {
            if (success) {
              const activeFile = this.app.workspace.getActiveFile();
              new import_obsidian12.Notice(`Home base set to "${activeFile == null ? void 0 : activeFile.name}"`);
            }
          });
        }
        return true;
      }
    });
    this.addCommand({
      id: "toggle-sticky-icon",
      name: "Toggle sticky home icon",
      callback: async () => {
        await this.stickyTabService.toggle();
        const state = this.settings.showStickyHomeIcon ? "enabled" : "disabled";
        new import_obsidian12.Notice(`Sticky home icon ${state}`);
      }
    });
    this.addCommand({
      id: "close",
      name: "Close",
      callback: () => {
        this.stickyTabService.closeHomeBase();
      }
    });
  }
  /**
   * Load plugin settings
   */
  async loadSettings() {
    const data = await this.loadData();
    this.settings = Object.assign({}, DEFAULT_SETTINGS, data != null ? data : {});
  }
  /**
   * Get the active home base settings (mobile or desktop)
   */
  getHomeBaseSettings() {
    if (this.settings.separateMobile && import_obsidian12.Platform.isMobile) {
      return {
        type: this.settings.mobileHomeBaseType || "File" /* File */,
        value: this.settings.mobileHomeBaseValue || ""
      };
    }
    return {
      type: this.settings.homeBaseType || "File" /* File */,
      value: this.settings.homeBaseValue || ""
    };
  }
  /**
   * Get the active new tab settings (mobile or desktop)
   * Falls back to home base settings if useDifferentFileForNewTab is disabled
   */
  getNewTabSettings() {
    if (!this.settings.useDifferentFileForNewTab) {
      return this.getHomeBaseSettings();
    }
    if (this.settings.newTabSeparateMobile && import_obsidian12.Platform.isMobile) {
      return {
        type: this.settings.mobileNewTabType || "File" /* File */,
        value: this.settings.mobileNewTabValue || ""
      };
    }
    return {
      type: this.settings.newTabType || "File" /* File */,
      value: this.settings.newTabValue || ""
    };
  }
  /**
   * Save plugin settings
   */
  async saveSettings() {
    await this.saveData(this.settings);
  }
  /**
   * Update the sticky tab icon based on current settings
   */
  updateStickyTabIcon() {
    this.stickyTabService.update();
    this.stickyTabService.updateTabHeaders();
  }
  /**
   * Update the mobile button based on current settings
   */
  updateMobileButton() {
    this.mobileButtonService.update();
  }
  /**
   * Check if we should skip startup logic (e.g., plugin reload, settings modal open)
   * This prevents destructive behavior when the plugin is reloaded or settings are open
   */
  shouldSkipStartupLogic() {
    if (this.isSettingsModalOpen()) {
      return true;
    }
    const hasOpenFiles = this.app.workspace.getLeavesOfType("markdown").length > 0 || this.app.workspace.getLeavesOfType("canvas").length > 0 || this.app.workspace.getLeavesOfType("bases").length > 0 || this.app.workspace.getLeavesOfType("empty").length > 0;
    return hasOpenFiles;
  }
  /**
   * Check if the settings modal is currently open
   */
  isSettingsModalOpen() {
    const settingsModal = document.querySelector(".modal-container.mod-settings") || document.querySelector(".modal.mod-settings") || document.querySelector(".vertical-tab-content");
    if (!settingsModal) {
      const allModals = document.querySelectorAll(".modal-container");
      for (const modal of Array.from(allModals)) {
        if (modal.querySelector(".vertical-tab-content") || modal.querySelector(".settings-content") || modal.classList.contains("mod-settings")) {
          return true;
        }
      }
    }
    return settingsModal !== null;
  }
  /**
   * Patch runOpeningBehavior for fast startup (like homepage plugin)
   */
  patchOpeningBehavior() {
    try {
      this.app.nvOrig_runOpeningBehavior = this.app.runOpeningBehavior;
      this.app.runOpeningBehavior = async (path) => {
        const openInitially = this.settings.openOnStartup && !this.hasUrlParams();
        if (openInitially) {
          this.openingBehaviorRan = true;
          const mode = this.settings.openMode;
          if (mode === "replace-all") {
            await this.homeService.detachAllLeaves();
          }
          if (this.settings.showStickyHomeIcon) {
            void this.homeService.openHomeBaseInGhostTab({
              runCommand: true
            });
          } else {
            void this.homeService.openHomeBaseWithMode(mode, true);
          }
        } else {
          if (this.app.nvOrig_runOpeningBehavior) {
            await this.app.nvOrig_runOpeningBehavior(path);
          }
        }
        this.unpatchReleaseNotes();
      };
    } catch (e) {
      console.warn("[Home Base] Failed to patch opening behavior:", e);
    }
  }
  /**
   * Unpatch runOpeningBehavior
   */
  unpatchOpeningBehavior() {
    if (this.app.nvOrig_runOpeningBehavior) {
      this.app.runOpeningBehavior = this.app.nvOrig_runOpeningBehavior;
    }
  }
  /**
   * Patch showReleaseNotes to track new releases
   */
  patchReleaseNotes() {
    try {
      const appAny = this.app;
      appAny.nvOrig_showReleaseNotes = appAny.showReleaseNotes;
      appAny.showReleaseNotes = () => {
        this.newRelease = true;
      };
    } catch (e) {
      console.warn("[Home Base] Failed to patch release notes:", e);
    }
  }
  /**
   * Unpatch showReleaseNotes
   */
  unpatchReleaseNotes() {
    var _a;
    const appAny = this.app;
    if (this.newRelease && !this.settings.hideReleaseNotes) {
      (_a = appAny.nvOrig_showReleaseNotes) == null ? void 0 : _a.call(appAny);
    }
    if (appAny.nvOrig_showReleaseNotes) {
      appAny.showReleaseNotes = appAny.nvOrig_showReleaseNotes;
    }
  }
  /**
   * Check if a home base type has its required plugin enabled
   */
  hasRequiredPlugin(type) {
    var _a, _b, _c, _d, _e, _f, _g, _h;
    switch (type) {
      case "Workspace" /* Workspace */:
        return ((_c = (_b = (_a = this.app.internalPlugins) == null ? void 0 : _a.plugins) == null ? void 0 : _b.workspaces) == null ? void 0 : _c.enabled) === true;
      case "Graph view" /* Graph */:
        return ((_f = (_e = (_d = this.app.internalPlugins) == null ? void 0 : _d.plugins) == null ? void 0 : _e.graph) == null ? void 0 : _f.enabled) === true;
      case "Journal" /* Journal */:
        return !!((_h = (_g = this.app.plugins) == null ? void 0 : _g.plugins) == null ? void 0 : _h["journals"]);
      case "Daily Note" /* DailyNote */:
      case "Weekly Note" /* WeeklyNote */:
      case "Monthly Note" /* MonthlyNote */:
      case "Quarterly Note" /* QuarterlyNote */:
      case "Yearly Note" /* YearlyNote */:
        return this.hasRequiredPeriodicity(type);
      default:
        return true;
    }
  }
  /**
   * Check if periodic notes are available for the given type
   */
  hasRequiredPeriodicity(type) {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q, _r, _s;
    if (type === "Daily Note" /* DailyNote */) {
      const coreDailyNotes = ((_c = (_b = (_a = this.app.internalPlugins) == null ? void 0 : _a.plugins) == null ? void 0 : _b["daily-notes"]) == null ? void 0 : _c.enabled) === true;
      if (coreDailyNotes) {
        return true;
      }
      const periodicNotes2 = (_e = (_d = this.app.plugins) == null ? void 0 : _d.plugins) == null ? void 0 : _e["periodic-notes"];
      if (periodicNotes2) {
        const version2 = ((_f = periodicNotes2 == null ? void 0 : periodicNotes2.manifest) == null ? void 0 : _f.version) || "0";
        const isLegacy2 = version2.startsWith("0");
        if (isLegacy2) {
          return ((_h = (_g = periodicNotes2 == null ? void 0 : periodicNotes2.settings) == null ? void 0 : _g["daily"]) == null ? void 0 : _h.enabled) === true;
        } else {
          const calendarSet = (_j = (_i = periodicNotes2 == null ? void 0 : periodicNotes2.calendarSetManager) == null ? void 0 : _i.getActiveSet) == null ? void 0 : _j.call(_i);
          return ((_k = calendarSet == null ? void 0 : calendarSet["day"]) == null ? void 0 : _k.enabled) === true;
        }
      }
      return false;
    }
    const periodicNotes = (_m = (_l = this.app.plugins) == null ? void 0 : _l.plugins) == null ? void 0 : _m["periodic-notes"];
    if (!periodicNotes) return false;
    const version = ((_n = periodicNotes == null ? void 0 : periodicNotes.manifest) == null ? void 0 : _n.version) || "0";
    const isLegacy = version.startsWith("0");
    if (isLegacy) {
      const periodMap = {
        ["Weekly Note" /* WeeklyNote */]: "weekly",
        ["Monthly Note" /* MonthlyNote */]: "monthly",
        ["Quarterly Note" /* QuarterlyNote */]: "quarterly",
        ["Yearly Note" /* YearlyNote */]: "yearly"
      };
      const adjective = periodMap[type];
      if (!adjective) return false;
      return ((_p = (_o = periodicNotes == null ? void 0 : periodicNotes.settings) == null ? void 0 : _o[adjective]) == null ? void 0 : _p.enabled) === true;
    } else {
      const nounMap = {
        ["Weekly Note" /* WeeklyNote */]: "week",
        ["Monthly Note" /* MonthlyNote */]: "month",
        ["Quarterly Note" /* QuarterlyNote */]: "quarter",
        ["Yearly Note" /* YearlyNote */]: "year"
      };
      const noun = nounMap[type];
      if (!noun) return false;
      const calendarSet = (_r = (_q = periodicNotes == null ? void 0 : periodicNotes.calendarSetManager) == null ? void 0 : _q.getActiveSet) == null ? void 0 : _r.call(_q);
      return ((_s = calendarSet == null ? void 0 : calendarSet[noun]) == null ? void 0 : _s.enabled) === true;
    }
  }
  /**
   * Check if URL params indicate a file/workspace should be opened (skip homepage)
   */
  hasUrlParams() {
    if (typeof window !== "undefined" && window.OBS_ACT) {
      const params = Object.keys(window.OBS_ACT);
      const action = window.OBS_ACT.action;
      return action !== void 0 && ["open", "advanced-uri"].includes(action) && ["file", "filepath", "workspace"].some((e) => params.includes(e));
    }
    return false;
  }
  // "Open when empty" feature removed - redundant with "New tab replacement: only when empty"
  // Since Obsidian auto-creates an empty tab when you close the last one, they do the same thing
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibm9kZV9tb2R1bGVzLy5wbnBtL29ic2lkaWFuLWRhaWx5LW5vdGVzLWludGVyZl84ZDlmYzI0YjBmYzYyMmQ5NGZkMTFmYTVlOWIxODViMy9ub2RlX21vZHVsZXMvb2JzaWRpYW4tZGFpbHktbm90ZXMtaW50ZXJmYWNlL2Rpc3QvbWFpbi5qcyIsICJzcmMvbWFpbi50cyIsICJzcmMvc2V0dGluZ3MudHMiLCAic3JjL3VpL3NldHRpbmdzLXRhYi50cyIsICJzcmMvdXRpbHMvc2V0dGluZ3MtY29tcGF0LnRzIiwgInNyYy91aS9maWxlLXN1Z2dlc3QudHMiLCAic3JjL3VpL2NvbW1hbmQtc3VnZ2VzdC50cyIsICJzcmMvdWkvaWNvbi1waWNrZXIudHMiLCAic3JjL3NlcnZpY2VzL2hvbWUtc2VydmljZS50cyIsICJzcmMvdXRpbHMvZmlsZS11dGlscy50cyIsICJzcmMvdXRpbHMvaG9tZWJhc2UtcmVzb2x2ZXIudHMiLCAic3JjL3NlcnZpY2VzL25ldy10YWItc2VydmljZS50cyIsICJzcmMvc2VydmljZXMvc3RpY2t5LXRhYi1zZXJ2aWNlLnRzIiwgInNyYy9zZXJ2aWNlcy9tb2JpbGUtYnV0dG9uLXNlcnZpY2UudHMiLCAic3JjL21pZ3JhdGlvbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuXG52YXIgb2JzaWRpYW4gPSByZXF1aXJlKCdvYnNpZGlhbicpO1xuXG5jb25zdCBERUZBVUxUX0RBSUxZX05PVEVfRk9STUFUID0gXCJZWVlZLU1NLUREXCI7XG5jb25zdCBERUZBVUxUX1dFRUtMWV9OT1RFX0ZPUk1BVCA9IFwiZ2dnZy1bV113d1wiO1xuY29uc3QgREVGQVVMVF9NT05USExZX05PVEVfRk9STUFUID0gXCJZWVlZLU1NXCI7XG5jb25zdCBERUZBVUxUX1FVQVJURVJMWV9OT1RFX0ZPUk1BVCA9IFwiWVlZWS1bUV1RXCI7XG5jb25zdCBERUZBVUxUX1lFQVJMWV9OT1RFX0ZPUk1BVCA9IFwiWVlZWVwiO1xuXG5mdW5jdGlvbiBzaG91bGRVc2VQZXJpb2RpY05vdGVzU2V0dGluZ3MocGVyaW9kaWNpdHkpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGNvbnN0IHBlcmlvZGljTm90ZXMgPSB3aW5kb3cuYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIik7XG4gICAgcmV0dXJuIHBlcmlvZGljTm90ZXMgJiYgcGVyaW9kaWNOb3Rlcy5zZXR0aW5ncz8uW3BlcmlvZGljaXR5XT8uZW5hYmxlZDtcbn1cbi8qKlxuICogUmVhZCB0aGUgdXNlciBzZXR0aW5ncyBmb3IgdGhlIGBkYWlseS1ub3Rlc2AgcGx1Z2luXG4gKiB0byBrZWVwIGJlaGF2aW9yIG9mIGNyZWF0aW5nIGEgbmV3IG5vdGUgaW4tc3luYy5cbiAqL1xuZnVuY3Rpb24gZ2V0RGFpbHlOb3RlU2V0dGluZ3MoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgY29uc3QgeyBpbnRlcm5hbFBsdWdpbnMsIHBsdWdpbnMgfSA9IHdpbmRvdy5hcHA7XG4gICAgICAgIGlmIChzaG91bGRVc2VQZXJpb2RpY05vdGVzU2V0dGluZ3MoXCJkYWlseVwiKSkge1xuICAgICAgICAgICAgY29uc3QgeyBmb3JtYXQsIGZvbGRlciwgdGVtcGxhdGUgfSA9IHBsdWdpbnMuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIik/LnNldHRpbmdzPy5kYWlseSB8fCB7fTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZm9ybWF0OiBmb3JtYXQgfHwgREVGQVVMVF9EQUlMWV9OT1RFX0ZPUk1BVCxcbiAgICAgICAgICAgICAgICBmb2xkZXI6IGZvbGRlcj8udHJpbSgpIHx8IFwiXCIsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IHRlbXBsYXRlPy50cmltKCkgfHwgXCJcIixcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBmb2xkZXIsIGZvcm1hdCwgdGVtcGxhdGUgfSA9IGludGVybmFsUGx1Z2lucy5nZXRQbHVnaW5CeUlkKFwiZGFpbHktbm90ZXNcIik/Lmluc3RhbmNlPy5vcHRpb25zIHx8IHt9O1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZm9ybWF0OiBmb3JtYXQgfHwgREVGQVVMVF9EQUlMWV9OT1RFX0ZPUk1BVCxcbiAgICAgICAgICAgIGZvbGRlcjogZm9sZGVyPy50cmltKCkgfHwgXCJcIixcbiAgICAgICAgICAgIHRlbXBsYXRlOiB0ZW1wbGF0ZT8udHJpbSgpIHx8IFwiXCIsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5pbmZvKFwiTm8gY3VzdG9tIGRhaWx5IG5vdGUgc2V0dGluZ3MgZm91bmQhXCIsIGVycik7XG4gICAgfVxufVxuLyoqXG4gKiBSZWFkIHRoZSB1c2VyIHNldHRpbmdzIGZvciB0aGUgYHdlZWtseS1ub3Rlc2AgcGx1Z2luXG4gKiB0byBrZWVwIGJlaGF2aW9yIG9mIGNyZWF0aW5nIGEgbmV3IG5vdGUgaW4tc3luYy5cbiAqL1xuZnVuY3Rpb24gZ2V0V2Vla2x5Tm90ZVNldHRpbmdzKCkge1xuICAgIHRyeSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGNvbnN0IHBsdWdpbk1hbmFnZXIgPSB3aW5kb3cuYXBwLnBsdWdpbnM7XG4gICAgICAgIGNvbnN0IGNhbGVuZGFyU2V0dGluZ3MgPSBwbHVnaW5NYW5hZ2VyLmdldFBsdWdpbihcImNhbGVuZGFyXCIpPy5vcHRpb25zO1xuICAgICAgICBjb25zdCBwZXJpb2RpY05vdGVzU2V0dGluZ3MgPSBwbHVnaW5NYW5hZ2VyLmdldFBsdWdpbihcInBlcmlvZGljLW5vdGVzXCIpPy5zZXR0aW5ncz8ud2Vla2x5O1xuICAgICAgICBpZiAoc2hvdWxkVXNlUGVyaW9kaWNOb3Rlc1NldHRpbmdzKFwid2Vla2x5XCIpKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGZvcm1hdDogcGVyaW9kaWNOb3Rlc1NldHRpbmdzLmZvcm1hdCB8fCBERUZBVUxUX1dFRUtMWV9OT1RFX0ZPUk1BVCxcbiAgICAgICAgICAgICAgICBmb2xkZXI6IHBlcmlvZGljTm90ZXNTZXR0aW5ncy5mb2xkZXI/LnRyaW0oKSB8fCBcIlwiLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBwZXJpb2RpY05vdGVzU2V0dGluZ3MudGVtcGxhdGU/LnRyaW0oKSB8fCBcIlwiLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzZXR0aW5ncyA9IGNhbGVuZGFyU2V0dGluZ3MgfHwge307XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmb3JtYXQ6IHNldHRpbmdzLndlZWtseU5vdGVGb3JtYXQgfHwgREVGQVVMVF9XRUVLTFlfTk9URV9GT1JNQVQsXG4gICAgICAgICAgICBmb2xkZXI6IHNldHRpbmdzLndlZWtseU5vdGVGb2xkZXI/LnRyaW0oKSB8fCBcIlwiLFxuICAgICAgICAgICAgdGVtcGxhdGU6IHNldHRpbmdzLndlZWtseU5vdGVUZW1wbGF0ZT8udHJpbSgpIHx8IFwiXCIsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5pbmZvKFwiTm8gY3VzdG9tIHdlZWtseSBub3RlIHNldHRpbmdzIGZvdW5kIVwiLCBlcnIpO1xuICAgIH1cbn1cbi8qKlxuICogUmVhZCB0aGUgdXNlciBzZXR0aW5ncyBmb3IgdGhlIGBwZXJpb2RpYy1ub3Rlc2AgcGx1Z2luXG4gKiB0byBrZWVwIGJlaGF2aW9yIG9mIGNyZWF0aW5nIGEgbmV3IG5vdGUgaW4tc3luYy5cbiAqL1xuZnVuY3Rpb24gZ2V0TW9udGhseU5vdGVTZXR0aW5ncygpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGNvbnN0IHBsdWdpbk1hbmFnZXIgPSB3aW5kb3cuYXBwLnBsdWdpbnM7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSAoc2hvdWxkVXNlUGVyaW9kaWNOb3Rlc1NldHRpbmdzKFwibW9udGhseVwiKSAmJlxuICAgICAgICAgICAgcGx1Z2luTWFuYWdlci5nZXRQbHVnaW4oXCJwZXJpb2RpYy1ub3Rlc1wiKT8uc2V0dGluZ3M/Lm1vbnRobHkpIHx8XG4gICAgICAgICAgICB7fTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZvcm1hdDogc2V0dGluZ3MuZm9ybWF0IHx8IERFRkFVTFRfTU9OVEhMWV9OT1RFX0ZPUk1BVCxcbiAgICAgICAgICAgIGZvbGRlcjogc2V0dGluZ3MuZm9sZGVyPy50cmltKCkgfHwgXCJcIixcbiAgICAgICAgICAgIHRlbXBsYXRlOiBzZXR0aW5ncy50ZW1wbGF0ZT8udHJpbSgpIHx8IFwiXCIsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5pbmZvKFwiTm8gY3VzdG9tIG1vbnRobHkgbm90ZSBzZXR0aW5ncyBmb3VuZCFcIiwgZXJyKTtcbiAgICB9XG59XG4vKipcbiAqIFJlYWQgdGhlIHVzZXIgc2V0dGluZ3MgZm9yIHRoZSBgcGVyaW9kaWMtbm90ZXNgIHBsdWdpblxuICogdG8ga2VlcCBiZWhhdmlvciBvZiBjcmVhdGluZyBhIG5ldyBub3RlIGluLXN5bmMuXG4gKi9cbmZ1bmN0aW9uIGdldFF1YXJ0ZXJseU5vdGVTZXR0aW5ncygpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGNvbnN0IHBsdWdpbk1hbmFnZXIgPSB3aW5kb3cuYXBwLnBsdWdpbnM7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSAoc2hvdWxkVXNlUGVyaW9kaWNOb3Rlc1NldHRpbmdzKFwicXVhcnRlcmx5XCIpICYmXG4gICAgICAgICAgICBwbHVnaW5NYW5hZ2VyLmdldFBsdWdpbihcInBlcmlvZGljLW5vdGVzXCIpPy5zZXR0aW5ncz8ucXVhcnRlcmx5KSB8fFxuICAgICAgICAgICAge307XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmb3JtYXQ6IHNldHRpbmdzLmZvcm1hdCB8fCBERUZBVUxUX1FVQVJURVJMWV9OT1RFX0ZPUk1BVCxcbiAgICAgICAgICAgIGZvbGRlcjogc2V0dGluZ3MuZm9sZGVyPy50cmltKCkgfHwgXCJcIixcbiAgICAgICAgICAgIHRlbXBsYXRlOiBzZXR0aW5ncy50ZW1wbGF0ZT8udHJpbSgpIHx8IFwiXCIsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5pbmZvKFwiTm8gY3VzdG9tIHF1YXJ0ZXJseSBub3RlIHNldHRpbmdzIGZvdW5kIVwiLCBlcnIpO1xuICAgIH1cbn1cbi8qKlxuICogUmVhZCB0aGUgdXNlciBzZXR0aW5ncyBmb3IgdGhlIGBwZXJpb2RpYy1ub3Rlc2AgcGx1Z2luXG4gKiB0byBrZWVwIGJlaGF2aW9yIG9mIGNyZWF0aW5nIGEgbmV3IG5vdGUgaW4tc3luYy5cbiAqL1xuZnVuY3Rpb24gZ2V0WWVhcmx5Tm90ZVNldHRpbmdzKCkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgY29uc3QgcGx1Z2luTWFuYWdlciA9IHdpbmRvdy5hcHAucGx1Z2lucztcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBzZXR0aW5ncyA9IChzaG91bGRVc2VQZXJpb2RpY05vdGVzU2V0dGluZ3MoXCJ5ZWFybHlcIikgJiZcbiAgICAgICAgICAgIHBsdWdpbk1hbmFnZXIuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIik/LnNldHRpbmdzPy55ZWFybHkpIHx8XG4gICAgICAgICAgICB7fTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZvcm1hdDogc2V0dGluZ3MuZm9ybWF0IHx8IERFRkFVTFRfWUVBUkxZX05PVEVfRk9STUFULFxuICAgICAgICAgICAgZm9sZGVyOiBzZXR0aW5ncy5mb2xkZXI/LnRyaW0oKSB8fCBcIlwiLFxuICAgICAgICAgICAgdGVtcGxhdGU6IHNldHRpbmdzLnRlbXBsYXRlPy50cmltKCkgfHwgXCJcIixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmluZm8oXCJObyBjdXN0b20geWVhcmx5IG5vdGUgc2V0dGluZ3MgZm91bmQhXCIsIGVycik7XG4gICAgfVxufVxuXG4vLyBDcmVkaXQ6IEBjcmVhdGlvbml4L3BhdGguanNcbmZ1bmN0aW9uIGpvaW4oLi4ucGFydFNlZ21lbnRzKSB7XG4gICAgLy8gU3BsaXQgdGhlIGlucHV0cyBpbnRvIGEgbGlzdCBvZiBwYXRoIGNvbW1hbmRzLlxuICAgIGxldCBwYXJ0cyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwLCBsID0gcGFydFNlZ21lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBwYXJ0cyA9IHBhcnRzLmNvbmNhdChwYXJ0U2VnbWVudHNbaV0uc3BsaXQoXCIvXCIpKTtcbiAgICB9XG4gICAgLy8gSW50ZXJwcmV0IHRoZSBwYXRoIGNvbW1hbmRzIHRvIGdldCB0aGUgbmV3IHJlc29sdmVkIHBhdGguXG4gICAgY29uc3QgbmV3UGFydHMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMCwgbCA9IHBhcnRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBjb25zdCBwYXJ0ID0gcGFydHNbaV07XG4gICAgICAgIC8vIFJlbW92ZSBsZWFkaW5nIGFuZCB0cmFpbGluZyBzbGFzaGVzXG4gICAgICAgIC8vIEFsc28gcmVtb3ZlIFwiLlwiIHNlZ21lbnRzXG4gICAgICAgIGlmICghcGFydCB8fCBwYXJ0ID09PSBcIi5cIilcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAvLyBQdXNoIG5ldyBwYXRoIHNlZ21lbnRzLlxuICAgICAgICBlbHNlXG4gICAgICAgICAgICBuZXdQYXJ0cy5wdXNoKHBhcnQpO1xuICAgIH1cbiAgICAvLyBQcmVzZXJ2ZSB0aGUgaW5pdGlhbCBzbGFzaCBpZiB0aGVyZSB3YXMgb25lLlxuICAgIGlmIChwYXJ0c1swXSA9PT0gXCJcIilcbiAgICAgICAgbmV3UGFydHMudW5zaGlmdChcIlwiKTtcbiAgICAvLyBUdXJuIGJhY2sgaW50byBhIHNpbmdsZSBzdHJpbmcgcGF0aC5cbiAgICByZXR1cm4gbmV3UGFydHMuam9pbihcIi9cIik7XG59XG5mdW5jdGlvbiBiYXNlbmFtZShmdWxsUGF0aCkge1xuICAgIGxldCBiYXNlID0gZnVsbFBhdGguc3Vic3RyaW5nKGZ1bGxQYXRoLmxhc3RJbmRleE9mKFwiL1wiKSArIDEpO1xuICAgIGlmIChiYXNlLmxhc3RJbmRleE9mKFwiLlwiKSAhPSAtMSlcbiAgICAgICAgYmFzZSA9IGJhc2Uuc3Vic3RyaW5nKDAsIGJhc2UubGFzdEluZGV4T2YoXCIuXCIpKTtcbiAgICByZXR1cm4gYmFzZTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGVuc3VyZUZvbGRlckV4aXN0cyhwYXRoKSB7XG4gICAgY29uc3QgZGlycyA9IHBhdGgucmVwbGFjZSgvXFxcXC9nLCBcIi9cIikuc3BsaXQoXCIvXCIpO1xuICAgIGRpcnMucG9wKCk7IC8vIHJlbW92ZSBiYXNlbmFtZVxuICAgIGlmIChkaXJzLmxlbmd0aCkge1xuICAgICAgICBjb25zdCBkaXIgPSBqb2luKC4uLmRpcnMpO1xuICAgICAgICBpZiAoIXdpbmRvdy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGRpcikpIHtcbiAgICAgICAgICAgIGF3YWl0IHdpbmRvdy5hcHAudmF1bHQuY3JlYXRlRm9sZGVyKGRpcik7XG4gICAgICAgIH1cbiAgICB9XG59XG5hc3luYyBmdW5jdGlvbiBnZXROb3RlUGF0aChkaXJlY3RvcnksIGZpbGVuYW1lKSB7XG4gICAgaWYgKCFmaWxlbmFtZS5lbmRzV2l0aChcIi5tZFwiKSkge1xuICAgICAgICBmaWxlbmFtZSArPSBcIi5tZFwiO1xuICAgIH1cbiAgICBjb25zdCBwYXRoID0gb2JzaWRpYW4ubm9ybWFsaXplUGF0aChqb2luKGRpcmVjdG9yeSwgZmlsZW5hbWUpKTtcbiAgICBhd2FpdCBlbnN1cmVGb2xkZXJFeGlzdHMocGF0aCk7XG4gICAgcmV0dXJuIHBhdGg7XG59XG5hc3luYyBmdW5jdGlvbiBnZXRUZW1wbGF0ZUluZm8odGVtcGxhdGUpIHtcbiAgICBjb25zdCB7IG1ldGFkYXRhQ2FjaGUsIHZhdWx0IH0gPSB3aW5kb3cuYXBwO1xuICAgIGNvbnN0IHRlbXBsYXRlUGF0aCA9IG9ic2lkaWFuLm5vcm1hbGl6ZVBhdGgodGVtcGxhdGUpO1xuICAgIGlmICh0ZW1wbGF0ZVBhdGggPT09IFwiL1wiKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoW1wiXCIsIG51bGxdKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdGVtcGxhdGVGaWxlID0gbWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdCh0ZW1wbGF0ZVBhdGgsIFwiXCIpO1xuICAgICAgICBjb25zdCBjb250ZW50cyA9IGF3YWl0IHZhdWx0LmNhY2hlZFJlYWQodGVtcGxhdGVGaWxlKTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgY29uc3QgSUZvbGRJbmZvID0gd2luZG93LmFwcC5mb2xkTWFuYWdlci5sb2FkKHRlbXBsYXRlRmlsZSk7XG4gICAgICAgIHJldHVybiBbY29udGVudHMsIElGb2xkSW5mb107XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIHJlYWQgdGhlIGRhaWx5IG5vdGUgdGVtcGxhdGUgJyR7dGVtcGxhdGVQYXRofSdgLCBlcnIpO1xuICAgICAgICBuZXcgb2JzaWRpYW4uTm90aWNlKFwiRmFpbGVkIHRvIHJlYWQgdGhlIGRhaWx5IG5vdGUgdGVtcGxhdGVcIik7XG4gICAgICAgIHJldHVybiBbXCJcIiwgbnVsbF07XG4gICAgfVxufVxuXG4vKipcbiAqIGRhdGVVSUQgaXMgYSB3YXkgb2Ygd2Vla2x5IGlkZW50aWZ5aW5nIGRhaWx5L3dlZWtseS9tb250aGx5IG5vdGVzLlxuICogVGhleSBhcmUgcHJlZml4ZWQgd2l0aCB0aGUgZ3JhbnVsYXJpdHkgdG8gYXZvaWQgYW1iaWd1aXR5LlxuICovXG5mdW5jdGlvbiBnZXREYXRlVUlEKGRhdGUsIGdyYW51bGFyaXR5ID0gXCJkYXlcIikge1xuICAgIGNvbnN0IHRzID0gZGF0ZS5jbG9uZSgpLnN0YXJ0T2YoZ3JhbnVsYXJpdHkpLmZvcm1hdCgpO1xuICAgIHJldHVybiBgJHtncmFudWxhcml0eX0tJHt0c31gO1xufVxuZnVuY3Rpb24gcmVtb3ZlRXNjYXBlZENoYXJhY3RlcnMoZm9ybWF0KSB7XG4gICAgcmV0dXJuIGZvcm1hdC5yZXBsYWNlKC9cXFtbXlxcXV0qXFxdL2csIFwiXCIpOyAvLyByZW1vdmUgZXZlcnl0aGluZyB3aXRoaW4gYnJhY2tldHNcbn1cbi8qKlxuICogWFhYOiBXaGVuIHBhcnNpbmcgZGF0ZXMgdGhhdCBjb250YWluIGJvdGggd2VlayBudW1iZXJzIGFuZCBtb250aHMsXG4gKiBNb21lbnQgY2hvc2VzIHRvIGlnbm9yZSB0aGUgd2VlayBudW1iZXJzLiBGb3IgdGhlIHdlZWsgZGF0ZVVJRCwgd2VcbiAqIHdhbnQgdGhlIG9wcG9zaXRlIGJlaGF2aW9yLiBTdHJpcCB0aGUgTU1NIGZyb20gdGhlIGZvcm1hdCB0byBwYXRjaC5cbiAqL1xuZnVuY3Rpb24gaXNGb3JtYXRBbWJpZ3VvdXMoZm9ybWF0LCBncmFudWxhcml0eSkge1xuICAgIGlmIChncmFudWxhcml0eSA9PT0gXCJ3ZWVrXCIpIHtcbiAgICAgICAgY29uc3QgY2xlYW5Gb3JtYXQgPSByZW1vdmVFc2NhcGVkQ2hhcmFjdGVycyhmb3JtYXQpO1xuICAgICAgICByZXR1cm4gKC93ezEsMn0vaS50ZXN0KGNsZWFuRm9ybWF0KSAmJlxuICAgICAgICAgICAgKC9NezEsNH0vLnRlc3QoY2xlYW5Gb3JtYXQpIHx8IC9EezEsNH0vLnRlc3QoY2xlYW5Gb3JtYXQpKSk7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGdldERhdGVGcm9tRmlsZShmaWxlLCBncmFudWxhcml0eSkge1xuICAgIHJldHVybiBnZXREYXRlRnJvbUZpbGVuYW1lKGZpbGUuYmFzZW5hbWUsIGdyYW51bGFyaXR5KTtcbn1cbmZ1bmN0aW9uIGdldERhdGVGcm9tUGF0aChwYXRoLCBncmFudWxhcml0eSkge1xuICAgIHJldHVybiBnZXREYXRlRnJvbUZpbGVuYW1lKGJhc2VuYW1lKHBhdGgpLCBncmFudWxhcml0eSk7XG59XG5mdW5jdGlvbiBnZXREYXRlRnJvbUZpbGVuYW1lKGZpbGVuYW1lLCBncmFudWxhcml0eSkge1xuICAgIGNvbnN0IGdldFNldHRpbmdzID0ge1xuICAgICAgICBkYXk6IGdldERhaWx5Tm90ZVNldHRpbmdzLFxuICAgICAgICB3ZWVrOiBnZXRXZWVrbHlOb3RlU2V0dGluZ3MsXG4gICAgICAgIG1vbnRoOiBnZXRNb250aGx5Tm90ZVNldHRpbmdzLFxuICAgICAgICBxdWFydGVyOiBnZXRRdWFydGVybHlOb3RlU2V0dGluZ3MsXG4gICAgICAgIHllYXI6IGdldFllYXJseU5vdGVTZXR0aW5ncyxcbiAgICB9O1xuICAgIGNvbnN0IGZvcm1hdCA9IGdldFNldHRpbmdzW2dyYW51bGFyaXR5XSgpLmZvcm1hdC5zcGxpdChcIi9cIikucG9wKCk7XG4gICAgY29uc3Qgbm90ZURhdGUgPSB3aW5kb3cubW9tZW50KGZpbGVuYW1lLCBmb3JtYXQsIHRydWUpO1xuICAgIGlmICghbm90ZURhdGUuaXNWYWxpZCgpKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpZiAoaXNGb3JtYXRBbWJpZ3VvdXMoZm9ybWF0LCBncmFudWxhcml0eSkpIHtcbiAgICAgICAgaWYgKGdyYW51bGFyaXR5ID09PSBcIndlZWtcIikge1xuICAgICAgICAgICAgY29uc3QgY2xlYW5Gb3JtYXQgPSByZW1vdmVFc2NhcGVkQ2hhcmFjdGVycyhmb3JtYXQpO1xuICAgICAgICAgICAgaWYgKC93ezEsMn0vaS50ZXN0KGNsZWFuRm9ybWF0KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB3aW5kb3cubW9tZW50KGZpbGVuYW1lLCBcbiAgICAgICAgICAgICAgICAvLyBJZiBmb3JtYXQgY29udGFpbnMgd2VlaywgcmVtb3ZlIGRheSAmIG1vbnRoIGZvcm1hdHRpbmdcbiAgICAgICAgICAgICAgICBmb3JtYXQucmVwbGFjZSgvTXsxLDR9L2csIFwiXCIpLnJlcGxhY2UoL0R7MSw0fS9nLCBcIlwiKSwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBub3RlRGF0ZTtcbn1cblxuY2xhc3MgRGFpbHlOb3Rlc0ZvbGRlck1pc3NpbmdFcnJvciBleHRlbmRzIEVycm9yIHtcbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBtaW1pY3MgdGhlIGJlaGF2aW9yIG9mIHRoZSBkYWlseS1ub3RlcyBwbHVnaW5cbiAqIHNvIGl0IHdpbGwgcmVwbGFjZSB7e2RhdGV9fSwge3t0aXRsZX19LCBhbmQge3t0aW1lfX0gd2l0aCB0aGVcbiAqIGZvcm1hdHRlZCB0aW1lc3RhbXAuXG4gKlxuICogTm90ZTogaXQgaGFzIGFuIGFkZGVkIGJvbnVzIHRoYXQgaXQncyBub3QgJ3RvZGF5JyBzcGVjaWZpYy5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gY3JlYXRlRGFpbHlOb3RlKGRhdGUpIHtcbiAgICBjb25zdCBhcHAgPSB3aW5kb3cuYXBwO1xuICAgIGNvbnN0IHsgdmF1bHQgfSA9IGFwcDtcbiAgICBjb25zdCBtb21lbnQgPSB3aW5kb3cubW9tZW50O1xuICAgIGNvbnN0IHsgdGVtcGxhdGUsIGZvcm1hdCwgZm9sZGVyIH0gPSBnZXREYWlseU5vdGVTZXR0aW5ncygpO1xuICAgIGNvbnN0IFt0ZW1wbGF0ZUNvbnRlbnRzLCBJRm9sZEluZm9dID0gYXdhaXQgZ2V0VGVtcGxhdGVJbmZvKHRlbXBsYXRlKTtcbiAgICBjb25zdCBmaWxlbmFtZSA9IGRhdGUuZm9ybWF0KGZvcm1hdCk7XG4gICAgY29uc3Qgbm9ybWFsaXplZFBhdGggPSBhd2FpdCBnZXROb3RlUGF0aChmb2xkZXIsIGZpbGVuYW1lKTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBjcmVhdGVkRmlsZSA9IGF3YWl0IHZhdWx0LmNyZWF0ZShub3JtYWxpemVkUGF0aCwgdGVtcGxhdGVDb250ZW50c1xuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKmRhdGVcXHMqfX0vZ2ksIGZpbGVuYW1lKVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKnRpbWVcXHMqfX0vZ2ksIG1vbWVudCgpLmZvcm1hdChcIkhIOm1tXCIpKVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKnRpdGxlXFxzKn19L2dpLCBmaWxlbmFtZSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyooZGF0ZXx0aW1lKVxccyooKFsrLV1cXGQrKShbeXFtd2Roc10pKT9cXHMqKDouKz8pP319L2dpLCAoXywgX3RpbWVPckRhdGUsIGNhbGMsIHRpbWVEZWx0YSwgdW5pdCwgbW9tZW50Rm9ybWF0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBub3cgPSBtb21lbnQoKTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnREYXRlID0gZGF0ZS5jbG9uZSgpLnNldCh7XG4gICAgICAgICAgICAgICAgaG91cjogbm93LmdldChcImhvdXJcIiksXG4gICAgICAgICAgICAgICAgbWludXRlOiBub3cuZ2V0KFwibWludXRlXCIpLFxuICAgICAgICAgICAgICAgIHNlY29uZDogbm93LmdldChcInNlY29uZFwiKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGNhbGMpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50RGF0ZS5hZGQocGFyc2VJbnQodGltZURlbHRhLCAxMCksIHVuaXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1vbWVudEZvcm1hdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50RGF0ZS5mb3JtYXQobW9tZW50Rm9ybWF0LnN1YnN0cmluZygxKS50cmltKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnREYXRlLmZvcm1hdChmb3JtYXQpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKnllc3RlcmRheVxccyp9fS9naSwgZGF0ZS5jbG9uZSgpLnN1YnRyYWN0KDEsIFwiZGF5XCIpLmZvcm1hdChmb3JtYXQpKVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKnRvbW9ycm93XFxzKn19L2dpLCBkYXRlLmNsb25lKCkuYWRkKDEsIFwiZFwiKS5mb3JtYXQoZm9ybWF0KSkpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBhcHAuZm9sZE1hbmFnZXIuc2F2ZShjcmVhdGVkRmlsZSwgSUZvbGRJbmZvKTtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZWRGaWxlO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBjcmVhdGUgZmlsZTogJyR7bm9ybWFsaXplZFBhdGh9J2AsIGVycik7XG4gICAgICAgIG5ldyBvYnNpZGlhbi5Ob3RpY2UoXCJVbmFibGUgdG8gY3JlYXRlIG5ldyBmaWxlLlwiKTtcbiAgICB9XG59XG5mdW5jdGlvbiBnZXREYWlseU5vdGUoZGF0ZSwgZGFpbHlOb3Rlcykge1xuICAgIHJldHVybiBkYWlseU5vdGVzW2dldERhdGVVSUQoZGF0ZSwgXCJkYXlcIildID8/IG51bGw7XG59XG5mdW5jdGlvbiBnZXRBbGxEYWlseU5vdGVzKCkge1xuICAgIC8qKlxuICAgICAqIEZpbmQgYWxsIGRhaWx5IG5vdGVzIGluIHRoZSBkYWlseSBub3RlIGZvbGRlclxuICAgICAqL1xuICAgIGNvbnN0IHsgdmF1bHQgfSA9IHdpbmRvdy5hcHA7XG4gICAgY29uc3QgeyBmb2xkZXIgfSA9IGdldERhaWx5Tm90ZVNldHRpbmdzKCk7XG4gICAgY29uc3QgZGFpbHlOb3Rlc0ZvbGRlciA9IHZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChvYnNpZGlhbi5ub3JtYWxpemVQYXRoKGZvbGRlcikpO1xuICAgIGlmICghZGFpbHlOb3Rlc0ZvbGRlcikge1xuICAgICAgICB0aHJvdyBuZXcgRGFpbHlOb3Rlc0ZvbGRlck1pc3NpbmdFcnJvcihcIkZhaWxlZCB0byBmaW5kIGRhaWx5IG5vdGVzIGZvbGRlclwiKTtcbiAgICB9XG4gICAgY29uc3QgZGFpbHlOb3RlcyA9IHt9O1xuICAgIG9ic2lkaWFuLlZhdWx0LnJlY3Vyc2VDaGlsZHJlbihkYWlseU5vdGVzRm9sZGVyLCAobm90ZSkgPT4ge1xuICAgICAgICBpZiAobm90ZSBpbnN0YW5jZW9mIG9ic2lkaWFuLlRGaWxlKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRlID0gZ2V0RGF0ZUZyb21GaWxlKG5vdGUsIFwiZGF5XCIpO1xuICAgICAgICAgICAgaWYgKGRhdGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRlU3RyaW5nID0gZ2V0RGF0ZVVJRChkYXRlLCBcImRheVwiKTtcbiAgICAgICAgICAgICAgICBkYWlseU5vdGVzW2RhdGVTdHJpbmddID0gbm90ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBkYWlseU5vdGVzO1xufVxuXG5jbGFzcyBXZWVrbHlOb3Rlc0ZvbGRlck1pc3NpbmdFcnJvciBleHRlbmRzIEVycm9yIHtcbn1cbmZ1bmN0aW9uIGdldERheXNPZldlZWsoKSB7XG4gICAgY29uc3QgeyBtb21lbnQgfSA9IHdpbmRvdztcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGxldCB3ZWVrU3RhcnQgPSBtb21lbnQubG9jYWxlRGF0YSgpLl93ZWVrLmRvdztcbiAgICBjb25zdCBkYXlzT2ZXZWVrID0gW1xuICAgICAgICBcInN1bmRheVwiLFxuICAgICAgICBcIm1vbmRheVwiLFxuICAgICAgICBcInR1ZXNkYXlcIixcbiAgICAgICAgXCJ3ZWRuZXNkYXlcIixcbiAgICAgICAgXCJ0aHVyc2RheVwiLFxuICAgICAgICBcImZyaWRheVwiLFxuICAgICAgICBcInNhdHVyZGF5XCIsXG4gICAgXTtcbiAgICB3aGlsZSAod2Vla1N0YXJ0KSB7XG4gICAgICAgIGRheXNPZldlZWsucHVzaChkYXlzT2ZXZWVrLnNoaWZ0KCkpO1xuICAgICAgICB3ZWVrU3RhcnQtLTtcbiAgICB9XG4gICAgcmV0dXJuIGRheXNPZldlZWs7XG59XG5mdW5jdGlvbiBnZXREYXlPZldlZWtOdW1lcmljYWxWYWx1ZShkYXlPZldlZWtOYW1lKSB7XG4gICAgcmV0dXJuIGdldERheXNPZldlZWsoKS5pbmRleE9mKGRheU9mV2Vla05hbWUudG9Mb3dlckNhc2UoKSk7XG59XG5hc3luYyBmdW5jdGlvbiBjcmVhdGVXZWVrbHlOb3RlKGRhdGUpIHtcbiAgICBjb25zdCB7IHZhdWx0IH0gPSB3aW5kb3cuYXBwO1xuICAgIGNvbnN0IHsgdGVtcGxhdGUsIGZvcm1hdCwgZm9sZGVyIH0gPSBnZXRXZWVrbHlOb3RlU2V0dGluZ3MoKTtcbiAgICBjb25zdCBbdGVtcGxhdGVDb250ZW50cywgSUZvbGRJbmZvXSA9IGF3YWl0IGdldFRlbXBsYXRlSW5mbyh0ZW1wbGF0ZSk7XG4gICAgY29uc3QgZmlsZW5hbWUgPSBkYXRlLmZvcm1hdChmb3JtYXQpO1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRQYXRoID0gYXdhaXQgZ2V0Tm90ZVBhdGgoZm9sZGVyLCBmaWxlbmFtZSk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY3JlYXRlZEZpbGUgPSBhd2FpdCB2YXVsdC5jcmVhdGUobm9ybWFsaXplZFBhdGgsIHRlbXBsYXRlQ29udGVudHNcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyooZGF0ZXx0aW1lKVxccyooKFsrLV1cXGQrKShbeXFtd2Roc10pKT9cXHMqKDouKz8pP319L2dpLCAoXywgX3RpbWVPckRhdGUsIGNhbGMsIHRpbWVEZWx0YSwgdW5pdCwgbW9tZW50Rm9ybWF0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBub3cgPSB3aW5kb3cubW9tZW50KCk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50RGF0ZSA9IGRhdGUuY2xvbmUoKS5zZXQoe1xuICAgICAgICAgICAgICAgIGhvdXI6IG5vdy5nZXQoXCJob3VyXCIpLFxuICAgICAgICAgICAgICAgIG1pbnV0ZTogbm93LmdldChcIm1pbnV0ZVwiKSxcbiAgICAgICAgICAgICAgICBzZWNvbmQ6IG5vdy5nZXQoXCJzZWNvbmRcIiksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChjYWxjKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudERhdGUuYWRkKHBhcnNlSW50KHRpbWVEZWx0YSwgMTApLCB1bml0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtb21lbnRGb3JtYXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudERhdGUuZm9ybWF0KG1vbWVudEZvcm1hdC5zdWJzdHJpbmcoMSkudHJpbSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjdXJyZW50RGF0ZS5mb3JtYXQoZm9ybWF0KTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyp0aXRsZVxccyp9fS9naSwgZmlsZW5hbWUpXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqdGltZVxccyp9fS9naSwgd2luZG93Lm1vbWVudCgpLmZvcm1hdChcIkhIOm1tXCIpKVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKihzdW5kYXl8bW9uZGF5fHR1ZXNkYXl8d2VkbmVzZGF5fHRodXJzZGF5fGZyaWRheXxzYXR1cmRheSlcXHMqOiguKj8pfX0vZ2ksIChfLCBkYXlPZldlZWssIG1vbWVudEZvcm1hdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZGF5ID0gZ2V0RGF5T2ZXZWVrTnVtZXJpY2FsVmFsdWUoZGF5T2ZXZWVrKTtcbiAgICAgICAgICAgIHJldHVybiBkYXRlLndlZWtkYXkoZGF5KS5mb3JtYXQobW9tZW50Rm9ybWF0LnRyaW0oKSk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgd2luZG93LmFwcC5mb2xkTWFuYWdlci5zYXZlKGNyZWF0ZWRGaWxlLCBJRm9sZEluZm8pO1xuICAgICAgICByZXR1cm4gY3JlYXRlZEZpbGU7XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGNyZWF0ZSBmaWxlOiAnJHtub3JtYWxpemVkUGF0aH0nYCwgZXJyKTtcbiAgICAgICAgbmV3IG9ic2lkaWFuLk5vdGljZShcIlVuYWJsZSB0byBjcmVhdGUgbmV3IGZpbGUuXCIpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGdldFdlZWtseU5vdGUoZGF0ZSwgd2Vla2x5Tm90ZXMpIHtcbiAgICByZXR1cm4gd2Vla2x5Tm90ZXNbZ2V0RGF0ZVVJRChkYXRlLCBcIndlZWtcIildID8/IG51bGw7XG59XG5mdW5jdGlvbiBnZXRBbGxXZWVrbHlOb3RlcygpIHtcbiAgICBjb25zdCB3ZWVrbHlOb3RlcyA9IHt9O1xuICAgIGlmICghYXBwSGFzV2Vla2x5Tm90ZXNQbHVnaW5Mb2FkZWQoKSkge1xuICAgICAgICByZXR1cm4gd2Vla2x5Tm90ZXM7XG4gICAgfVxuICAgIGNvbnN0IHsgdmF1bHQgfSA9IHdpbmRvdy5hcHA7XG4gICAgY29uc3QgeyBmb2xkZXIgfSA9IGdldFdlZWtseU5vdGVTZXR0aW5ncygpO1xuICAgIGNvbnN0IHdlZWtseU5vdGVzRm9sZGVyID0gdmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG9ic2lkaWFuLm5vcm1hbGl6ZVBhdGgoZm9sZGVyKSk7XG4gICAgaWYgKCF3ZWVrbHlOb3Rlc0ZvbGRlcikge1xuICAgICAgICB0aHJvdyBuZXcgV2Vla2x5Tm90ZXNGb2xkZXJNaXNzaW5nRXJyb3IoXCJGYWlsZWQgdG8gZmluZCB3ZWVrbHkgbm90ZXMgZm9sZGVyXCIpO1xuICAgIH1cbiAgICBvYnNpZGlhbi5WYXVsdC5yZWN1cnNlQ2hpbGRyZW4od2Vla2x5Tm90ZXNGb2xkZXIsIChub3RlKSA9PiB7XG4gICAgICAgIGlmIChub3RlIGluc3RhbmNlb2Ygb2JzaWRpYW4uVEZpbGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBnZXREYXRlRnJvbUZpbGUobm90ZSwgXCJ3ZWVrXCIpO1xuICAgICAgICAgICAgaWYgKGRhdGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRlU3RyaW5nID0gZ2V0RGF0ZVVJRChkYXRlLCBcIndlZWtcIik7XG4gICAgICAgICAgICAgICAgd2Vla2x5Tm90ZXNbZGF0ZVN0cmluZ10gPSBub3RlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHdlZWtseU5vdGVzO1xufVxuXG5jbGFzcyBNb250aGx5Tm90ZXNGb2xkZXJNaXNzaW5nRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gbWltaWNzIHRoZSBiZWhhdmlvciBvZiB0aGUgZGFpbHktbm90ZXMgcGx1Z2luXG4gKiBzbyBpdCB3aWxsIHJlcGxhY2Uge3tkYXRlfX0sIHt7dGl0bGV9fSwgYW5kIHt7dGltZX19IHdpdGggdGhlXG4gKiBmb3JtYXR0ZWQgdGltZXN0YW1wLlxuICpcbiAqIE5vdGU6IGl0IGhhcyBhbiBhZGRlZCBib251cyB0aGF0IGl0J3Mgbm90ICd0b2RheScgc3BlY2lmaWMuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZU1vbnRobHlOb3RlKGRhdGUpIHtcbiAgICBjb25zdCB7IHZhdWx0IH0gPSB3aW5kb3cuYXBwO1xuICAgIGNvbnN0IHsgdGVtcGxhdGUsIGZvcm1hdCwgZm9sZGVyIH0gPSBnZXRNb250aGx5Tm90ZVNldHRpbmdzKCk7XG4gICAgY29uc3QgW3RlbXBsYXRlQ29udGVudHMsIElGb2xkSW5mb10gPSBhd2FpdCBnZXRUZW1wbGF0ZUluZm8odGVtcGxhdGUpO1xuICAgIGNvbnN0IGZpbGVuYW1lID0gZGF0ZS5mb3JtYXQoZm9ybWF0KTtcbiAgICBjb25zdCBub3JtYWxpemVkUGF0aCA9IGF3YWl0IGdldE5vdGVQYXRoKGZvbGRlciwgZmlsZW5hbWUpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGNyZWF0ZWRGaWxlID0gYXdhaXQgdmF1bHQuY3JlYXRlKG5vcm1hbGl6ZWRQYXRoLCB0ZW1wbGF0ZUNvbnRlbnRzXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqKGRhdGV8dGltZSlcXHMqKChbKy1dXFxkKykoW3lxbXdkaHNdKSk/XFxzKig6Lis/KT99fS9naSwgKF8sIF90aW1lT3JEYXRlLCBjYWxjLCB0aW1lRGVsdGEsIHVuaXQsIG1vbWVudEZvcm1hdCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgbm93ID0gd2luZG93Lm1vbWVudCgpO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudERhdGUgPSBkYXRlLmNsb25lKCkuc2V0KHtcbiAgICAgICAgICAgICAgICBob3VyOiBub3cuZ2V0KFwiaG91clwiKSxcbiAgICAgICAgICAgICAgICBtaW51dGU6IG5vdy5nZXQoXCJtaW51dGVcIiksXG4gICAgICAgICAgICAgICAgc2Vjb25kOiBub3cuZ2V0KFwic2Vjb25kXCIpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoY2FsYykge1xuICAgICAgICAgICAgICAgIGN1cnJlbnREYXRlLmFkZChwYXJzZUludCh0aW1lRGVsdGEsIDEwKSwgdW5pdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobW9tZW50Rm9ybWF0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnREYXRlLmZvcm1hdChtb21lbnRGb3JtYXQuc3Vic3RyaW5nKDEpLnRyaW0oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY3VycmVudERhdGUuZm9ybWF0KGZvcm1hdCk7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqZGF0ZVxccyp9fS9naSwgZmlsZW5hbWUpXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqdGltZVxccyp9fS9naSwgd2luZG93Lm1vbWVudCgpLmZvcm1hdChcIkhIOm1tXCIpKVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKnRpdGxlXFxzKn19L2dpLCBmaWxlbmFtZSkpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICB3aW5kb3cuYXBwLmZvbGRNYW5hZ2VyLnNhdmUoY3JlYXRlZEZpbGUsIElGb2xkSW5mbyk7XG4gICAgICAgIHJldHVybiBjcmVhdGVkRmlsZTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gY3JlYXRlIGZpbGU6ICcke25vcm1hbGl6ZWRQYXRofSdgLCBlcnIpO1xuICAgICAgICBuZXcgb2JzaWRpYW4uTm90aWNlKFwiVW5hYmxlIHRvIGNyZWF0ZSBuZXcgZmlsZS5cIik7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0TW9udGhseU5vdGUoZGF0ZSwgbW9udGhseU5vdGVzKSB7XG4gICAgcmV0dXJuIG1vbnRobHlOb3Rlc1tnZXREYXRlVUlEKGRhdGUsIFwibW9udGhcIildID8/IG51bGw7XG59XG5mdW5jdGlvbiBnZXRBbGxNb250aGx5Tm90ZXMoKSB7XG4gICAgY29uc3QgbW9udGhseU5vdGVzID0ge307XG4gICAgaWYgKCFhcHBIYXNNb250aGx5Tm90ZXNQbHVnaW5Mb2FkZWQoKSkge1xuICAgICAgICByZXR1cm4gbW9udGhseU5vdGVzO1xuICAgIH1cbiAgICBjb25zdCB7IHZhdWx0IH0gPSB3aW5kb3cuYXBwO1xuICAgIGNvbnN0IHsgZm9sZGVyIH0gPSBnZXRNb250aGx5Tm90ZVNldHRpbmdzKCk7XG4gICAgY29uc3QgbW9udGhseU5vdGVzRm9sZGVyID0gdmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG9ic2lkaWFuLm5vcm1hbGl6ZVBhdGgoZm9sZGVyKSk7XG4gICAgaWYgKCFtb250aGx5Tm90ZXNGb2xkZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IE1vbnRobHlOb3Rlc0ZvbGRlck1pc3NpbmdFcnJvcihcIkZhaWxlZCB0byBmaW5kIG1vbnRobHkgbm90ZXMgZm9sZGVyXCIpO1xuICAgIH1cbiAgICBvYnNpZGlhbi5WYXVsdC5yZWN1cnNlQ2hpbGRyZW4obW9udGhseU5vdGVzRm9sZGVyLCAobm90ZSkgPT4ge1xuICAgICAgICBpZiAobm90ZSBpbnN0YW5jZW9mIG9ic2lkaWFuLlRGaWxlKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRlID0gZ2V0RGF0ZUZyb21GaWxlKG5vdGUsIFwibW9udGhcIik7XG4gICAgICAgICAgICBpZiAoZGF0ZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVTdHJpbmcgPSBnZXREYXRlVUlEKGRhdGUsIFwibW9udGhcIik7XG4gICAgICAgICAgICAgICAgbW9udGhseU5vdGVzW2RhdGVTdHJpbmddID0gbm90ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBtb250aGx5Tm90ZXM7XG59XG5cbmNsYXNzIFF1YXJ0ZXJseU5vdGVzRm9sZGVyTWlzc2luZ0Vycm9yIGV4dGVuZHMgRXJyb3Ige1xufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIG1pbWljcyB0aGUgYmVoYXZpb3Igb2YgdGhlIGRhaWx5LW5vdGVzIHBsdWdpblxuICogc28gaXQgd2lsbCByZXBsYWNlIHt7ZGF0ZX19LCB7e3RpdGxlfX0sIGFuZCB7e3RpbWV9fSB3aXRoIHRoZVxuICogZm9ybWF0dGVkIHRpbWVzdGFtcC5cbiAqXG4gKiBOb3RlOiBpdCBoYXMgYW4gYWRkZWQgYm9udXMgdGhhdCBpdCdzIG5vdCAndG9kYXknIHNwZWNpZmljLlxuICovXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVRdWFydGVybHlOb3RlKGRhdGUpIHtcbiAgICBjb25zdCB7IHZhdWx0IH0gPSB3aW5kb3cuYXBwO1xuICAgIGNvbnN0IHsgdGVtcGxhdGUsIGZvcm1hdCwgZm9sZGVyIH0gPSBnZXRRdWFydGVybHlOb3RlU2V0dGluZ3MoKTtcbiAgICBjb25zdCBbdGVtcGxhdGVDb250ZW50cywgSUZvbGRJbmZvXSA9IGF3YWl0IGdldFRlbXBsYXRlSW5mbyh0ZW1wbGF0ZSk7XG4gICAgY29uc3QgZmlsZW5hbWUgPSBkYXRlLmZvcm1hdChmb3JtYXQpO1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRQYXRoID0gYXdhaXQgZ2V0Tm90ZVBhdGgoZm9sZGVyLCBmaWxlbmFtZSk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY3JlYXRlZEZpbGUgPSBhd2FpdCB2YXVsdC5jcmVhdGUobm9ybWFsaXplZFBhdGgsIHRlbXBsYXRlQ29udGVudHNcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyooZGF0ZXx0aW1lKVxccyooKFsrLV1cXGQrKShbeXFtd2Roc10pKT9cXHMqKDouKz8pP319L2dpLCAoXywgX3RpbWVPckRhdGUsIGNhbGMsIHRpbWVEZWx0YSwgdW5pdCwgbW9tZW50Rm9ybWF0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBub3cgPSB3aW5kb3cubW9tZW50KCk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50RGF0ZSA9IGRhdGUuY2xvbmUoKS5zZXQoe1xuICAgICAgICAgICAgICAgIGhvdXI6IG5vdy5nZXQoXCJob3VyXCIpLFxuICAgICAgICAgICAgICAgIG1pbnV0ZTogbm93LmdldChcIm1pbnV0ZVwiKSxcbiAgICAgICAgICAgICAgICBzZWNvbmQ6IG5vdy5nZXQoXCJzZWNvbmRcIiksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChjYWxjKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudERhdGUuYWRkKHBhcnNlSW50KHRpbWVEZWx0YSwgMTApLCB1bml0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtb21lbnRGb3JtYXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudERhdGUuZm9ybWF0KG1vbWVudEZvcm1hdC5zdWJzdHJpbmcoMSkudHJpbSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjdXJyZW50RGF0ZS5mb3JtYXQoZm9ybWF0KTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccypkYXRlXFxzKn19L2dpLCBmaWxlbmFtZSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyp0aW1lXFxzKn19L2dpLCB3aW5kb3cubW9tZW50KCkuZm9ybWF0KFwiSEg6bW1cIikpXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqdGl0bGVcXHMqfX0vZ2ksIGZpbGVuYW1lKSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHdpbmRvdy5hcHAuZm9sZE1hbmFnZXIuc2F2ZShjcmVhdGVkRmlsZSwgSUZvbGRJbmZvKTtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZWRGaWxlO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBjcmVhdGUgZmlsZTogJyR7bm9ybWFsaXplZFBhdGh9J2AsIGVycik7XG4gICAgICAgIG5ldyBvYnNpZGlhbi5Ob3RpY2UoXCJVbmFibGUgdG8gY3JlYXRlIG5ldyBmaWxlLlwiKTtcbiAgICB9XG59XG5mdW5jdGlvbiBnZXRRdWFydGVybHlOb3RlKGRhdGUsIHF1YXJ0ZXJseSkge1xuICAgIHJldHVybiBxdWFydGVybHlbZ2V0RGF0ZVVJRChkYXRlLCBcInF1YXJ0ZXJcIildID8/IG51bGw7XG59XG5mdW5jdGlvbiBnZXRBbGxRdWFydGVybHlOb3RlcygpIHtcbiAgICBjb25zdCBxdWFydGVybHkgPSB7fTtcbiAgICBpZiAoIWFwcEhhc1F1YXJ0ZXJseU5vdGVzUGx1Z2luTG9hZGVkKCkpIHtcbiAgICAgICAgcmV0dXJuIHF1YXJ0ZXJseTtcbiAgICB9XG4gICAgY29uc3QgeyB2YXVsdCB9ID0gd2luZG93LmFwcDtcbiAgICBjb25zdCB7IGZvbGRlciB9ID0gZ2V0UXVhcnRlcmx5Tm90ZVNldHRpbmdzKCk7XG4gICAgY29uc3QgcXVhcnRlcmx5Rm9sZGVyID0gdmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG9ic2lkaWFuLm5vcm1hbGl6ZVBhdGgoZm9sZGVyKSk7XG4gICAgaWYgKCFxdWFydGVybHlGb2xkZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFF1YXJ0ZXJseU5vdGVzRm9sZGVyTWlzc2luZ0Vycm9yKFwiRmFpbGVkIHRvIGZpbmQgcXVhcnRlcmx5IG5vdGVzIGZvbGRlclwiKTtcbiAgICB9XG4gICAgb2JzaWRpYW4uVmF1bHQucmVjdXJzZUNoaWxkcmVuKHF1YXJ0ZXJseUZvbGRlciwgKG5vdGUpID0+IHtcbiAgICAgICAgaWYgKG5vdGUgaW5zdGFuY2VvZiBvYnNpZGlhbi5URmlsZSkge1xuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IGdldERhdGVGcm9tRmlsZShub3RlLCBcInF1YXJ0ZXJcIik7XG4gICAgICAgICAgICBpZiAoZGF0ZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVTdHJpbmcgPSBnZXREYXRlVUlEKGRhdGUsIFwicXVhcnRlclwiKTtcbiAgICAgICAgICAgICAgICBxdWFydGVybHlbZGF0ZVN0cmluZ10gPSBub3RlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHF1YXJ0ZXJseTtcbn1cblxuY2xhc3MgWWVhcmx5Tm90ZXNGb2xkZXJNaXNzaW5nRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gbWltaWNzIHRoZSBiZWhhdmlvciBvZiB0aGUgZGFpbHktbm90ZXMgcGx1Z2luXG4gKiBzbyBpdCB3aWxsIHJlcGxhY2Uge3tkYXRlfX0sIHt7dGl0bGV9fSwgYW5kIHt7dGltZX19IHdpdGggdGhlXG4gKiBmb3JtYXR0ZWQgdGltZXN0YW1wLlxuICpcbiAqIE5vdGU6IGl0IGhhcyBhbiBhZGRlZCBib251cyB0aGF0IGl0J3Mgbm90ICd0b2RheScgc3BlY2lmaWMuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVllYXJseU5vdGUoZGF0ZSkge1xuICAgIGNvbnN0IHsgdmF1bHQgfSA9IHdpbmRvdy5hcHA7XG4gICAgY29uc3QgeyB0ZW1wbGF0ZSwgZm9ybWF0LCBmb2xkZXIgfSA9IGdldFllYXJseU5vdGVTZXR0aW5ncygpO1xuICAgIGNvbnN0IFt0ZW1wbGF0ZUNvbnRlbnRzLCBJRm9sZEluZm9dID0gYXdhaXQgZ2V0VGVtcGxhdGVJbmZvKHRlbXBsYXRlKTtcbiAgICBjb25zdCBmaWxlbmFtZSA9IGRhdGUuZm9ybWF0KGZvcm1hdCk7XG4gICAgY29uc3Qgbm9ybWFsaXplZFBhdGggPSBhd2FpdCBnZXROb3RlUGF0aChmb2xkZXIsIGZpbGVuYW1lKTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBjcmVhdGVkRmlsZSA9IGF3YWl0IHZhdWx0LmNyZWF0ZShub3JtYWxpemVkUGF0aCwgdGVtcGxhdGVDb250ZW50c1xuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKihkYXRlfHRpbWUpXFxzKigoWystXVxcZCspKFt5cW13ZGhzXSkpP1xccyooOi4rPyk/fX0vZ2ksIChfLCBfdGltZU9yRGF0ZSwgY2FsYywgdGltZURlbHRhLCB1bml0LCBtb21lbnRGb3JtYXQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IHdpbmRvdy5tb21lbnQoKTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnREYXRlID0gZGF0ZS5jbG9uZSgpLnNldCh7XG4gICAgICAgICAgICAgICAgaG91cjogbm93LmdldChcImhvdXJcIiksXG4gICAgICAgICAgICAgICAgbWludXRlOiBub3cuZ2V0KFwibWludXRlXCIpLFxuICAgICAgICAgICAgICAgIHNlY29uZDogbm93LmdldChcInNlY29uZFwiKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGNhbGMpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50RGF0ZS5hZGQocGFyc2VJbnQodGltZURlbHRhLCAxMCksIHVuaXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1vbWVudEZvcm1hdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50RGF0ZS5mb3JtYXQobW9tZW50Rm9ybWF0LnN1YnN0cmluZygxKS50cmltKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnREYXRlLmZvcm1hdChmb3JtYXQpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKmRhdGVcXHMqfX0vZ2ksIGZpbGVuYW1lKVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKnRpbWVcXHMqfX0vZ2ksIHdpbmRvdy5tb21lbnQoKS5mb3JtYXQoXCJISDptbVwiKSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyp0aXRsZVxccyp9fS9naSwgZmlsZW5hbWUpKTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgd2luZG93LmFwcC5mb2xkTWFuYWdlci5zYXZlKGNyZWF0ZWRGaWxlLCBJRm9sZEluZm8pO1xuICAgICAgICByZXR1cm4gY3JlYXRlZEZpbGU7XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGNyZWF0ZSBmaWxlOiAnJHtub3JtYWxpemVkUGF0aH0nYCwgZXJyKTtcbiAgICAgICAgbmV3IG9ic2lkaWFuLk5vdGljZShcIlVuYWJsZSB0byBjcmVhdGUgbmV3IGZpbGUuXCIpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGdldFllYXJseU5vdGUoZGF0ZSwgeWVhcmx5Tm90ZXMpIHtcbiAgICByZXR1cm4geWVhcmx5Tm90ZXNbZ2V0RGF0ZVVJRChkYXRlLCBcInllYXJcIildID8/IG51bGw7XG59XG5mdW5jdGlvbiBnZXRBbGxZZWFybHlOb3RlcygpIHtcbiAgICBjb25zdCB5ZWFybHlOb3RlcyA9IHt9O1xuICAgIGlmICghYXBwSGFzWWVhcmx5Tm90ZXNQbHVnaW5Mb2FkZWQoKSkge1xuICAgICAgICByZXR1cm4geWVhcmx5Tm90ZXM7XG4gICAgfVxuICAgIGNvbnN0IHsgdmF1bHQgfSA9IHdpbmRvdy5hcHA7XG4gICAgY29uc3QgeyBmb2xkZXIgfSA9IGdldFllYXJseU5vdGVTZXR0aW5ncygpO1xuICAgIGNvbnN0IHllYXJseU5vdGVzRm9sZGVyID0gdmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG9ic2lkaWFuLm5vcm1hbGl6ZVBhdGgoZm9sZGVyKSk7XG4gICAgaWYgKCF5ZWFybHlOb3Rlc0ZvbGRlcikge1xuICAgICAgICB0aHJvdyBuZXcgWWVhcmx5Tm90ZXNGb2xkZXJNaXNzaW5nRXJyb3IoXCJGYWlsZWQgdG8gZmluZCB5ZWFybHkgbm90ZXMgZm9sZGVyXCIpO1xuICAgIH1cbiAgICBvYnNpZGlhbi5WYXVsdC5yZWN1cnNlQ2hpbGRyZW4oeWVhcmx5Tm90ZXNGb2xkZXIsIChub3RlKSA9PiB7XG4gICAgICAgIGlmIChub3RlIGluc3RhbmNlb2Ygb2JzaWRpYW4uVEZpbGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBnZXREYXRlRnJvbUZpbGUobm90ZSwgXCJ5ZWFyXCIpO1xuICAgICAgICAgICAgaWYgKGRhdGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRlU3RyaW5nID0gZ2V0RGF0ZVVJRChkYXRlLCBcInllYXJcIik7XG4gICAgICAgICAgICAgICAgeWVhcmx5Tm90ZXNbZGF0ZVN0cmluZ10gPSBub3RlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHllYXJseU5vdGVzO1xufVxuXG5mdW5jdGlvbiBhcHBIYXNEYWlseU5vdGVzUGx1Z2luTG9hZGVkKCkge1xuICAgIGNvbnN0IHsgYXBwIH0gPSB3aW5kb3c7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjb25zdCBkYWlseU5vdGVzUGx1Z2luID0gYXBwLmludGVybmFsUGx1Z2lucy5wbHVnaW5zW1wiZGFpbHktbm90ZXNcIl07XG4gICAgaWYgKGRhaWx5Tm90ZXNQbHVnaW4gJiYgZGFpbHlOb3Rlc1BsdWdpbi5lbmFibGVkKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGNvbnN0IHBlcmlvZGljTm90ZXMgPSBhcHAucGx1Z2lucy5nZXRQbHVnaW4oXCJwZXJpb2RpYy1ub3Rlc1wiKTtcbiAgICByZXR1cm4gcGVyaW9kaWNOb3RlcyAmJiBwZXJpb2RpY05vdGVzLnNldHRpbmdzPy5kYWlseT8uZW5hYmxlZDtcbn1cbi8qKlxuICogWFhYOiBcIldlZWtseSBOb3Rlc1wiIGxpdmUgaW4gZWl0aGVyIHRoZSBDYWxlbmRhciBwbHVnaW4gb3IgdGhlIHBlcmlvZGljLW5vdGVzIHBsdWdpbi5cbiAqIENoZWNrIGJvdGggdW50aWwgdGhlIHdlZWtseSBub3RlcyBmZWF0dXJlIGlzIHJlbW92ZWQgZnJvbSB0aGUgQ2FsZW5kYXIgcGx1Z2luLlxuICovXG5mdW5jdGlvbiBhcHBIYXNXZWVrbHlOb3Rlc1BsdWdpbkxvYWRlZCgpIHtcbiAgICBjb25zdCB7IGFwcCB9ID0gd2luZG93O1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgaWYgKGFwcC5wbHVnaW5zLmdldFBsdWdpbihcImNhbGVuZGFyXCIpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGNvbnN0IHBlcmlvZGljTm90ZXMgPSBhcHAucGx1Z2lucy5nZXRQbHVnaW4oXCJwZXJpb2RpYy1ub3Rlc1wiKTtcbiAgICByZXR1cm4gcGVyaW9kaWNOb3RlcyAmJiBwZXJpb2RpY05vdGVzLnNldHRpbmdzPy53ZWVrbHk/LmVuYWJsZWQ7XG59XG5mdW5jdGlvbiBhcHBIYXNNb250aGx5Tm90ZXNQbHVnaW5Mb2FkZWQoKSB7XG4gICAgY29uc3QgeyBhcHAgfSA9IHdpbmRvdztcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGNvbnN0IHBlcmlvZGljTm90ZXMgPSBhcHAucGx1Z2lucy5nZXRQbHVnaW4oXCJwZXJpb2RpYy1ub3Rlc1wiKTtcbiAgICByZXR1cm4gcGVyaW9kaWNOb3RlcyAmJiBwZXJpb2RpY05vdGVzLnNldHRpbmdzPy5tb250aGx5Py5lbmFibGVkO1xufVxuZnVuY3Rpb24gYXBwSGFzUXVhcnRlcmx5Tm90ZXNQbHVnaW5Mb2FkZWQoKSB7XG4gICAgY29uc3QgeyBhcHAgfSA9IHdpbmRvdztcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGNvbnN0IHBlcmlvZGljTm90ZXMgPSBhcHAucGx1Z2lucy5nZXRQbHVnaW4oXCJwZXJpb2RpYy1ub3Rlc1wiKTtcbiAgICByZXR1cm4gcGVyaW9kaWNOb3RlcyAmJiBwZXJpb2RpY05vdGVzLnNldHRpbmdzPy5xdWFydGVybHk/LmVuYWJsZWQ7XG59XG5mdW5jdGlvbiBhcHBIYXNZZWFybHlOb3Rlc1BsdWdpbkxvYWRlZCgpIHtcbiAgICBjb25zdCB7IGFwcCB9ID0gd2luZG93O1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgY29uc3QgcGVyaW9kaWNOb3RlcyA9IGFwcC5wbHVnaW5zLmdldFBsdWdpbihcInBlcmlvZGljLW5vdGVzXCIpO1xuICAgIHJldHVybiBwZXJpb2RpY05vdGVzICYmIHBlcmlvZGljTm90ZXMuc2V0dGluZ3M/LnllYXJseT8uZW5hYmxlZDtcbn1cbmZ1bmN0aW9uIGdldFBlcmlvZGljTm90ZVNldHRpbmdzKGdyYW51bGFyaXR5KSB7XG4gICAgY29uc3QgZ2V0U2V0dGluZ3MgPSB7XG4gICAgICAgIGRheTogZ2V0RGFpbHlOb3RlU2V0dGluZ3MsXG4gICAgICAgIHdlZWs6IGdldFdlZWtseU5vdGVTZXR0aW5ncyxcbiAgICAgICAgbW9udGg6IGdldE1vbnRobHlOb3RlU2V0dGluZ3MsXG4gICAgICAgIHF1YXJ0ZXI6IGdldFF1YXJ0ZXJseU5vdGVTZXR0aW5ncyxcbiAgICAgICAgeWVhcjogZ2V0WWVhcmx5Tm90ZVNldHRpbmdzLFxuICAgIH1bZ3JhbnVsYXJpdHldO1xuICAgIHJldHVybiBnZXRTZXR0aW5ncygpO1xufVxuZnVuY3Rpb24gY3JlYXRlUGVyaW9kaWNOb3RlKGdyYW51bGFyaXR5LCBkYXRlKSB7XG4gICAgY29uc3QgY3JlYXRlRm4gPSB7XG4gICAgICAgIGRheTogY3JlYXRlRGFpbHlOb3RlLFxuICAgICAgICBtb250aDogY3JlYXRlTW9udGhseU5vdGUsXG4gICAgICAgIHdlZWs6IGNyZWF0ZVdlZWtseU5vdGUsXG4gICAgfTtcbiAgICByZXR1cm4gY3JlYXRlRm5bZ3JhbnVsYXJpdHldKGRhdGUpO1xufVxuXG5leHBvcnRzLkRFRkFVTFRfREFJTFlfTk9URV9GT1JNQVQgPSBERUZBVUxUX0RBSUxZX05PVEVfRk9STUFUO1xuZXhwb3J0cy5ERUZBVUxUX01PTlRITFlfTk9URV9GT1JNQVQgPSBERUZBVUxUX01PTlRITFlfTk9URV9GT1JNQVQ7XG5leHBvcnRzLkRFRkFVTFRfUVVBUlRFUkxZX05PVEVfRk9STUFUID0gREVGQVVMVF9RVUFSVEVSTFlfTk9URV9GT1JNQVQ7XG5leHBvcnRzLkRFRkFVTFRfV0VFS0xZX05PVEVfRk9STUFUID0gREVGQVVMVF9XRUVLTFlfTk9URV9GT1JNQVQ7XG5leHBvcnRzLkRFRkFVTFRfWUVBUkxZX05PVEVfRk9STUFUID0gREVGQVVMVF9ZRUFSTFlfTk9URV9GT1JNQVQ7XG5leHBvcnRzLmFwcEhhc0RhaWx5Tm90ZXNQbHVnaW5Mb2FkZWQgPSBhcHBIYXNEYWlseU5vdGVzUGx1Z2luTG9hZGVkO1xuZXhwb3J0cy5hcHBIYXNNb250aGx5Tm90ZXNQbHVnaW5Mb2FkZWQgPSBhcHBIYXNNb250aGx5Tm90ZXNQbHVnaW5Mb2FkZWQ7XG5leHBvcnRzLmFwcEhhc1F1YXJ0ZXJseU5vdGVzUGx1Z2luTG9hZGVkID0gYXBwSGFzUXVhcnRlcmx5Tm90ZXNQbHVnaW5Mb2FkZWQ7XG5leHBvcnRzLmFwcEhhc1dlZWtseU5vdGVzUGx1Z2luTG9hZGVkID0gYXBwSGFzV2Vla2x5Tm90ZXNQbHVnaW5Mb2FkZWQ7XG5leHBvcnRzLmFwcEhhc1llYXJseU5vdGVzUGx1Z2luTG9hZGVkID0gYXBwSGFzWWVhcmx5Tm90ZXNQbHVnaW5Mb2FkZWQ7XG5leHBvcnRzLmNyZWF0ZURhaWx5Tm90ZSA9IGNyZWF0ZURhaWx5Tm90ZTtcbmV4cG9ydHMuY3JlYXRlTW9udGhseU5vdGUgPSBjcmVhdGVNb250aGx5Tm90ZTtcbmV4cG9ydHMuY3JlYXRlUGVyaW9kaWNOb3RlID0gY3JlYXRlUGVyaW9kaWNOb3RlO1xuZXhwb3J0cy5jcmVhdGVRdWFydGVybHlOb3RlID0gY3JlYXRlUXVhcnRlcmx5Tm90ZTtcbmV4cG9ydHMuY3JlYXRlV2Vla2x5Tm90ZSA9IGNyZWF0ZVdlZWtseU5vdGU7XG5leHBvcnRzLmNyZWF0ZVllYXJseU5vdGUgPSBjcmVhdGVZZWFybHlOb3RlO1xuZXhwb3J0cy5nZXRBbGxEYWlseU5vdGVzID0gZ2V0QWxsRGFpbHlOb3RlcztcbmV4cG9ydHMuZ2V0QWxsTW9udGhseU5vdGVzID0gZ2V0QWxsTW9udGhseU5vdGVzO1xuZXhwb3J0cy5nZXRBbGxRdWFydGVybHlOb3RlcyA9IGdldEFsbFF1YXJ0ZXJseU5vdGVzO1xuZXhwb3J0cy5nZXRBbGxXZWVrbHlOb3RlcyA9IGdldEFsbFdlZWtseU5vdGVzO1xuZXhwb3J0cy5nZXRBbGxZZWFybHlOb3RlcyA9IGdldEFsbFllYXJseU5vdGVzO1xuZXhwb3J0cy5nZXREYWlseU5vdGUgPSBnZXREYWlseU5vdGU7XG5leHBvcnRzLmdldERhaWx5Tm90ZVNldHRpbmdzID0gZ2V0RGFpbHlOb3RlU2V0dGluZ3M7XG5leHBvcnRzLmdldERhdGVGcm9tRmlsZSA9IGdldERhdGVGcm9tRmlsZTtcbmV4cG9ydHMuZ2V0RGF0ZUZyb21QYXRoID0gZ2V0RGF0ZUZyb21QYXRoO1xuZXhwb3J0cy5nZXREYXRlVUlEID0gZ2V0RGF0ZVVJRDtcbmV4cG9ydHMuZ2V0TW9udGhseU5vdGUgPSBnZXRNb250aGx5Tm90ZTtcbmV4cG9ydHMuZ2V0TW9udGhseU5vdGVTZXR0aW5ncyA9IGdldE1vbnRobHlOb3RlU2V0dGluZ3M7XG5leHBvcnRzLmdldFBlcmlvZGljTm90ZVNldHRpbmdzID0gZ2V0UGVyaW9kaWNOb3RlU2V0dGluZ3M7XG5leHBvcnRzLmdldFF1YXJ0ZXJseU5vdGUgPSBnZXRRdWFydGVybHlOb3RlO1xuZXhwb3J0cy5nZXRRdWFydGVybHlOb3RlU2V0dGluZ3MgPSBnZXRRdWFydGVybHlOb3RlU2V0dGluZ3M7XG5leHBvcnRzLmdldFRlbXBsYXRlSW5mbyA9IGdldFRlbXBsYXRlSW5mbztcbmV4cG9ydHMuZ2V0V2Vla2x5Tm90ZSA9IGdldFdlZWtseU5vdGU7XG5leHBvcnRzLmdldFdlZWtseU5vdGVTZXR0aW5ncyA9IGdldFdlZWtseU5vdGVTZXR0aW5ncztcbmV4cG9ydHMuZ2V0WWVhcmx5Tm90ZSA9IGdldFllYXJseU5vdGU7XG5leHBvcnRzLmdldFllYXJseU5vdGVTZXR0aW5ncyA9IGdldFllYXJseU5vdGVTZXR0aW5ncztcbiIsICIvKipcclxuICogSG9tZSBCYXNlIFBsdWdpblxyXG4gKiBZb3VyIGRlZGljYXRlZCBob21lIGluIHlvdXIgdmF1bHRcclxuICovXHJcblxyXG5pbXBvcnQgeyBOb3RpY2UsIFBsYXRmb3JtLCBQbHVnaW4sIGFkZEljb24gfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IERFRkFVTFRfU0VUVElOR1MsIEhvbWVCYXNlU2V0dGluZ3MsIEhvbWVCYXNlVHlwZSB9IGZyb20gJy4vc2V0dGluZ3MnO1xyXG5pbXBvcnQgeyBIb21lQmFzZVNldHRpbmdUYWIgfSBmcm9tICcuL3VpL3NldHRpbmdzLXRhYic7XHJcbmltcG9ydCB7IEhvbWVCYXNlU2VydmljZSB9IGZyb20gJy4vc2VydmljZXMvaG9tZS1zZXJ2aWNlJztcclxuaW1wb3J0IHsgTmV3VGFiU2VydmljZSB9IGZyb20gJy4vc2VydmljZXMvbmV3LXRhYi1zZXJ2aWNlJztcclxuaW1wb3J0IHsgU3RpY2t5VGFiU2VydmljZSB9IGZyb20gJy4vc2VydmljZXMvc3RpY2t5LXRhYi1zZXJ2aWNlJztcclxuaW1wb3J0IHsgTW9iaWxlQnV0dG9uU2VydmljZSB9IGZyb20gJy4vc2VydmljZXMvbW9iaWxlLWJ1dHRvbi1zZXJ2aWNlJztcclxuaW1wb3J0IHsgbWlncmF0ZUxlZ2FjeVNldHRpbmdzIH0gZnJvbSAnLi9taWdyYXRpb24nO1xyXG5cclxuLyoqXHJcbiAqIEV4dGVuZGVkIEFwcCBpbnRlcmZhY2UgZm9yIHJlbGVhc2Ugbm90ZXMgcGF0Y2hpbmdcclxuICovXHJcbmludGVyZmFjZSBBcHBXaXRoUmVsZWFzZU5vdGVzIHtcclxuXHRzaG93UmVsZWFzZU5vdGVzPzogKCkgPT4gdm9pZDtcclxuXHRudk9yaWdfc2hvd1JlbGVhc2VOb3Rlcz86ICgpID0+IHZvaWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDdXN0b20gaG9tZSBpY29uIFNWRyAoTHVjaWRlIGhvdXNlIGljb24pXHJcbiAqL1xyXG5jb25zdCBIT01FX0lDT04gPSBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiPjxwYXRoIGQ9XCJNMTUgMjF2LThhMSAxIDAgMCAwLTEtMWgtNGExIDEgMCAwIDAtMSAxdjhcIi8+PHBhdGggZD1cIk0zIDEwYTIgMiAwIDAgMSAuNzA5LTEuNTI4bDctNmEyIDIgMCAwIDEgMi41ODIgMGw3IDZBMiAyIDAgMCAxIDIxIDEwdjlhMiAyIDAgMCAxLTIgMkg1YTIgMiAwIDAgMS0yLTJ6XCIvPjwvc3ZnPmA7XHJcblxyXG4vKipcclxuICogVGltaW5nIGNvbnN0YW50cyBmb3IgVUkgb3BlcmF0aW9uc1xyXG4gKiBUaGVzZSBkZWxheXMgYXJlIG5lY2Vzc2FyeSBmb3IgT2JzaWRpYW4ncyBpbnRlcm5hbCBET00gdXBkYXRlcyB0byBjb21wbGV0ZVxyXG4gKi9cclxuXHJcbi8qKiBEZWxheSB0byBlbnN1cmUgRE9NIGlzIHJlYWR5IGFmdGVyIGxheW91dC1yZWFkeSBldmVudCAoc2V0dGluZ3MgbW9kYWwgZGV0ZWN0aW9uKSAqL1xyXG5jb25zdCBET01fUkVBRFlfREVMQVkgPSAxMDA7XHJcblxyXG4vKiogRGVsYXkgZm9yIHRhYiBoZWFkZXIgdXBkYXRlcyBhZnRlciBsYXlvdXQgY2hhbmdlcyB0byBhdm9pZCB2aXN1YWwgZmxpY2tlcmluZyAqL1xyXG5jb25zdCBUQUJfSEVBREVSX1VQREFURV9ERUxBWSA9IDE1MDtcclxuXHJcbi8qKiBEZWxheSBmb3IgVUkgdXBkYXRlcyBhZnRlciBmaWxlLW9wZW4gdG8gbGV0IGFuaW1hdGlvbnMgY29tcGxldGUgKi9cclxuY29uc3QgRklMRV9PUEVOX0FOSU1BVElPTl9ERUxBWSA9IDEwMDtcclxuXHJcbi8qKiBEZWxheSBmb3IgdXBkYXRlcyBhZnRlciBhY3RpdmUtbGVhZi1jaGFuZ2UgdG8gbGV0IHRhYiBzd2l0Y2ggYW5pbWF0aW9ucyBjb21wbGV0ZSAqL1xyXG5jb25zdCBUQUJfU1dJVENIX0FOSU1BVElPTl9ERUxBWSA9IDEwMDtcclxuXHJcbi8qKiBEZWxheSBhZnRlciBsYXlvdXQtcmVhZHkgYmVmb3JlIG1hcmtpbmcgc3RhcnR1cCBhcyBjb21wbGV0ZSAoYWxsb3dzIGV2ZXJ5dGhpbmcgdG8gc2V0dGxlKSAqL1xyXG5jb25zdCBTVEFSVFVQX0NPTVBMRVRFX0RFTEFZID0gMTAwMDtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEhvbWVCYXNlUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcclxuXHRzZXR0aW5ncyE6IEhvbWVCYXNlU2V0dGluZ3M7XHJcblxyXG5cdC8vIFNlcnZpY2VzXHJcblx0aG9tZVNlcnZpY2UhOiBIb21lQmFzZVNlcnZpY2U7XHJcblx0bmV3VGFiU2VydmljZSE6IE5ld1RhYlNlcnZpY2U7XHJcblx0c3RpY2t5VGFiU2VydmljZSE6IFN0aWNreVRhYlNlcnZpY2U7XHJcblx0bW9iaWxlQnV0dG9uU2VydmljZSE6IE1vYmlsZUJ1dHRvblNlcnZpY2U7XHJcblxyXG5cdC8vIFJlbGVhc2Ugbm90ZXMgdHJhY2tpbmdcclxuXHRwcml2YXRlIG5ld1JlbGVhc2U6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcblx0Ly8gVHJhY2sgaWYgcGF0Y2hlZCBvcGVuaW5nIGJlaGF2aW9yIGFscmVhZHkgcmFuXHJcblx0cHJpdmF0ZSBvcGVuaW5nQmVoYXZpb3JSYW46IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcblx0Ly8gVHJhY2sgaWYgd2UncmUgY3VycmVudGx5IGluIHN0YXJ0dXAgKHRvIHByZXZlbnQgaGFuZGxlT3BlbldoZW5FbXB0eSBmcm9tIGZpcmluZylcclxuXHRwcml2YXRlIGlzU3RhcnR1cDogYm9vbGVhbiA9IHRydWU7XHJcblxyXG5cdGFzeW5jIG9ubG9hZCgpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XHJcblxyXG5cdFx0Ly8gTWlncmF0ZSBsZWdhY3kgc2V0dGluZ3Mgb24gZmlyc3QgbG9hZFxyXG5cdFx0YXdhaXQgbWlncmF0ZUxlZ2FjeVNldHRpbmdzKHRoaXMpO1xyXG5cclxuXHRcdC8vIFBhdGNoIG9wZW5pbmcgYmVoYXZpb3IgZm9yIGZhc3Qgc3RhcnR1cCAoYmVmb3JlIG90aGVyIGluaXRpYWxpemF0aW9uKVxyXG5cdFx0dGhpcy5wYXRjaE9wZW5pbmdCZWhhdmlvcigpO1xyXG5cclxuXHRcdC8vIFJlZ2lzdGVyIGN1c3RvbSBpY29uXHJcblx0XHRhZGRJY29uKCdob21lLWJhc2UnLCBIT01FX0lDT04pO1xyXG5cclxuXHRcdC8vIEluaXRpYWxpemUgc2VydmljZXNcclxuXHRcdHRoaXMuaG9tZVNlcnZpY2UgPSBuZXcgSG9tZUJhc2VTZXJ2aWNlKHRoaXMpO1xyXG5cdFx0dGhpcy5uZXdUYWJTZXJ2aWNlID0gbmV3IE5ld1RhYlNlcnZpY2UodGhpcyk7XHJcblx0XHR0aGlzLnN0aWNreVRhYlNlcnZpY2UgPSBuZXcgU3RpY2t5VGFiU2VydmljZSh0aGlzKTtcclxuXHRcdHRoaXMubW9iaWxlQnV0dG9uU2VydmljZSA9IG5ldyBNb2JpbGVCdXR0b25TZXJ2aWNlKHRoaXMpO1xyXG5cclxuXHRcdC8vIEFkZCByaWJib24gaWNvblxyXG5cdFx0dGhpcy5hZGRSaWJib25JY29uKCdob21lJywgJ09wZW4gaG9tZSBiYXNlJywgKCkgPT4ge1xyXG5cdFx0XHR2b2lkIHRoaXMuaG9tZVNlcnZpY2Uub3BlbkhvbWVCYXNlKHtcclxuXHRcdFx0XHRyZXBsYWNlQWN0aXZlTGVhZjogZmFsc2UsXHJcblx0XHRcdFx0cnVuQ29tbWFuZDogdHJ1ZSxcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBSZWdpc3RlciBjb21tYW5kc1xyXG5cdFx0dGhpcy5yZWdpc3RlckNvbW1hbmRzKCk7XHJcblxyXG5cdFx0Ly8gQWRkIHNldHRpbmdzIHRhYlxyXG5cdFx0dGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBIb21lQmFzZVNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcclxuXHJcblx0XHQvLyBXYWl0IGZvciBsYXlvdXQgdG8gYmUgcmVhZHlcclxuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbkxheW91dFJlYWR5KCgpID0+IHtcclxuXHRcdFx0Ly8gVXNlIGEgc21hbGwgZGVsYXkgdG8gZW5zdXJlIERPTSBpcyByZWFkeSAoZXNwZWNpYWxseSBmb3Igc2V0dGluZ3MgbW9kYWwgZGV0ZWN0aW9uKVxyXG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHQvLyBDaGVjayBpZiBzZXR0aW5ncyBtb2RhbCBpcyBvcGVuIC0gaWYgc28sIHNraXAgc3RhcnR1cCBsb2dpY1xyXG5cdFx0XHRcdGlmICh0aGlzLmlzU2V0dGluZ3NNb2RhbE9wZW4oKSkge1xyXG5cdFx0XHRcdFx0Ly8gU3RpbGwgdXBkYXRlIFVJIGZlYXR1cmVzLCBqdXN0IGRvbid0IHJ1biBzdGFydHVwIGxvZ2ljXHJcblx0XHRcdFx0XHR0aGlzLnVwZGF0ZVN0aWNreVRhYkljb24oKTtcclxuXHRcdFx0XHRcdHRoaXMudXBkYXRlTW9iaWxlQnV0dG9uKCk7XHJcblx0XHRcdFx0XHR0aGlzLnN0aWNreVRhYlNlcnZpY2UudXBkYXRlVGFiSGVhZGVycygpO1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gQWx3YXlzIGluaXRpYWxpemUgdGhlIG5ldyB0YWIgc2VydmljZSB0byB0cmFjayBleGlzdGluZyBsZWF2ZXNcclxuXHRcdFx0XHQvLyBUaGlzIGlzIG5lZWRlZCBmb3IgbmV3IHRhYiByZXBsYWNlbWVudCB0byB3b3JrXHJcblx0XHRcdFx0Ly8gQnV0IG9ubHkgcnVuIHN0YXJ0dXAgbG9naWMgaWYgb3BlbmluZyBiZWhhdmlvciBkaWRuJ3QgYWxyZWFkeSBydW5cclxuXHRcdFx0XHRpZiAoIXRoaXMub3BlbmluZ0JlaGF2aW9yUmFuKSB7XHJcblx0XHRcdFx0XHQvLyBPcGVuaW5nIGJlaGF2aW9yIGRpZG4ndCBydW4sIHNvIGluaXRpYWxpemUgbm9ybWFsbHkgKGluY2x1ZGVzIHN0YXJ0dXApXHJcblx0XHRcdFx0XHR0aGlzLm5ld1RhYlNlcnZpY2UuaW5pdGlhbGl6ZSgpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHQvLyBPcGVuaW5nIGJlaGF2aW9yIGFscmVhZHkgcmFuLCBidXQgd2Ugc3RpbGwgbmVlZCB0byB0cmFjayBleGlzdGluZyBsZWF2ZXNcclxuXHRcdFx0XHRcdC8vIGZvciBuZXcgdGFiIHJlcGxhY2VtZW50IHRvIHdvcmtcclxuXHRcdFx0XHRcdHRoaXMubmV3VGFiU2VydmljZS50cmFja0V4aXN0aW5nTGVhdmVzKCk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBSZXN0b3JlIGdob3N0IGxlYXZlcyBmcm9tIHByZXZpb3VzIHNlc3Npb24gYmVmb3JlIHVwZGF0aW5nIFVJXHJcblx0XHRcdFx0dGhpcy5ob21lU2VydmljZS5yZXN0b3JlR2hvc3RMZWF2ZXMoKTtcclxuXHJcblx0XHRcdFx0Ly8gTWFyayBzdGFydHVwIGFzIGNvbXBsZXRlIGFmdGVyIGEgZGVsYXkgdG8gYWxsb3cgZXZlcnl0aGluZyB0byBzZXR0bGVcclxuXHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdHRoaXMuaXNTdGFydHVwID0gZmFsc2U7XHJcblx0XHRcdFx0fSwgU1RBUlRVUF9DT01QTEVURV9ERUxBWSk7XHJcblxyXG5cdFx0XHRcdC8vIFVwZGF0ZSBVSSBmZWF0dXJlc1xyXG5cdFx0XHRcdHRoaXMudXBkYXRlU3RpY2t5VGFiSWNvbigpO1xyXG5cdFx0XHRcdHRoaXMudXBkYXRlTW9iaWxlQnV0dG9uKCk7XHJcblxyXG5cdFx0XHRcdC8vIFVwZGF0ZSB0YWIgaGVhZGVycyBhZnRlciBsYXlvdXQgaXMgcmVhZHlcclxuXHRcdFx0XHR0aGlzLnN0aWNreVRhYlNlcnZpY2UudXBkYXRlVGFiSGVhZGVycygpO1xyXG5cdFx0XHR9LCBET01fUkVBRFlfREVMQVkpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gUmVnaXN0ZXIgbGF5b3V0IGNoYW5nZSBoYW5kbGVyXHJcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQoXHJcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbignbGF5b3V0LWNoYW5nZScsIGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHR0aGlzLm5ld1RhYlNlcnZpY2UuaGFuZGxlTGF5b3V0Q2hhbmdlKCk7XHJcblx0XHRcdFx0Ly8gSGFuZGxlIHJldmVydCB2aWV3IG9uIGNsb3NlXHJcblx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MucmV2ZXJ0Vmlldykge1xyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5ob21lU2VydmljZS5yZXZlcnRWaWV3KCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC8vIFwiT3BlbiB3aGVuIGVtcHR5XCIgZmVhdHVyZSByZW1vdmVkIC0gdXNlIFwiTmV3IHRhYiByZXBsYWNlbWVudDogb25seSB3aGVuIGVtcHR5XCIgaW5zdGVhZFxyXG5cdFx0XHRcdC8vIFRoZXkgZG8gdGhlIHNhbWUgdGhpbmcgc2luY2UgT2JzaWRpYW4gYXV0by1jcmVhdGVzIGFuIGVtcHR5IHRhYiB3aGVuIHlvdSBjbG9zZSB0aGUgbGFzdCBvbmVcclxuXHRcdFx0XHQvLyBEZWxheSB0YWIgaGVhZGVyIHVwZGF0ZXMgdG8gYXZvaWQgZmxpY2tlcmluZyBkdXJpbmcgdGFiIHRyYW5zaXRpb25zXHJcblx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLnN0aWNreVRhYlNlcnZpY2UudXBkYXRlQWN0aXZlU3RhdGUoKTtcclxuXHRcdFx0XHRcdHRoaXMuc3RpY2t5VGFiU2VydmljZS51cGRhdGVUYWJIZWFkZXJzKCk7XHJcblx0XHRcdFx0XHQvLyBBbHNvIHVwZGF0ZSBpY29uIHBvc2l0aW9uIGluIGNhc2Ugc2lkZWJhciBzdGF0ZSBjaGFuZ2VkXHJcblx0XHRcdFx0XHR0aGlzLnN0aWNreVRhYlNlcnZpY2UudXBkYXRlSWNvblBvc2l0aW9uRm9yU2lkZWJhcigpO1xyXG5cdFx0XHRcdH0sIFRBQl9IRUFERVJfVVBEQVRFX0RFTEFZKTtcclxuXHRcdFx0fSlcclxuXHRcdCk7XHJcblxyXG5cdFx0Ly8gUmVnaXN0ZXIgZmlsZSBvcGVuIGhhbmRsZXIgZm9yIGFjdGl2ZSBzdGF0ZSB1cGRhdGVzXHJcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQoXHJcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbignZmlsZS1vcGVuJywgKCkgPT4ge1xyXG5cdFx0XHRcdC8vIERlbGF5IHVwZGF0ZXMgdG8gbGV0IGZpbGUgb3BlbiBhbmltYXRpb24gY29tcGxldGVcclxuXHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdHRoaXMuc3RpY2t5VGFiU2VydmljZS51cGRhdGVBY3RpdmVTdGF0ZSgpO1xyXG5cdFx0XHRcdFx0dGhpcy5zdGlja3lUYWJTZXJ2aWNlLnVwZGF0ZVRhYkhlYWRlcnMoKTtcclxuXHRcdFx0XHR9LCBGSUxFX09QRU5fQU5JTUFUSU9OX0RFTEFZKTtcclxuXHRcdFx0fSlcclxuXHRcdCk7XHJcblxyXG5cdFx0Ly8gUmVnaXN0ZXIgYWN0aXZlIGxlYWYgY2hhbmdlIGhhbmRsZXIgZm9yIHRhYiBoZWFkZXIgdXBkYXRlc1xyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KFxyXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2FjdGl2ZS1sZWFmLWNoYW5nZScsICgpID0+IHtcclxuXHRcdFx0XHQvLyBEZWxheSB0byBsZXQgdGFiIHN3aXRjaCBhbmltYXRpb24gY29tcGxldGVcclxuXHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdHRoaXMuc3RpY2t5VGFiU2VydmljZS51cGRhdGVUYWJIZWFkZXJzKCk7XHJcblx0XHRcdFx0fSwgVEFCX1NXSVRDSF9BTklNQVRJT05fREVMQVkpO1xyXG5cdFx0XHR9KVxyXG5cdFx0KTtcclxuXHJcblx0fVxyXG5cclxuXHRvbnVubG9hZCgpOiB2b2lkIHtcclxuXHRcdC8vIFVucGF0Y2ggcmVsZWFzZSBub3Rlc1xyXG5cdFx0dGhpcy51bnBhdGNoUmVsZWFzZU5vdGVzKCk7XHJcblxyXG5cdFx0Ly8gVW5wYXRjaCBvcGVuaW5nIGJlaGF2aW9yXHJcblx0XHR0aGlzLnVucGF0Y2hPcGVuaW5nQmVoYXZpb3IoKTtcclxuXHJcblx0XHQvLyBDbGVhbiB1cCBzZXJ2aWNlc1xyXG5cdFx0dGhpcy5zdGlja3lUYWJTZXJ2aWNlLnJlbW92ZSgpO1xyXG5cdFx0dGhpcy5tb2JpbGVCdXR0b25TZXJ2aWNlLnJlbW92ZSgpO1xyXG5cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJlZ2lzdGVyIHBsdWdpbiBjb21tYW5kc1xyXG5cdCAqL1xyXG5cdHByaXZhdGUgcmVnaXN0ZXJDb21tYW5kcygpOiB2b2lkIHtcclxuXHRcdC8vIE9wZW4gaG9tZSBiYXNlXHJcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xyXG5cdFx0XHRpZDogJ29wZW4nLFxyXG5cdFx0XHRuYW1lOiAnT3BlbicsXHJcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XHJcblx0XHRcdFx0Y29uc3QgaG9tZUJhc2VTZXR0aW5ncyA9IHRoaXMuZ2V0SG9tZUJhc2VTZXR0aW5ncygpO1xyXG5cdFx0XHRcdGlmICghaG9tZUJhc2VTZXR0aW5ncy52YWx1ZSAmJiBob21lQmFzZVNldHRpbmdzLnR5cGUgPT09IEhvbWVCYXNlVHlwZS5GaWxlKSB7XHJcblx0XHRcdFx0XHRuZXcgTm90aWNlKCdObyBob21lIGJhc2UgY29uZmlndXJlZC4gU2V0IG9uZSBpbiBzZXR0aW5ncy4nKTtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0dm9pZCB0aGlzLmhvbWVTZXJ2aWNlLm9wZW5Ib21lQmFzZSh7XHJcblx0XHRcdFx0XHRyZXBsYWNlQWN0aXZlTGVhZjogZmFsc2UsXHJcblx0XHRcdFx0XHRydW5Db21tYW5kOiB0cnVlLFxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9LFxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gU2V0IGN1cnJlbnQgZmlsZSBhcyBob21lIGJhc2VcclxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XHJcblx0XHRcdGlkOiAnc2V0LWN1cnJlbnQtZmlsZScsXHJcblx0XHRcdG5hbWU6ICdTZXQgY3VycmVudCBmaWxlIGFzIGhvbWUnLFxyXG5cdFx0XHRjaGVja0NhbGxiYWNrOiAoY2hlY2tpbmcpID0+IHtcclxuXHRcdFx0XHRpZiAoIXRoaXMuaG9tZVNlcnZpY2UuY2FuU2V0QWN0aXZlRmlsZUFzSG9tZUJhc2UoKSkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAoIWNoZWNraW5nKSB7XHJcblx0XHRcdFx0XHR2b2lkIHRoaXMuaG9tZVNlcnZpY2Uuc2V0QWN0aXZlRmlsZUFzSG9tZUJhc2UoKS50aGVuKChzdWNjZXNzKSA9PiB7XHJcblx0XHRcdFx0XHRcdGlmIChzdWNjZXNzKSB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XHJcblx0XHRcdFx0XHRcdFx0bmV3IE5vdGljZShgSG9tZSBiYXNlIHNldCB0byBcIiR7YWN0aXZlRmlsZT8ubmFtZX1cImApO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH0sXHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBUb2dnbGUgc3RpY2t5IGhvbWUgaWNvblxyXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcclxuXHRcdFx0aWQ6ICd0b2dnbGUtc3RpY2t5LWljb24nLFxyXG5cdFx0XHRuYW1lOiAnVG9nZ2xlIHN0aWNreSBob21lIGljb24nLFxyXG5cdFx0XHRjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMuc3RpY2t5VGFiU2VydmljZS50b2dnbGUoKTtcclxuXHRcdFx0XHRjb25zdCBzdGF0ZSA9IHRoaXMuc2V0dGluZ3Muc2hvd1N0aWNreUhvbWVJY29uID8gJ2VuYWJsZWQnIDogJ2Rpc2FibGVkJztcclxuXHRcdFx0XHRuZXcgTm90aWNlKGBTdGlja3kgaG9tZSBpY29uICR7c3RhdGV9YCk7XHJcblx0XHRcdH0sXHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBDbG9zZSBob21lIGJhc2VcclxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XHJcblx0XHRcdGlkOiAnY2xvc2UnLFxyXG5cdFx0XHRuYW1lOiAnQ2xvc2UnLFxyXG5cdFx0XHRjYWxsYmFjazogKCkgPT4ge1xyXG5cdFx0XHRcdHRoaXMuc3RpY2t5VGFiU2VydmljZS5jbG9zZUhvbWVCYXNlKCk7XHJcblx0XHRcdH0sXHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIExvYWQgcGx1Z2luIHNldHRpbmdzXHJcblx0ICovXHJcblx0YXN5bmMgbG9hZFNldHRpbmdzKCk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0Y29uc3QgZGF0YSA9IChhd2FpdCB0aGlzLmxvYWREYXRhKCkpIGFzIFBhcnRpYWw8SG9tZUJhc2VTZXR0aW5ncz4gfCBudWxsO1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGRhdGEgPz8ge30pO1xyXG5cdH1cclxuXHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldCB0aGUgYWN0aXZlIGhvbWUgYmFzZSBzZXR0aW5ncyAobW9iaWxlIG9yIGRlc2t0b3ApXHJcblx0ICovXHJcblx0Z2V0SG9tZUJhc2VTZXR0aW5ncygpOiB7XHJcblx0XHR0eXBlOiBIb21lQmFzZVR5cGU7XHJcblx0XHR2YWx1ZTogc3RyaW5nO1xyXG5cdH0ge1xyXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3Muc2VwYXJhdGVNb2JpbGUgJiYgUGxhdGZvcm0uaXNNb2JpbGUpIHtcclxuXHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHR0eXBlOiB0aGlzLnNldHRpbmdzLm1vYmlsZUhvbWVCYXNlVHlwZSB8fCBIb21lQmFzZVR5cGUuRmlsZSxcclxuXHRcdFx0XHR2YWx1ZTogdGhpcy5zZXR0aW5ncy5tb2JpbGVIb21lQmFzZVZhbHVlIHx8ICcnLFxyXG5cdFx0XHR9O1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB7XHJcblx0XHRcdHR5cGU6IHRoaXMuc2V0dGluZ3MuaG9tZUJhc2VUeXBlIHx8IEhvbWVCYXNlVHlwZS5GaWxlLFxyXG5cdFx0XHR2YWx1ZTogdGhpcy5zZXR0aW5ncy5ob21lQmFzZVZhbHVlIHx8ICcnLFxyXG5cdFx0fTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldCB0aGUgYWN0aXZlIG5ldyB0YWIgc2V0dGluZ3MgKG1vYmlsZSBvciBkZXNrdG9wKVxyXG5cdCAqIEZhbGxzIGJhY2sgdG8gaG9tZSBiYXNlIHNldHRpbmdzIGlmIHVzZURpZmZlcmVudEZpbGVGb3JOZXdUYWIgaXMgZGlzYWJsZWRcclxuXHQgKi9cclxuXHRnZXROZXdUYWJTZXR0aW5ncygpOiB7XHJcblx0XHR0eXBlOiBIb21lQmFzZVR5cGU7XHJcblx0XHR2YWx1ZTogc3RyaW5nO1xyXG5cdH0ge1xyXG5cdFx0Ly8gSWYgbm90IHVzaW5nIGRpZmZlcmVudCBmaWxlIGZvciBuZXcgdGFiLCBmYWxsIGJhY2sgdG8gaG9tZSBiYXNlIHNldHRpbmdzXHJcblx0XHRpZiAoIXRoaXMuc2V0dGluZ3MudXNlRGlmZmVyZW50RmlsZUZvck5ld1RhYikge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5nZXRIb21lQmFzZVNldHRpbmdzKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gVXNlIG5ldyB0YWIgc2V0dGluZ3MsIGNoZWNraW5nIGZvciBtb2JpbGUgaWYgc2VwYXJhdGUgbW9iaWxlIGlzIGVuYWJsZWRcclxuXHRcdGlmICh0aGlzLnNldHRpbmdzLm5ld1RhYlNlcGFyYXRlTW9iaWxlICYmIFBsYXRmb3JtLmlzTW9iaWxlKSB7XHJcblx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0dHlwZTogdGhpcy5zZXR0aW5ncy5tb2JpbGVOZXdUYWJUeXBlIHx8IEhvbWVCYXNlVHlwZS5GaWxlLFxyXG5cdFx0XHRcdHZhbHVlOiB0aGlzLnNldHRpbmdzLm1vYmlsZU5ld1RhYlZhbHVlIHx8ICcnLFxyXG5cdFx0XHR9O1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB7XHJcblx0XHRcdHR5cGU6IHRoaXMuc2V0dGluZ3MubmV3VGFiVHlwZSB8fCBIb21lQmFzZVR5cGUuRmlsZSxcclxuXHRcdFx0dmFsdWU6IHRoaXMuc2V0dGluZ3MubmV3VGFiVmFsdWUgfHwgJycsXHJcblx0XHR9O1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogU2F2ZSBwbHVnaW4gc2V0dGluZ3NcclxuXHQgKi9cclxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHRhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogVXBkYXRlIHRoZSBzdGlja3kgdGFiIGljb24gYmFzZWQgb24gY3VycmVudCBzZXR0aW5nc1xyXG5cdCAqL1xyXG5cdHVwZGF0ZVN0aWNreVRhYkljb24oKTogdm9pZCB7XHJcblx0XHR0aGlzLnN0aWNreVRhYlNlcnZpY2UudXBkYXRlKCk7XHJcblx0XHQvLyBBbHNvIHVwZGF0ZSB0YWIgaGVhZGVycyB3aGVuIHN0aWNreSBpY29uIHNldHRpbmcgY2hhbmdlc1xyXG5cdFx0dGhpcy5zdGlja3lUYWJTZXJ2aWNlLnVwZGF0ZVRhYkhlYWRlcnMoKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFVwZGF0ZSB0aGUgbW9iaWxlIGJ1dHRvbiBiYXNlZCBvbiBjdXJyZW50IHNldHRpbmdzXHJcblx0ICovXHJcblx0dXBkYXRlTW9iaWxlQnV0dG9uKCk6IHZvaWQge1xyXG5cdFx0dGhpcy5tb2JpbGVCdXR0b25TZXJ2aWNlLnVwZGF0ZSgpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2hlY2sgaWYgd2Ugc2hvdWxkIHNraXAgc3RhcnR1cCBsb2dpYyAoZS5nLiwgcGx1Z2luIHJlbG9hZCwgc2V0dGluZ3MgbW9kYWwgb3BlbilcclxuXHQgKiBUaGlzIHByZXZlbnRzIGRlc3RydWN0aXZlIGJlaGF2aW9yIHdoZW4gdGhlIHBsdWdpbiBpcyByZWxvYWRlZCBvciBzZXR0aW5ncyBhcmUgb3BlblxyXG5cdCAqL1xyXG5cdHByaXZhdGUgc2hvdWxkU2tpcFN0YXJ0dXBMb2dpYygpOiBib29sZWFuIHtcclxuXHRcdC8vIENoZWNrIGlmIHNldHRpbmdzIG1vZGFsIGlzIG9wZW4gLSBuZXZlciBydW4gc3RhcnR1cCBsb2dpYyBpZiBpdCBpc1xyXG5cdFx0aWYgKHRoaXMuaXNTZXR0aW5nc01vZGFsT3BlbigpKSB7XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENoZWNrIGlmIHRoaXMgaXMgYSBwbHVnaW4gcmVsb2FkIHZzIGFjdHVhbCBhcHAgc3RhcnR1cFxyXG5cdFx0Ly8gT24gYWN0dWFsIHN0YXJ0dXAsIE9ic2lkaWFuIGhhc24ndCByZXN0b3JlZCB0aGUgd29ya3NwYWNlIHlldFxyXG5cdFx0Ly8gT24gcGx1Z2luIHJlbG9hZCwgZmlsZXMgYXJlIGFscmVhZHkgb3BlbiBhbmQgd29ya3NwYWNlIGlzIHJlc3RvcmVkXHJcblx0XHRjb25zdCBoYXNPcGVuRmlsZXMgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCdtYXJrZG93bicpLmxlbmd0aCA+IDAgfHxcclxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnY2FudmFzJykubGVuZ3RoID4gMCB8fFxyXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCdiYXNlcycpLmxlbmd0aCA+IDAgfHxcclxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnZW1wdHknKS5sZW5ndGggPiAwO1xyXG5cclxuXHRcdC8vIElmIGZpbGVzIGFyZSBvcGVuLCB0aGlzIGlzIGxpa2VseSBhIHBsdWdpbiByZWxvYWQsIG5vdCBhY3R1YWwgc3RhcnR1cFxyXG5cdFx0cmV0dXJuIGhhc09wZW5GaWxlcztcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENoZWNrIGlmIHRoZSBzZXR0aW5ncyBtb2RhbCBpcyBjdXJyZW50bHkgb3BlblxyXG5cdCAqL1xyXG5cdHByaXZhdGUgaXNTZXR0aW5nc01vZGFsT3BlbigpOiBib29sZWFuIHtcclxuXHRcdC8vIENoZWNrIGZvciBzZXR0aW5ncyBtb2RhbCBieSBsb29raW5nIGZvciB0aGUgbW9kYWwgY29udGFpbmVyXHJcblx0XHQvLyBUcnkgbXVsdGlwbGUgc2VsZWN0b3JzIHRvIGJlIG1vcmUgcm9idXN0XHJcblx0XHRjb25zdCBzZXR0aW5nc01vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLWNvbnRhaW5lci5tb2Qtc2V0dGluZ3MnKSB8fFxyXG5cdFx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwubW9kLXNldHRpbmdzJykgfHxcclxuXHRcdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnZlcnRpY2FsLXRhYi1jb250ZW50Jyk7XHJcblxyXG5cdFx0Ly8gQWxzbyBjaGVjayBpZiBhbnkgbW9kYWwgaXMgb3BlbiBhbmQgY29udGFpbnMgc2V0dGluZ3MgY29udGVudFxyXG5cdFx0aWYgKCFzZXR0aW5nc01vZGFsKSB7XHJcblx0XHRcdGNvbnN0IGFsbE1vZGFscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tb2RhbC1jb250YWluZXInKTtcclxuXHRcdFx0Zm9yIChjb25zdCBtb2RhbCBvZiBBcnJheS5mcm9tKGFsbE1vZGFscykpIHtcclxuXHRcdFx0XHRpZiAobW9kYWwucXVlcnlTZWxlY3RvcignLnZlcnRpY2FsLXRhYi1jb250ZW50JykgfHxcclxuXHRcdFx0XHRcdG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy5zZXR0aW5ncy1jb250ZW50JykgfHxcclxuXHRcdFx0XHRcdG1vZGFsLmNsYXNzTGlzdC5jb250YWlucygnbW9kLXNldHRpbmdzJykpIHtcclxuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBzZXR0aW5nc01vZGFsICE9PSBudWxsO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogUGF0Y2ggcnVuT3BlbmluZ0JlaGF2aW9yIGZvciBmYXN0IHN0YXJ0dXAgKGxpa2UgaG9tZXBhZ2UgcGx1Z2luKVxyXG5cdCAqL1xyXG5cdHByaXZhdGUgcGF0Y2hPcGVuaW5nQmVoYXZpb3IoKTogdm9pZCB7XHJcblx0XHR0cnkge1xyXG5cdFx0XHQvLyBTdG9yZSBvcmlnaW5hbCBtZXRob2RcclxuXHRcdFx0dGhpcy5hcHAubnZPcmlnX3J1bk9wZW5pbmdCZWhhdmlvciA9IHRoaXMuYXBwLnJ1bk9wZW5pbmdCZWhhdmlvcjtcclxuXHJcblx0XHRcdC8vIFBhdGNoIHRoZSBtZXRob2RcclxuXHRcdFx0dGhpcy5hcHAucnVuT3BlbmluZ0JlaGF2aW9yID0gYXN5bmMgKHBhdGg6IHN0cmluZykgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IG9wZW5Jbml0aWFsbHkgPSAoXHJcblx0XHRcdFx0XHR0aGlzLnNldHRpbmdzLm9wZW5PblN0YXJ0dXAgJiZcclxuXHRcdFx0XHRcdCF0aGlzLmhhc1VybFBhcmFtcygpXHJcblx0XHRcdFx0KTtcclxuXHJcblx0XHRcdFx0aWYgKG9wZW5Jbml0aWFsbHkpIHtcclxuXHRcdFx0XHRcdC8vIE1hcmsgdGhhdCB3ZSd2ZSBydW4gb3BlbmluZyBiZWhhdmlvclxyXG5cdFx0XHRcdFx0dGhpcy5vcGVuaW5nQmVoYXZpb3JSYW4gPSB0cnVlO1xyXG5cclxuXHRcdFx0XHRcdC8vIFVzZSBmYXN0IHN0YXJ0dXAgLSBkZXRhY2ggYWxsIGxlYXZlcyBhbmQgb3BlbiBob21lIGJhc2VcclxuXHRcdFx0XHRcdGNvbnN0IG1vZGUgPSB0aGlzLnNldHRpbmdzLm9wZW5Nb2RlO1xyXG5cdFx0XHRcdFx0aWYgKG1vZGUgPT09ICdyZXBsYWNlLWFsbCcpIHtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5ob21lU2VydmljZS5kZXRhY2hBbGxMZWF2ZXMoKTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHQvLyBVc2UgZ2hvc3QgdGFiIGlmIHN0aWNreSBpY29uIGlzIGVuYWJsZWQsIG90aGVyd2lzZSB1c2Ugbm9ybWFsIG9wZW5cclxuXHRcdFx0XHRcdGlmICh0aGlzLnNldHRpbmdzLnNob3dTdGlja3lIb21lSWNvbikge1xyXG5cdFx0XHRcdFx0XHR2b2lkIHRoaXMuaG9tZVNlcnZpY2Uub3BlbkhvbWVCYXNlSW5HaG9zdFRhYih7XHJcblx0XHRcdFx0XHRcdFx0cnVuQ29tbWFuZDogdHJ1ZSxcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHR2b2lkIHRoaXMuaG9tZVNlcnZpY2Uub3BlbkhvbWVCYXNlV2l0aE1vZGUobW9kZSwgdHJ1ZSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdC8vIENhbGwgb3JpZ2luYWwgYmVoYXZpb3JcclxuXHRcdFx0XHRcdGlmICh0aGlzLmFwcC5udk9yaWdfcnVuT3BlbmluZ0JlaGF2aW9yKSB7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuYXBwLm52T3JpZ19ydW5PcGVuaW5nQmVoYXZpb3IocGF0aCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBVbnBhdGNoIHJlbGVhc2Ugbm90ZXMgYWZ0ZXIgb3BlbmluZyBiZWhhdmlvciBjb21wbGV0ZXNcclxuXHRcdFx0XHR0aGlzLnVucGF0Y2hSZWxlYXNlTm90ZXMoKTtcclxuXHRcdFx0fTtcclxuXHRcdH0gY2F0Y2ggKGUpIHtcclxuXHRcdFx0Y29uc29sZS53YXJuKCdbSG9tZSBCYXNlXSBGYWlsZWQgdG8gcGF0Y2ggb3BlbmluZyBiZWhhdmlvcjonLCBlKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFVucGF0Y2ggcnVuT3BlbmluZ0JlaGF2aW9yXHJcblx0ICovXHJcblx0cHJpdmF0ZSB1bnBhdGNoT3BlbmluZ0JlaGF2aW9yKCk6IHZvaWQge1xyXG5cclxuXHRcdGlmICh0aGlzLmFwcC5udk9yaWdfcnVuT3BlbmluZ0JlaGF2aW9yKSB7XHJcblxyXG5cdFx0XHR0aGlzLmFwcC5ydW5PcGVuaW5nQmVoYXZpb3IgPSB0aGlzLmFwcC5udk9yaWdfcnVuT3BlbmluZ0JlaGF2aW9yO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogUGF0Y2ggc2hvd1JlbGVhc2VOb3RlcyB0byB0cmFjayBuZXcgcmVsZWFzZXNcclxuXHQgKi9cclxuXHRwcml2YXRlIHBhdGNoUmVsZWFzZU5vdGVzKCk6IHZvaWQge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Y29uc3QgYXBwQW55ID0gdGhpcy5hcHAgYXMgdW5rbm93biBhcyBBcHBXaXRoUmVsZWFzZU5vdGVzO1xyXG5cdFx0XHRhcHBBbnkubnZPcmlnX3Nob3dSZWxlYXNlTm90ZXMgPSBhcHBBbnkuc2hvd1JlbGVhc2VOb3RlcztcclxuXHRcdFx0YXBwQW55LnNob3dSZWxlYXNlTm90ZXMgPSAoKSA9PiB7XHJcblx0XHRcdFx0dGhpcy5uZXdSZWxlYXNlID0gdHJ1ZTtcclxuXHRcdFx0fTtcclxuXHRcdH0gY2F0Y2ggKGUpIHtcclxuXHRcdFx0Y29uc29sZS53YXJuKCdbSG9tZSBCYXNlXSBGYWlsZWQgdG8gcGF0Y2ggcmVsZWFzZSBub3RlczonLCBlKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFVucGF0Y2ggc2hvd1JlbGVhc2VOb3Rlc1xyXG5cdCAqL1xyXG5cdHByaXZhdGUgdW5wYXRjaFJlbGVhc2VOb3RlcygpOiB2b2lkIHtcclxuXHRcdGNvbnN0IGFwcEFueSA9IHRoaXMuYXBwIGFzIHVua25vd24gYXMgQXBwV2l0aFJlbGVhc2VOb3RlcztcclxuXHJcblx0XHRpZiAodGhpcy5uZXdSZWxlYXNlICYmICF0aGlzLnNldHRpbmdzLmhpZGVSZWxlYXNlTm90ZXMpIHtcclxuXHJcblx0XHRcdGFwcEFueS5udk9yaWdfc2hvd1JlbGVhc2VOb3Rlcz8uKCk7XHJcblx0XHR9XHJcblxyXG5cclxuXHRcdGlmIChhcHBBbnkubnZPcmlnX3Nob3dSZWxlYXNlTm90ZXMpIHtcclxuXHJcblx0XHRcdGFwcEFueS5zaG93UmVsZWFzZU5vdGVzID0gYXBwQW55Lm52T3JpZ19zaG93UmVsZWFzZU5vdGVzO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2hlY2sgaWYgYSBob21lIGJhc2UgdHlwZSBoYXMgaXRzIHJlcXVpcmVkIHBsdWdpbiBlbmFibGVkXHJcblx0ICovXHJcblx0aGFzUmVxdWlyZWRQbHVnaW4odHlwZTogSG9tZUJhc2VUeXBlKTogYm9vbGVhbiB7XHJcblx0XHRzd2l0Y2ggKHR5cGUpIHtcclxuXHRcdFx0Y2FzZSBIb21lQmFzZVR5cGUuV29ya3NwYWNlOlxyXG5cclxuXHRcdFx0XHRyZXR1cm4gdGhpcy5hcHAuaW50ZXJuYWxQbHVnaW5zPy5wbHVnaW5zPy53b3Jrc3BhY2VzPy5lbmFibGVkID09PSB0cnVlO1xyXG5cdFx0XHRjYXNlIEhvbWVCYXNlVHlwZS5HcmFwaDpcclxuXHJcblx0XHRcdFx0cmV0dXJuIHRoaXMuYXBwLmludGVybmFsUGx1Z2lucz8ucGx1Z2lucz8uZ3JhcGg/LmVuYWJsZWQgPT09IHRydWU7XHJcblx0XHRcdGNhc2UgSG9tZUJhc2VUeXBlLkpvdXJuYWw6XHJcblxyXG5cdFx0XHRcdHJldHVybiAhIXRoaXMuYXBwLnBsdWdpbnM/LnBsdWdpbnM/Llsnam91cm5hbHMnXTtcclxuXHRcdFx0Y2FzZSBIb21lQmFzZVR5cGUuRGFpbHlOb3RlOlxyXG5cdFx0XHRjYXNlIEhvbWVCYXNlVHlwZS5XZWVrbHlOb3RlOlxyXG5cdFx0XHRjYXNlIEhvbWVCYXNlVHlwZS5Nb250aGx5Tm90ZTpcclxuXHRcdFx0Y2FzZSBIb21lQmFzZVR5cGUuUXVhcnRlcmx5Tm90ZTpcclxuXHRcdFx0Y2FzZSBIb21lQmFzZVR5cGUuWWVhcmx5Tm90ZTpcclxuXHRcdFx0XHRyZXR1cm4gdGhpcy5oYXNSZXF1aXJlZFBlcmlvZGljaXR5KHR5cGUpO1xyXG5cdFx0XHRkZWZhdWx0OlxyXG5cdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2hlY2sgaWYgcGVyaW9kaWMgbm90ZXMgYXJlIGF2YWlsYWJsZSBmb3IgdGhlIGdpdmVuIHR5cGVcclxuXHQgKi9cclxuXHRwcml2YXRlIGhhc1JlcXVpcmVkUGVyaW9kaWNpdHkodHlwZTogSG9tZUJhc2VUeXBlKTogYm9vbGVhbiB7XHJcblx0XHRpZiAodHlwZSA9PT0gSG9tZUJhc2VUeXBlLkRhaWx5Tm90ZSkge1xyXG5cdFx0XHQvLyBEYWlseSBub3RlcyBjYW4gY29tZSBmcm9tIGVpdGhlciBjb3JlIHBsdWdpbiBPUiBwZXJpb2RpYyBub3RlcyBwbHVnaW5cclxuXHRcdFx0Y29uc3QgY29yZURhaWx5Tm90ZXMgPSB0aGlzLmFwcC5pbnRlcm5hbFBsdWdpbnM/LnBsdWdpbnM/LlsnZGFpbHktbm90ZXMnXT8uZW5hYmxlZCA9PT0gdHJ1ZTtcclxuXHRcdFx0aWYgKGNvcmVEYWlseU5vdGVzKSB7XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH1cclxuXHRcdFx0Ly8gQ2hlY2sgcGVyaW9kaWMgbm90ZXMgcGx1Z2luIGZvciBkYWlseSBub3RlIHN1cHBvcnRcclxuXHRcdFx0Y29uc3QgcGVyaW9kaWNOb3RlcyA9IHRoaXMuYXBwLnBsdWdpbnM/LnBsdWdpbnM/LlsncGVyaW9kaWMtbm90ZXMnXTtcclxuXHRcdFx0aWYgKHBlcmlvZGljTm90ZXMpIHtcclxuXHRcdFx0XHRjb25zdCB2ZXJzaW9uID0gKHBlcmlvZGljTm90ZXMgYXMgeyBtYW5pZmVzdD86IHsgdmVyc2lvbj86IHN0cmluZyB9IH0pPy5tYW5pZmVzdD8udmVyc2lvbiB8fCAnMCc7XHJcblx0XHRcdFx0Y29uc3QgaXNMZWdhY3kgPSB2ZXJzaW9uLnN0YXJ0c1dpdGgoJzAnKTtcclxuXHJcblx0XHRcdFx0aWYgKGlzTGVnYWN5KSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gKHBlcmlvZGljTm90ZXMgYXMgeyBzZXR0aW5ncz86IFJlY29yZDxzdHJpbmcsIHsgZW5hYmxlZD86IGJvb2xlYW4gfT4gfSk/LnNldHRpbmdzPy5bJ2RhaWx5J10/LmVuYWJsZWQgPT09IHRydWU7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGNvbnN0IGNhbGVuZGFyU2V0ID0gKHBlcmlvZGljTm90ZXMgYXMgeyBjYWxlbmRhclNldE1hbmFnZXI/OiB7IGdldEFjdGl2ZVNldD86ICgpID0+IFJlY29yZDxzdHJpbmcsIHsgZW5hYmxlZD86IGJvb2xlYW4gfT4gfSB9KT8uY2FsZW5kYXJTZXRNYW5hZ2VyPy5nZXRBY3RpdmVTZXQ/LigpO1xyXG5cdFx0XHRcdFx0cmV0dXJuIGNhbGVuZGFyU2V0Py5bJ2RheSddPy5lbmFibGVkID09PSB0cnVlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cclxuXHRcdGNvbnN0IHBlcmlvZGljTm90ZXMgPSB0aGlzLmFwcC5wbHVnaW5zPy5wbHVnaW5zPy5bJ3BlcmlvZGljLW5vdGVzJ107XHJcblx0XHRpZiAoIXBlcmlvZGljTm90ZXMpIHJldHVybiBmYWxzZTtcclxuXHJcblx0XHQvLyBDaGVjayBpZiBwZXJpb2RpYyBub3RlcyBwbHVnaW4gaGFzIHRoZSByZXF1aXJlZCBwZXJpb2QgZW5hYmxlZFxyXG5cclxuXHRcdGNvbnN0IHZlcnNpb24gPSAocGVyaW9kaWNOb3RlcyBhcyB7IG1hbmlmZXN0PzogeyB2ZXJzaW9uPzogc3RyaW5nIH0gfSk/Lm1hbmlmZXN0Py52ZXJzaW9uIHx8ICcwJztcclxuXHRcdGNvbnN0IGlzTGVnYWN5ID0gdmVyc2lvbi5zdGFydHNXaXRoKCcwJyk7XHJcblxyXG5cdFx0aWYgKGlzTGVnYWN5KSB7XHJcblx0XHRcdC8vIExlZ2FjeSBwZXJpb2RpYyBub3Rlc1xyXG5cdFx0XHRjb25zdCBwZXJpb2RNYXA6IFBhcnRpYWw8UmVjb3JkPEhvbWVCYXNlVHlwZSwgc3RyaW5nPj4gPSB7XHJcblx0XHRcdFx0W0hvbWVCYXNlVHlwZS5XZWVrbHlOb3RlXTogJ3dlZWtseScsXHJcblx0XHRcdFx0W0hvbWVCYXNlVHlwZS5Nb250aGx5Tm90ZV06ICdtb250aGx5JyxcclxuXHRcdFx0XHRbSG9tZUJhc2VUeXBlLlF1YXJ0ZXJseU5vdGVdOiAncXVhcnRlcmx5JyxcclxuXHRcdFx0XHRbSG9tZUJhc2VUeXBlLlllYXJseU5vdGVdOiAneWVhcmx5JyxcclxuXHRcdFx0fTtcclxuXHJcblx0XHRcdGNvbnN0IGFkamVjdGl2ZSA9IHBlcmlvZE1hcFt0eXBlXTtcclxuXHRcdFx0aWYgKCFhZGplY3RpdmUpIHJldHVybiBmYWxzZTtcclxuXHJcblx0XHRcdHJldHVybiAocGVyaW9kaWNOb3RlcyBhcyB7IHNldHRpbmdzPzogUmVjb3JkPHN0cmluZywgeyBlbmFibGVkPzogYm9vbGVhbiB9PiB9KT8uc2V0dGluZ3M/LlthZGplY3RpdmVdPy5lbmFibGVkID09PSB0cnVlO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Ly8gTmV3IHBlcmlvZGljIG5vdGVzXHJcblx0XHRcdGNvbnN0IG5vdW5NYXA6IFBhcnRpYWw8UmVjb3JkPEhvbWVCYXNlVHlwZSwgc3RyaW5nPj4gPSB7XHJcblx0XHRcdFx0W0hvbWVCYXNlVHlwZS5XZWVrbHlOb3RlXTogJ3dlZWsnLFxyXG5cdFx0XHRcdFtIb21lQmFzZVR5cGUuTW9udGhseU5vdGVdOiAnbW9udGgnLFxyXG5cdFx0XHRcdFtIb21lQmFzZVR5cGUuUXVhcnRlcmx5Tm90ZV06ICdxdWFydGVyJyxcclxuXHRcdFx0XHRbSG9tZUJhc2VUeXBlLlllYXJseU5vdGVdOiAneWVhcicsXHJcblx0XHRcdH07XHJcblxyXG5cdFx0XHRjb25zdCBub3VuID0gbm91bk1hcFt0eXBlXTtcclxuXHRcdFx0aWYgKCFub3VuKSByZXR1cm4gZmFsc2U7XHJcblxyXG5cdFx0XHRjb25zdCBjYWxlbmRhclNldCA9IChwZXJpb2RpY05vdGVzIGFzIHsgY2FsZW5kYXJTZXRNYW5hZ2VyPzogeyBnZXRBY3RpdmVTZXQ/OiAoKSA9PiBSZWNvcmQ8c3RyaW5nLCB7IGVuYWJsZWQ/OiBib29sZWFuIH0+IH0gfSk/LmNhbGVuZGFyU2V0TWFuYWdlcj8uZ2V0QWN0aXZlU2V0Py4oKTtcclxuXHJcblx0XHRcdHJldHVybiBjYWxlbmRhclNldD8uW25vdW5dPy5lbmFibGVkID09PSB0cnVlO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2hlY2sgaWYgVVJMIHBhcmFtcyBpbmRpY2F0ZSBhIGZpbGUvd29ya3NwYWNlIHNob3VsZCBiZSBvcGVuZWQgKHNraXAgaG9tZXBhZ2UpXHJcblx0ICovXHJcblx0cHJpdmF0ZSBoYXNVcmxQYXJhbXMoKTogYm9vbGVhbiB7XHJcblx0XHQvLyBDaGVjayBmb3IgVVJMIHBhcmFtcyB0aGF0IGluZGljYXRlIGEgc3BlY2lmaWMgZmlsZS93b3Jrc3BhY2Ugc2hvdWxkIGJlIG9wZW5lZFxyXG5cdFx0Ly8gVGhpcyBwcmV2ZW50cyBob21lcGFnZSBmcm9tIG9wZW5pbmcgd2hlbiBPYnNpZGlhbiBpcyBvcGVuZWQgd2l0aCBhIHNwZWNpZmljIGZpbGVcclxuXHRcdGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuT0JTX0FDVCkge1xyXG5cdFx0XHRjb25zdCBwYXJhbXMgPSBPYmplY3Qua2V5cyh3aW5kb3cuT0JTX0FDVCk7XHJcblx0XHRcdGNvbnN0IGFjdGlvbiA9IHdpbmRvdy5PQlNfQUNULmFjdGlvbjtcclxuXHRcdFx0cmV0dXJuIChcclxuXHRcdFx0XHRhY3Rpb24gIT09IHVuZGVmaW5lZCAmJlxyXG5cdFx0XHRcdFsnb3BlbicsICdhZHZhbmNlZC11cmknXS5pbmNsdWRlcyhhY3Rpb24pICYmXHJcblx0XHRcdFx0WydmaWxlJywgJ2ZpbGVwYXRoJywgJ3dvcmtzcGFjZSddLnNvbWUoZSA9PiBwYXJhbXMuaW5jbHVkZXMoZSkpXHJcblx0XHRcdCk7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gZmFsc2U7XHJcblx0fVxyXG5cclxuXHQvLyBcIk9wZW4gd2hlbiBlbXB0eVwiIGZlYXR1cmUgcmVtb3ZlZCAtIHJlZHVuZGFudCB3aXRoIFwiTmV3IHRhYiByZXBsYWNlbWVudDogb25seSB3aGVuIGVtcHR5XCJcclxuXHQvLyBTaW5jZSBPYnNpZGlhbiBhdXRvLWNyZWF0ZXMgYW4gZW1wdHkgdGFiIHdoZW4geW91IGNsb3NlIHRoZSBsYXN0IG9uZSwgdGhleSBkbyB0aGUgc2FtZSB0aGluZ1xyXG59XHJcbiIsICIvKipcclxuICogSG9tZSBCYXNlIFBsdWdpbiBTZXR0aW5nc1xyXG4gKi9cclxuXHJcbmV4cG9ydCB0eXBlIFZpZXdNb2RlID0gJ2RlZmF1bHQnIHwgJ3ByZXZpZXcnIHwgJ3NvdXJjZScgfCAnbGl2ZSc7XHJcbmV4cG9ydCB0eXBlIE5ld1RhYk1vZGUgPSAnb25seS13aGVuLWVtcHR5JyB8ICdhbHdheXMnO1xyXG5leHBvcnQgdHlwZSBPcGVuaW5nTW9kZSA9ICdyZXBsYWNlLWFsbCcgfCAncmVwbGFjZS1sYXN0JyB8ICdyZXRhaW4nO1xyXG5cclxuLyoqXHJcbiAqIEhvbWVwYWdlIHR5cGUgZW51bSAtIG1hdGNoZXMgaG9tZXBhZ2UgcGx1Z2luJ3MgS2luZCBlbnVtXHJcbiAqL1xyXG5leHBvcnQgZW51bSBIb21lQmFzZVR5cGUge1xyXG5cdEZpbGUgPSAnRmlsZScsXHJcblx0V29ya3NwYWNlID0gJ1dvcmtzcGFjZScsXHJcblx0UmFuZG9tID0gJ1JhbmRvbSBmaWxlJyxcclxuXHRSYW5kb21Gb2xkZXIgPSAnUmFuZG9tIGluIGZvbGRlcicsXHJcblx0R3JhcGggPSAnR3JhcGggdmlldycsXHJcblx0Tm9uZSA9ICdOb3RoaW5nJyxcclxuXHRKb3VybmFsID0gJ0pvdXJuYWwnLFxyXG5cdE5ld05vdGUgPSAnTmV3IG5vdGUnLFxyXG5cdERhaWx5Tm90ZSA9ICdEYWlseSBOb3RlJyxcclxuXHRXZWVrbHlOb3RlID0gJ1dlZWtseSBOb3RlJyxcclxuXHRNb250aGx5Tm90ZSA9ICdNb250aGx5IE5vdGUnLFxyXG5cdFF1YXJ0ZXJseU5vdGUgPSAnUXVhcnRlcmx5IE5vdGUnLFxyXG5cdFllYXJseU5vdGUgPSAnWWVhcmx5IE5vdGUnLFxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEhvbWVCYXNlU2V0dGluZ3Mge1xyXG5cdC8vIEdlbmVyYWxcclxuXHRob21lQmFzZVR5cGU6IEhvbWVCYXNlVHlwZTtcclxuXHRob21lQmFzZVZhbHVlOiBzdHJpbmc7IC8vIFR5cGUtc3BlY2lmaWMgdmFsdWUgKGZpbGUgcGF0aCwgd29ya3NwYWNlIG5hbWUsIGZvbGRlciBwYXRoLCBldGMuKVxyXG5cdG9wZW5PblN0YXJ0dXA6IGJvb2xlYW47XHJcblx0b3BlblZpZXdNb2RlOiBWaWV3TW9kZTtcclxuXHRvcGVuTW9kZTogT3BlbmluZ01vZGU7XHJcblx0bWFudWFsT3Blbk1vZGU6IE9wZW5pbmdNb2RlO1xyXG5cclxuXHQvLyBUYWIgQmVoYXZpb3JcclxuXHRyZXBsYWNlTmV3VGFiOiBib29sZWFuO1xyXG5cdG5ld1RhYk1vZGU6IE5ld1RhYk1vZGU7XHJcblx0b3BlbldoZW5BbGxUYWJzQ2xvc2VkOiBib29sZWFuOyAvLyBPcGVuIGhvbWUgYmFzZSB3aGVuIGFsbCB0YWJzIGFyZSBjbG9zZWQgKGluZGVwZW5kZW50IG9mIHJlcGxhY2VOZXdUYWIpXHJcblx0dXNlRGlmZmVyZW50RmlsZUZvck5ld1RhYjogYm9vbGVhbjsgLy8gVXNlIHNlcGFyYXRlIG5ldyB0YWIgc2V0dGluZ3MgdnMgaG9tZSBiYXNlXHJcblx0bmV3VGFiVHlwZTogSG9tZUJhc2VUeXBlO1xyXG5cdG5ld1RhYlZhbHVlOiBzdHJpbmc7XHJcblx0bmV3VGFiU2VwYXJhdGVNb2JpbGU6IGJvb2xlYW47XHJcblx0bW9iaWxlTmV3VGFiVHlwZTogSG9tZUJhc2VUeXBlO1xyXG5cdG1vYmlsZU5ld1RhYlZhbHVlOiBzdHJpbmc7XHJcblxyXG5cdC8vIFVJIEZlYXR1cmVzIChvZmYgYnkgZGVmYXVsdClcclxuXHRzaG93U3RpY2t5SG9tZUljb246IGJvb2xlYW47XHJcblx0c3RpY2t5SWNvbk5hbWU6IHN0cmluZyB8IG51bGw7XHJcblx0aGlkZUhvbWVUYWJIZWFkZXI6IGJvb2xlYW47XHJcblx0cmVwbGFjZU1vYmlsZU5ld1RhYjogYm9vbGVhbjtcclxuXHRcclxuXHQvLyBNb2JpbGVcclxuXHRzZXBhcmF0ZU1vYmlsZTogYm9vbGVhbjtcclxuXHRtb2JpbGVIb21lQmFzZVR5cGU6IEhvbWVCYXNlVHlwZTtcclxuXHRtb2JpbGVIb21lQmFzZVZhbHVlOiBzdHJpbmc7XHJcblxyXG5cdC8vIEF1dG9tYXRpb25cclxuXHRjb21tYW5kT25PcGVuOiBzdHJpbmc7XHJcblx0d2FpdEZvckdpdFN5bmM6IGJvb2xlYW47XHJcblx0Z2l0U3luY1RpbWVvdXQ6IG51bWJlcjtcclxuXHRcclxuXHQvLyBWaWV3IGJlaGF2aW9yXHJcblx0cmV2ZXJ0VmlldzogYm9vbGVhbjtcclxuXHRhdXRvU2Nyb2xsOiBib29sZWFuO1xyXG5cdGhpZGVSZWxlYXNlTm90ZXM6IGJvb2xlYW47XHJcblxyXG5cdC8vIExlZ2FjeSAtIGtlcHQgaW4gdHlwZSBmb3IgbWlncmF0aW9uIGJ1dCByZW1vdmVkIGZyb20gZGVmYXVsdHNcclxuXHRob21lQmFzZVBhdGg/OiBzdHJpbmc7XHJcblx0a2VlcEV4aXN0aW5nVGFicz86IGJvb2xlYW47XHJcblx0bW9iaWxlSG9tZUJhc2VQYXRoPzogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogSG9tZUJhc2VTZXR0aW5ncyA9IHtcclxuXHQvLyBHZW5lcmFsXHJcblx0aG9tZUJhc2VUeXBlOiBIb21lQmFzZVR5cGUuRmlsZSxcclxuXHRob21lQmFzZVZhbHVlOiAnJyxcclxuXHRvcGVuT25TdGFydHVwOiB0cnVlLFxyXG5cdG9wZW5WaWV3TW9kZTogJ2RlZmF1bHQnLFxyXG5cdG9wZW5Nb2RlOiAncmVwbGFjZS1hbGwnLFxyXG5cdG1hbnVhbE9wZW5Nb2RlOiAncmV0YWluJyxcclxuXHJcblx0Ly8gVGFiIEJlaGF2aW9yXHJcblx0cmVwbGFjZU5ld1RhYjogZmFsc2UsXHJcblx0bmV3VGFiTW9kZTogJ29ubHktd2hlbi1lbXB0eScsIC8vIERlZmF1bHQ6IG9ubHkgcmVwbGFjZSB3aGVuIG5vIHRhYnMgYXJlIG9wZW5cclxuXHRvcGVuV2hlbkFsbFRhYnNDbG9zZWQ6IHRydWUsIC8vIERlZmF1bHQ6IG9wZW4gaG9tZSBiYXNlIHdoZW4gYWxsIHRhYnMgYXJlIGNsb3NlZFxyXG5cdHVzZURpZmZlcmVudEZpbGVGb3JOZXdUYWI6IGZhbHNlLFxyXG5cdG5ld1RhYlR5cGU6IEhvbWVCYXNlVHlwZS5GaWxlLFxyXG5cdG5ld1RhYlZhbHVlOiAnJyxcclxuXHRuZXdUYWJTZXBhcmF0ZU1vYmlsZTogZmFsc2UsXHJcblx0bW9iaWxlTmV3VGFiVHlwZTogSG9tZUJhc2VUeXBlLkZpbGUsXHJcblx0bW9iaWxlTmV3VGFiVmFsdWU6ICcnLFxyXG5cclxuXHQvLyBVSSBGZWF0dXJlc1xyXG5cdHNob3dTdGlja3lIb21lSWNvbjogZmFsc2UsXHJcblx0c3RpY2t5SWNvbk5hbWU6ICdob21lJyxcclxuXHRoaWRlSG9tZVRhYkhlYWRlcjogZmFsc2UsXHJcblx0cmVwbGFjZU1vYmlsZU5ld1RhYjogZmFsc2UsXHJcblx0XHJcblx0Ly8gTW9iaWxlXHJcblx0c2VwYXJhdGVNb2JpbGU6IGZhbHNlLFxyXG5cdG1vYmlsZUhvbWVCYXNlVHlwZTogSG9tZUJhc2VUeXBlLkZpbGUsXHJcblx0bW9iaWxlSG9tZUJhc2VWYWx1ZTogJycsXHJcblxyXG5cdC8vIEF1dG9tYXRpb25cclxuXHRjb21tYW5kT25PcGVuOiAnJyxcclxuXHR3YWl0Rm9yR2l0U3luYzogZmFsc2UsXHJcblx0Z2l0U3luY1RpbWVvdXQ6IDMsIC8vIERlZmF1bHQgMyBzZWNvbmRzXHJcblx0XHJcblx0Ly8gVmlldyBiZWhhdmlvclxyXG5cdHJldmVydFZpZXc6IGZhbHNlLFxyXG5cdGF1dG9TY3JvbGw6IGZhbHNlLFxyXG5cdGhpZGVSZWxlYXNlTm90ZXM6IGZhbHNlLCAvLyBPRkYgYnkgZGVmYXVsdFxyXG59O1xyXG5cclxuLyoqXHJcbiAqIFZpZXcgbW9kZSBkaXNwbGF5IG5hbWVzIGZvciBzZXR0aW5ncyBkcm9wZG93blxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IFZJRVdfTU9ERV9PUFRJT05TOiBSZWNvcmQ8Vmlld01vZGUsIHN0cmluZz4gPSB7XHJcblx0J2RlZmF1bHQnOiAnRGVmYXVsdCcsXHJcblx0J3ByZXZpZXcnOiAnUmVhZGluZyB2aWV3JyxcclxuXHQnc291cmNlJzogJ1NvdXJjZSBtb2RlJyxcclxuXHQnbGl2ZSc6ICdMaXZlIFByZXZpZXcnLFxyXG59O1xyXG5cclxuLyoqXHJcbiAqIE5ldyB0YWIgbW9kZSBkaXNwbGF5IG5hbWVzIGZvciBzZXR0aW5ncyBkcm9wZG93blxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IE5FV19UQUJfTU9ERV9PUFRJT05TOiBSZWNvcmQ8TmV3VGFiTW9kZSwgc3RyaW5nPiA9IHtcclxuXHQnb25seS13aGVuLWVtcHR5JzogJ09ubHkgd2hlbiBubyB0YWJzIGFyZSBvcGVuJyxcclxuXHQnYWx3YXlzJzogJ0Fsd2F5cyByZXBsYWNlIG5ldyB0YWJzJyxcclxufTtcclxuXHJcbi8qKlxyXG4gKiBPcGVuaW5nIG1vZGUgZGlzcGxheSBuYW1lcyBmb3Igc2V0dGluZ3MgZHJvcGRvd25cclxuICovXHJcbmV4cG9ydCBjb25zdCBPUEVOSU5HX01PREVfT1BUSU9OUzogUmVjb3JkPE9wZW5pbmdNb2RlLCBzdHJpbmc+ID0ge1xyXG5cdCdyZXBsYWNlLWFsbCc6ICdSZXBsYWNlIGFsbCBvcGVuIG5vdGVzJyxcclxuXHQncmVwbGFjZS1sYXN0JzogJ1JlcGxhY2UgbGFzdCBub3RlJyxcclxuXHQncmV0YWluJzogJ0tlZXAgb3BlbiBub3RlcycsXHJcbn07XHJcblxyXG4vKipcclxuICogSG9tZXBhZ2UgdHlwZXMgdGhhdCBkb24ndCByZXF1aXJlIGEgdmFsdWUgaW5wdXRcclxuICovXHJcbmV4cG9ydCBjb25zdCBVTkNIQU5HRUFCTEVfVFlQRVM6IEhvbWVCYXNlVHlwZVtdID0gW1xyXG5cdEhvbWVCYXNlVHlwZS5SYW5kb20sXHJcblx0SG9tZUJhc2VUeXBlLkdyYXBoLFxyXG5cdEhvbWVCYXNlVHlwZS5Ob25lLFxyXG5cdEhvbWVCYXNlVHlwZS5EYWlseU5vdGUsXHJcblx0SG9tZUJhc2VUeXBlLldlZWtseU5vdGUsXHJcblx0SG9tZUJhc2VUeXBlLk1vbnRobHlOb3RlLFxyXG5cdEhvbWVCYXNlVHlwZS5RdWFydGVybHlOb3RlLFxyXG5cdEhvbWVCYXNlVHlwZS5ZZWFybHlOb3RlLFxyXG5dO1xyXG4iLCAiLyoqXG4gKiBIb21lIEJhc2UgU2V0dGluZ3MgVGFiXG4gKi9cblxuaW1wb3J0IHsgQXBwLCBQbHVnaW5TZXR0aW5nVGFiLCByZXF1aXJlQXBpVmVyc2lvbiB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIEhvbWVCYXNlUGx1Z2luIGZyb20gJy4uL21haW4nO1xuaW1wb3J0IHtcblx0VklFV19NT0RFX09QVElPTlMsXG5cdE5FV19UQUJfTU9ERV9PUFRJT05TLFxuXHRPUEVOSU5HX01PREVfT1BUSU9OUyxcblx0Vmlld01vZGUsXG5cdE5ld1RhYk1vZGUsXG5cdE9wZW5pbmdNb2RlLFxuXHRIb21lQmFzZVR5cGUsXG5cdFVOQ0hBTkdFQUJMRV9UWVBFUyxcbn0gZnJvbSAnLi4vc2V0dGluZ3MnO1xuaW1wb3J0IHsgY3JlYXRlU2V0dGluZ3NHcm91cCB9IGZyb20gJy4uL3V0aWxzL3NldHRpbmdzLWNvbXBhdCc7XG5pbXBvcnQgeyBGaWxlUGF0aFN1Z2dlc3QsIEZvbGRlclN1Z2dlc3QsIFdvcmtzcGFjZVN1Z2dlc3QgfSBmcm9tICcuL2ZpbGUtc3VnZ2VzdCc7XG5pbXBvcnQgeyBDb21tYW5kU3VnZ2VzdCwgZ2V0Q29tbWFuZEJ5SWQgfSBmcm9tICcuL2NvbW1hbmQtc3VnZ2VzdCc7XG5pbXBvcnQgeyBJY29uUGlja2VyIH0gZnJvbSAnLi9pY29uLXBpY2tlcic7XG5cbmV4cG9ydCBjbGFzcyBIb21lQmFzZVNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcblx0cGx1Z2luOiBIb21lQmFzZVBsdWdpbjtcblx0cHVibGljIGljb24gPSAnbHVjaWRlLWhvdXNlJztcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBIb21lQmFzZVBsdWdpbikge1xuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0fVxuXG5cdGRpc3BsYXkoKTogdm9pZCB7XG5cdFx0Y29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xuXG5cdFx0Ly8gR2V0IGFjdGl2ZSBzZXR0aW5ncyAobW9iaWxlIG9yIGRlc2t0b3ApXG5cdFx0Y29uc3QgaXNNb2JpbGUgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zZXBhcmF0ZU1vYmlsZTtcblx0XHRjb25zdCBhY3RpdmVUeXBlID0gaXNNb2JpbGUgPyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2JpbGVIb21lQmFzZVR5cGUgOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5ob21lQmFzZVR5cGU7XG5cdFx0Y29uc3QgYWN0aXZlVmFsdWUgPSBpc01vYmlsZSA/IHRoaXMucGx1Z2luLnNldHRpbmdzLm1vYmlsZUhvbWVCYXNlVmFsdWUgOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5ob21lQmFzZVZhbHVlO1xuXG5cdFx0Ly8gR2VuZXJhbCBTZXR0aW5ncyAobm8gaGVhZGluZyBmb3IgZmlyc3QgZ3JvdXApXG5cdFx0Y29uc3QgZ2VuZXJhbEdyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXJFbCwgdW5kZWZpbmVkLCAnaG9tZS1iYXNlJyk7XG5cblx0XHQvLyBIb21lIHBhZ2UgdHlwZSBkcm9wZG93blxuXHRcdGdlbmVyYWxHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XG5cdFx0XHRzZXR0aW5nXG5cdFx0XHRcdC5zZXROYW1lKCdUeXBlJylcblx0XHRcdFx0LnNldERlc2MoJ1doYXQgdG8gb3BlbiBhcyB5b3VyIGhvbWUgYmFzZScpXG5cdFx0XHRcdC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcblx0XHRcdFx0XHRsZXQgcGx1Z2luRGlzYWJsZWQgPSBmYWxzZTtcblxuXHRcdFx0XHRcdGZvciAoY29uc3QgdHlwZSBvZiBPYmplY3QudmFsdWVzKEhvbWVCYXNlVHlwZSkpIHtcblx0XHRcdFx0XHRcdGlmICghdGhpcy5wbHVnaW4uaGFzUmVxdWlyZWRQbHVnaW4odHlwZSkpIHtcblx0XHRcdFx0XHRcdFx0Ly8gSWYgY3VycmVudCB0eXBlIGlzIGRpc2FibGVkLCBtYXJrIGl0IGJ1dCBzdGlsbCBhbGxvdyBpdFxuXHRcdFx0XHRcdFx0XHRpZiAodHlwZSA9PT0gYWN0aXZlVHlwZSkge1xuXHRcdFx0XHRcdFx0XHRcdHBsdWdpbkRpc2FibGVkID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0XHRkcm9wZG93bi5hZGRPcHRpb24odHlwZSwgdHlwZSk7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gQWRkIGRpc2FibGVkIG9wdGlvblxuXHRcdFx0XHRcdFx0XHRcdGRyb3Bkb3duLnNlbGVjdEVsLmNyZWF0ZUVsKCdvcHRpb24nLCB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0ZXh0OiB0eXBlLFxuXHRcdFx0XHRcdFx0XHRcdFx0YXR0cjogeyBkaXNhYmxlZDogJ3RydWUnIH1cblx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0ZHJvcGRvd24uYWRkT3B0aW9uKHR5cGUsIHR5cGUpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGRyb3Bkb3duXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUoYWN0aXZlVHlwZSB8fCBIb21lQmFzZVR5cGUuRmlsZSlcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0aWYgKGlzTW9iaWxlKSB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubW9iaWxlSG9tZUJhc2VUeXBlID0gdmFsdWUgYXMgSG9tZUJhc2VUeXBlO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmhvbWVCYXNlVHlwZSA9IHZhbHVlIGFzIEhvbWVCYXNlVHlwZTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblxuXHRcdFx0XHRcdFx0XHQvLyBSZS1yZW5kZXIgdG8gc2hvdy9oaWRlIHZhbHVlIGlucHV0XG5cdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbENvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNsb3Nlc3QoJy52ZXJ0aWNhbC10YWItY29udGVudCcpIHx8XG5cdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyRWwuY2xvc2VzdCgnLnNldHRpbmdzLWNvbnRlbnQnKSB8fFxuXHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lckVsLnBhcmVudEVsZW1lbnQ7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbFRvcCA9IHNjcm9sbENvbnRhaW5lcj8uc2Nyb2xsVG9wIHx8IDA7XG5cdFx0XHRcdFx0XHRcdHRoaXMuZGlzcGxheSgpO1xuXHRcdFx0XHRcdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdGlmIChzY3JvbGxDb250YWluZXIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3AgPSBzY3JvbGxUb3A7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0Ly8gU2hvdyB3YXJuaW5nIGlmIGN1cnJlbnQgdHlwZSByZXF1aXJlcyBhIGRpc2FibGVkIHBsdWdpblxuXHRcdFx0XHRcdGlmIChwbHVnaW5EaXNhYmxlZCkge1xuXHRcdFx0XHRcdFx0c2V0dGluZy5kZXNjRWwuY3JlYXRlRGl2KHtcblx0XHRcdFx0XHRcdFx0dGV4dDogJ1RoZSByZXF1aXJlZCBwbHVnaW4gaGFzIG5vdCBiZWVuIGVuYWJsZWQgb3IgY29uZmlndXJlZCBmb3IgdGhpcyB0eXBlLicsXG5cdFx0XHRcdFx0XHRcdGNsczogJ21vZC13YXJuaW5nJ1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdC8vIFZhbHVlIGlucHV0IChjb25kaXRpb25hbCBvbiB0eXBlKVxuXHRcdGlmICghVU5DSEFOR0VBQkxFX1RZUEVTLmluY2x1ZGVzKGFjdGl2ZVR5cGUpKSB7XG5cdFx0XHRnZW5lcmFsR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xuXHRcdFx0XHRsZXQgZGVzYyA9ICcnO1xuXHRcdFx0XHRsZXQgcGxhY2Vob2xkZXIgPSAnJztcblxuXHRcdFx0XHRpZiAoYWN0aXZlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLkZpbGUpIHtcblx0XHRcdFx0XHRkZXNjID0gJ1RoZSBmaWxlIHRvIG9wZW4gYXMgeW91ciBob21lIGJhc2UgKHN1cHBvcnRzIC5tZCwgLm1keCwgLmNhbnZhcywgLmJhc2UpJztcblx0XHRcdFx0XHRwbGFjZWhvbGRlciA9ICdQYXRoIHRvIGhvbWUgYmFzZSBmaWxlJztcblx0XHRcdFx0fSBlbHNlIGlmIChhY3RpdmVUeXBlID09PSBIb21lQmFzZVR5cGUuV29ya3NwYWNlKSB7XG5cdFx0XHRcdFx0ZGVzYyA9ICdUaGUgd29ya3NwYWNlIHRvIGxvYWQgYXMgeW91ciBob21lIGJhc2UnO1xuXHRcdFx0XHRcdHBsYWNlaG9sZGVyID0gJ1dvcmtzcGFjZSBuYW1lJztcblx0XHRcdFx0fSBlbHNlIGlmIChhY3RpdmVUeXBlID09PSBIb21lQmFzZVR5cGUuUmFuZG9tRm9sZGVyIHx8IGFjdGl2ZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5OZXdOb3RlKSB7XG5cdFx0XHRcdFx0ZGVzYyA9IGFjdGl2ZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5SYW5kb21Gb2xkZXIgPyAnVGhlIGZvbGRlciB0byBwaWNrIGEgcmFuZG9tIGZpbGUgZnJvbScgOiAnVGhlIGZvbGRlciB0byBjcmVhdGUgbmV3IG5vdGVzIGluJztcblx0XHRcdFx0XHRwbGFjZWhvbGRlciA9ICdGb2xkZXIgcGF0aCc7XG5cdFx0XHRcdH0gZWxzZSBpZiAoYWN0aXZlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLkpvdXJuYWwpIHtcblx0XHRcdFx0XHRkZXNjID0gJ1RoZSBqb3VybmFsIG5hbWUnO1xuXHRcdFx0XHRcdHBsYWNlaG9sZGVyID0gJ0pvdXJuYWwgbmFtZSc7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRzZXR0aW5nXG5cdFx0XHRcdFx0LnNldE5hbWUoYWN0aXZlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLkZpbGUgPyAnRmlsZScgOlxuXHRcdFx0XHRcdFx0YWN0aXZlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLldvcmtzcGFjZSA/ICdXb3Jrc3BhY2UnIDpcblx0XHRcdFx0XHRcdFx0KGFjdGl2ZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5SYW5kb21Gb2xkZXIgfHwgYWN0aXZlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLk5ld05vdGUpID8gJ0ZvbGRlcicgOlxuXHRcdFx0XHRcdFx0XHRcdGFjdGl2ZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5Kb3VybmFsID8gJ0pvdXJuYWwnIDogJ1ZhbHVlJylcblx0XHRcdFx0XHQuc2V0RGVzYyhkZXNjKVxuXHRcdFx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PiB7XG5cdFx0XHRcdFx0XHQvLyBBZGQgYXBwcm9wcmlhdGUgc3VnZ2VzdGVyXG5cdFx0XHRcdFx0XHRpZiAoYWN0aXZlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLkZpbGUpIHtcblx0XHRcdFx0XHRcdFx0bmV3IEZpbGVQYXRoU3VnZ2VzdCh0aGlzLmFwcCwgdGV4dC5pbnB1dEVsKTtcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoYWN0aXZlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLldvcmtzcGFjZSkge1xuXHRcdFx0XHRcdFx0XHRuZXcgV29ya3NwYWNlU3VnZ2VzdCh0aGlzLmFwcCwgdGV4dC5pbnB1dEVsKTtcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoYWN0aXZlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLlJhbmRvbUZvbGRlciB8fCBhY3RpdmVUeXBlID09PSBIb21lQmFzZVR5cGUuTmV3Tm90ZSkge1xuXHRcdFx0XHRcdFx0XHRuZXcgRm9sZGVyU3VnZ2VzdCh0aGlzLmFwcCwgdGV4dC5pbnB1dEVsKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0dGV4dFxuXHRcdFx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIocGxhY2Vob2xkZXIpXG5cdFx0XHRcdFx0XHRcdC5zZXRWYWx1ZShhY3RpdmVWYWx1ZSB8fCAnJylcblx0XHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdGlmIChpc01vYmlsZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubW9iaWxlSG9tZUJhc2VWYWx1ZSA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5ob21lQmFzZVZhbHVlID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGdlbmVyYWxHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XG5cdFx0XHRzZXR0aW5nXG5cdFx0XHRcdC5zZXROYW1lKCdPcGVuIG9uIHN0YXJ0dXAnKVxuXHRcdFx0XHQuc2V0RGVzYygnT3BlbiB0aGUgaG9tZSBiYXNlIHdoZW4gbGF1bmNoaW5nIE9ic2lkaWFuJylcblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XG5cdFx0XHRcdFx0dG9nZ2xlXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mub3Blbk9uU3RhcnR1cClcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Mub3Blbk9uU3RhcnR1cCA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0Ly8gQWRkIHdhcm5pbmcgaWYgT2JzaWRpYW4gMS4xMS4wKyBhbmQgbmF0aXZlIHNldHRpbmcgZXhpc3RzXG5cdFx0XHRpZiAocmVxdWlyZUFwaVZlcnNpb24oJzEuMTEuMCcpKSB7XG5cdFx0XHRcdGNvbnN0IG5hdGl2ZU9wZW5CZWhhdmlvciA9IHRoaXMucGx1Z2luLmhvbWVTZXJ2aWNlLmdldE5hdGl2ZU9wZW5CZWhhdmlvcigpO1xuXHRcdFx0XHRpZiAobmF0aXZlT3BlbkJlaGF2aW9yKSB7XG5cdFx0XHRcdFx0c2V0dGluZy5kZXNjRWwuY3JlYXRlRGl2KHtcblx0XHRcdFx0XHRcdHRleHQ6IGBOb3RlOiBUaGlzIHdpbGwgb3ZlcnJpZGUgT2JzaWRpYW4ncyBuYXRpdmUgXCJEZWZhdWx0IGZpbGUgdG8gb3BlblwiIHNldHRpbmcgKGN1cnJlbnRseSBzZXQgdG8gXCIke25hdGl2ZU9wZW5CZWhhdmlvcn1cIikuYCxcblx0XHRcdFx0XHRcdGNsczogJ21vZC13YXJuaW5nJ1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLyBcIk9wZW4gd2hlbiBlbXB0eVwiIHNldHRpbmcgcmVtb3ZlZCAtIHJlZHVuZGFudCB3aXRoIFwiTmV3IHRhYiByZXBsYWNlbWVudDogb25seSB3aGVuIGVtcHR5XCJcblx0XHQvLyBTaW5jZSBPYnNpZGlhbiBhdXRvLWNyZWF0ZXMgYW4gZW1wdHkgdGFiIHdoZW4geW91IGNsb3NlIHRoZSBsYXN0IG9uZSwgdGhleSBkbyB0aGUgc2FtZSB0aGluZ1xuXG5cdFx0Z2VuZXJhbEdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcblx0XHRcdHNldHRpbmdcblx0XHRcdFx0LnNldE5hbWUoJ09wZW5pbmcgbW9kZSAoc3RhcnR1cCknKVxuXHRcdFx0XHQuc2V0RGVzYygnSG93IHRvIGhhbmRsZSBleGlzdGluZyB0YWJzIHdoZW4gb3BlbmluZyBvbiBzdGFydHVwJylcblx0XHRcdFx0LmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xuXHRcdFx0XHRcdGZvciAoY29uc3QgW3ZhbHVlLCBsYWJlbF0gb2YgT2JqZWN0LmVudHJpZXMoT1BFTklOR19NT0RFX09QVElPTlMpKSB7XG5cdFx0XHRcdFx0XHRkcm9wZG93bi5hZGRPcHRpb24odmFsdWUsIGxhYmVsKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZHJvcGRvd25cblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuTW9kZSlcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Mub3Blbk1vZGUgPSB2YWx1ZSBhcyBPcGVuaW5nTW9kZTtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cdFx0fSk7XG5cblx0XHRnZW5lcmFsR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xuXHRcdFx0c2V0dGluZ1xuXHRcdFx0XHQuc2V0TmFtZSgnT3BlbmluZyBtb2RlIChtYW51YWwpJylcblx0XHRcdFx0LnNldERlc2MoJ0hvdyB0byBoYW5kbGUgZXhpc3RpbmcgdGFicyB3aGVuIG9wZW5pbmcgbWFudWFsbHknKVxuXHRcdFx0XHQuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XG5cdFx0XHRcdFx0Zm9yIChjb25zdCBbdmFsdWUsIGxhYmVsXSBvZiBPYmplY3QuZW50cmllcyhPUEVOSU5HX01PREVfT1BUSU9OUykpIHtcblx0XHRcdFx0XHRcdGRyb3Bkb3duLmFkZE9wdGlvbih2YWx1ZSwgbGFiZWwpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRkcm9wZG93blxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm1hbnVhbE9wZW5Nb2RlKVxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5tYW51YWxPcGVuTW9kZSA9IHZhbHVlIGFzIE9wZW5pbmdNb2RlO1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdGdlbmVyYWxHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XG5cdFx0XHRzZXR0aW5nXG5cdFx0XHRcdC5zZXROYW1lKCdWaWV3IG1vZGUnKVxuXHRcdFx0XHQuc2V0RGVzYygnSG93IHRvIG9wZW4gTWFya2Rvd24gZmlsZXMnKVxuXHRcdFx0XHQuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XG5cdFx0XHRcdFx0Zm9yIChjb25zdCBbdmFsdWUsIGxhYmVsXSBvZiBPYmplY3QuZW50cmllcyhWSUVXX01PREVfT1BUSU9OUykpIHtcblx0XHRcdFx0XHRcdGRyb3Bkb3duLmFkZE9wdGlvbih2YWx1ZSwgbGFiZWwpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRkcm9wZG93blxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm9wZW5WaWV3TW9kZSlcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Mub3BlblZpZXdNb2RlID0gdmFsdWUgYXMgVmlld01vZGU7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cdFx0Z2VuZXJhbEdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcblx0XHRcdHNldHRpbmdcblx0XHRcdFx0LnNldE5hbWUoJ1JldmVydCB2aWV3IG9uIGNsb3NlJylcblx0XHRcdFx0LnNldERlc2MoJ1doZW4gbmF2aWdhdGluZyBhd2F5IGZyb20gdGhlIGhvbWUgYmFzZSwgcmVzdG9yZSB0aGUgZGVmYXVsdCB2aWV3Jylcblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XG5cdFx0XHRcdFx0dG9nZ2xlXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucmV2ZXJ0Vmlldylcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MucmV2ZXJ0VmlldyA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdGdlbmVyYWxHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XG5cdFx0XHRzZXR0aW5nXG5cdFx0XHRcdC5zZXROYW1lKCdBdXRvLXNjcm9sbCcpXG5cdFx0XHRcdC5zZXREZXNjKCdXaGVuIG9wZW5pbmcgdGhlIGhvbWUgYmFzZSwgc2Nyb2xsIHRvIHRoZSBib3R0b20gYW5kIGZvY3VzIG9uIHRoZSBsYXN0IGxpbmUnKVxuXHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcblx0XHRcdFx0XHR0b2dnbGVcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvU2Nyb2xsKVxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvU2Nyb2xsID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cdFx0Z2VuZXJhbEdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcblx0XHRcdHNldHRpbmdcblx0XHRcdFx0LnNldE5hbWUoJ0hpZGUgcmVsZWFzZSBub3RlcycpXG5cdFx0XHRcdC5zZXREZXNjKCdOZXZlciBkaXNwbGF5IHJlbGVhc2Ugbm90ZXMgd2hlbiBPYnNpZGlhbiB1cGRhdGVzJylcblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XG5cdFx0XHRcdFx0dG9nZ2xlXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlkZVJlbGVhc2VOb3Rlcylcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlkZVJlbGVhc2VOb3RlcyA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdC8vIFRhYiBCZWhhdmlvciBTZXR0aW5nc1xuXHRcdGNvbnN0IHRhYkdyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXJFbCwgJ1RhYiBCZWhhdmlvcicsICdob21lLWJhc2UnKTtcblxuXHRcdHRhYkdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcblx0XHRcdHNldHRpbmdcblx0XHRcdFx0LnNldE5hbWUoJ09wZW4gaG9tZSBiYXNlIHdoZW4gYWxsIHRhYnMgYXJlIGNsb3NlZCcpXG5cdFx0XHRcdC5zZXREZXNjKCdXaGVuIHlvdSBjbG9zZSBhbGwgdGFicywgYXV0b21hdGljYWxseSBvcGVuIHRoZSBob21lIGJhc2UnKVxuXHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcblx0XHRcdFx0XHR0b2dnbGVcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuV2hlbkFsbFRhYnNDbG9zZWQpXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm9wZW5XaGVuQWxsVGFic0Nsb3NlZCA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdHRhYkdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcblx0XHRcdHNldHRpbmdcblx0XHRcdFx0LnNldE5hbWUoJ1JlcGxhY2UgbmV3IHRhYnMnKVxuXHRcdFx0XHQuc2V0RGVzYygnT3BlbiBob21lIGJhc2UgaW5zdGVhZCBvZiBuZXcgZW1wdHkgdGFicyAod29ya3MgaW5kZXBlbmRlbnRseSBvZiBcIm9wZW4gaG9tZSBiYXNlIHdoZW4gYWxsIHRhYnMgYXJlIGNsb3NlZFwiKScpXG5cdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xuXHRcdFx0XHRcdHRvZ2dsZVxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnJlcGxhY2VOZXdUYWIpXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnJlcGxhY2VOZXdUYWIgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cblx0XHRcdFx0XHRcdFx0Ly8gUHJlc2VydmUgc2Nyb2xsIHBvc2l0aW9uIGJlZm9yZSByZS1yZW5kZXJpbmdcblx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsQ29udGFpbmVyID0gY29udGFpbmVyRWwuY2xvc2VzdCgnLnZlcnRpY2FsLXRhYi1jb250ZW50JykgfHxcblx0XHRcdFx0XHRcdFx0XHRjb250YWluZXJFbC5jbG9zZXN0KCcuc2V0dGluZ3MtY29udGVudCcpIHx8XG5cdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyRWwucGFyZW50RWxlbWVudDtcblx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsVG9wID0gc2Nyb2xsQ29udGFpbmVyPy5zY3JvbGxUb3AgfHwgMDtcblxuXHRcdFx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTsgLy8gUmUtcmVuZGVyIHRvIHNob3cvaGlkZSBkZXBlbmRlbnQgc2V0dGluZ1xuXG5cdFx0XHRcdFx0XHRcdC8vIFJlc3RvcmUgc2Nyb2xsIHBvc2l0aW9uIGFmdGVyIHJlbmRlcmluZ1xuXHRcdFx0XHRcdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdGlmIChzY3JvbGxDb250YWluZXIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3AgPSBzY3JvbGxUb3A7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdC8vIE9ubHkgc2hvdyBuZXcgdGFiIG1vZGUgaWYgcmVwbGFjZSBuZXcgdGFiIGlzIGVuYWJsZWRcblx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MucmVwbGFjZU5ld1RhYikge1xuXHRcdFx0dGFiR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xuXHRcdFx0XHRzZXR0aW5nXG5cdFx0XHRcdFx0LnNldE5hbWUoJ05ldyB0YWIgcmVwbGFjZW1lbnQgbW9kZScpXG5cdFx0XHRcdFx0LnNldERlc2MoJ1doZW4gdG8gcmVwbGFjZSBuZXcgdGFicyAob25seSB3aGVuIG5vIHRhYnMgYXJlIG9wZW4sIG9yIGFsd2F5cyknKVxuXHRcdFx0XHRcdC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcblx0XHRcdFx0XHRcdGZvciAoY29uc3QgW3ZhbHVlLCBsYWJlbF0gb2YgT2JqZWN0LmVudHJpZXMoTkVXX1RBQl9NT0RFX09QVElPTlMpKSB7XG5cdFx0XHRcdFx0XHRcdGRyb3Bkb3duLmFkZE9wdGlvbih2YWx1ZSwgbGFiZWwpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0ZHJvcGRvd25cblx0XHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm5ld1RhYk1vZGUpXG5cdFx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5uZXdUYWJNb2RlID0gdmFsdWUgYXMgTmV3VGFiTW9kZTtcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblxuXHRcdFx0Ly8gVXNlIGRpZmZlcmVudCBmaWxlIGZvciBuZXcgdGFicyB0b2dnbGVcblx0XHRcdHRhYkdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcblx0XHRcdFx0c2V0dGluZ1xuXHRcdFx0XHRcdC5zZXROYW1lKCdVc2UgZGlmZmVyZW50IGhvbWUgYmFzZSBmb3IgbmV3IHRhYnMnKVxuXHRcdFx0XHRcdC5zZXREZXNjKCdDb25maWd1cmUgYSBkaWZmZXJlbnQgaG9tZSBiYXNlIHRvIG9wZW4gZm9yIG5ldyB0YWJzIChpbnN0ZWFkIG9mIHRoZSBtYWluIGhvbWUgYmFzZSknKVxuXHRcdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xuXHRcdFx0XHRcdFx0dG9nZ2xlXG5cdFx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy51c2VEaWZmZXJlbnRGaWxlRm9yTmV3VGFiKVxuXHRcdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MudXNlRGlmZmVyZW50RmlsZUZvck5ld1RhYiA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gUHJlc2VydmUgc2Nyb2xsIHBvc2l0aW9uIGJlZm9yZSByZS1yZW5kZXJpbmdcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxDb250YWluZXIgPSBjb250YWluZXJFbC5jbG9zZXN0KCcudmVydGljYWwtdGFiLWNvbnRlbnQnKSB8fFxuXHRcdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyRWwuY2xvc2VzdCgnLnNldHRpbmdzLWNvbnRlbnQnKSB8fFxuXHRcdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyRWwucGFyZW50RWxlbWVudDtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxUb3AgPSBzY3JvbGxDb250YWluZXI/LnNjcm9sbFRvcCB8fCAwO1xuXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5kaXNwbGF5KCk7IC8vIFJlLXJlbmRlciB0byBzaG93L2hpZGUgZGVwZW5kZW50IHNldHRpbmdzXG5cblx0XHRcdFx0XHRcdFx0XHQvLyBSZXN0b3JlIHNjcm9sbCBwb3NpdGlvbiBhZnRlciByZW5kZXJpbmdcblx0XHRcdFx0XHRcdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKHNjcm9sbENvbnRhaW5lcikge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsVG9wO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBTaG93IG5ldyB0YWIgY29uZmlndXJhdGlvbiBpZiBlbmFibGVkIChhbHdheXMgZGVza3RvcCBzZXR0aW5ncylcblx0XHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy51c2VEaWZmZXJlbnRGaWxlRm9yTmV3VGFiKSB7XG5cdFx0XHRcdGNvbnN0IGRlc2t0b3BUeXBlID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MubmV3VGFiVHlwZSB8fCBIb21lQmFzZVR5cGUuRmlsZTtcblx0XHRcdFx0Y29uc3QgZGVza3RvcFZhbHVlID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MubmV3VGFiVmFsdWUgfHwgJyc7XG5cblx0XHRcdFx0Ly8gTmV3IHRhYiB0eXBlIGRyb3Bkb3duXG5cdFx0XHRcdHRhYkdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcblx0XHRcdFx0XHRzZXR0aW5nXG5cdFx0XHRcdFx0XHQuc2V0TmFtZSgnTmV3IHRhYiB0eXBlJylcblx0XHRcdFx0XHRcdC5zZXREZXNjKCdXaGF0IHRvIG9wZW4gZm9yIG5ldyB0YWJzJylcblx0XHRcdFx0XHRcdC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcblx0XHRcdFx0XHRcdFx0bGV0IHBsdWdpbkRpc2FibGVkID0gZmFsc2U7XG5cblx0XHRcdFx0XHRcdFx0Zm9yIChjb25zdCB0eXBlIG9mIE9iamVjdC52YWx1ZXMoSG9tZUJhc2VUeXBlKSkge1xuXHRcdFx0XHRcdFx0XHRcdGlmICghdGhpcy5wbHVnaW4uaGFzUmVxdWlyZWRQbHVnaW4odHlwZSkpIHtcblx0XHRcdFx0XHRcdFx0XHRcdC8vIElmIGN1cnJlbnQgdHlwZSBpcyBkaXNhYmxlZCwgbWFyayBpdCBidXQgc3RpbGwgYWxsb3cgaXRcblx0XHRcdFx0XHRcdFx0XHRcdGlmICh0eXBlID09PSBkZXNrdG9wVHlwZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRwbHVnaW5EaXNhYmxlZCA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGRyb3Bkb3duLmFkZE9wdGlvbih0eXBlLCB0eXBlKTtcblx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIEFkZCBkaXNhYmxlZCBvcHRpb25cblx0XHRcdFx0XHRcdFx0XHRcdFx0ZHJvcGRvd24uc2VsZWN0RWwuY3JlYXRlRWwoJ29wdGlvbicsIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0ZXh0OiB0eXBlLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGF0dHI6IHsgZGlzYWJsZWQ6ICd0cnVlJyB9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0ZHJvcGRvd24uYWRkT3B0aW9uKHR5cGUsIHR5cGUpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdGRyb3Bkb3duXG5cdFx0XHRcdFx0XHRcdFx0LnNldFZhbHVlKGRlc2t0b3BUeXBlKVxuXHRcdFx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm5ld1RhYlR5cGUgPSB2YWx1ZSBhcyBIb21lQmFzZVR5cGU7XG5cdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gUmUtcmVuZGVyIHRvIHNob3cvaGlkZSB2YWx1ZSBpbnB1dFxuXHRcdFx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsQ29udGFpbmVyID0gY29udGFpbmVyRWwuY2xvc2VzdCgnLnZlcnRpY2FsLXRhYi1jb250ZW50JykgfHxcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyRWwuY2xvc2VzdCgnLnNldHRpbmdzLWNvbnRlbnQnKSB8fFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjb250YWluZXJFbC5wYXJlbnRFbGVtZW50O1xuXHRcdFx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsVG9wID0gc2Nyb2xsQ29udGFpbmVyPy5zY3JvbGxUb3AgfHwgMDtcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMuZGlzcGxheSgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHNjcm9sbENvbnRhaW5lcikge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3AgPSBzY3JvbGxUb3A7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0XHRcdC8vIFNob3cgd2FybmluZyBpZiBjdXJyZW50IHR5cGUgcmVxdWlyZXMgYSBkaXNhYmxlZCBwbHVnaW5cblx0XHRcdFx0XHRcdFx0aWYgKHBsdWdpbkRpc2FibGVkKSB7XG5cdFx0XHRcdFx0XHRcdFx0c2V0dGluZy5kZXNjRWwuY3JlYXRlRGl2KHtcblx0XHRcdFx0XHRcdFx0XHRcdHRleHQ6ICdUaGUgcmVxdWlyZWQgcGx1Z2luIGhhcyBub3QgYmVlbiBlbmFibGVkIG9yIGNvbmZpZ3VyZWQgZm9yIHRoaXMgdHlwZS4nLFxuXHRcdFx0XHRcdFx0XHRcdFx0Y2xzOiAnbW9kLXdhcm5pbmcnXG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHQvLyBWYWx1ZSBpbnB1dCAoY29uZGl0aW9uYWwgb24gdHlwZSlcblx0XHRcdFx0aWYgKCFVTkNIQU5HRUFCTEVfVFlQRVMuaW5jbHVkZXMoZGVza3RvcFR5cGUpKSB7XG5cdFx0XHRcdFx0dGFiR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xuXHRcdFx0XHRcdFx0bGV0IGRlc2MgPSAnJztcblx0XHRcdFx0XHRcdGxldCBwbGFjZWhvbGRlciA9ICcnO1xuXG5cdFx0XHRcdFx0XHRpZiAoZGVza3RvcFR5cGUgPT09IEhvbWVCYXNlVHlwZS5GaWxlKSB7XG5cdFx0XHRcdFx0XHRcdGRlc2MgPSAnVGhlIGZpbGUgdG8gb3BlbiBmb3IgbmV3IHRhYnMgKHN1cHBvcnRzIC5tZCwgLm1keCwgLmNhbnZhcywgLmJhc2UpJztcblx0XHRcdFx0XHRcdFx0cGxhY2Vob2xkZXIgPSAnUGF0aCB0byBuZXcgdGFiIGZpbGUnO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmIChkZXNrdG9wVHlwZSA9PT0gSG9tZUJhc2VUeXBlLldvcmtzcGFjZSkge1xuXHRcdFx0XHRcdFx0XHRkZXNjID0gJ1RoZSB3b3Jrc3BhY2UgdG8gbG9hZCBmb3IgbmV3IHRhYnMnO1xuXHRcdFx0XHRcdFx0XHRwbGFjZWhvbGRlciA9ICdXb3Jrc3BhY2UgbmFtZSc7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGRlc2t0b3BUeXBlID09PSBIb21lQmFzZVR5cGUuUmFuZG9tRm9sZGVyKSB7XG5cdFx0XHRcdFx0XHRcdGRlc2MgPSAnVGhlIGZvbGRlciB0byBwaWNrIGEgcmFuZG9tIGZpbGUgZnJvbSBmb3IgbmV3IHRhYnMnO1xuXHRcdFx0XHRcdFx0XHRwbGFjZWhvbGRlciA9ICdGb2xkZXIgcGF0aCc7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGRlc2t0b3BUeXBlID09PSBIb21lQmFzZVR5cGUuSm91cm5hbCkge1xuXHRcdFx0XHRcdFx0XHRkZXNjID0gJ1RoZSBqb3VybmFsIG5hbWUgZm9yIG5ldyB0YWJzJztcblx0XHRcdFx0XHRcdFx0cGxhY2Vob2xkZXIgPSAnSm91cm5hbCBuYW1lJztcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0c2V0dGluZ1xuXHRcdFx0XHRcdFx0XHQuc2V0TmFtZShkZXNrdG9wVHlwZSA9PT0gSG9tZUJhc2VUeXBlLkZpbGUgPyAnTmV3IHRhYiBmaWxlJyA6XG5cdFx0XHRcdFx0XHRcdFx0ZGVza3RvcFR5cGUgPT09IEhvbWVCYXNlVHlwZS5Xb3Jrc3BhY2UgPyAnTmV3IHRhYiB3b3Jrc3BhY2UnIDpcblx0XHRcdFx0XHRcdFx0XHRcdGRlc2t0b3BUeXBlID09PSBIb21lQmFzZVR5cGUuUmFuZG9tRm9sZGVyID8gJ05ldyB0YWIgZm9sZGVyJyA6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGRlc2t0b3BUeXBlID09PSBIb21lQmFzZVR5cGUuSm91cm5hbCA/ICdOZXcgdGFiIGpvdXJuYWwnIDogJ05ldyB0YWIgdmFsdWUnKVxuXHRcdFx0XHRcdFx0XHQuc2V0RGVzYyhkZXNjKVxuXHRcdFx0XHRcdFx0XHQuYWRkVGV4dCgodGV4dCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdC8vIEFkZCBhcHByb3ByaWF0ZSBzdWdnZXN0ZXJcblx0XHRcdFx0XHRcdFx0XHRpZiAoZGVza3RvcFR5cGUgPT09IEhvbWVCYXNlVHlwZS5GaWxlKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRuZXcgRmlsZVBhdGhTdWdnZXN0KHRoaXMuYXBwLCB0ZXh0LmlucHV0RWwpO1xuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoZGVza3RvcFR5cGUgPT09IEhvbWVCYXNlVHlwZS5Xb3Jrc3BhY2UpIHtcblx0XHRcdFx0XHRcdFx0XHRcdG5ldyBXb3Jrc3BhY2VTdWdnZXN0KHRoaXMuYXBwLCB0ZXh0LmlucHV0RWwpO1xuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoZGVza3RvcFR5cGUgPT09IEhvbWVCYXNlVHlwZS5SYW5kb21Gb2xkZXIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdG5ldyBGb2xkZXJTdWdnZXN0KHRoaXMuYXBwLCB0ZXh0LmlucHV0RWwpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdHRleHRcblx0XHRcdFx0XHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihwbGFjZWhvbGRlcilcblx0XHRcdFx0XHRcdFx0XHRcdC5zZXRWYWx1ZShkZXNrdG9wVmFsdWUgfHwgJycpXG5cdFx0XHRcdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm5ld1RhYlZhbHVlID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gTGVnYWN5IFwiS2VlcCBleGlzdGluZyB0YWJzXCIgLSBrZXB0IGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5IGJ1dCBoaWRkZW5cblx0XHQvLyAoZnVuY3Rpb25hbGl0eSBub3cgaGFuZGxlZCBieSBcIk9wZW5pbmcgbW9kZSAoc3RhcnR1cClcIilcblxuXHRcdC8vIFVJIEZlYXR1cmVzIFNldHRpbmdzXG5cdFx0Y29uc3QgdWlHcm91cCA9IGNyZWF0ZVNldHRpbmdzR3JvdXAoY29udGFpbmVyRWwsICdVSSBGZWF0dXJlcycsICdob21lLWJhc2UnKTtcblxuXHRcdHVpR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xuXHRcdFx0c2V0dGluZ1xuXHRcdFx0XHQuc2V0TmFtZSgnU3RpY2t5IGhvbWUgaWNvbicpXG5cdFx0XHRcdC5zZXREZXNjKCdTaG93IGEgaG9tZSBpY29uIGluIHRoZSB0YWIgYmFyIHRoYXQgc3RheXMgcGlubmVkIHRvIHRoZSBsZWZ0IChkZXNrdG9wIG9ubHkpJylcblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XG5cdFx0XHRcdFx0dG9nZ2xlXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1N0aWNreUhvbWVJY29uKVxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93U3RpY2t5SG9tZUljb24gPSB2YWx1ZTtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnVwZGF0ZVN0aWNreVRhYkljb24oKTtcblxuXHRcdFx0XHRcdFx0XHQvLyBQcmVzZXJ2ZSBzY3JvbGwgcG9zaXRpb24gYmVmb3JlIHJlLXJlbmRlcmluZ1xuXHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxDb250YWluZXIgPSBjb250YWluZXJFbC5jbG9zZXN0KCcudmVydGljYWwtdGFiLWNvbnRlbnQnKSB8fFxuXHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lckVsLmNsb3Nlc3QoJy5zZXR0aW5ncy1jb250ZW50JykgfHxcblx0XHRcdFx0XHRcdFx0XHRjb250YWluZXJFbC5wYXJlbnRFbGVtZW50O1xuXHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxUb3AgPSBzY3JvbGxDb250YWluZXI/LnNjcm9sbFRvcCB8fCAwO1xuXG5cdFx0XHRcdFx0XHRcdHRoaXMuZGlzcGxheSgpOyAvLyBSZS1yZW5kZXIgdG8gc2hvdy9oaWRlIGRlcGVuZGVudCBzZXR0aW5nXG5cblx0XHRcdFx0XHRcdFx0Ly8gUmVzdG9yZSBzY3JvbGwgcG9zaXRpb24gYWZ0ZXIgcmVuZGVyaW5nXG5cdFx0XHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKHNjcm9sbENvbnRhaW5lcikge1xuXHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFRvcDtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cdFx0Ly8gT25seSBzaG93IHN0aWNreSBpY29uIHNldHRpbmdzIGlmIHN0aWNreSBpY29uIGlzIGVuYWJsZWRcblx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1N0aWNreUhvbWVJY29uKSB7XG5cdFx0XHR1aUdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcblx0XHRcdFx0c2V0dGluZ1xuXHRcdFx0XHRcdC5zZXROYW1lKCdJY29uJylcblx0XHRcdFx0XHQuc2V0RGVzYygnVGhlIGljb24gdG8gZGlzcGxheSBpbiB0aGUgc3RpY2t5IGhvbWUgaWNvbicpXG5cdFx0XHRcdFx0LmFkZEJ1dHRvbigoYnV0dG9uKSA9PiB7XG5cdFx0XHRcdFx0XHRjb25zdCBpY29uTmFtZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnN0aWNreUljb25OYW1lIHx8ICdob21lJztcblx0XHRcdFx0XHRcdGJ1dHRvblxuXHRcdFx0XHRcdFx0XHQuc2V0QnV0dG9uVGV4dCgnQ2hhbmdlIGljb24nKVxuXHRcdFx0XHRcdFx0XHQuc2V0SWNvbihpY29uTmFtZSlcblx0XHRcdFx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHBpY2tlciA9IG5ldyBJY29uUGlja2VyKFxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5hcHAsXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdGlja3lJY29uTmFtZSxcblx0XHRcdFx0XHRcdFx0XHRcdChpY29uOiBzdHJpbmcgfCBudWxsKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdGlja3lJY29uTmFtZSA9IGljb247XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gVXBkYXRlIHRoZSBpY29uIGRpc3BsYXlcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zdGlja3lUYWJTZXJ2aWNlLnVwZGF0ZSgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFJlLXJlbmRlciBzZXR0aW5ncyB0byB1cGRhdGUgYnV0dG9uIGljb25cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSkoKTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0XHRcdHBpY2tlci5vcGVuKCk7XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cblx0XHRcdHVpR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xuXHRcdFx0XHRzZXR0aW5nXG5cdFx0XHRcdFx0LnNldE5hbWUoJ0hpZGUgdGFiIGhlYWRlcicpXG5cdFx0XHRcdFx0LnNldERlc2MoJ0hpZGUgdGhlIHN0aWNreSBob21lIHRhYiBoZWFkZXIgd2hlbiBpdFxcJ3Mgb3BlbiwgdXNpbmcgdGhlIHN0aWNreSBpY29uIGFzIHRoZSB0YWIgaW5kaWNhdG9yJylcblx0XHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcblx0XHRcdFx0XHRcdHRvZ2dsZVxuXHRcdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlkZUhvbWVUYWJIZWFkZXIpXG5cdFx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWRlSG9tZVRhYkhlYWRlciA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnN0aWNreVRhYlNlcnZpY2UudXBkYXRlVGFiSGVhZGVycygpO1xuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXG5cdFx0Ly8gTW9iaWxlIFNldHRpbmdzXG5cdFx0Y29uc3QgbW9iaWxlR3JvdXAgPSBjcmVhdGVTZXR0aW5nc0dyb3VwKGNvbnRhaW5lckVsLCAnTW9iaWxlJywgJ2hvbWUtYmFzZScpO1xuXG5cdFx0bW9iaWxlR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xuXHRcdFx0c2V0dGluZ1xuXHRcdFx0XHQuc2V0TmFtZSgnU2VwYXJhdGUgbW9iaWxlIGhvbWUgYmFzZScpXG5cdFx0XHRcdC5zZXREZXNjKCdVc2UgYSBkaWZmZXJlbnQgaG9tZSBiYXNlIG9uIG1vYmlsZSBkZXZpY2VzJylcblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XG5cdFx0XHRcdFx0dG9nZ2xlXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2VwYXJhdGVNb2JpbGUpXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnNlcGFyYXRlTW9iaWxlID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXG5cdFx0XHRcdFx0XHRcdC8vIFJlLXJlbmRlciB0byBzaG93IG1vYmlsZSBzZXR0aW5nc1xuXHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxDb250YWluZXIgPSBjb250YWluZXJFbC5jbG9zZXN0KCcudmVydGljYWwtdGFiLWNvbnRlbnQnKSB8fFxuXHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lckVsLmNsb3Nlc3QoJy5zZXR0aW5ncy1jb250ZW50JykgfHxcblx0XHRcdFx0XHRcdFx0XHRjb250YWluZXJFbC5wYXJlbnRFbGVtZW50O1xuXHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxUb3AgPSBzY3JvbGxDb250YWluZXI/LnNjcm9sbFRvcCB8fCAwO1xuXHRcdFx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTtcblx0XHRcdFx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoc2Nyb2xsQ29udGFpbmVyKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsVG9wO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cdFx0fSk7XG5cblx0XHQvLyBTaG93IG1vYmlsZS1zcGVjaWZpYyBzZXR0aW5ncyBpZiBzZXBhcmF0ZSBtb2JpbGUgaXMgZW5hYmxlZFxuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zZXBhcmF0ZU1vYmlsZSkge1xuXHRcdFx0bW9iaWxlR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xuXHRcdFx0XHRzZXR0aW5nXG5cdFx0XHRcdFx0LnNldE5hbWUoJ01vYmlsZSBob21lIGJhc2UnKVxuXHRcdFx0XHRcdC5zZXREZXNjKCdXaGF0IHRvIG9wZW4gYXMgeW91ciBob21lIGJhc2Ugb24gbW9iaWxlJylcblx0XHRcdFx0XHQuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XG5cdFx0XHRcdFx0XHRjb25zdCBtb2JpbGVUeXBlID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9iaWxlSG9tZUJhc2VUeXBlIHx8IEhvbWVCYXNlVHlwZS5GaWxlO1xuXHRcdFx0XHRcdFx0bGV0IHBsdWdpbkRpc2FibGVkID0gZmFsc2U7XG5cblx0XHRcdFx0XHRcdGZvciAoY29uc3QgdHlwZSBvZiBPYmplY3QudmFsdWVzKEhvbWVCYXNlVHlwZSkpIHtcblx0XHRcdFx0XHRcdFx0aWYgKCF0aGlzLnBsdWdpbi5oYXNSZXF1aXJlZFBsdWdpbih0eXBlKSkge1xuXHRcdFx0XHRcdFx0XHRcdC8vIElmIGN1cnJlbnQgdHlwZSBpcyBkaXNhYmxlZCwgbWFyayBpdCBidXQgc3RpbGwgYWxsb3cgaXRcblx0XHRcdFx0XHRcdFx0XHRpZiAodHlwZSA9PT0gbW9iaWxlVHlwZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0cGx1Z2luRGlzYWJsZWQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHRcdFx0ZHJvcGRvd24uYWRkT3B0aW9uKHR5cGUsIHR5cGUpO1xuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBBZGQgZGlzYWJsZWQgb3B0aW9uXG5cdFx0XHRcdFx0XHRcdFx0XHRkcm9wZG93bi5zZWxlY3RFbC5jcmVhdGVFbCgnb3B0aW9uJywge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0ZXh0OiB0eXBlLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRhdHRyOiB7IGRpc2FibGVkOiAndHJ1ZScgfVxuXHRcdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0ZHJvcGRvd24uYWRkT3B0aW9uKHR5cGUsIHR5cGUpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGRyb3Bkb3duXG5cdFx0XHRcdFx0XHRcdC5zZXRWYWx1ZShtb2JpbGVUeXBlKVxuXHRcdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubW9iaWxlSG9tZUJhc2VUeXBlID0gdmFsdWUgYXMgSG9tZUJhc2VUeXBlO1xuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsQ29udGFpbmVyID0gY29udGFpbmVyRWwuY2xvc2VzdCgnLnZlcnRpY2FsLXRhYi1jb250ZW50JykgfHxcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lckVsLmNsb3Nlc3QoJy5zZXR0aW5ncy1jb250ZW50JykgfHxcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lckVsLnBhcmVudEVsZW1lbnQ7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsVG9wID0gc2Nyb2xsQ29udGFpbmVyPy5zY3JvbGxUb3AgfHwgMDtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTtcblx0XHRcdFx0XHRcdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKHNjcm9sbENvbnRhaW5lcikge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsVG9wO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdFx0Ly8gU2hvdyB3YXJuaW5nIGlmIGN1cnJlbnQgdHlwZSByZXF1aXJlcyBhIGRpc2FibGVkIHBsdWdpblxuXHRcdFx0XHRcdFx0aWYgKHBsdWdpbkRpc2FibGVkKSB7XG5cdFx0XHRcdFx0XHRcdHNldHRpbmcuZGVzY0VsLmNyZWF0ZURpdih7XG5cdFx0XHRcdFx0XHRcdFx0dGV4dDogJ1RoZSByZXF1aXJlZCBwbHVnaW4gaGFzIG5vdCBiZWVuIGVuYWJsZWQgb3IgY29uZmlndXJlZCBmb3IgdGhpcyB0eXBlLicsXG5cdFx0XHRcdFx0XHRcdFx0Y2xzOiAnbW9kLXdhcm5pbmcnXG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cblx0XHRcdGlmICghVU5DSEFOR0VBQkxFX1RZUEVTLmluY2x1ZGVzKHRoaXMucGx1Z2luLnNldHRpbmdzLm1vYmlsZUhvbWVCYXNlVHlwZSkpIHtcblx0XHRcdFx0bW9iaWxlR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IG1vYmlsZVR5cGUgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2JpbGVIb21lQmFzZVR5cGU7XG5cdFx0XHRcdFx0bGV0IGRlc2MgPSAnJztcblx0XHRcdFx0XHRsZXQgcGxhY2Vob2xkZXIgPSAnJztcblxuXHRcdFx0XHRcdGlmIChtb2JpbGVUeXBlID09PSBIb21lQmFzZVR5cGUuRmlsZSkge1xuXHRcdFx0XHRcdFx0ZGVzYyA9ICdUaGUgZmlsZSB0byBvcGVuIGFzIHlvdXIgaG9tZSBiYXNlIG9uIG1vYmlsZSc7XG5cdFx0XHRcdFx0XHRwbGFjZWhvbGRlciA9ICdQYXRoIHRvIGhvbWUgYmFzZSBmaWxlJztcblx0XHRcdFx0XHR9IGVsc2UgaWYgKG1vYmlsZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5Xb3Jrc3BhY2UpIHtcblx0XHRcdFx0XHRcdGRlc2MgPSAnVGhlIHdvcmtzcGFjZSB0byBsb2FkIGFzIHlvdXIgaG9tZSBiYXNlIG9uIG1vYmlsZSc7XG5cdFx0XHRcdFx0XHRwbGFjZWhvbGRlciA9ICdXb3Jrc3BhY2UgbmFtZSc7XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChtb2JpbGVUeXBlID09PSBIb21lQmFzZVR5cGUuUmFuZG9tRm9sZGVyKSB7XG5cdFx0XHRcdFx0XHRkZXNjID0gJ1RoZSBmb2xkZXIgdG8gcGljayBhIHJhbmRvbSBmaWxlIGZyb20gb24gbW9iaWxlJztcblx0XHRcdFx0XHRcdHBsYWNlaG9sZGVyID0gJ0ZvbGRlciBwYXRoJztcblx0XHRcdFx0XHR9IGVsc2UgaWYgKG1vYmlsZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5Kb3VybmFsKSB7XG5cdFx0XHRcdFx0XHRkZXNjID0gJ1RoZSBqb3VybmFsIG5hbWUgZm9yIG1vYmlsZSc7XG5cdFx0XHRcdFx0XHRwbGFjZWhvbGRlciA9ICdKb3VybmFsIG5hbWUnO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHNldHRpbmdcblx0XHRcdFx0XHRcdC5zZXROYW1lKG1vYmlsZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5GaWxlID8gJ01vYmlsZSBmaWxlJyA6XG5cdFx0XHRcdFx0XHRcdG1vYmlsZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5Xb3Jrc3BhY2UgPyAnTW9iaWxlIHdvcmtzcGFjZScgOlxuXHRcdFx0XHRcdFx0XHRcdG1vYmlsZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5SYW5kb21Gb2xkZXIgPyAnTW9iaWxlIGZvbGRlcicgOlxuXHRcdFx0XHRcdFx0XHRcdFx0bW9iaWxlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLkpvdXJuYWwgPyAnTW9iaWxlIGpvdXJuYWwnIDogJ01vYmlsZSB2YWx1ZScpXG5cdFx0XHRcdFx0XHQuc2V0RGVzYyhkZXNjKVxuXHRcdFx0XHRcdFx0LmFkZFRleHQoKHRleHQpID0+IHtcblx0XHRcdFx0XHRcdFx0aWYgKG1vYmlsZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5GaWxlKSB7XG5cdFx0XHRcdFx0XHRcdFx0bmV3IEZpbGVQYXRoU3VnZ2VzdCh0aGlzLmFwcCwgdGV4dC5pbnB1dEVsKTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmIChtb2JpbGVUeXBlID09PSBIb21lQmFzZVR5cGUuV29ya3NwYWNlKSB7XG5cdFx0XHRcdFx0XHRcdFx0bmV3IFdvcmtzcGFjZVN1Z2dlc3QodGhpcy5hcHAsIHRleHQuaW5wdXRFbCk7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAobW9iaWxlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLlJhbmRvbUZvbGRlcikge1xuXHRcdFx0XHRcdFx0XHRcdG5ldyBGb2xkZXJTdWdnZXN0KHRoaXMuYXBwLCB0ZXh0LmlucHV0RWwpO1xuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0dGV4dFxuXHRcdFx0XHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihwbGFjZWhvbGRlcilcblx0XHRcdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubW9iaWxlSG9tZUJhc2VWYWx1ZSB8fCAnJylcblx0XHRcdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2JpbGVIb21lQmFzZVZhbHVlID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBSZXBsYWNlIG1vYmlsZSBuZXcgdGFiIGJ1dHRvbiAoYWx3YXlzIGF2YWlsYWJsZSwgbm90IGRlcGVuZGVudCBvbiBcIlVzZSBkaWZmZXJlbnQgaG9tZSBiYXNlIGZvciBuZXcgdGFic1wiKVxuXHRcdG1vYmlsZUdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcblx0XHRcdHNldHRpbmdcblx0XHRcdFx0LnNldE5hbWUoJ1JlcGxhY2UgbW9iaWxlIG5ldyB0YWIgYnV0dG9uJylcblx0XHRcdFx0LnNldERlc2MoJ0NoYW5nZSB0aGUgbW9iaWxlIG5ldyB0YWIgYnV0dG9uIHRvIGEgaG9tZSBpY29uJylcblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XG5cdFx0XHRcdFx0dG9nZ2xlXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucmVwbGFjZU1vYmlsZU5ld1RhYilcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MucmVwbGFjZU1vYmlsZU5ld1RhYiA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4udXBkYXRlTW9iaWxlQnV0dG9uKCk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cdFx0fSk7XG5cblx0XHQvLyBNb2JpbGUgbmV3IHRhYiBzZXR0aW5ncyAob25seSBzaG93IGlmIFwiVXNlIGRpZmZlcmVudCBmaWxlIGZvciBuZXcgdGFic1wiIGlzIGVuYWJsZWQpXG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnVzZURpZmZlcmVudEZpbGVGb3JOZXdUYWIpIHtcblx0XHRcdC8vIFNlcGFyYXRlIG1vYmlsZSBuZXcgdGFiIHRvZ2dsZVxuXHRcdFx0bW9iaWxlR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xuXHRcdFx0XHRzZXR0aW5nXG5cdFx0XHRcdFx0LnNldE5hbWUoJ1NlcGFyYXRlIG1vYmlsZSBuZXcgdGFiJylcblx0XHRcdFx0XHQuc2V0RGVzYygnVXNlIGEgZGlmZmVyZW50IG5ldyB0YWIgZmlsZSBvbiBtb2JpbGUgZGV2aWNlcycpXG5cdFx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XG5cdFx0XHRcdFx0XHR0b2dnbGVcblx0XHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm5ld1RhYlNlcGFyYXRlTW9iaWxlKVxuXHRcdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubmV3VGFiU2VwYXJhdGVNb2JpbGUgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblxuXHRcdFx0XHRcdFx0XHRcdC8vIFJlLXJlbmRlciB0byBzaG93IG1vYmlsZSBzZXR0aW5nc1xuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbENvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNsb3Nlc3QoJy52ZXJ0aWNhbC10YWItY29udGVudCcpIHx8XG5cdFx0XHRcdFx0XHRcdFx0XHRjb250YWluZXJFbC5jbG9zZXN0KCcuc2V0dGluZ3MtY29udGVudCcpIHx8XG5cdFx0XHRcdFx0XHRcdFx0XHRjb250YWluZXJFbC5wYXJlbnRFbGVtZW50O1xuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbFRvcCA9IHNjcm9sbENvbnRhaW5lcj8uc2Nyb2xsVG9wIHx8IDA7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5kaXNwbGF5KCk7XG5cdFx0XHRcdFx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChzY3JvbGxDb250YWluZXIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFRvcDtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblxuXHRcdFx0Ly8gU2hvdyBtb2JpbGUtc3BlY2lmaWMgbmV3IHRhYiBzZXR0aW5ncyBpZiBzZXBhcmF0ZSBtb2JpbGUgaXMgZW5hYmxlZFxuXHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLm5ld1RhYlNlcGFyYXRlTW9iaWxlKSB7XG5cdFx0XHRcdGNvbnN0IG1vYmlsZVR5cGUgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2JpbGVOZXdUYWJUeXBlIHx8IEhvbWVCYXNlVHlwZS5GaWxlO1xuXHRcdFx0XHRjb25zdCBtb2JpbGVWYWx1ZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLm1vYmlsZU5ld1RhYlZhbHVlIHx8ICcnO1xuXG5cdFx0XHRcdC8vIE1vYmlsZSBuZXcgdGFiIHR5cGUgZHJvcGRvd25cblx0XHRcdFx0bW9iaWxlR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xuXHRcdFx0XHRcdHNldHRpbmdcblx0XHRcdFx0XHRcdC5zZXROYW1lKCdNb2JpbGUgbmV3IHRhYiB0eXBlJylcblx0XHRcdFx0XHRcdC5zZXREZXNjKCdXaGF0IHRvIG9wZW4gZm9yIG5ldyB0YWJzIG9uIG1vYmlsZScpXG5cdFx0XHRcdFx0XHQuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGxldCBwbHVnaW5EaXNhYmxlZCA9IGZhbHNlO1xuXG5cdFx0XHRcdFx0XHRcdGZvciAoY29uc3QgdHlwZSBvZiBPYmplY3QudmFsdWVzKEhvbWVCYXNlVHlwZSkpIHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoIXRoaXMucGx1Z2luLmhhc1JlcXVpcmVkUGx1Z2luKHR5cGUpKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBJZiBjdXJyZW50IHR5cGUgaXMgZGlzYWJsZWQsIG1hcmsgaXQgYnV0IHN0aWxsIGFsbG93IGl0XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAodHlwZSA9PT0gbW9iaWxlVHlwZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRwbHVnaW5EaXNhYmxlZCA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGRyb3Bkb3duLmFkZE9wdGlvbih0eXBlLCB0eXBlKTtcblx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIEFkZCBkaXNhYmxlZCBvcHRpb25cblx0XHRcdFx0XHRcdFx0XHRcdFx0ZHJvcGRvd24uc2VsZWN0RWwuY3JlYXRlRWwoJ29wdGlvbicsIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0ZXh0OiB0eXBlLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGF0dHI6IHsgZGlzYWJsZWQ6ICd0cnVlJyB9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0ZHJvcGRvd24uYWRkT3B0aW9uKHR5cGUsIHR5cGUpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdGRyb3Bkb3duXG5cdFx0XHRcdFx0XHRcdFx0LnNldFZhbHVlKG1vYmlsZVR5cGUpXG5cdFx0XHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubW9iaWxlTmV3VGFiVHlwZSA9IHZhbHVlIGFzIEhvbWVCYXNlVHlwZTtcblx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxDb250YWluZXIgPSBjb250YWluZXJFbC5jbG9zZXN0KCcudmVydGljYWwtdGFiLWNvbnRlbnQnKSB8fFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjb250YWluZXJFbC5jbG9zZXN0KCcuc2V0dGluZ3MtY29udGVudCcpIHx8XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lckVsLnBhcmVudEVsZW1lbnQ7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxUb3AgPSBzY3JvbGxDb250YWluZXI/LnNjcm9sbFRvcCB8fCAwO1xuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5kaXNwbGF5KCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoc2Nyb2xsQ29udGFpbmVyKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFRvcDtcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHRcdFx0Ly8gU2hvdyB3YXJuaW5nIGlmIGN1cnJlbnQgdHlwZSByZXF1aXJlcyBhIGRpc2FibGVkIHBsdWdpblxuXHRcdFx0XHRcdFx0XHRpZiAocGx1Z2luRGlzYWJsZWQpIHtcblx0XHRcdFx0XHRcdFx0XHRzZXR0aW5nLmRlc2NFbC5jcmVhdGVEaXYoe1xuXHRcdFx0XHRcdFx0XHRcdFx0dGV4dDogJ1RoZSByZXF1aXJlZCBwbHVnaW4gaGFzIG5vdCBiZWVuIGVuYWJsZWQgb3IgY29uZmlndXJlZCBmb3IgdGhpcyB0eXBlLicsXG5cdFx0XHRcdFx0XHRcdFx0XHRjbHM6ICdtb2Qtd2FybmluZydcblx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdC8vIE1vYmlsZSB2YWx1ZSBpbnB1dCAoY29uZGl0aW9uYWwgb24gdHlwZSlcblx0XHRcdFx0aWYgKCFVTkNIQU5HRUFCTEVfVFlQRVMuaW5jbHVkZXMobW9iaWxlVHlwZSkpIHtcblx0XHRcdFx0XHRtb2JpbGVHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XG5cdFx0XHRcdFx0XHRsZXQgZGVzYyA9ICcnO1xuXHRcdFx0XHRcdFx0bGV0IHBsYWNlaG9sZGVyID0gJyc7XG5cblx0XHRcdFx0XHRcdGlmIChtb2JpbGVUeXBlID09PSBIb21lQmFzZVR5cGUuRmlsZSkge1xuXHRcdFx0XHRcdFx0XHRkZXNjID0gJ1RoZSBmaWxlIHRvIG9wZW4gZm9yIG5ldyB0YWJzIG9uIG1vYmlsZSc7XG5cdFx0XHRcdFx0XHRcdHBsYWNlaG9sZGVyID0gJ1BhdGggdG8gbW9iaWxlIG5ldyB0YWIgZmlsZSc7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKG1vYmlsZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5Xb3Jrc3BhY2UpIHtcblx0XHRcdFx0XHRcdFx0ZGVzYyA9ICdUaGUgd29ya3NwYWNlIHRvIGxvYWQgZm9yIG5ldyB0YWJzIG9uIG1vYmlsZSc7XG5cdFx0XHRcdFx0XHRcdHBsYWNlaG9sZGVyID0gJ1dvcmtzcGFjZSBuYW1lJztcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAobW9iaWxlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLlJhbmRvbUZvbGRlcikge1xuXHRcdFx0XHRcdFx0XHRkZXNjID0gJ1RoZSBmb2xkZXIgdG8gcGljayBhIHJhbmRvbSBmaWxlIGZyb20gZm9yIG5ldyB0YWJzIG9uIG1vYmlsZSc7XG5cdFx0XHRcdFx0XHRcdHBsYWNlaG9sZGVyID0gJ0ZvbGRlciBwYXRoJztcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAobW9iaWxlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLkpvdXJuYWwpIHtcblx0XHRcdFx0XHRcdFx0ZGVzYyA9ICdUaGUgam91cm5hbCBuYW1lIGZvciBuZXcgdGFicyBvbiBtb2JpbGUnO1xuXHRcdFx0XHRcdFx0XHRwbGFjZWhvbGRlciA9ICdKb3VybmFsIG5hbWUnO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRzZXR0aW5nXG5cdFx0XHRcdFx0XHRcdC5zZXROYW1lKG1vYmlsZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5GaWxlID8gJ01vYmlsZSBuZXcgdGFiIGZpbGUnIDpcblx0XHRcdFx0XHRcdFx0XHRtb2JpbGVUeXBlID09PSBIb21lQmFzZVR5cGUuV29ya3NwYWNlID8gJ01vYmlsZSBuZXcgdGFiIHdvcmtzcGFjZScgOlxuXHRcdFx0XHRcdFx0XHRcdFx0bW9iaWxlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLlJhbmRvbUZvbGRlciA/ICdNb2JpbGUgbmV3IHRhYiBmb2xkZXInIDpcblx0XHRcdFx0XHRcdFx0XHRcdFx0bW9iaWxlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLkpvdXJuYWwgPyAnTW9iaWxlIG5ldyB0YWIgam91cm5hbCcgOiAnTW9iaWxlIG5ldyB0YWIgdmFsdWUnKVxuXHRcdFx0XHRcdFx0XHQuc2V0RGVzYyhkZXNjKVxuXHRcdFx0XHRcdFx0XHQuYWRkVGV4dCgodGV4dCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdGlmIChtb2JpbGVUeXBlID09PSBIb21lQmFzZVR5cGUuRmlsZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0bmV3IEZpbGVQYXRoU3VnZ2VzdCh0aGlzLmFwcCwgdGV4dC5pbnB1dEVsKTtcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKG1vYmlsZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5Xb3Jrc3BhY2UpIHtcblx0XHRcdFx0XHRcdFx0XHRcdG5ldyBXb3Jrc3BhY2VTdWdnZXN0KHRoaXMuYXBwLCB0ZXh0LmlucHV0RWwpO1xuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAobW9iaWxlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLlJhbmRvbUZvbGRlcikge1xuXHRcdFx0XHRcdFx0XHRcdFx0bmV3IEZvbGRlclN1Z2dlc3QodGhpcy5hcHAsIHRleHQuaW5wdXRFbCk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0dGV4dFxuXHRcdFx0XHRcdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKHBsYWNlaG9sZGVyKVxuXHRcdFx0XHRcdFx0XHRcdFx0LnNldFZhbHVlKG1vYmlsZVZhbHVlIHx8ICcnKVxuXHRcdFx0XHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2JpbGVOZXdUYWJWYWx1ZSA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEF1dG9tYXRpb24gU2V0dGluZ3Ncblx0XHRjb25zdCBhdXRvbWF0aW9uR3JvdXAgPSBjcmVhdGVTZXR0aW5nc0dyb3VwKGNvbnRhaW5lckVsLCAnQXV0b21hdGlvbicsICdob21lLWJhc2UnKTtcblxuXHRcdGF1dG9tYXRpb25Hcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XG5cdFx0XHRjb25zdCBjb21tYW5kSWQgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb21tYW5kT25PcGVuO1xuXHRcdFx0Y29uc3QgY29tbWFuZCA9IGNvbW1hbmRJZCA/IGdldENvbW1hbmRCeUlkKHRoaXMuYXBwLCBjb21tYW5kSWQpIDogdW5kZWZpbmVkO1xuXHRcdFx0Y29uc3QgZGlzcGxheVZhbHVlID0gY29tbWFuZCA/IGNvbW1hbmQubmFtZSA6IGNvbW1hbmRJZDtcblxuXHRcdFx0c2V0dGluZ1xuXHRcdFx0XHQuc2V0TmFtZSgnQ29tbWFuZCBvbiBvcGVuJylcblx0XHRcdFx0LnNldERlc2MoJ1J1biBhbiBPYnNpZGlhbiBjb21tYW5kIHdoZW4gb3BlbmluZyBob21lIGJhc2UnKVxuXHRcdFx0XHQuYWRkVGV4dCgodGV4dCkgPT4ge1xuXHRcdFx0XHRcdC8vIEFkZCBjb21tYW5kIHN1Z2dlc3RlclxuXHRcdFx0XHRcdG5ldyBDb21tYW5kU3VnZ2VzdCh0aGlzLmFwcCwgdGV4dC5pbnB1dEVsKTtcblxuXHRcdFx0XHRcdHRleHRcblx0XHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignU2VhcmNoIGZvciBhIGNvbW1hbmQuLi4nKVxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKGRpc3BsYXlWYWx1ZSB8fCAnJylcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY29tbWFuZE9uT3BlbiA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KVxuXHRcdFx0XHQuYWRkRXh0cmFCdXR0b24oKGJ0bikgPT4ge1xuXHRcdFx0XHRcdGJ0blxuXHRcdFx0XHRcdFx0LnNldEljb24oJ3gnKVxuXHRcdFx0XHRcdFx0LnNldFRvb2x0aXAoJ0NsZWFyIGNvbW1hbmQnKVxuXHRcdFx0XHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb21tYW5kT25PcGVuID0gJyc7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXG5cdFx0XHRcdFx0XHRcdC8vIFByZXNlcnZlIHNjcm9sbCBwb3NpdGlvbiBiZWZvcmUgcmUtcmVuZGVyaW5nXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbENvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNsb3Nlc3QoJy52ZXJ0aWNhbC10YWItY29udGVudCcpIHx8XG5cdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyRWwuY2xvc2VzdCgnLnNldHRpbmdzLWNvbnRlbnQnKSB8fFxuXHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lckVsLnBhcmVudEVsZW1lbnQ7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbFRvcCA9IHNjcm9sbENvbnRhaW5lcj8uc2Nyb2xsVG9wIHx8IDA7XG5cblx0XHRcdFx0XHRcdFx0dGhpcy5kaXNwbGF5KCk7XG5cblx0XHRcdFx0XHRcdFx0Ly8gUmVzdG9yZSBzY3JvbGwgcG9zaXRpb24gYWZ0ZXIgcmVuZGVyaW5nXG5cdFx0XHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKHNjcm9sbENvbnRhaW5lcikge1xuXHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFRvcDtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cdFx0YXV0b21hdGlvbkdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcblx0XHRcdHNldHRpbmdcblx0XHRcdFx0LnNldE5hbWUoJ1dhaXQgZm9yIGdpdCBzeW5jJylcblx0XHRcdFx0LnNldERlc2MoJ1dhaXQgYmVmb3JlIGNyZWF0aW5nIHBlcmlvZGljIG9yIGpvdXJuYWwgbm90ZXMgdG8gYWxsb3cgZ2l0IHN5bmMgdG8gZmluaXNoIHB1bGxpbmcgZXhpc3Rpbmcgbm90ZXMuIE9ubHkgYXBwbGllcyB3aGVuIGEgbm90ZSBkb2VzblxcJ3QgYWxyZWFkeSBleGlzdC4nKVxuXHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcblx0XHRcdFx0XHR0b2dnbGVcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy53YWl0Rm9yR2l0U3luYylcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Mud2FpdEZvckdpdFN5bmMgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdHRoaXMuZGlzcGxheSgpOyAvLyBSZS1yZW5kZXIgdG8gc2hvdy9oaWRlIHRpbWVvdXQgc2V0dGluZ1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLndhaXRGb3JHaXRTeW5jKSB7XG5cdFx0XHRhdXRvbWF0aW9uR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xuXHRcdFx0XHRzZXR0aW5nXG5cdFx0XHRcdFx0LnNldE5hbWUoJ0dpdCBzeW5jIHRpbWVvdXQgKHNlY29uZHMpJylcblx0XHRcdFx0XHQuc2V0RGVzYygnSG93IGxvbmcgdG8gd2FpdCBmb3IgZ2l0IHN5bmMgdG8gZmluaXNoIGJlZm9yZSBjcmVhdGluZyBhIG5ldyBub3RlJylcblx0XHRcdFx0XHQuYWRkVGV4dCgodGV4dCkgPT4ge1xuXHRcdFx0XHRcdFx0dGV4dC5pbnB1dEVsLnR5cGUgPSAnbnVtYmVyJztcblx0XHRcdFx0XHRcdHRleHRcblx0XHRcdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKCczJylcblx0XHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmdpdFN5bmNUaW1lb3V0Py50b1N0cmluZygpIHx8ICczJylcblx0XHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IG51bVZhbHVlID0gcGFyc2VJbnQodmFsdWUpO1xuXHRcdFx0XHRcdFx0XHRcdGlmICghaXNOYU4obnVtVmFsdWUpICYmIG51bVZhbHVlID49IDApIHtcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmdpdFN5bmNUaW1lb3V0ID0gbnVtVmFsdWU7XG5cdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG59XG4iLCAiLyoqXHJcbiAqIENvbXBhdGliaWxpdHkgdXRpbGl0aWVzIGZvciBzZXR0aW5nc1xyXG4gKiBQcm92aWRlcyBiYWNrd2FyZCBjb21wYXRpYmlsaXR5IGZvciBTZXR0aW5nR3JvdXAgKHJlcXVpcmVzIEFQSSAxLjExLjArKVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IFNldHRpbmcsIHJlcXVpcmVBcGlWZXJzaW9uIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgKiBhcyBPYnNpZGlhbk1vZHVsZSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG4vKipcclxuICogSW50ZXJmYWNlIHRoYXQgd29ya3Mgd2l0aCBib3RoIFNldHRpbmdHcm91cCBhbmQgZmFsbGJhY2sgY29udGFpbmVyXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFNldHRpbmdzQ29udGFpbmVyIHtcclxuXHRhZGRTZXR0aW5nKGNiOiAoc2V0dGluZzogU2V0dGluZykgPT4gdm9pZCk6IHZvaWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgc2V0dGluZ3MgY29udGFpbmVyIHRoYXQgdXNlcyBTZXR0aW5nR3JvdXAgaWYgYXZhaWxhYmxlIChBUEkgMS4xMS4wKyksXHJcbiAqIG90aGVyd2lzZSBmYWxscyBiYWNrIHRvIGNyZWF0aW5nIGEgaGVhZGluZyBhbmQgdXNpbmcgdGhlIGNvbnRhaW5lciBkaXJlY3RseS5cclxuICogXHJcbiAqIFVzZXMgcmVxdWlyZUFwaVZlcnNpb24oJzEuMTEuMCcpIHRvIGNoZWNrIGlmIFNldHRpbmdHcm91cCBpcyBhdmFpbGFibGUuXHJcbiAqIFRoaXMgaXMgdGhlIG9mZmljaWFsIE9ic2lkaWFuIEFQSSBtZXRob2QgZm9yIHZlcnNpb24gY2hlY2tpbmcuXHJcbiAqIFxyXG4gKiBAcGFyYW0gY29udGFpbmVyRWwgLSBUaGUgY29udGFpbmVyIGVsZW1lbnQgZm9yIHNldHRpbmdzXHJcbiAqIEBwYXJhbSBoZWFkaW5nIC0gVGhlIGhlYWRpbmcgdGV4dCBmb3IgdGhlIHNldHRpbmdzIGdyb3VwIChvcHRpb25hbClcclxuICogQHBhcmFtIG1hbmlmZXN0SWQgLSBUaGUgcGx1Z2luJ3MgbWFuaWZlc3QgSUQgZm9yIENTUyBzY29waW5nIChyZXF1aXJlZCBmb3IgZmFsbGJhY2sgbW9kZSlcclxuICogQHJldHVybnMgQSBjb250YWluZXIgdGhhdCBjYW4gYmUgdXNlZCB0byBhZGQgc2V0dGluZ3NcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTZXR0aW5nc0dyb3VwKFxyXG5cdGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCxcclxuXHRoZWFkaW5nPzogc3RyaW5nLFxyXG5cdG1hbmlmZXN0SWQ/OiBzdHJpbmdcclxuKTogU2V0dGluZ3NDb250YWluZXIge1xyXG5cdC8vIEFsd2F5cyBhZGQgc2NvcGluZyBjbGFzcyB0byBjb250YWluZXJFbCB0byBzY29wZSBDU1MgdG8gb25seSB0aGlzIHBsdWdpbidzIHNldHRpbmdzXHJcblx0aWYgKG1hbmlmZXN0SWQpIHtcclxuXHRcdGNvbnRhaW5lckVsLmFkZENsYXNzKGAke21hbmlmZXN0SWR9LXNldHRpbmdzLWNvbXBhdGApO1xyXG5cdH1cclxuXHJcblx0Ly8gQ2hlY2sgaWYgU2V0dGluZ0dyb3VwIGlzIGF2YWlsYWJsZSAoQVBJIDEuMTEuMCspXHJcblx0aWYgKHJlcXVpcmVBcGlWZXJzaW9uKCcxLjExLjAnKSkge1xyXG5cdFx0Ly8gQWNjZXNzIFNldHRpbmdHcm91cCB2aWEgdHlwZSBhc3NlcnRpb24gc2luY2UgaXQgbWF5IG5vdCBiZSBpbiB0eXBlIGRlZmluaXRpb25zXHJcblx0XHRjb25zdCBTZXR0aW5nR3JvdXBDbGFzcyA9IChPYnNpZGlhbk1vZHVsZSBhcyB1bmtub3duIGFzIHsgU2V0dGluZ0dyb3VwPzogbmV3IChjb250YWluZXJFbDogSFRNTEVsZW1lbnQpID0+IHtcclxuXHRcdFx0c2V0SGVhZGluZyhoZWFkaW5nOiBzdHJpbmcpOiB7XHJcblx0XHRcdFx0YWRkU2V0dGluZyhjYjogKHNldHRpbmc6IFNldHRpbmcpID0+IHZvaWQpOiB2b2lkO1xyXG5cdFx0XHR9O1xyXG5cdFx0XHRhZGRTZXR0aW5nKGNiOiAoc2V0dGluZzogU2V0dGluZykgPT4gdm9pZCk6IHZvaWQ7XHJcblx0XHR9IH0pLlNldHRpbmdHcm91cDtcclxuXHJcblx0XHRpZiAoU2V0dGluZ0dyb3VwQ2xhc3MpIHtcclxuXHRcdFx0Y29uc3QgZ3JvdXAgPSBoZWFkaW5nXHJcblx0XHRcdFx0PyBuZXcgU2V0dGluZ0dyb3VwQ2xhc3MoY29udGFpbmVyRWwpLnNldEhlYWRpbmcoaGVhZGluZylcclxuXHRcdFx0XHQ6IG5ldyBTZXR0aW5nR3JvdXBDbGFzcyhjb250YWluZXJFbCk7XHJcblx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0YWRkU2V0dGluZyhjYjogKHNldHRpbmc6IFNldHRpbmcpID0+IHZvaWQpIHtcclxuXHRcdFx0XHRcdGdyb3VwLmFkZFNldHRpbmcoY2IpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8vIEZhbGxiYWNrIHBhdGggKGVpdGhlciBBUEkgPCAxLjExLjAgb3IgU2V0dGluZ0dyb3VwIG5vdCBmb3VuZClcclxuXHRcclxuXHRpZiAoaGVhZGluZykge1xyXG5cdFx0Y29uc3QgaGVhZGluZ0VsID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KCdzZXR0aW5nLWdyb3VwLWhlYWRpbmcnKTtcclxuXHRcdGhlYWRpbmdFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6IGhlYWRpbmcgfSk7XHJcblx0fVxyXG5cdFxyXG5cdHJldHVybiB7XHJcblx0XHRhZGRTZXR0aW5nKGNiOiAoc2V0dGluZzogU2V0dGluZykgPT4gdm9pZCkge1xyXG5cdFx0XHRjb25zdCBzZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpO1xyXG5cdFx0XHRjYihzZXR0aW5nKTtcclxuXHRcdH1cclxuXHR9O1xyXG59XHJcbiIsICIvKipcclxuICogRmlsZSBQYXRoIFN1Z2dlc3RlciBDb21wb25lbnRcclxuICogUHJvdmlkZXMgYXV0b2NvbXBsZXRlIGZvciBmaWxlIHBhdGhzIGluIHNldHRpbmdzXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQWJzdHJhY3RJbnB1dFN1Z2dlc3QsIEFwcCwgVEZpbGUsIFRGb2xkZXIgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG4vKipcclxuICogU3VwcG9ydGVkIGZpbGUgZXh0ZW5zaW9ucyBmb3IgaG9tZSBiYXNlXHJcbiAqL1xyXG5jb25zdCBTVVBQT1JURURfRVhURU5TSU9OUyA9IFsnbWQnLCAnbWR4JywgJ2NhbnZhcycsICdiYXNlJ107XHJcblxyXG4vKipcclxuICogRmlsZSBwYXRoIHN1Z2dlc3RlciB0aGF0IHByb3ZpZGVzIGF1dG9jb21wbGV0ZSBmb3IgdmF1bHQgZmlsZXNcclxuICovXHJcbmV4cG9ydCBjbGFzcyBGaWxlUGF0aFN1Z2dlc3QgZXh0ZW5kcyBBYnN0cmFjdElucHV0U3VnZ2VzdDxURmlsZT4ge1xyXG5cdHByaXZhdGUgaW5wdXRFbDogSFRNTElucHV0RWxlbWVudDtcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIGlucHV0RWw6IEhUTUxJbnB1dEVsZW1lbnQpIHtcclxuXHRcdHN1cGVyKGFwcCwgaW5wdXRFbCk7XHJcblx0XHR0aGlzLmlucHV0RWwgPSBpbnB1dEVsO1xyXG5cdH1cclxuXHJcblx0Z2V0U3VnZ2VzdGlvbnMocXVlcnk6IHN0cmluZyk6IFRGaWxlW10ge1xyXG5cdFx0Y29uc3QgbG93ZXJRdWVyeSA9IHF1ZXJ5LnRvTG93ZXJDYXNlKCk7XHJcblx0XHRjb25zdCBmaWxlczogVEZpbGVbXSA9IFtdO1xyXG5cclxuXHRcdC8vIEdldCBhbGwgZmlsZXMgZnJvbSB2YXVsdFxyXG5cdFx0dGhpcy5hcHAudmF1bHQuZ2V0QWxsTG9hZGVkRmlsZXMoKS5mb3JFYWNoKChmaWxlKSA9PiB7XHJcblx0XHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuXHRcdFx0XHQvLyBPbmx5IGluY2x1ZGUgc3VwcG9ydGVkIGZpbGUgdHlwZXNcclxuXHRcdFx0XHRpZiAoU1VQUE9SVEVEX0VYVEVOU0lPTlMuaW5jbHVkZXMoZmlsZS5leHRlbnNpb24pKSB7XHJcblx0XHRcdFx0XHQvLyBNYXRjaCBhZ2FpbnN0IHBhdGggb3IgbmFtZVxyXG5cdFx0XHRcdFx0aWYgKFxyXG5cdFx0XHRcdFx0XHRmaWxlLnBhdGgudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhsb3dlclF1ZXJ5KSB8fFxyXG5cdFx0XHRcdFx0XHRmaWxlLmJhc2VuYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobG93ZXJRdWVyeSlcclxuXHRcdFx0XHRcdCkge1xyXG5cdFx0XHRcdFx0XHRmaWxlcy5wdXNoKGZpbGUpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gU29ydCBieSByZWxldmFuY2UgKGV4YWN0IG1hdGNoZXMgZmlyc3QsIHRoZW4gYWxwaGFiZXRpY2FsbHkpXHJcblx0XHRmaWxlcy5zb3J0KChhLCBiKSA9PiB7XHJcblx0XHRcdGNvbnN0IGFTdGFydHNXaXRoID0gYS5wYXRoLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aChsb3dlclF1ZXJ5KTtcclxuXHRcdFx0Y29uc3QgYlN0YXJ0c1dpdGggPSBiLnBhdGgudG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKGxvd2VyUXVlcnkpO1xyXG5cclxuXHRcdFx0aWYgKGFTdGFydHNXaXRoICYmICFiU3RhcnRzV2l0aCkgcmV0dXJuIC0xO1xyXG5cdFx0XHRpZiAoIWFTdGFydHNXaXRoICYmIGJTdGFydHNXaXRoKSByZXR1cm4gMTtcclxuXHJcblx0XHRcdHJldHVybiBhLnBhdGgubG9jYWxlQ29tcGFyZShiLnBhdGgpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gTGltaXQgcmVzdWx0c1xyXG5cdFx0cmV0dXJuIGZpbGVzLnNsaWNlKDAsIDIwKTtcclxuXHR9XHJcblxyXG5cdHJlbmRlclN1Z2dlc3Rpb24oZmlsZTogVEZpbGUsIGVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xyXG5cdFx0ZWwuYWRkQ2xhc3MoJ2hvbWUtYmFzZS1zdWdnZXN0aW9uLWl0ZW0nKTtcclxuXHJcblx0XHQvLyBTaG93IGZpbGUgbmFtZSBwcm9taW5lbnRseVxyXG5cdFx0Y29uc3QgdGl0bGVFbCA9IGVsLmNyZWF0ZUVsKCdkaXYnLCB7XHJcblx0XHRcdGNsczogJ3N1Z2dlc3Rpb24tdGl0bGUnXHJcblx0XHR9KTtcclxuXHRcdHRpdGxlRWwuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IGZpbGUuYmFzZW5hbWUgfSk7XHJcblxyXG5cdFx0Ly8gU2hvdyBmaWxlIHR5cGUgaW5kaWNhdG9yIG5leHQgdG8gdGl0bGVcclxuXHRcdGlmIChmaWxlLmV4dGVuc2lvbiAhPT0gJ21kJykge1xyXG5cdFx0XHR0aXRsZUVsLmNyZWF0ZUVsKCdzcGFuJywge1xyXG5cdFx0XHRcdHRleHQ6IGZpbGUuZXh0ZW5zaW9uLnRvVXBwZXJDYXNlKCksXHJcblx0XHRcdFx0Y2xzOiAnc3VnZ2VzdGlvbi1mbGFpcidcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gU2hvdyBwYXRoIGluIHNtYWxsZXIgdGV4dCBpZiBkaWZmZXJlbnQgZnJvbSBiYXNlbmFtZVxyXG5cdFx0aWYgKGZpbGUucGFyZW50ICYmIGZpbGUucGFyZW50LnBhdGggIT09ICcvJykge1xyXG5cdFx0XHRlbC5jcmVhdGVFbCgnZGl2Jywge1xyXG5cdFx0XHRcdHRleHQ6IGZpbGUucGFyZW50LnBhdGgsXHJcblx0XHRcdFx0Y2xzOiAnc3VnZ2VzdGlvbi1ub3RlJ1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHNlbGVjdFN1Z2dlc3Rpb24oZmlsZTogVEZpbGUpOiB2b2lkIHtcclxuXHRcdHRoaXMuaW5wdXRFbC52YWx1ZSA9IGZpbGUucGF0aDtcclxuXHRcdHRoaXMuaW5wdXRFbC50cmlnZ2VyKCdpbnB1dCcpO1xyXG5cdFx0dGhpcy5jbG9zZSgpO1xyXG5cdH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEZvbGRlciBwYXRoIHN1Z2dlc3RlciBmb3Igc2VsZWN0aW5nIGZvbGRlcnNcclxuICovXHJcbmV4cG9ydCBjbGFzcyBGb2xkZXJTdWdnZXN0IGV4dGVuZHMgQWJzdHJhY3RJbnB1dFN1Z2dlc3Q8VEZvbGRlcj4ge1xyXG5cdHByaXZhdGUgaW5wdXRFbDogSFRNTElucHV0RWxlbWVudDtcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIGlucHV0RWw6IEhUTUxJbnB1dEVsZW1lbnQpIHtcclxuXHRcdHN1cGVyKGFwcCwgaW5wdXRFbCk7XHJcblx0XHR0aGlzLmlucHV0RWwgPSBpbnB1dEVsO1xyXG5cdH1cclxuXHJcblx0Z2V0U3VnZ2VzdGlvbnMocXVlcnk6IHN0cmluZyk6IFRGb2xkZXJbXSB7XHJcblx0XHRjb25zdCBsb3dlclF1ZXJ5ID0gcXVlcnkudG9Mb3dlckNhc2UoKTtcclxuXHRcdGNvbnN0IGZvbGRlcnM6IFRGb2xkZXJbXSA9IFtdO1xyXG5cclxuXHRcdHRoaXMuYXBwLnZhdWx0LmdldEFsbExvYWRlZEZpbGVzKCkuZm9yRWFjaCgoZmlsZSkgPT4ge1xyXG5cdFx0XHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcclxuXHRcdFx0XHRpZiAoZmlsZS5wYXRoLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobG93ZXJRdWVyeSkpIHtcclxuXHRcdFx0XHRcdGZvbGRlcnMucHVzaChmaWxlKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdGZvbGRlcnMuc29ydCgoYSwgYikgPT4gYS5wYXRoLmxvY2FsZUNvbXBhcmUoYi5wYXRoKSk7XHJcblx0XHRyZXR1cm4gZm9sZGVycy5zbGljZSgwLCAyMCk7XHJcblx0fVxyXG5cclxuXHRyZW5kZXJTdWdnZXN0aW9uKGZvbGRlcjogVEZvbGRlciwgZWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcblx0XHRlbC5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiBmb2xkZXIucGF0aCB8fCAnLycgfSk7XHJcblx0fVxyXG5cclxuXHRzZWxlY3RTdWdnZXN0aW9uKGZvbGRlcjogVEZvbGRlcik6IHZvaWQge1xyXG5cdFx0dGhpcy5pbnB1dEVsLnZhbHVlID0gZm9sZGVyLnBhdGg7XHJcblx0XHR0aGlzLmlucHV0RWwudHJpZ2dlcignaW5wdXQnKTtcclxuXHRcdHRoaXMuY2xvc2UoKTtcclxuXHR9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBXb3Jrc3BhY2Ugc3VnZ2VzdGVyIGZvciBzZWxlY3RpbmcgT2JzaWRpYW4gd29ya3NwYWNlc1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFdvcmtzcGFjZVN1Z2dlc3QgZXh0ZW5kcyBBYnN0cmFjdElucHV0U3VnZ2VzdDxzdHJpbmc+IHtcclxuXHRwcml2YXRlIGlucHV0RWw6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBpbnB1dEVsOiBIVE1MSW5wdXRFbGVtZW50KSB7XHJcblx0XHRzdXBlcihhcHAsIGlucHV0RWwpO1xyXG5cdFx0dGhpcy5pbnB1dEVsID0gaW5wdXRFbDtcclxuXHR9XHJcblxyXG5cdGdldFN1Z2dlc3Rpb25zKHF1ZXJ5OiBzdHJpbmcpOiBzdHJpbmdbXSB7XHJcblxyXG5cdFx0Y29uc3Qgd29ya3NwYWNlc1BsdWdpbiA9IHRoaXMuYXBwLmludGVybmFsUGx1Z2lucz8ucGx1Z2lucz8ud29ya3NwYWNlcztcclxuXHJcblx0XHRpZiAoIXdvcmtzcGFjZXNQbHVnaW4/LmVuYWJsZWQgfHwgIXdvcmtzcGFjZXNQbHVnaW4uaW5zdGFuY2U/LndvcmtzcGFjZXMpIHtcclxuXHRcdFx0cmV0dXJuIFtdO1xyXG5cdFx0fVxyXG5cclxuXHJcblx0XHRjb25zdCB3b3Jrc3BhY2VzID0gT2JqZWN0LmtleXMod29ya3NwYWNlc1BsdWdpbi5pbnN0YW5jZS53b3Jrc3BhY2VzKTtcclxuXHRcdGNvbnN0IGxvd2VyUXVlcnkgPSBxdWVyeS50b0xvd2VyQ2FzZSgpO1xyXG5cclxuXHRcdHJldHVybiB3b3Jrc3BhY2VzLmZpbHRlcigod29ya3NwYWNlOiBzdHJpbmcpID0+XHJcblx0XHRcdHdvcmtzcGFjZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGxvd2VyUXVlcnkpXHJcblx0XHQpO1xyXG5cdH1cclxuXHJcblx0cmVuZGVyU3VnZ2VzdGlvbih3b3Jrc3BhY2U6IHN0cmluZywgZWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcblx0XHRlbC5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiB3b3Jrc3BhY2UgfSk7XHJcblx0fVxyXG5cclxuXHRzZWxlY3RTdWdnZXN0aW9uKHdvcmtzcGFjZTogc3RyaW5nKTogdm9pZCB7XHJcblx0XHR0aGlzLmlucHV0RWwudmFsdWUgPSB3b3Jrc3BhY2U7XHJcblx0XHR0aGlzLmlucHV0RWwudHJpZ2dlcignaW5wdXQnKTtcclxuXHRcdHRoaXMuY2xvc2UoKTtcclxuXHR9XHJcbn0iLCAiLyoqXHJcbiAqIENvbW1hbmQgU3VnZ2VzdGVyIENvbXBvbmVudFxyXG4gKiBQcm92aWRlcyBhdXRvY29tcGxldGUgZm9yIE9ic2lkaWFuIGNvbW1hbmRzIGluIHNldHRpbmdzXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQWJzdHJhY3RJbnB1dFN1Z2dlc3QsIEFwcCwgQ29tbWFuZCB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbi8qKlxyXG4gKiBDb21tYW5kIHN1Z2dlc3RlciB0aGF0IHByb3ZpZGVzIGF1dG9jb21wbGV0ZSBmb3IgT2JzaWRpYW4gY29tbWFuZHNcclxuICovXHJcbmV4cG9ydCBjbGFzcyBDb21tYW5kU3VnZ2VzdCBleHRlbmRzIEFic3RyYWN0SW5wdXRTdWdnZXN0PENvbW1hbmQ+IHtcclxuXHRwcml2YXRlIGlucHV0RWw6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBpbnB1dEVsOiBIVE1MSW5wdXRFbGVtZW50KSB7XHJcblx0XHRzdXBlcihhcHAsIGlucHV0RWwpO1xyXG5cdFx0dGhpcy5pbnB1dEVsID0gaW5wdXRFbDtcclxuXHR9XHJcblxyXG5cdGdldFN1Z2dlc3Rpb25zKHF1ZXJ5OiBzdHJpbmcpOiBDb21tYW5kW10ge1xyXG5cdFx0Y29uc3QgbG93ZXJRdWVyeSA9IHF1ZXJ5LnRvTG93ZXJDYXNlKCk7XHJcblx0XHRjb25zdCBjb21tYW5kczogQ29tbWFuZFtdID0gW107XHJcblxyXG5cdFx0Ly8gR2V0IGFsbCBjb21tYW5kcyBmcm9tIHRoZSBhcHBcclxuXHRcdGNvbnN0IGFwcFdpdGhDb21tYW5kcyA9IHRoaXMuYXBwIGFzIEFwcCAmIHsgXHJcblx0XHRcdGNvbW1hbmRzPzogeyBjb21tYW5kcz86IFJlY29yZDxzdHJpbmcsIENvbW1hbmQ+IH0gXHJcblx0XHR9O1xyXG5cdFx0Y29uc3QgYWxsQ29tbWFuZHMgPSBhcHBXaXRoQ29tbWFuZHMuY29tbWFuZHM/LmNvbW1hbmRzO1xyXG5cdFx0XHJcblx0XHRpZiAoYWxsQ29tbWFuZHMpIHtcclxuXHRcdFx0Zm9yIChjb25zdCBjb21tYW5kIG9mIE9iamVjdC52YWx1ZXMoYWxsQ29tbWFuZHMpKSB7XHJcblx0XHRcdFx0aWYgKGNvbW1hbmQubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGxvd2VyUXVlcnkpIHx8XHJcblx0XHRcdFx0XHRjb21tYW5kLmlkLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobG93ZXJRdWVyeSkpIHtcclxuXHRcdFx0XHRcdGNvbW1hbmRzLnB1c2goY29tbWFuZCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gU29ydCBhbHBoYWJldGljYWxseSBieSBuYW1lXHJcblx0XHRjb21tYW5kcy5zb3J0KChhLCBiKSA9PiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpKTtcclxuXHJcblx0XHQvLyBMaW1pdCByZXN1bHRzXHJcblx0XHRyZXR1cm4gY29tbWFuZHMuc2xpY2UoMCwgMzApO1xyXG5cdH1cclxuXHJcblx0cmVuZGVyU3VnZ2VzdGlvbihjb21tYW5kOiBDb21tYW5kLCBlbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuXHRcdGVsLmNyZWF0ZUVsKCdkaXYnLCB7IFxyXG5cdFx0XHR0ZXh0OiBjb21tYW5kLm5hbWUsXHJcblx0XHRcdGNsczogJ3N1Z2dlc3Rpb24tdGl0bGUnXHJcblx0XHR9KTtcclxuXHRcdFxyXG5cdFx0ZWwuY3JlYXRlRWwoJ3NtYWxsJywgeyBcclxuXHRcdFx0dGV4dDogY29tbWFuZC5pZCxcclxuXHRcdFx0Y2xzOiAnc3VnZ2VzdGlvbi1ub3RlJ1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRzZWxlY3RTdWdnZXN0aW9uKGNvbW1hbmQ6IENvbW1hbmQpOiB2b2lkIHtcclxuXHRcdHRoaXMuaW5wdXRFbC52YWx1ZSA9IGNvbW1hbmQuaWQ7XHJcblx0XHR0aGlzLmlucHV0RWwudHJpZ2dlcignaW5wdXQnKTtcclxuXHRcdHRoaXMuY2xvc2UoKTtcclxuXHR9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBFeHRlbmRlZCBBcHAgaW50ZXJmYWNlIHdpdGggY29tbWFuZHNcclxuICovXHJcbmludGVyZmFjZSBBcHBXaXRoQ29tbWFuZHMgZXh0ZW5kcyBBcHAge1xyXG5cdGNvbW1hbmRzPzoge1xyXG5cdFx0Y29tbWFuZHM/OiBSZWNvcmQ8c3RyaW5nLCBDb21tYW5kPjtcclxuXHRcdGV4ZWN1dGVDb21tYW5kQnlJZD86IChjb21tYW5kSWQ6IHN0cmluZykgPT4gYm9vbGVhbiB8IFByb21pc2U8dm9pZD47XHJcblx0fTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCBhIGNvbW1hbmQgYnkgaXRzIElEXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29tbWFuZEJ5SWQoYXBwOiBBcHAsIGNvbW1hbmRJZDogc3RyaW5nKTogQ29tbWFuZCB8IHVuZGVmaW5lZCB7XHJcblx0Y29uc3QgYXBwV2l0aENvbW1hbmRzID0gYXBwIGFzIEFwcFdpdGhDb21tYW5kcztcclxuXHRjb25zdCBjb21tYW5kcyA9IGFwcFdpdGhDb21tYW5kcy5jb21tYW5kcz8uY29tbWFuZHM7XHJcblx0cmV0dXJuIGNvbW1hbmRzPy5bY29tbWFuZElkXTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEV4ZWN1dGUgYSBjb21tYW5kIGJ5IGl0cyBJRFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGV4ZWN1dGVDb21tYW5kKGFwcDogQXBwLCBjb21tYW5kSWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG5cdGlmICghY29tbWFuZElkKSByZXR1cm4gZmFsc2U7XHJcblx0XHJcblx0Y29uc3QgYXBwV2l0aENvbW1hbmRzID0gYXBwIGFzIEFwcFdpdGhDb21tYW5kcztcclxuXHRjb25zdCByZXN1bHQgPSBhcHBXaXRoQ29tbWFuZHMuY29tbWFuZHM/LmV4ZWN1dGVDb21tYW5kQnlJZD8uKGNvbW1hbmRJZCk7XHJcblx0cmV0dXJuIHJlc3VsdCAhPT0gZmFsc2U7XHJcbn1cclxuIiwgIi8qKlxyXG4gKiBJY29uIFBpY2tlciBNb2RhbFxyXG4gKiBTaW1wbGlmaWVkIGljb24gcGlja2VyIGZvciBzZWxlY3Rpbmcgc3RpY2t5IGljb25cclxuICogQmFzZWQgb24gaWNvbmljIHBsdWdpbidzIGljb24gcGlja2VyXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQXBwLCBCdXR0b25Db21wb25lbnQsIE1vZGFsLCBQbGF0Zm9ybSwgU2V0dGluZywgVGV4dENvbXBvbmVudCwgcHJlcGFyZUZ1enp5U2VhcmNoLCBzZXRJY29uLCBnZXRJY29uSWRzIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJY29uUGlja2VyQ2FsbGJhY2sge1xyXG5cdChpY29uOiBzdHJpbmcgfCBudWxsKTogdm9pZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNpbXBsaWZpZWQgaWNvbiBwaWNrZXIgbW9kYWxcclxuICovXHJcbmV4cG9ydCBjbGFzcyBJY29uUGlja2VyIGV4dGVuZHMgTW9kYWwge1xyXG5cdHByaXZhdGUgc2VsZWN0ZWRJY29uOiBzdHJpbmcgfCBudWxsO1xyXG5cdHByaXZhdGUgY2FsbGJhY2s6IEljb25QaWNrZXJDYWxsYmFjaztcclxuXHRwcml2YXRlIHNlYXJjaEZpZWxkOiBUZXh0Q29tcG9uZW50O1xyXG5cdHByaXZhdGUgc2VhcmNoUmVzdWx0czogW2ljb246IHN0cmluZywgaWNvbk5hbWU6IHN0cmluZ11bXSA9IFtdO1xyXG5cdHByaXZhdGUgc2VhcmNoUmVzdWx0c1NldHRpbmc6IFNldHRpbmc7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBjdXJyZW50SWNvbjogc3RyaW5nIHwgbnVsbCwgY2FsbGJhY2s6IEljb25QaWNrZXJDYWxsYmFjaykge1xyXG5cdFx0c3VwZXIoYXBwKTtcclxuXHRcdHRoaXMuc2VsZWN0ZWRJY29uID0gY3VycmVudEljb247XHJcblx0XHR0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XHJcblx0fVxyXG5cclxuXHRvbk9wZW4oKTogdm9pZCB7XHJcblx0XHR0aGlzLmNvbnRhaW5lckVsLmFkZENsYXNzKCdtb2QtY29uZmlybWF0aW9uJyk7XHJcblx0XHR0aGlzLm1vZGFsRWwuYWRkQ2xhc3MoJ2ljb25pYy1pY29uLXBpY2tlcicpO1xyXG5cdFx0dGhpcy5zZXRUaXRsZSgnQ2hhbmdlIGljb24nKTtcclxuXHJcblx0XHQvLyBTZWFyY2ggZmllbGRcclxuXHRcdGNvbnN0IHNlYXJjaFNldHRpbmcgPSBuZXcgU2V0dGluZyh0aGlzLmNvbnRlbnRFbCk7XHJcblx0XHRpZiAoIVBsYXRmb3JtLmlzUGhvbmUpIHtcclxuXHRcdFx0c2VhcmNoU2V0dGluZy5zZXROYW1lKCdTZWFyY2gnKTtcclxuXHRcdH1cclxuXHRcdHNlYXJjaFNldHRpbmcuYWRkU2VhcmNoKChzZWFyY2hGaWVsZCkgPT4ge1xyXG5cdFx0XHRzZWFyY2hGaWVsZFxyXG5cdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignU2VhcmNoIGljb25zLi4uJylcclxuXHRcdFx0XHQub25DaGFuZ2UoKCkgPT4gdGhpcy51cGRhdGVTZWFyY2hSZXN1bHRzKCkpO1xyXG5cdFx0XHRzZWFyY2hGaWVsZC5pbnB1dEVsLmVudGVyS2V5SGludCA9ICdnbyc7XHJcblx0XHRcdHRoaXMuc2VhcmNoRmllbGQgPSBzZWFyY2hGaWVsZDtcclxuXHRcdH0pO1xyXG5cdFx0aWYgKHRoaXMuc2VsZWN0ZWRJY29uKSB7XHJcblx0XHRcdHRoaXMuc2VhcmNoRmllbGQuc2V0VmFsdWUodGhpcy5zZWxlY3RlZEljb24pO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFNlYXJjaCByZXN1bHRzXHJcblx0XHR0aGlzLnNlYXJjaFJlc3VsdHNTZXR0aW5nID0gbmV3IFNldHRpbmcodGhpcy5jb250ZW50RWwpO1xyXG5cdFx0dGhpcy5zZWFyY2hSZXN1bHRzU2V0dGluZy5zZXR0aW5nRWwuYWRkQ2xhc3MoJ2ljb25pYy1zZWFyY2gtcmVzdWx0cycpO1xyXG5cdFx0dGhpcy5zZWFyY2hSZXN1bHRzU2V0dGluZy5zZXR0aW5nRWwudGFiSW5kZXggPSAwO1xyXG5cdFx0XHJcblx0XHQvLyBBbGxvdyB2ZXJ0aWNhbCBzY3JvbGxpbmcgdG8gd29yayBob3Jpem9udGFsbHlcclxuXHRcdHRoaXMuc2VhcmNoUmVzdWx0c1NldHRpbmcuc2V0dGluZ0VsLmFkZEV2ZW50TGlzdGVuZXIoJ3doZWVsJywgKGV2ZW50KSA9PiB7XHJcblx0XHRcdGlmIChkb2N1bWVudC5ib2R5Lmhhc0NsYXNzKCdtb2QtcnRsJykpIHtcclxuXHRcdFx0XHR0aGlzLnNlYXJjaFJlc3VsdHNTZXR0aW5nLnNldHRpbmdFbC5zY3JvbGxMZWZ0IC09IGV2ZW50LmRlbHRhWTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR0aGlzLnNlYXJjaFJlc3VsdHNTZXR0aW5nLnNldHRpbmdFbC5zY3JvbGxMZWZ0ICs9IGV2ZW50LmRlbHRhWTtcclxuXHRcdFx0fVxyXG5cdFx0fSwgeyBwYXNzaXZlOiB0cnVlIH0pO1xyXG5cclxuXHRcdC8vIEJ1dHRvbnMgLSBtYXRjaCBpY29uaWMncyBidXR0b24gbGF5b3V0XHJcblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSB0aGlzLm1vZGFsRWwuY3JlYXRlRGl2KHsgY2xzOiAnbW9kYWwtYnV0dG9uLWNvbnRhaW5lcicgfSk7XHJcblxyXG5cdFx0Ly8gQ2FuY2VsXHJcblx0XHRuZXcgQnV0dG9uQ29tcG9uZW50KGJ1dHRvbkNvbnRhaW5lcilcclxuXHRcdFx0LnNldEJ1dHRvblRleHQoJ0NhbmNlbCcpXHJcblx0XHRcdC5vbkNsaWNrKCgpID0+IHRoaXMuY2xvc2UoKSlcclxuXHRcdFx0LmJ1dHRvbkVsLmFkZENsYXNzKCdtb2QtY2FuY2VsJyk7XHJcblxyXG5cdFx0Ly8gU2F2ZVxyXG5cdFx0bmV3IEJ1dHRvbkNvbXBvbmVudChidXR0b25Db250YWluZXIpXHJcblx0XHRcdC5zZXRCdXR0b25UZXh0KCdTYXZlJylcclxuXHRcdFx0LnNldEN0YSgpXHJcblx0XHRcdC5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHR0aGlzLmNhbGxiYWNrKHRoaXMuc2VsZWN0ZWRJY29uKTtcclxuXHRcdFx0XHR0aGlzLmNsb3NlKCk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdC8vIEF1dG8tZm9jdXMgc2VhcmNoIGZpZWxkXHJcblx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xyXG5cdFx0XHR0aGlzLnNlYXJjaEZpZWxkLmlucHV0RWwuc2VsZWN0KCk7XHJcblx0XHRcdHRoaXMudXBkYXRlU2VhcmNoUmVzdWx0cygpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBVcGRhdGUgc2VhcmNoIHJlc3VsdHMgYmFzZWQgb24gY3VycmVudCBxdWVyeVxyXG5cdCAqL1xyXG5cdHByaXZhdGUgdXBkYXRlU2VhcmNoUmVzdWx0cygpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHF1ZXJ5ID0gdGhpcy5zZWFyY2hGaWVsZC5nZXRWYWx1ZSgpLnRvTG93ZXJDYXNlKCkudHJpbSgpO1xyXG5cdFx0Y29uc3QgZnV6enlTZWFyY2ggPSBwcmVwYXJlRnV6enlTZWFyY2gocXVlcnkpO1xyXG5cdFx0Y29uc3QgbWF0Y2hlczogW3Njb3JlOiBudW1iZXIsIGljb25FbnRyeTogW3N0cmluZywgc3RyaW5nXV1bXSA9IFtdO1xyXG5cclxuXHRcdC8vIEdldCBhbGwgYXZhaWxhYmxlIGljb25zXHJcblx0XHRjb25zdCBpY29uSWRzID0gZ2V0SWNvbklkcygpO1xyXG5cclxuXHRcdC8vIFNlYXJjaCBpY29uc1xyXG5cdFx0aWYgKHF1ZXJ5KSB7XHJcblx0XHRcdGZvciAoY29uc3QgaWNvbklkIG9mIGljb25JZHMpIHtcclxuXHRcdFx0XHQvLyBDcmVhdGUgYSByZWFkYWJsZSBuYW1lIGZyb20gaWNvbiBJRFxyXG5cdFx0XHRcdGNvbnN0IGljb25OYW1lID0gdGhpcy5mb3JtYXRJY29uTmFtZShpY29uSWQpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmIChpY29uSWQgPT09IHF1ZXJ5IHx8IGljb25JZC50b0xvd2VyQ2FzZSgpID09PSBxdWVyeSkge1xyXG5cdFx0XHRcdFx0bWF0Y2hlcy5wdXNoKFswLCBbaWNvbklkLCBpY29uTmFtZV1dKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0Y29uc3QgZnV6enlNYXRjaCA9IGZ1enp5U2VhcmNoKGljb25OYW1lKTtcclxuXHRcdFx0XHRcdGlmIChmdXp6eU1hdGNoKSB7XHJcblx0XHRcdFx0XHRcdG1hdGNoZXMucHVzaChbZnV6enlNYXRjaC5zY29yZSwgW2ljb25JZCwgaWNvbk5hbWVdXSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQvLyBTaG93IGFsbCBpY29ucyBpZiBubyBxdWVyeVxyXG5cdFx0XHRmb3IgKGNvbnN0IGljb25JZCBvZiBpY29uSWRzKSB7XHJcblx0XHRcdFx0Y29uc3QgaWNvbk5hbWUgPSB0aGlzLmZvcm1hdEljb25OYW1lKGljb25JZCk7XHJcblx0XHRcdFx0bWF0Y2hlcy5wdXNoKFswLCBbaWNvbklkLCBpY29uTmFtZV1dKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFNvcnQgYnkgc2NvcmVcclxuXHRcdG1hdGNoZXMuc29ydCgoW3Njb3JlQV0sIFtzY29yZUJdKSA9PiBzY29yZUEgPiBzY29yZUIgPyAtMSA6ICsxKTtcclxuXHJcblx0XHQvLyBMaW1pdCByZXN1bHRzXHJcblx0XHR0aGlzLnNlYXJjaFJlc3VsdHMubGVuZ3RoID0gMDtcclxuXHRcdGNvbnN0IG1heFJlc3VsdHMgPSAxMDA7XHJcblx0XHRmb3IgKGNvbnN0IFssIGljb25FbnRyeV0gb2YgbWF0Y2hlcykge1xyXG5cdFx0XHR0aGlzLnNlYXJjaFJlc3VsdHMucHVzaChpY29uRW50cnkpO1xyXG5cdFx0XHRpZiAodGhpcy5zZWFyY2hSZXN1bHRzLmxlbmd0aCA+PSBtYXhSZXN1bHRzKSBicmVhaztcclxuXHRcdH1cclxuXHJcblx0XHQvLyBVcGRhdGUgVUkgLSB1c2UgRXh0cmFCdXR0b25Db21wb25lbnQgbGlrZSBpY29uaWNcclxuXHRcdHRoaXMuc2VhcmNoUmVzdWx0c1NldHRpbmcuY2xlYXIoKTtcclxuXHRcdGZvciAoY29uc3QgW2ljb25JZCwgaWNvbk5hbWVdIG9mIHRoaXMuc2VhcmNoUmVzdWx0cykge1xyXG5cdFx0XHR0aGlzLnNlYXJjaFJlc3VsdHNTZXR0aW5nLmFkZEV4dHJhQnV0dG9uKChpY29uQnV0dG9uKSA9PiB7XHJcblx0XHRcdFx0aWNvbkJ1dHRvbi5zZXRUb29sdGlwKGljb25OYW1lLCB7XHJcblx0XHRcdFx0XHRkZWxheTogMzAwLFxyXG5cdFx0XHRcdFx0cGxhY2VtZW50OiBQbGF0Zm9ybS5pc1Bob25lID8gJ3RvcCcgOiAnYm90dG9tJyxcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRjb25zdCBpY29uRWwgPSBpY29uQnV0dG9uLmV4dHJhU2V0dGluZ3NFbDtcclxuXHRcdFx0XHRpY29uRWwuYWRkQ2xhc3MoJ2ljb25pYy1zZWFyY2gtcmVzdWx0Jyk7XHJcblx0XHRcdFx0aWNvbkVsLnRhYkluZGV4ID0gLTE7XHJcblxyXG5cdFx0XHRcdHNldEljb24oaWNvbkVsLCBpY29uSWQpO1xyXG5cclxuXHRcdFx0XHQvLyBIaWdobGlnaHQgc2VsZWN0ZWQgaWNvblxyXG5cdFx0XHRcdGlmIChpY29uSWQgPT09IHRoaXMuc2VsZWN0ZWRJY29uKSB7XHJcblx0XHRcdFx0XHRpY29uRWwuYWRkQ2xhc3MoJ2lzLXNlbGVjdGVkJyk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpY29uRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLnNlbGVjdGVkSWNvbiA9IGljb25JZDtcclxuXHRcdFx0XHRcdHRoaXMuY2FsbGJhY2soaWNvbklkKTtcclxuXHRcdFx0XHRcdHRoaXMuY2xvc2UoKTtcclxuXHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdFx0Ly8gTW9iaWxlOiBzaG93IHRvb2x0aXAgb24gbG9uZyBwcmVzc1xyXG5cdFx0XHRcdGlmIChQbGF0Zm9ybS5pc1Bob25lKSB7XHJcblx0XHRcdFx0XHRpY29uRWwuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdG5hdmlnYXRvci52aWJyYXRlPy4oMTAwKTtcclxuXHRcdFx0XHRcdFx0Ly8gVG9vbHRpcCBpcyBhbHJlYWR5IHNldCBhYm92ZVxyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBVc2UgYW4gaW52aXNpYmxlIGJ1dHRvbiB0byBwcmVzZXJ2ZSBoZWlnaHQgaWYgbm8gcmVzdWx0c1xyXG5cdFx0aWYgKHRoaXMuc2VhcmNoUmVzdWx0cy5sZW5ndGggPT09IDApIHtcclxuXHRcdFx0dGhpcy5zZWFyY2hSZXN1bHRzU2V0dGluZy5hZGRFeHRyYUJ1dHRvbigoYnV0dG9uKSA9PiB7XHJcblx0XHRcdFx0YnV0dG9uLmV4dHJhU2V0dGluZ3NFbC5hZGRDbGFzc2VzKFsnaWNvbmljLWludmlzaWJsZScsICdpY29uaWMtc2VhcmNoLXJlc3VsdCddKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBGb3JtYXQgaWNvbiBJRCBpbnRvIHJlYWRhYmxlIG5hbWVcclxuXHQgKi9cclxuXHRwcml2YXRlIGZvcm1hdEljb25OYW1lKGljb25JZDogc3RyaW5nKTogc3RyaW5nIHtcclxuXHRcdC8vIFJlbW92ZSBsdWNpZGUtIHByZWZpeCBpZiBwcmVzZW50XHJcblx0XHRsZXQgbmFtZSA9IGljb25JZC5yZXBsYWNlKC9ebHVjaWRlLS8sICcnKTtcclxuXHRcdC8vIFJlcGxhY2UgZGFzaGVzIHdpdGggc3BhY2VzXHJcblx0XHRuYW1lID0gbmFtZS5yZXBsYWNlKC8tL2csICcgJyk7XHJcblx0XHQvLyBDYXBpdGFsaXplIGZpcnN0IGxldHRlciBvZiBlYWNoIHdvcmRcclxuXHRcdHJldHVybiBuYW1lLnNwbGl0KCcgJykubWFwKHdvcmQgPT4gXHJcblx0XHRcdHdvcmQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB3b3JkLnNsaWNlKDEpXHJcblx0XHQpLmpvaW4oJyAnKTtcclxuXHR9XHJcblxyXG5cdG9uQ2xvc2UoKTogdm9pZCB7XHJcblx0XHR0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xyXG5cdH1cclxufVxyXG4iLCAiLyoqXHJcbiAqIEhvbWUgQmFzZSBTZXJ2aWNlXHJcbiAqIENvcmUgbG9naWMgZm9yIG9wZW5pbmcgYW5kIG1hbmFnaW5nIHRoZSBob21lIGJhc2UgZmlsZVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IEFwcCwgVEZpbGUsIFdvcmtzcGFjZUxlYWYsIE1hcmtkb3duVmlldywgUGxhdGZvcm0sIFZpZXcgYXMgT1ZpZXcgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB0eXBlIEhvbWVCYXNlUGx1Z2luIGZyb20gJy4uL21haW4nO1xyXG5pbXBvcnQgeyBIb21lQmFzZVR5cGUsIE9wZW5pbmdNb2RlIH0gZnJvbSAnLi4vc2V0dGluZ3MnO1xyXG5pbXBvcnQgeyBnZXRGaWxlQnlQYXRoLCBpc01hcmtkb3duTGlrZSwgbGVhZkhhc0ZpbGUsIGlzU3VwcG9ydGVkRXh0ZW5zaW9uIH0gZnJvbSAnLi4vdXRpbHMvZmlsZS11dGlscyc7XHJcbmltcG9ydCB7IGV4ZWN1dGVDb21tYW5kIH0gZnJvbSAnLi4vdWkvY29tbWFuZC1zdWdnZXN0JztcclxuaW1wb3J0IHsgY29tcHV0ZUhvbWVCYXNlUGF0aCwgdHJpbUZpbGUsIHJlc29sdmVQYXRoU3luYyB9IGZyb20gJy4uL3V0aWxzL2hvbWViYXNlLXJlc29sdmVyJztcclxuXHJcbi8qKlxyXG4gKiBWaWV3IHR5cGVzIHRoYXQgY2FuIGJlIGhvbWUgYmFzZSBmaWxlc1xyXG4gKi9cclxuY29uc3QgTEVBRl9UWVBFUyA9IFsnbWFya2Rvd24nLCAnY2FudmFzJywgJ2Jhc2VzJywgJ2thbmJhbiddO1xyXG5cclxuLyoqXHJcbiAqIFRpbWluZyBjb25zdGFudHMgZm9yIGhvbWUgc2VydmljZSBvcGVyYXRpb25zXHJcbiAqIFRoZXNlIGRlbGF5cyBlbnN1cmUgT2JzaWRpYW4ncyBpbnRlcm5hbCBzdGF0ZSBpcyB1cGRhdGVkIGJlZm9yZSBwcm9jZWVkaW5nXHJcbiAqL1xyXG5cclxuLyoqIFNob3J0IGRlbGF5IGZvciBsZWFmIGRldGFjaG1lbnQgdG8gY29tcGxldGUgKi9cclxuY29uc3QgREVUQUNIX0RFTEFZID0gMTAwO1xyXG5cclxuLyoqIERlbGF5IGZvciBncmFwaCB2aWV3IGluaXRpYWxpemF0aW9uICovXHJcbmNvbnN0IEdSQVBIX0lOSVRfREVMQVkgPSAyMDA7XHJcblxyXG4vKiogRmFsbGJhY2sgZGVsYXkgd2hlbiB1c2luZyBncmFwaCBjb21tYW5kIGluc3RlYWQgb2YgZGlyZWN0IGNyZWF0aW9uICovXHJcbmNvbnN0IEdSQVBIX0NPTU1BTkRfRkFMTEJBQ0tfREVMQVkgPSAzMDA7XHJcblxyXG4vKipcclxuICogSGVscGVyIHRvIGNoZWNrIGlmIHR3byBmaWxlIHBhdGhzIGFyZSBlcXVhbCAoY2FzZS1pbnNlbnNpdGl2ZSwgaWdub3JpbmcgZXh0ZW5zaW9uKVxyXG4gKi9cclxuZnVuY3Rpb24gZXF1YWxzQ2FzZWxlc3MocGF0aDE6IHN0cmluZywgcGF0aDI6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG5cdGNvbnN0IG5vcm1hbGl6ZSA9IChwOiBzdHJpbmcpID0+IHAudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9cXC5tZCQvLCAnJyk7XHJcblx0cmV0dXJuIG5vcm1hbGl6ZShwYXRoMSkgPT09IG5vcm1hbGl6ZShwYXRoMik7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBIb21lQmFzZVNlcnZpY2Uge1xyXG5cdHByaXZhdGUgYXBwOiBBcHA7XHJcblx0cHJpdmF0ZSBwbHVnaW46IEhvbWVCYXNlUGx1Z2luO1xyXG5cdHByaXZhdGUgZ2hvc3RMZWF2ZXM6IFdlYWtTZXQ8V29ya3NwYWNlTGVhZj4gPSBuZXcgV2Vha1NldCgpO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihwbHVnaW46IEhvbWVCYXNlUGx1Z2luKSB7XHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuXHRcdHRoaXMuYXBwID0gcGx1Z2luLmFwcDtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIE9wZW4gaG9tZSBiYXNlIHdpdGggYSBzcGVjaWZpYyBtb2RlIChmb3Igc3RhcnR1cC9tYW51YWwgb3BlbnMpXHJcblx0ICovXHJcblx0YXN5bmMgb3BlbkhvbWVCYXNlV2l0aE1vZGUobW9kZTogT3BlbmluZ01vZGUsIHJ1bkNvbW1hbmQ6IGJvb2xlYW4gPSB0cnVlKTogUHJvbWlzZTxib29sZWFuPiB7XHJcblx0XHRjb25zdCBob21lQmFzZVNldHRpbmdzID0gdGhpcy5wbHVnaW4uZ2V0SG9tZUJhc2VTZXR0aW5ncygpO1xyXG5cclxuXHRcdC8vIEhhbmRsZSBub24tZmlsZSB0eXBlcyAoV29ya3NwYWNlLCBHcmFwaCwgTm9uZSlcclxuXHRcdGlmIChob21lQmFzZVNldHRpbmdzLnR5cGUgPT09IEhvbWVCYXNlVHlwZS5Xb3Jrc3BhY2UpIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMub3BlbldvcmtzcGFjZShob21lQmFzZVNldHRpbmdzLnZhbHVlKTtcclxuXHRcdH1cclxuXHRcdGlmIChob21lQmFzZVNldHRpbmdzLnR5cGUgPT09IEhvbWVCYXNlVHlwZS5HcmFwaCkge1xyXG5cdFx0XHQvLyBHcmFwaCB2aWV3OiBzdXBwb3J0IGdob3N0IHRhYiBpZiBzdGlja3kgaWNvbiBpcyBlbmFibGVkXHJcblx0XHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93U3RpY2t5SG9tZUljb24pIHtcclxuXHRcdFx0XHRyZXR1cm4gdGhpcy5vcGVuSG9tZUJhc2VJbkdob3N0VGFiKHsgcnVuQ29tbWFuZCB9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gdGhpcy5vcGVuR3JhcGgoKTtcclxuXHRcdH1cclxuXHRcdGlmIChob21lQmFzZVNldHRpbmdzLnR5cGUgPT09IEhvbWVCYXNlVHlwZS5Ob25lKSB7XHJcblx0XHRcdC8vIEp1c3QgcnVuIGNvbW1hbmQsIGRvbid0IG9wZW4gYW55dGhpbmdcclxuXHRcdFx0aWYgKHJ1bkNvbW1hbmQpIHtcclxuXHRcdFx0XHR0aGlzLnJ1bkNvbW1hbmRPbk9wZW4oKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBSZXNvbHZlIHRoZSBhY3R1YWwgZmlsZSBwYXRoIGJhc2VkIG9uIHR5cGVcclxuXHRcdGNvbnN0IHJlc29sdmVkUGF0aCA9IGF3YWl0IGNvbXB1dGVIb21lQmFzZVBhdGgoXHJcblx0XHRcdGhvbWVCYXNlU2V0dGluZ3MudHlwZSxcclxuXHRcdFx0aG9tZUJhc2VTZXR0aW5ncy52YWx1ZSxcclxuXHRcdFx0dGhpcy5wbHVnaW5cclxuXHRcdCk7XHJcblxyXG5cdFx0aWYgKCFyZXNvbHZlZFBhdGgpIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEdldCB0aGUgZmlsZSAtIHVzZSBtZXRhZGF0YUNhY2hlIGZvciBiZXR0ZXIgcGF0aCByZXNvbHV0aW9uIChsaWtlIGhvbWVwYWdlIHBsdWdpbilcclxuXHRcdGxldCBmaWxlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdChyZXNvbHZlZFBhdGgsICcvJyk7XHJcblxyXG5cdFx0Ly8gSWYgbm90IGZvdW5kIGFuZCBhdXRvLWNyZWF0ZSBpcyBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIHR5cGUsIHJldHVyblxyXG5cdFx0Ly8gRm9yIG5vdywgd2UnbGwgdHJ5IGdldEZpbGVCeVBhdGggYXMgZmFsbGJhY2tcclxuXHRcdGlmICghZmlsZSkge1xyXG5cdFx0XHRmaWxlID0gZ2V0RmlsZUJ5UGF0aCh0aGlzLmFwcCwgcmVzb2x2ZWRQYXRoKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIWZpbGUpIHtcclxuXHRcdFx0Ly8gVHJ5IHRvIGNyZWF0ZSBpZiBpdCdzIGEgbWFya2Rvd24gZmlsZSBhbmQgcGF0aCBkb2Vzbid0IGhhdmUgZXh0ZW5zaW9uXHJcblx0XHRcdGNvbnN0IHVudHJpbW1lZFBhdGggPSByZXNvbHZlZFBhdGguZW5kc1dpdGgoJy5tZCcpID8gcmVzb2x2ZWRQYXRoIDogYCR7cmVzb2x2ZWRQYXRofS5tZGA7XHJcblx0XHRcdGZpbGUgPSBnZXRGaWxlQnlQYXRoKHRoaXMuYXBwLCB1bnRyaW1tZWRQYXRoKTtcclxuXHJcblx0XHRcdGlmICghZmlsZSAmJiBob21lQmFzZVNldHRpbmdzLnR5cGUgPT09IEhvbWVCYXNlVHlwZS5GaWxlKSB7XHJcblx0XHRcdFx0Ly8gQ291bGQgY3JlYXRlIGZpbGUgaGVyZSBpZiBhdXRvQ3JlYXRlIHNldHRpbmcgZXhpc3RzLCBidXQgZm9yIG5vdyBqdXN0IHJldHVyblxyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGlmICghZmlsZSkge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gSGFuZGxlIG9wZW5pbmcgbW9kZVxyXG5cdFx0aWYgKG1vZGUgPT09ICdyZXBsYWNlLWFsbCcpIHtcclxuXHRcdFx0YXdhaXQgdGhpcy5kZXRhY2hBbGxMZWF2ZXMoKTtcclxuXHRcdH0gZWxzZSBpZiAobW9kZSA9PT0gJ3JlcGxhY2UtbGFzdCcpIHtcclxuXHRcdFx0Ly8gUmVwbGFjZSB0aGUgYWN0aXZlIGxlYWYgKGNsb3NlIGl0IGFuZCBvcGVuIGhvbWUgYmFzZSBpbiBpdHMgcGxhY2UpXHJcblx0XHRcdGNvbnN0IGFjdGl2ZUxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShPVmlldyk/LmxlYWY7XHJcblx0XHRcdGlmIChhY3RpdmVMZWFmKSB7XHJcblx0XHRcdFx0Y29uc3Qgdmlld1N0YXRlID0gYWN0aXZlTGVhZi5nZXRWaWV3U3RhdGUoKTtcclxuXHRcdFx0XHQvLyBPbmx5IGNsb3NlIGlmIG5vdCBwaW5uZWRcclxuXHRcdFx0XHRpZiAodmlld1N0YXRlLnBpbm5lZCAhPT0gdHJ1ZSkge1xyXG5cdFx0XHRcdFx0dm9pZCBhY3RpdmVMZWFmLmRldGFjaCgpO1xyXG5cdFx0XHRcdFx0Ly8gV2FpdCBhIGJpdCBmb3IgZGV0YWNobWVudFxyXG5cdFx0XHRcdFx0YXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIERFVEFDSF9ERUxBWSkpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENoZWNrIGZvciBleGlzdGluZyBsZWFmIChidXQgZXhjbHVkZSBnaG9zdCB0YWIgZm9yIG1hbnVhbCBvcGVucylcclxuXHRcdGNvbnN0IGV4aXN0aW5nTGVhZiA9IHRoaXMuZmluZEV4aXN0aW5nSG9tZUJhc2VMZWFmKGZpbGUpO1xyXG5cdFx0aWYgKGV4aXN0aW5nTGVhZiAmJiBtb2RlICE9PSAncmVwbGFjZS1hbGwnKSB7XHJcblx0XHRcdC8vIEZvciByZXBsYWNlLWxhc3QsIHdlIHN0aWxsIHdhbnQgdG8gcmV1c2UgZXhpc3RpbmcgaWYgZm91bmQgKGFmdGVyIGNsb3NpbmcgYWN0aXZlKVxyXG5cdFx0XHRjb25zdCB2aWV3U3RhdGUgPSBleGlzdGluZ0xlYWYuZ2V0Vmlld1N0YXRlKCk7XHJcblx0XHRcdGlmICh2aWV3U3RhdGUucGlubmVkID09PSB0cnVlICYmIHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dTdGlja3lIb21lSWNvbikge1xyXG5cdFx0XHRcdC8vIERvbid0IHVzZSBnaG9zdCB0YWIgZm9yIG1hbnVhbCBvcGVucyAtIHdpbGwgY3JlYXRlIG5ldyB0YWIgYmVsb3dcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uuc2V0QWN0aXZlTGVhZihleGlzdGluZ0xlYWYpO1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMuY29uZmlndXJlVmlldyhleGlzdGluZ0xlYWYsIGZpbGUpO1xyXG5cdFx0XHRcdGlmIChydW5Db21tYW5kKSB7XHJcblx0XHRcdFx0XHR0aGlzLnJ1bkNvbW1hbmRPbk9wZW4oKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBPcGVuIGluIG5ldyBsZWFmXHJcblx0XHRjb25zdCBuZXdMZWFmID0gbW9kZSA9PT0gJ3JldGFpbidcclxuXHRcdFx0PyB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZigndGFiJylcclxuXHRcdFx0OiB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZihmYWxzZSk7XHJcblxyXG5cdFx0aWYgKCFuZXdMZWFmKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHRcdGF3YWl0IG5ld0xlYWYub3BlbkZpbGUoZmlsZSk7XHJcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uuc2V0QWN0aXZlTGVhZihuZXdMZWFmKTtcclxuXHRcdGF3YWl0IHRoaXMuY29uZmlndXJlVmlldyhuZXdMZWFmLCBmaWxlKTtcclxuXHJcblx0XHRpZiAocnVuQ29tbWFuZCkge1xyXG5cdFx0XHR0aGlzLnJ1bkNvbW1hbmRPbk9wZW4oKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdHJ1ZTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIE9wZW4gd29ya3NwYWNlXHJcblx0ICovXHJcblx0cHJpdmF0ZSBhc3luYyBvcGVuV29ya3NwYWNlKHdvcmtzcGFjZU5hbWU6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG5cclxuXHRcdGNvbnN0IHdvcmtzcGFjZVBsdWdpbiA9IHRoaXMuYXBwLmludGVybmFsUGx1Z2lucz8ucGx1Z2lucz8ud29ya3NwYWNlcztcclxuXHJcblx0XHRpZiAoIXdvcmtzcGFjZVBsdWdpbj8uZW5hYmxlZCB8fCAhd29ya3NwYWNlUGx1Z2luLmluc3RhbmNlPy5sb2FkV29ya3NwYWNlKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHJcblx0XHR3b3Jrc3BhY2VQbHVnaW4uaW5zdGFuY2UubG9hZFdvcmtzcGFjZSh3b3Jrc3BhY2VOYW1lKTtcclxuXHRcdGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBERVRBQ0hfREVMQVkpKTtcclxuXHRcdHJldHVybiB0cnVlO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogT3BlbiBncmFwaCB2aWV3XHJcblx0ICovXHJcblx0YXN5bmMgb3BlbkdyYXBoKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG5cclxuXHRcdGF3YWl0IHRoaXMuYXBwLmNvbW1hbmRzPy5leGVjdXRlQ29tbWFuZEJ5SWQ/LignZ3JhcGg6b3BlbicpO1xyXG5cdFx0cmV0dXJuIHRydWU7XHJcblx0fVxyXG5cclxuXHQvLyBSZW1vdmVkIGRlcHJlY2F0ZWQgb3BlbkdyYXBoSW5HaG9zdFRhYiAtIG5vdyBpbnRlZ3JhdGVkIGludG8gb3BlbkhvbWVCYXNlSW5HaG9zdFRhYlxyXG5cclxuXHQvKipcclxuXHQgKiBPcGVuIHRoZSBob21lIGJhc2UgZmlsZVxyXG5cdCAqIEBwYXJhbSBvcHRpb25zIE9wdGlvbnMgZm9yIG9wZW5pbmdcclxuXHQgKi9cclxuXHRhc3luYyBvcGVuSG9tZUJhc2Uob3B0aW9uczoge1xyXG5cdFx0cmVwbGFjZUFjdGl2ZUxlYWY/OiBib29sZWFuO1xyXG5cdFx0cnVuQ29tbWFuZD86IGJvb2xlYW47XHJcblx0fSA9IHt9KTogUHJvbWlzZTxib29sZWFuPiB7XHJcblx0XHRjb25zdCB7IHJ1bkNvbW1hbmQgPSB0cnVlIH0gPSBvcHRpb25zO1xyXG5cdFx0Y29uc3QgbW9kZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLm1hbnVhbE9wZW5Nb2RlO1xyXG5cclxuXHJcblx0XHQvLyBVc2UgdGhlIG5ldyBtZXRob2Qgd2l0aCBtYW51YWwgbW9kZVxyXG5cdFx0cmV0dXJuIHRoaXMub3BlbkhvbWVCYXNlV2l0aE1vZGUobW9kZSwgcnVuQ29tbWFuZCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBPcGVuIGhvbWUgYmFzZSBpbiBhbiBlbXB0eSBsZWFmIChmb3IgbmV3IHRhYiByZXBsYWNlbWVudClcclxuXHQgKi9cclxuXHRhc3luYyBvcGVuSW5MZWFmKGxlYWY6IFdvcmtzcGFjZUxlYWYpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuXHRcdGNvbnN0IGhvbWVCYXNlU2V0dGluZ3MgPSB0aGlzLnBsdWdpbi5nZXRIb21lQmFzZVNldHRpbmdzKCk7XHJcblx0XHRyZXR1cm4gdGhpcy5vcGVuSW5MZWFmV2l0aFNldHRpbmdzKGxlYWYsIGhvbWVCYXNlU2V0dGluZ3MpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogT3BlbiBhIGZpbGUgaW4gYW4gZW1wdHkgbGVhZiB3aXRoIGN1c3RvbSBzZXR0aW5nc1xyXG5cdCAqIEBwYXJhbSBsZWFmIFRoZSBsZWFmIHRvIG9wZW4gdGhlIGZpbGUgaW5cclxuXHQgKiBAcGFyYW0gc2V0dGluZ3MgU2V0dGluZ3Mgb2JqZWN0IHdpdGggdHlwZSBhbmQgdmFsdWVcclxuXHQgKiBAcGFyYW0gaXNOZXdUYWIgV2hldGhlciB0aGlzIGlzIGZvciBuZXcgdGFiIHJlcGxhY2VtZW50IChza2lwcyBwaW5uaW5nL2dob3N0IHRhYiBsb2dpYylcclxuXHQgKi9cclxuXHRhc3luYyBvcGVuSW5MZWFmV2l0aFNldHRpbmdzKGxlYWY6IFdvcmtzcGFjZUxlYWYsIHNldHRpbmdzOiB7IHR5cGU6IEhvbWVCYXNlVHlwZTsgdmFsdWU6IHN0cmluZyB9LCBpc05ld1RhYjogYm9vbGVhbiA9IGZhbHNlKTogUHJvbWlzZTxib29sZWFuPiB7XHJcblx0XHQvLyBIYW5kbGUgbm9uLWZpbGUgdHlwZXNcclxuXHRcdGlmIChzZXR0aW5ncy50eXBlID09PSBIb21lQmFzZVR5cGUuV29ya3NwYWNlKSB7XHJcblx0XHRcdGF3YWl0IHRoaXMub3BlbldvcmtzcGFjZShzZXR0aW5ncy52YWx1ZSk7XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fVxyXG5cdFx0aWYgKHNldHRpbmdzLnR5cGUgPT09IEhvbWVCYXNlVHlwZS5HcmFwaCkge1xyXG5cdFx0XHRhd2FpdCB0aGlzLm9wZW5HcmFwaCgpO1xyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH1cclxuXHRcdGlmIChzZXR0aW5ncy50eXBlID09PSBIb21lQmFzZVR5cGUuTm9uZSkge1xyXG5cdFx0XHR0aGlzLnJ1bkNvbW1hbmRPbk9wZW4oKTtcclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gUmVzb2x2ZSB0aGUgYWN0dWFsIGZpbGUgcGF0aCBiYXNlZCBvbiB0eXBlXHJcblx0XHRjb25zdCByZXNvbHZlZFBhdGggPSBhd2FpdCBjb21wdXRlSG9tZUJhc2VQYXRoKFxyXG5cdFx0XHRzZXR0aW5ncy50eXBlLFxyXG5cdFx0XHRzZXR0aW5ncy52YWx1ZSxcclxuXHRcdFx0dGhpcy5wbHVnaW5cclxuXHRcdCk7XHJcblxyXG5cdFx0aWYgKCFyZXNvbHZlZFBhdGgpIHtcclxuXHRcdFx0Ly8gTG9nIHdhcm5pbmcgZm9yIGRlYnVnZ2luZyAtIGZpbGUgcGF0aCBjb3VsZG4ndCBiZSByZXNvbHZlZFxyXG5cdFx0XHRjb25zb2xlLndhcm4oJ1tIb21lIEJhc2VdIENvdWxkIG5vdCByZXNvbHZlIHBhdGggZm9yIG5ldyB0YWI6Jywgc2V0dGluZ3MudHlwZSwgc2V0dGluZ3MudmFsdWUpO1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gR2V0IHRoZSBmaWxlIC0gdXNlIG1ldGFkYXRhQ2FjaGUgZm9yIGJldHRlciBwYXRoIHJlc29sdXRpb24gKGxpa2UgaG9tZXBhZ2UgcGx1Z2luKVxyXG5cdFx0Ly8gVGhpcyBpcyBlc3BlY2lhbGx5IGltcG9ydGFudCBmb3IgcGVyaW9kaWMgbm90ZXMgd2hpY2ggbWF5IGhhdmUgYmVlbiBqdXN0IGNyZWF0ZWRcclxuXHRcdGxldCBmaWxlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdChyZXNvbHZlZFBhdGgsICcvJyk7XHJcblxyXG5cdFx0Ly8gSWYgbm90IGZvdW5kLCB0cnkgZ2V0RmlsZUJ5UGF0aCBhcyBmYWxsYmFja1xyXG5cdFx0aWYgKCFmaWxlKSB7XHJcblx0XHRcdGZpbGUgPSBnZXRGaWxlQnlQYXRoKHRoaXMuYXBwLCByZXNvbHZlZFBhdGgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEZvciBwZXJpb2RpYyBub3RlcywgdGhlIHBhdGggbWlnaHQgYmUgdHJpbW1lZCAobm8gZXh0ZW5zaW9uKVxyXG5cdFx0Ly8gVHJ5IHdpdGggLm1kIGV4dGVuc2lvbiBpZiBzdGlsbCBub3QgZm91bmRcclxuXHRcdGlmICghZmlsZSAmJiAhcmVzb2x2ZWRQYXRoLmVuZHNXaXRoKCcubWQnKSAmJiAhcmVzb2x2ZWRQYXRoLmVuZHNXaXRoKCcuY2FudmFzJykgJiYgIXJlc29sdmVkUGF0aC5lbmRzV2l0aCgnLmJhc2UnKSkge1xyXG5cdFx0XHRjb25zdCB1bnRyaW1tZWRQYXRoID0gYCR7cmVzb2x2ZWRQYXRofS5tZGA7XHJcblx0XHRcdGZpbGUgPSBnZXRGaWxlQnlQYXRoKHRoaXMuYXBwLCB1bnRyaW1tZWRQYXRoKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIWZpbGUpIHtcclxuXHRcdFx0Ly8gTG9nIHdhcm5pbmcgZm9yIGRlYnVnZ2luZyAtIGZpbGUgbm90IGZvdW5kXHJcblx0XHRcdGNvbnNvbGUud2FybignW0hvbWUgQmFzZV0gRmlsZSBub3QgZm91bmQgZm9yIG5ldyB0YWI6JywgcmVzb2x2ZWRQYXRoKTtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEZvciBuZXcgdGFiIHJlcGxhY2VtZW50OiBqdXN0IG9wZW4gdGhlIGZpbGUsIG5vIHBpbm5pbmcsIG5vIGdob3N0IHRhYiBsb2dpY1xyXG5cdFx0Ly8gTXVsdGlwbGUgdGFicyB3aXRoIHRoZSBzYW1lIGZpbGUgYXJlIGZpbmVcclxuXHRcdC8vIENSSVRJQ0FMOiBXaGVuIGlzTmV3VGFiPXRydWUsIGNvbXBsZXRlbHkgYnlwYXNzIEFMTCBnaG9zdCB0YWIgbG9naWNcclxuXHRcdGlmIChpc05ld1RhYikge1xyXG5cdFx0XHRjb25zb2xlLmRlYnVnKCdbSG9tZSBCYXNlXSBvcGVuSW5MZWFmV2l0aFNldHRpbmdzOiBpc05ld1RhYj10cnVlLCBieXBhc3NpbmcgZ2hvc3QgdGFiIGxvZ2ljJywge1xyXG5cdFx0XHRcdGZpbGU6IGZpbGUucGF0aCxcclxuXHRcdFx0XHRzZXR0aW5nczogc2V0dGluZ3NcclxuXHRcdFx0fSk7XHJcblx0XHRcdGF3YWl0IGxlYWYub3BlbkZpbGUoZmlsZSk7XHJcblx0XHRcdGF3YWl0IHRoaXMuY29uZmlndXJlVmlldyhsZWFmLCBmaWxlKTtcclxuXHRcdFx0dGhpcy5ydW5Db21tYW5kT25PcGVuKCk7XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEZvciBob21lIGJhc2U6IHVzZSBnaG9zdCB0YWIvcGlubmluZyBsb2dpYyAoZXhpc3RpbmcgYmVoYXZpb3IpXHJcblx0XHQvLyBJZiBzdGlja3kgaWNvbiBpcyBlbmFibGVkIEFORCB0aGlzIGlzIGEgdHJ1bHkgZW1wdHkgdGFiIChub3QgYSBmaWxlIG9wZW5lZCBmcm9tIGV4cGxvcmVyKSxcclxuXHRcdC8vIGNoZWNrIGlmIHRoZXJlJ3MgYSBnaG9zdCB0YWIgYW5kIG1lcmdlIHdpdGggaXQuXHJcblx0XHQvLyBUaGlzIGVuc3VyZXMgdGhhdCB3aGVuIHlvdSBjbG9zZSB0aGUgbGFzdCB0YWIgYW5kIE9ic2lkaWFuIGNyZWF0ZXMgYSBuZXcgZW1wdHkgb25lLFxyXG5cdFx0Ly8gaXQgbWVyZ2VzIHdpdGggdGhlIGdob3N0IHRhYiBpbnN0ZWFkIG9mIGNyZWF0aW5nIGEgZHVwbGljYXRlLlxyXG5cdFx0Ly8gQlVUOiBJZiB0aGUgdXNlciBtYW51YWxseSBvcGVuZWQgYSBmaWxlIGZyb20gZXhwbG9yZXIsIHdlIHNob3VsZCBOT1QgbWVyZ2UgLSBsZXQgdGhlbSBoYXZlIHRoZWlyIHRhYi5cclxuXHRcdGNvbnN0IGlzVHJ1bHlFbXB0eSA9ICFsZWFmLnZpZXcgfHwgbGVhZi52aWV3LmdldFZpZXdUeXBlKCkgPT09ICdlbXB0eSc7XHJcblxyXG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dTdGlja3lIb21lSWNvbiAmJiBpc1RydWx5RW1wdHkpIHtcclxuXHRcdFx0Ly8gUmFuZG9tIHR5cGVzIGFuZCBwZXJpb2RpYyBub3RlczogZG9uJ3QgcGluLCBidXQgY2FuIHN0aWxsIG1lcmdlXHJcblx0XHRcdGNvbnN0IGlzUmFuZG9tID0gc2V0dGluZ3MudHlwZSA9PT0gSG9tZUJhc2VUeXBlLlJhbmRvbSB8fFxyXG5cdFx0XHRcdHNldHRpbmdzLnR5cGUgPT09IEhvbWVCYXNlVHlwZS5SYW5kb21Gb2xkZXIgfHxcclxuXHRcdFx0XHRzZXR0aW5ncy50eXBlID09PSBIb21lQmFzZVR5cGUuRGFpbHlOb3RlIHx8XHJcblx0XHRcdFx0c2V0dGluZ3MudHlwZSA9PT0gSG9tZUJhc2VUeXBlLldlZWtseU5vdGUgfHxcclxuXHRcdFx0XHRzZXR0aW5ncy50eXBlID09PSBIb21lQmFzZVR5cGUuTW9udGhseU5vdGUgfHxcclxuXHRcdFx0XHRzZXR0aW5ncy50eXBlID09PSBIb21lQmFzZVR5cGUuWWVhcmx5Tm90ZTtcclxuXHRcdFx0Y29uc3QgZ2hvc3RUYWIgPSB0aGlzLmZpbmRHaG9zdFRhYihmaWxlLCBpc1JhbmRvbSk7XHJcblxyXG5cdFx0XHRpZiAoZ2hvc3RUYWIpIHtcclxuXHRcdFx0XHQvLyBDbG9zZSB0aGUgbmV3IGVtcHR5IGxlYWYgc2luY2Ugd2UncmUgbWVyZ2luZyB3aXRoIGdob3N0IHRhYlxyXG5cdFx0XHRcdHZvaWQgbGVhZi5kZXRhY2goKTtcclxuXHJcblx0XHRcdFx0Ly8gRm9jdXMgdGhlIGdob3N0IHRhYiBhbmQgY29uZmlndXJlIGl0XHJcblx0XHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLnNldEFjdGl2ZUxlYWYoZ2hvc3RUYWIpO1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMuY29uZmlndXJlVmlldyhnaG9zdFRhYiwgZmlsZSk7XHJcblx0XHRcdFx0dGhpcy5ydW5Db21tYW5kT25PcGVuKCk7XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIE5vIGdob3N0IHRhYiBmb3VuZCwgYnV0IHN0aWNreSBpY29uIGlzIGVuYWJsZWQgLSB0aGlzIHRhYiBzaG91bGQgYmVjb21lIHRoZSBnaG9zdCB0YWJcclxuXHRcdFx0Ly8gUGluIGl0IHNvIGl0J3MgcmVjb2duaXplZCBhcyB0aGUgZ2hvc3QgdGFiXHJcblx0XHRcdHRoaXMuZ2hvc3RMZWF2ZXMuYWRkKGxlYWYpO1xyXG5cdFx0XHRpZiAoIWlzUmFuZG9tKSB7XHJcblx0XHRcdFx0bGVhZi5zZXRQaW5uZWQodHJ1ZSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGF3YWl0IGxlYWYub3BlbkZpbGUoZmlsZSk7XHJcblx0XHRhd2FpdCB0aGlzLmNvbmZpZ3VyZVZpZXcobGVhZiwgZmlsZSk7XHJcblxyXG5cdFx0Ly8gUnVuIGNvbW1hbmQgaWYgY29uZmlndXJlZFxyXG5cdFx0dGhpcy5ydW5Db21tYW5kT25PcGVuKCk7XHJcblxyXG5cdFx0cmV0dXJuIHRydWU7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBMYXN0IHZpZXcgcmVmZXJlbmNlIGZvciByZXZlcnRWaWV3IGZ1bmN0aW9uYWxpdHlcclxuXHQgKi9cclxuXHRwcml2YXRlIGxhc3RWaWV3OiBXZWFrUmVmPE1hcmtkb3duVmlldz4gfCB1bmRlZmluZWQ7XHJcblxyXG5cdC8qKlxyXG5cdCAqIENvbmZpZ3VyZSB0aGUgdmlldyBtb2RlIGZvciBhIGxlYWZcclxuXHQgKi9cclxuXHRwcml2YXRlIGFzeW5jIGNvbmZpZ3VyZVZpZXcobGVhZjogV29ya3NwYWNlTGVhZiwgZmlsZTogVEZpbGUpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdGNvbnN0IHNldHRpbmdzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3M7XHJcblx0XHRjb25zdCB2aWV3ID0gbGVhZi52aWV3O1xyXG5cclxuXHRcdC8vIE9ubHkgY29uZmlndXJlIHZpZXcgbW9kZSBmb3IgbWFya2Rvd24tbGlrZSBmaWxlc1xyXG5cdFx0aWYgKCFpc01hcmtkb3duTGlrZShmaWxlKSB8fCAhKHZpZXcgaW5zdGFuY2VvZiBNYXJrZG93blZpZXcpKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCBzdGF0ZSA9IHZpZXcuZ2V0U3RhdGUoKTtcclxuXHJcblx0XHQvLyBUcmFjayB2aWV3IGZvciByZXZlcnRWaWV3IGlmIGVuYWJsZWRcclxuXHRcdGlmIChzZXR0aW5ncy5yZXZlcnRWaWV3KSB7XHJcblx0XHRcdHRoaXMubGFzdFZpZXcgPSBuZXcgV2Vha1JlZih2aWV3KTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBBdXRvLXNjcm9sbCB0byBib3R0b20gaWYgZW5hYmxlZFxyXG5cdFx0aWYgKHNldHRpbmdzLmF1dG9TY3JvbGwpIHtcclxuXHRcdFx0Y29uc3QgY291bnQgPSB2aWV3LmVkaXRvci5saW5lQ291bnQoKTtcclxuXHJcblx0XHRcdGlmIChzdGF0ZS5tb2RlID09PSAncHJldmlldycpIHtcclxuXHRcdFx0XHR2aWV3LnByZXZpZXdNb2RlLmFwcGx5U2Nyb2xsKGNvdW50IC0gNCk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dmlldy5lZGl0b3Iuc2V0Q3Vyc29yKGNvdW50KTtcclxuXHRcdFx0XHR2aWV3LmVkaXRvci5mb2N1cygpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gU2V0IHZpZXcgbW9kZVxyXG5cdFx0aWYgKHNldHRpbmdzLm9wZW5WaWV3TW9kZSAhPT0gJ2RlZmF1bHQnKSB7XHJcblx0XHRcdHN3aXRjaCAoc2V0dGluZ3Mub3BlblZpZXdNb2RlKSB7XHJcblx0XHRcdFx0Y2FzZSAncHJldmlldyc6XHJcblx0XHRcdFx0XHRzdGF0ZS5tb2RlID0gJ3ByZXZpZXcnO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0Y2FzZSAnc291cmNlJzpcclxuXHRcdFx0XHRcdHN0YXRlLm1vZGUgPSAnc291cmNlJztcclxuXHRcdFx0XHRcdHN0YXRlLnNvdXJjZSA9IHRydWU7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRjYXNlICdsaXZlJzpcclxuXHRcdFx0XHRcdHN0YXRlLm1vZGUgPSAnc291cmNlJztcclxuXHRcdFx0XHRcdHN0YXRlLnNvdXJjZSA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGF3YWl0IGxlYWYuc2V0Vmlld1N0YXRlKHtcclxuXHRcdFx0XHR0eXBlOiAnbWFya2Rvd24nLFxyXG5cdFx0XHRcdHN0YXRlOiBzdGF0ZSxcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBSZXZlcnQgdmlldyB0byBkZWZhdWx0IHdoZW4gbmF2aWdhdGluZyBhd2F5IGZyb20gaG9tZSBiYXNlXHJcblx0ICovXHJcblx0YXN5bmMgcmV2ZXJ0VmlldygpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdGNvbnN0IHNldHRpbmdzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3M7XHJcblx0XHRpZiAoIXNldHRpbmdzLnJldmVydFZpZXcgfHwgIXRoaXMubGFzdFZpZXcgfHwgc2V0dGluZ3Mub3BlblZpZXdNb2RlID09PSAnZGVmYXVsdCcpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IHZpZXcgPSB0aGlzLmxhc3RWaWV3LmRlcmVmKCk7XHJcblx0XHRpZiAoIXZpZXcpIHtcclxuXHRcdFx0dGhpcy5sYXN0VmlldyA9IHVuZGVmaW5lZDtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IGhvbWVCYXNlU2V0dGluZ3MgPSB0aGlzLnBsdWdpbi5nZXRIb21lQmFzZVNldHRpbmdzKCk7XHJcblx0XHRjb25zdCByZXNvbHZlZFBhdGggPSBhd2FpdCBjb21wdXRlSG9tZUJhc2VQYXRoKFxyXG5cdFx0XHRob21lQmFzZVNldHRpbmdzLnR5cGUsXHJcblx0XHRcdGhvbWVCYXNlU2V0dGluZ3MudmFsdWUsXHJcblx0XHRcdHRoaXMucGx1Z2luXHJcblx0XHQpO1xyXG5cclxuXHRcdGlmICghcmVzb2x2ZWRQYXRoKSB7XHJcblx0XHRcdHRoaXMubGFzdFZpZXcgPSB1bmRlZmluZWQ7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBDaGVjayBpZiB3ZSdyZSBzdGlsbCBvbiB0aGUgaG9tZSBiYXNlIGZpbGVcclxuXHRcdGNvbnN0IGN1cnJlbnRGaWxlID0gdmlldy5maWxlO1xyXG5cdFx0aWYgKGN1cnJlbnRGaWxlICYmIGVxdWFsc0Nhc2VsZXNzKHRyaW1GaWxlKGN1cnJlbnRGaWxlKSwgcmVzb2x2ZWRQYXRoKSkge1xyXG5cdFx0XHRyZXR1cm47IC8vIFN0aWxsIG9uIGhvbWUgYmFzZSwgZG9uJ3QgcmV2ZXJ0XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gUmV2ZXJ0IHRvIGRlZmF1bHQgdmlld1xyXG5cdFx0Y29uc3Qgc3RhdGUgPSB2aWV3LmdldFN0YXRlKCk7XHJcblx0XHRjb25zdCBjb25maWcgPSB0aGlzLmFwcC52YXVsdC5jb25maWc7XHJcblx0XHRjb25zdCBtb2RlID0gY29uZmlnPy5kZWZhdWx0Vmlld01vZGUgfHwgJ3NvdXJjZSc7XHJcblx0XHRjb25zdCBzb3VyY2UgPSBjb25maWc/LmxpdmVQcmV2aWV3ICE9PSB1bmRlZmluZWQgPyAhY29uZmlnLmxpdmVQcmV2aWV3IDogZmFsc2U7XHJcblxyXG5cdFx0aWYgKFxyXG5cdFx0XHR2aWV3LmxlYWYuZ2V0Vmlld1N0YXRlKCkudHlwZSA9PT0gJ21hcmtkb3duJyAmJlxyXG5cdFx0XHQobW9kZSAhPT0gc3RhdGUubW9kZSB8fCBzb3VyY2UgIT09IHN0YXRlLnNvdXJjZSlcclxuXHRcdCkge1xyXG5cdFx0XHRzdGF0ZS5tb2RlID0gbW9kZTtcclxuXHRcdFx0c3RhdGUuc291cmNlID0gc291cmNlO1xyXG5cdFx0XHRhd2FpdCB2aWV3LmxlYWYuc2V0Vmlld1N0YXRlKHsgdHlwZTogJ21hcmtkb3duJywgc3RhdGUsIGFjdGl2ZTogdHJ1ZSB9KTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLmxhc3RWaWV3ID0gdW5kZWZpbmVkO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogUnVuIHRoZSBjb25maWd1cmVkIGNvbW1hbmQgYWZ0ZXIgb3BlbmluZ1xyXG5cdCAqL1xyXG5cdHByaXZhdGUgcnVuQ29tbWFuZE9uT3BlbigpOiB2b2lkIHtcclxuXHRcdGNvbnN0IGNvbW1hbmRJZCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbW1hbmRPbk9wZW47XHJcblx0XHRpZiAoY29tbWFuZElkKSB7XHJcblx0XHRcdC8vIFNtYWxsIGRlbGF5IHRvIGVuc3VyZSB0aGUgdmlldyBpcyByZWFkeVxyXG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRleGVjdXRlQ29tbWFuZCh0aGlzLmFwcCwgY29tbWFuZElkKTtcclxuXHRcdFx0fSwgMTAwKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEZpbmQgYW4gZXhpc3RpbmcgbGVhZiB0aGF0IGhhcyB0aGUgaG9tZSBiYXNlIGZpbGUgb3BlblxyXG5cdCAqL1xyXG5cdGZpbmRFeGlzdGluZ0hvbWVCYXNlTGVhZihmaWxlPzogVEZpbGUpOiBXb3Jrc3BhY2VMZWFmIHwgbnVsbCB7XHJcblx0XHRpZiAoIWZpbGUpIHJldHVybiBudWxsO1xyXG5cdFx0Y29uc3QgaG9tZUJhc2VQYXRoID0gZmlsZS5wYXRoO1xyXG5cclxuXHRcdGNvbnN0IGxlYXZlcyA9IExFQUZfVFlQRVMuZmxhdE1hcCh0eXBlID0+XHJcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUodHlwZSlcclxuXHRcdCk7XHJcblxyXG5cdFx0Zm9yIChjb25zdCBsZWFmIG9mIGxlYXZlcykge1xyXG5cdFx0XHRpZiAobGVhZkhhc0ZpbGUobGVhZiwgaG9tZUJhc2VQYXRoKSkge1xyXG5cdFx0XHRcdHJldHVybiBsZWFmO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIG51bGw7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDaGVjayBpZiBhIGxlYWYgaXMgYSBnaG9zdCB0YWJcclxuXHQgKiBHaG9zdCB0YWIgaXMgaWRlbnRpZmllZCBieSBiZWluZyBpbiBvdXIgaW50ZXJuYWwgZ2hvc3RMZWF2ZXMgc2V0XHJcblx0ICogT25seSB0YWJzIHNwZWNpZmljYWxseSBjcmVhdGVkIGZvciB0aGUgc3RpY2t5IGljb24gYXJlIGdob3N0IHRhYnNcclxuXHQgKi9cclxuXHRpc0dob3N0TGVhZihsZWFmOiBXb3Jrc3BhY2VMZWFmKTogYm9vbGVhbiB7XHJcblx0XHRyZXR1cm4gdGhpcy5naG9zdExlYXZlcy5oYXMobGVhZik7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBGaW5kIHRoZSBnaG9zdCB0YWIgKHRoZSBvbmUgb3BlbmVkIHZpYSBzdGlja3kgaWNvbilcclxuXHQgKiBHaG9zdCB0YWIgaXMgaWRlbnRpZmllZCBieSBiZWluZyBpbiBvdXIgaW50ZXJuYWwgZ2hvc3RMZWF2ZXMgc2V0XHJcblx0ICogT25seSByZXR1cm5zIGV4aXN0aW5nIGdob3N0IHRhYnMsIGRvZXNuJ3QgY3JlYXRlIG5ldyBvbmVzXHJcblx0ICovXHJcblx0ZmluZEdob3N0VGFiKGZpbGU/OiBURmlsZSwgaXNSYW5kb206IGJvb2xlYW4gPSBmYWxzZSk6IFdvcmtzcGFjZUxlYWYgfCBudWxsIHtcclxuXHRcdGlmICghZmlsZSkgcmV0dXJuIG51bGw7XHJcblx0XHRjb25zdCBob21lQmFzZVBhdGggPSBmaWxlLnBhdGg7XHJcblxyXG5cdFx0Ly8gVXNlIGl0ZXJhdGVBbGxMZWF2ZXMgaW5zdGVhZCBvZiBnZXRMZWF2ZXNPZlR5cGUgdG8gZmluZCB0YWJzIGV2ZW4gd2hlbiBoaWRkZW4gKHplbiBtb2RlLCBldGMuKVxyXG5cdFx0Y29uc3QgbGVhdmVzOiBXb3Jrc3BhY2VMZWFmW10gPSBbXTtcclxuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5pdGVyYXRlQWxsTGVhdmVzKChsZWFmKSA9PiB7XHJcblx0XHRcdGNvbnN0IHZpZXdUeXBlID0gbGVhZi52aWV3Py5nZXRWaWV3VHlwZSgpO1xyXG5cdFx0XHRpZiAodmlld1R5cGUgJiYgTEVBRl9UWVBFUy5pbmNsdWRlcyh2aWV3VHlwZSkpIHtcclxuXHRcdFx0XHRsZWF2ZXMucHVzaChsZWFmKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gQ2hlY2sgZm9yIGEgbWF0Y2ggaW4gb3VyIFdlYWtTZXRcclxuXHRcdGZvciAoY29uc3QgbGVhZiBvZiBsZWF2ZXMpIHtcclxuXHRcdFx0aWYgKHRoaXMuZ2hvc3RMZWF2ZXMuaGFzKGxlYWYpICYmIGxlYWZIYXNGaWxlKGxlYWYsIGhvbWVCYXNlUGF0aCkpIHtcclxuXHRcdFx0XHRyZXR1cm4gbGVhZjtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBudWxsO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogT3BlbiBob21lIGJhc2UgaW4gZ2hvc3QgdGFiIChmb3Igc3RpY2t5IGljb24pXHJcblx0ICogR2hvc3QgdGFiIGlzIHBpbm5lZCBhbmQgaGlkZGVuIChpZiBzZXR0aW5nIGVuYWJsZWQpXHJcblx0ICogT25seSBvbmUgZ2hvc3QgdGFiIHNob3VsZCBleGlzdCBhdCBhIHRpbWVcclxuXHQgKiBXb3JrcyBmb3IgZmlsZS1iYXNlZCB0eXBlcyBhbmQgR3JhcGggdmlld1xyXG5cdCAqIE5vdGU6IFJhbmRvbSB0eXBlcyBkb24ndCBwaW4gKHNpbmNlIGZpbGUgY2hhbmdlcyBlYWNoIHRpbWUpXHJcblx0ICogTm90ZTogV29ya3NwYWNlIGFuZCBOb25lIGRvbid0IHdvcmsgKHdvcmtzcGFjZSBjaGFuZ2VzIGxheW91dCwgTm9uZSBkb2Vzbid0IG9wZW4gYW55dGhpbmcpXHJcblx0ICovXHJcblx0YXN5bmMgb3BlbkhvbWVCYXNlSW5HaG9zdFRhYihvcHRpb25zOiB7XHJcblx0XHRydW5Db21tYW5kPzogYm9vbGVhbjtcclxuXHR9ID0ge30pOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuXHRcdGNvbnN0IHsgcnVuQ29tbWFuZCA9IHRydWUgfSA9IG9wdGlvbnM7XHJcblx0XHRjb25zdCBob21lQmFzZVNldHRpbmdzID0gdGhpcy5wbHVnaW4uZ2V0SG9tZUJhc2VTZXR0aW5ncygpO1xyXG5cclxuXHRcdC8vIEhhbmRsZSBub24tZmlsZSB0eXBlcyAoV29ya3NwYWNlIGFuZCBOb25lIGRvbid0IHdvcmsgd2l0aCBnaG9zdCB0YWIpXHJcblx0XHRpZiAoaG9tZUJhc2VTZXR0aW5ncy50eXBlID09PSBIb21lQmFzZVR5cGUuV29ya3NwYWNlIHx8XHJcblx0XHRcdGhvbWVCYXNlU2V0dGluZ3MudHlwZSA9PT0gSG9tZUJhc2VUeXBlLk5vbmUpIHtcclxuXHRcdFx0Ly8gRm9yIHRoZXNlIHR5cGVzLCBqdXN0IHVzZSBub3JtYWwgb3BlblxyXG5cdFx0XHRyZXR1cm4gdGhpcy5vcGVuSG9tZUJhc2VXaXRoTW9kZSgncmV0YWluJywgcnVuQ29tbWFuZCk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gR3JhcGggdmlldyBoYW5kbGluZ1xyXG5cdFx0aWYgKGhvbWVCYXNlU2V0dGluZ3MudHlwZSA9PT0gSG9tZUJhc2VUeXBlLkdyYXBoKSB7XHJcblx0XHRcdC8vIEZpbmQgZXhpc3RpbmcgZ3JhcGggZ2hvc3QgdGFiXHJcblx0XHRcdGxldCBnaG9zdFRhYiA9IHRoaXMuZmluZEdyYXBoR2hvc3RUYWIoKTtcclxuXHJcblx0XHRcdGlmIChnaG9zdFRhYikge1xyXG5cdFx0XHRcdHRoaXMuZ2hvc3RMZWF2ZXMuYWRkKGdob3N0VGFiKTtcclxuXHRcdFx0XHRnaG9zdFRhYi5zZXRQaW5uZWQodHJ1ZSk7XHJcblx0XHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLnNldEFjdGl2ZUxlYWYoZ2hvc3RUYWIsIHsgZm9jdXM6ICF0aGlzLmlzU2V0dGluZ3NNb2RhbE9wZW4oKSB9KTtcclxuXHRcdFx0XHRpZiAocnVuQ29tbWFuZCkgdGhpcy5ydW5Db21tYW5kT25PcGVuKCk7XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIENyZWF0ZSBuZXcgZ3JhcGggdGFiXHJcblx0XHRcdGNvbnN0IG5ld0xlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZigndGFiJyk7XHJcblx0XHRcdGlmIChuZXdMZWFmKSB7XHJcblx0XHRcdFx0YXdhaXQgbmV3TGVhZi5zZXRWaWV3U3RhdGUoeyB0eXBlOiAnZ3JhcGgnLCBzdGF0ZToge30gfSk7XHJcblx0XHRcdFx0YXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIEdSQVBIX0lOSVRfREVMQVkpKTtcclxuXHJcblx0XHRcdFx0dGhpcy5naG9zdExlYXZlcy5hZGQobmV3TGVhZik7XHJcblx0XHRcdFx0bmV3TGVhZi5zZXRQaW5uZWQodHJ1ZSk7XHJcblx0XHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLnNldEFjdGl2ZUxlYWYobmV3TGVhZiwgeyBmb2N1czogIXRoaXMuaXNTZXR0aW5nc01vZGFsT3BlbigpIH0pO1xyXG5cdFx0XHRcdGlmIChydW5Db21tYW5kKSB0aGlzLnJ1bkNvbW1hbmRPbk9wZW4oKTtcclxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gRmFsbGJhY2sgdG8gY29tbWFuZFxyXG5cdFx0XHRhd2FpdCB0aGlzLm9wZW5HcmFwaCgpO1xyXG5cdFx0XHRhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgR1JBUEhfQ09NTUFORF9GQUxMQkFDS19ERUxBWSkpO1xyXG5cdFx0XHRnaG9zdFRhYiA9IHRoaXMuZmluZEdyYXBoR2hvc3RUYWIoKTtcclxuXHRcdFx0aWYgKGdob3N0VGFiKSB7XHJcblx0XHRcdFx0dGhpcy5naG9zdExlYXZlcy5hZGQoZ2hvc3RUYWIpO1xyXG5cdFx0XHRcdGdob3N0VGFiLnNldFBpbm5lZCh0cnVlKTtcclxuXHRcdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uuc2V0QWN0aXZlTGVhZihnaG9zdFRhYiwgeyBmb2N1czogIXRoaXMuaXNTZXR0aW5nc01vZGFsT3BlbigpIH0pO1xyXG5cdFx0XHRcdGlmIChydW5Db21tYW5kKSB0aGlzLnJ1bkNvbW1hbmRPbk9wZW4oKTtcclxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gUmFuZG9tIHR5cGVzIGFuZCBwZXJpb2RpYyBub3RlczogZG9uJ3QgcGluIChmaWxlIGNoYW5nZXMgZWFjaCB0aW1lKVxyXG5cdFx0Ly8gQnV0IHN0aWxsIGFsbG93IG1lcmdpbmcgd2l0aCBleGlzdGluZyB0YWJzIGlmIHN0aWNreSBpY29uIGlzIGVuYWJsZWRcclxuXHRcdGNvbnN0IGlzUmFuZG9tID0gaG9tZUJhc2VTZXR0aW5ncy50eXBlID09PSBIb21lQmFzZVR5cGUuUmFuZG9tIHx8XHJcblx0XHRcdGhvbWVCYXNlU2V0dGluZ3MudHlwZSA9PT0gSG9tZUJhc2VUeXBlLlJhbmRvbUZvbGRlciB8fFxyXG5cdFx0XHRob21lQmFzZVNldHRpbmdzLnR5cGUgPT09IEhvbWVCYXNlVHlwZS5EYWlseU5vdGUgfHxcclxuXHRcdFx0aG9tZUJhc2VTZXR0aW5ncy50eXBlID09PSBIb21lQmFzZVR5cGUuV2Vla2x5Tm90ZSB8fFxyXG5cdFx0XHRob21lQmFzZVNldHRpbmdzLnR5cGUgPT09IEhvbWVCYXNlVHlwZS5Nb250aGx5Tm90ZSB8fFxyXG5cdFx0XHRob21lQmFzZVNldHRpbmdzLnR5cGUgPT09IEhvbWVCYXNlVHlwZS5ZZWFybHlOb3RlO1xyXG5cclxuXHRcdC8vIENoZWNrIGlmIHNldHRpbmdzIG1vZGFsIGlzIG9wZW5cclxuXHRcdGlmICh0aGlzLmlzU2V0dGluZ3NNb2RhbE9wZW4oKSkge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gUmVzb2x2ZSB0aGUgYWN0dWFsIGZpbGUgcGF0aCBiYXNlZCBvbiB0eXBlXHJcblx0XHRjb25zdCByZXNvbHZlZFBhdGggPSBhd2FpdCBjb21wdXRlSG9tZUJhc2VQYXRoKFxyXG5cdFx0XHRob21lQmFzZVNldHRpbmdzLnR5cGUsXHJcblx0XHRcdGhvbWVCYXNlU2V0dGluZ3MudmFsdWUsXHJcblx0XHRcdHRoaXMucGx1Z2luXHJcblx0XHQpO1xyXG5cclxuXHRcdGlmICghcmVzb2x2ZWRQYXRoKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBHZXQgdGhlIGhvbWUgYmFzZSBmaWxlIC0gdXNlIG1ldGFkYXRhQ2FjaGUgZm9yIGJldHRlciBwYXRoIHJlc29sdXRpb24gKGxpa2UgaG9tZXBhZ2UgcGx1Z2luKVxyXG5cdFx0Ly8gVGhpcyBpcyBlc3BlY2lhbGx5IGltcG9ydGFudCBmb3IgcGVyaW9kaWMgbm90ZXMgd2hpY2ggbWF5IGhhdmUgYmVlbiBqdXN0IGNyZWF0ZWRcclxuXHRcdGxldCBmaWxlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdChyZXNvbHZlZFBhdGgsICcvJyk7XHJcblxyXG5cdFx0Ly8gSWYgbm90IGZvdW5kLCB0cnkgZ2V0RmlsZUJ5UGF0aCBhcyBmYWxsYmFja1xyXG5cdFx0aWYgKCFmaWxlKSB7XHJcblx0XHRcdGZpbGUgPSBnZXRGaWxlQnlQYXRoKHRoaXMuYXBwLCByZXNvbHZlZFBhdGgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEZvciBwZXJpb2RpYyBub3RlcywgdGhlIHBhdGggbWlnaHQgYmUgdHJpbW1lZCAobm8gZXh0ZW5zaW9uKVxyXG5cdFx0Ly8gVHJ5IHdpdGggLm1kIGV4dGVuc2lvbiBpZiBzdGlsbCBub3QgZm91bmRcclxuXHRcdGlmICghZmlsZSAmJiAhcmVzb2x2ZWRQYXRoLmVuZHNXaXRoKCcubWQnKSAmJiAhcmVzb2x2ZWRQYXRoLmVuZHNXaXRoKCcuY2FudmFzJykgJiYgIXJlc29sdmVkUGF0aC5lbmRzV2l0aCgnLmJhc2UnKSkge1xyXG5cdFx0XHRjb25zdCB1bnRyaW1tZWRQYXRoID0gYCR7cmVzb2x2ZWRQYXRofS5tZGA7XHJcblx0XHRcdGZpbGUgPSBnZXRGaWxlQnlQYXRoKHRoaXMuYXBwLCB1bnRyaW1tZWRQYXRoKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIWZpbGUpIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENoZWNrIGlmIGdob3N0IHRhYiBhbHJlYWR5IGV4aXN0c1xyXG5cdFx0Y29uc3QgZ2hvc3RUYWIgPSB0aGlzLmZpbmRHaG9zdFRhYihmaWxlLCBpc1JhbmRvbSk7XHJcblxyXG5cdFx0Y29uc29sZS5kZWJ1ZygnW0hvbWUgQmFzZV0gb3BlbkhvbWVCYXNlSW5HaG9zdFRhYjonLCB7XHJcblx0XHRcdGZpbGU6IGZpbGUucGF0aCxcclxuXHRcdFx0Z2hvc3RUYWJGb3VuZDogISFnaG9zdFRhYixcclxuXHRcdFx0aXNSYW5kb206IGlzUmFuZG9tLFxyXG5cdFx0XHR6ZW5Nb2RlOiBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucygnemVubW9kZS1hY3RpdmUnKVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0aWYgKGdob3N0VGFiKSB7XHJcblx0XHRcdC8vIEdob3N0IHRhYiBleGlzdHMgLSBqdXN0IGp1bXAgdG8gaXQsIGRvbid0IGNsb3NlIG90aGVyIHRhYnNcclxuXHRcdFx0Ly8gVXNlciBjYW4gaGF2ZSBtdWx0aXBsZSBob21lIGJhc2UgdGFicyBvcGVuLCBidXQgY2xpY2tpbmcgc3RpY2t5IGljb24ganVtcHMgdG8gdGhlIFwib2NjdXBpZWRcIiBvbmVcclxuXHRcdFx0Y29uc3Qgc2hvdWxkRm9jdXMgPSAhdGhpcy5pc1NldHRpbmdzTW9kYWxPcGVuKCk7XHJcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5zZXRBY3RpdmVMZWFmKGdob3N0VGFiLCB7IGZvY3VzOiBzaG91bGRGb2N1cyB9KTtcclxuXHRcdFx0YXdhaXQgdGhpcy5jb25maWd1cmVWaWV3KGdob3N0VGFiLCBmaWxlKTtcclxuXHJcblx0XHRcdGlmIChydW5Db21tYW5kKSB7XHJcblx0XHRcdFx0dGhpcy5ydW5Db21tYW5kT25PcGVuKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gR2hvc3QgdGFiIGRvZXNuJ3QgZXhpc3QgLSBjcmVhdGUgaXRcclxuXHRcdC8vIERvbid0IGNsb3NlIGV4aXN0aW5nIHRhYnMgLSB1c2VyIGNhbiBoYXZlIG11bHRpcGxlIGhvbWUgYmFzZSB0YWJzXHJcblx0XHQvLyBUaGUgZmlyc3Qgb25lIHdlIGNyZWF0ZSB3aWxsIFwib2NjdXB5XCIgdGhlIGdob3N0IHRhYiBzbG90IChiZSBwaW5uZWQgYW5kIGhpZGRlbilcclxuXHJcblx0XHQvLyBDcmVhdGUgbmV3IGdob3N0IHRhYlxyXG5cdFx0Y29uc3QgbmV3R2hvc3RUYWIgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZigndGFiJyk7XHJcblx0XHR0aGlzLmdob3N0TGVhdmVzLmFkZChuZXdHaG9zdFRhYik7XHJcblx0XHRhd2FpdCBuZXdHaG9zdFRhYi5vcGVuRmlsZShmaWxlKTtcclxuXHJcblx0XHQvLyBQaW4gdGhlIGdob3N0IHRhYiAodW5sZXNzIGl0J3MgcmFuZG9tIC0gZmlsZSBjaGFuZ2VzIGVhY2ggdGltZSlcclxuXHRcdGlmICghaXNSYW5kb20pIHtcclxuXHRcdFx0bmV3R2hvc3RUYWIuc2V0UGlubmVkKHRydWUpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIE1hcmsgdGhlIHRhYiBoZWFkZXIgaW1tZWRpYXRlbHkgYWZ0ZXIgcGlubmluZyAoZm9yIGF1dG8taGlkZSB0YWIgY291bnRpbmcpXHJcblx0XHQvLyBVc2UgYSBzbWFsbCBkZWxheSB0byBlbnN1cmUgdGhlIHRhYiBoZWFkZXIgZXhpc3RzXHJcblx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0dGhpcy5wbHVnaW4uc3RpY2t5VGFiU2VydmljZS51cGRhdGVUYWJIZWFkZXJzKCk7XHJcblx0XHR9LCA1MCk7XHJcblxyXG5cdFx0Ly8gRm9jdXMgaXRcclxuXHRcdGNvbnN0IHNob3VsZEZvY3VzID0gIXRoaXMuaXNTZXR0aW5nc01vZGFsT3BlbigpO1xyXG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLnNldEFjdGl2ZUxlYWYobmV3R2hvc3RUYWIsIHsgZm9jdXM6IHNob3VsZEZvY3VzIH0pO1xyXG5cclxuXHRcdC8vIENvbmZpZ3VyZSB0aGUgdmlld1xyXG5cdFx0YXdhaXQgdGhpcy5jb25maWd1cmVWaWV3KG5ld0dob3N0VGFiLCBmaWxlKTtcclxuXHJcblx0XHQvLyBSdW4gY29tbWFuZCBpZiBjb25maWd1cmVkXHJcblx0XHRpZiAocnVuQ29tbWFuZCkge1xyXG5cdFx0XHR0aGlzLnJ1bkNvbW1hbmRPbk9wZW4oKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdHJ1ZTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEZpbmQgYW4gZW1wdHkgbGVhZlxyXG5cdCAqL1xyXG5cdHByaXZhdGUgZmluZEVtcHR5TGVhZigpOiBXb3Jrc3BhY2VMZWFmIHwgbnVsbCB7XHJcblx0XHRjb25zdCBsZWF2ZXMgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCdlbXB0eScpO1xyXG5cdFx0cmV0dXJuIGxlYXZlc1swXSB8fCBudWxsO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogR2V0IHRoZSBob21lIGJhc2UgZmlsZVxyXG5cdCAqL1xyXG5cdGdldEhvbWVCYXNlRmlsZSgpOiBURmlsZSB8IG51bGwge1xyXG5cdFx0Y29uc3QgaG9tZUJhc2VTZXR0aW5ncyA9IHRoaXMucGx1Z2luLmdldEhvbWVCYXNlU2V0dGluZ3MoKTtcclxuXHRcdGNvbnN0IHBhdGggPSByZXNvbHZlUGF0aFN5bmMoaG9tZUJhc2VTZXR0aW5ncy50eXBlLCBob21lQmFzZVNldHRpbmdzLnZhbHVlLCB0aGlzLmFwcCk7XHJcblx0XHRpZiAoIXBhdGgpIHJldHVybiBudWxsO1xyXG5cclxuXHRcdHJldHVybiBnZXRGaWxlQnlQYXRoKHRoaXMuYXBwLCBwYXRoKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEZhc3QgZGV0YWNoIGFsbCBsZWF2ZXMgdXNpbmcgY2hhbmdlTGF5b3V0IChsaWtlIGhvbWVwYWdlIHBsdWdpbilcclxuXHQgKiBUaGlzIGlzIG11Y2ggZmFzdGVyIHRoYW4gaXRlcmF0aW5nIGFuZCBkZXRhY2hpbmcgbGVhdmVzIGluZGl2aWR1YWxseVxyXG5cdCAqL1xyXG5cdGFzeW5jIGRldGFjaEFsbExlYXZlcygpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdGNvbnN0IGxheW91dCA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMYXlvdXQoKTtcclxuXHRcdGxheW91dC5tYWluID0ge1xyXG5cdFx0XHRcImlkXCI6IFwiNTMyNDM3MzAxNTcyNmJhOFwiLFxyXG5cdFx0XHRcInR5cGVcIjogXCJzcGxpdFwiLFxyXG5cdFx0XHRcImNoaWxkcmVuXCI6IFt7XHJcblx0XHRcdFx0XCJpZFwiOiBcIjQ1MDk3MjRmOGJmODRkYTdcIixcclxuXHRcdFx0XHRcInR5cGVcIjogXCJ0YWJzXCIsXHJcblx0XHRcdFx0XCJjaGlsZHJlblwiOiBbe1xyXG5cdFx0XHRcdFx0XCJpZFwiOiBcImU3YTdiMzAzYzYxNzg2ZGNcIixcclxuXHRcdFx0XHRcdFwidHlwZVwiOiBcImxlYWZcIixcclxuXHRcdFx0XHRcdFwic3RhdGVcIjogeyBcInR5cGVcIjogXCJlbXB0eVwiLCBcInN0YXRlXCI6IHt9LCBcImljb25cIjogXCJsdWNpZGUtZmlsZVwiLCBcInRpdGxlXCI6IFwiTmV3IHRhYlwiIH1cclxuXHRcdFx0XHR9XVxyXG5cdFx0XHR9XSxcclxuXHRcdFx0XCJkaXJlY3Rpb25cIjogXCJ2ZXJ0aWNhbFwiXHJcblx0XHR9O1xyXG5cdFx0bGF5b3V0LmFjdGl2ZSA9IFwiZTdhN2IzMDNjNjE3ODZkY1wiO1xyXG5cdFx0YXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLmNoYW5nZUxheW91dChsYXlvdXQpO1xyXG5cclxuXHRcdGlmIChQbGF0Zm9ybS5pc01vYmlsZSkge1xyXG5cclxuXHRcdFx0KHRoaXMuYXBwLndvcmtzcGFjZS5yaWdodFNwbGl0IGFzIHsgdXBkYXRlSW5mbz86ICgpID0+IHZvaWQgfSk/LnVwZGF0ZUluZm8/LigpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2xvc2UgYWxsIGxlYXZlcyBpbiB0aGUgbWFpbiB3b3Jrc3BhY2UgZXhjZXB0IHRoZSBzcGVjaWZpZWQgb25lXHJcblx0ICogU2ltcGxpZmllZCBhcHByb2FjaDogaXRlcmF0ZSBhbGwgbGVhdmVzIGFuZCBjbG9zZSB0aG9zZSBpbiBtYWluIHdvcmtzcGFjZVxyXG5cdCAqL1xyXG5cdGFzeW5jIGNsb3NlQWxsTGVhdmVzRXhjZXB0KGV4Y2VwdExlYWY6IFdvcmtzcGFjZUxlYWYgfCBudWxsKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHQvLyBVc2UgaXRlcmF0ZUFsbExlYXZlcyB0byBnZXQgQUxMIGxlYXZlc1xyXG5cdFx0Y29uc3QgbGVhdmVzVG9DbG9zZTogV29ya3NwYWNlTGVhZltdID0gW107XHJcblxyXG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcclxuXHRcdFx0Ly8gU2tpcCB0aGUgZXhjZXB0aW9uIGxlYWZcclxuXHRcdFx0aWYgKGxlYWYgPT09IGV4Y2VwdExlYWYpIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFRyeSB0byBkZXRlcm1pbmUgaWYgdGhpcyBpcyBhIG1haW4gd29ya3NwYWNlIGxlYWZcclxuXHRcdFx0Ly8gR2V0IHRoZSB2aWV3J3MgY29udGFpbmVyIGVsZW1lbnRcclxuXHRcdFx0Y29uc3QgdmlldyA9IGxlYWYudmlldztcclxuXHRcdFx0bGV0IGNvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuXHJcblx0XHRcdGlmICh2aWV3KSB7XHJcblx0XHRcdFx0Y29uc3Qgdmlld0FueSA9IHZpZXcgYXMgdW5rbm93biBhcyB7IGNvbnRhaW5lckVsPzogSFRNTEVsZW1lbnQgfTtcclxuXHRcdFx0XHRjb250YWluZXIgPSB2aWV3QW55LmNvbnRhaW5lckVsIHx8IG51bGw7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIElmIG5vIGNvbnRhaW5lciBmcm9tIHZpZXcsIHRyeSBsZWFmJ3MgY29udGFpbmVyRWxcclxuXHRcdFx0aWYgKCFjb250YWluZXIpIHtcclxuXHRcdFx0XHRjb25zdCBsZWFmQW55ID0gbGVhZiBhcyB1bmtub3duIGFzIHsgY29udGFpbmVyRWw/OiBIVE1MRWxlbWVudCB9O1xyXG5cdFx0XHRcdGNvbnRhaW5lciA9IGxlYWZBbnkuY29udGFpbmVyRWwgfHwgbnVsbDtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKGNvbnRhaW5lcikge1xyXG5cdFx0XHRcdC8vIENoZWNrIGlmIGl0J3MgaW4gdGhlIG1haW4gd29ya3NwYWNlIChyb290LCBub3Qgc2lkZWJhcilcclxuXHRcdFx0XHRjb25zdCByb290V29ya3NwYWNlID0gY29udGFpbmVyLmNsb3Nlc3QoJy53b3Jrc3BhY2Utc3BsaXQubW9kLXZlcnRpY2FsLm1vZC1yb290Jyk7XHJcblx0XHRcdFx0Y29uc3QgbGVmdFNpZGViYXIgPSBjb250YWluZXIuY2xvc2VzdCgnLndvcmtzcGFjZS1zcGxpdC5tb2QtbGVmdC1zcGxpdCcpO1xyXG5cdFx0XHRcdGNvbnN0IHJpZ2h0U2lkZWJhciA9IGNvbnRhaW5lci5jbG9zZXN0KCcud29ya3NwYWNlLXNwbGl0Lm1vZC1yaWdodC1zcGxpdCcpO1xyXG5cclxuXHRcdFx0XHRpZiAocm9vdFdvcmtzcGFjZSAmJiAhbGVmdFNpZGViYXIgJiYgIXJpZ2h0U2lkZWJhcikge1xyXG5cdFx0XHRcdFx0bGVhdmVzVG9DbG9zZS5wdXNoKGxlYWYpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyBJZiB3ZSBjYW4ndCBmaW5kIGNvbnRhaW5lciwgc3RpbGwgdHJ5IHRvIGNsb3NlIGl0IGlmIGl0J3MgaW4gbWFpbiB3b3Jrc3BhY2VcclxuXHRcdFx0XHQvLyBUaGlzIGhhbmRsZXMgZWRnZSBjYXNlcyB3aGVyZSBjb250YWluZXIgZGV0ZWN0aW9uIGZhaWxzXHJcblx0XHRcdFx0Ly8gT25seSBjbG9zZSBpZiB3ZSdyZSBjbG9zaW5nIGV2ZXJ5dGhpbmcgKGV4Y2VwdExlYWYgaXMgbnVsbClcclxuXHRcdFx0XHRpZiAoZXhjZXB0TGVhZiA9PT0gbnVsbCkge1xyXG5cdFx0XHRcdFx0Ly8gVHJ5IHRvIGdldCBsZWFmJ3MgdmlldyBzdGF0ZSB0byBjaGVjayBpZiBpdCdzIGEgbWFpbiB3b3Jrc3BhY2UgdGFiXHJcblx0XHRcdFx0XHR0cnkge1xyXG5cdFx0XHRcdFx0XHRjb25zdCB2aWV3U3RhdGUgPSBsZWFmLmdldFZpZXdTdGF0ZSgpO1xyXG5cdFx0XHRcdFx0XHQvLyBJZiBpdCBoYXMgYSB2aWV3IHN0YXRlLCBpdCdzIGxpa2VseSBhIG1haW4gd29ya3NwYWNlIHRhYlxyXG5cdFx0XHRcdFx0XHRpZiAodmlld1N0YXRlKSB7XHJcblx0XHRcdFx0XHRcdFx0bGVhdmVzVG9DbG9zZS5wdXNoKGxlYWYpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9IGNhdGNoIHtcclxuXHRcdFx0XHRcdFx0Ly8gSWYgd2UgY2FuJ3QgZ2V0IHZpZXcgc3RhdGUsIHNraXAgaXRcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHJcblx0XHQvLyBDbG9zZSBhbGwgaWRlbnRpZmllZCBsZWF2ZXNcclxuXHRcdGZvciAoY29uc3QgbGVhZiBvZiBsZWF2ZXNUb0Nsb3NlKSB7XHJcblx0XHRcdHZvaWQgbGVhZi5kZXRhY2goKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBXYWl0IGZvciBkZXRhY2htZW50cyB0byBjb21wbGV0ZVxyXG5cdFx0YXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDIwMCkpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogRmluZCBhbiBleGlzdGluZyBncmFwaCBsZWFmIHRoYXQgc2hvdWxkIGJlIHRyZWF0ZWQgYXMgYSBnaG9zdCB0YWJcclxuXHQgKi9cclxuXHRwcml2YXRlIGZpbmRHcmFwaEdob3N0VGFiKCk6IFdvcmtzcGFjZUxlYWYgfCBudWxsIHtcclxuXHRcdGxldCBncmFwaExlYXZlczogV29ya3NwYWNlTGVhZltdID0gW107XHJcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuaXRlcmF0ZUFsbExlYXZlcygobGVhZikgPT4ge1xyXG5cdFx0XHRpZiAobGVhZi52aWV3Py5nZXRWaWV3VHlwZSgpID09PSAnZ3JhcGgnKSB7XHJcblx0XHRcdFx0Z3JhcGhMZWF2ZXMucHVzaChsZWFmKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gUHJlZmVyIHBpbm5lZCBncmFwaCB2aWV3XHJcblx0XHRjb25zdCBwaW5uZWQgPSBncmFwaExlYXZlcy5maW5kKGwgPT4gbC5nZXRWaWV3U3RhdGUoKS5waW5uZWQgPT09IHRydWUpO1xyXG5cdFx0aWYgKHBpbm5lZCkgcmV0dXJuIHBpbm5lZDtcclxuXHJcblx0XHQvLyBGYWxsYmFjayB0byBmaXJzdCBncmFwaCB2aWV3IGlmIG9ubHkgb25lIGV4aXN0c1xyXG5cdFx0aWYgKGdyYXBoTGVhdmVzLmxlbmd0aCA9PT0gMSAmJiBncmFwaExlYXZlc1swXSkgcmV0dXJuIGdyYXBoTGVhdmVzWzBdO1xyXG5cclxuXHRcdHJldHVybiBudWxsO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2hlY2sgaWYgdGhlIGZvY3VzZWQgdGFiIGlzIHRoZSBob21lIGJhc2VcclxuXHQgKi9cclxuXHRpc0ZvY3VzZWRPbkhvbWVCYXNlKCk6IGJvb2xlYW4ge1xyXG5cdFx0Y29uc3QgYWN0aXZlTGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE9WaWV3KT8ubGVhZjtcclxuXHRcdGlmICghYWN0aXZlTGVhZikgcmV0dXJuIGZhbHNlO1xyXG5cclxuXHRcdGNvbnN0IGhvbWVCYXNlU2V0dGluZ3MgPSB0aGlzLnBsdWdpbi5nZXRIb21lQmFzZVNldHRpbmdzKCk7XHJcblxyXG5cdFx0Ly8gSGFuZGxlIEdyYXBoIHZpZXdcclxuXHRcdGlmIChob21lQmFzZVNldHRpbmdzLnR5cGUgPT09IEhvbWVCYXNlVHlwZS5HcmFwaCkge1xyXG5cdFx0XHRyZXR1cm4gYWN0aXZlTGVhZi52aWV3Py5nZXRWaWV3VHlwZSgpID09PSAnZ3JhcGgnO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEhhbmRsZSBmaWxlLWJhc2VkIHR5cGVzXHJcblx0XHRjb25zdCBob21lQmFzZUZpbGUgPSB0aGlzLmdldEhvbWVCYXNlRmlsZSgpO1xyXG5cdFx0aWYgKCFob21lQmFzZUZpbGUpIHJldHVybiBmYWxzZTtcclxuXHJcblx0XHRyZXR1cm4gbGVhZkhhc0ZpbGUoYWN0aXZlTGVhZiwgaG9tZUJhc2VGaWxlLnBhdGgpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2hlY2sgaWYgaG9tZSBiYXNlIGZpbGUgZXhpc3RzXHJcblx0ICovXHJcblx0aG9tZUJhc2VFeGlzdHMoKTogYm9vbGVhbiB7XHJcblx0XHRjb25zdCBob21lQmFzZVNldHRpbmdzID0gdGhpcy5wbHVnaW4uZ2V0SG9tZUJhc2VTZXR0aW5ncygpO1xyXG5cdFx0Y29uc3QgcGF0aCA9IHJlc29sdmVQYXRoU3luYyhob21lQmFzZVNldHRpbmdzLnR5cGUsIGhvbWVCYXNlU2V0dGluZ3MudmFsdWUsIHRoaXMuYXBwKTtcclxuXHRcdGlmICghcGF0aCkgcmV0dXJuIGZhbHNlO1xyXG5cclxuXHRcdHJldHVybiBnZXRGaWxlQnlQYXRoKHRoaXMuYXBwLCBwYXRoKSAhPT0gbnVsbDtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldCB0aGUgbmF0aXZlIE9ic2lkaWFuIG9wZW4gYmVoYXZpb3Igc2V0dGluZyAoZnJvbSBhcHAuanNvbilcclxuXHQgKiBAcmV0dXJucyBUaGUgbmF0aXZlIHNldHRpbmcgdmFsdWUgb3IgdW5kZWZpbmVkIGlmIG5vdCBzdXBwb3J0ZWQvZm91bmRcclxuXHQgKi9cclxuXHRnZXROYXRpdmVPcGVuQmVoYXZpb3IoKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcclxuXHRcdC8vIFRoZSBjb25maWcgcHJvcGVydHkgaXMgYWRkZWQgdmlhIGludGVybmFsIHR5cGUgYXVnbWVudGF0aW9uXHJcblx0XHRjb25zdCBjb25maWcgPSB0aGlzLmFwcC52YXVsdC5jb25maWc7XHJcblx0XHRpZiAoIWNvbmZpZykgcmV0dXJuIHVuZGVmaW5lZDtcclxuXHJcblx0XHRyZXR1cm4gY29uZmlnLm9wZW5CZWhhdmlvcjtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENoZWNrIGlmIHRoZSBzZXR0aW5ncyBtb2RhbCBpcyBjdXJyZW50bHkgb3BlblxyXG5cdCAqL1xyXG5cdHByaXZhdGUgaXNTZXR0aW5nc01vZGFsT3BlbigpOiBib29sZWFuIHtcclxuXHRcdC8vIENoZWNrIGZvciBzZXR0aW5ncyBtb2RhbCBieSBsb29raW5nIGZvciB0aGUgbW9kYWwgY29udGFpbmVyXHJcblx0XHQvLyBUcnkgbXVsdGlwbGUgc2VsZWN0b3JzIHRvIGJlIG1vcmUgcm9idXN0XHJcblx0XHRjb25zdCBzZXR0aW5nc01vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLWNvbnRhaW5lci5tb2Qtc2V0dGluZ3MnKSB8fFxyXG5cdFx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwubW9kLXNldHRpbmdzJykgfHxcclxuXHRcdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnZlcnRpY2FsLXRhYi1jb250ZW50Jyk7XHJcblxyXG5cdFx0Ly8gQWxzbyBjaGVjayBpZiBhbnkgbW9kYWwgaXMgb3BlbiBhbmQgY29udGFpbnMgc2V0dGluZ3MgY29udGVudFxyXG5cdFx0aWYgKCFzZXR0aW5nc01vZGFsKSB7XHJcblx0XHRcdGNvbnN0IGFsbE1vZGFscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tb2RhbC1jb250YWluZXInKTtcclxuXHRcdFx0Zm9yIChjb25zdCBtb2RhbCBvZiBBcnJheS5mcm9tKGFsbE1vZGFscykpIHtcclxuXHRcdFx0XHRpZiAobW9kYWwucXVlcnlTZWxlY3RvcignLnZlcnRpY2FsLXRhYi1jb250ZW50JykgfHxcclxuXHRcdFx0XHRcdG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy5zZXR0aW5ncy1jb250ZW50JykgfHxcclxuXHRcdFx0XHRcdG1vZGFsLmNsYXNzTGlzdC5jb250YWlucygnbW9kLXNldHRpbmdzJykpIHtcclxuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBzZXR0aW5nc01vZGFsICE9PSBudWxsO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogU2V0IHRoZSBhY3RpdmUgZmlsZSBhcyBob21lIGJhc2VcclxuXHQgKi9cclxuXHRhc3luYyBzZXRBY3RpdmVGaWxlQXNIb21lQmFzZSgpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuXHRcdGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xyXG5cdFx0aWYgKCFhY3RpdmVGaWxlKSByZXR1cm4gZmFsc2U7XHJcblxyXG5cdFx0Ly8gQ2hlY2sgaWYgdGhlIGZpbGUgdHlwZSBpcyBzdXBwb3J0ZWRcclxuXHRcdGlmICghaXNTdXBwb3J0ZWRFeHRlbnNpb24oYWN0aXZlRmlsZS5leHRlbnNpb24udG9Mb3dlckNhc2UoKSkpIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zZXBhcmF0ZU1vYmlsZSAmJiBQbGF0Zm9ybS5pc01vYmlsZSkge1xyXG5cdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2JpbGVIb21lQmFzZVR5cGUgPSBIb21lQmFzZVR5cGUuRmlsZTtcclxuXHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubW9iaWxlSG9tZUJhc2VWYWx1ZSA9IGFjdGl2ZUZpbGUucGF0aDtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmhvbWVCYXNlVHlwZSA9IEhvbWVCYXNlVHlwZS5GaWxlO1xyXG5cdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5ob21lQmFzZVZhbHVlID0gYWN0aXZlRmlsZS5wYXRoO1xyXG5cdFx0fVxyXG5cclxuXHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0cmV0dXJuIHRydWU7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDaGVjayBpZiBhY3RpdmUgZmlsZSBjYW4gYmUgc2V0IGFzIGhvbWUgYmFzZVxyXG5cdCAqL1xyXG5cdGNhblNldEFjdGl2ZUZpbGVBc0hvbWVCYXNlKCk6IGJvb2xlYW4ge1xyXG5cdFx0Y29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XHJcblx0XHRpZiAoIWFjdGl2ZUZpbGUpIHJldHVybiBmYWxzZTtcclxuXHJcblx0XHRyZXR1cm4gaXNTdXBwb3J0ZWRFeHRlbnNpb24oYWN0aXZlRmlsZS5leHRlbnNpb24udG9Mb3dlckNhc2UoKSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBSZXN0b3JlIGdob3N0IGxlYXZlcyBmcm9tIHByZXZpb3VzIHNlc3Npb25cclxuXHQgKiBUaGlzIGlkZW50aWZpZXMgcGlubmVkIGhvbWUgYmFzZSB0YWJzIHRoYXQgc2hvdWxkIGJlIHRyZWF0ZWQgYXMgZ2hvc3QgbGVhdmVzXHJcblx0ICovXHJcblx0cmVzdG9yZUdob3N0TGVhdmVzKCk6IHZvaWQge1xyXG5cdFx0aWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93U3RpY2t5SG9tZUljb24pIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IGhvbWVCYXNlU2V0dGluZ3MgPSB0aGlzLnBsdWdpbi5nZXRIb21lQmFzZVNldHRpbmdzKCk7XHJcblx0XHRjb25zdCBob21lQmFzZVBhdGggPSByZXNvbHZlUGF0aFN5bmMoaG9tZUJhc2VTZXR0aW5ncy50eXBlLCBob21lQmFzZVNldHRpbmdzLnZhbHVlLCB0aGlzLmFwcCk7XHJcblxyXG5cdFx0Ly8gRm9yIGZpbGUtYmFzZWQgdHlwZXMsIHdlIG5lZWQgYSBwYXRoXHJcblx0XHRpZiAoIWhvbWVCYXNlUGF0aCAmJiBob21lQmFzZVNldHRpbmdzLnR5cGUgIT09IEhvbWVCYXNlVHlwZS5HcmFwaCkgcmV0dXJuO1xyXG5cclxuXHRcdC8vIEZvciByYW5kb20vZHluYW1pYyB0eXBlcywgd2UgZG9uJ3QgcmVzdG9yZSBnaG9zdCBsZWF2ZXNcclxuXHRcdGNvbnN0IGlzUmFuZG9tID0gaG9tZUJhc2VTZXR0aW5ncy50eXBlID09PSBIb21lQmFzZVR5cGUuUmFuZG9tIHx8XHJcblx0XHRcdGhvbWVCYXNlU2V0dGluZ3MudHlwZSA9PT0gSG9tZUJhc2VUeXBlLlJhbmRvbUZvbGRlciB8fFxyXG5cdFx0XHRob21lQmFzZVNldHRpbmdzLnR5cGUgPT09IEhvbWVCYXNlVHlwZS5EYWlseU5vdGUgfHxcclxuXHRcdFx0aG9tZUJhc2VTZXR0aW5ncy50eXBlID09PSBIb21lQmFzZVR5cGUuV2Vla2x5Tm90ZSB8fFxyXG5cdFx0XHRob21lQmFzZVNldHRpbmdzLnR5cGUgPT09IEhvbWVCYXNlVHlwZS5Nb250aGx5Tm90ZSB8fFxyXG5cdFx0XHRob21lQmFzZVNldHRpbmdzLnR5cGUgPT09IEhvbWVCYXNlVHlwZS5ZZWFybHlOb3RlO1xyXG5cclxuXHRcdGlmIChpc1JhbmRvbSkgcmV0dXJuO1xyXG5cclxuXHRcdC8vIEhhbmRsZSBHcmFwaCB2aWV3XHJcblx0XHRpZiAoaG9tZUJhc2VTZXR0aW5ncy50eXBlID09PSBIb21lQmFzZVR5cGUuR3JhcGgpIHtcclxuXHRcdFx0Y29uc3QgZ2hvc3RUYWIgPSB0aGlzLmZpbmRHcmFwaEdob3N0VGFiKCk7XHJcblx0XHRcdGlmIChnaG9zdFRhYiAmJiBnaG9zdFRhYi5nZXRWaWV3U3RhdGUoKS5waW5uZWQgPT09IHRydWUpIHtcclxuXHRcdFx0XHR0aGlzLmdob3N0TGVhdmVzLmFkZChnaG9zdFRhYik7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEZpbmQgcGlubmVkIGhvbWUgYmFzZSB0YWJzIGFuZCBtYXJrIHRoZSBmaXJzdCBvbmUgYXMgYSBnaG9zdCBsZWFmXHJcblx0XHRjb25zdCBsZWF2ZXM6IFdvcmtzcGFjZUxlYWZbXSA9IFtdO1xyXG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcclxuXHRcdFx0Y29uc3Qgdmlld1R5cGUgPSBsZWFmLnZpZXc/LmdldFZpZXdUeXBlKCk7XHJcblx0XHRcdGlmICh2aWV3VHlwZSAmJiBMRUFGX1RZUEVTLmluY2x1ZGVzKHZpZXdUeXBlKSkge1xyXG5cdFx0XHRcdGxlYXZlcy5wdXNoKGxlYWYpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHRmb3IgKGNvbnN0IGxlYWYgb2YgbGVhdmVzKSB7XHJcblx0XHRcdGlmIChob21lQmFzZVBhdGggJiYgbGVhZkhhc0ZpbGUobGVhZiwgaG9tZUJhc2VQYXRoKSkge1xyXG5cdFx0XHRcdGNvbnN0IHZpZXdTdGF0ZSA9IGxlYWYuZ2V0Vmlld1N0YXRlKCk7XHJcblx0XHRcdFx0aWYgKHZpZXdTdGF0ZS5waW5uZWQgPT09IHRydWUgJiYgIXRoaXMuZ2hvc3RMZWF2ZXMuaGFzKGxlYWYpKSB7XHJcblx0XHRcdFx0XHQvLyBGb3VuZCBhIHBpbm5lZCBob21lIGJhc2UgdGFiIC0gbWFyayBpdCBhcyBnaG9zdFxyXG5cdFx0XHRcdFx0dGhpcy5naG9zdExlYXZlcy5hZGQobGVhZik7XHJcblx0XHRcdFx0XHQvLyBPbmx5IHJlc3RvcmUgb25lIGdob3N0IGxlYWYgKHRoZSBmaXJzdCBwaW5uZWQgaG9tZSBiYXNlIHRhYilcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufVxyXG4iLCAiLyoqXHJcbiAqIEZpbGUgVXRpbGl0aWVzXHJcbiAqIEhlbHBlciBmdW5jdGlvbnMgZm9yIGZpbGUgdHlwZSBkZXRlY3Rpb24gYW5kIGhhbmRsaW5nXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQXBwLCBURmlsZSwgV29ya3NwYWNlTGVhZiB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbi8qKlxyXG4gKiBTdXBwb3J0ZWQgZmlsZSBleHRlbnNpb25zIGZvciBob21lIGJhc2VcclxuICovXHJcbmV4cG9ydCBjb25zdCBTVVBQT1JURURfRVhURU5TSU9OUyA9IFsnbWQnLCAnbWR4JywgJ2NhbnZhcycsICdiYXNlJywgJ2thbmJhbiddIGFzIGNvbnN0O1xyXG5leHBvcnQgdHlwZSBTdXBwb3J0ZWRFeHRlbnNpb24gPSB0eXBlb2YgU1VQUE9SVEVEX0VYVEVOU0lPTlNbbnVtYmVyXTtcclxuXHJcbi8qKlxyXG4gKiBWaWV3IHR5cGVzIGNvcnJlc3BvbmRpbmcgdG8gZmlsZSBleHRlbnNpb25zXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgVklFV19UWVBFX01BUDogUmVjb3JkPFN1cHBvcnRlZEV4dGVuc2lvbiwgc3RyaW5nPiA9IHtcclxuXHQnbWQnOiAnbWFya2Rvd24nLFxyXG5cdCdtZHgnOiAnbWFya2Rvd24nLFxyXG5cdCdjYW52YXMnOiAnY2FudmFzJyxcclxuXHQnYmFzZSc6ICdiYXNlcycsXHJcblx0J2thbmJhbic6ICdrYW5iYW4nLFxyXG59O1xyXG5cclxuLyoqXHJcbiAqIENoZWNrIGlmIGEgZmlsZSBleHRlbnNpb24gaXMgc3VwcG9ydGVkXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaXNTdXBwb3J0ZWRFeHRlbnNpb24oZXh0ZW5zaW9uOiBzdHJpbmcpOiBleHRlbnNpb24gaXMgU3VwcG9ydGVkRXh0ZW5zaW9uIHtcclxuXHRyZXR1cm4gU1VQUE9SVEVEX0VYVEVOU0lPTlMuaW5jbHVkZXMoZXh0ZW5zaW9uIGFzIFN1cHBvcnRlZEV4dGVuc2lvbik7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgdGhlIGZpbGUgZXh0ZW5zaW9uIGZyb20gYSBwYXRoXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RmlsZUV4dGVuc2lvbihwYXRoOiBzdHJpbmcpOiBzdHJpbmcge1xyXG5cdGNvbnN0IHBhcnRzID0gcGF0aC5zcGxpdCgnLicpO1xyXG5cdHJldHVybiBwYXJ0cy5sZW5ndGggPiAxID8gKHBhcnRzW3BhcnRzLmxlbmd0aCAtIDFdID8/ICcnKS50b0xvd2VyQ2FzZSgpIDogJyc7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgdGhlIHZpZXcgdHlwZSBmb3IgYSBmaWxlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Vmlld1R5cGVGb3JGaWxlKGZpbGU6IFRGaWxlKTogc3RyaW5nIHtcclxuXHRjb25zdCBleHQgPSBmaWxlLmV4dGVuc2lvbi50b0xvd2VyQ2FzZSgpO1xyXG5cdGlmIChpc1N1cHBvcnRlZEV4dGVuc2lvbihleHQpKSB7XHJcblx0XHRyZXR1cm4gVklFV19UWVBFX01BUFtleHRdO1xyXG5cdH1cclxuXHRyZXR1cm4gJ21hcmtkb3duJzsgLy8gRGVmYXVsdCBmYWxsYmFja1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgYSBmaWxlIGlzIGEgbWFya2Rvd24tbGlrZSBmaWxlIChtZCBvciBtZHgpXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaXNNYXJrZG93bkxpa2UoZmlsZTogVEZpbGUpOiBib29sZWFuIHtcclxuXHRjb25zdCBleHQgPSBmaWxlLmV4dGVuc2lvbi50b0xvd2VyQ2FzZSgpO1xyXG5cdHJldHVybiBleHQgPT09ICdtZCcgfHwgZXh0ID09PSAnbWR4JztcclxufVxyXG5cclxuLyoqXHJcbiAqIENoZWNrIGlmIGEgZmlsZSBpcyBhbiBNRFggZmlsZVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGlzTWR4RmlsZShmaWxlOiBURmlsZSk6IGJvb2xlYW4ge1xyXG5cdHJldHVybiBmaWxlLmV4dGVuc2lvbi50b0xvd2VyQ2FzZSgpID09PSAnbWR4JztcclxufVxyXG5cclxuLyoqXHJcbiAqIENoZWNrIGlmIGEgZmlsZSBpcyBhIGNhbnZhcyBmaWxlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaXNDYW52YXNGaWxlKGZpbGU6IFRGaWxlKTogYm9vbGVhbiB7XHJcblx0cmV0dXJuIGZpbGUuZXh0ZW5zaW9uLnRvTG93ZXJDYXNlKCkgPT09ICdjYW52YXMnO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgYSBmaWxlIGlzIGEgYmFzZSBmaWxlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaXNCYXNlRmlsZShmaWxlOiBURmlsZSk6IGJvb2xlYW4ge1xyXG5cdHJldHVybiBmaWxlLmV4dGVuc2lvbi50b0xvd2VyQ2FzZSgpID09PSAnYmFzZSc7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgYSBmaWxlIGJ5IHBhdGgsIHRyeWluZyB3aXRoIGFuZCB3aXRob3V0IGV4dGVuc2lvblxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEZpbGVCeVBhdGgoYXBwOiBBcHAsIHBhdGg6IHN0cmluZyk6IFRGaWxlIHwgbnVsbCB7XHJcblx0Ly8gVHJ5IGV4YWN0IHBhdGggZmlyc3RcclxuXHRjb25zdCBleGFjdE1hdGNoID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChwYXRoKTtcclxuXHRpZiAoZXhhY3RNYXRjaCBpbnN0YW5jZW9mIFRGaWxlKSB7XHJcblx0XHRyZXR1cm4gZXhhY3RNYXRjaDtcclxuXHR9XHJcblxyXG5cdC8vIFRyeSB1c2luZyBtZXRhZGF0YUNhY2hlIGZvciBmdXp6eSBtYXRjaGluZ1xyXG5cdGNvbnN0IGZpbGUgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdChwYXRoLCAnLycpO1xyXG5cdHJldHVybiBmaWxlO1xyXG59XHJcblxyXG4vKipcclxuICogVHJpbSB0aGUgZmlsZSBleHRlbnNpb24gZnJvbSBhIHBhdGggZm9yIGNvbXBhcmlzb25cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiB0cmltRmlsZUV4dGVuc2lvbihwYXRoOiBzdHJpbmcpOiBzdHJpbmcge1xyXG5cdGNvbnN0IGxhc3REb3QgPSBwYXRoLmxhc3RJbmRleE9mKCcuJyk7XHJcblx0aWYgKGxhc3REb3QgPiAwKSB7XHJcblx0XHRjb25zdCBleHQgPSBwYXRoLnNsaWNlKGxhc3REb3QgKyAxKS50b0xvd2VyQ2FzZSgpO1xyXG5cdFx0aWYgKFNVUFBPUlRFRF9FWFRFTlNJT05TLmluY2x1ZGVzKGV4dCBhcyBTdXBwb3J0ZWRFeHRlbnNpb24pKSB7XHJcblx0XHRcdHJldHVybiBwYXRoLnNsaWNlKDAsIGxhc3REb3QpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRyZXR1cm4gcGF0aDtcclxufVxyXG5cclxuLyoqXHJcbiAqIENvbXBhcmUgdHdvIHBhdGhzLCBpZ25vcmluZyBjYXNlIGFuZCBleHRlbnNpb24gZGlmZmVyZW5jZXNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBwYXRoc0VxdWFsKHBhdGgxOiBzdHJpbmcsIHBhdGgyOiBzdHJpbmcpOiBib29sZWFuIHtcclxuXHRjb25zdCBub3JtMSA9IHRyaW1GaWxlRXh0ZW5zaW9uKHBhdGgxKS50b0xvd2VyQ2FzZSgpO1xyXG5cdGNvbnN0IG5vcm0yID0gdHJpbUZpbGVFeHRlbnNpb24ocGF0aDIpLnRvTG93ZXJDYXNlKCk7XHJcblx0cmV0dXJuIG5vcm0xID09PSBub3JtMjtcclxufVxyXG5cclxuLyoqXHJcbiAqIENoZWNrIGlmIGEgbGVhZiBpcyBzaG93aW5nIGEgc3BlY2lmaWMgZmlsZVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGxlYWZIYXNGaWxlKGxlYWY6IFdvcmtzcGFjZUxlYWYsIGZpbGVQYXRoOiBzdHJpbmcpOiBib29sZWFuIHtcclxuXHRjb25zdCBzdGF0ZSA9IGxlYWYudmlldz8uZ2V0U3RhdGU/LigpO1xyXG5cdGNvbnN0IGxlYWZGaWxlID0gc3RhdGU/LmZpbGUgYXMgc3RyaW5nIHwgdW5kZWZpbmVkO1xyXG5cdFxyXG5cdGlmICghbGVhZkZpbGUpIHJldHVybiBmYWxzZTtcclxuXHRcclxuXHRyZXR1cm4gcGF0aHNFcXVhbChsZWFmRmlsZSwgZmlsZVBhdGgpO1xyXG59XHJcbiIsICIvKipcclxuICogSG9tZSBCYXNlIFR5cGUgUmVzb2x1dGlvbiBVdGlsaXRpZXNcclxuICogUmVzb2x2ZXMgaG9tZSBiYXNlIHBhdGhzIGJhc2VkIG9uIHR5cGUgKEZpbGUsIFdvcmtzcGFjZSwgUmFuZG9tLCBldGMuKVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IEFwcCwgVEZpbGUsIFRGb2xkZXIsIG1vbWVudCwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBIb21lQmFzZVR5cGUgfSBmcm9tICcuLi9zZXR0aW5ncyc7XHJcbmltcG9ydCB0eXBlIEhvbWVCYXNlUGx1Z2luIGZyb20gJy4uL21haW4nO1xyXG5pbXBvcnQge1xyXG5cdGNyZWF0ZURhaWx5Tm90ZSwgZ2V0RGFpbHlOb3RlLCBnZXRBbGxEYWlseU5vdGVzLFxyXG5cdGNyZWF0ZVdlZWtseU5vdGUsIGdldFdlZWtseU5vdGUsIGdldEFsbFdlZWtseU5vdGVzLFxyXG5cdGNyZWF0ZU1vbnRobHlOb3RlLCBnZXRNb250aGx5Tm90ZSwgZ2V0QWxsTW9udGhseU5vdGVzLFxyXG5cdGNyZWF0ZVF1YXJ0ZXJseU5vdGUsIGdldFF1YXJ0ZXJseU5vdGUsIGdldEFsbFF1YXJ0ZXJseU5vdGVzLFxyXG5cdGNyZWF0ZVllYXJseU5vdGUsIGdldFllYXJseU5vdGUsIGdldEFsbFllYXJseU5vdGVzLFxyXG59IGZyb20gJ29ic2lkaWFuLWRhaWx5LW5vdGVzLWludGVyZmFjZSc7XHJcblxyXG4vKipcclxuICogR2V0IGEgcmFuZG9tIGZpbGUgZnJvbSB0aGUgdmF1bHRcclxuICogQHBhcmFtIGFwcCBUaGUgT2JzaWRpYW4gYXBwIGluc3RhbmNlXHJcbiAqIEBwYXJhbSByb290IE9wdGlvbmFsIGZvbGRlciBwYXRoIE9SIGZpbGVuYW1lIHBhdHRlcm4gKGUuZy4sIFwiaW5kZXgubWRcIiB0byBmaW5kIGFsbCBmaWxlcyBuYW1lZCBpbmRleC5tZClcclxuICovXHJcbmZ1bmN0aW9uIHJhbmRvbUZpbGUoYXBwOiBBcHAsIHJvb3Q/OiBzdHJpbmcpOiBURmlsZSB8IG51bGwge1xyXG5cdGxldCBmaWxlczogVEZpbGVbXSA9IFtdO1xyXG5cdFxyXG5cdGlmIChyb290KSB7XHJcblx0XHQvLyBGaXJzdCB0cnkgYXMgYSBmb2xkZXIgcGF0aFxyXG5cdFx0Y29uc3QgcmVzb2x2ZWRSb290ID0gYXBwLnZhdWx0LmdldEZvbGRlckJ5UGF0aChyb290KTtcclxuXHRcdGlmIChyZXNvbHZlZFJvb3QpIHtcclxuXHRcdFx0Ly8gSXQncyBhIGZvbGRlciAtIGdldCBhbGwgZmlsZXMgaW4gaXRcclxuXHRcdFx0ZmlsZXMgPSBnZXRGaWxlc0luRm9sZGVyKHJlc29sdmVkUm9vdCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQvLyBOb3QgYSBmb2xkZXIgLSB0cmVhdCBhcyBmaWxlbmFtZSBwYXR0ZXJuIChlLmcuLCBcImluZGV4Lm1kXCIpXHJcblx0XHRcdC8vIFNlYXJjaCBmb3IgYWxsIGZpbGVzIG1hdGNoaW5nIHRoaXMgbmFtZSBpbiB0aGUgdmF1bHRcclxuXHRcdFx0Y29uc3QgYWxsRmlsZXMgPSBhcHAudmF1bHQuZ2V0RmlsZXMoKTtcclxuXHRcdFx0Y29uc3QgcGF0dGVybiA9IHJvb3QudG9Mb3dlckNhc2UoKTtcclxuXHRcdFx0ZmlsZXMgPSBhbGxGaWxlcy5maWx0ZXIoKGY6IFRGaWxlKSA9PiB7XHJcblx0XHRcdFx0Y29uc3QgZmlsZU5hbWUgPSBmLm5hbWUudG9Mb3dlckNhc2UoKTtcclxuXHRcdFx0XHRyZXR1cm4gZmlsZU5hbWUgPT09IHBhdHRlcm4gfHwgZmlsZU5hbWUgPT09IHBhdHRlcm4ucmVwbGFjZSgvXFwubWQkLywgJycpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9IGVsc2Uge1xyXG5cdFx0Ly8gTm8gcm9vdCBzcGVjaWZpZWQgLSBnZXQgYWxsIGZpbGVzXHJcblx0XHRmaWxlcyA9IGFwcC52YXVsdC5nZXRGaWxlcygpO1xyXG5cdH1cclxuXHJcblx0Ly8gRmlsdGVyIHRvIHN1cHBvcnRlZCBmaWxlIHR5cGVzXHJcblx0ZmlsZXMgPSBmaWxlcy5maWx0ZXIoKGY6IFRGaWxlKSA9PiBbJ21kJywgJ2NhbnZhcycsICdiYXNlJ10uaW5jbHVkZXMoZi5leHRlbnNpb24pKTtcclxuXHRcclxuXHRpZiAoZmlsZXMubGVuZ3RoKSB7XHJcblx0XHRjb25zdCBpbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGZpbGVzLmxlbmd0aCk7XHJcblx0XHRyZXR1cm4gZmlsZXNbaW5kZXhdIHx8IG51bGw7XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gbnVsbDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCBhbGwgZmlsZXMgaW4gYSBmb2xkZXIgcmVjdXJzaXZlbHlcclxuICovXHJcbmZ1bmN0aW9uIGdldEZpbGVzSW5Gb2xkZXIoZm9sZGVyOiBURm9sZGVyKTogVEZpbGVbXSB7XHJcblx0bGV0IGZpbGVzOiBURmlsZVtdID0gW107XHJcblx0XHJcblx0Zm9yIChjb25zdCBpdGVtIG9mIGZvbGRlci5jaGlsZHJlbikge1xyXG5cdFx0aWYgKGl0ZW0gaW5zdGFuY2VvZiBURmlsZSkge1xyXG5cdFx0XHRmaWxlcy5wdXNoKGl0ZW0pO1xyXG5cdFx0fSBlbHNlIGlmIChpdGVtIGluc3RhbmNlb2YgVEZvbGRlcikge1xyXG5cdFx0XHRmaWxlcy5wdXNoKC4uLmdldEZpbGVzSW5Gb2xkZXIoaXRlbSkpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHRyZXR1cm4gZmlsZXM7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUcmltIGZpbGUgZXh0ZW5zaW9uIGZvciAubWQgZmlsZXMgKGxpa2UgaG9tZXBhZ2UgcGx1Z2luKVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHRyaW1GaWxlKGZpbGU6IFRGaWxlKTogc3RyaW5nIHtcclxuXHRpZiAoIWZpbGUpIHJldHVybiAnJztcclxuXHRyZXR1cm4gZmlsZS5leHRlbnNpb24gPT09ICdtZCcgPyBmaWxlLnBhdGguc2xpY2UoMCwgLTMpIDogZmlsZS5wYXRoO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIFBlcmlvZGljIG5vdGUgaW5mbyAobGlrZSBob21lcGFnZSBwbHVnaW4pXHJcbiAqL1xyXG5pbnRlcmZhY2UgUGVyaW9kaWNJbmZvIHtcclxuXHRub3VuOiBzdHJpbmc7XHJcblx0YWRqZWN0aXZlOiBzdHJpbmc7XHJcblx0Y3JlYXRlOiAoZGF0ZTogbW9tZW50Lk1vbWVudCkgPT4gUHJvbWlzZTxURmlsZT47XHJcblx0Z2V0OiAoZGF0ZTogbW9tZW50Lk1vbWVudCwgYWxsOiBSZWNvcmQ8c3RyaW5nLCBURmlsZT4pID0+IFRGaWxlO1xyXG5cdGdldEFsbDogKCkgPT4gUmVjb3JkPHN0cmluZywgVEZpbGU+O1xyXG59XHJcblxyXG5jb25zdCBQRVJJT0RJQ19JTkZPOiBSZWNvcmQ8SG9tZUJhc2VUeXBlLCBQZXJpb2RpY0luZm8gfCBudWxsPiA9IHtcclxuXHRbSG9tZUJhc2VUeXBlLkRhaWx5Tm90ZV06IHtcclxuXHRcdG5vdW46ICdkYXknLFxyXG5cdFx0YWRqZWN0aXZlOiAnZGFpbHknLFxyXG5cdFx0Y3JlYXRlOiBjcmVhdGVEYWlseU5vdGUsXHJcblx0XHRnZXQ6IGdldERhaWx5Tm90ZSxcclxuXHRcdGdldEFsbDogZ2V0QWxsRGFpbHlOb3RlcyxcclxuXHR9LFxyXG5cdFtIb21lQmFzZVR5cGUuV2Vla2x5Tm90ZV06IHtcclxuXHRcdG5vdW46ICd3ZWVrJyxcclxuXHRcdGFkamVjdGl2ZTogJ3dlZWtseScsXHJcblx0XHRjcmVhdGU6IGNyZWF0ZVdlZWtseU5vdGUsXHJcblx0XHRnZXQ6IGdldFdlZWtseU5vdGUsXHJcblx0XHRnZXRBbGw6IGdldEFsbFdlZWtseU5vdGVzLFxyXG5cdH0sXHJcblx0W0hvbWVCYXNlVHlwZS5Nb250aGx5Tm90ZV06IHtcclxuXHRcdG5vdW46ICdtb250aCcsXHJcblx0XHRhZGplY3RpdmU6ICdtb250aGx5JyxcclxuXHRcdGNyZWF0ZTogY3JlYXRlTW9udGhseU5vdGUsXHJcblx0XHRnZXQ6IGdldE1vbnRobHlOb3RlLFxyXG5cdFx0Z2V0QWxsOiBnZXRBbGxNb250aGx5Tm90ZXMsXHJcblx0fSxcclxuXHRbSG9tZUJhc2VUeXBlLlF1YXJ0ZXJseU5vdGVdOiB7XHJcblx0XHRub3VuOiAncXVhcnRlcicsXHJcblx0XHRhZGplY3RpdmU6ICdxdWFydGVybHknLFxyXG5cdFx0Y3JlYXRlOiBjcmVhdGVRdWFydGVybHlOb3RlLFxyXG5cdFx0Z2V0OiBnZXRRdWFydGVybHlOb3RlLFxyXG5cdFx0Z2V0QWxsOiBnZXRBbGxRdWFydGVybHlOb3RlcyxcclxuXHR9LFxyXG5cdFtIb21lQmFzZVR5cGUuWWVhcmx5Tm90ZV06IHtcclxuXHRcdG5vdW46ICd5ZWFyJyxcclxuXHRcdGFkamVjdGl2ZTogJ3llYXJseScsXHJcblx0XHRjcmVhdGU6IGNyZWF0ZVllYXJseU5vdGUsXHJcblx0XHRnZXQ6IGdldFllYXJseU5vdGUsXHJcblx0XHRnZXRBbGw6IGdldEFsbFllYXJseU5vdGVzLFxyXG5cdH0sXHJcblx0W0hvbWVCYXNlVHlwZS5GaWxlXTogbnVsbCxcclxuXHRbSG9tZUJhc2VUeXBlLlJhbmRvbV06IG51bGwsXHJcblx0W0hvbWVCYXNlVHlwZS5SYW5kb21Gb2xkZXJdOiBudWxsLFxyXG5cdFtIb21lQmFzZVR5cGUuV29ya3NwYWNlXTogbnVsbCxcclxuXHRbSG9tZUJhc2VUeXBlLkdyYXBoXTogbnVsbCxcclxuXHRbSG9tZUJhc2VUeXBlLk5vbmVdOiBudWxsLFxyXG5cdFtIb21lQmFzZVR5cGUuSm91cm5hbF06IG51bGwsXHJcblx0W0hvbWVCYXNlVHlwZS5OZXdOb3RlXTogbnVsbCxcclxufTtcclxuXHJcbi8qKlxyXG4gKiBHZXQgcGVyaW9kaWMgbm90ZSBwYXRoIChEYWlseSwgV2Vla2x5LCBNb250aGx5LCBZZWFybHkpXHJcbiAqIEJhc2VkIG9uIGhvbWVwYWdlIHBsdWdpbiBpbXBsZW1lbnRhdGlvblxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZ2V0UGVyaW9kaWNOb3RlKGtpbmQ6IEhvbWVCYXNlVHlwZSwgcGx1Z2luOiBIb21lQmFzZVBsdWdpbik6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xyXG5cdGlmICghd2luZG93Lm1vbWVudCkge1xyXG5cdFx0cmV0dXJuIG51bGw7XHJcblx0fVxyXG5cdFxyXG5cdGNvbnN0IGluZm8gPSBQRVJJT0RJQ19JTkZPW2tpbmRdO1xyXG5cdGlmICghaW5mbykge1xyXG5cdFx0cmV0dXJuIG51bGw7XHJcblx0fVxyXG5cdFxyXG5cdGNvbnN0IGRhdGUgPSBtb21lbnQoKS5zdGFydE9mKGluZm8ubm91biBhcyBtb21lbnQudW5pdE9mVGltZS5TdGFydE9mKTtcclxuXHRjb25zdCBjb21tdW5pdHlQbHVnaW5zID0gcGx1Z2luLmFwcC5wbHVnaW5zPy5wbHVnaW5zIHx8IHt9O1xyXG5cdGNvbnN0IHBlcmlvZGljTm90ZXNQbHVnaW4gPSBjb21tdW5pdHlQbHVnaW5zWydwZXJpb2RpYy1ub3RlcyddO1xyXG5cdGNvbnN0IGlzTGVnYWN5ID0gIXBlcmlvZGljTm90ZXNQbHVnaW4gfHwgKHBlcmlvZGljTm90ZXNQbHVnaW4ubWFuaWZlc3Q/LnZlcnNpb24gfHwgJzAnKS5zdGFydHNXaXRoKCcwJyk7XHJcblx0XHJcblx0bGV0IG5vdGU6IFRGaWxlIHwgbnVsbCA9IG51bGw7XHJcblx0XHJcblx0aWYgKGlzTGVnYWN5KSB7XHJcblx0XHQvLyBMZWdhY3kgUGVyaW9kaWMgTm90ZXMgb3IgQ29yZSBEYWlseSBOb3RlcyAodmlhIGludGVyZmFjZSlcclxuXHRcdGxldCBhbGwgPSBpbmZvLmdldEFsbCgpO1xyXG5cdFx0bm90ZSA9IGluZm8uZ2V0KGRhdGUsIGFsbCk7XHJcblx0XHRcclxuXHRcdC8vIElmIG5vdGUgZG9lc24ndCBleGlzdCBhbmQgd2FpdCBmb3IgZ2l0IHN5bmMgaXMgZW5hYmxlZCwgd2FpdCBiZWZvcmUgY3JlYXRpbmdcclxuXHRcdGlmICghbm90ZSAmJiBwbHVnaW4uc2V0dGluZ3Mud2FpdEZvckdpdFN5bmMpIHtcclxuXHRcdFx0bmV3IE5vdGljZShgSG9tZSBCYXNlOiBXYWl0aW5nIGZvciBnaXQgc3luYyAoJHtwbHVnaW4uc2V0dGluZ3MuZ2l0U3luY1RpbWVvdXR9cykuLi5gLCA1MDAwKTtcclxuXHRcdFx0YXdhaXQgZGVsYXkocGx1Z2luLnNldHRpbmdzLmdpdFN5bmNUaW1lb3V0ICogMTAwMCk7XHJcblx0XHRcdGFsbCA9IGluZm8uZ2V0QWxsKCk7XHJcblx0XHRcdG5vdGUgPSBpbmZvLmdldChkYXRlLCBhbGwpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRpZiAoIW5vdGUpIHtcclxuXHRcdFx0bm90ZSA9IGF3YWl0IGluZm8uY3JlYXRlKGRhdGUpO1xyXG5cdFx0fVxyXG5cdH0gZWxzZSB7XHJcblx0XHQvLyB2MS4wLjArIFBlcmlvZGljIE5vdGVzIEFQSVxyXG5cdFx0cGVyaW9kaWNOb3Rlc1BsdWdpbi5jYWNoZT8uaW5pdGlhbGl6ZT8uKCk7XHJcblx0XHRub3RlID0gcGVyaW9kaWNOb3Rlc1BsdWdpbi5nZXRQZXJpb2RpY05vdGU/LihpbmZvLm5vdW4gYXMgJ2RheScgfCAnd2VlaycgfCAnbW9udGgnIHwgJ3llYXInLCBkYXRlKSA/PyBudWxsO1xyXG5cdFx0XHJcblx0XHQvLyBJZiBub3RlIGRvZXNuJ3QgZXhpc3QgYW5kIHdhaXQgZm9yIGdpdCBzeW5jIGlzIGVuYWJsZWQsIHdhaXQgYmVmb3JlIGNyZWF0aW5nXHJcblx0XHRpZiAoIW5vdGUgJiYgcGx1Z2luLnNldHRpbmdzLndhaXRGb3JHaXRTeW5jKSB7XHJcblx0XHRcdG5ldyBOb3RpY2UoYEhvbWUgQmFzZTogV2FpdGluZyBmb3IgZ2l0IHN5bmMgKCR7cGx1Z2luLnNldHRpbmdzLmdpdFN5bmNUaW1lb3V0fXMpLi4uYCwgNTAwMCk7XHJcblx0XHRcdGF3YWl0IGRlbGF5KHBsdWdpbi5zZXR0aW5ncy5naXRTeW5jVGltZW91dCAqIDEwMDApO1xyXG5cdFx0XHRwZXJpb2RpY05vdGVzUGx1Z2luLmNhY2hlPy5pbml0aWFsaXplPy4oKTtcclxuXHRcdFx0bm90ZSA9IHBlcmlvZGljTm90ZXNQbHVnaW4uZ2V0UGVyaW9kaWNOb3RlPy4oaW5mby5ub3VuIGFzICdkYXknIHwgJ3dlZWsnIHwgJ21vbnRoJyB8ICd5ZWFyJywgZGF0ZSkgPz8gbnVsbDtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0aWYgKCFub3RlKSB7XHJcblx0XHRcdG5vdGUgPSBhd2FpdCBwZXJpb2RpY05vdGVzUGx1Z2luLmNyZWF0ZVBlcmlvZGljTm90ZT8uKGluZm8ubm91biBhcyAnZGF5JyB8ICd3ZWVrJyB8ICdtb250aCcgfCAneWVhcicsIGRhdGUpID8/IG51bGw7XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdHJldHVybiBub3RlID8gdHJpbUZpbGUobm90ZSkgOiBudWxsO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IGpvdXJuYWwgbm90ZSBwYXRoXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBnZXRKb3VybmFsTm90ZShqb3VybmFsTmFtZTogc3RyaW5nLCBwbHVnaW46IEhvbWVCYXNlUGx1Z2luKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XHJcblx0Y29uc3QgY29tbXVuaXR5UGx1Z2lucyA9IHBsdWdpbi5hcHAucGx1Z2lucz8ucGx1Z2lucyB8fCB7fTtcclxuXHRjb25zdCBqb3VybmFscyA9IGNvbW11bml0eVBsdWdpbnNbJ2pvdXJuYWxzJ107XHJcblx0aWYgKCFqb3VybmFscykgcmV0dXJuIG51bGw7XHJcblx0XHJcblx0dHJ5IHtcclxuXHRcdGNvbnN0IGpvdXJuYWwgPSBqb3VybmFscy5nZXRKb3VybmFsPy4oam91cm5hbE5hbWUpO1xyXG5cdFx0aWYgKCFqb3VybmFsKSByZXR1cm4gbnVsbDtcclxuXHRcdFxyXG5cdFx0Y29uc3Qgb3JpZ0F1dG9DcmVhdGUgPSBqb3VybmFsLmNvbmZpZz8udmFsdWU/LmF1dG9DcmVhdGU7XHJcblx0XHRcclxuXHRcdC8vIFRyaWdnZXIgYXV0by1jcmVhdGUgKGhhY2t5IGxvZ2ljIGZyb20gaG9tZXBhZ2UgcGx1Z2luKVxyXG5cdFx0am91cm5hbHMucmVwcm9jZXNzTm90ZXM/LigpO1xyXG5cdFx0aWYgKGpvdXJuYWwuY29uZmlnPy52YWx1ZSkge1xyXG5cdFx0XHRqb3VybmFsLmNvbmZpZy52YWx1ZS5hdXRvQ3JlYXRlID0gdHJ1ZTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0YXdhaXQgam91cm5hbC5hdXRvQ3JlYXRlPy4oKTtcclxuXHRcdFxyXG5cdFx0aWYgKGpvdXJuYWwuY29uZmlnPy52YWx1ZSkge1xyXG5cdFx0XHRqb3VybmFsLmNvbmZpZy52YWx1ZS5hdXRvQ3JlYXRlID0gb3JpZ0F1dG9DcmVhdGU7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGNvbnN0IHRvZGF5ID0gbW9tZW50KCkubG9jYWxlKCdjdXN0b20tam91cm5hbC1sb2NhbGUnKS5zdGFydE9mKCdkYXknKTtcclxuXHRcdFxyXG5cdFx0Ly8gSWYgbm90ZSBkb2Vzbid0IGV4aXN0IGFuZCB3YWl0IGZvciBnaXQgc3luYyBpcyBlbmFibGVkLCB3YWl0XHJcblx0XHRsZXQgbm90ZSA9IGpvdXJuYWwuZ2V0Py4odG9kYXkpO1xyXG5cdFx0aWYgKCFub3RlICYmIHBsdWdpbi5zZXR0aW5ncy53YWl0Rm9yR2l0U3luYykge1xyXG5cdFx0XHRuZXcgTm90aWNlKGBIb21lIEJhc2U6IFdhaXRpbmcgZm9yIGdpdCBzeW5jICgke3BsdWdpbi5zZXR0aW5ncy5naXRTeW5jVGltZW91dH1zKS4uLmAsIDUwMDApO1xyXG5cdFx0XHRhd2FpdCBkZWxheShwbHVnaW4uc2V0dGluZ3MuZ2l0U3luY1RpbWVvdXQgKiAxMDAwKTtcclxuXHRcdFx0am91cm5hbHMucmVwcm9jZXNzTm90ZXM/LigpO1xyXG5cdFx0XHRub3RlID0gam91cm5hbC5nZXQ/Lih0b2RheSk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGlmICghbm90ZSkgcmV0dXJuIG51bGw7XHJcblx0XHRcclxuXHRcdGNvbnN0IHBhdGggPSBqb3VybmFsLmdldE5vdGVQYXRoPy4obm90ZSk7XHJcblx0XHRyZXR1cm4gcGF0aCA/IHBhdGgucmVwbGFjZSgvXFwubWQkLywgJycpIDogbnVsbDtcclxuXHR9IGNhdGNoIHtcclxuXHRcdHJldHVybiBudWxsO1xyXG5cdH1cclxufVxyXG5cclxuLyoqXHJcbiAqIENvbXB1dGUgdGhlIGFjdHVhbCBmaWxlIHBhdGggYmFzZWQgb24gaG9tZSBiYXNlIHR5cGUgc3luY2hyb25vdXNseVxyXG4gKiBVc2VkIGZvciBjb21wYXJpc29uIGFuZCBVSSB1cGRhdGVzIHdoZXJlIGFzeW5jIGlzIG5vdCBwb3NzaWJsZVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHJlc29sdmVQYXRoU3luYyhcclxuXHR0eXBlOiBIb21lQmFzZVR5cGUsXHJcblx0dmFsdWU6IHN0cmluZyxcclxuXHRhcHA6IEFwcFxyXG4pOiBzdHJpbmcgfCBudWxsIHtcclxuXHRzd2l0Y2ggKHR5cGUpIHtcclxuXHRcdGNhc2UgSG9tZUJhc2VUeXBlLkZpbGU6XHJcblx0XHRcdHJldHVybiB2YWx1ZSB8fCBudWxsO1xyXG5cdFx0XHJcblx0XHRjYXNlIEhvbWVCYXNlVHlwZS5EYWlseU5vdGU6XHJcblx0XHRjYXNlIEhvbWVCYXNlVHlwZS5XZWVrbHlOb3RlOlxyXG5cdFx0Y2FzZSBIb21lQmFzZVR5cGUuTW9udGhseU5vdGU6XHJcblx0XHRjYXNlIEhvbWVCYXNlVHlwZS5RdWFydGVybHlOb3RlOlxyXG5cdFx0Y2FzZSBIb21lQmFzZVR5cGUuWWVhcmx5Tm90ZToge1xyXG5cdFx0XHRjb25zdCBpbmZvID0gUEVSSU9ESUNfSU5GT1t0eXBlXTtcclxuXHRcdFx0aWYgKGluZm8pIHtcclxuXHRcdFx0XHRjb25zdCBkYXRlID0gbW9tZW50KCkuc3RhcnRPZihpbmZvLm5vdW4gYXMgbW9tZW50LnVuaXRPZlRpbWUuU3RhcnRPZik7XHJcblx0XHRcdFx0Y29uc3QgYWxsID0gaW5mby5nZXRBbGwoKTtcclxuXHRcdFx0XHRjb25zdCBub3RlID0gaW5mby5nZXQoZGF0ZSwgYWxsKTtcclxuXHRcdFx0XHRyZXR1cm4gbm90ZSA/IHRyaW1GaWxlKG5vdGUpIDogbnVsbDtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gbnVsbDtcclxuXHRcdH1cclxuXHJcblx0XHRkZWZhdWx0OlxyXG5cdFx0XHQvLyBGb3IgUmFuZG9tLCBKb3VybmFsLCBOZXdOb3RlLCBldGMuLCB3ZSBjYW4ndCByZWxpYWJseSByZXNvbHZlIHN5bmNocm9ub3VzbHlcclxuXHRcdFx0Ly8gYnV0IHdlIG1pZ2h0IHJldHVybiB0aGUgdmFsdWUgaWYgaXQncyBhIHBhdGhcclxuXHRcdFx0cmV0dXJuICh0eXBlID09PSBIb21lQmFzZVR5cGUuUmFuZG9tRm9sZGVyIHx8IHR5cGUgPT09IEhvbWVCYXNlVHlwZS5OZXdOb3RlKSA/IG51bGwgOiAodmFsdWUgfHwgbnVsbCk7XHJcblx0fVxyXG59XHJcblxyXG4vKipcclxuICogQ29tcHV0ZSB0aGUgYWN0dWFsIGZpbGUgcGF0aCBiYXNlZCBvbiBob21lIGJhc2UgdHlwZVxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNvbXB1dGVIb21lQmFzZVBhdGgoXHJcblx0dHlwZTogSG9tZUJhc2VUeXBlLFxyXG5cdHZhbHVlOiBzdHJpbmcsXHJcblx0cGx1Z2luOiBIb21lQmFzZVBsdWdpblxyXG4pOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcclxuXHRzd2l0Y2ggKHR5cGUpIHtcclxuXHRcdGNhc2UgSG9tZUJhc2VUeXBlLkZpbGU6XHJcblx0XHRcdHJldHVybiB2YWx1ZSB8fCBudWxsO1xyXG5cdFx0XHJcblx0XHRjYXNlIEhvbWVCYXNlVHlwZS5SYW5kb206IHtcclxuXHRcdFx0Y29uc3QgZmlsZSA9IHJhbmRvbUZpbGUocGx1Z2luLmFwcCk7XHJcblx0XHRcdHJldHVybiBmaWxlID8gdHJpbUZpbGUoZmlsZSkgOiBudWxsO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRjYXNlIEhvbWVCYXNlVHlwZS5SYW5kb21Gb2xkZXI6IHtcclxuXHRcdFx0Y29uc3QgZmlsZSA9IHJhbmRvbUZpbGUocGx1Z2luLmFwcCwgdmFsdWUpO1xyXG5cdFx0XHRyZXR1cm4gZmlsZSA/IHRyaW1GaWxlKGZpbGUpIDogbnVsbDtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Y2FzZSBIb21lQmFzZVR5cGUuRGFpbHlOb3RlOlxyXG5cdFx0Y2FzZSBIb21lQmFzZVR5cGUuV2Vla2x5Tm90ZTpcclxuXHRcdGNhc2UgSG9tZUJhc2VUeXBlLk1vbnRobHlOb3RlOlxyXG5cdFx0Y2FzZSBIb21lQmFzZVR5cGUuUXVhcnRlcmx5Tm90ZTpcclxuXHRcdGNhc2UgSG9tZUJhc2VUeXBlLlllYXJseU5vdGU6XHJcblx0XHRcdHJldHVybiBhd2FpdCBnZXRQZXJpb2RpY05vdGUodHlwZSwgcGx1Z2luKTtcclxuXHRcdFxyXG5cdFx0Y2FzZSBIb21lQmFzZVR5cGUuSm91cm5hbDpcclxuXHRcdFx0cmV0dXJuIGF3YWl0IGdldEpvdXJuYWxOb3RlKHZhbHVlLCBwbHVnaW4pO1xyXG5cdFx0XHJcblx0XHRjYXNlIEhvbWVCYXNlVHlwZS5OZXdOb3RlOiB7XHJcblx0XHRcdGNvbnN0IGZpbGVNYW5hZ2VyID0gcGx1Z2luLmFwcC5maWxlTWFuYWdlcjtcclxuXHRcdFx0aWYgKGZpbGVNYW5hZ2VyLmNyZWF0ZU5ld0ZpbGUpIHtcclxuXHRcdFx0XHRjb25zdCBmaWxlID0gYXdhaXQgZmlsZU1hbmFnZXIuY3JlYXRlTmV3RmlsZShwbHVnaW4uYXBwLnZhdWx0LmdldFJvb3QoKSwgdmFsdWUgfHwgJ1VudGl0bGVkJyk7XHJcblx0XHRcdFx0cmV0dXJuIGZpbGUgPyB0cmltRmlsZShmaWxlKSA6IG51bGw7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIG51bGw7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGNhc2UgSG9tZUJhc2VUeXBlLldvcmtzcGFjZTpcclxuXHRcdGNhc2UgSG9tZUJhc2VUeXBlLkdyYXBoOlxyXG5cdFx0Y2FzZSBIb21lQmFzZVR5cGUuTm9uZTpcclxuXHRcdFx0Ly8gVGhlc2UgZG9uJ3QgcmVzb2x2ZSB0byBhIGZpbGUgcGF0aFxyXG5cdFx0XHRyZXR1cm4gbnVsbDtcclxuXHRcdFxyXG5cdFx0ZGVmYXVsdDpcclxuXHRcdFx0cmV0dXJuIHZhbHVlIHx8IG51bGw7XHJcblx0fVxyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgYSBob21lIGJhc2UgdHlwZSByZXF1aXJlcyBhIGZpbGUgdG8gYmUgb3BlbmVkXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcmVxdWlyZXNGaWxlKHR5cGU6IEhvbWVCYXNlVHlwZSk6IGJvb2xlYW4ge1xyXG5cdHJldHVybiB0eXBlICE9PSBIb21lQmFzZVR5cGUuV29ya3NwYWNlICYmIFxyXG5cdCAgICAgICB0eXBlICE9PSBIb21lQmFzZVR5cGUuR3JhcGggJiYgXHJcblx0ICAgICAgIHR5cGUgIT09IEhvbWVCYXNlVHlwZS5Ob25lO1xyXG59XHJcblxyXG4vKipcclxuICogSGVscGVyIHRvIHdhaXQgZm9yIGEgc3BlY2lmaWVkIGR1cmF0aW9uXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWxheShtczogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0cmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xyXG59XHJcblxyXG4iLCAiLyoqXHJcbiAqIE5ldyBUYWIgU2VydmljZVxyXG4gKiBIYW5kbGVzIHN0YXJ0dXAgZGV0ZWN0aW9uIGFuZCBuZXcgdGFiIHJlcGxhY2VtZW50XHJcbiAqIEluc3BpcmVkIGJ5IG9ic2lkaWFuLWhvbWVwYWdlIGFuZCBuZXctdGFiLWRlZmF1bHQtcGFnZVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IEFwcCwgV29ya3NwYWNlTGVhZiwgVmlldywgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB0eXBlIEhvbWVCYXNlUGx1Z2luIGZyb20gJy4uL21haW4nO1xyXG5pbXBvcnQgeyBIb21lQmFzZVR5cGUgfSBmcm9tICcuLi9zZXR0aW5ncyc7XHJcblxyXG4vKipcclxuICogVGltaW5nIGNvbnN0YW50cyBmb3IgbmV3IHRhYiBvcGVyYXRpb25zXHJcbiAqIFRoZXNlIGRlbGF5cyBhcmUgbmVjZXNzYXJ5IGZvciBPYnNpZGlhbiB0byBmaW5pc2ggaW50ZXJuYWwgb3BlcmF0aW9uc1xyXG4gKiBiZWZvcmUgSG9tZSBCYXNlIHByb2Nlc3NlcyB0aGUgbmV3IHRhYi5cclxuICovXHJcblxyXG4vKiogRGVsYXkgZm9yIE9ic2lkaWFuIHRvIHJlc3RvcmUgd29ya3NwYWNlIG9uIHN0YXJ0dXAgYmVmb3JlIEhvbWUgQmFzZSBydW5zICovXHJcbmNvbnN0IFNUQVJUVVBfUkVTVE9SRV9ERUxBWSA9IDUwMDtcclxuXHJcbi8qKiBEZWxheSBhZnRlciBjbG9zaW5nIGFsbCBsZWF2ZXMgdG8gbGV0IGRldGFjaG1lbnRzIHNldHRsZSAqL1xyXG5jb25zdCBERVRBQ0hfU0VUVExFX0RFTEFZID0gMjAwO1xyXG5cclxuLyoqIFNtYWxsIHNhZmV0eSBkZWxheSB0byBoYW5kbGUgcmFjZSBjb25kaXRpb25zIHdpdGggb3RoZXIgcGx1Z2lucyAqL1xyXG5jb25zdCBQTFVHSU5fUkFDRV9ERUxBWSA9IDUwO1xyXG5cclxuZXhwb3J0IGNsYXNzIE5ld1RhYlNlcnZpY2Uge1xyXG5cdHByaXZhdGUgYXBwOiBBcHA7XHJcblx0cHJpdmF0ZSBwbHVnaW46IEhvbWVCYXNlUGx1Z2luO1xyXG5cdHByaXZhdGUgZXhpc3RpbmdMZWF2ZXM6IFdlYWtTZXQ8V29ya3NwYWNlTGVhZj4gPSBuZXcgV2Vha1NldCgpO1xyXG5cdHByaXZhdGUgaXNTdGFydHVwOiBib29sZWFuID0gdHJ1ZTtcclxuXHRwcml2YXRlIHN0YXJ0dXBDb21wbGV0ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcblx0Y29uc3RydWN0b3IocGx1Z2luOiBIb21lQmFzZVBsdWdpbikge1xyXG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcblx0XHR0aGlzLmFwcCA9IHBsdWdpbi5hcHA7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBUcmFjayBhbGwgZXhpc3RpbmcgbGVhdmVzIChmb3IgbmV3IHRhYiBkZXRlY3Rpb24pXHJcblx0ICogVGhpcyBtdXN0IGJlIGNhbGxlZCBldmVuIHdoZW4gc3RhcnR1cCBpcyBoYW5kbGVkIGVsc2V3aGVyZVxyXG5cdCAqL1xyXG5cdHRyYWNrRXhpc3RpbmdMZWF2ZXMoKTogdm9pZCB7XHJcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuaXRlcmF0ZUFsbExlYXZlcygobGVhZikgPT4ge1xyXG5cdFx0XHR0aGlzLmV4aXN0aW5nTGVhdmVzLmFkZChsZWFmKTtcclxuXHRcdH0pO1xyXG5cdFx0Ly8gTWFyayBzdGFydHVwIGFzIGNvbXBsZXRlZCBzbyBsYXlvdXQgY2hhbmdlIGhhbmRsZXIgd29ya3NcclxuXHRcdHRoaXMuc3RhcnR1cENvbXBsZXRlZCA9IHRydWU7XHJcblx0XHR0aGlzLmlzU3RhcnR1cCA9IGZhbHNlO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogSW5pdGlhbGl6ZSB0aGUgc2VydmljZSAtIGNhbGxlZCB3aGVuIGxheW91dCBpcyByZWFkeVxyXG5cdCAqL1xyXG5cdGluaXRpYWxpemUoKTogdm9pZCB7XHJcblx0XHQvLyBUcmFjayBhbGwgZXhpc3RpbmcgbGVhdmVzXHJcblx0XHR0aGlzLnRyYWNrRXhpc3RpbmdMZWF2ZXMoKTtcclxuXHJcblx0XHQvLyBIYW5kbGUgc3RhcnR1cFxyXG5cdFx0dm9pZCB0aGlzLmhhbmRsZVN0YXJ0dXAoKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEhhbmRsZSBhcHAgc3RhcnR1cCAtIG9wZW4gaG9tZSBiYXNlIGlmIG5lZWRlZFxyXG5cdCAqIE9ubHkgY2FsbGVkIG9uIGFjdHVhbCBhcHAgc3RhcnR1cCwgbm90IHBsdWdpbiByZWxvYWRzXHJcblx0ICovXHJcblx0cHJpdmF0ZSBhc3luYyBoYW5kbGVTdGFydHVwKCk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0Y29uc3Qgc2V0dGluZ3MgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncztcclxuXHJcblx0XHQvLyBDaGVjayBpZiB3ZSBzaG91bGQgc2tpcCAob3Blbk9uU3RhcnR1cCBpcyBmYWxzZSwgb3Igbm8gaG9tZSBiYXNlIGNvbmZpZ3VyZWQpXHJcblx0XHRjb25zdCBob21lQmFzZVNldHRpbmdzID0gdGhpcy5wbHVnaW4uZ2V0SG9tZUJhc2VTZXR0aW5ncygpO1xyXG5cdFx0aWYgKCFzZXR0aW5ncy5vcGVuT25TdGFydHVwIHx8ICghaG9tZUJhc2VTZXR0aW5ncy52YWx1ZSAmJiBob21lQmFzZVNldHRpbmdzLnR5cGUgPT09IEhvbWVCYXNlVHlwZS5GaWxlKSkge1xyXG5cdFx0XHR0aGlzLnN0YXJ0dXBDb21wbGV0ZWQgPSB0cnVlO1xyXG5cdFx0XHR0aGlzLmlzU3RhcnR1cCA9IGZhbHNlO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQ2hlY2sgZm9yIFVSTCBwYXJhbXMgKGxpa2Ugb2JzaWRpYW46Ly9vcGVuIGxpbmtzKSAtIGlmIHByZXNlbnQsIHNraXAgZXZlcnl0aGluZ1xyXG5cdFx0aWYgKGF3YWl0IHRoaXMuaGFzVXJsUGFyYW1zKCkpIHtcclxuXHRcdFx0dGhpcy5zdGFydHVwQ29tcGxldGVkID0gdHJ1ZTtcclxuXHRcdFx0dGhpcy5pc1N0YXJ0dXAgPSBmYWxzZTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFdhaXQgYSBiaXQgZm9yIE9ic2lkaWFuIHRvIGZpbmlzaCByZXN0b3JpbmcgdGhlIHdvcmtzcGFjZVxyXG5cdFx0Ly8gVGhpcyBlbnN1cmVzIGFsbCB0YWJzIGFyZSBsb2FkZWQgYmVmb3JlIHdlIHRyeSB0byBjbG9zZSB0aGVtXHJcblx0XHQvLyBOZWVkIGxvbmdlciBkZWxheSB0byBlbnN1cmUgd29ya3NwYWNlIGlzIGZ1bGx5IHJlc3RvcmVkXHJcblx0XHRhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgU1RBUlRVUF9SRVNUT1JFX0RFTEFZKSk7XHJcblxyXG5cdFx0Ly8gSWYgb3Blbk1vZGUgaXMgcmVwbGFjZS1hbGwsIGNsb3NlIEFMTCB0YWJzIGZpcnN0LCB0aGVuIG9wZW4gaG9tZSBiYXNlXHJcblx0XHQvLyBUaGlzIHNob3VsZCBPTkxZIGhhcHBlbiBvbiBzdGFydHVwLCBub3Qgd2hlbiBtYW51YWxseSBvcGVuaW5nXHJcblx0XHQvLyBXZSBjbG9zZSBldmVyeXRoaW5nIGZpcnN0LCB0aGVuIG9wZW4gZnJlc2ggLSBkb24ndCB0cnkgdG8gZmluZCB0YWJzIHRvIGtlZXBcclxuXHRcdC8vIEV4Y2VwdGlvbjogSWYgaGlkZVJlbGVhc2VOb3RlcyBpcyBPRkYsIHByZXNlcnZlIHJlbGVhc2Ugbm90ZXMgdGFiXHJcblx0XHRpZiAoc2V0dGluZ3Mub3Blbk1vZGUgPT09ICdyZXBsYWNlLWFsbCcpIHtcclxuXHRcdFx0Ly8gSWYgaGlkZVJlbGVhc2VOb3RlcyBpcyBPRkYsIHdlIHNob3VsZCBwcmVzZXJ2ZSByZWxlYXNlIG5vdGVzIHRhYlxyXG5cdFx0XHRsZXQgZXhjZXB0TGVhZjogV29ya3NwYWNlTGVhZiB8IG51bGwgPSBudWxsO1xyXG5cdFx0XHRpZiAoIXNldHRpbmdzLmhpZGVSZWxlYXNlTm90ZXMpIHtcclxuXHRcdFx0XHQvLyBUcnkgdG8gZmluZCByZWxlYXNlIG5vdGVzIHRhYlxyXG5cdFx0XHRcdGNvbnN0IGFsbExlYXZlcyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoJ21hcmtkb3duJyk7XHJcblx0XHRcdFx0Zm9yIChjb25zdCBsZWFmIG9mIGFsbExlYXZlcykge1xyXG5cdFx0XHRcdFx0Y29uc3QgdmlldyA9IGxlYWYudmlldztcclxuXHJcblx0XHRcdFx0XHRjb25zdCBtYXJrZG93blZpZXcgPSB2aWV3IGFzIHVua25vd24gYXMgeyBmaWxlPzogVEZpbGU7IGNvbnRhaW5lckVsPzogSFRNTEVsZW1lbnQgfTtcclxuXHRcdFx0XHRcdGlmIChtYXJrZG93blZpZXcuZmlsZSkge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBmaWxlID0gbWFya2Rvd25WaWV3LmZpbGU7XHJcblx0XHRcdFx0XHRcdC8vIFJlbGVhc2Ugbm90ZXMgYXJlIHR5cGljYWxseSBpbiBjb25maWcgZm9sZGVyIG9yIGhhdmUgc3BlY2lmaWMgbmFtaW5nXHJcblx0XHRcdFx0XHRcdC8vIENoZWNrIGlmIGl0J3MgYSByZWxlYXNlIG5vdGVzIHRhYiBieSBsb29raW5nIGF0IHRoZSBmaWxlIHBhdGhcclxuXHRcdFx0XHRcdFx0Y29uc3QgY29uZmlnRGlyID0gdGhpcy5hcHAudmF1bHQuY29uZmlnRGlyO1xyXG5cdFx0XHRcdFx0XHRpZiAoZmlsZS5wYXRoLmluY2x1ZGVzKCdyZWxlYXNlJykgfHwgZmlsZS5wYXRoLmluY2x1ZGVzKGNvbmZpZ0RpcikpIHtcclxuXHRcdFx0XHRcdFx0XHQvLyBDaGVjayBpZiBpdCdzIGFjdHVhbGx5IGEgcmVsZWFzZSBub3RlcyB2aWV3XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgY29udGFpbmVyID0gbWFya2Rvd25WaWV3LmNvbnRhaW5lckVsO1xyXG5cdFx0XHRcdFx0XHRcdGlmIChjb250YWluZXIgJiYgY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5yZWxlYXNlLW5vdGVzJykpIHtcclxuXHRcdFx0XHRcdFx0XHRcdGV4Y2VwdExlYWYgPSBsZWFmO1xyXG5cdFx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBDbG9zZSBBTEwgdGFicyAtIGRvbid0IHRyeSB0byBrZWVwIGFueSwganVzdCBjbG9zZSBldmVyeXRoaW5nIChleGNlcHQgcmVsZWFzZSBub3RlcyBpZiBhcHBsaWNhYmxlKVxyXG5cdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5ob21lU2VydmljZS5jbG9zZUFsbExlYXZlc0V4Y2VwdChleGNlcHRMZWFmKTtcclxuXHRcdFx0Ly8gV2FpdCBsb25nZXIgdG8gZW5zdXJlIGFsbCBkZXRhY2htZW50cyBhcmUgcHJvY2Vzc2VkXHJcblx0XHRcdGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBERVRBQ0hfU0VUVExFX0RFTEFZKSk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gT24gc3RhcnR1cCwgdXNlIGdob3N0IHRhYiBpZiBzdGlja3kgaWNvbiBpcyBlbmFibGVkLCBvdGhlcndpc2UgdXNlIG5vcm1hbCBvcGVuSG9tZUJhc2VcclxuXHRcdGlmIChzZXR0aW5ncy5zaG93U3RpY2t5SG9tZUljb24pIHtcclxuXHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uaG9tZVNlcnZpY2Uub3BlbkhvbWVCYXNlSW5HaG9zdFRhYih7XHJcblx0XHRcdFx0cnVuQ29tbWFuZDogdHJ1ZSxcclxuXHRcdFx0fSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQvLyBBbHdheXMgY2FsbCBvcGVuSG9tZUJhc2UgLSBpdCB3aWxsIG9wZW4gaG9tZSBiYXNlIGlmIG5vdCBhbHJlYWR5IG9wZW5cclxuXHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uaG9tZVNlcnZpY2Uub3BlbkhvbWVCYXNlKHtcclxuXHRcdFx0XHRyZXBsYWNlQWN0aXZlTGVhZjogZmFsc2UsXHJcblx0XHRcdFx0cnVuQ29tbWFuZDogdHJ1ZSxcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5zdGFydHVwQ29tcGxldGVkID0gdHJ1ZTtcclxuXHRcdHRoaXMuaXNTdGFydHVwID0gZmFsc2U7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDaGVjayBpZiB0aGUgc2V0dGluZ3MgbW9kYWwgaXMgY3VycmVudGx5IG9wZW5cclxuXHQgKi9cclxuXHRwcml2YXRlIGlzU2V0dGluZ3NNb2RhbE9wZW4oKTogYm9vbGVhbiB7XHJcblx0XHQvLyBDaGVjayBmb3Igc2V0dGluZ3MgbW9kYWwgYnkgbG9va2luZyBmb3IgdGhlIG1vZGFsIGNvbnRhaW5lclxyXG5cdFx0Ly8gVHJ5IG11bHRpcGxlIHNlbGVjdG9ycyB0byBiZSBtb3JlIHJvYnVzdFxyXG5cdFx0Y29uc3Qgc2V0dGluZ3NNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC1jb250YWluZXIubW9kLXNldHRpbmdzJykgfHxcclxuXHRcdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLm1vZC1zZXR0aW5ncycpIHx8XHJcblx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy52ZXJ0aWNhbC10YWItY29udGVudCcpO1xyXG5cclxuXHRcdC8vIEFsc28gY2hlY2sgaWYgYW55IG1vZGFsIGlzIG9wZW4gYW5kIGNvbnRhaW5zIHNldHRpbmdzIGNvbnRlbnRcclxuXHRcdGlmICghc2V0dGluZ3NNb2RhbCkge1xyXG5cdFx0XHRjb25zdCBhbGxNb2RhbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubW9kYWwtY29udGFpbmVyJyk7XHJcblx0XHRcdGZvciAoY29uc3QgbW9kYWwgb2YgQXJyYXkuZnJvbShhbGxNb2RhbHMpKSB7XHJcblx0XHRcdFx0aWYgKG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy52ZXJ0aWNhbC10YWItY29udGVudCcpIHx8XHJcblx0XHRcdFx0XHRtb2RhbC5xdWVyeVNlbGVjdG9yKCcuc2V0dGluZ3MtY29udGVudCcpIHx8XHJcblx0XHRcdFx0XHRtb2RhbC5jbGFzc0xpc3QuY29udGFpbnMoJ21vZC1zZXR0aW5ncycpKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gc2V0dGluZ3NNb2RhbCAhPT0gbnVsbDtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENoZWNrIGZvciBVUkwgcGFyYW1ldGVycyB0aGF0IGluZGljYXRlIE9ic2lkaWFuIHdhcyBvcGVuZWQgdmlhIGEgbGlua1xyXG5cdCAqIEJhc2VkIG9uIG9ic2lkaWFuLWhvbWVwYWdlIGltcGxlbWVudGF0aW9uXHJcblx0ICovXHJcblx0cHJpdmF0ZSBhc3luYyBoYXNVcmxQYXJhbXMoKTogUHJvbWlzZTxib29sZWFuPiB7XHJcblx0XHQvLyBDaGVjayBmb3IgbW9iaWxlIFVSTCBwYXJhbXMgKENhcGFjaXRvciBBUEkpXHJcblx0XHRjb25zdCB3aW5kb3dBbnkgPSB3aW5kb3cgYXMgdW5rbm93biBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcclxuXHJcblx0XHRjb25zdCBjYXBhY2l0b3IgPSB3aW5kb3dBbnkuQ2FwYWNpdG9yIGFzIHsgUGx1Z2lucz86IHsgQXBwPzogeyBnZXRMYXVuY2hVcmw6ICgpID0+IFByb21pc2U8eyB1cmw/OiBzdHJpbmcgfSB8IG51bGw+IH0gfSB9IHwgdW5kZWZpbmVkO1xyXG5cdFx0aWYgKGNhcGFjaXRvcj8uUGx1Z2lucz8uQXBwKSB7XHJcblx0XHRcdHRyeSB7XHJcblx0XHRcdFx0Y29uc3QgbGF1bmNoVXJsID0gYXdhaXQgY2FwYWNpdG9yLlBsdWdpbnMuQXBwLmdldExhdW5jaFVybCgpO1xyXG5cdFx0XHRcdGlmIChsYXVuY2hVcmw/LnVybCkge1xyXG5cdFx0XHRcdFx0Y29uc3QgdXJsID0gbmV3IFVSTChsYXVuY2hVcmwudXJsKTtcclxuXHRcdFx0XHRcdGNvbnN0IHBhcmFtcyA9IEFycmF5LmZyb20odXJsLnNlYXJjaFBhcmFtcy5rZXlzKCkpO1xyXG5cdFx0XHRcdFx0Y29uc3QgYWN0aW9uID0gdXJsLmhvc3RuYW1lO1xyXG5cclxuXHRcdFx0XHRcdGlmIChbJ29wZW4nLCAnYWR2YW5jZWQtdXJpJ10uaW5jbHVkZXMoYWN0aW9uKSAmJlxyXG5cdFx0XHRcdFx0XHRbJ2ZpbGUnLCAnZmlsZXBhdGgnLCAnd29ya3NwYWNlJ10uc29tZShlID0+IHBhcmFtcy5pbmNsdWRlcyhlKSkpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGNhdGNoIHtcclxuXHRcdFx0XHQvLyBJZ25vcmUgZXJyb3JzXHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBDaGVjayBmb3IgZGVza3RvcCBVUkwgcGFyYW1zXHJcblx0XHRjb25zdCBvYnNBY3QgPSB3aW5kb3dBbnkuT0JTX0FDVCBhcyB7IGFjdGlvbj86IHN0cmluZyB9IHwgdW5kZWZpbmVkO1xyXG5cdFx0aWYgKG9ic0FjdCkge1xyXG5cdFx0XHRjb25zdCBwYXJhbXMgPSBPYmplY3Qua2V5cyhvYnNBY3QpO1xyXG5cdFx0XHRjb25zdCBhY3Rpb24gPSBvYnNBY3QuYWN0aW9uO1xyXG5cclxuXHRcdFx0aWYgKGFjdGlvbiAmJiBbJ29wZW4nLCAnYWR2YW5jZWQtdXJpJ10uaW5jbHVkZXMoYWN0aW9uKSAmJlxyXG5cdFx0XHRcdFsnZmlsZScsICdmaWxlcGF0aCcsICd3b3Jrc3BhY2UnXS5zb21lKGUgPT4gcGFyYW1zLmluY2x1ZGVzKGUpKSkge1xyXG5cdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIGZhbHNlO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogSGFuZGxlIGxheW91dCBjaGFuZ2UgZXZlbnQgLSBjaGVjayBmb3IgbmV3IGVtcHR5IHRhYnNcclxuXHQgKiBCYXNlZCBvbiBuZXctdGFiLWRlZmF1bHQtcGFnZSBpbXBsZW1lbnRhdGlvblxyXG5cdCAqL1xyXG5cdGhhbmRsZUxheW91dENoYW5nZSgpOiB2b2lkIHtcclxuXHRcdC8vIFNraXAgZHVyaW5nIHN0YXJ0dXBcclxuXHRcdGlmICh0aGlzLmlzU3RhcnR1cCB8fCAhdGhpcy5zdGFydHVwQ29tcGxldGVkKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBDaGVjayBhbGwgbGVhdmVzIGZvciBuZXcgZW1wdHkgb25lc1xyXG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcclxuXHRcdFx0Ly8gU2tpcCBpZiB3ZSd2ZSBhbHJlYWR5IHNlZW4gdGhpcyBsZWFmXHJcblx0XHRcdGlmICh0aGlzLmV4aXN0aW5nTGVhdmVzLmhhcyhsZWFmKSkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gTWFyayBhcyBzZWVuIEJFRk9SRSBjaGVja2luZyBpZiBpdCdzIGVtcHR5XHJcblx0XHRcdC8vIFRoaXMgcHJldmVudHMgcHJvY2Vzc2luZyB0aGUgc2FtZSBsZWFmIG11bHRpcGxlIHRpbWVzXHJcblx0XHRcdHRoaXMuZXhpc3RpbmdMZWF2ZXMuYWRkKGxlYWYpO1xyXG5cclxuXHRcdFx0Ly8gQ2hlY2sgaWYgdGhpcyBpcyBhbiBlbXB0eSB0YWJcclxuXHRcdFx0aWYgKCF0aGlzLmlzRW1wdHlUYWIobGVhZikpIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIENoZWNrIGlmIHRoaXMgaXMgdGhlIG9ubHkgdGFiIChhbGwgdGFicyB3ZXJlIGNsb3NlZClcclxuXHRcdFx0Y29uc3QgaXNPbmx5VGFiID0gdGhpcy5pc09ubHlUYWIobGVhZik7XHJcblxyXG5cdFx0XHQvLyBIYW5kbGUgXCJPcGVuIHdoZW4gYWxsIHRhYnMgYXJlIGNsb3NlZFwiIC0gd29ya3MgaW5kZXBlbmRlbnRseSBvZiByZXBsYWNlTmV3VGFiXHJcblx0XHRcdGlmIChpc09ubHlUYWIgJiYgdGhpcy5wbHVnaW4uc2V0dGluZ3Mub3BlbldoZW5BbGxUYWJzQ2xvc2VkID09PSB0cnVlKSB7XHJcblx0XHRcdFx0Ly8gT3BlbiBob21lIGJhc2Ugd2hlbiBhbGwgdGFicyBhcmUgY2xvc2VkXHJcblx0XHRcdFx0dm9pZCB0aGlzLnJlcGxhY2VFbXB0eVRhYihsZWFmLCB0cnVlKTsgLy8gUGFzcyB0cnVlIHRvIGluZGljYXRlIHRoaXMgaXMgZm9yIFwiYWxsIHRhYnMgY2xvc2VkXCJcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIEhhbmRsZSBcIlJlcGxhY2UgbmV3IHRhYnNcIiAtIG9ubHkgaWYgZW5hYmxlZFxyXG5cdFx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MucmVwbGFjZU5ld1RhYiAhPT0gdHJ1ZSkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gRG91YmxlLWNoZWNrIHJlcGxhY2VOZXdUYWIgaXMgc3RpbGwgdHJ1ZSAoaW4gY2FzZSBpdCBjaGFuZ2VkIGR1cmluZyBwcm9jZXNzaW5nKVxyXG5cdFx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MucmVwbGFjZU5ld1RhYiAhPT0gdHJ1ZSkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gSGFuZGxlIGJhc2VkIG9uIG1vZGVcclxuXHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLm5ld1RhYk1vZGUgPT09ICdvbmx5LXdoZW4tZW1wdHknKSB7XHJcblx0XHRcdFx0Ly8gT25seSByZXBsYWNlIGlmIHRoaXMgaXMgdGhlIG9ubHkgdGFiXHJcblx0XHRcdFx0aWYgKCFpc09ubHlUYWIpIHtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFJlcGxhY2UgdGhlIGVtcHR5IHRhYiB3aXRoIGhvbWUgYmFzZSAoZm9yIG5ldyB0YWIgcmVwbGFjZW1lbnQpXHJcblx0XHRcdHZvaWQgdGhpcy5yZXBsYWNlRW1wdHlUYWIobGVhZiwgZmFsc2UpOyAvLyBQYXNzIGZhbHNlIHRvIGluZGljYXRlIHRoaXMgaXMgZm9yIFwibmV3IHRhYiByZXBsYWNlbWVudFwiXHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENoZWNrIGlmIGEgbGVhZiBpcyBhbiBlbXB0eSB0YWJcclxuXHQgKiBJTVBPUlRBTlQ6IE9ubHkgcmV0dXJucyB0cnVlIGlmIHRoZSBsZWFmIGlzIHRydWx5IGVtcHR5IChubyBmaWxlIG9wZW5lZClcclxuXHQgKiBJZiBhIGZpbGUgaXMgYWxyZWFkeSBvcGVuZWQgaW4gdGhlIGxlYWYsIGl0J3Mgbm90IGVtcHR5IGFuZCBzaG91bGQgTk9UIGJlIHJlcGxhY2VkXHJcblx0ICovXHJcblx0cHJpdmF0ZSBpc0VtcHR5VGFiKGxlYWY6IFdvcmtzcGFjZUxlYWYpOiBib29sZWFuIHtcclxuXHRcdGlmICghbGVhZi52aWV3KSByZXR1cm4gdHJ1ZTtcclxuXHJcblx0XHQvLyBDaGVjayBpZiB2aWV3IHR5cGUgaXMgZW1wdHlcclxuXHRcdGlmIChsZWFmLnZpZXcuZ2V0Vmlld1R5cGUoKSAhPT0gJ2VtcHR5Jykge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gRG91YmxlLWNoZWNrOiBpZiB0aGUgdmlldyBoYXMgYSBzdGF0ZSB3aXRoIGEgZmlsZSwgaXQncyBub3QgZW1wdHlcclxuXHRcdC8vIFRoaXMgcHJldmVudHMgcmVwbGFjaW5nIHRhYnMgdGhhdCB3ZXJlIGp1c3Qgb3BlbmVkIHdpdGggZmlsZXMgZnJvbSBleHBsb3JlclxyXG5cdFx0Y29uc3Qgdmlld1N0YXRlID0gbGVhZi5nZXRWaWV3U3RhdGUoKTtcclxuXHRcdGlmICh2aWV3U3RhdGUgJiYgKHZpZXdTdGF0ZSBhcyB7IGZpbGU/OiBzdHJpbmcgfSkuZmlsZSkge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRydWU7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDaGVjayBpZiB0aGlzIGlzIHRoZSBvbmx5IHRhYiBpbiB0aGUgbWFpbiB3b3Jrc3BhY2VcclxuXHQgKiBPbmx5IGNvdW50cyByb290IGxlYXZlcyAobWFpbiB3b3Jrc3BhY2UgdGFicyksIG5vdCBzaWRlYmFyIHRhYnNcclxuXHQgKiBCYXNlZCBvbiBvYnNpZGlhbi1kaXNhYmxlLXRhYnMgcGF0dGVybiB1c2luZyBpdGVyYXRlUm9vdExlYXZlc1xyXG5cdCAqL1xyXG5cdHByaXZhdGUgaXNPbmx5VGFiKGxlYWY6IFdvcmtzcGFjZUxlYWYpOiBib29sZWFuIHtcclxuXHRcdGxldCB0YWJDb3VudCA9IDA7XHJcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuaXRlcmF0ZVJvb3RMZWF2ZXMoKGwpID0+IHtcclxuXHRcdFx0dGFiQ291bnQrKztcclxuXHRcdH0pO1xyXG5cclxuXHRcdGNvbnN0IHJlc3VsdCA9IHRhYkNvdW50ID09PSAxO1xyXG5cdFx0Y29uc29sZS5kZWJ1ZygnW0hvbWUgQmFzZV0gaXNPbmx5VGFiOicsIHtcclxuXHRcdFx0bGVhZjogbGVhZixcclxuXHRcdFx0dGFiQ291bnQ6IHRhYkNvdW50LFxyXG5cdFx0XHRpc09ubHlUYWI6IHJlc3VsdFxyXG5cdFx0fSk7XHJcblxyXG5cdFx0cmV0dXJuIHJlc3VsdDtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJlcGxhY2UgYW4gZW1wdHkgdGFiIHdpdGggdGhlIGhvbWUgYmFzZSBvciBuZXcgdGFiIGZpbGVcclxuXHQgKiBAcGFyYW0gbGVhZiBUaGUgbGVhZiB0byByZXBsYWNlXHJcblx0ICogQHBhcmFtIGlzQWxsVGFic0Nsb3NlZCBXaGV0aGVyIHRoaXMgaXMgdHJpZ2dlcmVkIGJ5IFwiYWxsIHRhYnMgY2xvc2VkXCIgKHRydWUpIG9yIFwibmV3IHRhYiByZXBsYWNlbWVudFwiIChmYWxzZSlcclxuXHQgKi9cclxuXHRwcml2YXRlIGFzeW5jIHJlcGxhY2VFbXB0eVRhYihsZWFmOiBXb3Jrc3BhY2VMZWFmLCBpc0FsbFRhYnNDbG9zZWQ6IGJvb2xlYW4gPSBmYWxzZSk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0Ly8gSWYgdGhpcyBpcyBmb3IgbmV3IHRhYiByZXBsYWNlbWVudCAobm90IGFsbCB0YWJzIGNsb3NlZCksIGNoZWNrIHJlcGxhY2VOZXdUYWJcclxuXHRcdGlmICghaXNBbGxUYWJzQ2xvc2VkKSB7XHJcblx0XHRcdC8vIENSSVRJQ0FMOiBDaGVjayByZXBsYWNlTmV3VGFiIG9uZSBtb3JlIHRpbWUgYmVmb3JlIGFjdHVhbGx5IHJlcGxhY2luZ1xyXG5cdFx0XHQvLyBUaGlzIHByZXZlbnRzIHJhY2UgY29uZGl0aW9ucyB3aGVyZSB0aGUgc2V0dGluZyBjaGFuZ2VkIGJldHdlZW4gY2hlY2tzXHJcblx0XHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXBsYWNlTmV3VGFiICE9PSB0cnVlKSB7XHJcblx0XHRcdFx0Y29uc29sZS5kZWJ1ZygnW0hvbWUgQmFzZV0gcmVwbGFjZUVtcHR5VGFiOiByZXBsYWNlTmV3VGFiIGlzIG5vdCB0cnVlLCBhYm9ydGluZycpO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFNtYWxsIGRlbGF5IHRvIGhhbmRsZSByYWNlIGNvbmRpdGlvbnMgd2l0aCBvdGhlciBwbHVnaW5zXHJcblx0XHRhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgUExVR0lOX1JBQ0VfREVMQVkpKTtcclxuXHJcblx0XHQvLyBJZiB0aGlzIGlzIGZvciBuZXcgdGFiIHJlcGxhY2VtZW50LCBjaGVjayBhZ2FpbiBhZnRlciBkZWxheVxyXG5cdFx0aWYgKCFpc0FsbFRhYnNDbG9zZWQpIHtcclxuXHRcdFx0Ly8gRmluYWwgY2hlY2sgYWZ0ZXIgZGVsYXkgLSBzZXR0aW5nIG1pZ2h0IGhhdmUgY2hhbmdlZFxyXG5cdFx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MucmVwbGFjZU5ld1RhYiAhPT0gdHJ1ZSkge1xyXG5cdFx0XHRcdGNvbnNvbGUuZGVidWcoJ1tIb21lIEJhc2VdIHJlcGxhY2VFbXB0eVRhYjogcmVwbGFjZU5ld1RhYiBjaGFuZ2VkIGR1cmluZyBkZWxheSwgYWJvcnRpbmcnKTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIElmIHRoaXMgaXMgZm9yIGFsbCB0YWJzIGNsb3NlZCwgY2hlY2sgdGhhdCBzZXR0aW5nIGluc3RlYWRcclxuXHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLm9wZW5XaGVuQWxsVGFic0Nsb3NlZCAhPT0gdHJ1ZSkge1xyXG5cdFx0XHRcdGNvbnNvbGUuZGVidWcoJ1tIb21lIEJhc2VdIHJlcGxhY2VFbXB0eVRhYjogb3BlbldoZW5BbGxUYWJzQ2xvc2VkIGNoYW5nZWQgZHVyaW5nIGRlbGF5LCBhYm9ydGluZycpO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIERvdWJsZS1jaGVjayB0aGUgdGFiIGlzIHN0aWxsIGVtcHR5XHJcblx0XHRpZiAoIXRoaXMuaXNFbXB0eVRhYihsZWFmKSkge1xyXG5cdFx0XHRjb25zb2xlLmRlYnVnKCdbSG9tZSBCYXNlXSByZXBsYWNlRW1wdHlUYWI6IFRhYiBpcyBubyBsb25nZXIgZW1wdHksIHNraXBwaW5nJyk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBJZiB0aGlzIGlzIGZvciBcImFsbCB0YWJzIGNsb3NlZFwiLCB1c2UgaG9tZSBiYXNlIHNldHRpbmdzXHJcblx0XHQvLyBPdGhlcndpc2UsIHVzZSBuZXcgdGFiIHNldHRpbmdzIChmb3IgXCJyZXBsYWNlIG5ldyB0YWJzXCIgZmVhdHVyZSlcclxuXHRcdGNvbnN0IHNldHRpbmdzID0gaXNBbGxUYWJzQ2xvc2VkXHJcblx0XHRcdD8gdGhpcy5wbHVnaW4uZ2V0SG9tZUJhc2VTZXR0aW5ncygpXHJcblx0XHRcdDogdGhpcy5wbHVnaW4uZ2V0TmV3VGFiU2V0dGluZ3MoKTtcclxuXHJcblx0XHRjb25zb2xlLmRlYnVnKCdbSG9tZSBCYXNlXSByZXBsYWNlRW1wdHlUYWI6Jywge1xyXG5cdFx0XHRsZWFmOiBsZWFmLFxyXG5cdFx0XHRpc0FsbFRhYnNDbG9zZWQ6IGlzQWxsVGFic0Nsb3NlZCxcclxuXHRcdFx0c2V0dGluZ3M6IHNldHRpbmdzLFxyXG5cdFx0XHRyZXBsYWNlTmV3VGFiOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXBsYWNlTmV3VGFiLFxyXG5cdFx0XHRuZXdUYWJNb2RlOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5uZXdUYWJNb2RlLFxyXG5cdFx0XHR1c2VEaWZmZXJlbnRGaWxlRm9yTmV3VGFiOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy51c2VEaWZmZXJlbnRGaWxlRm9yTmV3VGFiXHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBPcGVuIGZpbGUgaW4gdGhpcyBsZWFmXHJcblx0XHQvLyBQYXNzIGlzTmV3VGFiPXRydWUgdG8gc2tpcCBwaW5uaW5nL2dob3N0IHRhYiBsb2dpYyAtIG5ldyB0YWJzIHNob3VsZCB3b3JrIGluZGVwZW5kZW50bHlcclxuXHRcdGNvbnN0IHN1Y2Nlc3MgPSBhd2FpdCB0aGlzLnBsdWdpbi5ob21lU2VydmljZS5vcGVuSW5MZWFmV2l0aFNldHRpbmdzKGxlYWYsIHNldHRpbmdzLCB0cnVlKTtcclxuXHJcblx0XHRpZiAoIXN1Y2Nlc3MpIHtcclxuXHRcdFx0Y29uc29sZS53YXJuKCdbSG9tZSBCYXNlXSBGYWlsZWQgdG8gb3BlbiBmaWxlOicsIHNldHRpbmdzKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGNvbnNvbGUuZGVidWcoJ1tIb21lIEJhc2VdIHJlcGxhY2VFbXB0eVRhYjogU3VjY2Vzc2Z1bGx5IG9wZW5lZCBmaWxlJyk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBGb3JjZSBjaGVjayBmb3IgZW1wdHkgd29ya3NwYWNlIGFuZCBvcGVuIGhvbWUgYmFzZVxyXG5cdCAqL1xyXG5cdGFzeW5jIG9wZW5JZkVtcHR5KCk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0Ly8gQ2hlY2sgaWYgdGhlcmUncyBhbiBlbXB0eSB2aWV3XHJcblx0XHRjb25zdCBhY3RpdmVWaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoVmlldyk7XHJcblx0XHRjb25zdCBhY3RpdmVMZWFmID0gYWN0aXZlVmlldz8ubGVhZjtcclxuXHJcblx0XHRpZiAoIWFjdGl2ZUxlYWYpIHJldHVybjtcclxuXHJcblx0XHQvLyBDaGVjayBpZiBpdCdzIGVtcHR5IGFuZCBpcyB0aGUgb25seSB0YWJcclxuXHRcdGlmICh0aGlzLmlzRW1wdHlUYWIoYWN0aXZlTGVhZikgJiYgdGhpcy5pc09ubHlUYWIoYWN0aXZlTGVhZikpIHtcclxuXHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uaG9tZVNlcnZpY2Uub3BlbkluTGVhZihhY3RpdmVMZWFmKTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuIiwgIi8qKlxuICogU3RpY2t5IFRhYiBTZXJ2aWNlXG4gKiBNYW5hZ2VzIHRoZSBzdGlja3kgaG9tZSBpY29uIGluIHRoZSB0YWIgYmFyXG4gKi9cblxuaW1wb3J0IHsgTWVudSwgUGxhdGZvcm0sIHNldEljb24sIFdvcmtzcGFjZUxlYWYgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBIb21lQmFzZVBsdWdpbiBmcm9tICcuLi9tYWluJztcbmltcG9ydCB7IEhvbWVCYXNlVHlwZSB9IGZyb20gJy4uL3NldHRpbmdzJztcbmltcG9ydCB7IGdldEZpbGVCeVBhdGgsIGxlYWZIYXNGaWxlIH0gZnJvbSAnLi4vdXRpbHMvZmlsZS11dGlscyc7XG5pbXBvcnQgeyByZXNvbHZlUGF0aFN5bmMgfSBmcm9tICcuLi91dGlscy9ob21lYmFzZS1yZXNvbHZlcic7XG5pbXBvcnQgeyBJY29uUGlja2VyIH0gZnJvbSAnLi4vdWkvaWNvbi1waWNrZXInO1xuXG4vKipcbiAqIFRpbWluZyBjb25zdGFudHMgZm9yIHN0aWNreSB0YWIgb3BlcmF0aW9uc1xuICogVGhlc2UgZGVsYXlzIGFyZSBuZWNlc3NhcnkgZm9yIFVJIHVwZGF0ZXMgYW5kIERPTSBtb25pdG9yaW5nLlxuICovXG5cbi8qKiBEZWxheSBmb3IgdGFiIGhlYWRlciB1cGRhdGVzIGFmdGVyIG9wZW5pbmcgaG9tZSBiYXNlICovXG5jb25zdCBUQUJfSEVBREVSX09QRU5fREVMQVkgPSAxNTA7XG5cbi8qKiBJbnRlcnZhbCBmb3IgcGVyaW9kaWMgaWNvbiBwbGFjZW1lbnQgY2hlY2sgKGVuc3VyZXMgaXQgc3Vydml2ZXMgRE9NIHVwZGF0ZXMpICovXG5jb25zdCBJQ09OX1BMQUNFTUVOVF9DSEVDS19JTlRFUlZBTCA9IDEwMDtcblxuLyoqIFNtYWxsIGRlbGF5IHRvIGNhdGNoIGNvbnRhaW5lcnMgaW4gbmV3bHkgb3BlbmVkIHdpbmRvd3MgKi9cbmNvbnN0IFdJTkRPV19PUEVOX0NPTlRBSU5FUl9ERUxBWSA9IDEwMDtcblxuLyoqXG4gKiBDU1MgY2xhc3MgZm9yIHRoZSBzdGlja3kgaG9tZSBpY29uIGNvbnRhaW5lclxuICovXG5jb25zdCBTVElDS1lfSUNPTl9DTEFTUyA9ICdob21lLWJhc2Utc3RpY2t5LWljb24nO1xuY29uc3QgU1RJQ0tZX0lDT05fQUNUSVZFX0NMQVNTID0gJ2hvbWUtYmFzZS1zdGlja3ktaWNvbi1hY3RpdmUnO1xuXG4vKipcbiAqIEV4dGVuZGVkIEhUTUxFbGVtZW50IGludGVyZmFjZSBmb3Igc3RpY2t5IGljb24gd2l0aCBjdXN0b20gcHJvcGVydGllc1xuICovXG5pbnRlcmZhY2UgU3RpY2t5SWNvbkVsZW1lbnQgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG5cdF9jaGVja0ludGVydmFsPzogUmV0dXJuVHlwZTx0eXBlb2Ygc2V0SW50ZXJ2YWw+O1xuXHRfY29udGFpbmVyT2JzZXJ2ZXI/OiBNdXRhdGlvbk9ic2VydmVyO1xufVxuXG4vKipcbiAqIEV4dGVuZGVkIEhUTUxFbGVtZW50IGludGVyZmFjZSBmb3IgdGFiIGhlYWRlciB3aXRoIGhvbWUgYmFzZSBwcm9wZXJ0aWVzXG4gKi9cbmludGVyZmFjZSBUYWJIZWFkZXJFbGVtZW50IGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuXHRfaG9tZUJhc2VQYXJlbnQ/OiBIVE1MRWxlbWVudDtcblx0X2hvbWVCYXNlTmV4dFNpYmxpbmc/OiBOb2RlIHwgbnVsbDtcbn1cblxuZXhwb3J0IGNsYXNzIFN0aWNreVRhYlNlcnZpY2Uge1xuXHRwcml2YXRlIHBsdWdpbjogSG9tZUJhc2VQbHVnaW47XG5cdHByaXZhdGUgc3RpY2t5SWNvbkVsOiBTdGlja3lJY29uRWxlbWVudCB8IG51bGwgPSBudWxsO1xuXHRwcml2YXRlIGxheW91dENoYW5nZUhhbmRsZXI6ICgoKSA9PiB2b2lkKSB8IG51bGwgPSBudWxsO1xuXHRwcml2YXRlIHRhYkhlYWRlclVwZGF0ZVRpbWVvdXQ6IFJldHVyblR5cGU8dHlwZW9mIHNldFRpbWVvdXQ+IHwgbnVsbCA9IG51bGw7XG5cdHByaXZhdGUgc2lkZWJhck9ic2VydmVyOiBNdXRhdGlvbk9ic2VydmVyIHwgbnVsbCA9IG51bGw7XG5cdHByaXZhdGUgdGFiSGVhZGVyT2JzZXJ2ZXI6IE11dGF0aW9uT2JzZXJ2ZXIgfCBudWxsID0gbnVsbDtcblxuXHRjb25zdHJ1Y3RvcihwbHVnaW46IEhvbWVCYXNlUGx1Z2luKSB7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cdH1cblxuXHQvKipcblx0ICogVXBkYXRlIHRoZSBzdGlja3kgdGFiIGljb24gYmFzZWQgb24gc2V0dGluZ3Ncblx0ICovXG5cdHVwZGF0ZSgpOiB2b2lkIHtcblx0XHQvLyBPbmx5IHNob3cgb24gZGVza3RvcFxuXHRcdGlmIChQbGF0Zm9ybS5pc01vYmlsZSkge1xuXHRcdFx0dGhpcy5yZW1vdmUoKTtcblx0XHRcdHRoaXMudXBkYXRlVGFiSGVhZGVycygpOyAvLyBDbGVhbiB1cCB0YWIgaGVhZGVyc1xuXHRcdFx0dGhpcy51cGRhdGVXb3Jrc3BhY2VDbGFzcyhmYWxzZSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dTdGlja3lIb21lSWNvbikge1xuXHRcdFx0aWYgKHRoaXMuc3RpY2t5SWNvbkVsKSB7XG5cdFx0XHRcdC8vIEljb24gYWxyZWFkeSBleGlzdHMsIGp1c3QgdXBkYXRlIHRoZSBpY29uXG5cdFx0XHRcdGNvbnN0IGljb25OYW1lID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Muc3RpY2t5SWNvbk5hbWUgfHwgJ2hvbWUnO1xuXHRcdFx0XHRzZXRJY29uKHRoaXMuc3RpY2t5SWNvbkVsLCBpY29uTmFtZSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBJY29uIGRvZXNuJ3QgZXhpc3QsIGNyZWF0ZSBpdFxuXHRcdFx0XHR0aGlzLmNyZWF0ZSgpO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy51cGRhdGVXb3Jrc3BhY2VDbGFzcyh0cnVlKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5yZW1vdmUoKTtcblx0XHRcdHRoaXMudXBkYXRlVGFiSGVhZGVycygpOyAvLyBDbGVhbiB1cCB0YWIgaGVhZGVycyB3aGVuIHJlbW92aW5nIGljb25cblx0XHRcdHRoaXMudXBkYXRlV29ya3NwYWNlQ2xhc3MoZmFsc2UpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBBZGQvcmVtb3ZlIENTUyBjbGFzcyBvbiBhbGwgd29ya3NwYWNlcyB0byBjb25kaXRpb25hbGx5IGFwcGx5IHN0eWxlc1xuXHQgKi9cblx0cHJpdmF0ZSB1cGRhdGVXb3Jrc3BhY2VDbGFzcyhlbmFibGVkOiBib29sZWFuKTogdm9pZCB7XG5cdFx0Y29uc3QgYXBwbHlUb0RvY3VtZW50ID0gKGRvYzogRG9jdW1lbnQpID0+IHtcblx0XHRcdGNvbnN0IG1haW5Xb3Jrc3BhY2UgPSBkb2MucXVlcnlTZWxlY3RvcignLndvcmtzcGFjZS1zcGxpdC5tb2QtdmVydGljYWwubW9kLXJvb3QnKTtcblx0XHRcdGlmICghbWFpbldvcmtzcGFjZSkgcmV0dXJuO1xuXG5cdFx0XHRpZiAoZW5hYmxlZCkge1xuXHRcdFx0XHRtYWluV29ya3NwYWNlLmNsYXNzTGlzdC5hZGQoJ2hvbWUtYmFzZS1zdGlja3ktaWNvbi1lbmFibGVkJyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRtYWluV29ya3NwYWNlLmNsYXNzTGlzdC5yZW1vdmUoJ2hvbWUtYmFzZS1zdGlja3ktaWNvbi1lbmFibGVkJyk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdC8vIEFwcGx5IHRvIG1haW4gd2luZG93XG5cdFx0YXBwbHlUb0RvY3VtZW50KGRvY3VtZW50KTtcblxuXHRcdC8vIEFwcGx5IHRvIGFsbCBvdGhlciB3aW5kb3dzXG5cdFx0dGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5pdGVyYXRlQWxsTGVhdmVzKChsZWFmKSA9PiB7XG5cdFx0XHRjb25zdCBkb2MgPSBsZWFmLnZpZXc/LmNvbnRhaW5lckVsPy5vd25lckRvY3VtZW50O1xuXHRcdFx0aWYgKGRvYyAmJiBkb2MgIT09IGRvY3VtZW50KSB7XG5cdFx0XHRcdGFwcGx5VG9Eb2N1bWVudChkb2MpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIENyZWF0ZSB0aGUgc3RpY2t5IGhvbWUgaWNvblxuXHQgKi9cblx0cHJpdmF0ZSBjcmVhdGUoKTogdm9pZCB7XG5cdFx0Ly8gUmVtb3ZlIGV4aXN0aW5nIGljb24gZmlyc3Rcblx0XHR0aGlzLnJlbW92ZSgpO1xuXG5cdFx0Ly8gQ3JlYXRlIHRoZSBzdGlja3kgaWNvbiBlbGVtZW50IG9uY2Vcblx0XHR0aGlzLnN0aWNreUljb25FbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdHRoaXMuc3RpY2t5SWNvbkVsLmNsYXNzTmFtZSA9IGAke1NUSUNLWV9JQ09OX0NMQVNTfSBjbGlja2FibGUtaWNvbmA7XG5cdFx0dGhpcy5zdGlja3lJY29uRWwuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgJ09wZW4gaG9tZSBiYXNlJyk7XG5cdFx0dGhpcy5zdGlja3lJY29uRWwuc2V0QXR0cmlidXRlKCdkYXRhLXRvb2x0aXAtcG9zaXRpb24nLCAnYm90dG9tJyk7XG5cblx0XHQvLyBBZGQgdGhlIGljb24gZnJvbSBzZXR0aW5ncyAoZGVmYXVsdCB0byAnaG9tZScpXG5cdFx0Y29uc3QgaWNvbk5hbWUgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdGlja3lJY29uTmFtZSB8fCAnaG9tZSc7XG5cdFx0c2V0SWNvbih0aGlzLnN0aWNreUljb25FbCwgaWNvbk5hbWUpO1xuXG5cdFx0Ly8gQWRkIGNsaWNrIGhhbmRsZXJcblx0XHR0aGlzLnN0aWNreUljb25FbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG5cdFx0XHQvLyBPcGVuIGhvbWUgYmFzZSBpbiBnaG9zdCB0YWIgKGFsd2F5cyB1c2UgZ2hvc3QgdGFiIGZvciBzdGlja3kgaWNvbilcblx0XHRcdHZvaWQgdGhpcy5wbHVnaW4uaG9tZVNlcnZpY2Uub3BlbkhvbWVCYXNlSW5HaG9zdFRhYih7XG5cdFx0XHRcdHJ1bkNvbW1hbmQ6IHRydWUsXG5cdFx0XHR9KS50aGVuKCgpID0+IHtcblx0XHRcdFx0Ly8gVXBkYXRlIHRhYiBoZWFkZXJzIGFmdGVyIG9wZW5pbmcsIHdpdGggYSBzbGlnaHQgZGVsYXkgdG8gbGV0IGFuaW1hdGlvbnMgY29tcGxldGVcblx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy51cGRhdGVUYWJIZWFkZXJzKCk7XG5cdFx0XHRcdH0sIFRBQl9IRUFERVJfT1BFTl9ERUxBWSk7XG5cdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdC8vIEFkZCBjb250ZXh0IG1lbnUgZm9yIGNoYW5naW5nIGljb24gYW5kIGNsb3NpbmcgaG9tZSBiYXNlXG5cdFx0dGhpcy5zdGlja3lJY29uRWwuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCAoZSkgPT4ge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuXHRcdFx0Y29uc3QgbWVudSA9IG5ldyBNZW51KCk7XG5cblx0XHRcdC8vIEFkZCBDbG9zZSBob21lIGJhc2Ugb3B0aW9uIChmaXJzdClcblx0XHRcdG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xuXHRcdFx0XHRpdGVtXG5cdFx0XHRcdFx0LnNldFRpdGxlKCdDbG9zZSBob21lIGJhc2UnKVxuXHRcdFx0XHRcdC5zZXRJY29uKCd4Jylcblx0XHRcdFx0XHQub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0XHQvLyBBY3R1YWxseSBjbG9zZSBpdCAoaW5jbHVkaW5nIGdob3N0IHRhYiBpZiBzdGlja3kgaWNvbiBpcyBlbmFibGVkKVxuXHRcdFx0XHRcdFx0Ly8gSWYgbmV3IHRhYiByZXBsYWNlbWVudCBpcyBlbmFibGVkLCBpdCB3aWxsIHJlb3BlbiB3aGVuIHlvdSBjcmVhdGUgYSBuZXcgdGFiXG5cdFx0XHRcdFx0XHR2b2lkIHRoaXMuY2xvc2VIb21lQmFzZSh0cnVlKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBBZGQgQ2hhbmdlIGljb24gb3B0aW9uIChzZWNvbmQpXG5cdFx0XHRtZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcblx0XHRcdFx0aXRlbVxuXHRcdFx0XHRcdC5zZXRUaXRsZSgnQ2hhbmdlIGljb24nKVxuXHRcdFx0XHRcdC5zZXRJY29uKCdsdWNpZGUtaW1hZ2UtcGx1cycpXG5cdFx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRcdFx0Y29uc3QgcGlja2VyID0gbmV3IEljb25QaWNrZXIoXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmFwcCxcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc3RpY2t5SWNvbk5hbWUsXG5cdFx0XHRcdFx0XHRcdChpY29uOiBzdHJpbmcgfCBudWxsKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc3RpY2t5SWNvbk5hbWUgPSBpY29uO1xuXHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBVcGRhdGUgdGhlIGljb24gZGlzcGxheVxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKHRoaXMuc3RpY2t5SWNvbkVsKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHNldEljb24odGhpcy5zdGlja3lJY29uRWwsIGljb24gfHwgJ2hvbWUnKTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9KSgpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0cGlja2VyLm9wZW4oKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdFx0bWVudS5zaG93QXRNb3VzZUV2ZW50KGUpO1xuXHRcdH0pO1xuXG5cdFx0Ly8gRnVuY3Rpb24gdG8gZW5zdXJlIGljb24gaXMgaW4gdGhlIHJpZ2h0IHBsYWNlXG5cdFx0Ly8gSW5zZXJ0IGl0IGludG8gdGhlIHdvcmtzcGFjZS10YWItaGVhZGVyLWNvbnRhaW5lci1pbm5lciBzbyBpdCdzIHBhcnQgb2YgdGhlIHRhYiBiYXIgc3RydWN0dXJlXG5cdFx0Ly8gVGhpcyBtYWtlcyBpdCBhdXRvbWF0aWNhbGx5IGhpZGUgd2hlbiBwbHVnaW5zL3RoZW1lcyBoaWRlIHRoZSB0YWIgYmFyXG5cdFx0Y29uc3QgZW5zdXJlSWNvbkluUGxhY2UgPSAoKSA9PiB7XG5cdFx0XHRpZiAoIXRoaXMuc3RpY2t5SWNvbkVsKSByZXR1cm47XG5cblx0XHRcdGNvbnN0IG1haW5Xb3Jrc3BhY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud29ya3NwYWNlLXNwbGl0Lm1vZC12ZXJ0aWNhbC5tb2Qtcm9vdCcpO1xuXHRcdFx0aWYgKCFtYWluV29ya3NwYWNlKSByZXR1cm47XG5cblx0XHRcdC8vIEZpbmQgdGhlIHdvcmtzcGFjZS10YWItaGVhZGVyLWNvbnRhaW5lci1pbm5lciAoaW5zaWRlIHRoZSB0YWIgY29udGFpbmVyKVxuXHRcdFx0Y29uc3QgdGFiSGVhZGVyQ29udGFpbmVySW5uZXIgPSBtYWluV29ya3NwYWNlLnF1ZXJ5U2VsZWN0b3IoJy53b3Jrc3BhY2UtdGFiLWhlYWRlci1jb250YWluZXItaW5uZXInKTtcblx0XHRcdGlmICghdGFiSGVhZGVyQ29udGFpbmVySW5uZXIpIHJldHVybjtcblxuXHRcdFx0Ly8gUmVtb3ZlIGFueSBkdXBsaWNhdGUgaWNvbnMgZmlyc3QgKGluIGNhc2UgbXV0YXRpb24gb2JzZXJ2ZXIgb3Igb3RoZXIgY29kZSBjcmVhdGVkIHRoZW0pXG5cdFx0XHRjb25zdCBhbGxJY29ucyA9IHRhYkhlYWRlckNvbnRhaW5lcklubmVyLnF1ZXJ5U2VsZWN0b3JBbGwoYC4ke1NUSUNLWV9JQ09OX0NMQVNTfWApO1xuXHRcdFx0YWxsSWNvbnMuZm9yRWFjaCgoaWNvbikgPT4ge1xuXHRcdFx0XHRpZiAoaWNvbiAhPT0gdGhpcy5zdGlja3lJY29uRWwpIHtcblx0XHRcdFx0XHRpY29uLnJlbW92ZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdFx0Ly8gQ2hlY2sgaWYgb3VyIGljb24gaXMgYWxyZWFkeSBpbiB0aGUgY29udGFpbmVyXG5cdFx0XHRpZiAodGFiSGVhZGVyQ29udGFpbmVySW5uZXIuY29udGFpbnModGhpcy5zdGlja3lJY29uRWwpKSB7XG5cdFx0XHRcdC8vIEFscmVhZHkgaW4gcGxhY2UsIG5vdGhpbmcgdG8gZG9cblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBJY29uIGlzIG1pc3NpbmcgLSBwcmVwZW5kIGl0IHRvIHRoZSB0YWIgaGVhZGVyIGNvbnRhaW5lciBpbm5lclxuXHRcdFx0Ly8gVGhpcyBtYWtlcyBpdCBwYXJ0IG9mIHRoZSB0YWIgYmFyIHN0cnVjdHVyZSwgc28gaXQgaGlkZXMgYXV0b21hdGljYWxseSB3aGVuIHRhYnMgYXJlIGhpZGRlblxuXHRcdFx0dGFiSGVhZGVyQ29udGFpbmVySW5uZXIuaW5zZXJ0QmVmb3JlKHRoaXMuc3RpY2t5SWNvbkVsLCB0YWJIZWFkZXJDb250YWluZXJJbm5lci5maXJzdENoaWxkKTtcblxuXHRcdFx0Ly8gVXBkYXRlIGFjdGl2ZSBzdGF0ZSBhZnRlciBpbnNlcnRpb25cblx0XHRcdHRoaXMudXBkYXRlQWN0aXZlU3RhdGUoKTtcblxuXHRcdFx0Ly8gVXBkYXRlIHRhYiBoZWFkZXJzIHdoZW4gaWNvbiBpcyBjcmVhdGVkXG5cdFx0XHR0aGlzLnVwZGF0ZVRhYkhlYWRlcnMoKTtcblxuXHRcdFx0Ly8gRW5zdXJlIHdvcmtzcGFjZSBjbGFzcyBpcyBzZXRcblx0XHRcdHRoaXMudXBkYXRlV29ya3NwYWNlQ2xhc3ModHJ1ZSk7XG5cblx0XHRcdC8vIFVwZGF0ZSBpY29uIHBvc2l0aW9uIGJhc2VkIG9uIHNpZGViYXIgc3RhdGVcblx0XHRcdHRoaXMudXBkYXRlSWNvblBvc2l0aW9uRm9yU2lkZWJhcigpO1xuXG5cdFx0XHQvLyBXYXRjaCBmb3Igc2lkZWJhciBjb2xsYXBzZS9leHBhbmQgY2hhbmdlc1xuXHRcdFx0dGhpcy53YXRjaFNpZGViYXJTdGF0ZSgpO1xuXHRcdH07XG5cblx0XHQvLyBUcnkgdG8gaW5zZXJ0IGltbWVkaWF0ZWx5XG5cdFx0ZW5zdXJlSWNvbkluUGxhY2UoKTtcblxuXHRcdC8vIFNldCB1cCBhIHJlbGlhYmxlIGNoZWNrIHRoYXQgcnVucyBwZXJpb2RpY2FsbHkgdG8gZW5zdXJlIGljb24gaXMgYWx3YXlzIHRoZXJlXG5cdFx0Ly8gVGhpcyBpcyBzaW1wbGUgYW5kIHJlbGlhYmxlIC0ganVzdCBjaGVjayBpZiBpdCdzIHRoZXJlLCBpZiBub3QsIHB1dCBpdCBiYWNrXG5cdFx0Y29uc3QgY2hlY2tJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcblx0XHRcdGlmICghdGhpcy5zdGlja3lJY29uRWwgfHwgIXRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dTdGlja3lIb21lSWNvbikge1xuXHRcdFx0XHRjbGVhckludGVydmFsKGNoZWNrSW50ZXJ2YWwpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRlbnN1cmVJY29uSW5QbGFjZSgpO1xuXHRcdH0sIElDT05fUExBQ0VNRU5UX0NIRUNLX0lOVEVSVkFMKTsgLy8gQ2hlY2sgZXZlcnkgMTAwbXMgLSBtb3JlIGZyZXF1ZW50IHRvIGNhdGNoIGNvbnRhaW5lciByZWNyZWF0aW9uIGltbWVkaWF0ZWx5XG5cblx0XHQvLyBTdG9yZSBpbnRlcnZhbCBzbyB3ZSBjYW4gY2xlYXIgaXQgbGF0ZXJcblx0XHR0aGlzLnN0aWNreUljb25FbC5fY2hlY2tJbnRlcnZhbCA9IGNoZWNrSW50ZXJ2YWw7XG5cblx0XHQvLyBBbHNvIGNoZWNrIG9uIGxheW91dCBjaGFuZ2VzIC0gYnV0IGRvIGl0IGltbWVkaWF0ZWx5LCBubyBkZWxheVxuXHRcdGlmICghdGhpcy5sYXlvdXRDaGFuZ2VIYW5kbGVyKSB7XG5cdFx0XHR0aGlzLmxheW91dENoYW5nZUhhbmRsZXIgPSAoKSA9PiB7XG5cdFx0XHRcdGlmICh0aGlzLnN0aWNreUljb25FbCAmJiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93U3RpY2t5SG9tZUljb24pIHtcblx0XHRcdFx0XHQvLyBDaGVjayBpbW1lZGlhdGVseSAtIGRvbid0IHdhaXQgZm9yIGxheW91dCB0byBzZXR0bGVcblx0XHRcdFx0XHQvLyBUaGlzIHByZXZlbnRzIGZsaWNrZXJpbmcgd2hlbiB0YWJzIGNsb3NlXG5cdFx0XHRcdFx0ZW5zdXJlSWNvbkluUGxhY2UoKTtcblx0XHRcdFx0XHQvLyBVcGRhdGUgdGFiIGhlYWRlcnMgb24gbGF5b3V0IGNoYW5nZVxuXHRcdFx0XHRcdHRoaXMudXBkYXRlVGFiSGVhZGVycygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXG5cdFx0XHR0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KFxuXHRcdFx0XHR0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKCdsYXlvdXQtY2hhbmdlJywgdGhpcy5sYXlvdXRDaGFuZ2VIYW5kbGVyKVxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHQvLyBBbHNvIHdhdGNoIGZvciB3aGVuIHdvcmtzcGFjZS10YWItaGVhZGVyLWNvbnRhaW5lci1pbm5lciBpcyBhZGRlZCBiYWNrIChhZnRlciBhbGwgdGFicyBjbG9zZWQpXG5cdFx0Ly8gVXNlIGEgTXV0YXRpb25PYnNlcnZlciBvbiB0aGUgd29ya3NwYWNlIHNwbGl0IHRvIGNhdGNoIGNvbnRhaW5lciByZWNyZWF0aW9uXG5cdFx0Y29uc3QgbWFpbldvcmtzcGFjZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53b3Jrc3BhY2Utc3BsaXQubW9kLXZlcnRpY2FsLm1vZC1yb290Jyk7XG5cdFx0aWYgKG1haW5Xb3Jrc3BhY2UpIHtcblx0XHRcdGNvbnN0IGNvbnRhaW5lck9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKCkgPT4ge1xuXHRcdFx0XHRpZiAoIXRoaXMuc3RpY2t5SWNvbkVsIHx8ICF0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93U3RpY2t5SG9tZUljb24pIHJldHVybjtcblxuXHRcdFx0XHQvLyBDaGVjayBpZiB0YWIgaGVhZGVyIGNvbnRhaW5lciBpbm5lciBleGlzdHMgYW5kIGljb24gaXMgbWlzc2luZ1xuXHRcdFx0XHRjb25zdCB0YWJIZWFkZXJDb250YWluZXJJbm5lciA9IG1haW5Xb3Jrc3BhY2UucXVlcnlTZWxlY3RvcignLndvcmtzcGFjZS10YWItaGVhZGVyLWNvbnRhaW5lci1pbm5lcicpO1xuXHRcdFx0XHRpZiAodGFiSGVhZGVyQ29udGFpbmVySW5uZXIpIHtcblx0XHRcdFx0XHQvLyBSZW1vdmUgYW55IGR1cGxpY2F0ZSBpY29ucyBmaXJzdFxuXHRcdFx0XHRcdGNvbnN0IGFsbEljb25zID0gdGFiSGVhZGVyQ29udGFpbmVySW5uZXIucXVlcnlTZWxlY3RvckFsbChgLiR7U1RJQ0tZX0lDT05fQ0xBU1N9YCk7XG5cdFx0XHRcdFx0YWxsSWNvbnMuZm9yRWFjaCgoaWNvbikgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKGljb24gIT09IHRoaXMuc3RpY2t5SWNvbkVsKSB7XG5cdFx0XHRcdFx0XHRcdGljb24ucmVtb3ZlKCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHQvLyBPbmx5IHJlLWluc2VydCBpZiBvdXIgaWNvbiBpcyBub3QgYWxyZWFkeSBpbiB0aGUgY29udGFpbmVyXG5cdFx0XHRcdFx0aWYgKCF0YWJIZWFkZXJDb250YWluZXJJbm5lci5jb250YWlucyh0aGlzLnN0aWNreUljb25FbCkpIHtcblx0XHRcdFx0XHRcdC8vIENvbnRhaW5lciBleGlzdHMgYnV0IGljb24gaXMgbWlzc2luZyAtIHJlLWluc2VydCBpbW1lZGlhdGVseVxuXHRcdFx0XHRcdFx0dGFiSGVhZGVyQ29udGFpbmVySW5uZXIuaW5zZXJ0QmVmb3JlKHRoaXMuc3RpY2t5SWNvbkVsLCB0YWJIZWFkZXJDb250YWluZXJJbm5lci5maXJzdENoaWxkKTtcblx0XHRcdFx0XHRcdHRoaXMudXBkYXRlQWN0aXZlU3RhdGUoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0XHRjb250YWluZXJPYnNlcnZlci5vYnNlcnZlKG1haW5Xb3Jrc3BhY2UsIHtcblx0XHRcdFx0Y2hpbGRMaXN0OiB0cnVlLFxuXHRcdFx0XHRzdWJ0cmVlOiB0cnVlLCAvLyBXYXRjaCBzdWJ0cmVlIHRvIGNhdGNoIHRhYiBjb250YWluZXIgcmVjcmVhdGlvblxuXHRcdFx0fSk7XG5cblx0XHRcdC8vIFN0b3JlIG9ic2VydmVyIHNvIHdlIGNhbiBjbGVhbiBpdCB1cFxuXHRcdFx0dGhpcy5zdGlja3lJY29uRWwuX2NvbnRhaW5lck9ic2VydmVyID0gY29udGFpbmVyT2JzZXJ2ZXI7XG5cdFx0fVxuXG5cdFx0Ly8gU2V0IHVwIE11dGF0aW9uT2JzZXJ2ZXIgdG8gd2F0Y2ggZm9yIG5ldyB0YWIgaGVhZGVycyBhbmQgcmVtb3ZlIGdob3N0IHRhYnMgaW1tZWRpYXRlbHlcblx0XHR0aGlzLnNldHVwVGFiSGVhZGVyT2JzZXJ2ZXIoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBTZXQgdXAgTXV0YXRpb25PYnNlcnZlciB0byB3YXRjaCBmb3IgdGFiIGhlYWRlciBjaGFuZ2VzIGFuZCByZW1vdmUgZ2hvc3QgdGFicyBpbW1lZGlhdGVseVxuXHQgKiBUaGlzIHByZXZlbnRzIHRoZSBmbGFzaCB3aGVuIHRhYnMgYXJlIG9wZW5lZC9jbG9zZWRcblx0ICovXG5cdHByaXZhdGUgc2V0dXBUYWJIZWFkZXJPYnNlcnZlcigpOiB2b2lkIHtcblx0XHRpZiAodGhpcy50YWJIZWFkZXJPYnNlcnZlcikge1xuXHRcdFx0cmV0dXJuOyAvLyBBbHJlYWR5IHNldCB1cFxuXHRcdH1cblxuXHRcdHRoaXMudGFiSGVhZGVyT2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigobXV0YXRpb25zKSA9PiB7XG5cdFx0XHQvLyBPbmx5IHByb2Nlc3MgaWYgc2V0dGluZ3MgYXJlIGVuYWJsZWRcblx0XHRcdGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1N0aWNreUhvbWVJY29uIHx8ICF0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWRlSG9tZVRhYkhlYWRlcikge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIENoZWNrIGlmIGFueSBuZXcgdGFiIGhlYWRlcnMgd2VyZSBhZGRlZFxuXHRcdFx0bGV0IGhhc05ld0hlYWRlcnMgPSBmYWxzZTtcblx0XHRcdGZvciAoY29uc3QgbXV0YXRpb24gb2YgbXV0YXRpb25zKSB7XG5cdFx0XHRcdGlmIChtdXRhdGlvbi50eXBlID09PSAnY2hpbGRMaXN0JyAmJiBtdXRhdGlvbi5hZGRlZE5vZGVzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRmb3IgKGNvbnN0IG5vZGUgb2YgQXJyYXkuZnJvbShtdXRhdGlvbi5hZGRlZE5vZGVzKSkge1xuXHRcdFx0XHRcdFx0aWYgKG5vZGUgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCAmJiBub2RlLmNsYXNzTGlzdC5jb250YWlucygnd29ya3NwYWNlLXRhYi1oZWFkZXInKSkge1xuXHRcdFx0XHRcdFx0XHRoYXNOZXdIZWFkZXJzID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChoYXNOZXdIZWFkZXJzKSBicmVhaztcblx0XHRcdH1cblxuXHRcdFx0aWYgKGhhc05ld0hlYWRlcnMpIHtcblx0XHRcdFx0Ly8gSW1tZWRpYXRlbHkgcmVtb3ZlIGFueSBnaG9zdCB0YWIgaGVhZGVycyB0aGF0IGFwcGVhcmVkXG5cdFx0XHRcdHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuaXRlcmF0ZUFsbExlYXZlcygobGVhZikgPT4ge1xuXHRcdFx0XHRcdC8vIE9ubHkgcHJvY2VzcyBsZWF2ZXMgaW4gdGhlIG1haW4gd29ya3NwYWNlIChub3Qgc2lkZWJhcnMpXG5cdFx0XHRcdFx0Y29uc3QgdmlldyA9IGxlYWYudmlldztcblx0XHRcdFx0XHRsZXQgY29udGFpbmVyOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xuXG5cdFx0XHRcdFx0aWYgKHZpZXcpIHtcblx0XHRcdFx0XHRcdGNvbnN0IHZpZXdBbnkgPSB2aWV3IGFzIHVua25vd24gYXMgeyBjb250YWluZXJFbD86IEhUTUxFbGVtZW50IH07XG5cdFx0XHRcdFx0XHRjb250YWluZXIgPSB2aWV3QW55LmNvbnRhaW5lckVsIHx8IG51bGw7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKCFjb250YWluZXIpIHtcblx0XHRcdFx0XHRcdGNvbnN0IGxlYWZBbnkgPSBsZWFmIGFzIHVua25vd24gYXMgeyBjb250YWluZXJFbD86IEhUTUxFbGVtZW50IH07XG5cdFx0XHRcdFx0XHRjb250YWluZXIgPSBsZWFmQW55LmNvbnRhaW5lckVsIHx8IG51bGw7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKGNvbnRhaW5lcikge1xuXHRcdFx0XHRcdFx0Ly8gQ2hlY2sgaWYgaXQncyBpbiB0aGUgbWFpbiB3b3Jrc3BhY2UgKHJvb3QsIG5vdCBzaWRlYmFyKVxuXHRcdFx0XHRcdFx0Y29uc3Qgcm9vdFdvcmtzcGFjZSA9IGNvbnRhaW5lci5jbG9zZXN0KCcud29ya3NwYWNlLXNwbGl0Lm1vZC12ZXJ0aWNhbC5tb2Qtcm9vdCcpO1xuXHRcdFx0XHRcdFx0Y29uc3QgbGVmdFNpZGViYXIgPSBjb250YWluZXIuY2xvc2VzdCgnLndvcmtzcGFjZS1zcGxpdC5tb2QtbGVmdC1zcGxpdCcpO1xuXHRcdFx0XHRcdFx0Y29uc3QgcmlnaHRTaWRlYmFyID0gY29udGFpbmVyLmNsb3Nlc3QoJy53b3Jrc3BhY2Utc3BsaXQubW9kLXJpZ2h0LXNwbGl0Jyk7XG5cblx0XHRcdFx0XHRcdC8vIE9ubHkgcHJvY2VzcyBtYWluIHdvcmtzcGFjZSBsZWF2ZXNcblx0XHRcdFx0XHRcdGlmIChyb290V29ya3NwYWNlICYmICFsZWZ0U2lkZWJhciAmJiAhcmlnaHRTaWRlYmFyKSB7XG5cdFx0XHRcdFx0XHRcdGlmICh0aGlzLnBsdWdpbi5ob21lU2VydmljZS5pc0dob3N0TGVhZihsZWFmKSkge1xuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHRhYkhlYWRlciA9IHRoaXMuZ2V0VGFiSGVhZGVyRm9yTGVhZihsZWFmKTtcblx0XHRcdFx0XHRcdFx0XHRpZiAodGFiSGVhZGVyICYmIHRhYkhlYWRlci5wYXJlbnRFbGVtZW50KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBwYXJlbnQgPSB0YWJIZWFkZXIucGFyZW50RWxlbWVudDtcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChwYXJlbnQgJiYgcGFyZW50LmNsYXNzTGlzdC5jb250YWlucygnd29ya3NwYWNlLXRhYi1oZWFkZXItY29udGFpbmVyLWlubmVyJykpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgdGFiSGVhZGVyRXh0ZW5kZWQgPSB0YWJIZWFkZXIgYXMgVGFiSGVhZGVyRWxlbWVudDtcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gT25seSByZW1vdmUgaWYgbm90IGFscmVhZHkgcmVtb3ZlZFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAocGFyZW50LmNvbnRhaW5zKHRhYkhlYWRlcikpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0YWJIZWFkZXJFeHRlbmRlZC5faG9tZUJhc2VQYXJlbnQgPSBwYXJlbnQ7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGFiSGVhZGVyRXh0ZW5kZWQuX2hvbWVCYXNlTmV4dFNpYmxpbmcgPSB0YWJIZWFkZXIubmV4dFNpYmxpbmc7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGFiSGVhZGVyLnJlbW92ZSgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdGNvbnN0IG9ic2VydmVDb250YWluZXIgPSAoY29udGFpbmVyOiBFbGVtZW50KSA9PiB7XG5cdFx0XHR0aGlzLnRhYkhlYWRlck9ic2VydmVyPy5vYnNlcnZlKGNvbnRhaW5lciwge1xuXHRcdFx0XHRjaGlsZExpc3Q6IHRydWUsXG5cdFx0XHRcdHN1YnRyZWU6IGZhbHNlXG5cdFx0XHR9KTtcblx0XHR9O1xuXG5cdFx0Ly8gT2JzZXJ2ZSBhbGwgZXhpc3RpbmcgY29udGFpbmVycyBpbiBhbGwgd2luZG93c1xuXHRcdGNvbnN0IG9ic2VydmVBbGxXaW5kb3dzID0gKCkgPT4ge1xuXHRcdFx0Y29uc3QgY29udGFpbmVycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy53b3Jrc3BhY2UtdGFiLWhlYWRlci1jb250YWluZXItaW5uZXInKTtcblx0XHRcdGNvbnRhaW5lcnMuZm9yRWFjaChvYnNlcnZlQ29udGFpbmVyKTtcblxuXHRcdFx0dGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5pdGVyYXRlQWxsTGVhdmVzKChsZWFmKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGRvYyA9IGxlYWYudmlldz8uY29udGFpbmVyRWw/Lm93bmVyRG9jdW1lbnQ7XG5cdFx0XHRcdGlmIChkb2MgJiYgZG9jICE9PSBkb2N1bWVudCkge1xuXHRcdFx0XHRcdGNvbnN0IHdpbmRvd0NvbnRhaW5lcnMgPSBkb2MucXVlcnlTZWxlY3RvckFsbCgnLndvcmtzcGFjZS10YWItaGVhZGVyLWNvbnRhaW5lci1pbm5lcicpO1xuXHRcdFx0XHRcdHdpbmRvd0NvbnRhaW5lcnMuZm9yRWFjaChvYnNlcnZlQ29udGFpbmVyKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fTtcblxuXHRcdG9ic2VydmVBbGxXaW5kb3dzKCk7XG5cblx0XHQvLyBBbHNvIHdhdGNoIGZvciBuZXcgY29udGFpbmVycyBiZWluZyBhZGRlZCBpbiBhbGwgd2luZG93c1xuXHRcdGNvbnN0IHNldHVwV29ya3NwYWNlT2JzZXJ2ZXIgPSAod2luOiBXaW5kb3cpID0+IHtcblx0XHRcdGNvbnN0IGRvYyA9IHdpbi5kb2N1bWVudDtcblx0XHRcdGNvbnN0IHdvcmtzcGFjZU9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKCkgPT4ge1xuXHRcdFx0XHRjb25zdCBuZXdDb250YWluZXJzID0gZG9jLnF1ZXJ5U2VsZWN0b3JBbGwoJy53b3Jrc3BhY2UtdGFiLWhlYWRlci1jb250YWluZXItaW5uZXInKTtcblx0XHRcdFx0bmV3Q29udGFpbmVycy5mb3JFYWNoKG9ic2VydmVDb250YWluZXIpO1xuXHRcdFx0fSk7XG5cblx0XHRcdGNvbnN0IG1haW5Xb3Jrc3BhY2UgPSBkb2MucXVlcnlTZWxlY3RvcignLndvcmtzcGFjZS1zcGxpdC5tb2QtdmVydGljYWwubW9kLXJvb3QnKTtcblx0XHRcdGlmIChtYWluV29ya3NwYWNlKSB7XG5cdFx0XHRcdHdvcmtzcGFjZU9ic2VydmVyLm9ic2VydmUobWFpbldvcmtzcGFjZSwge1xuXHRcdFx0XHRcdGNoaWxkTGlzdDogdHJ1ZSxcblx0XHRcdFx0XHRzdWJ0cmVlOiB0cnVlXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRzZXR1cFdvcmtzcGFjZU9ic2VydmVyKHdpbmRvdyk7XG5cblx0XHQvLyBSZWdpc3RlciBmb3IgZnV0dXJlIHdpbmRvd3Ncblx0XHR0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KFxuXHRcdFx0dGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbignd2luZG93LW9wZW4nLCAod2luKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGFjdHVhbFdpbmRvdyA9IHdpbi53aW47XG5cdFx0XHRcdGlmIChhY3R1YWxXaW5kb3cgaW5zdGFuY2VvZiBXaW5kb3cpIHtcblx0XHRcdFx0XHRzZXR1cFdvcmtzcGFjZU9ic2VydmVyKGFjdHVhbFdpbmRvdyk7XG5cdFx0XHRcdFx0Ly8gUmUtcnVuIG9ic2VydmUgYWxsIHRvIGNhdGNoIGNvbnRhaW5lcnMgaW4gdGhlIG5ldyB3aW5kb3dcblx0XHRcdFx0XHRzZXRUaW1lb3V0KG9ic2VydmVBbGxXaW5kb3dzLCBXSU5ET1dfT1BFTl9DT05UQUlORVJfREVMQVkpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdCk7XG5cdH1cblxuXHQvKipcblx0ICogUmVtb3ZlIHRoZSBzdGlja3kgaG9tZSBpY29uXG5cdCAqL1xuXHRyZW1vdmUoKTogdm9pZCB7XG5cdFx0Ly8gQ2xlYXIgYW55IHBlbmRpbmcgdGFiIGhlYWRlciB1cGRhdGVzXG5cdFx0aWYgKHRoaXMudGFiSGVhZGVyVXBkYXRlVGltZW91dCkge1xuXHRcdFx0Y2xlYXJUaW1lb3V0KHRoaXMudGFiSGVhZGVyVXBkYXRlVGltZW91dCk7XG5cdFx0XHR0aGlzLnRhYkhlYWRlclVwZGF0ZVRpbWVvdXQgPSBudWxsO1xuXHRcdH1cblxuXHRcdC8vIENsZWFyIGFueSBjaGVjayBpbnRlcnZhbHNcblx0XHRpZiAodGhpcy5zdGlja3lJY29uRWwgJiYgdGhpcy5zdGlja3lJY29uRWwuX2NoZWNrSW50ZXJ2YWwpIHtcblx0XHRcdGNsZWFySW50ZXJ2YWwodGhpcy5zdGlja3lJY29uRWwuX2NoZWNrSW50ZXJ2YWwpO1xuXHRcdH1cblxuXHRcdC8vIERpc2Nvbm5lY3QgY29udGFpbmVyIG9ic2VydmVyXG5cdFx0aWYgKHRoaXMuc3RpY2t5SWNvbkVsICYmIHRoaXMuc3RpY2t5SWNvbkVsLl9jb250YWluZXJPYnNlcnZlcikge1xuXHRcdFx0dGhpcy5zdGlja3lJY29uRWwuX2NvbnRhaW5lck9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcblx0XHR9XG5cblx0XHQvLyBEaXNjb25uZWN0IHNpZGViYXIgb2JzZXJ2ZXJcblx0XHRpZiAodGhpcy5zaWRlYmFyT2JzZXJ2ZXIpIHtcblx0XHRcdHRoaXMuc2lkZWJhck9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcblx0XHRcdHRoaXMuc2lkZWJhck9ic2VydmVyID0gbnVsbDtcblx0XHR9XG5cblx0XHQvLyBEaXNjb25uZWN0IHRhYiBoZWFkZXIgb2JzZXJ2ZXJcblx0XHRpZiAodGhpcy50YWJIZWFkZXJPYnNlcnZlcikge1xuXHRcdFx0dGhpcy50YWJIZWFkZXJPYnNlcnZlci5kaXNjb25uZWN0KCk7XG5cdFx0XHR0aGlzLnRhYkhlYWRlck9ic2VydmVyID0gbnVsbDtcblx0XHR9XG5cblx0XHQvLyBSRVNUT1JFIEVWRVJZVEhJTkcgYmVmb3JlIGZ1bGx5IHJlbW92aW5nXG5cdFx0Ly8gVGhpcyBlbnN1cmVzIHRhYiBoZWFkZXJzIGFyZSB2aXNpYmxlIGFnYWluIGFuZCB3b3Jrc3BhY2UgY2xhc3NlcyBhcmUgcmVtb3ZlZFxuXHRcdHRoaXMudXBkYXRlV29ya3NwYWNlQ2xhc3MoZmFsc2UpO1xuXG5cdFx0dGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5pdGVyYXRlQWxsTGVhdmVzKChsZWFmKSA9PiB7XG5cdFx0XHQvLyBPbmx5IHByb2Nlc3MgbGVhdmVzIGluIHRoZSBtYWluIHdvcmtzcGFjZSAobm90IHNpZGViYXJzKVxuXHRcdFx0Y29uc3QgdmlldyA9IGxlYWYudmlldztcblx0XHRcdGxldCBjb250YWluZXI6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cblx0XHRcdGlmICh2aWV3KSB7XG5cdFx0XHRcdGNvbnN0IHZpZXdBbnkgPSB2aWV3IGFzIHVua25vd24gYXMgeyBjb250YWluZXJFbD86IEhUTUxFbGVtZW50IH07XG5cdFx0XHRcdGNvbnRhaW5lciA9IHZpZXdBbnkuY29udGFpbmVyRWwgfHwgbnVsbDtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCFjb250YWluZXIpIHtcblx0XHRcdFx0Y29uc3QgbGVhZkFueSA9IGxlYWYgYXMgdW5rbm93biBhcyB7IGNvbnRhaW5lckVsPzogSFRNTEVsZW1lbnQgfTtcblx0XHRcdFx0Y29udGFpbmVyID0gbGVhZkFueS5jb250YWluZXJFbCB8fCBudWxsO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoY29udGFpbmVyKSB7XG5cdFx0XHRcdC8vIENoZWNrIGlmIGl0J3MgaW4gdGhlIG1haW4gd29ya3NwYWNlIChyb290LCBub3Qgc2lkZWJhcilcblx0XHRcdFx0Y29uc3Qgcm9vdFdvcmtzcGFjZSA9IGNvbnRhaW5lci5jbG9zZXN0KCcud29ya3NwYWNlLXNwbGl0Lm1vZC12ZXJ0aWNhbC5tb2Qtcm9vdCcpO1xuXHRcdFx0XHRjb25zdCBsZWZ0U2lkZWJhciA9IGNvbnRhaW5lci5jbG9zZXN0KCcud29ya3NwYWNlLXNwbGl0Lm1vZC1sZWZ0LXNwbGl0Jyk7XG5cdFx0XHRcdGNvbnN0IHJpZ2h0U2lkZWJhciA9IGNvbnRhaW5lci5jbG9zZXN0KCcud29ya3NwYWNlLXNwbGl0Lm1vZC1yaWdodC1zcGxpdCcpO1xuXG5cdFx0XHRcdC8vIE9ubHkgcHJvY2VzcyBtYWluIHdvcmtzcGFjZSBsZWF2ZXNcblx0XHRcdFx0aWYgKHJvb3RXb3Jrc3BhY2UgJiYgIWxlZnRTaWRlYmFyICYmICFyaWdodFNpZGViYXIpIHtcblx0XHRcdFx0XHRjb25zdCB0YWJIZWFkZXIgPSB0aGlzLmdldFRhYkhlYWRlckZvckxlYWYobGVhZik7XG5cdFx0XHRcdFx0aWYgKHRhYkhlYWRlcikge1xuXHRcdFx0XHRcdFx0dGFiSGVhZGVyLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWhvbWUtYmFzZS10YWInKTtcblx0XHRcdFx0XHRcdHRhYkhlYWRlci5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtaG9tZS1iYXNlLWdob3N0Jyk7XG5cdFx0XHRcdFx0XHR0YWJIZWFkZXIucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWhpZGRlbicpO1xuXG5cdFx0XHRcdFx0XHRjb25zdCB0YWJIZWFkZXJFeHRlbmRlZCA9IHRhYkhlYWRlciBhcyBUYWJIZWFkZXJFbGVtZW50O1xuXHRcdFx0XHRcdFx0aWYgKHRhYkhlYWRlckV4dGVuZGVkLl9ob21lQmFzZVBhcmVudCAmJiAhdGFiSGVhZGVyRXh0ZW5kZWQuX2hvbWVCYXNlUGFyZW50LmNvbnRhaW5zKHRhYkhlYWRlcikpIHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgcGFyZW50ID0gdGFiSGVhZGVyRXh0ZW5kZWQuX2hvbWVCYXNlUGFyZW50O1xuXHRcdFx0XHRcdFx0XHRjb25zdCBuZXh0U2libGluZyA9IHRhYkhlYWRlckV4dGVuZGVkLl9ob21lQmFzZU5leHRTaWJsaW5nO1xuXHRcdFx0XHRcdFx0XHRpZiAocGFyZW50KSB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKG5leHRTaWJsaW5nICYmIG5leHRTaWJsaW5nLnBhcmVudEVsZW1lbnQgPT09IHBhcmVudCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0cGFyZW50Lmluc2VydEJlZm9yZSh0YWJIZWFkZXIsIG5leHRTaWJsaW5nKTtcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0cGFyZW50LmFwcGVuZENoaWxkKHRhYkhlYWRlcik7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGRlbGV0ZSB0YWJIZWFkZXJFeHRlbmRlZC5faG9tZUJhc2VQYXJlbnQ7XG5cdFx0XHRcdFx0XHRcdGRlbGV0ZSB0YWJIZWFkZXJFeHRlbmRlZC5faG9tZUJhc2VOZXh0U2libGluZztcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdGlmICh0aGlzLnN0aWNreUljb25FbCkge1xuXHRcdFx0Ly8gT25seSByZW1vdmUgaWYgaXQncyBhY3R1YWxseSBpbiB0aGUgRE9NXG5cdFx0XHRpZiAodGhpcy5zdGlja3lJY29uRWwucGFyZW50RWxlbWVudCkge1xuXHRcdFx0XHR0aGlzLnN0aWNreUljb25FbC5yZW1vdmUoKTtcblx0XHRcdH1cblx0XHRcdHRoaXMuc3RpY2t5SWNvbkVsID0gbnVsbDtcblx0XHR9XG5cblx0XHQvLyBBbHNvIGNsZWFuIHVwIGFueSBvcnBoYW5lZCBpY29ucyBpbiBhbGwgd2luZG93c1xuXHRcdGNvbnN0IGNsZWFudXBPcnBoYW5zID0gKGRvYzogRG9jdW1lbnQpID0+IHtcblx0XHRcdGRvYy5xdWVyeVNlbGVjdG9yQWxsKGAuJHtTVElDS1lfSUNPTl9DTEFTU31gKS5mb3JFYWNoKGVsID0+IHtcblx0XHRcdFx0Y29uc3Qgc3RpY2t5RWwgPSBlbCBhcyBTdGlja3lJY29uRWxlbWVudDtcblx0XHRcdFx0aWYgKHN0aWNreUVsLl9jaGVja0ludGVydmFsKSB7XG5cdFx0XHRcdFx0Y2xlYXJJbnRlcnZhbChzdGlja3lFbC5fY2hlY2tJbnRlcnZhbCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKHN0aWNreUVsLl9jb250YWluZXJPYnNlcnZlcikge1xuXHRcdFx0XHRcdHN0aWNreUVsLl9jb250YWluZXJPYnNlcnZlci5kaXNjb25uZWN0KCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWwucmVtb3ZlKCk7XG5cdFx0XHR9KTtcblx0XHR9O1xuXG5cdFx0Y2xlYW51cE9ycGhhbnMoZG9jdW1lbnQpO1xuXHRcdHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuaXRlcmF0ZUFsbExlYXZlcygobGVhZikgPT4ge1xuXHRcdFx0Y29uc3QgZG9jID0gbGVhZi52aWV3Py5jb250YWluZXJFbD8ub3duZXJEb2N1bWVudDtcblx0XHRcdGlmIChkb2MgJiYgZG9jICE9PSBkb2N1bWVudCkge1xuXHRcdFx0XHRjbGVhbnVwT3JwaGFucyhkb2MpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIFVwZGF0ZSB0aGUgYWN0aXZlIHN0YXRlIG9mIHRoZSBzdGlja3kgaWNvblxuXHQgKi9cblx0dXBkYXRlQWN0aXZlU3RhdGUoKTogdm9pZCB7XG5cdFx0aWYgKCF0aGlzLnN0aWNreUljb25FbCkgcmV0dXJuO1xuXG5cdFx0Y29uc3QgaXNBY3RpdmUgPSB0aGlzLnBsdWdpbi5ob21lU2VydmljZS5pc0ZvY3VzZWRPbkhvbWVCYXNlKCk7XG5cblx0XHRpZiAoaXNBY3RpdmUpIHtcblx0XHRcdHRoaXMuc3RpY2t5SWNvbkVsLmNsYXNzTGlzdC5hZGQoU1RJQ0tZX0lDT05fQUNUSVZFX0NMQVNTKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5zdGlja3lJY29uRWwuY2xhc3NMaXN0LnJlbW92ZShTVElDS1lfSUNPTl9BQ1RJVkVfQ0xBU1MpO1xuXHRcdH1cblxuXHRcdC8vIEFsc28gdXBkYXRlIHRhYiBoZWFkZXJzIHdoZW4gYWN0aXZlIHN0YXRlIGNoYW5nZXMgKGRlYm91bmNlZClcblx0XHR0aGlzLnVwZGF0ZVRhYkhlYWRlcnMoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDaGVjayBpZiB0aGUgbGVmdCBzaWRlYmFyIGlzIGNvbGxhcHNlZFxuXHQgKiBCYXNlZCBvbiBvYnNpZGlhbi1veHlnZW4tc2V0dGluZ3MgaW1wbGVtZW50YXRpb25cblx0ICovXG5cdHByaXZhdGUgaXNMZWZ0U2lkZWJhckNvbGxhcHNlZCgpOiBib29sZWFuIHtcblx0XHQvLyBVc2UgdGhlIGNvcnJlY3Qgc2VsZWN0b3IgZm9yIGxlZnQgc2lkZWJhclxuXHRcdGNvbnN0IGxlZnRTaWRlYmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndvcmtzcGFjZS1zcGxpdC5tb2QtbGVmdC1zcGxpdCcpIHx8XG5cdFx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kLWxlZnQtc3BsaXQnKTtcblxuXHRcdGlmICghbGVmdFNpZGViYXIpIHJldHVybiBmYWxzZTtcblxuXHRcdC8vIENoZWNrIGZvciB0aGUgaXMtc2lkZWRvY2stY29sbGFwc2VkIGNsYXNzIC0gdGhpcyBpcyB0aGUgbW9zdCByZWxpYWJsZSBpbmRpY2F0b3Jcblx0XHRyZXR1cm4gbGVmdFNpZGViYXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdpcy1zaWRlZG9jay1jb2xsYXBzZWQnKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBVcGRhdGUgaWNvbiBwb3NpdGlvbiBiYXNlZCBvbiBzaWRlYmFyIHN0YXRlXG5cdCAqIE5vdGU6IFdpdGggaW5saW5lIHBvc2l0aW9uaW5nLCBpY29uIGZsb3dzIG5hdHVyYWxseSB3aXRoIHRhYnMsIHNvIG5vIHNwZWNpYWwgcG9zaXRpb25pbmcgbmVlZGVkXG5cdCAqL1xuXHR1cGRhdGVJY29uUG9zaXRpb25Gb3JTaWRlYmFyKCk6IHZvaWQge1xuXHRcdC8vIEljb24gbm93IGZsb3dzIG5hdHVyYWxseSB3aXRoIHRhYnMsIG5vIHNwZWNpYWwgcG9zaXRpb25pbmcgbmVlZGVkXG5cdFx0Ly8gVGhpcyBtZXRob2QgaXMga2VwdCBmb3IgcG90ZW50aWFsIGZ1dHVyZSB1c2UgYnV0IGN1cnJlbnRseSBkb2VzIG5vdGhpbmdcblx0fVxuXG5cdC8qKlxuXHQgKiBVcGRhdGUgaWNvbiB2aXNpYmlsaXR5IGJhc2VkIG9uIHRhYiBiYXIgdmlzaWJpbGl0eVxuXHQgKiBSRU1PVkVEOiBKYXZhU2NyaXB0LWJhc2VkIHZpc2liaWxpdHkgY2hlY2tpbmcgd2FzIGNhdXNpbmcgaXNzdWVzXG5cdCAqIE5vdyByZWxpZXMgZW50aXJlbHkgb24gQ1NTIHdoaWNoIGlzIG1vcmUgcmVsaWFibGVcblx0ICovXG5cdHVwZGF0ZUljb25WaXNpYmlsaXR5KCk6IHZvaWQge1xuXHRcdC8vIERvIG5vdGhpbmcgLSBsZXQgQ1NTIGhhbmRsZSBhbGwgdmlzaWJpbGl0eVxuXHRcdC8vIFRoZSBpY29uIGlzIGluc2lkZSB0aGUgdGFiIGNvbnRhaW5lciwgc28gaXQgd2lsbCBoaWRlIGF1dG9tYXRpY2FsbHlcblx0XHQvLyB3aGVuIHRoZSBjb250YWluZXIgaXMgaGlkZGVuIGJ5IGFueSB0aGVtZS9wbHVnaW5cblx0fVxuXG5cdC8qKlxuXHQgKiBXYXRjaCBmb3Igc2lkZWJhciBzdGF0ZSBjaGFuZ2VzIGFuZCB1cGRhdGUgaWNvbiBwb3NpdGlvblxuXHQgKiBCYXNlZCBvbiBvYnNpZGlhbi1veHlnZW4tc2V0dGluZ3MgaW1wbGVtZW50YXRpb25cblx0ICovXG5cdHByaXZhdGUgd2F0Y2hTaWRlYmFyU3RhdGUoKTogdm9pZCB7XG5cdFx0aWYgKHRoaXMuc2lkZWJhck9ic2VydmVyKSB7XG5cdFx0XHR0aGlzLnNpZGViYXJPYnNlcnZlci5kaXNjb25uZWN0KCk7XG5cdFx0fVxuXG5cdFx0Y29uc3QgbGVmdFNpZGViYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud29ya3NwYWNlLXNwbGl0Lm1vZC1sZWZ0LXNwbGl0JykgfHxcblx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2QtbGVmdC1zcGxpdCcpO1xuXG5cdFx0aWYgKCFsZWZ0U2lkZWJhcikgcmV0dXJuO1xuXG5cdFx0Ly8gV2F0Y2ggZm9yIGNsYXNzIGNoYW5nZXMgb24gdGhlIHNpZGViYXIgZWxlbWVudFxuXHRcdHRoaXMuc2lkZWJhck9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKG11dGF0aW9ucykgPT4ge1xuXHRcdFx0bGV0IHNob3VsZFVwZGF0ZSA9IGZhbHNlO1xuXHRcdFx0bXV0YXRpb25zLmZvckVhY2goKG11dGF0aW9uKSA9PiB7XG5cdFx0XHRcdGlmIChtdXRhdGlvbi50eXBlID09PSAnYXR0cmlidXRlcycgJiYgbXV0YXRpb24uYXR0cmlidXRlTmFtZSA9PT0gJ2NsYXNzJykge1xuXHRcdFx0XHRcdHNob3VsZFVwZGF0ZSA9IHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0aWYgKHNob3VsZFVwZGF0ZSkge1xuXHRcdFx0XHR0aGlzLnVwZGF0ZUljb25Qb3NpdGlvbkZvclNpZGViYXIoKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHRoaXMuc2lkZWJhck9ic2VydmVyLm9ic2VydmUobGVmdFNpZGViYXIsIHtcblx0XHRcdGF0dHJpYnV0ZXM6IHRydWUsXG5cdFx0XHRhdHRyaWJ1dGVGaWx0ZXI6IFsnY2xhc3MnXSxcblx0XHR9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBXYXRjaCBmb3IgdGFiIGJhciB2aXNpYmlsaXR5IGNoYW5nZXMgKE94eWdlbiB0aGVtZSBhdXRvLWhpZGUsIGZvY3VzIG1vZGUsIGV0Yy4pXG5cdCAqIFJFTU9WRUQ6IE5vIGxvbmdlciBuZWVkZWQgLSBDU1MgaGFuZGxlcyBhbGwgdmlzaWJpbGl0eSBhdXRvbWF0aWNhbGx5XG5cdCAqL1xuXHRwcml2YXRlIHdhdGNoVGFiQmFyVmlzaWJpbGl0eSgpOiB2b2lkIHtcblx0XHQvLyBEbyBub3RoaW5nIC0gQ1NTIGhhbmRsZXMgYWxsIHZpc2liaWxpdHlcblx0XHQvLyBUaGUgaWNvbiBpcyBpbnNpZGUgdGhlIHRhYiBjb250YWluZXIsIHNvIGl0IGhpZGVzIGF1dG9tYXRpY2FsbHlcblx0fVxuXG5cdC8qKlxuXHQgKiBUb2dnbGUgdGhlIHN0aWNreSBpY29uIHZpc2liaWxpdHlcblx0ICovXG5cdGFzeW5jIHRvZ2dsZSgpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93U3RpY2t5SG9tZUljb24gPSAhdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1N0aWNreUhvbWVJY29uO1xuXHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdHRoaXMudXBkYXRlKCk7XG5cdFx0Ly8gVXBkYXRlIHRhYiBoZWFkZXJzIHdoZW4gdG9nZ2xpbmcgc3RpY2t5IGljb25cblx0XHR0aGlzLnVwZGF0ZVRhYkhlYWRlcnMoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBVcGRhdGUgdGFiIGhlYWRlcnMgdG8gaGlkZS9zaG93IGdob3N0IHRhYlxuXHQgKiBPbmx5IHdvcmtzIHdoZW4gc3RpY2t5IGljb24gaXMgZW5hYmxlZFxuXHQgKiBSZW1vdmVkIGRlYm91bmNlIC0gbXVzdCBiZSBpbW1lZGlhdGUgdG8gcHJldmVudCBmbGFzaFxuXHQgKi9cblx0dXBkYXRlVGFiSGVhZGVycygpOiB2b2lkIHtcblx0XHQvLyBDbGVhciBhbnkgcGVuZGluZyB1cGRhdGVcblx0XHRpZiAodGhpcy50YWJIZWFkZXJVcGRhdGVUaW1lb3V0KSB7XG5cdFx0XHRjbGVhclRpbWVvdXQodGhpcy50YWJIZWFkZXJVcGRhdGVUaW1lb3V0KTtcblx0XHRcdHRoaXMudGFiSGVhZGVyVXBkYXRlVGltZW91dCA9IG51bGw7XG5cdFx0fVxuXG5cdFx0Ly8gRXhlY3V0ZSBpbW1lZGlhdGVseSAtIG5vIGRlYm91bmNlIHRvIHByZXZlbnQgZmxhc2hcblx0XHR0aGlzLl9kb1VwZGF0ZVRhYkhlYWRlcnMoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBJbnRlcm5hbCBtZXRob2QgdGhhdCBhY3R1YWxseSB1cGRhdGVzIHRoZSB0YWIgaGVhZGVyc1xuXHQgKi9cblx0cHJpdmF0ZSBfZG9VcGRhdGVUYWJIZWFkZXJzKCk6IHZvaWQge1xuXHRcdC8vIE9ubHkgaGlkZSBnaG9zdCB0YWIgaWYgQk9USCBzdGlja3kgaWNvbiBBTkQgaGlkZSB0YWIgaGVhZGVyIGFyZSBlbmFibGVkXG5cdFx0aWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93U3RpY2t5SG9tZUljb24gfHwgIXRoaXMucGx1Z2luLnNldHRpbmdzLmhpZGVIb21lVGFiSGVhZGVyKSB7XG5cdFx0XHQvLyBSZW1vdmUgYWxsIGhvbWUgYmFzZSB0YWIgY2xhc3NlcyBmcm9tIEFMTCB3aW5kb3dzXG5cdFx0XHR0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcblx0XHRcdFx0Y29uc3QgdGFiSGVhZGVyID0gdGhpcy5nZXRUYWJIZWFkZXJGb3JMZWFmKGxlYWYpO1xuXHRcdFx0XHRpZiAodGFiSGVhZGVyKSB7XG5cdFx0XHRcdFx0dGFiSGVhZGVyLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWhvbWUtYmFzZS10YWInKTtcblx0XHRcdFx0XHR0YWJIZWFkZXIucmVtb3ZlQXR0cmlidXRlKCdkYXRhLWhvbWUtYmFzZS1naG9zdCcpO1xuXHRcdFx0XHRcdHRhYkhlYWRlci5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJyk7XG5cblx0XHRcdFx0XHRjb25zdCB0YWJIZWFkZXJFeHRlbmRlZCA9IHRhYkhlYWRlciBhcyBUYWJIZWFkZXJFbGVtZW50O1xuXHRcdFx0XHRcdGlmICh0YWJIZWFkZXJFeHRlbmRlZC5faG9tZUJhc2VQYXJlbnQgJiYgIXRhYkhlYWRlckV4dGVuZGVkLl9ob21lQmFzZVBhcmVudC5jb250YWlucyh0YWJIZWFkZXIpKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBwYXJlbnQgPSB0YWJIZWFkZXJFeHRlbmRlZC5faG9tZUJhc2VQYXJlbnQ7XG5cdFx0XHRcdFx0XHRjb25zdCBuZXh0U2libGluZyA9IHRhYkhlYWRlckV4dGVuZGVkLl9ob21lQmFzZU5leHRTaWJsaW5nO1xuXHRcdFx0XHRcdFx0aWYgKHBhcmVudCkge1xuXHRcdFx0XHRcdFx0XHRpZiAobmV4dFNpYmxpbmcgJiYgbmV4dFNpYmxpbmcucGFyZW50RWxlbWVudCA9PT0gcGFyZW50KSB7XG5cdFx0XHRcdFx0XHRcdFx0cGFyZW50Lmluc2VydEJlZm9yZSh0YWJIZWFkZXIsIG5leHRTaWJsaW5nKTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRwYXJlbnQuYXBwZW5kQ2hpbGQodGFiSGVhZGVyKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0ZGVsZXRlIHRhYkhlYWRlckV4dGVuZGVkLl9ob21lQmFzZVBhcmVudDtcblx0XHRcdFx0XHRcdGRlbGV0ZSB0YWJIZWFkZXJFeHRlbmRlZC5faG9tZUJhc2VOZXh0U2libGluZztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIENSSVRJQ0FMOiBSZW1vdmUgZ2hvc3QgdGFiIGhlYWRlcnMgU1lOQ0hST05PVVNMWSBiZWZvcmUgYW55IGFuaW1hdGlvbiBmcmFtZXNcblx0XHQvLyBUaGlzIHByZXZlbnRzIHRoZW0gZnJvbSBicmllZmx5IGFwcGVhcmluZyB3aGVuIHRhYnMgY2hhbmdlXG5cdFx0Y29uc3QgZ2hvc3RUYWJIZWFkZXJzVG9SZW1vdmU6IEFycmF5PHsgdGFiSGVhZGVyOiBIVE1MRWxlbWVudDsgbGVhZjogV29ya3NwYWNlTGVhZiB9PiA9IFtdO1xuXG5cdFx0dGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5pdGVyYXRlQWxsTGVhdmVzKChsZWFmKSA9PiB7XG5cdFx0XHQvLyBPbmx5IHByb2Nlc3MgbGVhdmVzIGluIHRoZSBtYWluIHdvcmtzcGFjZSAobm90IHNpZGViYXJzKVxuXHRcdFx0Y29uc3QgdmlldyA9IGxlYWYudmlldztcblx0XHRcdGxldCBjb250YWluZXI6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cblx0XHRcdGlmICh2aWV3KSB7XG5cdFx0XHRcdGNvbnN0IHZpZXdBbnkgPSB2aWV3IGFzIHVua25vd24gYXMgeyBjb250YWluZXJFbD86IEhUTUxFbGVtZW50IH07XG5cdFx0XHRcdGNvbnRhaW5lciA9IHZpZXdBbnkuY29udGFpbmVyRWwgfHwgbnVsbDtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCFjb250YWluZXIpIHtcblx0XHRcdFx0Y29uc3QgbGVhZkFueSA9IGxlYWYgYXMgdW5rbm93biBhcyB7IGNvbnRhaW5lckVsPzogSFRNTEVsZW1lbnQgfTtcblx0XHRcdFx0Y29udGFpbmVyID0gbGVhZkFueS5jb250YWluZXJFbCB8fCBudWxsO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoY29udGFpbmVyKSB7XG5cdFx0XHRcdC8vIENoZWNrIGlmIGl0J3MgaW4gdGhlIG1haW4gd29ya3NwYWNlIChyb290LCBub3Qgc2lkZWJhcilcblx0XHRcdFx0Y29uc3Qgcm9vdFdvcmtzcGFjZSA9IGNvbnRhaW5lci5jbG9zZXN0KCcud29ya3NwYWNlLXNwbGl0Lm1vZC12ZXJ0aWNhbC5tb2Qtcm9vdCcpO1xuXHRcdFx0XHRjb25zdCBsZWZ0U2lkZWJhciA9IGNvbnRhaW5lci5jbG9zZXN0KCcud29ya3NwYWNlLXNwbGl0Lm1vZC1sZWZ0LXNwbGl0Jyk7XG5cdFx0XHRcdGNvbnN0IHJpZ2h0U2lkZWJhciA9IGNvbnRhaW5lci5jbG9zZXN0KCcud29ya3NwYWNlLXNwbGl0Lm1vZC1yaWdodC1zcGxpdCcpO1xuXG5cdFx0XHRcdC8vIE9ubHkgcHJvY2VzcyBtYWluIHdvcmtzcGFjZSBsZWF2ZXNcblx0XHRcdFx0aWYgKHJvb3RXb3Jrc3BhY2UgJiYgIWxlZnRTaWRlYmFyICYmICFyaWdodFNpZGViYXIpIHtcblx0XHRcdFx0XHRpZiAodGhpcy5wbHVnaW4uaG9tZVNlcnZpY2UuaXNHaG9zdExlYWYobGVhZikpIHtcblx0XHRcdFx0XHRcdGNvbnN0IHRhYkhlYWRlciA9IHRoaXMuZ2V0VGFiSGVhZGVyRm9yTGVhZihsZWFmKTtcblx0XHRcdFx0XHRcdGlmICh0YWJIZWFkZXIgJiYgdGFiSGVhZGVyLnBhcmVudEVsZW1lbnQpIHtcblx0XHRcdFx0XHRcdFx0Z2hvc3RUYWJIZWFkZXJzVG9SZW1vdmUucHVzaCh7IHRhYkhlYWRlciwgbGVhZiB9KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIFJlbW92ZSBhbGwgZ2hvc3QgdGFiIGhlYWRlcnMgc3luY2hyb25vdXNseSBCRUZPUkUgYW55IHJlbmRlcmluZ1xuXHRcdGdob3N0VGFiSGVhZGVyc1RvUmVtb3ZlLmZvckVhY2goKHsgdGFiSGVhZGVyIH0pID0+IHtcblx0XHRcdGNvbnN0IHBhcmVudCA9IHRhYkhlYWRlci5wYXJlbnRFbGVtZW50O1xuXHRcdFx0aWYgKHBhcmVudCAmJiBwYXJlbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCd3b3Jrc3BhY2UtdGFiLWhlYWRlci1jb250YWluZXItaW5uZXInKSkge1xuXHRcdFx0XHRjb25zdCB0YWJIZWFkZXJFeHRlbmRlZCA9IHRhYkhlYWRlciBhcyBUYWJIZWFkZXJFbGVtZW50O1xuXHRcdFx0XHQvLyBPbmx5IHJlbW92ZSBpZiBub3QgYWxyZWFkeSByZW1vdmVkXG5cdFx0XHRcdGlmIChwYXJlbnQuY29udGFpbnModGFiSGVhZGVyKSkge1xuXHRcdFx0XHRcdHRhYkhlYWRlckV4dGVuZGVkLl9ob21lQmFzZVBhcmVudCA9IHBhcmVudDtcblx0XHRcdFx0XHR0YWJIZWFkZXJFeHRlbmRlZC5faG9tZUJhc2VOZXh0U2libGluZyA9IHRhYkhlYWRlci5uZXh0U2libGluZztcblx0XHRcdFx0XHR0YWJIZWFkZXIucmVtb3ZlKCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIE5vdyB1cGRhdGUgb3RoZXIgdGFiIGhlYWRlcnMgaW4gcmVxdWVzdEFuaW1hdGlvbkZyYW1lIChub24tY3JpdGljYWwpXG5cdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcblx0XHRcdGNvbnN0IGhvbWVCYXNlU2V0dGluZ3MgPSB0aGlzLnBsdWdpbi5nZXRIb21lQmFzZVNldHRpbmdzKCk7XG5cdFx0XHRjb25zdCBob21lQmFzZVBhdGggPSByZXNvbHZlUGF0aFN5bmMoaG9tZUJhc2VTZXR0aW5ncy50eXBlLCBob21lQmFzZVNldHRpbmdzLnZhbHVlLCB0aGlzLnBsdWdpbi5hcHApO1xuXG5cdFx0XHQvLyBSZXN0b3JlIGFueSBub24tZ2hvc3QgdGFicyB0aGF0IHdlcmUgaW5jb3JyZWN0bHkgcmVtb3ZlZFxuXHRcdFx0dGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5pdGVyYXRlQWxsTGVhdmVzKChsZWFmKSA9PiB7XG5cdFx0XHRcdC8vIE9ubHkgcHJvY2VzcyBsZWF2ZXMgaW4gdGhlIG1haW4gd29ya3NwYWNlIChub3Qgc2lkZWJhcnMpXG5cdFx0XHRcdGNvbnN0IHZpZXcgPSBsZWFmLnZpZXc7XG5cdFx0XHRcdGxldCBjb250YWluZXI6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cblx0XHRcdFx0aWYgKHZpZXcpIHtcblx0XHRcdFx0XHRjb25zdCB2aWV3QW55ID0gdmlldyBhcyB1bmtub3duIGFzIHsgY29udGFpbmVyRWw/OiBIVE1MRWxlbWVudCB9O1xuXHRcdFx0XHRcdGNvbnRhaW5lciA9IHZpZXdBbnkuY29udGFpbmVyRWwgfHwgbnVsbDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICghY29udGFpbmVyKSB7XG5cdFx0XHRcdFx0Y29uc3QgbGVhZkFueSA9IGxlYWYgYXMgdW5rbm93biBhcyB7IGNvbnRhaW5lckVsPzogSFRNTEVsZW1lbnQgfTtcblx0XHRcdFx0XHRjb250YWluZXIgPSBsZWFmQW55LmNvbnRhaW5lckVsIHx8IG51bGw7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoY29udGFpbmVyKSB7XG5cdFx0XHRcdFx0Ly8gQ2hlY2sgaWYgaXQncyBpbiB0aGUgbWFpbiB3b3Jrc3BhY2UgKHJvb3QsIG5vdCBzaWRlYmFyKVxuXHRcdFx0XHRcdGNvbnN0IHJvb3RXb3Jrc3BhY2UgPSBjb250YWluZXIuY2xvc2VzdCgnLndvcmtzcGFjZS1zcGxpdC5tb2QtdmVydGljYWwubW9kLXJvb3QnKTtcblx0XHRcdFx0XHRjb25zdCBsZWZ0U2lkZWJhciA9IGNvbnRhaW5lci5jbG9zZXN0KCcud29ya3NwYWNlLXNwbGl0Lm1vZC1sZWZ0LXNwbGl0Jyk7XG5cdFx0XHRcdFx0Y29uc3QgcmlnaHRTaWRlYmFyID0gY29udGFpbmVyLmNsb3Nlc3QoJy53b3Jrc3BhY2Utc3BsaXQubW9kLXJpZ2h0LXNwbGl0Jyk7XG5cblx0XHRcdFx0XHQvLyBPbmx5IHByb2Nlc3MgbWFpbiB3b3Jrc3BhY2UgbGVhdmVzXG5cdFx0XHRcdFx0aWYgKHJvb3RXb3Jrc3BhY2UgJiYgIWxlZnRTaWRlYmFyICYmICFyaWdodFNpZGViYXIpIHtcblx0XHRcdFx0XHRcdGNvbnN0IGlzR2hvc3RUYWIgPSB0aGlzLnBsdWdpbi5ob21lU2VydmljZS5pc0dob3N0TGVhZihsZWFmKTtcblx0XHRcdFx0XHRcdGNvbnN0IHRhYkhlYWRlciA9IHRoaXMuZ2V0VGFiSGVhZGVyRm9yTGVhZihsZWFmKTtcblx0XHRcdFx0XHRcdGlmICghdGFiSGVhZGVyKSByZXR1cm47XG5cblx0XHRcdFx0XHRcdGNvbnN0IHRhYkhlYWRlckV4dGVuZGVkID0gdGFiSGVhZGVyIGFzIFRhYkhlYWRlckVsZW1lbnQ7XG5cdFx0XHRcdFx0XHRjb25zdCBpc1JlbW92ZWQgPSB0YWJIZWFkZXJFeHRlbmRlZC5faG9tZUJhc2VQYXJlbnQgJiYgIXRhYkhlYWRlckV4dGVuZGVkLl9ob21lQmFzZVBhcmVudC5jb250YWlucyh0YWJIZWFkZXIpO1xuXG5cdFx0XHRcdFx0XHRpZiAoIWlzR2hvc3RUYWIpIHtcblx0XHRcdFx0XHRcdFx0Ly8gTm90IGEgZ2hvc3QgdGFiIC0gcmVzdG9yZSBpZiBpdCB3YXMgcmVtb3ZlZFxuXHRcdFx0XHRcdFx0XHRpZiAoaXNSZW1vdmVkKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgcGFyZW50ID0gdGFiSGVhZGVyRXh0ZW5kZWQuX2hvbWVCYXNlUGFyZW50O1xuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IG5leHRTaWJsaW5nID0gdGFiSGVhZGVyRXh0ZW5kZWQuX2hvbWVCYXNlTmV4dFNpYmxpbmc7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKHBhcmVudCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKG5leHRTaWJsaW5nICYmIG5leHRTaWJsaW5nLnBhcmVudEVsZW1lbnQgPT09IHBhcmVudCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRwYXJlbnQuaW5zZXJ0QmVmb3JlKHRhYkhlYWRlciwgbmV4dFNpYmxpbmcpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0cGFyZW50LmFwcGVuZENoaWxkKHRhYkhlYWRlcik7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRkZWxldGUgdGFiSGVhZGVyRXh0ZW5kZWQuX2hvbWVCYXNlUGFyZW50O1xuXHRcdFx0XHRcdFx0XHRcdFx0ZGVsZXRlIHRhYkhlYWRlckV4dGVuZGVkLl9ob21lQmFzZU5leHRTaWJsaW5nO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdC8vIENoZWNrIGlmIHRoaXMgaXMgYSBub3JtYWwgaG9tZSBiYXNlIHRhYiAobm90IGdob3N0KSB0byBhcHBseSBhY3RpdmUgc3RhdGUgc3R5bGluZyBpZiBuZWVkZWRcblx0XHRcdFx0XHRcdFx0Ly8gV2Ugb25seSBkbyB0aGlzIGlmIHdlIGhhdmUgYSBwYXRoIHRvIGNvbXBhcmUgYWdhaW5zdCAob3IgaWYgaXQncyBhIGdyYXBoIHZpZXcpXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGlzR3JhcGhIb21lID0gaG9tZUJhc2VTZXR0aW5ncy50eXBlID09PSBIb21lQmFzZVR5cGUuR3JhcGggJiYgbGVhZi52aWV3Py5nZXRWaWV3VHlwZSgpID09PSAnZ3JhcGgnO1xuXHRcdFx0XHRcdFx0XHRpZiAoKGhvbWVCYXNlUGF0aCAmJiBsZWFmSGFzRmlsZShsZWFmLCBob21lQmFzZVBhdGgpKSB8fCBpc0dyYXBoSG9tZSkge1xuXHRcdFx0XHRcdFx0XHRcdHRhYkhlYWRlci5jbGFzc0xpc3QuYWRkKCdpcy1ob21lLWJhc2UtdGFiJyk7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0dGFiSGVhZGVyLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWhvbWUtYmFzZS10YWInKTtcblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdHRhYkhlYWRlci5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtaG9tZS1iYXNlLWdob3N0Jyk7XG5cdFx0XHRcdFx0XHRcdHRhYkhlYWRlci5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJyk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBHZXQgdGhlIHRhYiBoZWFkZXIgZWxlbWVudCBmb3IgYSBnaXZlbiBsZWFmXG5cdCAqL1xuXHRwcml2YXRlIGdldFRhYkhlYWRlckZvckxlYWYobGVhZjogV29ya3NwYWNlTGVhZik6IEhUTUxFbGVtZW50IHwgbnVsbCB7XG5cdFx0Ly8gVHJ5IHRvIGdldCBmcm9tIGxlYWYncyBpbnRlcm5hbCBwcm9wZXJ0eSBmaXJzdCAoaWYgYXZhaWxhYmxlKVxuXHRcdGNvbnN0IGxlYWZBbnkgPSBsZWFmIGFzIHVua25vd24gYXMgeyB0YWJIZWFkZXJFbD86IEhUTUxFbGVtZW50IH07XG5cdFx0aWYgKGxlYWZBbnkudGFiSGVhZGVyRWwpIHtcblx0XHRcdHJldHVybiBsZWFmQW55LnRhYkhlYWRlckVsO1xuXHRcdH1cblxuXHRcdC8vIEZhbGxiYWNrOiBmaW5kIGJ5IHF1ZXJ5aW5nIERPTSB3aXRoaW4gdGhlIGxlYWYncyB3aW5kb3dcblx0XHRjb25zdCB2aWV3VHlwZSA9IGxlYWYudmlldz8uZ2V0Vmlld1R5cGUoKTtcblx0XHRpZiAoIXZpZXdUeXBlKSByZXR1cm4gbnVsbDtcblxuXHRcdC8vIEdldCB0aGUgZG9jdW1lbnQgZm9yIHRoaXMgbGVhZlxuXHRcdGNvbnN0IGRvYyA9IGxlYWYudmlldz8uY29udGFpbmVyRWw/Lm93bmVyRG9jdW1lbnQgfHwgZG9jdW1lbnQ7XG5cblx0XHQvLyBHZXQgdGhlIGFjdGl2ZSBsZWFmIHRvIGhlbHAgd2l0aCBtYXRjaGluZ1xuXHRcdGNvbnN0IGFjdGl2ZUxlYWYgPSB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldE1vc3RSZWNlbnRMZWFmKCk7XG5cdFx0Y29uc3QgaXNBY3RpdmUgPSBsZWFmID09PSBhY3RpdmVMZWFmO1xuXG5cdFx0Ly8gRmluZCBhbGwgdGFiIGhlYWRlcnMgd2l0aCBtYXRjaGluZyB2aWV3IHR5cGUgaW4gVEhJUyB3aW5kb3dcblx0XHRjb25zdCB0YWJIZWFkZXJzID0gZG9jLnF1ZXJ5U2VsZWN0b3JBbGwoYC53b3Jrc3BhY2UtdGFiLWhlYWRlcltkYXRhLXR5cGU9XCIke3ZpZXdUeXBlfVwiXWApO1xuXG5cdFx0Ly8gSWYgdGhpcyBpcyB0aGUgYWN0aXZlIGxlYWYsIHByZWZlciB0aGUgYWN0aXZlIHRhYiBoZWFkZXIgaW4gVEhJUyB3aW5kb3dcblx0XHRpZiAoaXNBY3RpdmUpIHtcblx0XHRcdGNvbnN0IGFjdGl2ZUhlYWRlciA9IGRvYy5xdWVyeVNlbGVjdG9yKCcud29ya3NwYWNlLXRhYi1oZWFkZXIuaXMtYWN0aXZlJyk7XG5cdFx0XHRpZiAoYWN0aXZlSGVhZGVyICYmIGFjdGl2ZUhlYWRlci5nZXRBdHRyaWJ1dGUoJ2RhdGEtdHlwZScpID09PSB2aWV3VHlwZSkge1xuXHRcdFx0XHRyZXR1cm4gYWN0aXZlSGVhZGVyIGFzIEhUTUxFbGVtZW50O1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFRyeSB0byBtYXRjaCBieSBjaGVja2luZyBpZiBoZWFkZXIncyBsZWFmIHByb3BlcnR5IG1hdGNoZXNcblx0XHRmb3IgKGNvbnN0IGhlYWRlciBvZiBBcnJheS5mcm9tKHRhYkhlYWRlcnMpKSB7XG5cdFx0XHRjb25zdCBoZWFkZXJFbCA9IGhlYWRlciBhcyBIVE1MRWxlbWVudDtcblx0XHRcdGNvbnN0IGhlYWRlckVsV2l0aExlYWYgPSBoZWFkZXJFbCBhcyB1bmtub3duIGFzIHsgbGVhZj86IFdvcmtzcGFjZUxlYWYgfTtcblx0XHRcdGNvbnN0IGhlYWRlckxlYWYgPSBoZWFkZXJFbFdpdGhMZWFmLmxlYWY7XG5cdFx0XHRpZiAoaGVhZGVyTGVhZiA9PT0gbGVhZikge1xuXHRcdFx0XHRyZXR1cm4gaGVhZGVyRWw7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gSWYgb25seSBvbmUgdGFiIGhlYWRlciBtYXRjaGVzIHRoZSB2aWV3IHR5cGUgaW4gdGhpcyB3aW5kb3csIGl0J3MgbGlrZWx5IHRoZSBvbmVcblx0XHRpZiAodGFiSGVhZGVycy5sZW5ndGggPT09IDEpIHtcblx0XHRcdHJldHVybiB0YWJIZWFkZXJzWzBdIGFzIEhUTUxFbGVtZW50O1xuXHRcdH1cblxuXHRcdC8vIExhc3QgcmVzb3J0OiBpZiB0aGlzIGlzIGFjdGl2ZSBhbmQgd2UgZm91bmQgYW4gYWN0aXZlIGhlYWRlciBpbiB0aGlzIHdpbmRvdywgdXNlIGl0XG5cdFx0aWYgKGlzQWN0aXZlKSB7XG5cdFx0XHRjb25zdCBhY3RpdmVIZWFkZXIgPSBkb2MucXVlcnlTZWxlY3RvcignLndvcmtzcGFjZS10YWItaGVhZGVyLmlzLWFjdGl2ZScpO1xuXHRcdFx0aWYgKGFjdGl2ZUhlYWRlcikge1xuXHRcdFx0XHRyZXR1cm4gYWN0aXZlSGVhZGVyIGFzIEhUTUxFbGVtZW50O1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cblx0LyoqXG5cdCAqIENsb3NlIHRoZSBob21lIGJhc2UgdGFiXG5cdCAqIFdoZW4gY2FsbGVkIGZyb20gY29udGV4dCBtZW51OiBPbmx5IGNsb3NlcyB0aGUgZ2hvc3QgdGFiICh0aGUgXCJvY2N1cGllZFwiIHNsb3QpXG5cdCAqIE90aGVyIGhvbWUgYmFzZSB0YWJzIGFyZSBsZWZ0IGFsb25lXG5cdCAqL1xuXHRjbG9zZUhvbWVCYXNlKGFjdHVhbGx5Q2xvc2U6IGJvb2xlYW4gPSBmYWxzZSk6IHZvaWQge1xuXHRcdGNvbnN0IGhvbWVCYXNlU2V0dGluZ3MgPSB0aGlzLnBsdWdpbi5nZXRIb21lQmFzZVNldHRpbmdzKCk7XG5cdFx0Y29uc3QgaG9tZUJhc2VQYXRoID0gcmVzb2x2ZVBhdGhTeW5jKGhvbWVCYXNlU2V0dGluZ3MudHlwZSwgaG9tZUJhc2VTZXR0aW5ncy52YWx1ZSwgdGhpcy5wbHVnaW4uYXBwKTtcblxuXHRcdC8vIEZpbmQgdGhlIGdob3N0IHRhYiAodGhlIFwib2NjdXBpZWRcIiBzbG90IC0gcGlubmVkIGhvbWUgYmFzZSB0YWIpXG5cdFx0Y29uc3QgZ2hvc3RUYWJzOiBXb3Jrc3BhY2VMZWFmW10gPSBbXTtcblx0XHRjb25zdCBhbGxIb21lQmFzZUxlYXZlczogV29ya3NwYWNlTGVhZltdID0gW107XG5cblx0XHR0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcblx0XHRcdGNvbnN0IGlzR2hvc3QgPSB0aGlzLnBsdWdpbi5ob21lU2VydmljZS5pc0dob3N0TGVhZihsZWFmKTtcblx0XHRcdGlmIChpc0dob3N0KSB7XG5cdFx0XHRcdGdob3N0VGFicy5wdXNoKGxlYWYpO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoaG9tZUJhc2VQYXRoICYmIGxlYWZIYXNGaWxlKGxlYWYsIGhvbWVCYXNlUGF0aCkpIHtcblx0XHRcdFx0YWxsSG9tZUJhc2VMZWF2ZXMucHVzaChsZWFmKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93U3RpY2t5SG9tZUljb24pIHtcblx0XHRcdC8vIFN0aWNreSBpY29uIGVuYWJsZWQ6IG9ubHkgY2xvc2UgdGhlIGdob3N0IHRhYihzKVxuXHRcdFx0Zm9yIChjb25zdCBnaG9zdFRhYiBvZiBnaG9zdFRhYnMpIHtcblx0XHRcdFx0dm9pZCBnaG9zdFRhYi5kZXRhY2goKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gU3RpY2t5IGljb24gZGlzYWJsZWQ6IGNsb3NlIGFsbCBob21lIGJhc2UgdGFic1xuXHRcdFx0Zm9yIChjb25zdCBsZWFmIG9mIGFsbEhvbWVCYXNlTGVhdmVzKSB7XG5cdFx0XHRcdHZvaWQgbGVhZi5kZXRhY2goKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBVcGRhdGUgdGFiIGhlYWRlcnMgYWZ0ZXIgY2xvc2luZ1xuXHRcdHRoaXMudXBkYXRlVGFiSGVhZGVycygpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFBpbiB0aGUgaG9tZSBiYXNlIHRhYlxuXHQgKi9cblx0cGluSG9tZUJhc2VUYWIoKTogdm9pZCB7XG5cdFx0Y29uc3QgaG9tZUJhc2VTZXR0aW5ncyA9IHRoaXMucGx1Z2luLmdldEhvbWVCYXNlU2V0dGluZ3MoKTtcblx0XHRjb25zdCBob21lQmFzZVBhdGggPSByZXNvbHZlUGF0aFN5bmMoaG9tZUJhc2VTZXR0aW5ncy50eXBlLCBob21lQmFzZVNldHRpbmdzLnZhbHVlLCB0aGlzLnBsdWdpbi5hcHApO1xuXHRcdGlmICghaG9tZUJhc2VQYXRoKSByZXR1cm47XG5cblx0XHRjb25zdCBob21lQmFzZUZpbGUgPSBnZXRGaWxlQnlQYXRoKHRoaXMucGx1Z2luLmFwcCwgaG9tZUJhc2VQYXRoKTtcblx0XHRpZiAoIWhvbWVCYXNlRmlsZSkgcmV0dXJuO1xuXG5cdFx0Y29uc3QgaG9tZUJhc2VMZWFmID0gdGhpcy5wbHVnaW4uaG9tZVNlcnZpY2UuZmluZEV4aXN0aW5nSG9tZUJhc2VMZWFmKGhvbWVCYXNlRmlsZSk7XG5cdFx0aWYgKGhvbWVCYXNlTGVhZikge1xuXHRcdFx0aG9tZUJhc2VMZWFmLnNldFBpbm5lZCh0cnVlKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogVW5waW4gdGhlIGhvbWUgYmFzZSB0YWJcblx0ICovXG5cdHVucGluSG9tZUJhc2VUYWIoKTogdm9pZCB7XG5cdFx0Y29uc3QgaG9tZUJhc2VTZXR0aW5ncyA9IHRoaXMucGx1Z2luLmdldEhvbWVCYXNlU2V0dGluZ3MoKTtcblx0XHRjb25zdCBob21lQmFzZVBhdGggPSByZXNvbHZlUGF0aFN5bmMoaG9tZUJhc2VTZXR0aW5ncy50eXBlLCBob21lQmFzZVNldHRpbmdzLnZhbHVlLCB0aGlzLnBsdWdpbi5hcHApO1xuXHRcdGlmICghaG9tZUJhc2VQYXRoKSByZXR1cm47XG5cblx0XHRjb25zdCBob21lQmFzZUZpbGUgPSBnZXRGaWxlQnlQYXRoKHRoaXMucGx1Z2luLmFwcCwgaG9tZUJhc2VQYXRoKTtcblx0XHRpZiAoIWhvbWVCYXNlRmlsZSkgcmV0dXJuO1xuXG5cdFx0Y29uc3QgaG9tZUJhc2VMZWFmID0gdGhpcy5wbHVnaW4uaG9tZVNlcnZpY2UuZmluZEV4aXN0aW5nSG9tZUJhc2VMZWFmKGhvbWVCYXNlRmlsZSk7XG5cdFx0aWYgKGhvbWVCYXNlTGVhZikge1xuXHRcdFx0aG9tZUJhc2VMZWFmLnNldFBpbm5lZChmYWxzZSk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIENoZWNrIGlmIHRoZSBob21lIGJhc2UgdGFiIGlzIHBpbm5lZFxuXHQgKi9cblx0aXNIb21lQmFzZVRhYlBpbm5lZCgpOiBib29sZWFuIHtcblx0XHRjb25zdCBob21lQmFzZVNldHRpbmdzID0gdGhpcy5wbHVnaW4uZ2V0SG9tZUJhc2VTZXR0aW5ncygpO1xuXHRcdGNvbnN0IGhvbWVCYXNlUGF0aCA9IHJlc29sdmVQYXRoU3luYyhob21lQmFzZVNldHRpbmdzLnR5cGUsIGhvbWVCYXNlU2V0dGluZ3MudmFsdWUsIHRoaXMucGx1Z2luLmFwcCk7XG5cdFx0aWYgKCFob21lQmFzZVBhdGgpIHJldHVybiBmYWxzZTtcblxuXHRcdGNvbnN0IGhvbWVCYXNlRmlsZSA9IGdldEZpbGVCeVBhdGgodGhpcy5wbHVnaW4uYXBwLCBob21lQmFzZVBhdGgpO1xuXHRcdGlmICghaG9tZUJhc2VGaWxlKSByZXR1cm4gZmFsc2U7XG5cblx0XHRjb25zdCBob21lQmFzZUxlYWYgPSB0aGlzLnBsdWdpbi5ob21lU2VydmljZS5maW5kRXhpc3RpbmdIb21lQmFzZUxlYWYoaG9tZUJhc2VGaWxlKTtcblx0XHRpZiAoIWhvbWVCYXNlTGVhZikgcmV0dXJuIGZhbHNlO1xuXG5cdFx0Y29uc3Qgdmlld1N0YXRlID0gaG9tZUJhc2VMZWFmLmdldFZpZXdTdGF0ZSgpO1xuXHRcdHJldHVybiB2aWV3U3RhdGUucGlubmVkID09PSB0cnVlO1xuXHR9XG59XG4iLCAiLyoqXHJcbiAqIE1vYmlsZSBCdXR0b24gU2VydmljZVxyXG4gKiBNYW5hZ2VzIHRoZSBtb2JpbGUgbmV3IHRhYiBidXR0b24gcmVwbGFjZW1lbnRcclxuICovXHJcblxyXG5pbXBvcnQgeyBQbGF0Zm9ybSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHR5cGUgSG9tZUJhc2VQbHVnaW4gZnJvbSAnLi4vbWFpbic7XHJcblxyXG4vKipcclxuICogQ1NTIGNsYXNzIGZvciB3aGVuIG1vYmlsZSBidXR0b24gaXMgcmVwbGFjZWRcclxuICovXHJcbmNvbnN0IE1PQklMRV9IT01FX0NMQVNTID0gJ2hvbWUtYmFzZS1tb2JpbGUtZW5hYmxlZCc7XHJcblxyXG5leHBvcnQgY2xhc3MgTW9iaWxlQnV0dG9uU2VydmljZSB7XHJcblx0cHJpdmF0ZSBwbHVnaW46IEhvbWVCYXNlUGx1Z2luO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihwbHVnaW46IEhvbWVCYXNlUGx1Z2luKSB7XHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFVwZGF0ZSB0aGUgbW9iaWxlIGJ1dHRvbiBiYXNlZCBvbiBzZXR0aW5nc1xyXG5cdCAqL1xyXG5cdHVwZGF0ZSgpOiB2b2lkIHtcclxuXHRcdC8vIE9ubHkgYXBwbHkgb24gbW9iaWxlXHJcblx0XHRpZiAoIVBsYXRmb3JtLmlzTW9iaWxlKSB7XHJcblx0XHRcdHRoaXMucmVtb3ZlKCk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MucmVwbGFjZU1vYmlsZU5ld1RhYikge1xyXG5cdFx0XHR0aGlzLmFwcGx5KCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLnJlbW92ZSgpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQXBwbHkgdGhlIG1vYmlsZSBidXR0b24gcmVwbGFjZW1lbnRcclxuXHQgKi9cclxuXHRwcml2YXRlIGFwcGx5KCk6IHZvaWQge1xyXG5cdFx0ZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKE1PQklMRV9IT01FX0NMQVNTKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJlbW92ZSB0aGUgbW9iaWxlIGJ1dHRvbiByZXBsYWNlbWVudFxyXG5cdCAqL1xyXG5cdHJlbW92ZSgpOiB2b2lkIHtcclxuXHRcdGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZShNT0JJTEVfSE9NRV9DTEFTUyk7XHJcblx0fVxyXG59XHJcbiIsICJpbXBvcnQgeyBIb21lQmFzZVR5cGUsIERFRkFVTFRfU0VUVElOR1MgfSBmcm9tICcuL3NldHRpbmdzJztcclxuaW1wb3J0IHR5cGUgSG9tZUJhc2VQbHVnaW4gZnJvbSAnLi9tYWluJztcclxuXHJcbi8qKlxyXG4gKiBNaWdyYXRlIGxlZ2FjeSBzZXR0aW5ncyB0byBuZXcgZm9ybWF0XHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbWlncmF0ZUxlZ2FjeVNldHRpbmdzKHBsdWdpbjogSG9tZUJhc2VQbHVnaW4pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGxldCBuZWVkc1NhdmUgPSBmYWxzZTtcclxuICAgIGNvbnN0IHNldHRpbmdzID0gcGx1Z2luLnNldHRpbmdzIGFzIHVua25vd24gYXMgUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgYm9vbGVhbiB8IEhvbWVCYXNlVHlwZSB8IHVuZGVmaW5lZD47XHJcblxyXG4gICAgLy8gTWlncmF0ZSBob21lQmFzZVBhdGggdG8gaG9tZUJhc2VUeXBlL2hvbWVCYXNlVmFsdWVcclxuICAgIGlmIChzZXR0aW5ncy5ob21lQmFzZVBhdGggJiYgIXBsdWdpbi5zZXR0aW5ncy5ob21lQmFzZVZhbHVlKSB7XHJcbiAgICAgICAgcGx1Z2luLnNldHRpbmdzLmhvbWVCYXNlVHlwZSA9IEhvbWVCYXNlVHlwZS5GaWxlO1xyXG4gICAgICAgIHBsdWdpbi5zZXR0aW5ncy5ob21lQmFzZVZhbHVlID0gc2V0dGluZ3MuaG9tZUJhc2VQYXRoIGFzIHN0cmluZztcclxuICAgICAgICBuZWVkc1NhdmUgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIE1pZ3JhdGUga2VlcEV4aXN0aW5nVGFicyB0byBvcGVuTW9kZVxyXG4gICAgaWYgKHNldHRpbmdzLmtlZXBFeGlzdGluZ1RhYnMgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIC8vIE9ubHkgbWlncmF0ZSBpZiBvcGVuTW9kZSBpcyBzdGlsbCBhdCBkZWZhdWx0IChoYXNuJ3QgYmVlbiBzZXQgYnkgdXNlcilcclxuICAgICAgICBpZiAocGx1Z2luLnNldHRpbmdzLm9wZW5Nb2RlID09PSBERUZBVUxUX1NFVFRJTkdTLm9wZW5Nb2RlKSB7XHJcbiAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy5vcGVuTW9kZSA9IHNldHRpbmdzLmtlZXBFeGlzdGluZ1RhYnMgPyAncmV0YWluJyA6ICdyZXBsYWNlLWFsbCc7XHJcbiAgICAgICAgICAgIG5lZWRzU2F2ZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIERlbGV0ZSBsZWdhY3kgcHJvcGVydHkgc28gaXQgZG9lc24ndCB0cmlnZ2VyIGFnYWluXHJcbiAgICAgICAgZGVsZXRlIHNldHRpbmdzLmtlZXBFeGlzdGluZ1RhYnM7XHJcbiAgICAgICAgbmVlZHNTYXZlID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBNaWdyYXRlIG1vYmlsZSBob21lQmFzZVBhdGhcclxuICAgIGlmIChzZXR0aW5ncy5tb2JpbGVIb21lQmFzZVBhdGggJiYgIXBsdWdpbi5zZXR0aW5ncy5tb2JpbGVIb21lQmFzZVZhbHVlKSB7XHJcbiAgICAgICAgcGx1Z2luLnNldHRpbmdzLm1vYmlsZUhvbWVCYXNlVHlwZSA9IEhvbWVCYXNlVHlwZS5GaWxlO1xyXG4gICAgICAgIHBsdWdpbi5zZXR0aW5ncy5tb2JpbGVIb21lQmFzZVZhbHVlID0gc2V0dGluZ3MubW9iaWxlSG9tZUJhc2VQYXRoIGFzIHN0cmluZztcclxuICAgICAgICBuZWVkc1NhdmUgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEFsc28gY2xlYW4gdXAgbW9iaWxlIGhvbWUgYmFzZSBwYXRoIGxlZ2FjeSBwcm9wZXJ0eVxyXG4gICAgaWYgKHNldHRpbmdzLm1vYmlsZUhvbWVCYXNlUGF0aCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgZGVsZXRlIHNldHRpbmdzLm1vYmlsZUhvbWVCYXNlUGF0aDtcclxuICAgICAgICBuZWVkc1NhdmUgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENsZWFuIHVwIGxlZ2FjeSBob21lQmFzZVBhdGggaWYgaXQgbWF0Y2hlcyBob21lQmFzZVZhbHVlXHJcbiAgICBpZiAoc2V0dGluZ3MuaG9tZUJhc2VQYXRoICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBkZWxldGUgc2V0dGluZ3MuaG9tZUJhc2VQYXRoO1xyXG4gICAgICAgIG5lZWRzU2F2ZSA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKG5lZWRzU2F2ZSkge1xyXG4gICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgIH1cclxufVxyXG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBRUEsV0FBTyxlQUFlLFNBQVMsY0FBYyxFQUFFLE9BQU8sS0FBSyxDQUFDO0FBRTVELFFBQUksV0FBVyxRQUFRLFVBQVU7QUFFakMsUUFBTSw0QkFBNEI7QUFDbEMsUUFBTSw2QkFBNkI7QUFDbkMsUUFBTSw4QkFBOEI7QUFDcEMsUUFBTSxnQ0FBZ0M7QUFDdEMsUUFBTSw2QkFBNkI7QUFFbkMsYUFBUywrQkFBK0IsYUFBYTtBQVpyRDtBQWNJLFlBQU0sZ0JBQWdCLE9BQU8sSUFBSSxRQUFRLFVBQVUsZ0JBQWdCO0FBQ25FLGFBQU8sbUJBQWlCLHlCQUFjLGFBQWQsbUJBQXlCLGlCQUF6QixtQkFBdUM7QUFBQSxJQUNuRTtBQUtBLGFBQVMsdUJBQXVCO0FBckJoQztBQXNCSSxVQUFJO0FBRUEsY0FB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YUFBWTtBQUFBLElBQ3BILE9BQU87QUFFTixZQUFNLFVBQWlEO0FBQUEsUUFDdEQsK0JBQXdCLEdBQUc7QUFBQSxRQUMzQixpQ0FBeUIsR0FBRztBQUFBLFFBQzVCLHFDQUEyQixHQUFHO0FBQUEsUUFDOUIsK0JBQXdCLEdBQUc7QUFBQSxNQUM1QjtBQUVBLFlBQU0sT0FBTyxRQUFRLElBQUk7QUFDekIsVUFBSSxDQUFDLEtBQU0sUUFBTztBQUVsQixZQUFNLGVBQWUsMERBQTJHLHVCQUEzRyxtQkFBK0gsaUJBQS9IO0FBRXJCLGVBQU8sZ0RBQWMsVUFBZCxtQkFBcUIsYUFBWTtBQUFBLElBQ3pDO0FBQUEsRUFDRDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS1EsZUFBd0I7QUFHL0IsUUFBSSxPQUFPLFdBQVcsZUFBZSxPQUFPLFNBQVM7QUFDcEQsWUFBTSxTQUFTLE9BQU8sS0FBSyxPQUFPLE9BQU87QUFDekMsWUFBTSxTQUFTLE9BQU8sUUFBUTtBQUM5QixhQUNDLFdBQVcsVUFDWCxDQUFDLFFBQVEsY0FBYyxFQUFFLFNBQVMsTUFBTSxLQUN4QyxDQUFDLFFBQVEsWUFBWSxXQUFXLEVBQUUsS0FBSyxPQUFLLE9BQU8sU0FBUyxDQUFDLENBQUM7QUFBQSxJQUVoRTtBQUNBLFdBQU87QUFBQSxFQUNSO0FBQUE7QUFBQTtBQUlEOyIsCiAgIm5hbWVzIjogWyJmb3JtYXQiLCAiZm9sZGVyIiwgInRlbXBsYXRlIiwgImNyZWF0ZURhaWx5Tm90ZSIsICJtb21lbnQiLCAiZ2V0RGFpbHlOb3RlIiwgImdldEFsbERhaWx5Tm90ZXMiLCAiY3JlYXRlV2Vla2x5Tm90ZSIsICJnZXRXZWVrbHlOb3RlIiwgImdldEFsbFdlZWtseU5vdGVzIiwgImNyZWF0ZU1vbnRobHlOb3RlIiwgImdldE1vbnRobHlOb3RlIiwgImdldEFsbE1vbnRobHlOb3RlcyIsICJjcmVhdGVRdWFydGVybHlOb3RlIiwgImdldFF1YXJ0ZXJseU5vdGUiLCAiZ2V0QWxsUXVhcnRlcmx5Tm90ZXMiLCAiY3JlYXRlWWVhcmx5Tm90ZSIsICJnZXRZZWFybHlOb3RlIiwgImdldEFsbFllYXJseU5vdGVzIiwgImltcG9ydF9vYnNpZGlhbiIsICJIb21lQmFzZVR5cGUiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiU1VQUE9SVEVEX0VYVEVOU0lPTlMiLCAiU1VQUE9SVEVEX0VYVEVOU0lPTlMiLCAiU1VQUE9SVEVEX0VYVEVOU0lPTlMiLCAiaW1wb3J0X29ic2lkaWFuIiwgIk9WaWV3IiwgImdob3N0VGFiIiwgInNob3VsZEZvY3VzIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAibWFpbldvcmtzcGFjZSIsICJpbXBvcnRfb2JzaWRpYW4iLCAicGVyaW9kaWNOb3RlcyIsICJ2ZXJzaW9uIiwgImlzTGVnYWN5Il0KfQo=
