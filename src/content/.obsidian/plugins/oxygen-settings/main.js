/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MinimalTheme
});
module.exports = __toCommonJS(main_exports);
var import_obsidian8 = require("obsidian");

// src/settings/settings-interface.ts
var DEFAULT_SETTINGS = {
  lightStyle: "oxygen-light",
  darkStyle: "oxygen-dark",
  lightScheme: "oxygen-oxygen-light",
  darkScheme: "oxygen-oxygen-dark",
  editorFont: "",
  lineHeight: 1.5,
  lineWidth: 40,
  lineWidthWide: 50,
  maxWidth: 88,
  textNormal: 16,
  textSmall: 13,
  imgGrid: false,
  imgWidth: "img-default-width",
  tableWidth: "table-default-width",
  iframeWidth: "iframe-default-width",
  mapWidth: "map-default-width",
  chartWidth: "chart-default-width",
  colorfulHeadings: false,
  colorfulFrame: false,
  colorfulActiveStates: false,
  trimNames: true,
  labeledNav: false,
  fullWidthMedia: true,
  workspaceBorders: "enhanced",
  minimalStatus: true,
  underlineInternal: true,
  underlineExternal: true,
  folding: true,
  lineNumbers: false,
  readableLineLength: false,
  devBlockWidth: false,
  customPresets: [],
  enableCustomPresets: true,
  // Sidebar indentation guides
  navIndentationGuideWidth: "0px",
  navIndentationGuideColor: "rgba(var(--mono-rgb-100), 0.12)",
  // Animation settings
  animationPersonality: "default",
  animationSpeed: 1,
  // Blur background
  enableBlur: false,
  // Folder icon
  useDefaultFolderIcon: false
};

// src/settings.ts
var import_obsidian6 = require("obsidian");

// src/utils/settings-compat.ts
var import_obsidian = require("obsidian");
function createSettingsGroup(containerEl, heading, manifestId) {
  if ((0, import_obsidian.requireApiVersion)("1.11.0")) {
    const group = new import_obsidian.SettingGroup(containerEl).setHeading(heading);
    return {
      addSetting(cb) {
        group.addSetting(cb);
      }
    };
  } else {
    if (manifestId) {
      containerEl.addClass(`${manifestId}-settings-compat`);
    }
    const headingEl = containerEl.createDiv("setting-group-heading");
    headingEl.createEl("h3", { text: heading });
    return {
      addSetting(cb) {
        const setting = new import_obsidian.Setting(containerEl);
        cb(setting);
      }
    };
  }
}

// src/types/obsidian-extensions.ts
function getVaultConfig(app, key) {
  const extApp = app;
  return extApp.vault.getConfig(key);
}
function setVaultConfig(app, key, value) {
  const extApp = app;
  extApp.vault.setConfig(key, value);
}
function setTheme(app, theme) {
  const extApp = app;
  extApp.setTheme(theme);
}
function onVaultConfigChanged(app, callback) {
  const extApp = app;
  return extApp.vault.on("config-changed", callback);
}
function updateFontSize(app) {
  const extApp = app;
  if (typeof extApp.updateFontSize === "function") {
    extApp.updateFontSize();
  }
}

// src/constants.ts
var CSS_CLASSES = {
  PLUGIN_THEME: "oxygen-theme",
  THEME_LIGHT: "theme-light",
  THEME_DARK: "theme-dark",
  CUSTOM_PRESETS_STYLE: "oxygen-custom-presets",
  THEME_OVERRIDE: "data-theme-override"
};
var LIGHT_STYLES = [
  "oxygen-light",
  "oxygen-light-tonal",
  "oxygen-light-contrast",
  "oxygen-light-white"
];
var DARK_STYLES = [
  "oxygen-dark",
  "oxygen-dark-tonal",
  "oxygen-dark-black"
];
var LIGHT_SCHEMES = [
  "oxygen-oxygen-light",
  "oxygen-minimal-light",
  "oxygen-atom-light",
  "oxygen-ayu-light",
  "oxygen-catppuccin-light",
  "oxygen-eink-light",
  "oxygen-everforest-light",
  "oxygen-flexoki-light",
  "oxygen-gruvbox-light",
  "oxygen-macos-light",
  "oxygen-nord-light",
  "oxygen-rose-pine-light",
  "oxygen-notion-light",
  "oxygen-solarized-light",
  "oxygen-things-light"
];
var DARK_SCHEMES = [
  "oxygen-oxygen-dark",
  "oxygen-minimal-dark",
  "oxygen-atom-dark",
  "oxygen-ayu-dark",
  "oxygen-catppuccin-dark",
  "oxygen-dracula-dark",
  "oxygen-eink-dark",
  "oxygen-everforest-dark",
  "oxygen-flexoki-dark",
  "oxygen-gruvbox-dark",
  "oxygen-macos-dark",
  "oxygen-nord-dark",
  "oxygen-rose-pine-dark",
  "oxygen-notion-dark",
  "oxygen-solarized-dark",
  "oxygen-things-dark"
];
var TABLE_WIDTH_STYLES = [
  "table-100",
  "table-default-width",
  "table-wide",
  "table-max"
];
var IFRAME_WIDTH_STYLES = [
  "iframe-100",
  "iframe-default-width",
  "iframe-wide",
  "iframe-max"
];
var IMAGE_WIDTH_STYLES = [
  "img-100",
  "img-default-width",
  "img-wide",
  "img-max"
];
var MAP_WIDTH_STYLES = [
  "map-100",
  "map-default-width",
  "map-wide",
  "map-max"
];
var CHART_WIDTH_STYLES = [
  "chart-100",
  "chart-default-width",
  "chart-wide",
  "chart-max"
];
var COMMAND_IDS = {
  // Font commands
  INCREASE_FONT: "increase-body-font-size",
  DECREASE_FONT: "decrease-body-font-size",
  // Style cycling commands
  CYCLE_DARK_STYLE: "toggle-minimal-dark-cycle",
  CYCLE_LIGHT_STYLE: "toggle-minimal-light-cycle",
  // Feature toggle commands
  TOGGLE_BORDERS: "toggle-hidden-borders",
  TOGGLE_COLORFUL_HEADINGS: "toggle-colorful-headings",
  TOGGLE_COLORFUL_FRAME: "toggle-minimal-colorful-frame",
  TOGGLE_IMAGE_GRID: "toggle-minimal-img-grid",
  TOGGLE_THEME: "toggle-minimal-switch",
  // Width cycling commands
  CYCLE_TABLE_WIDTH: "cycle-minimal-table-width",
  CYCLE_IMAGE_WIDTH: "cycle-minimal-image-width",
  CYCLE_IFRAME_WIDTH: "cycle-minimal-iframe-width",
  CYCLE_CHART_WIDTH: "cycle-minimal-chart-width",
  CYCLE_MAP_WIDTH: "cycle-minimal-map-width",
  // Light style commands
  LIGHT_DEFAULT: "toggle-minimal-light-default",
  LIGHT_WHITE: "toggle-minimal-light-white",
  LIGHT_TONAL: "toggle-minimal-light-tonal",
  LIGHT_CONTRAST: "toggle-minimal-light-contrast",
  // Dark style commands
  DARK_DEFAULT: "toggle-minimal-dark-default",
  DARK_TONAL: "toggle-minimal-dark-tonal",
  DARK_BLACK: "toggle-minimal-dark-black",
  // Custom preset commands
  CREATE_PRESET: "create-custom-preset",
  IMPORT_PRESET: "import-custom-preset",
  CYCLE_PRESETS_LIGHT: "cycle-custom-presets-light",
  CYCLE_PRESETS_DARK: "cycle-custom-presets-dark",
  // Dev commands
  DEV_BLOCK_WIDTH: "toggle-minimal-dev-block-width",
  // Settings command
  OPEN_SETTINGS: "oxygen-settings:open-settings"
};
var DEFAULTS = {
  FONT_SIZE_NORMAL: 16,
  FONT_SIZE_SMALL: 13,
  LINE_HEIGHT: 1.5,
  LINE_WIDTH: 40,
  LINE_WIDTH_WIDE: 50,
  MAX_WIDTH: 88,
  FONT_STEP: 0.5
};
var VAULT_CONFIG = {
  BASE_FONT_SIZE: "baseFontSize",
  FOLD_HEADING: "foldHeading",
  SHOW_LINE_NUMBER: "showLineNumber",
  READABLE_LINE_LENGTH: "readableLineLength",
  THEME: "theme"
};
var OBSIDIAN_THEMES = {
  LIGHT: "moonstone",
  DARK: "obsidian",
  SYSTEM: "system"
};
var OXYGEN_THEME_NAME = "Oxygen";
var SCHEME_DISPLAY_NAMES = {
  // Light schemes
  "oxygen-oxygen-light": "Oxygen",
  "oxygen-minimal-light": "Minimal",
  "oxygen-atom-light": "Atom",
  "oxygen-ayu-light": "Ayu",
  "oxygen-catppuccin-light": "Catppuccin",
  "oxygen-eink-light": "E-ink (beta)",
  "oxygen-everforest-light": "Everforest",
  "oxygen-flexoki-light": "Flexoki",
  "oxygen-gruvbox-light": "Gruvbox",
  "oxygen-macos-light": "macOS",
  "oxygen-nord-light": "Nord",
  "oxygen-rose-pine-light": "Ros\xE9 Pine",
  "oxygen-notion-light": "Sky",
  "oxygen-solarized-light": "Solarized",
  "oxygen-things-light": "Things",
  // Dark schemes
  "oxygen-oxygen-dark": "Oxygen",
  "oxygen-minimal-dark": "Minimal",
  "oxygen-atom-dark": "Atom",
  "oxygen-ayu-dark": "Ayu",
  "oxygen-catppuccin-dark": "Catppuccin",
  "oxygen-dracula-dark": "Dracula",
  "oxygen-eink-dark": "E-ink (beta)",
  "oxygen-everforest-dark": "Everforest",
  "oxygen-flexoki-dark": "Flexoki",
  "oxygen-gruvbox-dark": "Gruvbox",
  "oxygen-macos-dark": "macOS",
  "oxygen-nord-dark": "Nord",
  "oxygen-rose-pine-dark": "Ros\xE9 Pine",
  "oxygen-notion-dark": "Sky",
  "oxygen-solarized-dark": "Solarized",
  "oxygen-things-dark": "Things"
};

// src/utils/css-props.ts
function setCssProps(element, props) {
  for (const [key, value] of Object.entries(props)) {
    element.style.setProperty(key, value);
  }
}
function setCssProp(element, prop, value) {
  element.style.setProperty(prop, value);
}

// src/utils/color-utils.ts
function hexToHSL(hex) {
  hex = hex.replace("#", "");
  const r = parseInt(hex.substring(0, 2), 16) / 255;
  const g = parseInt(hex.substring(2, 4), 16) / 255;
  const b = parseInt(hex.substring(4, 6), 16) / 255;
  const max = Math.max(r, g, b);
  const min = Math.min(r, g, b);
  let h = 0, s = 0, l = (max + min) / 2;
  if (max !== min) {
    const d = max - min;
    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
    switch (max) {
      case r:
        h = (g - b) / d + (g < b ? 6 : 0);
        break;
      case g:
        h = (b - r) / d + 2;
        break;
      case b:
        h = (r - g) / d + 4;
        break;
    }
    h /= 6;
  }
  return {
    h: Math.round(h * 360),
    s: Math.round(s * 100),
    l: Math.round(l * 100)
  };
}
function hslToHex(hsl) {
  const h = hsl.h / 360;
  const s = hsl.s / 100;
  const l = hsl.l / 100;
  const hue2rgb = (p, q, t) => {
    if (t < 0) t += 1;
    if (t > 1) t -= 1;
    if (t < 1 / 6) return p + (q - p) * 6 * t;
    if (t < 1 / 2) return q;
    if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;
    return p;
  };
  let r, g, b;
  if (s === 0) {
    r = g = b = l;
  } else {
    const q = l < 0.5 ? l * (1 + s) : l + s - l * s;
    const p = 2 * l - q;
    r = hue2rgb(p, q, h + 1 / 3);
    g = hue2rgb(p, q, h);
    b = hue2rgb(p, q, h - 1 / 3);
  }
  const toHex = (c) => {
    const hex = Math.round(c * 255).toString(16);
    return hex.length === 1 ? "0" + hex : hex;
  };
  return `#${toHex(r)}${toHex(g)}${toHex(b)}`;
}
function validateHex(hex) {
  const hexRegex = /^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3}|[A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/;
  return hexRegex.test(hex);
}
function generateColorSwatch(preset) {
  const swatch = document.createElement("div");
  swatch.className = "custom-preset-swatch";
  const lightBaseHex = hslToHex(preset.light.base);
  const lightAccentHex = hslToHex(preset.light.accent);
  const darkBaseHex = hslToHex(preset.dark.base);
  setCssProps(swatch, {
    "--swatch-gradient-start": lightBaseHex,
    "--swatch-gradient-mid": lightAccentHex,
    "--swatch-gradient-end": darkBaseHex
  });
  return swatch;
}
function sanitizePresetName(name) {
  return name.trim().replace(/[<>:"/\\|?*]/g, "");
}
function generatePresetId(name) {
  return sanitizePresetName(name).toLowerCase().replace(/\s+/g, "-").replace(/[^a-z0-9-]/g, "").substring(0, 50);
}
function validatePresetId(id) {
  const idRegex = /^[a-z0-9-]+$/;
  return idRegex.test(id) && id.length > 0 && id.length <= 50;
}
function isPresetIdUnique(id, existingPresets, excludeId) {
  return !existingPresets.some((preset) => preset.id === id && preset.id !== excludeId);
}

// src/utils/theme-utils.ts
function isOxygenThemeActive(app) {
  const cssTheme = getVaultConfig(app, "cssTheme");
  return cssTheme === OXYGEN_THEME_NAME;
}
function updateObsidianAccentColor(app, hsl) {
  const hex = hslToHex(hsl);
  setVaultConfig(app, "accentColor", hex);
  app.workspace.trigger("css-change");
}

// src/settings/sections/ColorSchemeSettings.ts
function buildColorSchemeSettings(containerEl, plugin) {
  const colorGroup = createSettingsGroup(containerEl, "Color scheme", "oxygen-settings");
  colorGroup.addSetting((setting) => {
    setting.setName("Light mode color scheme").setDesc("Preset color options for light mode. To create a custom color scheme use the Style Settings plugin. See Documentation for details.").addDropdown((dropdown) => {
      dropdown.addOption("oxygen-oxygen-light", "Oxygen").addOption("oxygen-minimal-light", "Minimal").addOption("oxygen-atom-light", "Atom").addOption("oxygen-ayu-light", "Ayu").addOption("oxygen-catppuccin-light", "Catppuccin").addOption("oxygen-eink-light", "E-ink (beta)").addOption("oxygen-everforest-light", "Everforest").addOption("oxygen-flexoki-light", "Flexoki").addOption("oxygen-gruvbox-light", "Gruvbox").addOption("oxygen-macos-light", "macOS").addOption("oxygen-nord-light", "Nord").addOption("oxygen-rose-pine-light", "Ros\xE9 Pine").addOption("oxygen-notion-light", "Sky").addOption("oxygen-solarized-light", "Solarized").addOption("oxygen-things-light", "Things");
      if (plugin.settings.enableCustomPresets && plugin.settings.customPresets.length > 0) {
        plugin.settings.customPresets.sort((a, b) => a.name.localeCompare(b.name)).forEach((preset) => {
          dropdown.addOption(`oxygen-custom-${preset.id}`, preset.name);
        });
      }
      dropdown.setValue(plugin.settings.lightScheme).onChange((value) => {
        plugin.settings.lightScheme = value;
        void plugin.saveData(plugin.settings);
        if (value.startsWith("oxygen-custom-")) {
          const presetId = value.replace("oxygen-custom-", "");
          const preset = plugin.settings.customPresets.find((p) => p.id === presetId);
          if (preset) {
            updateObsidianAccentColor(plugin.app, preset.light.accent);
          }
        }
        plugin.updateStyle();
        plugin.updateCustomPresetCSS();
      });
    });
  });
  colorGroup.addSetting((setting) => {
    setting.setName("Light mode background contrast").setDesc("Level of contrast between sidebar and main content.").addDropdown((dropdown) => {
      dropdown.addOption("oxygen-light", "Default").addOption("oxygen-light-white", "All white").addOption("oxygen-light-tonal", "Low contrast").addOption("oxygen-light-contrast", "High contrast").setValue(plugin.settings.lightStyle).onChange((value) => {
        plugin.settings.lightStyle = value;
        void plugin.saveData(plugin.settings);
        plugin.updateStyle();
      });
    });
  });
  colorGroup.addSetting((setting) => {
    setting.setName("Dark mode color scheme").setDesc("Preset colors options for dark mode.").addDropdown((dropdown) => {
      dropdown.addOption("oxygen-oxygen-dark", "Oxygen").addOption("oxygen-minimal-dark", "Minimal").addOption("oxygen-atom-dark", "Atom").addOption("oxygen-ayu-dark", "Ayu").addOption("oxygen-catppuccin-dark", "Catppuccin").addOption("oxygen-dracula-dark", "Dracula").addOption("oxygen-eink-dark", "E-ink (beta)").addOption("oxygen-everforest-dark", "Everforest").addOption("oxygen-flexoki-dark", "Flexoki").addOption("oxygen-gruvbox-dark", "Gruvbox").addOption("oxygen-macos-dark", "macOS").addOption("oxygen-nord-dark", "Nord").addOption("oxygen-rose-pine-dark", "Ros\xE9 Pine").addOption("oxygen-notion-dark", "Sky").addOption("oxygen-solarized-dark", "Solarized").addOption("oxygen-things-dark", "Things");
      if (plugin.settings.enableCustomPresets && plugin.settings.customPresets.length > 0) {
        plugin.settings.customPresets.sort((a, b) => a.name.localeCompare(b.name)).forEach((preset) => {
          dropdown.addOption(`oxygen-custom-${preset.id}`, preset.name);
        });
      }
      dropdown.setValue(plugin.settings.darkScheme).onChange((value) => {
        plugin.settings.darkScheme = value;
        void plugin.saveData(plugin.settings);
        if (value.startsWith("oxygen-custom-")) {
          const presetId = value.replace("oxygen-custom-", "");
          const preset = plugin.settings.customPresets.find((p) => p.id === presetId);
          if (preset) {
            updateObsidianAccentColor(plugin.app, preset.dark.accent);
          }
        }
        plugin.updateStyle();
        plugin.updateCustomPresetCSS();
      });
    });
  });
  colorGroup.addSetting((setting) => {
    setting.setName("Dark mode background contrast").setDesc("Level of contrast between sidebar and main content.").addDropdown((dropdown) => {
      dropdown.addOption("oxygen-dark", "Default").addOption("oxygen-dark-tonal", "Low contrast").addOption("oxygen-dark-black", "True black").setValue(plugin.settings.darkStyle).onChange((value) => {
        plugin.settings.darkStyle = value;
        void plugin.saveData(plugin.settings);
        plugin.updateStyle();
      });
    });
  });
}

// src/settings/sections/FeatureSettings.ts
function buildFeatureSettings(containerEl, plugin) {
  const featuresGroup = createSettingsGroup(containerEl, "Features", "oxygen-settings");
  featuresGroup.addSetting((setting) => {
    setting.setName("Text labels for primary navigation").setDesc("Navigation items in the left sidebar uses text labels. See Documentation for details.").addToggle((toggle) => {
      toggle.setValue(plugin.settings.labeledNav).onChange((value) => {
        plugin.settings.labeledNav = value;
        void plugin.saveData(plugin.settings);
        plugin.refresh();
      });
    });
  });
  featuresGroup.addSetting((setting) => {
    setting.setName("Colorful window frame").setDesc("The top area of the app uses your accent color.").addToggle((toggle) => {
      toggle.setValue(plugin.settings.colorfulFrame).onChange((value) => {
        plugin.settings.colorfulFrame = value;
        void plugin.saveData(plugin.settings);
        plugin.refresh();
      });
    });
  });
  featuresGroup.addSetting((setting) => {
    setting.setName("Colorful active states").setDesc("Active file and menu items use your accent color.").addToggle((toggle) => {
      toggle.setValue(plugin.settings.colorfulActiveStates).onChange((value) => {
        plugin.settings.colorfulActiveStates = value;
        void plugin.saveData(plugin.settings);
        plugin.refresh();
      });
    });
  });
  featuresGroup.addSetting((setting) => {
    setting.setName("Colorful headings").setDesc("Headings use a different color for each size.").addToggle((toggle) => {
      toggle.setValue(plugin.settings.colorfulHeadings).onChange((value) => {
        plugin.settings.colorfulHeadings = value;
        void plugin.saveData(plugin.settings);
        plugin.refresh();
      });
    });
  });
  featuresGroup.addSetting((setting) => {
    setting.setName("Minimal status bar").setDesc("Turn off to use full-width status bar.").addToggle((toggle) => {
      toggle.setValue(plugin.settings.minimalStatus).onChange((value) => {
        plugin.settings.minimalStatus = value;
        void plugin.saveData(plugin.settings);
        plugin.refresh();
      });
    });
  });
  featuresGroup.addSetting((setting) => {
    setting.setName("Trim file names in sidebars").setDesc("Use ellipses to fit file names on a single line.").addToggle((toggle) => {
      toggle.setValue(plugin.settings.trimNames).onChange((value) => {
        plugin.settings.trimNames = value;
        void plugin.saveData(plugin.settings);
        plugin.refresh();
      });
    });
  });
  featuresGroup.addSetting((setting) => {
    setting.setName("Borders").setDesc("Border style for workspace elements.").addDropdown((dropdown) => {
      dropdown.addOption("enhanced", "Enhanced").addOption("default", "Default").addOption("none", "None").setValue(plugin.settings.workspaceBorders).onChange((value) => {
        plugin.settings.workspaceBorders = value;
        void plugin.saveData(plugin.settings);
        plugin.refresh();
      });
    });
  });
  featuresGroup.addSetting((setting) => {
    setting.setName("Indentation guides thickness").setDesc("Thickness of indentation guides in the sidebar file explorer.").addDropdown((dropdown) => {
      dropdown.addOption("0px", "None").addOption("1px", "Thin").addOption("2px", "Medium").addOption("3px", "Thick").setValue(plugin.settings.navIndentationGuideWidth).onChange((value) => {
        plugin.settings.navIndentationGuideWidth = value;
        void plugin.saveData(plugin.settings);
        plugin.refresh();
      });
    });
  });
  featuresGroup.addSetting((setting) => {
    setting.setName("Indentation guides color").setDesc("Color of indentation guides in the sidebar.").addDropdown((dropdown) => {
      dropdown.addOption("rgba(var(--mono-rgb-100), 0.12)", "Subtle").addOption("var(--text-faint)", "Strong").addOption("var(--color-accent)", "Accent color").setValue(plugin.settings.navIndentationGuideColor).onChange((value) => {
        plugin.settings.navIndentationGuideColor = value;
        void plugin.saveData(plugin.settings);
        plugin.refresh();
      });
    });
  });
  featuresGroup.addSetting((setting) => {
    setting.setName("Underline internal links").setDesc("Show underlines on internal links.").addToggle((toggle) => {
      toggle.setValue(plugin.settings.underlineInternal).onChange((value) => {
        plugin.settings.underlineInternal = value;
        void plugin.saveData(plugin.settings);
        plugin.refresh();
      });
    });
  });
  featuresGroup.addSetting((setting) => {
    setting.setName("Underline external links").setDesc("Show underlines on external links.").addToggle((toggle) => {
      toggle.setValue(plugin.settings.underlineExternal).onChange((value) => {
        plugin.settings.underlineExternal = value;
        void plugin.saveData(plugin.settings);
        plugin.refresh();
      });
    });
  });
  featuresGroup.addSetting((setting) => {
    setting.setName("Maximize media").setDesc("Images and videos fill the width of the line.").addToggle((toggle) => {
      toggle.setValue(plugin.settings.fullWidthMedia).onChange((value) => {
        plugin.settings.fullWidthMedia = value;
        void plugin.saveData(plugin.settings);
        plugin.refresh();
      });
    });
  });
  featuresGroup.addSetting((setting) => {
    if (!("enableBlur" in plugin.settings)) {
      plugin.settings.enableBlur = false;
    }
    setting.setName("Enable background blur").setDesc("Adds background blur to modal dialogs. Disable if scrolling becomes laggy. Not available on mobile devices.").addToggle((toggle) => {
      toggle.setValue(plugin.settings.enableBlur).onChange((value) => {
        plugin.settings.enableBlur = value;
        void plugin.saveData(plugin.settings);
        plugin.refresh();
      });
    });
  });
  featuresGroup.addSetting((setting) => {
    if (!("useDefaultFolderIcon" in plugin.settings)) {
      plugin.settings.useDefaultFolderIcon = false;
    }
    setting.setName("Use default Obsidian folder icon").setDesc("Toggle to use Obsidian's default file explorer icon instead of the folder-closed icon.").addToggle((toggle) => {
      toggle.setValue(plugin.settings.useDefaultFolderIcon).onChange((value) => {
        plugin.settings.useDefaultFolderIcon = value;
        void plugin.saveData(plugin.settings);
        plugin.refresh();
      });
    });
  });
}

// src/settings/sections/LayoutSettings.ts
function buildLayoutSettings(containerEl, plugin) {
  const layoutGroup = createSettingsGroup(containerEl, "Layout", "oxygen-settings");
  layoutGroup.addSetting((setting) => {
    setting.setName("Image grids").setDesc("Turn consecutive images into columns \u2014 to make a new row, add an extra line break between images. These options can also be defined on a per-file basis, see Documentation for details.").addToggle((toggle) => {
      toggle.setValue(plugin.settings.imgGrid).onChange((value) => {
        plugin.settings.imgGrid = value;
        void plugin.saveData(plugin.settings);
        plugin.refresh();
      });
    });
  });
  layoutGroup.addSetting((setting) => {
    setting.setName("Chart width").setDesc("Default width for chart blocks.").addDropdown((dropdown) => {
      dropdown.addOption("chart-default-width", "Default").addOption("chart-wide", "Wide line width").addOption("chart-max", "Maximum line width").addOption("chart-100", "100% pane width").setValue(plugin.settings.chartWidth).onChange((value) => {
        plugin.settings.chartWidth = value;
        void plugin.saveData(plugin.settings);
        plugin.refresh();
      });
    });
  });
  layoutGroup.addSetting((setting) => {
    setting.setName("Iframe width").setDesc("Default width for iframe blocks.").addDropdown((dropdown) => {
      dropdown.addOption("iframe-default-width", "Default").addOption("iframe-wide", "Wide line width").addOption("iframe-max", "Maximum line width").addOption("iframe-100", "100% pane width").setValue(plugin.settings.iframeWidth).onChange((value) => {
        plugin.settings.iframeWidth = value;
        void plugin.saveData(plugin.settings);
        plugin.refresh();
      });
    });
  });
  layoutGroup.addSetting((setting) => {
    setting.setName("Image width").setDesc("Default width for image blocks.").addDropdown((dropdown) => {
      dropdown.addOption("img-default-width", "Default").addOption("img-wide", "Wide line width").addOption("img-max", "Maximum line width").addOption("img-100", "100% pane width").setValue(plugin.settings.imgWidth).onChange((value) => {
        plugin.settings.imgWidth = value;
        void plugin.saveData(plugin.settings);
        plugin.refresh();
      });
    });
  });
  layoutGroup.addSetting((setting) => {
    setting.setName("Map width").setDesc("Default width for map blocks.").addDropdown((dropdown) => {
      dropdown.addOption("map-default-width", "Default").addOption("map-wide", "Wide line width").addOption("map-max", "Maximum line width").addOption("map-100", "100% pane width").setValue(plugin.settings.mapWidth).onChange((value) => {
        plugin.settings.mapWidth = value;
        void plugin.saveData(plugin.settings);
        plugin.refresh();
      });
    });
  });
  layoutGroup.addSetting((setting) => {
    setting.setName("Table width").setDesc("Default width for table and Dataview blocks.").addDropdown((dropdown) => {
      dropdown.addOption("table-default-width", "Default").addOption("table-wide", "Wide line width").addOption("table-max", "Maximum line width").addOption("table-100", "100% pane width").setValue(plugin.settings.tableWidth).onChange((value) => {
        plugin.settings.tableWidth = value;
        void plugin.saveData(plugin.settings);
        plugin.refresh();
      });
    });
  });
}

// src/settings/sections/TypographySettings.ts
function buildTypographySettings(containerEl, plugin) {
  const typographyGroup = createSettingsGroup(containerEl, "Typography", "oxygen-settings");
  typographyGroup.addSetting((setting) => {
    setting.setName("Text font size").setDesc("Used for the main text (default 16).").addText((text) => {
      text.setPlaceholder("16").setValue((plugin.settings.textNormal || "") + "").onChange((value) => {
        plugin.settings.textNormal = parseFloat(value);
        void plugin.saveData(plugin.settings);
        plugin.setFontSize();
      });
    });
  });
  typographyGroup.addSetting((setting) => {
    setting.setName("Small font size").setDesc("Used for text in the sidebars and tabs (default 13).").addText((text) => {
      text.setPlaceholder("13").setValue((plugin.settings.textSmall || "") + "").onChange((value) => {
        plugin.settings.textSmall = parseFloat(value);
        void plugin.saveData(plugin.settings);
        plugin.refresh();
      });
    });
  });
  typographyGroup.addSetting((setting) => {
    setting.setName("Line height").setDesc("Line height of text (default 1.5).").addText((text) => {
      text.setPlaceholder("1.5").setValue((plugin.settings.lineHeight || "") + "").onChange((value) => {
        plugin.settings.lineHeight = parseFloat(value);
        void plugin.saveData(plugin.settings);
        plugin.refresh();
      });
    });
  });
  typographyGroup.addSetting((setting) => {
    setting.setName("Normal line width").setDesc("Number of characters per line (default 40).").addText((text) => {
      text.setPlaceholder("40").setValue((plugin.settings.lineWidth || "") + "").onChange((value) => {
        plugin.settings.lineWidth = parseInt(value.trim());
        void plugin.saveData(plugin.settings);
        plugin.refresh();
      });
    });
  });
  typographyGroup.addSetting((setting) => {
    setting.setName("Wide line width").setDesc("Number of characters per line for wide elements (default 50).").addText((text) => {
      text.setPlaceholder("50").setValue((plugin.settings.lineWidthWide || "") + "").onChange((value) => {
        plugin.settings.lineWidthWide = parseInt(value.trim());
        void plugin.saveData(plugin.settings);
        plugin.refresh();
      });
    });
  });
  typographyGroup.addSetting((setting) => {
    setting.setName("Maximum line width %").setDesc("Percentage of space inside a pane that a line can fill (default 88).").addText((text) => {
      text.setPlaceholder("88").setValue((plugin.settings.maxWidth || "") + "").onChange((value) => {
        plugin.settings.maxWidth = parseInt(value.trim());
        void plugin.saveData(plugin.settings);
        plugin.refresh();
      });
    });
  });
  typographyGroup.addSetting((setting) => {
    setting.setName("Editor font").setDesc("Overrides the text font defined in Obsidian appearance settings when in edit mode.").addText((text) => {
      text.setPlaceholder("").setValue((plugin.settings.editorFont || "") + "").onChange((value) => {
        plugin.settings.editorFont = value;
        void plugin.saveData(plugin.settings);
        plugin.refresh();
      });
    });
  });
}

// src/settings/sections/CustomPresetSettings.ts
var import_obsidian5 = require("obsidian");

// src/presets/PresetManager.ts
var PresetManager = class {
  /**
   * Validate preset ID format and uniqueness
   */
  static validatePresetId(id, existingPresets, excludeId) {
    return validatePresetId(id) && isPresetIdUnique(id, existingPresets, excludeId);
  }
  /**
   * Sanitize preset name
   */
  static sanitizePresetName(name) {
    return sanitizePresetName(name);
  }
  /**
   * Create a new preset with validation
   */
  static createPreset(name, author = "", existingPresets = []) {
    const sanitizedName = this.sanitizePresetName(name);
    if (!sanitizedName) {
      throw new Error("Preset name cannot be empty");
    }
    let id = generatePresetId(sanitizedName);
    let counter = 1;
    while (!this.validatePresetId(id, existingPresets)) {
      id = `${generatePresetId(sanitizedName)}-${counter}`;
      counter++;
    }
    return {
      id,
      name: sanitizedName,
      author: author.trim(),
      version: "1.0.0",
      light: {
        base: { h: 210, s: 2, l: 96 },
        // Light background
        accent: { h: 200, s: 80, l: 50 },
        colors: {}
      },
      dark: {
        base: { h: 210, s: 2, l: 13 },
        // Dark background
        accent: { h: 200, s: 80, l: 50 },
        colors: {}
      }
    };
  }
  /**
   * Update an existing preset
   */
  static updatePreset(id, updates, existingPresets) {
    const existingPreset = existingPresets.find((p) => p.id === id);
    if (!existingPreset) {
      throw new Error(`Preset with ID "${id}" not found`);
    }
    const updatedPreset = { ...existingPreset, ...updates };
    if (updates.id && updates.id !== id) {
      if (!this.validatePresetId(updates.id, existingPresets, id)) {
        throw new Error(`Preset ID "${updates.id}" is invalid or already exists`);
      }
    }
    if (updates.name) {
      updatedPreset.name = this.sanitizePresetName(updates.name);
      if (!updatedPreset.name) {
        throw new Error("Preset name cannot be empty");
      }
    }
    return updatedPreset;
  }
  /**
   * Delete a preset
   */
  static deletePreset(id, existingPresets) {
    return existingPresets.filter((preset) => preset.id !== id);
  }
  /**
   * Export preset as JSON
   */
  static exportPresetAsJSON(preset) {
    return JSON.stringify(preset, null, 2);
  }
  /**
   * Import preset from JSON
   */
  static importPresetFromJSON(json) {
    try {
      const parsed = JSON.parse(json);
      if (typeof parsed !== "object" || parsed === null) {
        throw new Error("Invalid preset format: not an object");
      }
      const data = parsed;
      if (!data.id || !data.name || !data.light || !data.dark) {
        throw new Error("Invalid preset format: missing required fields");
      }
      if (!data.light.base || !data.light.accent || !data.dark.base || !data.dark.accent) {
        throw new Error("Invalid preset format: missing base or accent colors");
      }
      const validateHSL = (hsl) => {
        if (typeof hsl !== "object" || hsl === null) return false;
        const h = hsl.h;
        const s = hsl.s;
        const l = hsl.l;
        return typeof h === "number" && h >= 0 && h <= 360 && typeof s === "number" && s >= 0 && s <= 100 && typeof l === "number" && l >= 0 && l <= 100;
      };
      if (!validateHSL(data.light.base) || !validateHSL(data.light.accent) || !validateHSL(data.dark.base) || !validateHSL(data.dark.accent)) {
        throw new Error("Invalid preset format: HSL values out of range");
      }
      const extractColors = (colors) => {
        if (typeof colors === "object" && colors !== null) {
          const result = {};
          for (const [key, value] of Object.entries(colors)) {
            if (typeof value === "string") {
              result[key] = value;
            }
          }
          return result;
        }
        return {};
      };
      const extractFrameOffset = (offset) => {
        if (typeof offset === "number") {
          return offset;
        }
        return void 0;
      };
      if (typeof data.id !== "string") {
        throw new Error("Invalid preset format: id must be a string");
      }
      if (typeof data.name !== "string") {
        throw new Error("Invalid preset format: name must be a string");
      }
      const idStr = data.id;
      const nameStr = data.name;
      const authorStr = typeof data.author === "string" ? data.author : "";
      const versionStr = typeof data.version === "string" ? data.version : "1.0.0";
      const preset = {
        id: this.sanitizePresetName(idStr),
        name: this.sanitizePresetName(nameStr),
        author: authorStr,
        version: versionStr,
        light: {
          base: data.light.base,
          accent: data.light.accent,
          colors: extractColors(data.light.colors),
          frameLightnessOffset: extractFrameOffset(data.light.frameLightnessOffset)
        },
        dark: {
          base: data.dark.base,
          accent: data.dark.accent,
          colors: extractColors(data.dark.colors),
          frameLightnessOffset: extractFrameOffset(data.dark.frameLightnessOffset)
        }
      };
      if (!preset.id || !preset.name) {
        throw new Error("Invalid preset format: ID or name is empty after sanitization");
      }
      return preset;
    } catch (error) {
      if (error instanceof SyntaxError) {
        throw new Error("Invalid JSON format");
      }
      throw error;
    }
  }
  /**
   * Get preset by ID
   */
  static getPresetById(id, presets) {
    return presets.find((preset) => preset.id === id);
  }
  /**
   * Check if preset is currently active
   */
  static isPresetActive(presetId, lightScheme, darkScheme) {
    return lightScheme === `oxygen-custom-${presetId}` || darkScheme === `oxygen-custom-${presetId}`;
  }
  /**
   * Generate a preview of the preset colors
   */
  static generatePresetPreview(preset) {
    var _a, _b, _c, _d;
    return {
      light: [
        hslToHex(preset.light.base),
        hslToHex(preset.light.accent),
        ((_a = preset.light.colors) == null ? void 0 : _a.bg1) || hslToHex(preset.light.base),
        ((_b = preset.light.colors) == null ? void 0 : _b.tx1) || hslToHex({ ...preset.light.base, l: Math.max(0, preset.light.base.l - 30) })
      ],
      dark: [
        hslToHex(preset.dark.base),
        hslToHex(preset.dark.accent),
        ((_c = preset.dark.colors) == null ? void 0 : _c.bg1) || hslToHex(preset.dark.base),
        ((_d = preset.dark.colors) == null ? void 0 : _d.tx1) || hslToHex({ ...preset.dark.base, l: Math.min(100, preset.dark.base.l + 30) })
      ]
    };
  }
};

// src/modals/PresetEditorModal.ts
var import_obsidian2 = require("obsidian");

// src/utils/preset-color-defaults.ts
function getDefaultColorForKey(key, palette) {
  const baseH = palette.base.h;
  const baseS = palette.base.s;
  const baseL = palette.base.l;
  const accentH = palette.accent.h;
  const isLightBase = baseL > 50;
  const syntaxDefaults = {
    "red": "#e74c3c",
    "orange": "#e67e22",
    "yellow": "#f39c12",
    "green": "#27ae60",
    "cyan": "#16a085",
    "blue": "#3498db",
    "purple": "#9b59b6",
    "pink": "#e91e63"
  };
  if (syntaxDefaults[key]) {
    return syntaxDefaults[key];
  }
  let s, l;
  switch (key) {
    case "bg1":
      return hslToHex({ h: baseH, s: baseS, l: baseL });
    case "bg2":
      l = isLightBase ? Math.max(0, baseL - 5) : Math.min(100, baseL + 5);
      return hslToHex({ h: baseH, s: baseS, l });
    case "bg3":
      l = isLightBase ? Math.max(0, baseL - 10) : Math.min(100, baseL + 10);
      return hslToHex({ h: baseH, s: baseS, l });
    case "ui1":
      l = isLightBase ? Math.max(0, baseL - 15) : Math.min(100, baseL + 15);
      return hslToHex({ h: baseH, s: baseS, l });
    case "ui2":
      l = isLightBase ? Math.max(0, baseL - 10) : Math.min(100, baseL + 10);
      return hslToHex({ h: baseH, s: baseS, l });
    case "ui3":
      l = isLightBase ? Math.max(0, baseL - 5) : Math.min(100, baseL + 5);
      return hslToHex({ h: baseH, s: baseS, l });
    case "tx1":
      s = Math.max(0, baseS - 10);
      l = isLightBase ? Math.max(0, baseL - 87) : Math.min(100, baseL + 77);
      return hslToHex({ h: baseH, s, l });
    case "tx2":
      s = Math.max(0, baseS - 20);
      l = isLightBase ? Math.max(0, baseL - 53) : Math.min(100, baseL + 45);
      return hslToHex({ h: baseH, s, l });
    case "tx3":
      s = Math.max(0, baseS - 10);
      l = isLightBase ? Math.max(0, baseL - 78) : Math.min(100, baseL + 30);
      return hslToHex({ h: baseH, s, l });
    case "tx4":
      s = Math.max(0, baseS - 10);
      l = isLightBase ? Math.max(0, baseL - 48) : Math.min(100, baseL + 40);
      return hslToHex({ h: baseH, s, l });
    case "hl1":
      return hslToHex({ h: accentH, s: 50, l: 40 });
    case "hl2":
      return "#ffb150";
    default:
      return "#000000";
  }
}

// src/modals/components/PresetColorControls.ts
function createHSLControls(container, hsl, onChange) {
  const controls = container.createEl("div", { cls: "hsl-controls" });
  const hslCopy = { ...hsl };
  const previewWrapper = controls.createEl("div", { cls: "color-preview-wrapper" });
  const preview = previewWrapper.createEl("div", { cls: "color-preview" });
  setCssProp(preview, "--preview-color", hslToHex(hslCopy));
  preview.title = "Click to pick a color with hex input";
  const colorInput = previewWrapper.createEl("input", { type: "color", cls: "hsl-color-input-overlay" });
  colorInput.value = hslToHex(hslCopy);
  const updatePreview = () => {
    const hexColor = hslToHex(hslCopy);
    setCssProp(preview, "--preview-color", hexColor);
    colorInput.value = hexColor;
  };
  colorInput.onchange = () => {
    const newHSL = hexToHSL(colorInput.value);
    hslCopy.h = newHSL.h;
    hslCopy.s = newHSL.s;
    hslCopy.l = newHSL.l;
    hueSlider.value = newHSL.h.toString();
    hueValue.textContent = newHSL.h.toString();
    satSlider.value = newHSL.s.toString();
    satValue.textContent = newHSL.s.toString();
    lightSlider.value = newHSL.l.toString();
    lightValue.textContent = newHSL.l.toString();
    updatePreview();
    onChange(hslCopy);
  };
  const hueControl = controls.createEl("div", { cls: "hsl-control" });
  hueControl.createEl("label", { text: "Hue" });
  const hueSlider = hueControl.createEl("input", { type: "range" });
  hueSlider.min = "0";
  hueSlider.max = "360";
  const hueValue = hueControl.createEl("span", { text: hsl.h.toString() });
  hueSlider.value = hsl.h.toString();
  hueSlider.oninput = () => {
    hslCopy.h = parseInt(hueSlider.value);
    hueValue.textContent = hslCopy.h.toString();
    updatePreview();
    onChange(hslCopy);
  };
  const satControl = controls.createEl("div", { cls: "hsl-control" });
  satControl.createEl("label", { text: "Saturation" });
  const satSlider = satControl.createEl("input", { type: "range" });
  satSlider.min = "0";
  satSlider.max = "100";
  const satValue = satControl.createEl("span", { text: hsl.s.toString() });
  satSlider.value = hsl.s.toString();
  satSlider.oninput = () => {
    hslCopy.s = parseInt(satSlider.value);
    satValue.textContent = hslCopy.s.toString();
    updatePreview();
    onChange(hslCopy);
  };
  const lightControl = controls.createEl("div", { cls: "hsl-control" });
  lightControl.createEl("label", { text: "Lightness" });
  const lightSlider = lightControl.createEl("input", { type: "range" });
  lightSlider.min = "0";
  lightSlider.max = "100";
  const lightValue = lightControl.createEl("span", { text: hsl.l.toString() });
  lightSlider.value = hsl.l.toString();
  lightSlider.oninput = () => {
    hslCopy.l = parseInt(lightSlider.value);
    lightValue.textContent = hslCopy.l.toString();
    updatePreview();
    onChange(hslCopy);
  };
}
function createColorOverride(container, label, key, colors, palette, onUpdate) {
  const override = container.createEl("div", { cls: "color-override collapsible-item" });
  const header = override.createEl("div", { cls: "override-header" });
  const toggle = header.createEl("input", { type: "checkbox" });
  header.createEl("label", { text: label });
  const colorInputWrapper = header.createEl("div", { cls: "color-input-wrapper" });
  const colorPreview = colorInputWrapper.createEl("div", { cls: "color-preview-swatch" });
  const colorInput = colorInputWrapper.createEl("input", { type: "color", cls: "hsl-color-input-overlay" });
  colorInput.disabled = true;
  let originalColor = null;
  const updateColorPreview = (color) => {
    setCssProp(colorPreview, "--preview-color", color);
    colorInput.value = color;
  };
  if (colors[key]) {
    toggle.checked = true;
    colorInput.disabled = false;
    updateColorPreview(colors[key]);
    originalColor = colors[key];
  } else {
    const defaultColor = getDefaultColorForKey(key, palette);
    updateColorPreview(defaultColor);
    originalColor = defaultColor;
  }
  colorInput.onclick = () => {
    if (!toggle.checked) {
      toggle.checked = true;
      colorInput.disabled = false;
      const restoredColor = originalColor || colors[key] || getDefaultColorForKey(key, palette);
      colors[key] = restoredColor;
      updateColorPreview(restoredColor);
      originalColor = restoredColor;
      onUpdate();
    }
  };
  toggle.onchange = () => {
    if (toggle.checked) {
      colorInput.disabled = false;
      const restoredColor = originalColor || colors[key] || getDefaultColorForKey(key, palette);
      colors[key] = restoredColor;
      updateColorPreview(restoredColor);
      originalColor = restoredColor;
    } else {
      colorInput.disabled = true;
      originalColor = colors[key] || originalColor;
      delete colors[key];
    }
    onUpdate();
  };
  colorInput.onchange = () => {
    if (validateHex(colorInput.value)) {
      colors[key] = colorInput.value;
      originalColor = colorInput.value;
      updateColorPreview(colorInput.value);
      onUpdate();
    }
  };
  colorInput.oninput = () => {
    if (validateHex(colorInput.value)) {
      colors[key] = colorInput.value;
      originalColor = colorInput.value;
      updateColorPreview(colorInput.value);
      onUpdate();
    }
  };
  return override;
}

// src/modals/PresetEditorModal.ts
var PresetEditorModal = class extends import_obsidian2.Modal {
  constructor(app, plugin, preset, onSave) {
    super(app);
    this.plugin = plugin;
    this.isEditing = preset !== null;
    this.preset = preset || this.createDefaultPreset();
    this.onSave = onSave;
  }
  createDefaultPreset() {
    return PresetManager.createPreset("New Preset", "", this.plugin.settings.customPresets);
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("preset-editor-modal");
    const header = contentEl.createEl("div", { cls: "modal-header" });
    header.createEl("h2", { text: this.isEditing ? "Edit preset" : "Create new preset" });
    const basicInfo = contentEl.createEl("div", { cls: "modal-section" });
    new import_obsidian2.Setting(basicInfo).setName("Preset name").setDesc("A unique name for your color preset").addText((text) => {
      this.nameInput = text.inputEl;
      text.setValue(this.preset.name).setPlaceholder("Enter preset name").onChange((value) => {
        this.preset.name = value;
        this.updatePreview();
      });
    });
    new import_obsidian2.Setting(basicInfo).setName("Author (optional)").setDesc("Your name or the creator of this preset").addText((text) => {
      this.authorInput = text.inputEl;
      text.setValue(this.preset.author || "").setPlaceholder("Enter author name").onChange((value) => {
        this.preset.author = value;
      });
    });
    const contentArea = contentEl.createEl("div", { cls: "modes-container" });
    const lightSection = contentArea.createEl("div", { cls: "mode-section" });
    lightSection.createEl("h3", { text: "Light mode" });
    this.buildModeContent(lightSection, "light");
    const darkSection = contentArea.createEl("div", { cls: "mode-section" });
    darkSection.createEl("h3", { text: "Dark mode" });
    this.buildModeContent(darkSection, "dark");
    const previewSection = contentEl.createEl("div", { cls: "modal-section" });
    previewSection.createEl("h3", { text: "Preview" });
    this.previewSwatch = previewSection.createEl("div", { cls: "preview-swatch" });
    this.updatePreview();
    const footer = contentEl.createEl("div", { cls: "modal-footer" });
    const cancelBtn = footer.createEl("button", { text: "Cancel", cls: "mod-cta" });
    cancelBtn.onclick = () => this.close();
    const saveBtn = footer.createEl("button", {
      text: this.isEditing ? "Update" : "Create",
      cls: "mod-cta"
    });
    saveBtn.onclick = () => this.savePreset();
  }
  buildModeContent(container, mode) {
    container.empty();
    const palette = mode === "light" ? this.preset.light : this.preset.dark;
    const requiredSection = container.createEl("div", { cls: "color-section" });
    const headerText = mode === "light" ? "Light theme colors" : "Dark theme colors";
    requiredSection.createEl("h3", { text: headerText });
    const baseSection = requiredSection.createEl("div", { cls: "color-group" });
    baseSection.createEl("label", { text: "Base color" });
    createHSLControls(baseSection, palette.base, (hsl) => {
      if (mode === "light") {
        this.preset.light.base = hsl;
      } else {
        this.preset.dark.base = hsl;
      }
      this.updatePreview();
    });
    const accentSection = requiredSection.createEl("div", { cls: "color-group" });
    accentSection.createEl("label", { text: "Accent color" });
    createHSLControls(accentSection, palette.accent, (hsl) => {
      if (mode === "light") {
        this.preset.light.accent = hsl;
      } else {
        this.preset.dark.accent = hsl;
      }
      this.updatePreview();
    });
    const frameSection = requiredSection.createEl("div", { cls: "color-group" });
    frameSection.createEl("label", { text: "Colorful frame lightness override (optional)", cls: "frame-label" });
    const frameDesc = frameSection.createEl("div", { cls: "setting-item-description frame-description" });
    frameDesc.textContent = mode === "dark" ? "Offset from accent lightness for colorful frame. Default: -25 (darkens by 25%). Leave empty for default." : "Offset from accent lightness for colorful frame. Default: +30 (brightens by 30%). Leave empty for default.";
    const frameInput = frameSection.createEl("input", { type: "number", cls: "frame-input" });
    frameInput.placeholder = mode === "dark" ? "-25" : "+30";
    frameInput.min = "-100";
    frameInput.max = "100";
    frameInput.step = "5";
    if (palette.frameLightnessOffset !== void 0) {
      frameInput.value = palette.frameLightnessOffset.toString();
    }
    frameInput.oninput = () => {
      const value = frameInput.value.trim();
      if (value === "") {
        if (mode === "light") {
          delete this.preset.light.frameLightnessOffset;
        } else {
          delete this.preset.dark.frameLightnessOffset;
        }
      } else {
        const offset = parseInt(value);
        if (!isNaN(offset)) {
          if (mode === "light") {
            this.preset.light.frameLightnessOffset = offset;
          } else {
            this.preset.dark.frameLightnessOffset = offset;
          }
        }
      }
      this.updatePreview();
    };
    const advancedSection = container.createEl("div", { cls: "color-section" });
    const advancedHeader = advancedSection.createEl("div", { cls: "collapsible-header" });
    advancedHeader.createEl("h4", { text: "Advanced overrides (optional)" });
    const advancedToggle = advancedHeader.createEl("button", {
      cls: "collapse-toggle"
    });
    (0, import_obsidian2.setIcon)(advancedToggle, "chevron-down");
    if (!palette.colors) {
      palette.colors = {};
    }
    const advancedItems = [];
    const overrideKeys = ["bg1", "bg2", "bg3", "ui1", "ui2", "ui3", "tx1", "tx2", "tx3", "tx4", "hl1", "hl2"];
    const overrideLabels = ["Background 1", "Background 2", "Background 3", "UI 1", "UI 2", "UI 3", "Text 1", "Text 2", "Text 3", "Text 4", "Highlight 1", "Highlight 2"];
    const colors = palette.colors;
    overrideKeys.forEach((key, index) => {
      const item = createColorOverride(
        advancedSection,
        overrideLabels[index],
        key,
        colors,
        palette,
        () => this.updatePreview()
      );
      advancedItems.push(item);
      item.addClass("collapsible-content-item");
    });
    advancedToggle.onclick = () => {
      const isCollapsed = !advancedItems[0].classList.contains("expanded");
      advancedItems.forEach((item) => {
        if (isCollapsed) {
          item.addClass("expanded");
        } else {
          item.removeClass("expanded");
        }
      });
      (0, import_obsidian2.setIcon)(advancedToggle, isCollapsed ? "chevron-up" : "chevron-down");
    };
    const syntaxSection = container.createEl("div", { cls: "color-section" });
    const syntaxHeader = syntaxSection.createEl("div", { cls: "collapsible-header" });
    syntaxHeader.createEl("h4", { text: "Syntax colors (optional)" });
    const syntaxToggle = syntaxHeader.createEl("button", {
      cls: "collapse-toggle"
    });
    (0, import_obsidian2.setIcon)(syntaxToggle, "chevron-down");
    const syntaxColors = ["red", "orange", "yellow", "green", "cyan", "blue", "purple", "pink"];
    const syntaxItems = [];
    syntaxColors.forEach((color) => {
      const item = createColorOverride(
        syntaxSection,
        color.charAt(0).toUpperCase() + color.slice(1),
        color,
        colors,
        palette,
        () => this.updatePreview()
      );
      syntaxItems.push(item);
      item.addClass("collapsible-content-item");
    });
    syntaxToggle.onclick = () => {
      const isCollapsed = !syntaxItems[0].classList.contains("expanded");
      syntaxItems.forEach((item) => {
        if (isCollapsed) {
          item.addClass("expanded");
        } else {
          item.removeClass("expanded");
        }
      });
      (0, import_obsidian2.setIcon)(syntaxToggle, isCollapsed ? "chevron-up" : "chevron-down");
    };
  }
  updatePreview() {
    this.previewSwatch.empty();
    const presetIndex = this.plugin.settings.customPresets.findIndex((p) => p.id === this.preset.id);
    if (presetIndex !== -1) {
      this.plugin.settings.customPresets[presetIndex] = this.preset;
      const presetSchemeId = `oxygen-custom-${this.preset.id}`;
      const isActiveLight = this.plugin.settings.lightScheme === presetSchemeId;
      const isActiveDark = this.plugin.settings.darkScheme === presetSchemeId;
      if (isActiveLight || isActiveDark) {
        const isLightMode = document.body.classList.contains("theme-light");
        if (isLightMode && isActiveLight) {
          updateObsidianAccentColor(this.plugin.app, this.preset.light.accent);
        } else if (!isLightMode && isActiveDark) {
          updateObsidianAccentColor(this.plugin.app, this.preset.dark.accent);
        }
        this.plugin.updateStyle();
        this.plugin.updateCustomPresetCSS();
      }
    }
    const lightPalette = this.preset.light;
    const darkPalette = this.preset.dark;
    const lightBaseHex = hslToHex(lightPalette.base);
    const lightAccentHex = hslToHex(lightPalette.accent);
    const darkBaseHex = hslToHex(darkPalette.base);
    const darkAccentHex = hslToHex(darkPalette.accent);
    const lightRow = this.previewSwatch.createEl("div", { cls: "preview-row" });
    lightRow.createEl("div", { text: "Light mode", cls: "preview-label" });
    const lightColors = lightRow.createEl("div", { cls: "preview-colors" });
    const lightBaseColor = lightColors.createEl("div", { cls: "preview-color" });
    lightBaseColor.setAttribute("data-color", lightBaseHex);
    setCssProp(lightBaseColor, "--preview-color", lightBaseHex);
    const lightAccentColor = lightColors.createEl("div", { cls: "preview-color" });
    lightAccentColor.setAttribute("data-color", lightAccentHex);
    setCssProp(lightAccentColor, "--preview-color", lightAccentHex);
    const darkRow = this.previewSwatch.createEl("div", { cls: "preview-row" });
    darkRow.createEl("div", { text: "Dark mode", cls: "preview-label" });
    const darkColors = darkRow.createEl("div", { cls: "preview-colors" });
    const darkBaseColor = darkColors.createEl("div", { cls: "preview-color" });
    darkBaseColor.setAttribute("data-color", darkBaseHex);
    setCssProp(darkBaseColor, "--preview-color", darkBaseHex);
    const darkAccentColor = darkColors.createEl("div", { cls: "preview-color" });
    darkAccentColor.setAttribute("data-color", darkAccentHex);
    setCssProp(darkAccentColor, "--preview-color", darkAccentHex);
  }
  savePreset() {
    try {
      if (!this.preset.name.trim()) {
        throw new Error("Preset name is required");
      }
      if (!this.isEditing) {
        this.preset.id = PresetManager.createPreset(
          this.preset.name,
          this.preset.author || "",
          this.plugin.settings.customPresets
        ).id;
      }
      this.onSave(this.preset);
      this.close();
    } catch (error) {
      console.error("Error saving preset:", error);
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/modals/PresetImportModal.ts
var import_obsidian3 = require("obsidian");
var PresetImportModal = class extends import_obsidian3.Modal {
  constructor(app, plugin, onImport) {
    super(app);
    this.parsedPreset = null;
    this.plugin = plugin;
    this.onImport = onImport;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("preset-import-modal");
    const header = contentEl.createEl("div", { cls: "modal-header" });
    header.createEl("h2", { text: "Import custom preset" });
    const instructions = contentEl.createEl("div", { cls: "modal-section" });
    instructions.createEl("p", {
      text: "Paste a JSON preset below. You can export presets from this plugin or create them manually following the correct format."
    });
    const inputSection = contentEl.createEl("div", { cls: "modal-section" });
    inputSection.createEl("h3", { text: "JSON preset data" });
    new import_obsidian3.Setting(inputSection).setName("Preset JSON").setDesc("Paste the complete JSON preset data here").addTextArea((text) => {
      this.textArea = text.inputEl;
      this.textArea.addClass("preset-json-input");
      text.setPlaceholder("Paste JSON preset data here...").onChange((value) => this.parseJSON(value));
    });
    const previewSection = contentEl.createEl("div", { cls: "modal-section" });
    previewSection.createEl("h3", { text: "Preview" });
    this.previewContainer = previewSection.createEl("div", { cls: "preview-container" });
    this.previewContainer.createEl("p", {
      text: "Enter valid JSON to see a preview of the preset",
      cls: "preview-placeholder"
    });
    const errorSection = contentEl.createEl("div", { cls: "modal-section error-section hidden" });
    errorSection.createEl("div", { cls: "error-message" });
    const footer = contentEl.createEl("div", { cls: "modal-footer" });
    const cancelBtn = footer.createEl("button", { text: "Cancel", cls: "mod-cta" });
    cancelBtn.onclick = () => this.close();
    this.importButton = footer.createEl("button", {
      text: "Import preset",
      cls: "mod-cta"
    });
    this.importButton.disabled = true;
    this.importButton.onclick = () => this.importPreset();
  }
  parseJSON(jsonString) {
    const errorSection = this.contentEl.querySelector(".error-section");
    const errorMessage = this.contentEl.querySelector(".error-message");
    this.parsedPreset = null;
    this.importButton.disabled = true;
    errorSection.addClass("hidden");
    this.previewContainer.empty();
    if (!jsonString.trim()) {
      this.previewContainer.createEl("p", {
        text: "Enter valid JSON to see a preview of the preset",
        cls: "preview-placeholder"
      });
      return;
    }
    try {
      this.parsedPreset = PresetManager.importPresetFromJSON(jsonString);
      const existingPreset = this.plugin.settings.customPresets.find((p) => p.id === this.parsedPreset.id);
      if (existingPreset) {
        throw new Error(`A preset with ID "${this.parsedPreset.id}" already exists. Please rename the preset.`);
      }
      this.showPreview(this.parsedPreset);
      this.importButton.disabled = false;
    } catch (error) {
      errorMessage.textContent = error instanceof Error ? error.message : "Invalid JSON format";
      errorSection.removeClass("hidden");
      this.previewContainer.createEl("p", {
        text: "Fix the JSON errors above to see a preview",
        cls: "preview-error"
      });
    }
  }
  showPreview(preset) {
    this.previewContainer.empty();
    const info = this.previewContainer.createEl("div", { cls: "preset-info" });
    const nameRow = info.createEl("div", { cls: "info-row" });
    nameRow.createEl("strong", { text: "Name: " });
    nameRow.createEl("span", { text: preset.name });
    if (preset.author) {
      const authorRow = info.createEl("div", { cls: "info-row" });
      authorRow.createEl("strong", { text: "Author: " });
      authorRow.createEl("span", { text: preset.author });
    }
    const versionRow = info.createEl("div", { cls: "info-row" });
    versionRow.createEl("strong", { text: "Version: " });
    versionRow.createEl("span", { text: preset.version || "1.0.0" });
    const idRow = info.createEl("div", { cls: "info-row" });
    idRow.createEl("strong", { text: "ID: " });
    idRow.createEl("span", { text: preset.id, cls: "preset-id" });
    const preview = this.previewContainer.createEl("div", { cls: "color-preview-section" });
    preview.createEl("h4", { text: "Color preview" });
    const modeToggle = preview.createEl("div", { cls: "mode-toggle" });
    const lightModeBtn = modeToggle.createEl("button", {
      text: "Light mode",
      cls: "mode-btn active"
    });
    const darkModeBtn = modeToggle.createEl("button", {
      text: "Dark mode",
      cls: "mode-btn"
    });
    const swatchContainer = preview.createEl("div", { cls: "swatch-container" });
    const lightSwatches = swatchContainer.createEl("div", { cls: "mode-swatches active" });
    const lightBaseSwatchPreview = lightSwatches.createEl("div", { cls: "color-swatch" });
    const lightBaseHSL = `${preset.light.base.h}, ${preset.light.base.s}%, ${preset.light.base.l}%`;
    lightBaseSwatchPreview.setAttribute("data-hsl", lightBaseHSL);
    setCssProp(lightBaseSwatchPreview, "--swatch-hsl", lightBaseHSL);
    lightBaseSwatchPreview.title = `Base: hsl(${preset.light.base.h}, ${preset.light.base.s}%, ${preset.light.base.l}%)`;
    const lightAccentSwatchPreview = lightSwatches.createEl("div", { cls: "color-swatch" });
    const lightAccentHSL = `${preset.light.accent.h}, ${preset.light.accent.s}%, ${preset.light.accent.l}%`;
    lightAccentSwatchPreview.setAttribute("data-hsl", lightAccentHSL);
    setCssProp(lightAccentSwatchPreview, "--swatch-hsl", lightAccentHSL);
    lightAccentSwatchPreview.title = `Accent: hsl(${preset.light.accent.h}, ${preset.light.accent.s}%, ${preset.light.accent.l}%)`;
    const darkSwatches = swatchContainer.createEl("div", { cls: "mode-swatches" });
    const darkBaseSwatchPreview = darkSwatches.createEl("div", { cls: "color-swatch" });
    const darkBaseHSL = `${preset.dark.base.h}, ${preset.dark.base.s}%, ${preset.dark.base.l}%`;
    darkBaseSwatchPreview.setAttribute("data-hsl", darkBaseHSL);
    setCssProp(darkBaseSwatchPreview, "--swatch-hsl", darkBaseHSL);
    darkBaseSwatchPreview.title = `Base: hsl(${preset.dark.base.h}, ${preset.dark.base.s}%, ${preset.dark.base.l}%)`;
    const darkAccentSwatchPreview = darkSwatches.createEl("div", { cls: "color-swatch" });
    const darkAccentHSL = `${preset.dark.accent.h}, ${preset.dark.accent.s}%, ${preset.dark.accent.l}%`;
    darkAccentSwatchPreview.setAttribute("data-hsl", darkAccentHSL);
    setCssProp(darkAccentSwatchPreview, "--swatch-hsl", darkAccentHSL);
    darkAccentSwatchPreview.title = `Accent: hsl(${preset.dark.accent.h}, ${preset.dark.accent.s}%, ${preset.dark.accent.l}%)`;
    lightModeBtn.onclick = () => {
      lightModeBtn.classList.add("active");
      darkModeBtn.classList.remove("active");
      lightSwatches.classList.add("active");
      darkSwatches.classList.remove("active");
    };
    darkModeBtn.onclick = () => {
      darkModeBtn.classList.add("active");
      lightModeBtn.classList.remove("active");
      darkSwatches.classList.add("active");
      lightSwatches.classList.remove("active");
    };
    const details = this.previewContainer.createEl("div", { cls: "color-details-section" });
    details.createEl("h4", { text: "Color values" });
    const lightDetails = details.createEl("div", { cls: "mode-details" });
    lightDetails.createEl("h5", { text: "Light mode" });
    const lightBase = lightDetails.createEl("div", { cls: "color-detail" });
    const lightBaseSwatchDetail = lightBase.createEl("div", { cls: "detail-swatch" });
    const lightBaseHSLDetail = `${preset.light.base.h}, ${preset.light.base.s}%, ${preset.light.base.l}%`;
    lightBaseSwatchDetail.setAttribute("data-hsl", lightBaseHSLDetail);
    setCssProp(lightBaseSwatchDetail, "--detail-hsl", lightBaseHSLDetail);
    lightBase.createEl("span", { text: "Base: " });
    lightBase.createEl("span", { text: `hsl(${preset.light.base.h}, ${preset.light.base.s}%, ${preset.light.base.l}%)` });
    const lightAccent = lightDetails.createEl("div", { cls: "color-detail" });
    const lightAccentSwatchDetail = lightAccent.createEl("div", { cls: "detail-swatch" });
    const lightAccentHSLDetail = `${preset.light.accent.h}, ${preset.light.accent.s}%, ${preset.light.accent.l}%`;
    lightAccentSwatchDetail.setAttribute("data-hsl", lightAccentHSLDetail);
    setCssProp(lightAccentSwatchDetail, "--detail-hsl", lightAccentHSLDetail);
    lightAccent.createEl("span", { text: "Accent: " });
    lightAccent.createEl("span", { text: `hsl(${preset.light.accent.h}, ${preset.light.accent.s}%, ${preset.light.accent.l}%)` });
    const darkDetails = details.createEl("div", { cls: "mode-details" });
    darkDetails.createEl("h5", { text: "Dark mode" });
    const darkBase = darkDetails.createEl("div", { cls: "color-detail" });
    const darkBaseSwatchDetail = darkBase.createEl("div", { cls: "detail-swatch" });
    const darkBaseHSLDetail = `${preset.dark.base.h}, ${preset.dark.base.s}%, ${preset.dark.base.l}%`;
    darkBaseSwatchDetail.setAttribute("data-hsl", darkBaseHSLDetail);
    setCssProp(darkBaseSwatchDetail, "--detail-hsl", darkBaseHSLDetail);
    darkBase.createEl("span", { text: "Base: " });
    darkBase.createEl("span", { text: `hsl(${preset.dark.base.h}, ${preset.dark.base.s}%, ${preset.dark.base.l}%)` });
    const darkAccent = darkDetails.createEl("div", { cls: "color-detail" });
    const darkAccentSwatchDetail = darkAccent.createEl("div", { cls: "detail-swatch" });
    const darkAccentHSLDetail = `${preset.dark.accent.h}, ${preset.dark.accent.s}%, ${preset.dark.accent.l}%`;
    darkAccentSwatchDetail.setAttribute("data-hsl", darkAccentHSLDetail);
    setCssProp(darkAccentSwatchDetail, "--detail-hsl", darkAccentHSLDetail);
    darkAccent.createEl("span", { text: "Accent: " });
    darkAccent.createEl("span", { text: `hsl(${preset.dark.accent.h}, ${preset.dark.accent.s}%, ${preset.dark.accent.l}%)` });
    const lightOverrides = Object.keys(preset.light.colors || {}).length;
    const darkOverrides = Object.keys(preset.dark.colors || {}).length;
    if (lightOverrides > 0 || darkOverrides > 0) {
      const overridesInfo = this.previewContainer.createEl("div", { cls: "overrides-info" });
      overridesInfo.createEl("p", {
        text: `Custom overrides: ${lightOverrides} light mode, ${darkOverrides} dark mode`
      });
    }
  }
  importPreset() {
    if (this.parsedPreset) {
      this.onImport(this.parsedPreset);
      this.close();
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/modals/ConfirmationModal.ts
var import_obsidian4 = require("obsidian");
var ConfirmationModal = class _ConfirmationModal extends import_obsidian4.Modal {
  constructor(app, title, message, confirmText = "Yes", cancelText = "Cancel") {
    super(app);
    this.title = title;
    this.message = message;
    this.confirmText = confirmText;
    this.cancelText = cancelText;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", { text: this.title });
    contentEl.createEl("p", { text: this.message });
    const buttonContainer = contentEl.createDiv("modal-button-container");
    const cancelButton = buttonContainer.createEl("button", {
      text: this.cancelText,
      cls: "mod-cta"
    });
    cancelButton.addEventListener("click", () => {
      this.close();
      this.resolve(false);
    });
    const confirmButton = buttonContainer.createEl("button", {
      text: this.confirmText,
      cls: "mod-cta confirm-button"
    });
    confirmButton.addEventListener("click", () => {
      this.close();
      this.resolve(true);
    });
    confirmButton.focus();
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
  // Static method to show the modal and return a promise
  static async show(app, title, message, confirmText = "Yes", cancelText = "Cancel") {
    return new Promise((resolve) => {
      const modal = new _ConfirmationModal(app, title, message, confirmText, cancelText);
      modal.resolve = resolve;
      modal.open();
    });
  }
};

// src/settings/sections/CustomPresetSettings.ts
function buildCustomPresetSettings(containerEl, plugin, app, refreshCallback) {
  const customPresetsGroup = createSettingsGroup(containerEl, "Custom color schemes", "oxygen-settings");
  customPresetsGroup.addSetting((setting) => {
    setting.setName("Enable custom presets").setDesc("Allow creation and use of custom color presets").addToggle((toggle) => {
      toggle.setValue(plugin.settings.enableCustomPresets).onChange((value) => {
        plugin.settings.enableCustomPresets = value;
        if (!value) {
          let needsUpdate = false;
          if (plugin.settings.lightScheme.startsWith("oxygen-custom-")) {
            plugin.settings.lightScheme = "oxygen-oxygen-light";
            needsUpdate = true;
          }
          if (plugin.settings.darkScheme.startsWith("oxygen-custom-")) {
            plugin.settings.darkScheme = "oxygen-oxygen-dark";
            needsUpdate = true;
          }
          if (needsUpdate) {
            plugin.updateStyle();
            plugin.updateCustomPresetCSS();
          }
        }
        void plugin.saveData(plugin.settings);
        refreshCallback();
      });
    });
  });
  if (!plugin.settings.enableCustomPresets) {
    return;
  }
  customPresetsGroup.addSetting((setting) => {
    setting.setName("Create new preset").setDesc("Design a custom color scheme from scratch").addExtraButton((button) => {
      button.setIcon("plus").setTooltip("Create new preset").onClick(() => openPresetEditor(app, plugin, null, refreshCallback));
    });
  });
  customPresetsGroup.addSetting((setting) => {
    setting.setName("Import preset").setDesc("Import a preset from JSON data").addExtraButton((button) => {
      button.setIcon("download").setTooltip("Import preset").onClick(() => openPresetImporter(app, plugin, refreshCallback));
    });
  });
  containerEl.createEl("br");
  if (plugin.settings.customPresets.length > 0) {
    const presetsList = containerEl.createEl("div", { cls: "custom-presets-list" });
    plugin.settings.customPresets.sort((a, b) => a.name.localeCompare(b.name)).forEach((preset) => {
      addPresetListItem(presetsList, preset, app, plugin, refreshCallback);
    });
  } else {
    const emptyState = containerEl.createEl("div", { cls: "custom-presets-empty" });
    emptyState.createEl("p", {
      text: "No custom presets yet. Create your first preset to get started!",
      cls: "empty-message"
    });
  }
  containerEl.createEl("br");
}
function addPresetListItem(container, preset, app, plugin, refreshCallback) {
  const presetItem = container.createEl("div", { cls: "custom-preset-item" });
  const presetInfo = presetItem.createEl("div", { cls: "preset-info" });
  const swatch = generateColorSwatch(preset);
  presetInfo.appendChild(swatch);
  const details = presetInfo.createEl("div", { cls: "preset-details" });
  details.createEl("div", { text: preset.name, cls: "preset-name" });
  if (preset.author) {
    details.createEl("div", { text: `by ${preset.author}`, cls: "preset-author" });
  }
  details.createEl("div", { text: preset.id, cls: "preset-id preset-id-display" });
  new import_obsidian5.Setting(presetItem).setName("").setDesc("").addExtraButton((button) => button.setIcon("edit").setTooltip("Edit preset").onClick(() => openPresetEditor(app, plugin, preset, refreshCallback))).addExtraButton((button) => button.setIcon("download").setTooltip("Export preset").onClick(() => exportPreset(preset))).addExtraButton((button) => button.setIcon("trash").setTooltip("Delete preset").onClick(async () => await deletePreset(app, plugin, preset, refreshCallback)));
}
function openPresetEditor(app, plugin, preset, refreshCallback) {
  const modal = new PresetEditorModal(app, plugin, preset, (updatedPreset) => {
    if (preset) {
      const index = plugin.settings.customPresets.findIndex((p) => p.id === preset.id);
      if (index !== -1) {
        plugin.settings.customPresets[index] = updatedPreset;
      }
    } else {
      plugin.settings.customPresets.push(updatedPreset);
    }
    void plugin.saveData(plugin.settings);
    const presetSchemeId = `oxygen-custom-${updatedPreset.id}`;
    const isActiveLight = plugin.settings.lightScheme === presetSchemeId;
    const isActiveDark = plugin.settings.darkScheme === presetSchemeId;
    if (isActiveLight || isActiveDark) {
      const isLightMode = document.body.classList.contains("theme-light");
      if (isLightMode && isActiveLight) {
        updateObsidianAccentColor(plugin.app, updatedPreset.light.accent);
      } else if (!isLightMode && isActiveDark) {
        updateObsidianAccentColor(plugin.app, updatedPreset.dark.accent);
      }
      plugin.updateStyle();
      plugin.updateCustomPresetCSS();
    }
    refreshCallback();
  });
  modal.open();
}
function openPresetImporter(app, plugin, refreshCallback) {
  const modal = new PresetImportModal(app, plugin, (importedPreset) => {
    plugin.settings.customPresets.push(importedPreset);
    void plugin.saveData(plugin.settings);
    refreshCallback();
  });
  modal.open();
}
function exportPreset(preset) {
  const json = PresetManager.exportPresetAsJSON(preset);
  const blob = new Blob([json], { type: "application/json" });
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = `${preset.id}.json`;
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(url);
}
async function deletePreset(app, plugin, preset, refreshCallback) {
  const isActive = PresetManager.isPresetActive(
    preset.id,
    plugin.settings.lightScheme,
    plugin.settings.darkScheme
  );
  if (isActive) {
    const confirmed = await ConfirmationModal.show(
      app,
      "Delete active preset",
      "This preset is currently active. Deleting it will switch to the default scheme. Continue?",
      "Delete"
    );
    if (!confirmed) {
      return;
    }
    if (plugin.settings.lightScheme === `oxygen-custom-${preset.id}`) {
      plugin.settings.lightScheme = "oxygen-oxygen-light";
    }
    if (plugin.settings.darkScheme === `oxygen-custom-${preset.id}`) {
      plugin.settings.darkScheme = "oxygen-oxygen-dark";
    }
  }
  plugin.settings.customPresets = plugin.settings.customPresets.filter((p) => p.id !== preset.id);
  await plugin.saveData(plugin.settings);
  plugin.updateStyle();
  plugin.updateCustomPresetCSS();
  refreshCallback();
}

// src/settings/sections/AnimationSettings.ts
function buildAnimationSettings(containerEl, plugin) {
  const animationGroup = createSettingsGroup(containerEl, "Animations", "oxygen-settings");
  let speedSetting;
  animationGroup.addSetting((setting) => {
    setting.setName("Animation personality").setDesc("Choose the animation style: Default (smooth), Playful (bouncy), or Off (disabled).").addDropdown((dropdown) => {
      dropdown.addOption("default", "Default").addOption("playful", "Playful").addOption("off", "Off").setValue(plugin.settings.animationPersonality || "default").onChange((value) => {
        plugin.settings.animationPersonality = value;
        void plugin.saveData(plugin.settings);
        plugin.refresh();
        if (speedSetting !== void 0) {
          if (value === "off") {
            speedSetting.settingEl.addClass("hidden");
          } else {
            speedSetting.settingEl.removeClass("hidden");
          }
        }
      });
    });
  });
  animationGroup.addSetting((setting) => {
    speedSetting = setting;
    setting.setName("Animation speed").setDesc("Control the speed of animations. Range: 0 (disabled) to 2 (half speed / slower). Default: 1 (normal speed). Lower values = faster animations, higher values = slower animations.").addSlider((slider) => {
      slider.setLimits(0, 2, 0.1).setValue(plugin.settings.animationSpeed).setDynamicTooltip().onChange((value) => {
        plugin.settings.animationSpeed = value;
        void plugin.saveData(plugin.settings);
        plugin.refresh();
      });
    });
    if (plugin.settings.animationPersonality === "off") {
      speedSetting.settingEl.addClass("hidden");
    }
  });
}

// src/settings.ts
var MinimalSettingsTab = class extends import_obsidian6.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.icon = "lucide-swatch-book";
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    buildColorSchemeSettings(containerEl, this.plugin);
    buildCustomPresetSettings(containerEl, this.plugin, this.app, () => this.display());
    buildFeatureSettings(containerEl, this.plugin);
    buildAnimationSettings(containerEl, this.plugin);
    buildLayoutSettings(containerEl, this.plugin);
    buildTypographySettings(containerEl, this.plugin);
  }
};

// src/presets/preset-css-generator.ts
var PresetCSSGenerator = class {
  /**
   * Generate CSS custom properties as an object for direct application to body element
   * This avoids creating style elements and complies with Obsidian guidelines
   */
  static generateProperties(preset, mode) {
    const palette = mode === "light" ? preset.light : preset.dark;
    const baseH = palette.base.h;
    const baseS = palette.base.s;
    const baseL = palette.base.l;
    const accentH = palette.accent.h;
    const accentS = palette.accent.s;
    const accentL = palette.accent.l;
    const isLightMode = mode === "light";
    const isLightBase = baseL > 50;
    const bg1 = `hsl(${baseH}, ${baseS}%, ${baseL}%)`;
    const bg2 = `hsl(${baseH}, ${baseS}%, ${isLightBase ? Math.max(0, baseL - 5) : Math.min(100, baseL + 5)}%)`;
    const bg3 = `hsl(${baseH}, ${baseS}%, ${isLightBase ? Math.max(0, baseL - 10) : Math.min(100, baseL + 10)}%)`;
    const ui1L = isLightBase ? Math.max(0, baseL - 15) : Math.min(100, baseL + 15);
    const ui2L = isLightBase ? Math.max(0, baseL - 10) : Math.min(100, baseL + 10);
    const ui3L = isLightBase ? Math.max(0, baseL - 5) : Math.min(100, baseL + 5);
    const ui1 = `hsl(${baseH}, ${baseS}%, ${ui1L}%)`;
    const ui2 = `hsl(${baseH}, ${baseS}%, ${ui2L}%)`;
    const ui3 = `hsl(${baseH}, ${baseS}%, ${ui3L}%)`;
    const tx1L = isLightBase ? 15 : 85;
    const tx2L = isLightBase ? 25 : 75;
    const tx3L = isLightBase ? 35 : 65;
    const tx4L = isLightBase ? 30 : 70;
    const tx1 = `hsl(${baseH}, ${Math.max(0, baseS - 10)}%, ${tx1L}%)`;
    const tx2 = `hsl(${baseH}, ${Math.max(0, baseS - 20)}%, ${tx2L}%)`;
    const tx3 = `hsl(${baseH}, ${Math.max(0, baseS - 10)}%, ${tx3L}%)`;
    const tx4 = `hsl(${baseH}, ${Math.max(0, baseS - 10)}%, ${tx4L}%)`;
    const hl1 = `hsla(${accentH}, 50%, 40%, 30%)`;
    const hl2 = `rgba(255, 177, 80, 0.3)`;
    const sp1 = isLightMode ? "white" : "black";
    const hslToRgb = (h, s, l) => {
      h = h / 360;
      s = s / 100;
      l = l / 100;
      const hue2rgb = (p2, q2, t) => {
        if (t < 0) t += 1;
        if (t > 1) t -= 1;
        if (t < 1 / 6) return p2 + (q2 - p2) * 6 * t;
        if (t < 1 / 2) return q2;
        if (t < 2 / 3) return p2 + (q2 - p2) * (2 / 3 - t) * 6;
        return p2;
      };
      if (s === 0) {
        return [l, l, l];
      }
      const q = l < 0.5 ? l * (1 + s) : l + s - l * s;
      const p = 2 * l - q;
      const r2 = hue2rgb(p, q, h + 1 / 3);
      const g2 = hue2rgb(p, q, h);
      const b2 = hue2rgb(p, q, h - 1 / 3);
      return [r2, g2, b2];
    };
    const [r, g, b] = hslToRgb(accentH, accentS, accentL);
    const luminance = 0.2126 * (r <= 0.03928 ? r / 12.92 : Math.pow((r + 0.055) / 1.055, 2.4)) + 0.7152 * (g <= 0.03928 ? g / 12.92 : Math.pow((g + 0.055) / 1.055, 2.4)) + 0.0722 * (b <= 0.03928 ? b / 12.92 : Math.pow((b + 0.055) / 1.055, 2.4));
    const textOnAccent = luminance > 0.5 ? "black" : "white";
    const props = {
      "--base-h": `${baseH}`,
      "--base-s": `${baseS}%`,
      "--base-l": `${baseL}%`,
      "--bg1": bg1,
      "--bg2": bg2,
      "--bg-tab": bg2,
      "--bg3": bg3,
      "--ui1": ui1,
      "--ui2": ui2,
      "--ui3": ui3,
      "--tx1": tx1,
      "--tx2": tx2,
      "--tx3": tx3,
      "--tx4": tx4,
      "--hl1": hl1,
      "--hl2": hl2,
      "--sp1": sp1
    };
    const extendedS = accentS;
    const extendedL = isLightBase ? 55 : 65;
    props["--color-red"] = `hsl(0, var(--accent-s), ${extendedL}%)`;
    props["--color-orange"] = `hsl(25, var(--accent-s), ${extendedL}%)`;
    props["--color-yellow"] = `hsl(50, var(--accent-s), ${extendedL}%)`;
    props["--color-green"] = `hsl(130, var(--accent-s), ${extendedL}%)`;
    props["--color-cyan"] = `hsl(180, var(--accent-s), ${extendedL}%)`;
    props["--color-blue"] = `hsl(220, var(--accent-s), ${extendedL}%)`;
    props["--color-purple"] = `hsl(280, var(--accent-s), ${extendedL}%)`;
    props["--color-pink"] = `hsl(330, var(--accent-s), ${extendedL}%)`;
    if (palette.frameLightnessOffset !== void 0) {
      const offset = palette.frameLightnessOffset >= 0 ? `+ ${palette.frameLightnessOffset}` : `- ${Math.abs(palette.frameLightnessOffset)}`;
      props["--frame-background-l"] = `calc(var(--accent-l) ${offset}%)`;
    }
    if (palette.colors) {
      const overrides = [
        "bg1",
        "bg2",
        "bg3",
        "ui1",
        "ui2",
        "ui3",
        "tx1",
        "tx2",
        "tx3",
        "tx4",
        "hl1",
        "hl2",
        "red",
        "orange",
        "yellow",
        "green",
        "cyan",
        "blue",
        "purple",
        "pink"
      ];
      overrides.forEach((colorKey) => {
        var _a;
        const color = (_a = palette.colors) == null ? void 0 : _a[colorKey];
        if (color) {
          switch (colorKey) {
            case "bg1":
            case "bg2":
            case "bg3":
            case "ui1":
            case "ui2":
            case "ui3":
            case "tx1":
            case "tx2":
            case "tx3":
            case "tx4":
            case "hl1":
            case "hl2":
              props[`--${colorKey}`] = color;
              break;
            default:
              props[`--color-${colorKey}`] = color;
              break;
          }
        }
      });
    }
    return props;
  }
  /**
   * Generate CSS for a custom preset using Oxygen custom variables
   * This allows Style Settings to override Obsidian native variables
   * @deprecated Use generateProperties instead to avoid creating style elements
   */
  static generateCSS(preset, mode) {
    const palette = mode === "light" ? preset.light : preset.dark;
    const themeClass = mode === "light" ? "theme-light" : "theme-dark";
    const className = `oxygen-custom-${preset.id}`;
    let css = `.${themeClass}.${className} {
`;
    const baseH = palette.base.h;
    const baseS = palette.base.s;
    const baseL = palette.base.l;
    const accentH = palette.accent.h;
    const accentS = palette.accent.s;
    const accentL = palette.accent.l;
    const isLightMode = mode === "light";
    const isLightBase = baseL > 50;
    const bg1 = `hsl(${baseH}, ${baseS}%, ${baseL}%)`;
    const bg2 = `hsl(${baseH}, ${baseS}%, ${isLightBase ? Math.max(0, baseL - 5) : Math.min(100, baseL + 5)}%)`;
    const bg3 = `hsl(${baseH}, ${baseS}%, ${isLightBase ? Math.max(0, baseL - 10) : Math.min(100, baseL + 10)}%)`;
    const ui1L = isLightBase ? Math.max(0, baseL - 15) : Math.min(100, baseL + 15);
    const ui2L = isLightBase ? Math.max(0, baseL - 10) : Math.min(100, baseL + 10);
    const ui3L = isLightBase ? Math.max(0, baseL - 5) : Math.min(100, baseL + 5);
    const ui1 = `hsl(${baseH}, ${baseS}%, ${ui1L}%)`;
    const ui2 = `hsl(${baseH}, ${baseS}%, ${ui2L}%)`;
    const ui3 = `hsl(${baseH}, ${baseS}%, ${ui3L}%)`;
    const tx1L = isLightBase ? 15 : 85;
    const tx2L = isLightBase ? 25 : 75;
    const tx3L = isLightBase ? 35 : 65;
    const tx4L = isLightBase ? 30 : 70;
    const tx1 = `hsl(${baseH}, ${Math.max(0, baseS - 10)}%, ${tx1L}%)`;
    const tx2 = `hsl(${baseH}, ${Math.max(0, baseS - 20)}%, ${tx2L}%)`;
    const tx3 = `hsl(${baseH}, ${Math.max(0, baseS - 10)}%, ${tx3L}%)`;
    const tx4 = `hsl(${baseH}, ${Math.max(0, baseS - 10)}%, ${tx4L}%)`;
    const hl1 = `hsla(${accentH}, 50%, 40%, 30%)`;
    const hl2 = `rgba(255, 177, 80, 0.3)`;
    const sp1 = isLightMode ? "white" : "black";
    const hslToRgb = (h, s, l) => {
      h = h / 360;
      s = s / 100;
      l = l / 100;
      const hue2rgb = (p2, q2, t) => {
        if (t < 0) t += 1;
        if (t > 1) t -= 1;
        if (t < 1 / 6) return p2 + (q2 - p2) * 6 * t;
        if (t < 1 / 2) return q2;
        if (t < 2 / 3) return p2 + (q2 - p2) * (2 / 3 - t) * 6;
        return p2;
      };
      if (s === 0) {
        return [l, l, l];
      }
      const q = l < 0.5 ? l * (1 + s) : l + s - l * s;
      const p = 2 * l - q;
      const r2 = hue2rgb(p, q, h + 1 / 3);
      const g2 = hue2rgb(p, q, h);
      const b2 = hue2rgb(p, q, h - 1 / 3);
      return [r2, g2, b2];
    };
    const [r, g, b] = hslToRgb(accentH, accentS, accentL);
    const luminance = 0.2126 * (r <= 0.03928 ? r / 12.92 : Math.pow((r + 0.055) / 1.055, 2.4)) + 0.7152 * (g <= 0.03928 ? g / 12.92 : Math.pow((g + 0.055) / 1.055, 2.4)) + 0.0722 * (b <= 0.03928 ? b / 12.92 : Math.pow((b + 0.055) / 1.055, 2.4));
    const textOnAccent = luminance > 0.5 ? "black" : "white";
    css += `  --base-h: ${baseH};
`;
    css += `  --base-s: ${baseS}%;
`;
    css += `  --base-l: ${baseL}%;
`;
    css += `
`;
    css += `  --bg1: ${bg1};
`;
    css += `  --bg2: ${bg2};
`;
    css += `  --bg-tab: ${bg2};
`;
    css += `  --bg3: ${bg3};
`;
    css += `
`;
    css += `  --ui1: ${ui1};
`;
    css += `  --ui2: ${ui2};
`;
    css += `  --ui3: ${ui3};
`;
    css += `
`;
    css += `  --tx1: ${tx1};
`;
    css += `  --tx2: ${tx2};
`;
    css += `  --tx3: ${tx3};
`;
    css += `  --tx4: ${tx4};
`;
    css += `
`;
    css += `  --hl1: ${hl1};
`;
    css += `  --hl2: ${hl2};
`;
    css += `
`;
    css += `  --sp1: ${sp1};
`;
    css += `
`;
    const extendedS = accentS;
    const extendedL = isLightBase ? 55 : 65;
    css += `  --color-red: hsl(0, var(--accent-s), ${extendedL}%);
`;
    css += `  --color-orange: hsl(25, var(--accent-s), ${extendedL}%);
`;
    css += `  --color-yellow: hsl(50, var(--accent-s), ${extendedL}%);
`;
    css += `  --color-green: hsl(130, var(--accent-s), ${extendedL}%);
`;
    css += `  --color-cyan: hsl(180, var(--accent-s), ${extendedL}%);
`;
    css += `  --color-blue: hsl(220, var(--accent-s), ${extendedL}%);
`;
    css += `  --color-purple: hsl(280, var(--accent-s), ${extendedL}%);
`;
    css += `  --color-pink: hsl(330, var(--accent-s), ${extendedL}%);
`;
    css += `
`;
    if (palette.frameLightnessOffset !== void 0) {
      const offset = palette.frameLightnessOffset >= 0 ? `+ ${palette.frameLightnessOffset}` : `- ${Math.abs(palette.frameLightnessOffset)}`;
      css += `  --frame-background-l: calc(var(--accent-l) ${offset}%);
`;
      css += `
`;
    }
    if (palette.colors) {
      const overrides = [
        "bg1",
        "bg2",
        "bg3",
        "ui1",
        "ui2",
        "ui3",
        "tx1",
        "tx2",
        "tx3",
        "tx4",
        "hl1",
        "hl2",
        "red",
        "orange",
        "yellow",
        "green",
        "cyan",
        "blue",
        "purple",
        "pink"
      ];
      overrides.forEach((colorKey) => {
        var _a;
        const color = (_a = palette.colors) == null ? void 0 : _a[colorKey];
        if (color) {
          switch (colorKey) {
            case "bg1":
            case "bg2":
            case "bg3":
            case "ui1":
            case "ui2":
            case "ui3":
            case "tx1":
            case "tx2":
            case "tx3":
            case "tx4":
            case "hl1":
            case "hl2":
              css += `  --${colorKey}: ${color};
`;
              break;
            // For accent colors, we need to determine which ax variable this should map to
            // This is a simplified mapping - in practice, you might want more sophisticated logic
            default:
              css += `  --color-${colorKey}: ${color};
`;
              break;
          }
        }
      });
    }
    css += "}\n";
    return css;
  }
};

// src/managers/custom-preset-css.ts
var CustomPresetCSS = class {
  constructor(plugin) {
    this.isUpdating = false;
    this.plugin = plugin;
  }
  /**
   * Initialize custom preset CSS
   * Uses CSS custom properties on body element instead of creating style elements
   */
  initialize() {
    if (!this.plugin.isOxygenThemeActive()) {
      return;
    }
    this.updateCSS();
  }
  /**
   * Update custom preset CSS based on current settings
   * Uses CSS custom properties on body element instead of creating style elements
   * This complies with Obsidian guidelines to avoid creating style elements
   */
  updateCSS() {
    if (this.isUpdating) {
      return;
    }
    if (!this.plugin.isOxygenThemeActive()) {
      return;
    }
    this.isUpdating = true;
    const allPresetClasses = Array.from(document.body.classList).filter(
      (cls) => cls.startsWith("oxygen-custom-")
    );
    allPresetClasses.forEach((cls) => document.body.classList.remove(cls));
    const presetProperties = [
      "--base-h",
      "--base-s",
      "--base-l",
      "--bg1",
      "--bg2",
      "--bg-tab",
      "--bg3",
      "--ui1",
      "--ui2",
      "--ui3",
      "--tx1",
      "--tx2",
      "--tx3",
      "--tx4",
      "--hl1",
      "--hl2",
      "--sp1",
      "--color-red",
      "--color-orange",
      "--color-yellow",
      "--color-green",
      "--color-cyan",
      "--color-blue",
      "--color-purple",
      "--color-pink",
      "--frame-background-l"
    ];
    presetProperties.forEach((prop) => {
      document.body.style.removeProperty(prop);
    });
    const activeLightPreset = this.plugin.settings.customPresets.find(
      (p) => this.plugin.settings.lightScheme === `oxygen-custom-${p.id}`
    );
    const activeDarkPreset = this.plugin.settings.customPresets.find(
      (p) => this.plugin.settings.darkScheme === `oxygen-custom-${p.id}`
    );
    const isLightMode = document.body.classList.contains("theme-light");
    const activePreset = isLightMode ? activeLightPreset : activeDarkPreset;
    if (activePreset) {
      const presetClass = `oxygen-custom-${activePreset.id}`;
      document.body.classList.add(presetClass);
      const mode = isLightMode ? "light" : "dark";
      const properties = PresetCSSGenerator.generateProperties(activePreset, mode);
      setCssProps(document.body, properties);
    }
    setTimeout(() => {
      this.isUpdating = false;
    }, 50);
  }
  /**
   * Cleanup - remove all custom preset classes and CSS properties
   */
  cleanup() {
    const allPresetClasses = Array.from(document.body.classList).filter(
      (cls) => cls.startsWith("oxygen-custom-")
    );
    allPresetClasses.forEach((cls) => document.body.classList.remove(cls));
    const presetProperties = [
      "--base-h",
      "--base-s",
      "--base-l",
      "--bg1",
      "--bg2",
      "--bg-tab",
      "--bg3",
      "--ui1",
      "--ui2",
      "--ui3",
      "--tx1",
      "--tx2",
      "--tx3",
      "--tx4",
      "--hl1",
      "--hl2",
      "--sp1",
      "--color-red",
      "--color-orange",
      "--color-yellow",
      "--color-green",
      "--color-cyan",
      "--color-blue",
      "--color-purple",
      "--color-pink",
      "--frame-background-l"
    ];
    presetProperties.forEach((prop) => {
      document.body.style.removeProperty(prop);
    });
  }
};

// src/managers/style-manager.ts
var import_obsidian7 = require("obsidian");
var StyleManagerImpl = class {
  constructor(plugin) {
    this.cssObserver = null;
    this.plugin = plugin;
    this.customPresetCSS = new CustomPresetCSS(plugin);
  }
  /**
   * Detect OS for OS-specific styling
   */
  detectOS() {
    if (import_obsidian7.Platform.isMacOS) {
      return "macos";
    }
    if (import_obsidian7.Platform.isWin) {
      return "windows";
    }
    return "neutral";
  }
  /**
   * Initialize style management
   */
  initialize() {
    this.loadRules();
  }
  /**
   * Initialize custom preset CSS (called after main load completes)
   */
  initializeCustomPresets() {
    this.customPresetCSS.initialize();
  }
  /**
   * Cleanup on plugin unload
   */
  cleanup() {
    this.unloadRules();
    this.removeStyle();
    this.removeSettings();
    this.removeLightScheme();
    this.removeDarkScheme();
    this.customPresetCSS.cleanup();
    if (this.cssObserver) {
      this.cssObserver.disconnect();
      this.cssObserver = null;
    }
  }
  /**
   * Refresh all styles
   */
  refresh() {
    if (!this.plugin.isOxygenThemeActive()) {
      return;
    }
    this.updateStyle();
  }
  /**
   * Update custom preset CSS (public interface)
   */
  updateCustomPresetCSS() {
    this.customPresetCSS.updateCSS();
  }
  /**
   * Update all styles based on current settings
   */
  updateStyle() {
    if (!this.plugin.isOxygenThemeActive()) {
      return;
    }
    this.removeStyle();
    this.removeSettings();
    if (this.plugin.settings.lightStyle && this.plugin.settings.lightStyle.trim()) {
      document.body.addClass(this.plugin.settings.lightStyle);
    }
    if (this.plugin.settings.darkStyle && this.plugin.settings.darkStyle.trim()) {
      document.body.addClass(this.plugin.settings.darkStyle);
    }
    try {
      if (document.body.classList.contains("theme-light")) {
        this.updateLightScheme();
      } else if (document.body.classList.contains("theme-dark")) {
        this.updateDarkScheme();
      } else {
        document.body.addClass("theme-light");
        this.updateLightScheme();
      }
    } catch (error) {
      console.error("Error updating schemes:", error);
    }
    const bordersValue = this.plugin.settings.workspaceBorders;
    if (bordersValue === "enhanced") {
      document.body.classList.remove("borders-none", "borders-on");
    } else if (bordersValue === "default") {
      document.body.classList.remove("borders-none");
      document.body.classList.add("borders-on");
    } else if (bordersValue === "none") {
      document.body.classList.remove("borders-on");
      document.body.classList.add("borders-none");
    }
    document.body.classList.toggle("colorful-headings", this.plugin.settings.colorfulHeadings);
    document.body.classList.toggle("colorful-frame", this.plugin.settings.colorfulFrame);
    document.body.classList.toggle("colorful-active", this.plugin.settings.colorfulActiveStates);
    document.body.classList.toggle("enable-blur", this.plugin.settings.enableBlur);
    document.body.classList.toggle("links-int-on", this.plugin.settings.underlineInternal);
    document.body.classList.toggle("links-ext-on", this.plugin.settings.underlineExternal);
    document.body.classList.toggle("full-width-media", this.plugin.settings.fullWidthMedia);
    document.body.classList.toggle("img-grid", this.plugin.settings.imgGrid);
    document.body.classList.toggle("oxygen-dev-block-width", this.plugin.settings.devBlockWidth);
    document.body.classList.toggle("oxygen-status-off", !this.plugin.settings.minimalStatus);
    document.body.classList.toggle("full-file-names", !this.plugin.settings.trimNames);
    document.body.classList.toggle("labeled-nav", this.plugin.settings.labeledNav);
    document.body.classList.toggle("oxygen-folding", this.plugin.settings.folding);
    document.body.classList.toggle("use-default-folder-icon", this.plugin.settings.useDefaultFolderIcon);
    document.body.addClass(
      this.plugin.settings.chartWidth,
      this.plugin.settings.tableWidth,
      this.plugin.settings.imgWidth,
      this.plugin.settings.iframeWidth,
      this.plugin.settings.mapWidth
    );
    const cssProps = {
      "--font-ui-small": `${this.plugin.settings.textSmall}px`,
      "--line-height": String(this.plugin.settings.lineHeight),
      "--line-width": `${this.plugin.settings.lineWidth}rem`,
      "--line-width-wide": `${this.plugin.settings.lineWidthWide}rem`,
      "--max-width": `${this.plugin.settings.maxWidth}%`,
      "--font-editor-override": this.plugin.settings.editorFont
    };
    const isDefaultWidth = this.plugin.settings.navIndentationGuideWidth === "0px";
    const isDefaultColor = this.plugin.settings.navIndentationGuideColor === "rgba(var(--mono-rgb-100), 0.12)";
    if (!isDefaultWidth) {
      cssProps["--nav-indentation-guide-width"] = this.plugin.settings.navIndentationGuideWidth;
    } else {
      document.body.style.removeProperty("--nav-indentation-guide-width");
    }
    if (!isDefaultColor) {
      cssProps["--nav-indentation-guide-color"] = this.plugin.settings.navIndentationGuideColor;
    } else {
      document.body.style.removeProperty("--nav-indentation-guide-color");
    }
    setCssProps(document.body, cssProps);
    document.body.classList.remove("animations-refined", "animations-default", "animations-playful", "animations-off");
    const animationPersonality = this.plugin.settings.animationPersonality || "default";
    if (animationPersonality === "off") {
      document.body.classList.add("animations-off");
      document.body.style.removeProperty("--anim-speed-modifier");
    } else if (animationPersonality === "playful") {
      document.body.classList.add("animations-playful");
      document.body.style.setProperty("--anim-speed-modifier", this.plugin.settings.animationSpeed.toString());
    } else {
      document.body.classList.add("animations-default");
      document.body.style.setProperty("--anim-speed-modifier", this.plugin.settings.animationSpeed.toString());
    }
    this.customPresetCSS.updateCSS();
  }
  /**
   * Update light mode style
   */
  updateLightStyle() {
    if (!this.plugin.isOxygenThemeActive()) {
      return;
    }
    this.removeStyle();
    document.body.removeClass("theme-dark");
    document.body.addClass("theme-light", this.plugin.settings.lightStyle);
    const theme = getVaultConfig(this.plugin.app, "theme");
    if (theme !== "system") {
      setTheme(this.plugin.app, "moonstone");
      setVaultConfig(this.plugin.app, "theme", "moonstone");
    }
    this.plugin.app.workspace.trigger("css-change");
  }
  /**
   * Update dark mode style
   */
  updateDarkStyle() {
    if (!this.plugin.isOxygenThemeActive()) {
      return;
    }
    this.removeStyle();
    document.body.removeClass("theme-light");
    document.body.addClass("theme-dark", this.plugin.settings.darkStyle);
    const theme = getVaultConfig(this.plugin.app, "theme");
    if (theme !== "system") {
      setTheme(this.plugin.app, "obsidian");
      setVaultConfig(this.plugin.app, "theme", "obsidian");
    }
    this.plugin.app.workspace.trigger("css-change");
  }
  /**
   * Update light color scheme
   */
  updateLightScheme() {
    if (!this.plugin.isOxygenThemeActive()) {
      return;
    }
    this.removeLightScheme();
    this.removeDarkScheme();
    if (!document.body.classList.contains("theme-light")) {
      document.body.removeClass("theme-dark");
      document.body.addClass("theme-light");
    }
    if (this.plugin.settings.lightScheme && this.plugin.settings.lightScheme.trim()) {
      document.body.addClass(this.plugin.settings.lightScheme);
    }
  }
  /**
   * Update dark color scheme
   */
  updateDarkScheme() {
    if (!this.plugin.isOxygenThemeActive()) {
      return;
    }
    this.removeDarkScheme();
    this.removeLightScheme();
    if (!document.body.classList.contains("theme-dark")) {
      document.body.removeClass("theme-light");
      document.body.addClass("theme-dark");
    }
    if (this.plugin.settings.darkScheme && this.plugin.settings.darkScheme.trim()) {
      document.body.addClass(this.plugin.settings.darkScheme);
    }
  }
  /**
   * Remove style classes
   */
  removeStyle() {
    document.body.removeClass(
      "oxygen-light",
      "oxygen-light-tonal",
      "oxygen-light-contrast",
      "oxygen-light-white",
      "oxygen-dark",
      "oxygen-dark-tonal",
      "oxygen-dark-black",
      // Legacy or mis-prefixed classes that might be sticking
      "minimal-light",
      "minimal-light-tonal",
      "minimal-light-contrast",
      "minimal-light-white",
      "minimal-dark",
      "minimal-dark-tonal",
      "minimal-dark-black"
    );
  }
  /**
   * Remove light scheme classes
   */
  removeLightScheme() {
    document.body.removeClass(...LIGHT_SCHEMES);
    this.plugin.settings.customPresets.forEach((preset) => {
      document.body.removeClass(`oxygen-custom-${preset.id}`);
    });
  }
  /**
   * Remove dark scheme classes
   */
  removeDarkScheme() {
    document.body.removeClass(...DARK_SCHEMES);
    this.plugin.settings.customPresets.forEach((preset) => {
      document.body.removeClass(`oxygen-custom-${preset.id}`);
    });
  }
  /**
   * Remove settings classes
   */
  removeSettings() {
    document.body.removeClass(
      "borders-none",
      "borders-on",
      "colorful-headings",
      "colorful-frame",
      "colorful-active",
      "links-int-on",
      "links-ext-on",
      "full-width-media",
      "img-grid",
      "oxygen-dev-block-width",
      "oxygen-status-off",
      "full-file-names",
      "labeled-nav",
      "oxygen-folding",
      "enable-blur",
      "use-default-folder-icon",
      "animations-refined",
      "animations-default",
      "animations-playful",
      "animations-off",
      "table-wide",
      "table-max",
      "table-100",
      "table-default-width",
      "iframe-wide",
      "iframe-max",
      "iframe-100",
      "iframe-default-width",
      "img-wide",
      "img-max",
      "img-100",
      "img-default-width",
      "chart-wide",
      "chart-max",
      "chart-100",
      "chart-default-width",
      "map-wide",
      "map-max",
      "map-100",
      "map-default-width"
    );
  }
  /**
   * Load CSS rules
   * Uses CSS custom properties on body instead of creating style elements
   */
  loadRules() {
    if (!this.plugin.isOxygenThemeActive()) {
      return;
    }
    document.body.classList.add(CSS_CLASSES.PLUGIN_THEME);
    this.updateStyle();
  }
  /**
   * Unload CSS rules
   */
  unloadRules() {
    document.body.style.removeProperty("--font-ui-small");
    document.body.style.removeProperty("--line-height");
    document.body.style.removeProperty("--line-width");
    document.body.style.removeProperty("--line-width-wide");
    document.body.style.removeProperty("--max-width");
    document.body.style.removeProperty("--font-editor-override");
    document.body.style.removeProperty("--nav-indentation-guide-width");
    document.body.style.removeProperty("--nav-indentation-guide-color");
    document.body.style.removeProperty("--anim-speed-modifier");
    document.body.classList.remove(CSS_CLASSES.PLUGIN_THEME);
  }
  /**
   * Setup CSS watcher for re-applying custom presets
   */
  setupCSSWatcher() {
  }
};

// src/managers/theme-manager.ts
var ThemeManagerImpl = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  /**
   * Toggle between light and dark themes
   */
  updateTheme() {
    const currentTheme = getVaultConfig(this.plugin.app, "theme");
    if (currentTheme === OBSIDIAN_THEMES.SYSTEM) {
      if (document.body.classList.contains("theme-light")) {
        document.body.removeClass("theme-light");
        document.body.addClass("theme-dark");
      } else {
        document.body.removeClass("theme-dark");
        document.body.addClass("theme-light");
      }
    } else {
      if (document.body.classList.contains("theme-light")) {
        document.body.removeClass("theme-light");
        document.body.addClass("theme-dark");
      } else {
        document.body.removeClass("theme-dark");
        document.body.addClass("theme-light");
      }
      const theme = getVaultConfig(this.plugin.app, "theme");
      const newTheme = theme === OBSIDIAN_THEMES.LIGHT ? OBSIDIAN_THEMES.DARK : OBSIDIAN_THEMES.LIGHT;
      setTheme(this.plugin.app, newTheme);
      setVaultConfig(this.plugin.app, "theme", newTheme);
    }
    this.plugin.app.workspace.trigger("css-change");
  }
  /**
   * Switch to light theme
   */
  switchToLight() {
    document.body.removeClass("theme-dark");
    document.body.addClass("theme-light");
    const theme = getVaultConfig(this.plugin.app, "theme");
    if (theme !== OBSIDIAN_THEMES.SYSTEM) {
      setTheme(this.plugin.app, OBSIDIAN_THEMES.LIGHT);
      setVaultConfig(this.plugin.app, "theme", OBSIDIAN_THEMES.LIGHT);
    }
    this.plugin.app.workspace.trigger("css-change");
  }
  /**
   * Switch to dark theme
   */
  switchToDark() {
    document.body.removeClass("theme-light");
    document.body.addClass("theme-dark");
    const theme = getVaultConfig(this.plugin.app, "theme");
    if (theme !== OBSIDIAN_THEMES.SYSTEM) {
      setTheme(this.plugin.app, OBSIDIAN_THEMES.DARK);
      setVaultConfig(this.plugin.app, "theme", OBSIDIAN_THEMES.DARK);
    }
    this.plugin.app.workspace.trigger("css-change");
  }
  /**
   * Get current theme mode
   */
  getCurrentMode() {
    return document.body.classList.contains("theme-light") ? "light" : "dark";
  }
  /**
   * Update sidebar theme for high contrast light mode
   */
  updateSidebarTheme() {
    if (!this.plugin.isOxygenThemeActive()) {
      return;
    }
    const sidebarEl = document.getElementsByClassName("mod-left-split")[0];
    const ribbonEl = document.getElementsByClassName("side-dock-ribbon")[0];
    if (sidebarEl && ribbonEl && document.body.classList.contains("theme-light") && this.plugin.settings.lightStyle === "oxygen-light-contrast") {
      sidebarEl.addClass("theme-dark");
      ribbonEl.addClass("theme-dark");
    } else if (sidebarEl && ribbonEl) {
      sidebarEl.removeClass("theme-dark");
      ribbonEl.removeClass("theme-dark");
    }
  }
  /**
   * Cleanup sidebar theme on unload
   */
  cleanupSidebarTheme() {
    const sidebarEl = document.getElementsByClassName("mod-left-split")[0];
    if (sidebarEl) {
      sidebarEl.removeClass("theme-dark");
    }
    const ribbonEl = document.getElementsByClassName("side-dock-ribbon")[0];
    if (ribbonEl) {
      ribbonEl.removeClass("theme-dark");
    }
  }
};

// src/managers/settings-sync.ts
var SettingsSyncManager = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  /**
   * Setup event watchers for vault config changes
   */
  setupWatchers() {
    this.plugin.registerEvent(
      onVaultConfigChanged(this.plugin.app, () => {
        this.syncFromVault();
      })
    );
    this.plugin.registerEvent(
      this.plugin.app.workspace.on("css-change", () => {
        this.updateSidebarTheme();
      })
    );
  }
  /**
   * Sync settings from Obsidian vault config
   * @param skipSave - If true, don't save settings (used during initial load)
   */
  syncFromVault(skipSave = false) {
    const fontSize = getVaultConfig(this.plugin.app, VAULT_CONFIG.BASE_FONT_SIZE);
    if (typeof fontSize === "number") {
      this.plugin.settings.textNormal = fontSize;
    }
    this.plugin.settings.folding = !!getVaultConfig(this.plugin.app, VAULT_CONFIG.FOLD_HEADING);
    this.plugin.settings.lineNumbers = !!getVaultConfig(this.plugin.app, VAULT_CONFIG.SHOW_LINE_NUMBER);
    this.plugin.settings.readableLineLength = !!getVaultConfig(this.plugin.app, VAULT_CONFIG.READABLE_LINE_LENGTH);
    const bodyClassList = document.body.classList;
    bodyClassList.toggle("oxygen-folding", this.plugin.settings.folding);
    bodyClassList.toggle("oxygen-line-nums", this.plugin.settings.lineNumbers);
    bodyClassList.toggle("oxygen-readable", this.plugin.settings.readableLineLength);
    bodyClassList.toggle("oxygen-readable-off", !this.plugin.settings.readableLineLength);
    if (!skipSave) {
      void this.plugin.saveData(this.plugin.settings);
    }
  }
  /**
   * Sync font size to Obsidian vault config
   */
  setFontSize() {
    setVaultConfig(this.plugin.app, VAULT_CONFIG.BASE_FONT_SIZE, this.plugin.settings.textNormal);
    updateFontSize(this.plugin.app);
  }
  /**
   * Update sidebar theme for high contrast mode
   */
  updateSidebarTheme() {
    const sidebarEl = document.getElementsByClassName("mod-left-split")[0];
    const ribbonEl = document.getElementsByClassName("side-dock-ribbon")[0];
    if (sidebarEl && ribbonEl && document.body.classList.contains("theme-light") && this.plugin.settings.lightStyle === "oxygen-light-contrast") {
      sidebarEl.addClass("theme-dark");
      ribbonEl.addClass("theme-dark");
    } else if (sidebarEl && ribbonEl) {
      sidebarEl.removeClass("theme-dark");
      ribbonEl.removeClass("theme-dark");
    }
  }
  /**
   * Cleanup - no specific cleanup needed for this manager
   */
  cleanup() {
  }
};

// src/commands/font-commands.ts
function registerFontCommands(plugin) {
  plugin.addCommand({
    id: COMMAND_IDS.INCREASE_FONT,
    name: "Increase body font size",
    callback: () => {
      plugin.settings.textNormal += DEFAULTS.FONT_STEP;
      void plugin.saveData(plugin.settings);
      setFontSize(plugin);
    }
  });
  plugin.addCommand({
    id: COMMAND_IDS.DECREASE_FONT,
    name: "Decrease body font size",
    callback: () => {
      plugin.settings.textNormal -= DEFAULTS.FONT_STEP;
      void plugin.saveData(plugin.settings);
      setFontSize(plugin);
    }
  });
}
function setFontSize(plugin) {
  setVaultConfig(plugin.app, "baseFontSize", plugin.settings.textNormal);
  updateFontSize(plugin.app);
}

// src/commands/scheme-commands.ts
function registerSchemeCommands(plugin) {
  LIGHT_SCHEMES.forEach((scheme) => {
    const schemeName = SCHEME_DISPLAY_NAMES[scheme] || scheme;
    plugin.addCommand({
      id: `toggle-${scheme}`,
      name: `Switch light color scheme to ${schemeName} (light)`,
      callback: () => {
        plugin.settings.lightScheme = scheme;
        void plugin.saveData(plugin.settings);
        updateLightScheme(plugin);
        updateLightStyle(plugin);
      }
    });
  });
  DARK_SCHEMES.forEach((scheme) => {
    const schemeName = SCHEME_DISPLAY_NAMES[scheme] || scheme;
    plugin.addCommand({
      id: `toggle-${scheme}`,
      name: `Switch dark color scheme to ${schemeName} (dark)`,
      callback: () => {
        plugin.settings.darkScheme = scheme;
        void plugin.saveData(plugin.settings);
        updateDarkScheme(plugin);
        updateDarkStyle(plugin);
      }
    });
  });
}
function updateLightScheme(plugin) {
  removeLightScheme(plugin);
  removeDarkScheme(plugin);
  if (!document.body.classList.contains("theme-light")) {
    document.body.removeClass("theme-dark");
    document.body.addClass("theme-light");
  }
  document.body.addClass(plugin.settings.lightScheme);
}
function updateDarkScheme(plugin) {
  removeDarkScheme(plugin);
  removeLightScheme(plugin);
  if (!document.body.classList.contains("theme-dark")) {
    document.body.removeClass("theme-light");
    document.body.addClass("theme-dark");
  }
  document.body.addClass(plugin.settings.darkScheme);
}
function updateLightStyle(plugin) {
  if (!plugin.isOxygenThemeActive()) {
    return;
  }
  document.body.removeClass(
    "theme-dark",
    "oxygen-light",
    "oxygen-light-tonal",
    "oxygen-light-contrast",
    "oxygen-light-white"
  );
  document.body.addClass("theme-light", plugin.settings.lightStyle);
  const theme = getVaultConfig(plugin.app, "theme");
  if (theme !== "system") {
    setTheme(plugin.app, "moonstone");
    setVaultConfig(plugin.app, "theme", "moonstone");
  }
  plugin.app.workspace.trigger("css-change");
}
function updateDarkStyle(plugin) {
  if (!plugin.isOxygenThemeActive()) {
    return;
  }
  document.body.removeClass(
    "theme-light",
    "oxygen-dark",
    "oxygen-dark-tonal",
    "oxygen-dark-black"
  );
  document.body.addClass("theme-dark", plugin.settings.darkStyle);
  const theme = getVaultConfig(plugin.app, "theme");
  if (theme !== "system") {
    setTheme(plugin.app, "obsidian");
    setVaultConfig(plugin.app, "theme", "obsidian");
  }
  plugin.app.workspace.trigger("css-change");
}
function removeLightScheme(plugin) {
  document.body.removeClass(...LIGHT_SCHEMES);
  plugin.settings.customPresets.forEach((preset) => {
    document.body.removeClass(`minimal-custom-${preset.id}`);
  });
}
function removeDarkScheme(plugin) {
  document.body.removeClass(...DARK_SCHEMES);
  plugin.settings.customPresets.forEach((preset) => {
    document.body.removeClass(`minimal-custom-${preset.id}`);
  });
}

// src/commands/style-commands.ts
function registerStyleCommands(plugin) {
  plugin.addCommand({
    id: COMMAND_IDS.CYCLE_DARK_STYLE,
    name: "Cycle between dark mode styles",
    callback: () => {
      const currentIndex = DARK_STYLES.indexOf(plugin.settings.darkStyle);
      const nextIndex = (currentIndex + 1) % DARK_STYLES.length;
      plugin.settings.darkStyle = DARK_STYLES[nextIndex];
      void plugin.saveData(plugin.settings);
      updateDarkStyle2(plugin);
    }
  });
  plugin.addCommand({
    id: COMMAND_IDS.CYCLE_LIGHT_STYLE,
    name: "Cycle between light mode styles",
    callback: () => {
      const currentIndex = LIGHT_STYLES.indexOf(plugin.settings.lightStyle);
      const nextIndex = (currentIndex + 1) % LIGHT_STYLES.length;
      plugin.settings.lightStyle = LIGHT_STYLES[nextIndex];
      void plugin.saveData(plugin.settings);
      updateLightStyle2(plugin);
    }
  });
  plugin.addCommand({
    id: COMMAND_IDS.LIGHT_DEFAULT,
    name: "Use light mode (default)",
    callback: () => {
      plugin.settings.lightStyle = "oxygen-light";
      plugin.settings.lightScheme = "oxygen-oxygen-light";
      void plugin.saveData(plugin.settings);
      updateLightScheme(plugin);
      updateLightStyle2(plugin);
    }
  });
  plugin.addCommand({
    id: COMMAND_IDS.LIGHT_WHITE,
    name: "Use light mode (all white)",
    callback: () => {
      plugin.settings.lightStyle = "oxygen-light-white";
      void plugin.saveData(plugin.settings);
      updateLightStyle2(plugin);
    }
  });
  plugin.addCommand({
    id: COMMAND_IDS.LIGHT_TONAL,
    name: "Use light mode (low contrast)",
    callback: () => {
      plugin.settings.lightStyle = "oxygen-light-tonal";
      void plugin.saveData(plugin.settings);
      updateLightStyle2(plugin);
    }
  });
  plugin.addCommand({
    id: COMMAND_IDS.LIGHT_CONTRAST,
    name: "Use light mode (high contrast)",
    callback: () => {
      plugin.settings.lightStyle = "oxygen-light-contrast";
      void plugin.saveData(plugin.settings);
      updateLightStyle2(plugin);
    }
  });
  plugin.addCommand({
    id: COMMAND_IDS.DARK_DEFAULT,
    name: "Use dark mode (default)",
    callback: () => {
      plugin.settings.darkStyle = "oxygen-dark";
      plugin.settings.darkScheme = "oxygen-oxygen-dark";
      void plugin.saveData(plugin.settings);
      updateDarkScheme(plugin);
      updateDarkStyle2(plugin);
    }
  });
  plugin.addCommand({
    id: COMMAND_IDS.DARK_TONAL,
    name: "Use dark mode (low contrast)",
    callback: () => {
      plugin.settings.darkStyle = "oxygen-dark-tonal";
      void plugin.saveData(plugin.settings);
      updateDarkStyle2(plugin);
    }
  });
  plugin.addCommand({
    id: COMMAND_IDS.DARK_BLACK,
    name: "Use dark mode (true black)",
    callback: () => {
      plugin.settings.darkStyle = "oxygen-dark-black";
      void plugin.saveData(plugin.settings);
      updateDarkStyle2(plugin);
    }
  });
}
function updateLightStyle2(plugin) {
  if (!plugin.isOxygenThemeActive()) {
    return;
  }
  document.body.removeClass(
    "theme-dark",
    "oxygen-light",
    "oxygen-light-tonal",
    "oxygen-light-contrast",
    "oxygen-light-white"
  );
  document.body.addClass("theme-light", plugin.settings.lightStyle);
  const theme = getVaultConfig(plugin.app, "theme");
  if (theme !== "system") {
    setTheme(plugin.app, "moonstone");
    setVaultConfig(plugin.app, "theme", "moonstone");
  }
  plugin.app.workspace.trigger("css-change");
}
function updateDarkStyle2(plugin) {
  if (!plugin.isOxygenThemeActive()) {
    return;
  }
  document.body.removeClass(
    "theme-light",
    "oxygen-dark",
    "oxygen-dark-tonal",
    "oxygen-dark-black"
  );
  document.body.addClass("theme-dark", plugin.settings.darkStyle);
  const theme = getVaultConfig(plugin.app, "theme");
  if (theme !== "system") {
    setTheme(plugin.app, "obsidian");
    setVaultConfig(plugin.app, "theme", "obsidian");
  }
  plugin.app.workspace.trigger("css-change");
}

// src/commands/preset-commands.ts
function registerPresetCommands(plugin) {
  plugin.addCommand({
    id: COMMAND_IDS.CREATE_PRESET,
    name: "Create custom color preset",
    callback: () => {
      const modal = new PresetEditorModal(plugin.app, plugin, null, (preset) => {
        plugin.settings.customPresets.push(preset);
        void plugin.saveData(plugin.settings);
      });
      modal.open();
    }
  });
  plugin.addCommand({
    id: COMMAND_IDS.IMPORT_PRESET,
    name: "Import custom color preset",
    callback: () => {
      const modal = new PresetImportModal(plugin.app, plugin, (preset) => {
        plugin.settings.customPresets.push(preset);
        void plugin.saveData(plugin.settings);
      });
      modal.open();
    }
  });
  plugin.addCommand({
    id: COMMAND_IDS.CYCLE_PRESETS_LIGHT,
    name: "Cycle through custom presets (light mode)",
    callback: () => {
      if (plugin.settings.customPresets.length === 0) return;
      const currentIndex = plugin.settings.customPresets.findIndex(
        (p) => plugin.settings.lightScheme === `oxygen-custom-${p.id}`
      );
      const nextIndex = (currentIndex + 1) % plugin.settings.customPresets.length;
      const nextPreset = plugin.settings.customPresets[nextIndex];
      plugin.settings.lightScheme = `oxygen-custom-${nextPreset.id}`;
      void plugin.saveData(plugin.settings);
      updateLightScheme2(plugin);
    }
  });
  plugin.addCommand({
    id: COMMAND_IDS.CYCLE_PRESETS_DARK,
    name: "Cycle through custom presets (dark mode)",
    callback: () => {
      if (plugin.settings.customPresets.length === 0) return;
      const currentIndex = plugin.settings.customPresets.findIndex(
        (p) => plugin.settings.darkScheme === `oxygen-custom-${p.id}`
      );
      const nextIndex = (currentIndex + 1) % plugin.settings.customPresets.length;
      const nextPreset = plugin.settings.customPresets[nextIndex];
      plugin.settings.darkScheme = `oxygen-custom-${nextPreset.id}`;
      void plugin.saveData(plugin.settings);
      updateDarkScheme2(plugin);
    }
  });
}
function updateLightScheme2(plugin) {
  plugin.updateLightScheme();
}
function updateDarkScheme2(plugin) {
  plugin.updateDarkScheme();
}

// src/commands/feature-commands.ts
function registerFeatureCommands(plugin) {
  plugin.addCommand({
    id: COMMAND_IDS.TOGGLE_BORDERS,
    name: "Toggle sidebar borders",
    callback: () => {
      const current = plugin.settings.workspaceBorders;
      if (current === "enhanced") {
        plugin.settings.workspaceBorders = "default";
      } else if (current === "default") {
        plugin.settings.workspaceBorders = "none";
      } else {
        plugin.settings.workspaceBorders = "enhanced";
      }
      void plugin.saveData(plugin.settings);
      refresh(plugin);
    }
  });
  plugin.addCommand({
    id: COMMAND_IDS.TOGGLE_COLORFUL_HEADINGS,
    name: "Toggle colorful headings",
    callback: () => {
      plugin.settings.colorfulHeadings = !plugin.settings.colorfulHeadings;
      void plugin.saveData(plugin.settings);
      refresh(plugin);
    }
  });
  plugin.addCommand({
    id: COMMAND_IDS.TOGGLE_COLORFUL_FRAME,
    name: "Toggle colorful window frame",
    callback: () => {
      plugin.settings.colorfulFrame = !plugin.settings.colorfulFrame;
      void plugin.saveData(plugin.settings);
      refresh(plugin);
    }
  });
  plugin.addCommand({
    id: COMMAND_IDS.TOGGLE_IMAGE_GRID,
    name: "Toggle image grids",
    callback: () => {
      plugin.settings.imgGrid = !plugin.settings.imgGrid;
      void plugin.saveData(plugin.settings);
      refresh(plugin);
    }
  });
  plugin.addCommand({
    id: COMMAND_IDS.TOGGLE_THEME,
    name: "Switch between light and dark mode",
    callback: () => {
      updateTheme(plugin);
    }
  });
  plugin.addCommand({
    id: COMMAND_IDS.DEV_BLOCK_WIDTH,
    name: "Dev \u2014 show block widths",
    callback: () => {
      plugin.settings.devBlockWidth = !plugin.settings.devBlockWidth;
      void plugin.saveData(plugin.settings);
      refresh(plugin);
    }
  });
  plugin.addCommand({
    id: COMMAND_IDS.OPEN_SETTINGS,
    name: "Open settings",
    icon: "settings-2",
    callback: () => {
      const appWithSettings = plugin.app;
      appWithSettings.setting.open();
      appWithSettings.setting.openTabById(plugin.manifest.id);
    }
  });
}
function refresh(plugin) {
  plugin.updateStyle();
}
function updateTheme(plugin) {
  if (!plugin.isOxygenThemeActive()) {
    return;
  }
  const theme = getVaultConfig(plugin.app, "theme");
  if (theme === "system") {
    if (document.body.classList.contains("theme-light")) {
      document.body.removeClass("theme-light");
      document.body.addClass("theme-dark");
    } else {
      document.body.removeClass("theme-dark");
      document.body.addClass("theme-light");
    }
  } else {
    if (document.body.classList.contains("theme-light")) {
      document.body.removeClass("theme-light");
      document.body.addClass("theme-dark");
    } else {
      document.body.removeClass("theme-dark");
      document.body.addClass("theme-light");
    }
    const currentTheme = getVaultConfig(plugin.app, "theme");
    const newTheme = currentTheme === "moonstone" ? "obsidian" : "moonstone";
    setTheme(plugin.app, newTheme);
    setVaultConfig(plugin.app, "theme", newTheme);
  }
  plugin.app.workspace.trigger("css-change");
}

// src/commands/width-commands.ts
function registerWidthCommands(plugin) {
  plugin.addCommand({
    id: COMMAND_IDS.CYCLE_TABLE_WIDTH,
    name: "Cycle between table width options",
    callback: () => {
      const currentIndex = TABLE_WIDTH_STYLES.indexOf(plugin.settings.tableWidth);
      const nextIndex = (currentIndex + 1) % TABLE_WIDTH_STYLES.length;
      plugin.settings.tableWidth = TABLE_WIDTH_STYLES[nextIndex];
      void plugin.saveData(plugin.settings);
      refresh2(plugin);
    }
  });
  plugin.addCommand({
    id: COMMAND_IDS.CYCLE_IMAGE_WIDTH,
    name: "Cycle between image width options",
    callback: () => {
      const currentIndex = IMAGE_WIDTH_STYLES.indexOf(plugin.settings.imgWidth);
      const nextIndex = (currentIndex + 1) % IMAGE_WIDTH_STYLES.length;
      plugin.settings.imgWidth = IMAGE_WIDTH_STYLES[nextIndex];
      void plugin.saveData(plugin.settings);
      refresh2(plugin);
    }
  });
  plugin.addCommand({
    id: COMMAND_IDS.CYCLE_IFRAME_WIDTH,
    name: "Cycle between iframe width options",
    callback: () => {
      const currentIndex = IFRAME_WIDTH_STYLES.indexOf(plugin.settings.iframeWidth);
      const nextIndex = (currentIndex + 1) % IFRAME_WIDTH_STYLES.length;
      plugin.settings.iframeWidth = IFRAME_WIDTH_STYLES[nextIndex];
      void plugin.saveData(plugin.settings);
      refresh2(plugin);
    }
  });
  plugin.addCommand({
    id: COMMAND_IDS.CYCLE_CHART_WIDTH,
    name: "Cycle between chart width options",
    callback: () => {
      const currentIndex = CHART_WIDTH_STYLES.indexOf(plugin.settings.chartWidth);
      const nextIndex = (currentIndex + 1) % CHART_WIDTH_STYLES.length;
      plugin.settings.chartWidth = CHART_WIDTH_STYLES[nextIndex];
      void plugin.saveData(plugin.settings);
      refresh2(plugin);
    }
  });
  plugin.addCommand({
    id: COMMAND_IDS.CYCLE_MAP_WIDTH,
    name: "Cycle between map width options",
    callback: () => {
      const currentIndex = MAP_WIDTH_STYLES.indexOf(plugin.settings.mapWidth);
      const nextIndex = (currentIndex + 1) % MAP_WIDTH_STYLES.length;
      plugin.settings.mapWidth = MAP_WIDTH_STYLES[nextIndex];
      void plugin.saveData(plugin.settings);
      refresh2(plugin);
    }
  });
}
function refresh2(plugin) {
  plugin.updateStyle();
}

// src/commands/index.ts
function registerAllCommands(plugin) {
  registerFontCommands(plugin);
  registerStyleCommands(plugin);
  registerSchemeCommands(plugin);
  registerPresetCommands(plugin);
  registerFeatureCommands(plugin);
  registerWidthCommands(plugin);
}

// src/utils/migrations.ts
var MigrationRunner = class {
  constructor(app, settings) {
    this.app = app;
    this.settings = settings;
  }
  async run() {
    let migrated = false;
    const migrationVersion = "minimal-to-oxygen-prefix-v1";
    if (!this.settings._migrationVersions || !this.settings._migrationVersions.includes(migrationVersion)) {
      let prefixMigrated = false;
      if (this.settings.lightStyle && this.settings.lightStyle.startsWith("minimal-")) {
        this.settings.lightStyle = this.settings.lightStyle.replace(/^minimal-/, "oxygen-");
        prefixMigrated = true;
      }
      if (this.settings.darkStyle && this.settings.darkStyle.startsWith("minimal-")) {
        this.settings.darkStyle = this.settings.darkStyle.replace(/^minimal-/, "oxygen-");
        prefixMigrated = true;
      }
      if (this.settings.lightScheme && this.settings.lightScheme.startsWith("minimal-")) {
        this.settings.lightScheme = this.settings.lightScheme.replace(/^minimal-/, "oxygen-");
        prefixMigrated = true;
      }
      if (this.settings.darkScheme && this.settings.darkScheme.startsWith("minimal-")) {
        this.settings.darkScheme = this.settings.darkScheme.replace(/^minimal-/, "oxygen-");
        prefixMigrated = true;
      }
      if (prefixMigrated) {
        if (!this.settings._migrationVersions) {
          this.settings._migrationVersions = [];
        }
        this.settings._migrationVersions.push(migrationVersion);
        migrated = true;
        console.debug("[Oxygen Settings] Migrated settings from minimal- to oxygen- prefix");
      }
    }
    if (this.settings.lightScheme === "minimal-default-light") {
      this.settings.lightScheme = "oxygen-minimal-light";
      migrated = true;
    }
    if (this.settings.darkScheme === "minimal-default-dark") {
      this.settings.darkScheme = "oxygen-minimal-dark";
      migrated = true;
    }
    if (this.settings.animationPersonality === "refined") {
      this.settings.animationPersonality = "default";
      migrated = true;
    }
    return migrated;
  }
  /**
   * Specifically handles the workspace borders migration which requires checking if a value was previously set.
   */
  migrateWorkspaceBorders(loadedData) {
    if (loadedData && typeof loadedData === "object") {
      const legacyData = loadedData;
      if (legacyData.bordersToggle !== void 0 || legacyData.workspaceBordersEnhanced !== void 0) {
        if (legacyData.workspaceBorders === void 0) {
          if (legacyData.bordersToggle === false) {
            this.settings.workspaceBorders = "none";
          } else if (legacyData.workspaceBordersEnhanced === true) {
            this.settings.workspaceBorders = "enhanced";
          } else {
            this.settings.workspaceBorders = "default";
          }
          return true;
        }
      }
    }
    return false;
  }
};

// src/main.ts
var MinimalTheme = class extends import_obsidian8.Plugin {
  constructor() {
    super(...arguments);
    // Cache theme state to avoid repeated vault config calls (performance optimization)
    this._isOxygenActive = false;
    this._isInitialized = false;
  }
  async onload() {
    await this.loadSettings();
    this.styleManager = new StyleManagerImpl(this);
    this.themeManager = new ThemeManagerImpl(this);
    this.settingsSyncManager = new SettingsSyncManager(this);
    this.settingsTab = new MinimalSettingsTab(this.app, this);
    this.addSettingTab(this.settingsTab);
    this._isOxygenActive = isOxygenThemeActive(this.app);
    const initialThemeMode = document.body.classList.contains("theme-light") ? "light" : "dark";
    if (this._isOxygenActive) {
      this.styleManager.initialize();
      this._isInitialized = true;
    }
    this.settingsSyncManager.setupWatchers();
    this.settingsSyncManager.syncFromVault(true);
    this.app.workspace.onLayoutReady(() => {
      if (this._isOxygenActive) {
        this.themeManager.updateSidebarTheme();
      }
    });
    registerAllCommands(this);
    let debounceTimer;
    let lastThemeMode = initialThemeMode;
    this.registerEvent(
      this.app.workspace.on("css-change", () => {
        window.clearTimeout(debounceTimer);
        debounceTimer = window.setTimeout(() => {
          const newThemeState = isOxygenThemeActive(this.app);
          const currentThemeMode = document.body.classList.contains("theme-light") ? "light" : "dark";
          const themeModeChanged = lastThemeMode !== null && lastThemeMode !== currentThemeMode;
          lastThemeMode = currentThemeMode;
          if (this._isOxygenActive && !newThemeState) {
            this._isOxygenActive = false;
            this._isInitialized = false;
            this.styleManager.cleanup();
          } else if (!this._isOxygenActive && newThemeState && !this._isInitialized) {
            this._isOxygenActive = true;
            this._isInitialized = true;
            this.styleManager.initialize();
          } else if (this._isOxygenActive && newThemeState && this._isInitialized && themeModeChanged) {
            this.styleManager.updateStyle();
          }
        }, 100);
      })
    );
  }
  onunload() {
    this.themeManager.cleanupSidebarTheme();
    this.styleManager.cleanup();
    this.settingsSyncManager.cleanup();
  }
  async loadSettings() {
    const loadedData = await this.loadData();
    this.settings = Object.assign({}, DEFAULT_SETTINGS, loadedData);
    const migrationRunner = new MigrationRunner(this.app, this.settings);
    let migrated = await migrationRunner.run();
    if (migrationRunner.migrateWorkspaceBorders(loadedData)) {
      migrated = true;
    }
    if (!this.settings.customPresets) {
      this.settings.customPresets = [];
    }
    if (this.settings.enableCustomPresets === void 0) {
      this.settings.enableCustomPresets = true;
    }
    if (!this.settings.animationPersonality) {
      this.settings.animationPersonality = "default";
    }
    if (migrated) {
      await this.saveSettings();
    }
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  // Convenience methods that delegate to managers
  refresh() {
    this.styleManager.refresh();
  }
  updateStyle() {
    this.styleManager.updateStyle();
  }
  updateLightStyle() {
    this.styleManager.updateLightStyle();
  }
  updateDarkStyle() {
    this.styleManager.updateDarkStyle();
  }
  updateLightScheme() {
    this.styleManager.updateLightScheme();
  }
  updateDarkScheme() {
    this.styleManager.updateDarkScheme();
  }
  updateCustomPresetCSS() {
    this.styleManager.updateCustomPresetCSS();
  }
  setFontSize() {
    this.settingsSyncManager.setFontSize();
  }
  /**
   * Check if the Oxygen theme is currently active (uses cached value for performance)
   * @returns true if Oxygen theme is active, false otherwise
   */
  isOxygenThemeActive() {
    return this._isOxygenActive;
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3NldHRpbmdzL3NldHRpbmdzLWludGVyZmFjZS50cyIsICJzcmMvc2V0dGluZ3MudHMiLCAic3JjL3V0aWxzL3NldHRpbmdzLWNvbXBhdC50cyIsICJzcmMvdHlwZXMvb2JzaWRpYW4tZXh0ZW5zaW9ucy50cyIsICJzcmMvY29uc3RhbnRzLnRzIiwgInNyYy91dGlscy9jc3MtcHJvcHMudHMiLCAic3JjL3V0aWxzL2NvbG9yLXV0aWxzLnRzIiwgInNyYy91dGlscy90aGVtZS11dGlscy50cyIsICJzcmMvc2V0dGluZ3Mvc2VjdGlvbnMvQ29sb3JTY2hlbWVTZXR0aW5ncy50cyIsICJzcmMvc2V0dGluZ3Mvc2VjdGlvbnMvRmVhdHVyZVNldHRpbmdzLnRzIiwgInNyYy9zZXR0aW5ncy9zZWN0aW9ucy9MYXlvdXRTZXR0aW5ncy50cyIsICJzcmMvc2V0dGluZ3Mvc2VjdGlvbnMvVHlwb2dyYXBoeVNldHRpbmdzLnRzIiwgInNyYy9zZXR0aW5ncy9zZWN0aW9ucy9DdXN0b21QcmVzZXRTZXR0aW5ncy50cyIsICJzcmMvcHJlc2V0cy9QcmVzZXRNYW5hZ2VyLnRzIiwgInNyYy9tb2RhbHMvUHJlc2V0RWRpdG9yTW9kYWwudHMiLCAic3JjL3V0aWxzL3ByZXNldC1jb2xvci1kZWZhdWx0cy50cyIsICJzcmMvbW9kYWxzL2NvbXBvbmVudHMvUHJlc2V0Q29sb3JDb250cm9scy50cyIsICJzcmMvbW9kYWxzL1ByZXNldEltcG9ydE1vZGFsLnRzIiwgInNyYy9tb2RhbHMvQ29uZmlybWF0aW9uTW9kYWwudHMiLCAic3JjL3NldHRpbmdzL3NlY3Rpb25zL0FuaW1hdGlvblNldHRpbmdzLnRzIiwgInNyYy9wcmVzZXRzL3ByZXNldC1jc3MtZ2VuZXJhdG9yLnRzIiwgInNyYy9tYW5hZ2Vycy9jdXN0b20tcHJlc2V0LWNzcy50cyIsICJzcmMvbWFuYWdlcnMvc3R5bGUtbWFuYWdlci50cyIsICJzcmMvbWFuYWdlcnMvdGhlbWUtbWFuYWdlci50cyIsICJzcmMvbWFuYWdlcnMvc2V0dGluZ3Mtc3luYy50cyIsICJzcmMvY29tbWFuZHMvZm9udC1jb21tYW5kcy50cyIsICJzcmMvY29tbWFuZHMvc2NoZW1lLWNvbW1hbmRzLnRzIiwgInNyYy9jb21tYW5kcy9zdHlsZS1jb21tYW5kcy50cyIsICJzcmMvY29tbWFuZHMvcHJlc2V0LWNvbW1hbmRzLnRzIiwgInNyYy9jb21tYW5kcy9mZWF0dXJlLWNvbW1hbmRzLnRzIiwgInNyYy9jb21tYW5kcy93aWR0aC1jb21tYW5kcy50cyIsICJzcmMvY29tbWFuZHMvaW5kZXgudHMiLCAic3JjL3V0aWxzL21pZ3JhdGlvbnMudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIi8qKlxyXG4gKiBNaW5pbWFsIFRoZW1lIFBsdWdpbiAtIFJlZmFjdG9yZWRcclxuICogTWFpbiBwbHVnaW4gZmlsZSAtIGxpZmVjeWNsZSBtYW5hZ2VtZW50IG9ubHlcclxuICovXHJcblxyXG5pbXBvcnQgeyBQbHVnaW4gfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IE1pbmltYWxTZXR0aW5ncywgREVGQVVMVF9TRVRUSU5HUyB9IGZyb20gJy4vc2V0dGluZ3Mvc2V0dGluZ3MtaW50ZXJmYWNlJztcclxuaW1wb3J0IHsgTWluaW1hbFNldHRpbmdzVGFiIH0gZnJvbSAnLi9zZXR0aW5ncyc7XHJcbmltcG9ydCB7IFN0eWxlTWFuYWdlckltcGwgfSBmcm9tICcuL21hbmFnZXJzL3N0eWxlLW1hbmFnZXInO1xyXG5pbXBvcnQgeyBUaGVtZU1hbmFnZXJJbXBsIH0gZnJvbSAnLi9tYW5hZ2Vycy90aGVtZS1tYW5hZ2VyJztcclxuaW1wb3J0IHsgU2V0dGluZ3NTeW5jTWFuYWdlciB9IGZyb20gJy4vbWFuYWdlcnMvc2V0dGluZ3Mtc3luYyc7XHJcbmltcG9ydCB7IHJlZ2lzdGVyQWxsQ29tbWFuZHMgfSBmcm9tICcuL2NvbW1hbmRzJztcclxuaW1wb3J0IHsgTWlncmF0aW9uUnVubmVyIH0gZnJvbSAnLi91dGlscy9taWdyYXRpb25zJztcclxuaW1wb3J0IHsgaXNPeHlnZW5UaGVtZUFjdGl2ZSB9IGZyb20gJy4vdXRpbHMvdGhlbWUtdXRpbHMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWluaW1hbFRoZW1lIGV4dGVuZHMgUGx1Z2luIHtcclxuICBzZXR0aW5nczogTWluaW1hbFNldHRpbmdzO1xyXG5cclxuICAvLyBNYW5hZ2Vyc1xyXG4gIHN0eWxlTWFuYWdlcjogU3R5bGVNYW5hZ2VySW1wbDtcclxuICB0aGVtZU1hbmFnZXI6IFRoZW1lTWFuYWdlckltcGw7XHJcbiAgc2V0dGluZ3NTeW5jTWFuYWdlcjogU2V0dGluZ3NTeW5jTWFuYWdlcjtcclxuICBzZXR0aW5nc1RhYj86IE1pbmltYWxTZXR0aW5nc1RhYjtcclxuXHJcbiAgLy8gQ2FjaGUgdGhlbWUgc3RhdGUgdG8gYXZvaWQgcmVwZWF0ZWQgdmF1bHQgY29uZmlnIGNhbGxzIChwZXJmb3JtYW5jZSBvcHRpbWl6YXRpb24pXHJcbiAgcHJpdmF0ZSBfaXNPeHlnZW5BY3RpdmU6IGJvb2xlYW4gPSBmYWxzZTtcclxuICBwcml2YXRlIF9pc0luaXRpYWxpemVkOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gIGFzeW5jIG9ubG9hZCgpIHtcclxuICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XHJcblxyXG4gICAgLy8gSW5pdGlhbGl6ZSBtYW5hZ2Vyc1xyXG4gICAgdGhpcy5zdHlsZU1hbmFnZXIgPSBuZXcgU3R5bGVNYW5hZ2VySW1wbCh0aGlzKTtcclxuICAgIHRoaXMudGhlbWVNYW5hZ2VyID0gbmV3IFRoZW1lTWFuYWdlckltcGwodGhpcyk7XHJcbiAgICB0aGlzLnNldHRpbmdzU3luY01hbmFnZXIgPSBuZXcgU2V0dGluZ3NTeW5jTWFuYWdlcih0aGlzKTtcclxuXHJcbiAgICAvLyBTZXR1cCBVSVxyXG4gICAgdGhpcy5zZXR0aW5nc1RhYiA9IG5ldyBNaW5pbWFsU2V0dGluZ3NUYWIodGhpcy5hcHAsIHRoaXMpO1xyXG4gICAgdGhpcy5hZGRTZXR0aW5nVGFiKHRoaXMuc2V0dGluZ3NUYWIpO1xyXG5cclxuICAgIC8vIENhY2hlIHRoZW1lIHN0YXRlIG9uY2UgYXQgc3RhcnR1cCBmb3IgcGVyZm9ybWFuY2VcclxuICAgIHRoaXMuX2lzT3h5Z2VuQWN0aXZlID0gaXNPeHlnZW5UaGVtZUFjdGl2ZSh0aGlzLmFwcCk7XHJcblxyXG4gICAgLy8gSW5pdGlhbGl6ZSBsYXN0IHRoZW1lIG1vZGUgZm9yIGNoYW5nZSBkZXRlY3Rpb25cclxuICAgIGNvbnN0IGluaXRpYWxUaGVtZU1vZGUgPSBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucygndGhlbWUtbGlnaHQnKSA/ICdsaWdodCcgOiAnZGFyayc7XHJcblxyXG4gICAgLy8gT25seSBpbml0aWFsaXplIHN0eWxlcyBpZiBPeHlnZW4gdGhlbWUgaXMgYWN0aXZlXHJcbiAgICAvLyBOb3RlOiBpbml0aWFsaXplKCkgY2FsbHMgdXBkYXRlU3R5bGUoKSB3aGljaCBhbHNvIHVwZGF0ZXMgY3VzdG9tIHByZXNldCBDU1NcclxuICAgIGlmICh0aGlzLl9pc094eWdlbkFjdGl2ZSkge1xyXG4gICAgICB0aGlzLnN0eWxlTWFuYWdlci5pbml0aWFsaXplKCk7XHJcbiAgICAgIHRoaXMuX2lzSW5pdGlhbGl6ZWQgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuc2V0dGluZ3NTeW5jTWFuYWdlci5zZXR1cFdhdGNoZXJzKCk7XHJcblxyXG4gICAgLy8gSW5pdGlhbCBzeW5jIGZyb20gdmF1bHQgKHdpdGhvdXQgc2F2aW5nKVxyXG4gICAgdGhpcy5zZXR0aW5nc1N5bmNNYW5hZ2VyLnN5bmNGcm9tVmF1bHQodHJ1ZSk7XHJcblxyXG4gICAgLy8gU2V0dXAgc2lkZWJhciB0aGVtZSB1cGRhdGUgb24gbGF5b3V0IHJlYWR5XHJcbiAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeSgoKSA9PiB7XHJcbiAgICAgIGlmICh0aGlzLl9pc094eWdlbkFjdGl2ZSkge1xyXG4gICAgICAgIHRoaXMudGhlbWVNYW5hZ2VyLnVwZGF0ZVNpZGViYXJUaGVtZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBSZWdpc3RlciBhbGwgY29tbWFuZHNcclxuICAgIHJlZ2lzdGVyQWxsQ29tbWFuZHModGhpcyk7XHJcblxyXG4gICAgLy8gV2F0Y2ggZm9yIHRoZW1lIGNoYW5nZXMgd2l0aCBkZWJvdW5jaW5nIGZvciBwZXJmb3JtYW5jZVxyXG4gICAgLy8gY3NzLWNoYW5nZSBmaXJlcyB2ZXJ5IGZyZXF1ZW50bHksIHNvIHdlIGRlYm91bmNlIGFuZCBjYWNoZSB0aGUgdGhlbWUgc3RhdGVcclxuICAgIGxldCBkZWJvdW5jZVRpbWVyOiBudW1iZXI7XHJcbiAgICBsZXQgbGFzdFRoZW1lTW9kZTogc3RyaW5nID0gaW5pdGlhbFRoZW1lTW9kZTtcclxuXHJcbiAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoXHJcbiAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vbignY3NzLWNoYW5nZScsICgpID0+IHtcclxuICAgICAgICAvLyBEZWJvdW5jZSB0byBhdm9pZCBleGNlc3NpdmUgY2hlY2tzIChwZXJmb3JtYW5jZSBvcHRpbWl6YXRpb24pXHJcbiAgICAgICAgd2luZG93LmNsZWFyVGltZW91dChkZWJvdW5jZVRpbWVyKTtcclxuICAgICAgICBkZWJvdW5jZVRpbWVyID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgY29uc3QgbmV3VGhlbWVTdGF0ZSA9IGlzT3h5Z2VuVGhlbWVBY3RpdmUodGhpcy5hcHApO1xyXG4gICAgICAgICAgY29uc3QgY3VycmVudFRoZW1lTW9kZSA9IGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCd0aGVtZS1saWdodCcpID8gJ2xpZ2h0JyA6ICdkYXJrJztcclxuICAgICAgICAgIGNvbnN0IHRoZW1lTW9kZUNoYW5nZWQgPSBsYXN0VGhlbWVNb2RlICE9PSBudWxsICYmIGxhc3RUaGVtZU1vZGUgIT09IGN1cnJlbnRUaGVtZU1vZGU7XHJcbiAgICAgICAgICBsYXN0VGhlbWVNb2RlID0gY3VycmVudFRoZW1lTW9kZTtcclxuXHJcbiAgICAgICAgICAvLyBPbmx5IGFjdCB3aGVuIHRoZW1lIGFjdHVhbGx5IGNoYW5nZXMgKG5vdCBmcm9tIG91ciBvd24gQ1NTIHVwZGF0ZXMpXHJcbiAgICAgICAgICBpZiAodGhpcy5faXNPeHlnZW5BY3RpdmUgJiYgIW5ld1RoZW1lU3RhdGUpIHtcclxuICAgICAgICAgICAgLy8gU3dpdGNoZWQgYXdheSBmcm9tIE94eWdlbiAtIGNsZWFudXBcclxuICAgICAgICAgICAgdGhpcy5faXNPeHlnZW5BY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5faXNJbml0aWFsaXplZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLnN0eWxlTWFuYWdlci5jbGVhbnVwKCk7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLl9pc094eWdlbkFjdGl2ZSAmJiBuZXdUaGVtZVN0YXRlICYmICF0aGlzLl9pc0luaXRpYWxpemVkKSB7XHJcbiAgICAgICAgICAgIC8vIFN3aXRjaGVkIHRvIE94eWdlbiBhbmQgbm90IHlldCBpbml0aWFsaXplZCAtIGluaXRpYWxpemVcclxuICAgICAgICAgICAgdGhpcy5faXNPeHlnZW5BY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLl9pc0luaXRpYWxpemVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5zdHlsZU1hbmFnZXIuaW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9pc094eWdlbkFjdGl2ZSAmJiBuZXdUaGVtZVN0YXRlICYmIHRoaXMuX2lzSW5pdGlhbGl6ZWQgJiYgdGhlbWVNb2RlQ2hhbmdlZCkge1xyXG4gICAgICAgICAgICAvLyBTdGlsbCBvbiBPeHlnZW4sIGJ1dCB0aGVtZSBtb2RlIChsaWdodC9kYXJrKSBjaGFuZ2VkIC0gcmVmcmVzaCBzdHlsZXNcclxuICAgICAgICAgICAgdGhpcy5zdHlsZU1hbmFnZXIudXBkYXRlU3R5bGUoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LCAxMDApOyAvLyAxMDBtcyBkZWJvdW5jZVxyXG4gICAgICB9KVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIG9udW5sb2FkKCkge1xyXG4gICAgLy8gQ2xlYW51cCBtYW5hZ2Vyc1xyXG4gICAgdGhpcy50aGVtZU1hbmFnZXIuY2xlYW51cFNpZGViYXJUaGVtZSgpO1xyXG4gICAgdGhpcy5zdHlsZU1hbmFnZXIuY2xlYW51cCgpO1xyXG4gICAgdGhpcy5zZXR0aW5nc1N5bmNNYW5hZ2VyLmNsZWFudXAoKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcclxuICAgIGNvbnN0IGxvYWRlZERhdGEgPSBhd2FpdCB0aGlzLmxvYWREYXRhKCkgYXMgUGFydGlhbDxNaW5pbWFsU2V0dGluZ3M+IHwgbnVsbDtcclxuICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBsb2FkZWREYXRhKTtcclxuXHJcbiAgICBjb25zdCBtaWdyYXRpb25SdW5uZXIgPSBuZXcgTWlncmF0aW9uUnVubmVyKHRoaXMuYXBwLCB0aGlzLnNldHRpbmdzKTtcclxuICAgIGxldCBtaWdyYXRlZCA9IGF3YWl0IG1pZ3JhdGlvblJ1bm5lci5ydW4oKTtcclxuXHJcbiAgICAvLyBNaWdyYXRlIHdvcmtzcGFjZSBib3JkZXJzIHNlcGFyYXRlbHkgYXMgaXQgbmVlZHMgcmF3IGxvYWRlZERhdGFcclxuICAgIGlmIChtaWdyYXRpb25SdW5uZXIubWlncmF0ZVdvcmtzcGFjZUJvcmRlcnMobG9hZGVkRGF0YSkpIHtcclxuICAgICAgbWlncmF0ZWQgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIE1pZ3JhdGlvbiBmb3IgcmVuYW1lZCBkZWZhdWx0IHNjaGVtZXMgd2FzIG1vdmVkIHRvIE1pZ3JhdGlvblJ1bm5lci5ydW4oKVxyXG4gICAgLy8gYnV0IHRoZSBzcGVjaWZpYyBjaGVja3MgcmVtYWluIHRoZXJlLlxyXG5cclxuICAgIC8vIEVuc3VyZSBjdXN0b20gcHJlc2V0cyBhcnJheSBleGlzdHMgKGZvciBleGlzdGluZyB1c2VycylcclxuICAgIGlmICghdGhpcy5zZXR0aW5ncy5jdXN0b21QcmVzZXRzKSB7XHJcbiAgICAgIHRoaXMuc2V0dGluZ3MuY3VzdG9tUHJlc2V0cyA9IFtdO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuc2V0dGluZ3MuZW5hYmxlQ3VzdG9tUHJlc2V0cyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHRoaXMuc2V0dGluZ3MuZW5hYmxlQ3VzdG9tUHJlc2V0cyA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRW5zdXJlIGFuaW1hdGlvblBlcnNvbmFsaXR5IGlzIHNldCAocnVuIGluIE1pZ3JhdGlvblJ1bm5lci5ydW4oKSBidXQgZG91YmxlIGNoZWNrIGhlcmUpXHJcbiAgICBpZiAoIXRoaXMuc2V0dGluZ3MuYW5pbWF0aW9uUGVyc29uYWxpdHkpIHtcclxuICAgICAgdGhpcy5zZXR0aW5ncy5hbmltYXRpb25QZXJzb25hbGl0eSA9ICdkZWZhdWx0JztcclxuICAgIH1cclxuXHJcbiAgICBpZiAobWlncmF0ZWQpIHtcclxuICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcclxuICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XHJcbiAgfVxyXG5cclxuICAvLyBDb252ZW5pZW5jZSBtZXRob2RzIHRoYXQgZGVsZWdhdGUgdG8gbWFuYWdlcnNcclxuICByZWZyZXNoKCk6IHZvaWQge1xyXG4gICAgdGhpcy5zdHlsZU1hbmFnZXIucmVmcmVzaCgpO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlU3R5bGUoKTogdm9pZCB7XHJcbiAgICB0aGlzLnN0eWxlTWFuYWdlci51cGRhdGVTdHlsZSgpO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlTGlnaHRTdHlsZSgpOiB2b2lkIHtcclxuICAgIHRoaXMuc3R5bGVNYW5hZ2VyLnVwZGF0ZUxpZ2h0U3R5bGUoKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZURhcmtTdHlsZSgpOiB2b2lkIHtcclxuICAgIHRoaXMuc3R5bGVNYW5hZ2VyLnVwZGF0ZURhcmtTdHlsZSgpO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlTGlnaHRTY2hlbWUoKTogdm9pZCB7XHJcbiAgICB0aGlzLnN0eWxlTWFuYWdlci51cGRhdGVMaWdodFNjaGVtZSgpO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlRGFya1NjaGVtZSgpOiB2b2lkIHtcclxuICAgIHRoaXMuc3R5bGVNYW5hZ2VyLnVwZGF0ZURhcmtTY2hlbWUoKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZUN1c3RvbVByZXNldENTUygpOiB2b2lkIHtcclxuICAgIHRoaXMuc3R5bGVNYW5hZ2VyLnVwZGF0ZUN1c3RvbVByZXNldENTUygpO1xyXG4gIH1cclxuXHJcbiAgc2V0Rm9udFNpemUoKTogdm9pZCB7XHJcbiAgICB0aGlzLnNldHRpbmdzU3luY01hbmFnZXIuc2V0Rm9udFNpemUoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENoZWNrIGlmIHRoZSBPeHlnZW4gdGhlbWUgaXMgY3VycmVudGx5IGFjdGl2ZSAodXNlcyBjYWNoZWQgdmFsdWUgZm9yIHBlcmZvcm1hbmNlKVxyXG4gICAqIEByZXR1cm5zIHRydWUgaWYgT3h5Z2VuIHRoZW1lIGlzIGFjdGl2ZSwgZmFsc2Ugb3RoZXJ3aXNlXHJcbiAgICovXHJcbiAgaXNPeHlnZW5UaGVtZUFjdGl2ZSgpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLl9pc094eWdlbkFjdGl2ZTtcclxuICB9XHJcbn1cclxuXHJcbiIsICIvKipcclxuICogU2V0dGluZ3MgaW50ZXJmYWNlIGFuZCBkZWZhdWx0c1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IEN1c3RvbUNvbG9yUHJlc2V0IH0gZnJvbSAnLi4vcHJlc2V0cy9DdXN0b21QcmVzZXQnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBNaW5pbWFsU2V0dGluZ3Mge1xyXG4gIGxpZ2h0U3R5bGU6IHN0cmluZztcclxuICBkYXJrU3R5bGU6IHN0cmluZztcclxuICBsaWdodFNjaGVtZTogc3RyaW5nO1xyXG4gIGRhcmtTY2hlbWU6IHN0cmluZztcclxuICBlZGl0b3JGb250OiBzdHJpbmc7XHJcbiAgY29sb3JmdWxIZWFkaW5nczogYm9vbGVhbjtcclxuICBjb2xvcmZ1bEZyYW1lOiBib29sZWFuO1xyXG4gIGNvbG9yZnVsQWN0aXZlU3RhdGVzOiBib29sZWFuO1xyXG4gIHRyaW1OYW1lczogYm9vbGVhbjtcclxuICBsYWJlbGVkTmF2OiBib29sZWFuO1xyXG4gIHdvcmtzcGFjZUJvcmRlcnM6IHN0cmluZzsgIC8vICdlbmhhbmNlZCcgfCAnZGVmYXVsdCcgfCAnbm9uZSdcclxuICBsaW5lSGVpZ2h0OiBudW1iZXI7XHJcbiAgbGluZVdpZHRoOiBudW1iZXI7XHJcbiAgbGluZVdpZHRoV2lkZTogbnVtYmVyO1xyXG4gIG1heFdpZHRoOiBudW1iZXI7XHJcbiAgaW1nR3JpZDogYm9vbGVhbjtcclxuICBkZXZCbG9ja1dpZHRoOiBib29sZWFuO1xyXG4gIHRhYmxlV2lkdGg6IHN0cmluZztcclxuICBpZnJhbWVXaWR0aDogc3RyaW5nO1xyXG4gIGltZ1dpZHRoOiBzdHJpbmc7XHJcbiAgY2hhcnRXaWR0aDogc3RyaW5nO1xyXG4gIG1hcFdpZHRoOiBzdHJpbmc7XHJcbiAgZnVsbFdpZHRoTWVkaWE6IGJvb2xlYW47XHJcbiAgbWluaW1hbFN0YXR1czogYm9vbGVhbjtcclxuICB0ZXh0Tm9ybWFsOiBudW1iZXI7XHJcbiAgdGV4dFNtYWxsOiBudW1iZXI7XHJcbiAgdW5kZXJsaW5lSW50ZXJuYWw6IGJvb2xlYW47XHJcbiAgdW5kZXJsaW5lRXh0ZXJuYWw6IGJvb2xlYW47XHJcbiAgZm9sZGluZzogYm9vbGVhbjtcclxuICBsaW5lTnVtYmVyczogYm9vbGVhbjtcclxuICByZWFkYWJsZUxpbmVMZW5ndGg6IGJvb2xlYW47XHJcbiAgY3VzdG9tUHJlc2V0czogQ3VzdG9tQ29sb3JQcmVzZXRbXTtcclxuICBlbmFibGVDdXN0b21QcmVzZXRzOiBib29sZWFuO1xyXG4gIC8vIFNpZGViYXIgaW5kZW50YXRpb24gZ3VpZGVzXHJcbiAgbmF2SW5kZW50YXRpb25HdWlkZVdpZHRoOiBzdHJpbmc7ICAvLyAnMHB4JyB8ICcxcHgnIHwgJzJweCcgfCAnM3B4J1xyXG4gIG5hdkluZGVudGF0aW9uR3VpZGVDb2xvcjogc3RyaW5nOyAgIC8vICd2YXIoLS11aTEpJyB8ICd2YXIoLS10ZXh0LWZhaW50KScgfCAndmFyKC0tdGV4dC1hY2NlbnQpJ1xyXG4gIC8vIEFuaW1hdGlvbiBzZXR0aW5nc1xyXG4gIGFuaW1hdGlvblBlcnNvbmFsaXR5OiAnZGVmYXVsdCcgfCAncGxheWZ1bCcgfCAnb2ZmJztcclxuICBhbmltYXRpb25TcGVlZDogbnVtYmVyOyAvLyAwLTIsIGRlZmF1bHQgMVxyXG4gIC8vIEJsdXIgYmFja2dyb3VuZFxyXG4gIGVuYWJsZUJsdXI6IGJvb2xlYW47XHJcbiAgLy8gRm9sZGVyIGljb25cclxuICB1c2VEZWZhdWx0Rm9sZGVySWNvbjogYm9vbGVhbjtcclxuICAvLyBNaWdyYXRpb24gdHJhY2tpbmcgKGludGVybmFsIHVzZSlcclxuICBfbWlncmF0aW9uVmVyc2lvbnM/OiBzdHJpbmdbXTtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IE1pbmltYWxTZXR0aW5ncyA9IHtcclxuICBsaWdodFN0eWxlOiAnb3h5Z2VuLWxpZ2h0JyxcclxuICBkYXJrU3R5bGU6ICdveHlnZW4tZGFyaycsXHJcbiAgbGlnaHRTY2hlbWU6ICdveHlnZW4tb3h5Z2VuLWxpZ2h0JyxcclxuICBkYXJrU2NoZW1lOiAnb3h5Z2VuLW94eWdlbi1kYXJrJyxcclxuICBlZGl0b3JGb250OiAnJyxcclxuICBsaW5lSGVpZ2h0OiAxLjUsXHJcbiAgbGluZVdpZHRoOiA0MCxcclxuICBsaW5lV2lkdGhXaWRlOiA1MCxcclxuICBtYXhXaWR0aDogODgsXHJcbiAgdGV4dE5vcm1hbDogMTYsXHJcbiAgdGV4dFNtYWxsOiAxMyxcclxuICBpbWdHcmlkOiBmYWxzZSxcclxuICBpbWdXaWR0aDogJ2ltZy1kZWZhdWx0LXdpZHRoJyxcclxuICB0YWJsZVdpZHRoOiAndGFibGUtZGVmYXVsdC13aWR0aCcsXHJcbiAgaWZyYW1lV2lkdGg6ICdpZnJhbWUtZGVmYXVsdC13aWR0aCcsXHJcbiAgbWFwV2lkdGg6ICdtYXAtZGVmYXVsdC13aWR0aCcsXHJcbiAgY2hhcnRXaWR0aDogJ2NoYXJ0LWRlZmF1bHQtd2lkdGgnLFxyXG4gIGNvbG9yZnVsSGVhZGluZ3M6IGZhbHNlLFxyXG4gIGNvbG9yZnVsRnJhbWU6IGZhbHNlLFxyXG4gIGNvbG9yZnVsQWN0aXZlU3RhdGVzOiBmYWxzZSxcclxuICB0cmltTmFtZXM6IHRydWUsXHJcbiAgbGFiZWxlZE5hdjogZmFsc2UsXHJcbiAgZnVsbFdpZHRoTWVkaWE6IHRydWUsXHJcbiAgd29ya3NwYWNlQm9yZGVyczogJ2VuaGFuY2VkJyxcclxuICBtaW5pbWFsU3RhdHVzOiB0cnVlLFxyXG4gIHVuZGVybGluZUludGVybmFsOiB0cnVlLFxyXG4gIHVuZGVybGluZUV4dGVybmFsOiB0cnVlLFxyXG4gIGZvbGRpbmc6IHRydWUsXHJcbiAgbGluZU51bWJlcnM6IGZhbHNlLFxyXG4gIHJlYWRhYmxlTGluZUxlbmd0aDogZmFsc2UsXHJcbiAgZGV2QmxvY2tXaWR0aDogZmFsc2UsXHJcbiAgY3VzdG9tUHJlc2V0czogW10sXHJcbiAgZW5hYmxlQ3VzdG9tUHJlc2V0czogdHJ1ZSxcclxuICAvLyBTaWRlYmFyIGluZGVudGF0aW9uIGd1aWRlc1xyXG4gIG5hdkluZGVudGF0aW9uR3VpZGVXaWR0aDogJzBweCcsXHJcbiAgbmF2SW5kZW50YXRpb25HdWlkZUNvbG9yOiAncmdiYSh2YXIoLS1tb25vLXJnYi0xMDApLCAwLjEyKScsXHJcbiAgLy8gQW5pbWF0aW9uIHNldHRpbmdzXHJcbiAgYW5pbWF0aW9uUGVyc29uYWxpdHk6ICdkZWZhdWx0JyxcclxuICBhbmltYXRpb25TcGVlZDogMSxcclxuICAvLyBCbHVyIGJhY2tncm91bmRcclxuICBlbmFibGVCbHVyOiBmYWxzZSxcclxuICAvLyBGb2xkZXIgaWNvblxyXG4gIHVzZURlZmF1bHRGb2xkZXJJY29uOiBmYWxzZSxcclxufTtcclxuXHJcbiIsICIvKipcclxuICogU2V0dGluZ3MgVGFiIC0gUmVmYWN0b3JlZFxyXG4gKiBDb29yZGluYXRlcyBhbGwgc2V0dGluZ3Mgc2VjdGlvbnNcclxuICovXHJcblxyXG5pbXBvcnQgeyBQbHVnaW5TZXR0aW5nVGFiLCBBcHAgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCBNaW5pbWFsVGhlbWUgZnJvbSBcIi4vbWFpblwiO1xyXG5pbXBvcnQgeyBidWlsZENvbG9yU2NoZW1lU2V0dGluZ3MgfSBmcm9tICcuL3NldHRpbmdzL3NlY3Rpb25zL0NvbG9yU2NoZW1lU2V0dGluZ3MnO1xyXG5pbXBvcnQgeyBidWlsZEZlYXR1cmVTZXR0aW5ncyB9IGZyb20gJy4vc2V0dGluZ3Mvc2VjdGlvbnMvRmVhdHVyZVNldHRpbmdzJztcclxuaW1wb3J0IHsgYnVpbGRMYXlvdXRTZXR0aW5ncyB9IGZyb20gJy4vc2V0dGluZ3Mvc2VjdGlvbnMvTGF5b3V0U2V0dGluZ3MnO1xyXG5pbXBvcnQgeyBidWlsZFR5cG9ncmFwaHlTZXR0aW5ncyB9IGZyb20gJy4vc2V0dGluZ3Mvc2VjdGlvbnMvVHlwb2dyYXBoeVNldHRpbmdzJztcclxuaW1wb3J0IHsgYnVpbGRDdXN0b21QcmVzZXRTZXR0aW5ncyB9IGZyb20gJy4vc2V0dGluZ3Mvc2VjdGlvbnMvQ3VzdG9tUHJlc2V0U2V0dGluZ3MnO1xyXG5pbXBvcnQgeyBidWlsZEFuaW1hdGlvblNldHRpbmdzIH0gZnJvbSAnLi9zZXR0aW5ncy9zZWN0aW9ucy9BbmltYXRpb25TZXR0aW5ncyc7XHJcblxyXG4vLyBSZS1leHBvcnQgZnJvbSBzZXR0aW5ncy1pbnRlcmZhY2UgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcclxuZXhwb3J0IHR5cGUgeyBNaW5pbWFsU2V0dGluZ3MgfSBmcm9tICcuL3NldHRpbmdzL3NldHRpbmdzLWludGVyZmFjZSc7XHJcbmV4cG9ydCB7IERFRkFVTFRfU0VUVElOR1MgfSBmcm9tICcuL3NldHRpbmdzL3NldHRpbmdzLWludGVyZmFjZSc7XHJcblxyXG5leHBvcnQgY2xhc3MgTWluaW1hbFNldHRpbmdzVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XHJcbiAgcGx1Z2luOiBNaW5pbWFsVGhlbWU7XHJcbiAgcHVibGljIGljb24gPSAnbHVjaWRlLXN3YXRjaC1ib29rJztcclxuXHJcbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogTWluaW1hbFRoZW1lKSB7XHJcbiAgICBzdXBlcihhcHAsIHBsdWdpbik7XHJcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuICB9XHJcblxyXG4gIGRpc3BsYXkoKTogdm9pZCB7XHJcbiAgICBjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xyXG4gICAgY29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHJcbiAgICAvLyBCdWlsZCBhbGwgc2V0dGluZ3Mgc2VjdGlvbnNcclxuICAgIGJ1aWxkQ29sb3JTY2hlbWVTZXR0aW5ncyhjb250YWluZXJFbCwgdGhpcy5wbHVnaW4pO1xyXG4gICAgYnVpbGRDdXN0b21QcmVzZXRTZXR0aW5ncyhjb250YWluZXJFbCwgdGhpcy5wbHVnaW4sIHRoaXMuYXBwLCAoKSA9PiB0aGlzLmRpc3BsYXkoKSk7XHJcbiAgICBidWlsZEZlYXR1cmVTZXR0aW5ncyhjb250YWluZXJFbCwgdGhpcy5wbHVnaW4pO1xyXG4gICAgYnVpbGRBbmltYXRpb25TZXR0aW5ncyhjb250YWluZXJFbCwgdGhpcy5wbHVnaW4pO1xyXG4gICAgYnVpbGRMYXlvdXRTZXR0aW5ncyhjb250YWluZXJFbCwgdGhpcy5wbHVnaW4pO1xyXG4gICAgYnVpbGRUeXBvZ3JhcGh5U2V0dGluZ3MoY29udGFpbmVyRWwsIHRoaXMucGx1Z2luKTtcclxuICB9XHJcbn1cclxuXHJcbiIsICIvKipcclxuICogQ29tcGF0aWJpbGl0eSB1dGlsaXRpZXMgZm9yIHNldHRpbmdzXHJcbiAqIFByb3ZpZGVzIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkgZm9yIFNldHRpbmdHcm91cCAocmVxdWlyZXMgQVBJIDEuMTEuMCspXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgU2V0dGluZywgU2V0dGluZ0dyb3VwLCByZXF1aXJlQXBpVmVyc2lvbiB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbi8qKlxyXG4gKiBJbnRlcmZhY2UgdGhhdCB3b3JrcyB3aXRoIGJvdGggU2V0dGluZ0dyb3VwIGFuZCBmYWxsYmFjayBjb250YWluZXJcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgU2V0dGluZ3NDb250YWluZXIge1xyXG4gIGFkZFNldHRpbmcoY2I6IChzZXR0aW5nOiBTZXR0aW5nKSA9PiB2b2lkKTogdm9pZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZXMgYSBzZXR0aW5ncyBjb250YWluZXIgdGhhdCB1c2VzIFNldHRpbmdHcm91cCBpZiBhdmFpbGFibGUgKEFQSSAxLjExLjArKSxcclxuICogb3RoZXJ3aXNlIGZhbGxzIGJhY2sgdG8gY3JlYXRpbmcgYSBoZWFkaW5nIGFuZCB1c2luZyB0aGUgY29udGFpbmVyIGRpcmVjdGx5LlxyXG4gKiBcclxuICogVXNlcyByZXF1aXJlQXBpVmVyc2lvbignMS4xMS4wJykgdG8gY2hlY2sgaWYgU2V0dGluZ0dyb3VwIGlzIGF2YWlsYWJsZS5cclxuICogVGhpcyBpcyB0aGUgb2ZmaWNpYWwgT2JzaWRpYW4gQVBJIG1ldGhvZCBmb3IgdmVyc2lvbiBjaGVja2luZy5cclxuICogXHJcbiAqIEBwYXJhbSBjb250YWluZXJFbCAtIFRoZSBjb250YWluZXIgZWxlbWVudCBmb3Igc2V0dGluZ3NcclxuICogQHBhcmFtIGhlYWRpbmcgLSBUaGUgaGVhZGluZyB0ZXh0IGZvciB0aGUgc2V0dGluZ3MgZ3JvdXBcclxuICogQHBhcmFtIG1hbmlmZXN0SWQgLSBUaGUgcGx1Z2luJ3MgbWFuaWZlc3QgSUQgZm9yIENTUyBzY29waW5nIChyZXF1aXJlZCBmb3IgZmFsbGJhY2sgbW9kZSlcclxuICogQHJldHVybnMgQSBjb250YWluZXIgdGhhdCBjYW4gYmUgdXNlZCB0byBhZGQgc2V0dGluZ3NcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTZXR0aW5nc0dyb3VwKFxyXG4gIGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCxcclxuICBoZWFkaW5nOiBzdHJpbmcsXHJcbiAgbWFuaWZlc3RJZD86IHN0cmluZ1xyXG4pOiBTZXR0aW5nc0NvbnRhaW5lciB7XHJcbiAgLy8gQ2hlY2sgaWYgU2V0dGluZ0dyb3VwIGlzIGF2YWlsYWJsZSAoQVBJIDEuMTEuMCspXHJcbiAgLy8gcmVxdWlyZUFwaVZlcnNpb24gaXMgdGhlIG9mZmljaWFsIE9ic2lkaWFuIEFQSSBtZXRob2QgZm9yIHZlcnNpb24gY2hlY2tpbmdcclxuICBpZiAocmVxdWlyZUFwaVZlcnNpb24oJzEuMTEuMCcpKSB7XHJcbiAgICAvLyBVc2UgU2V0dGluZ0dyb3VwIC0gaXQncyBndWFyYW50ZWVkIHRvIGV4aXN0IGlmIHJlcXVpcmVBcGlWZXJzaW9uIHJldHVybnMgdHJ1ZVxyXG4gICAgY29uc3QgZ3JvdXAgPSBuZXcgU2V0dGluZ0dyb3VwKGNvbnRhaW5lckVsKS5zZXRIZWFkaW5nKGhlYWRpbmcpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgYWRkU2V0dGluZyhjYjogKHNldHRpbmc6IFNldHRpbmcpID0+IHZvaWQpIHtcclxuICAgICAgICBncm91cC5hZGRTZXR0aW5nKGNiKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9IGVsc2Uge1xyXG4gICAgLy8gRmFsbGJhY2sgcGF0aCAoZWl0aGVyIEFQSSA8IDEuMTEuMCBvciBTZXR0aW5nR3JvdXAgbm90IGZvdW5kKVxyXG4gICAgLy8gQWRkIHNjb3BpbmcgY2xhc3MgdG8gY29udGFpbmVyRWwgdG8gc2NvcGUgQ1NTIHRvIG9ubHkgdGhpcyBwbHVnaW4ncyBzZXR0aW5nc1xyXG4gICAgaWYgKG1hbmlmZXN0SWQpIHtcclxuICAgICAgY29udGFpbmVyRWwuYWRkQ2xhc3MoYCR7bWFuaWZlc3RJZH0tc2V0dGluZ3MtY29tcGF0YCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIEZhbGxiYWNrOiBDcmVhdGUgYSBoZWFkaW5nIG1hbnVhbGx5IGFuZCB1c2UgY29udGFpbmVyIGRpcmVjdGx5XHJcbiAgICBjb25zdCBoZWFkaW5nRWwgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoJ3NldHRpbmctZ3JvdXAtaGVhZGluZycpO1xyXG4gICAgaGVhZGluZ0VsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogaGVhZGluZyB9KTtcclxuICAgIFxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgYWRkU2V0dGluZyhjYjogKHNldHRpbmc6IFNldHRpbmcpID0+IHZvaWQpIHtcclxuICAgICAgICBjb25zdCBzZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpO1xyXG4gICAgICAgIGNiKHNldHRpbmcpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH1cclxufVxyXG5cclxuIiwgIi8qKlxuICogVHlwZSBleHRlbnNpb25zIGZvciBPYnNpZGlhbiBpbnRlcm5hbCBBUElzXG4gKiBUaGVzZSBhcmUgbm90IHBhcnQgb2YgdGhlIHB1YmxpYyBBUEkgYnV0IGFyZSBjb21tb25seSB1c2VkXG4gKi9cblxuaW1wb3J0IHsgQXBwIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG4vKipcbiAqIEV4dGVuZGVkIEFwcCBpbnRlcmZhY2Ugd2l0aCBpbnRlcm5hbCB2YXVsdCBtZXRob2RzXG4gKiBVc2VzIGludGVyc2VjdGlvbiB0eXBlIHRvIGFkZCBtZXRob2RzIHdpdGhvdXQgY29uZmxpY3Rpbmcgd2l0aCBleGlzdGluZyBWYXVsdCB0eXBlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRXh0ZW5kZWRBcHAgZXh0ZW5kcyBPbWl0PEFwcCwgJ3ZhdWx0JyB8ICdzZXRUaGVtZScgfCAndXBkYXRlRm9udFNpemUnPiB7XG4gIHZhdWx0OiBBcHBbJ3ZhdWx0J10gJiB7XG4gICAgZ2V0Q29uZmlnKGtleTogc3RyaW5nKTogdW5rbm93bjtcbiAgICBzZXRDb25maWcoa2V5OiBzdHJpbmcsIHZhbHVlOiB1bmtub3duKTogdm9pZDtcbiAgICBvbihldmVudDogJ2NvbmZpZy1jaGFuZ2VkJywgY2FsbGJhY2s6ICgpID0+IHZvaWQpOiB7IG9mZjogKCkgPT4gdm9pZCB9O1xuICB9O1xuICBzZXRUaGVtZSh0aGVtZTogc3RyaW5nKTogdm9pZDtcbiAgdXBkYXRlRm9udFNpemUoKTogdm9pZDtcbn1cblxuLyoqXG4gKiBUeXBlIGd1YXJkIHRvIGNoZWNrIGlmIGFwcCBoYXMgZXh0ZW5kZWQgbWV0aG9kc1xuICovXG5leHBvcnQgZnVuY3Rpb24gaGFzRXh0ZW5kZWRBcHAoYXBwOiBBcHApOiBhcHAgaXMgRXh0ZW5kZWRBcHAge1xuICBjb25zdCBleHRBcHAgPSBhcHAgYXMgdW5rbm93biBhcyBFeHRlbmRlZEFwcDtcbiAgcmV0dXJuIChcbiAgICB0eXBlb2YgZXh0QXBwLnZhdWx0Py5nZXRDb25maWcgPT09ICdmdW5jdGlvbicgJiZcbiAgICB0eXBlb2YgZXh0QXBwLnNldFRoZW1lID09PSAnZnVuY3Rpb24nXG4gICk7XG59XG5cbi8qKlxuICogU2FmZWx5IGFjY2VzcyB2YXVsdCBjb25maWdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFZhdWx0Q29uZmlnKGFwcDogQXBwLCBrZXk6IHN0cmluZyk6IHVua25vd24ge1xuICBjb25zdCBleHRBcHAgPSBhcHAgYXMgdW5rbm93biBhcyBFeHRlbmRlZEFwcDtcbiAgcmV0dXJuIGV4dEFwcC52YXVsdC5nZXRDb25maWcoa2V5KTtcbn1cblxuLyoqXG4gKiBTYWZlbHkgc2V0IHZhdWx0IGNvbmZpZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0VmF1bHRDb25maWcoYXBwOiBBcHAsIGtleTogc3RyaW5nLCB2YWx1ZTogdW5rbm93bik6IHZvaWQge1xuICBjb25zdCBleHRBcHAgPSBhcHAgYXMgdW5rbm93biBhcyBFeHRlbmRlZEFwcDtcbiAgZXh0QXBwLnZhdWx0LnNldENvbmZpZyhrZXksIHZhbHVlKTtcbn1cblxuLyoqXG4gKiBTYWZlbHkgc2V0IHRoZW1lXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRUaGVtZShhcHA6IEFwcCwgdGhlbWU6IHN0cmluZyk6IHZvaWQge1xuICBjb25zdCBleHRBcHAgPSBhcHAgYXMgdW5rbm93biBhcyBFeHRlbmRlZEFwcDtcbiAgZXh0QXBwLnNldFRoZW1lKHRoZW1lKTtcbn1cblxuLyoqXG4gKiBTYWZlbHkgcmVnaXN0ZXIgdmF1bHQgZXZlbnQgbGlzdGVuZXJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG9uVmF1bHRDb25maWdDaGFuZ2VkKGFwcDogQXBwLCBjYWxsYmFjazogKCkgPT4gdm9pZCk6IHsgb2ZmOiAoKSA9PiB2b2lkIH0ge1xuICBjb25zdCBleHRBcHAgPSBhcHAgYXMgdW5rbm93biBhcyBFeHRlbmRlZEFwcDtcbiAgcmV0dXJuIGV4dEFwcC52YXVsdC5vbignY29uZmlnLWNoYW5nZWQnLCBjYWxsYmFjayk7XG59XG5cbi8qKlxuICogU2FmZWx5IHVwZGF0ZSBmb250IHNpemVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUZvbnRTaXplKGFwcDogQXBwKTogdm9pZCB7XG4gIGNvbnN0IGV4dEFwcCA9IGFwcCBhcyB1bmtub3duIGFzIEV4dGVuZGVkQXBwO1xuICBpZiAodHlwZW9mIGV4dEFwcC51cGRhdGVGb250U2l6ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGV4dEFwcC51cGRhdGVGb250U2l6ZSgpO1xuICB9XG59XG5cbiIsICIvKipcbiAqIENlbnRyYWwgY29uc3RhbnRzIGZvciB0aGUgT3h5Z2VuIFNldHRpbmdzIHBsdWdpblxuICogRWxpbWluYXRlcyBtYWdpYyBzdHJpbmdzIGFuZCBwcm92aWRlcyBzaW5nbGUgc291cmNlIG9mIHRydXRoXG4gKi9cblxuLy8gUGx1Z2luIGlkZW50aWZpY2F0aW9uXG5leHBvcnQgY29uc3QgUExVR0lOX0lEID0gJ294eWdlbi1zZXR0aW5ncyc7XG5leHBvcnQgY29uc3QgUExVR0lOX05BTUUgPSAnT3h5Z2VuIFRoZW1lIFNldHRpbmdzJztcblxuLy8gQ1NTIGNsYXNzIG5hbWVzXG5leHBvcnQgY29uc3QgQ1NTX0NMQVNTRVMgPSB7XG4gIFBMVUdJTl9USEVNRTogJ294eWdlbi10aGVtZScsXG4gIFRIRU1FX0xJR0hUOiAndGhlbWUtbGlnaHQnLFxuICBUSEVNRV9EQVJLOiAndGhlbWUtZGFyaycsXG4gIENVU1RPTV9QUkVTRVRTX1NUWUxFOiAnb3h5Z2VuLWN1c3RvbS1wcmVzZXRzJyxcbiAgVEhFTUVfT1ZFUlJJREU6ICdkYXRhLXRoZW1lLW92ZXJyaWRlJyxcbn0gYXMgY29uc3Q7XG5cbi8vIExpZ2h0IG1vZGUgc3R5bGVzXG5leHBvcnQgY29uc3QgTElHSFRfU1RZTEVTID0gW1xuICAnb3h5Z2VuLWxpZ2h0JyxcbiAgJ294eWdlbi1saWdodC10b25hbCcsXG4gICdveHlnZW4tbGlnaHQtY29udHJhc3QnLFxuICAnb3h5Z2VuLWxpZ2h0LXdoaXRlJ1xuXSBhcyBjb25zdDtcblxuLy8gRGFyayBtb2RlIHN0eWxlc1xuZXhwb3J0IGNvbnN0IERBUktfU1RZTEVTID0gW1xuICAnb3h5Z2VuLWRhcmsnLFxuICAnb3h5Z2VuLWRhcmstdG9uYWwnLFxuICAnb3h5Z2VuLWRhcmstYmxhY2snXG5dIGFzIGNvbnN0O1xuXG4vLyBMaWdodCBjb2xvciBzY2hlbWVzIChidWlsdC1pbilcbmV4cG9ydCBjb25zdCBMSUdIVF9TQ0hFTUVTID0gW1xuICAnb3h5Z2VuLW94eWdlbi1saWdodCcsXG4gICdveHlnZW4tbWluaW1hbC1saWdodCcsXG4gICdveHlnZW4tYXRvbS1saWdodCcsXG4gICdveHlnZW4tYXl1LWxpZ2h0JyxcbiAgJ294eWdlbi1jYXRwcHVjY2luLWxpZ2h0JyxcbiAgJ294eWdlbi1laW5rLWxpZ2h0JyxcbiAgJ294eWdlbi1ldmVyZm9yZXN0LWxpZ2h0JyxcbiAgJ294eWdlbi1mbGV4b2tpLWxpZ2h0JyxcbiAgJ294eWdlbi1ncnV2Ym94LWxpZ2h0JyxcbiAgJ294eWdlbi1tYWNvcy1saWdodCcsXG4gICdveHlnZW4tbm9yZC1saWdodCcsXG4gICdveHlnZW4tcm9zZS1waW5lLWxpZ2h0JyxcbiAgJ294eWdlbi1ub3Rpb24tbGlnaHQnLFxuICAnb3h5Z2VuLXNvbGFyaXplZC1saWdodCcsXG4gICdveHlnZW4tdGhpbmdzLWxpZ2h0J1xuXSBhcyBjb25zdDtcblxuLy8gRGFyayBjb2xvciBzY2hlbWVzIChidWlsdC1pbilcbmV4cG9ydCBjb25zdCBEQVJLX1NDSEVNRVMgPSBbXG4gICdveHlnZW4tb3h5Z2VuLWRhcmsnLFxuICAnb3h5Z2VuLW1pbmltYWwtZGFyaycsXG4gICdveHlnZW4tYXRvbS1kYXJrJyxcbiAgJ294eWdlbi1heXUtZGFyaycsXG4gICdveHlnZW4tY2F0cHB1Y2Npbi1kYXJrJyxcbiAgJ294eWdlbi1kcmFjdWxhLWRhcmsnLFxuICAnb3h5Z2VuLWVpbmstZGFyaycsXG4gICdveHlnZW4tZXZlcmZvcmVzdC1kYXJrJyxcbiAgJ294eWdlbi1mbGV4b2tpLWRhcmsnLFxuICAnb3h5Z2VuLWdydXZib3gtZGFyaycsXG4gICdveHlnZW4tbWFjb3MtZGFyaycsXG4gICdveHlnZW4tbm9yZC1kYXJrJyxcbiAgJ294eWdlbi1yb3NlLXBpbmUtZGFyaycsXG4gICdveHlnZW4tbm90aW9uLWRhcmsnLFxuICAnb3h5Z2VuLXNvbGFyaXplZC1kYXJrJyxcbiAgJ294eWdlbi10aGluZ3MtZGFyaydcbl0gYXMgY29uc3Q7XG5cbi8vIEltYWdlIGdyaWQgc3R5bGVzXG5leHBvcnQgY29uc3QgSU1BR0VfR1JJRF9TVFlMRVMgPSBbXG4gICdpbWctZ3JpZCcsXG4gICdpbWctZ3JpZC1yYXRpbycsXG4gICdpbWctbm9ncmlkJ1xuXSBhcyBjb25zdDtcblxuLy8gV2lkdGggc3R5bGUgb3B0aW9uc1xuZXhwb3J0IGNvbnN0IFRBQkxFX1dJRFRIX1NUWUxFUyA9IFtcbiAgJ3RhYmxlLTEwMCcsXG4gICd0YWJsZS1kZWZhdWx0LXdpZHRoJyxcbiAgJ3RhYmxlLXdpZGUnLFxuICAndGFibGUtbWF4J1xuXSBhcyBjb25zdDtcblxuZXhwb3J0IGNvbnN0IElGUkFNRV9XSURUSF9TVFlMRVMgPSBbXG4gICdpZnJhbWUtMTAwJyxcbiAgJ2lmcmFtZS1kZWZhdWx0LXdpZHRoJyxcbiAgJ2lmcmFtZS13aWRlJyxcbiAgJ2lmcmFtZS1tYXgnXG5dIGFzIGNvbnN0O1xuXG5leHBvcnQgY29uc3QgSU1BR0VfV0lEVEhfU1RZTEVTID0gW1xuICAnaW1nLTEwMCcsXG4gICdpbWctZGVmYXVsdC13aWR0aCcsXG4gICdpbWctd2lkZScsXG4gICdpbWctbWF4J1xuXSBhcyBjb25zdDtcblxuZXhwb3J0IGNvbnN0IE1BUF9XSURUSF9TVFlMRVMgPSBbXG4gICdtYXAtMTAwJyxcbiAgJ21hcC1kZWZhdWx0LXdpZHRoJyxcbiAgJ21hcC13aWRlJyxcbiAgJ21hcC1tYXgnXG5dIGFzIGNvbnN0O1xuXG5leHBvcnQgY29uc3QgQ0hBUlRfV0lEVEhfU1RZTEVTID0gW1xuICAnY2hhcnQtMTAwJyxcbiAgJ2NoYXJ0LWRlZmF1bHQtd2lkdGgnLFxuICAnY2hhcnQtd2lkZScsXG4gICdjaGFydC1tYXgnXG5dIGFzIGNvbnN0O1xuXG4vLyBDb21tYW5kIElEc1xuZXhwb3J0IGNvbnN0IENPTU1BTkRfSURTID0ge1xuICAvLyBGb250IGNvbW1hbmRzXG4gIElOQ1JFQVNFX0ZPTlQ6ICdpbmNyZWFzZS1ib2R5LWZvbnQtc2l6ZScsXG4gIERFQ1JFQVNFX0ZPTlQ6ICdkZWNyZWFzZS1ib2R5LWZvbnQtc2l6ZScsXG4gIFxuICAvLyBTdHlsZSBjeWNsaW5nIGNvbW1hbmRzXG4gIENZQ0xFX0RBUktfU1RZTEU6ICd0b2dnbGUtbWluaW1hbC1kYXJrLWN5Y2xlJyxcbiAgQ1lDTEVfTElHSFRfU1RZTEU6ICd0b2dnbGUtbWluaW1hbC1saWdodC1jeWNsZScsXG4gIFxuICAvLyBGZWF0dXJlIHRvZ2dsZSBjb21tYW5kc1xuICBUT0dHTEVfQk9SREVSUzogJ3RvZ2dsZS1oaWRkZW4tYm9yZGVycycsXG4gIFRPR0dMRV9DT0xPUkZVTF9IRUFESU5HUzogJ3RvZ2dsZS1jb2xvcmZ1bC1oZWFkaW5ncycsXG4gIFRPR0dMRV9DT0xPUkZVTF9GUkFNRTogJ3RvZ2dsZS1taW5pbWFsLWNvbG9yZnVsLWZyYW1lJyxcbiAgVE9HR0xFX0lNQUdFX0dSSUQ6ICd0b2dnbGUtbWluaW1hbC1pbWctZ3JpZCcsXG4gIFRPR0dMRV9USEVNRTogJ3RvZ2dsZS1taW5pbWFsLXN3aXRjaCcsXG4gIFxuICAvLyBXaWR0aCBjeWNsaW5nIGNvbW1hbmRzXG4gIENZQ0xFX1RBQkxFX1dJRFRIOiAnY3ljbGUtbWluaW1hbC10YWJsZS13aWR0aCcsXG4gIENZQ0xFX0lNQUdFX1dJRFRIOiAnY3ljbGUtbWluaW1hbC1pbWFnZS13aWR0aCcsXG4gIENZQ0xFX0lGUkFNRV9XSURUSDogJ2N5Y2xlLW1pbmltYWwtaWZyYW1lLXdpZHRoJyxcbiAgQ1lDTEVfQ0hBUlRfV0lEVEg6ICdjeWNsZS1taW5pbWFsLWNoYXJ0LXdpZHRoJyxcbiAgQ1lDTEVfTUFQX1dJRFRIOiAnY3ljbGUtbWluaW1hbC1tYXAtd2lkdGgnLFxuICBcbiAgLy8gTGlnaHQgc3R5bGUgY29tbWFuZHNcbiAgTElHSFRfREVGQVVMVDogJ3RvZ2dsZS1taW5pbWFsLWxpZ2h0LWRlZmF1bHQnLFxuICBMSUdIVF9XSElURTogJ3RvZ2dsZS1taW5pbWFsLWxpZ2h0LXdoaXRlJyxcbiAgTElHSFRfVE9OQUw6ICd0b2dnbGUtbWluaW1hbC1saWdodC10b25hbCcsXG4gIExJR0hUX0NPTlRSQVNUOiAndG9nZ2xlLW1pbmltYWwtbGlnaHQtY29udHJhc3QnLFxuICBcbiAgLy8gRGFyayBzdHlsZSBjb21tYW5kc1xuICBEQVJLX0RFRkFVTFQ6ICd0b2dnbGUtbWluaW1hbC1kYXJrLWRlZmF1bHQnLFxuICBEQVJLX1RPTkFMOiAndG9nZ2xlLW1pbmltYWwtZGFyay10b25hbCcsXG4gIERBUktfQkxBQ0s6ICd0b2dnbGUtbWluaW1hbC1kYXJrLWJsYWNrJyxcbiAgXG4gIC8vIEN1c3RvbSBwcmVzZXQgY29tbWFuZHNcbiAgQ1JFQVRFX1BSRVNFVDogJ2NyZWF0ZS1jdXN0b20tcHJlc2V0JyxcbiAgSU1QT1JUX1BSRVNFVDogJ2ltcG9ydC1jdXN0b20tcHJlc2V0JyxcbiAgQ1lDTEVfUFJFU0VUU19MSUdIVDogJ2N5Y2xlLWN1c3RvbS1wcmVzZXRzLWxpZ2h0JyxcbiAgQ1lDTEVfUFJFU0VUU19EQVJLOiAnY3ljbGUtY3VzdG9tLXByZXNldHMtZGFyaycsXG4gIFxuICAvLyBEZXYgY29tbWFuZHNcbiAgREVWX0JMT0NLX1dJRFRIOiAndG9nZ2xlLW1pbmltYWwtZGV2LWJsb2NrLXdpZHRoJyxcbiAgXG4gIC8vIFNldHRpbmdzIGNvbW1hbmRcbiAgT1BFTl9TRVRUSU5HUzogJ294eWdlbi1zZXR0aW5nczpvcGVuLXNldHRpbmdzJyxcbn0gYXMgY29uc3Q7XG5cbi8vIFNjaGVtZSBjb21tYW5kIElEIHByZWZpeGVzXG5leHBvcnQgY29uc3QgU0NIRU1FX0NPTU1BTkRfUFJFRklYID0ge1xuICBMSUdIVDogJ3RvZ2dsZS1taW5pbWFsLScsXG4gIERBUks6ICd0b2dnbGUtbWluaW1hbC0nLFxufSBhcyBjb25zdDtcblxuLy8gRGVmYXVsdCB2YWx1ZXNcbmV4cG9ydCBjb25zdCBERUZBVUxUUyA9IHtcbiAgRk9OVF9TSVpFX05PUk1BTDogMTYsXG4gIEZPTlRfU0laRV9TTUFMTDogMTMsXG4gIExJTkVfSEVJR0hUOiAxLjUsXG4gIExJTkVfV0lEVEg6IDQwLFxuICBMSU5FX1dJRFRIX1dJREU6IDUwLFxuICBNQVhfV0lEVEg6IDg4LFxuICBGT05UX1NURVA6IDAuNSxcbn0gYXMgY29uc3Q7XG5cbi8vIE9ic2lkaWFuIHZhdWx0IGNvbmZpZyBrZXlzXG5leHBvcnQgY29uc3QgVkFVTFRfQ09ORklHID0ge1xuICBCQVNFX0ZPTlRfU0laRTogJ2Jhc2VGb250U2l6ZScsXG4gIEZPTERfSEVBRElORzogJ2ZvbGRIZWFkaW5nJyxcbiAgU0hPV19MSU5FX05VTUJFUjogJ3Nob3dMaW5lTnVtYmVyJyxcbiAgUkVBREFCTEVfTElORV9MRU5HVEg6ICdyZWFkYWJsZUxpbmVMZW5ndGgnLFxuICBUSEVNRTogJ3RoZW1lJyxcbn0gYXMgY29uc3Q7XG5cbi8vIE9ic2lkaWFuIHRoZW1lIG5hbWVzXG5leHBvcnQgY29uc3QgT0JTSURJQU5fVEhFTUVTID0ge1xuICBMSUdIVDogJ21vb25zdG9uZScsXG4gIERBUks6ICdvYnNpZGlhbicsXG4gIFNZU1RFTTogJ3N5c3RlbScsXG59IGFzIGNvbnN0O1xuXG4vLyBPeHlnZW4gdGhlbWUgbmFtZSBmb3IgZGV0ZWN0aW9uXG5leHBvcnQgY29uc3QgT1hZR0VOX1RIRU1FX05BTUUgPSAnT3h5Z2VuJztcblxuLy8gQ3VzdG9tIHByZXNldCBwcmVmaXhcbmV4cG9ydCBjb25zdCBDVVNUT01fUFJFU0VUX1BSRUZJWCA9ICdveHlnZW4tY3VzdG9tLSc7XG5cblxuLy8gU2NoZW1lIGRpc3BsYXkgbmFtZXMgZm9yIGRyb3Bkb3duc1xuZXhwb3J0IGNvbnN0IFNDSEVNRV9ESVNQTEFZX05BTUVTOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAvLyBMaWdodCBzY2hlbWVzXG4gICdveHlnZW4tb3h5Z2VuLWxpZ2h0JzogJ094eWdlbicsXG4gICdveHlnZW4tbWluaW1hbC1saWdodCc6ICdNaW5pbWFsJyxcbiAgJ294eWdlbi1hdG9tLWxpZ2h0JzogJ0F0b20nLFxuICAnb3h5Z2VuLWF5dS1saWdodCc6ICdBeXUnLFxuICAnb3h5Z2VuLWNhdHBwdWNjaW4tbGlnaHQnOiAnQ2F0cHB1Y2NpbicsXG4gICdveHlnZW4tZWluay1saWdodCc6ICdFLWluayAoYmV0YSknLFxuICAnb3h5Z2VuLWV2ZXJmb3Jlc3QtbGlnaHQnOiAnRXZlcmZvcmVzdCcsXG4gICdveHlnZW4tZmxleG9raS1saWdodCc6ICdGbGV4b2tpJyxcbiAgJ294eWdlbi1ncnV2Ym94LWxpZ2h0JzogJ0dydXZib3gnLFxuICAnb3h5Z2VuLW1hY29zLWxpZ2h0JzogJ21hY09TJyxcbiAgJ294eWdlbi1ub3JkLWxpZ2h0JzogJ05vcmQnLFxuICAnb3h5Z2VuLXJvc2UtcGluZS1saWdodCc6ICdSb3NcdTAwRTkgUGluZScsXG4gICdveHlnZW4tbm90aW9uLWxpZ2h0JzogJ1NreScsXG4gICdveHlnZW4tc29sYXJpemVkLWxpZ2h0JzogJ1NvbGFyaXplZCcsXG4gICdveHlnZW4tdGhpbmdzLWxpZ2h0JzogJ1RoaW5ncycsXG4gIC8vIERhcmsgc2NoZW1lc1xuICAnb3h5Z2VuLW94eWdlbi1kYXJrJzogJ094eWdlbicsXG4gICdveHlnZW4tbWluaW1hbC1kYXJrJzogJ01pbmltYWwnLFxuICAnb3h5Z2VuLWF0b20tZGFyayc6ICdBdG9tJyxcbiAgJ294eWdlbi1heXUtZGFyayc6ICdBeXUnLFxuICAnb3h5Z2VuLWNhdHBwdWNjaW4tZGFyayc6ICdDYXRwcHVjY2luJyxcbiAgJ294eWdlbi1kcmFjdWxhLWRhcmsnOiAnRHJhY3VsYScsXG4gICdveHlnZW4tZWluay1kYXJrJzogJ0UtaW5rIChiZXRhKScsXG4gICdveHlnZW4tZXZlcmZvcmVzdC1kYXJrJzogJ0V2ZXJmb3Jlc3QnLFxuICAnb3h5Z2VuLWZsZXhva2ktZGFyayc6ICdGbGV4b2tpJyxcbiAgJ294eWdlbi1ncnV2Ym94LWRhcmsnOiAnR3J1dmJveCcsXG4gICdveHlnZW4tbWFjb3MtZGFyayc6ICdtYWNPUycsXG4gICdveHlnZW4tbm9yZC1kYXJrJzogJ05vcmQnLFxuICAnb3h5Z2VuLXJvc2UtcGluZS1kYXJrJzogJ1Jvc1x1MDBFOSBQaW5lJyxcbiAgJ294eWdlbi1ub3Rpb24tZGFyayc6ICdTa3knLFxuICAnb3h5Z2VuLXNvbGFyaXplZC1kYXJrJzogJ1NvbGFyaXplZCcsXG4gICdveHlnZW4tdGhpbmdzLWRhcmsnOiAnVGhpbmdzJyxcbn0gYXMgY29uc3Q7XG5cbiIsICIvKipcclxuICogQ1NTIFByb3BlcnR5IFV0aWxpdGllc1xyXG4gKiBIZWxwZXIgZnVuY3Rpb25zIGZvciBzZXR0aW5nIENTUyBjdXN0b20gcHJvcGVydGllcyBpbiBhbiBPYnNpZGlhbi1jb21wbGlhbnQgd2F5XHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIFNldCBDU1MgY3VzdG9tIHByb3BlcnR5IG9uIGFuIGVsZW1lbnRcclxuICogVGhpcyBpcyBhIHdyYXBwZXIgYXJvdW5kIHNldFByb3BlcnR5IHRoYXQgY2FuIGJlIHJlcGxhY2VkIHdpdGggc2V0Q3NzUHJvcHMgaWYgYXZhaWxhYmxlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc2V0Q3NzUHJvcHMoZWxlbWVudDogSFRNTEVsZW1lbnQsIHByb3BzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+KTogdm9pZCB7XHJcbiAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMocHJvcHMpKSB7XHJcbiAgICBlbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KGtleSwgdmFsdWUpO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFNldCBhIHNpbmdsZSBDU1MgY3VzdG9tIHByb3BlcnR5IG9uIGFuIGVsZW1lbnRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRDc3NQcm9wKGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBwcm9wOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpOiB2b2lkIHtcclxuICBlbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KHByb3AsIHZhbHVlKTtcclxufVxyXG5cclxuIiwgIi8qKlxuICogQ29sb3IgdXRpbGl0eSBmdW5jdGlvbnMgZm9yIGN1c3RvbSBwcmVzZXRzXG4gKi9cblxuaW1wb3J0IHsgSFNMQ29sb3IsIEN1c3RvbUNvbG9yUHJlc2V0IH0gZnJvbSAnLi4vcHJlc2V0cy9DdXN0b21QcmVzZXQnO1xuaW1wb3J0IHsgc2V0Q3NzUHJvcHMgfSBmcm9tICcuL2Nzcy1wcm9wcyc7XG5cbi8qKlxuICogQ29udmVydCBoZXggY29sb3IgdG8gSFNMXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoZXhUb0hTTChoZXg6IHN0cmluZyk6IEhTTENvbG9yIHtcbiAgLy8gUmVtb3ZlICMgaWYgcHJlc2VudFxuICBoZXggPSBoZXgucmVwbGFjZSgnIycsICcnKTtcbiAgXG4gIC8vIFBhcnNlIGhleCB2YWx1ZXNcbiAgY29uc3QgciA9IHBhcnNlSW50KGhleC5zdWJzdHJpbmcoMCwgMiksIDE2KSAvIDI1NTtcbiAgY29uc3QgZyA9IHBhcnNlSW50KGhleC5zdWJzdHJpbmcoMiwgNCksIDE2KSAvIDI1NTtcbiAgY29uc3QgYiA9IHBhcnNlSW50KGhleC5zdWJzdHJpbmcoNCwgNiksIDE2KSAvIDI1NTtcblxuICBjb25zdCBtYXggPSBNYXRoLm1heChyLCBnLCBiKTtcbiAgY29uc3QgbWluID0gTWF0aC5taW4ociwgZywgYik7XG4gIGxldCBoID0gMCwgcyA9IDAsIGwgPSAobWF4ICsgbWluKSAvIDI7XG5cbiAgaWYgKG1heCAhPT0gbWluKSB7XG4gICAgY29uc3QgZCA9IG1heCAtIG1pbjtcbiAgICBzID0gbCA+IDAuNSA/IGQgLyAoMiAtIG1heCAtIG1pbikgOiBkIC8gKG1heCArIG1pbik7XG4gICAgXG4gICAgc3dpdGNoIChtYXgpIHtcbiAgICAgIGNhc2UgcjogaCA9IChnIC0gYikgLyBkICsgKGcgPCBiID8gNiA6IDApOyBicmVhaztcbiAgICAgIGNhc2UgZzogaCA9IChiIC0gcikgLyBkICsgMjsgYnJlYWs7XG4gICAgICBjYXNlIGI6IGggPSAociAtIGcpIC8gZCArIDQ7IGJyZWFrO1xuICAgIH1cbiAgICBoIC89IDY7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGg6IE1hdGgucm91bmQoaCAqIDM2MCksXG4gICAgczogTWF0aC5yb3VuZChzICogMTAwKSxcbiAgICBsOiBNYXRoLnJvdW5kKGwgKiAxMDApXG4gIH07XG59XG5cbi8qKlxuICogQ29udmVydCBIU0wgY29sb3IgdG8gaGV4XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoc2xUb0hleChoc2w6IEhTTENvbG9yKTogc3RyaW5nIHtcbiAgY29uc3QgaCA9IGhzbC5oIC8gMzYwO1xuICBjb25zdCBzID0gaHNsLnMgLyAxMDA7XG4gIGNvbnN0IGwgPSBoc2wubCAvIDEwMDtcblxuICBjb25zdCBodWUycmdiID0gKHA6IG51bWJlciwgcTogbnVtYmVyLCB0OiBudW1iZXIpID0+IHtcbiAgICBpZiAodCA8IDApIHQgKz0gMTtcbiAgICBpZiAodCA+IDEpIHQgLT0gMTtcbiAgICBpZiAodCA8IDEvNikgcmV0dXJuIHAgKyAocSAtIHApICogNiAqIHQ7XG4gICAgaWYgKHQgPCAxLzIpIHJldHVybiBxO1xuICAgIGlmICh0IDwgMi8zKSByZXR1cm4gcCArIChxIC0gcCkgKiAoMi8zIC0gdCkgKiA2O1xuICAgIHJldHVybiBwO1xuICB9O1xuXG4gIGxldCByLCBnLCBiO1xuXG4gIGlmIChzID09PSAwKSB7XG4gICAgciA9IGcgPSBiID0gbDsgLy8gYWNocm9tYXRpY1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IHEgPSBsIDwgMC41ID8gbCAqICgxICsgcykgOiBsICsgcyAtIGwgKiBzO1xuICAgIGNvbnN0IHAgPSAyICogbCAtIHE7XG4gICAgciA9IGh1ZTJyZ2IocCwgcSwgaCArIDEvMyk7XG4gICAgZyA9IGh1ZTJyZ2IocCwgcSwgaCk7XG4gICAgYiA9IGh1ZTJyZ2IocCwgcSwgaCAtIDEvMyk7XG4gIH1cblxuICBjb25zdCB0b0hleCA9IChjOiBudW1iZXIpID0+IHtcbiAgICBjb25zdCBoZXggPSBNYXRoLnJvdW5kKGMgKiAyNTUpLnRvU3RyaW5nKDE2KTtcbiAgICByZXR1cm4gaGV4Lmxlbmd0aCA9PT0gMSA/ICcwJyArIGhleCA6IGhleDtcbiAgfTtcblxuICByZXR1cm4gYCMke3RvSGV4KHIpfSR7dG9IZXgoZyl9JHt0b0hleChiKX1gO1xufVxuXG4vKipcbiAqIFZhbGlkYXRlIGhleCBjb2xvciBmb3JtYXQgKHN1cHBvcnRzIHRyYW5zcGFyZW5jeSlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlSGV4KGhleDogc3RyaW5nKTogYm9vbGVhbiB7XG4gIGNvbnN0IGhleFJlZ2V4ID0gL14jPyhbQS1GYS1mMC05XXs2fXxbQS1GYS1mMC05XXszfXxbQS1GYS1mMC05XXs4fXxbQS1GYS1mMC05XXs0fSkkLztcbiAgcmV0dXJuIGhleFJlZ2V4LnRlc3QoaGV4KTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZSBIU0wgY29sb3IgcmFuZ2VzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUhTTChoc2w6IEhTTENvbG9yKTogYm9vbGVhbiB7XG4gIHJldHVybiBoc2wuaCA+PSAwICYmIGhzbC5oIDw9IDM2MCAmJlxuICAgICAgICAgaHNsLnMgPj0gMCAmJiBoc2wucyA8PSAxMDAgJiZcbiAgICAgICAgIGhzbC5sID49IDAgJiYgaHNsLmwgPD0gMTAwO1xufVxuXG4vKipcbiAqIEdlbmVyYXRlIGEgY29sb3Igc3dhdGNoIGVsZW1lbnQgZm9yIHByZXZpZXdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlQ29sb3JTd2F0Y2gocHJlc2V0OiBDdXN0b21Db2xvclByZXNldCk6IEhUTUxFbGVtZW50IHtcbiAgY29uc3Qgc3dhdGNoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIHN3YXRjaC5jbGFzc05hbWUgPSAnY3VzdG9tLXByZXNldC1zd2F0Y2gnO1xuICBjb25zdCBsaWdodEJhc2VIZXggPSBoc2xUb0hleChwcmVzZXQubGlnaHQuYmFzZSk7XG4gIGNvbnN0IGxpZ2h0QWNjZW50SGV4ID0gaHNsVG9IZXgocHJlc2V0LmxpZ2h0LmFjY2VudCk7XG4gIGNvbnN0IGRhcmtCYXNlSGV4ID0gaHNsVG9IZXgocHJlc2V0LmRhcmsuYmFzZSk7XG4gIHNldENzc1Byb3BzKHN3YXRjaCwge1xuICAgICctLXN3YXRjaC1ncmFkaWVudC1zdGFydCc6IGxpZ2h0QmFzZUhleCxcbiAgICAnLS1zd2F0Y2gtZ3JhZGllbnQtbWlkJzogbGlnaHRBY2NlbnRIZXgsXG4gICAgJy0tc3dhdGNoLWdyYWRpZW50LWVuZCc6IGRhcmtCYXNlSGV4XG4gIH0pO1xuICByZXR1cm4gc3dhdGNoO1xufVxuXG4vLyBOb3RlOiBnZW5lcmF0ZUNvbG9yU3dhdGNoIGlzIHVzZWQgaW4gQ3VzdG9tUHJlc2V0U2V0dGluZ3MudHNcblxuLyoqXG4gKiBTYW5pdGl6ZSBwcmVzZXQgbmFtZSBmb3IgZGlzcGxheVxuICovXG5leHBvcnQgZnVuY3Rpb24gc2FuaXRpemVQcmVzZXROYW1lKG5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBuYW1lLnRyaW0oKS5yZXBsYWNlKC9bPD46XCIvXFxcXHw/Kl0vZywgJycpO1xufVxuXG4vKipcbiAqIEdlbmVyYXRlIGEgdW5pcXVlIHByZXNldCBJRCBmcm9tIG5hbWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlUHJlc2V0SWQobmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIHNhbml0aXplUHJlc2V0TmFtZShuYW1lKVxuICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgLnJlcGxhY2UoL1xccysvZywgJy0nKVxuICAgIC5yZXBsYWNlKC9bXmEtejAtOS1dL2csICcnKVxuICAgIC5zdWJzdHJpbmcoMCwgNTApO1xufVxuXG4vKipcbiAqIFZhbGlkYXRlIHByZXNldCBJRCBmb3JtYXRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlUHJlc2V0SWQoaWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICBjb25zdCBpZFJlZ2V4ID0gL15bYS16MC05LV0rJC87XG4gIHJldHVybiBpZFJlZ2V4LnRlc3QoaWQpICYmIGlkLmxlbmd0aCA+IDAgJiYgaWQubGVuZ3RoIDw9IDUwO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIHByZXNldCBJRCBpcyB1bmlxdWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzUHJlc2V0SWRVbmlxdWUoaWQ6IHN0cmluZywgZXhpc3RpbmdQcmVzZXRzOiBDdXN0b21Db2xvclByZXNldFtdLCBleGNsdWRlSWQ/OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgcmV0dXJuICFleGlzdGluZ1ByZXNldHMuc29tZShwcmVzZXQgPT4gcHJlc2V0LmlkID09PSBpZCAmJiBwcmVzZXQuaWQgIT09IGV4Y2x1ZGVJZCk7XG59XG5cbi8qKlxuICogRm9ybWF0IEhTTCBjb2xvciBmb3IgZGlzcGxheVxuICovXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0SFNMKGhzbDogSFNMQ29sb3IpOiBzdHJpbmcge1xuICByZXR1cm4gYGhzbCgke2hzbC5ofSwgJHtoc2wuc30lLCAke2hzbC5sfSUpYDtcbn1cblxuLyoqXG4gKiBHZXQgY29udHJhc3QgcmF0aW8gYmV0d2VlbiB0d28gY29sb3JzIChmb3IgYWNjZXNzaWJpbGl0eSlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENvbnRyYXN0UmF0aW8oY29sb3IxOiBzdHJpbmcsIGNvbG9yMjogc3RyaW5nKTogbnVtYmVyIHtcbiAgY29uc3QgZ2V0THVtaW5hbmNlID0gKGhleDogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgcmdiID0gcGFyc2VJbnQoaGV4LnJlcGxhY2UoJyMnLCAnJyksIDE2KTtcbiAgICBjb25zdCByID0gKHJnYiA+PiAxNikgJiAweGZmO1xuICAgIGNvbnN0IGcgPSAocmdiID4+IDgpICYgMHhmZjtcbiAgICBjb25zdCBiID0gKHJnYiA+PiAwKSAmIDB4ZmY7XG4gICAgXG4gICAgY29uc3QgW3JzLCBncywgYnNdID0gW3IsIGcsIGJdLm1hcChjID0+IHtcbiAgICAgIGMgPSBjIC8gMjU1O1xuICAgICAgcmV0dXJuIGMgPD0gMC4wMzkyOCA/IGMgLyAxMi45MiA6IE1hdGgucG93KChjICsgMC4wNTUpIC8gMS4wNTUsIDIuNCk7XG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIDAuMjEyNiAqIHJzICsgMC43MTUyICogZ3MgKyAwLjA3MjIgKiBicztcbiAgfTtcblxuICBjb25zdCBsdW0xID0gZ2V0THVtaW5hbmNlKGNvbG9yMSk7XG4gIGNvbnN0IGx1bTIgPSBnZXRMdW1pbmFuY2UoY29sb3IyKTtcbiAgY29uc3QgYnJpZ2h0ZXN0ID0gTWF0aC5tYXgobHVtMSwgbHVtMik7XG4gIGNvbnN0IGRhcmtlc3QgPSBNYXRoLm1pbihsdW0xLCBsdW0yKTtcbiAgXG4gIHJldHVybiAoYnJpZ2h0ZXN0ICsgMC4wNSkgLyAoZGFya2VzdCArIDAuMDUpO1xufVxuIiwgImltcG9ydCB7IEFwcCB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgZ2V0VmF1bHRDb25maWcsIHNldFZhdWx0Q29uZmlnIH0gZnJvbSAnLi4vdHlwZXMvb2JzaWRpYW4tZXh0ZW5zaW9ucyc7XHJcbmltcG9ydCB7IE9YWUdFTl9USEVNRV9OQU1FIH0gZnJvbSAnLi4vY29uc3RhbnRzJztcclxuaW1wb3J0IHsgSFNMQ29sb3IgfSBmcm9tICcuLi9wcmVzZXRzL0N1c3RvbVByZXNldCc7XHJcbmltcG9ydCB7IGhzbFRvSGV4IH0gZnJvbSAnLi9jb2xvci11dGlscyc7XHJcblxyXG4vKipcclxuICogQ2hlY2tzIGlmIHRoZSBPeHlnZW4gdGhlbWUgaXMgY3VycmVudGx5IGFjdGl2ZSBpbiB0aGUgdmF1bHQuXHJcbiAqIEBwYXJhbSBhcHAgVGhlIE9ic2lkaWFuIEFwcCBpbnN0YW5jZS5cclxuICogQHJldHVybnMgdHJ1ZSBpZiBPeHlnZW4gdGhlbWUgaXMgYWN0aXZlLCBmYWxzZSBvdGhlcndpc2UuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaXNPeHlnZW5UaGVtZUFjdGl2ZShhcHA6IEFwcCk6IGJvb2xlYW4ge1xyXG4gICAgY29uc3QgY3NzVGhlbWUgPSBnZXRWYXVsdENvbmZpZyhhcHAsICdjc3NUaGVtZScpO1xyXG4gICAgcmV0dXJuIGNzc1RoZW1lID09PSBPWFlHRU5fVEhFTUVfTkFNRTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFVwZGF0ZXMgT2JzaWRpYW4ncyBuYXRpdmUgYWNjZW50IGNvbG9yIHNldHRpbmcuXHJcbiAqIEBwYXJhbSBhcHAgVGhlIE9ic2lkaWFuIEFwcCBpbnN0YW5jZS5cclxuICogQHBhcmFtIGhzbCBUaGUgSFNMIGNvbG9yIHRvIHNldCBhcyB0aGUgYWNjZW50IGNvbG9yLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZU9ic2lkaWFuQWNjZW50Q29sb3IoYXBwOiBBcHAsIGhzbDogSFNMQ29sb3IpOiB2b2lkIHtcclxuICAgIGNvbnN0IGhleCA9IGhzbFRvSGV4KGhzbCk7XHJcbiAgICBzZXRWYXVsdENvbmZpZyhhcHAsICdhY2NlbnRDb2xvcicsIGhleCk7XHJcbiAgICBhcHAud29ya3NwYWNlLnRyaWdnZXIoJ2Nzcy1jaGFuZ2UnKTtcclxufVxyXG4iLCAiLyoqXHJcbiAqIENvbG9yIHNjaGVtZSBzZXR0aW5ncyBzZWN0aW9uXHJcbiAqIExpZ2h0L2RhcmsgbW9kZSBjb2xvciBzY2hlbWVzIGFuZCBiYWNrZ3JvdW5kIGNvbnRyYXN0XHJcbiAqL1xyXG5cclxuaW1wb3J0IE1pbmltYWxUaGVtZSBmcm9tICcuLi8uLi9tYWluJztcclxuaW1wb3J0IHsgY3JlYXRlU2V0dGluZ3NHcm91cCB9IGZyb20gJy4uLy4uL3V0aWxzL3NldHRpbmdzLWNvbXBhdCc7XHJcbmltcG9ydCB7IHVwZGF0ZU9ic2lkaWFuQWNjZW50Q29sb3IgfSBmcm9tICcuLi8uLi91dGlscy90aGVtZS11dGlscyc7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRDb2xvclNjaGVtZVNldHRpbmdzKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCwgcGx1Z2luOiBNaW5pbWFsVGhlbWUpOiB2b2lkIHtcclxuICBjb25zdCBjb2xvckdyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXJFbCwgJ0NvbG9yIHNjaGVtZScsICdveHlnZW4tc2V0dGluZ3MnKTtcclxuXHJcbiAgLy8gTGlnaHQgbW9kZSBjb2xvciBzY2hlbWVcclxuICBjb2xvckdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuICAgIHNldHRpbmdcclxuICAgICAgLnNldE5hbWUoJ0xpZ2h0IG1vZGUgY29sb3Igc2NoZW1lJylcclxuICAgICAgLy8gRmFsc2UgcG9zaXRpdmU6IFwiU3R5bGUgU2V0dGluZ3NcIiBhbmQgXCJEb2N1bWVudGF0aW9uXCIgYXJlIHByb3BlciBub3Vuc1xyXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgb2JzaWRpYW5tZC91aS9zZW50ZW5jZS1jYXNlXHJcbiAgICAgIC5zZXREZXNjKCdQcmVzZXQgY29sb3Igb3B0aW9ucyBmb3IgbGlnaHQgbW9kZS4gVG8gY3JlYXRlIGEgY3VzdG9tIGNvbG9yIHNjaGVtZSB1c2UgdGhlIFN0eWxlIFNldHRpbmdzIHBsdWdpbi4gU2VlIERvY3VtZW50YXRpb24gZm9yIGRldGFpbHMuJylcclxuICAgICAgLmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xyXG4gICAgICAgIC8vIEJ1aWx0LWluIHNjaGVtZXNcclxuICAgICAgICBkcm9wZG93blxyXG4gICAgICAgICAgLmFkZE9wdGlvbignb3h5Z2VuLW94eWdlbi1saWdodCcsICdPeHlnZW4nKVxyXG4gICAgICAgICAgLmFkZE9wdGlvbignb3h5Z2VuLW1pbmltYWwtbGlnaHQnLCAnTWluaW1hbCcpXHJcbiAgICAgICAgICAuYWRkT3B0aW9uKCdveHlnZW4tYXRvbS1saWdodCcsICdBdG9tJylcclxuICAgICAgICAgIC5hZGRPcHRpb24oJ294eWdlbi1heXUtbGlnaHQnLCAnQXl1JylcclxuICAgICAgICAgIC5hZGRPcHRpb24oJ294eWdlbi1jYXRwcHVjY2luLWxpZ2h0JywgJ0NhdHBwdWNjaW4nKVxyXG4gICAgICAgICAgLmFkZE9wdGlvbignb3h5Z2VuLWVpbmstbGlnaHQnLCAnRS1pbmsgKGJldGEpJylcclxuICAgICAgICAgIC5hZGRPcHRpb24oJ294eWdlbi1ldmVyZm9yZXN0LWxpZ2h0JywgJ0V2ZXJmb3Jlc3QnKVxyXG4gICAgICAgICAgLmFkZE9wdGlvbignb3h5Z2VuLWZsZXhva2ktbGlnaHQnLCAnRmxleG9raScpXHJcbiAgICAgICAgICAuYWRkT3B0aW9uKCdveHlnZW4tZ3J1dmJveC1saWdodCcsICdHcnV2Ym94JylcclxuICAgICAgICAgIC5hZGRPcHRpb24oJ294eWdlbi1tYWNvcy1saWdodCcsICdtYWNPUycpXHJcbiAgICAgICAgICAuYWRkT3B0aW9uKCdveHlnZW4tbm9yZC1saWdodCcsICdOb3JkJylcclxuICAgICAgICAgIC8vIEZhbHNlIHBvc2l0aXZlOiBcIlJvc1x1MDBFOSBQaW5lXCIgYW5kIFwiU2t5XCIgYXJlIHByb3BlciBub3VucyAoY29sb3Igc2NoZW1lIG5hbWVzKVxyXG4gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9ic2lkaWFubWQvdWkvc2VudGVuY2UtY2FzZVxyXG4gICAgICAgICAgLmFkZE9wdGlvbignb3h5Z2VuLXJvc2UtcGluZS1saWdodCcsICdSb3NcdTAwRTkgUGluZScpXHJcbiAgICAgICAgICAuYWRkT3B0aW9uKCdveHlnZW4tbm90aW9uLWxpZ2h0JywgJ1NreScpXHJcbiAgICAgICAgICAuYWRkT3B0aW9uKCdveHlnZW4tc29sYXJpemVkLWxpZ2h0JywgJ1NvbGFyaXplZCcpXHJcbiAgICAgICAgICAuYWRkT3B0aW9uKCdveHlnZW4tdGhpbmdzLWxpZ2h0JywgJ1RoaW5ncycpO1xyXG5cclxuICAgICAgICAvLyBBZGQgY3VzdG9tIHByZXNldHMgaWYgZW5hYmxlZCBhbmQgYW55IGV4aXN0XHJcbiAgICAgICAgaWYgKHBsdWdpbi5zZXR0aW5ncy5lbmFibGVDdXN0b21QcmVzZXRzICYmIHBsdWdpbi5zZXR0aW5ncy5jdXN0b21QcmVzZXRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy5jdXN0b21QcmVzZXRzXHJcbiAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpKVxyXG4gICAgICAgICAgICAuZm9yRWFjaChwcmVzZXQgPT4ge1xyXG4gICAgICAgICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbihgb3h5Z2VuLWN1c3RvbS0ke3ByZXNldC5pZH1gLCBwcmVzZXQubmFtZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZHJvcGRvd25cclxuICAgICAgICAgIC5zZXRWYWx1ZShwbHVnaW4uc2V0dGluZ3MubGlnaHRTY2hlbWUpXHJcbiAgICAgICAgICAub25DaGFuZ2UoKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy5saWdodFNjaGVtZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICB2b2lkIHBsdWdpbi5zYXZlRGF0YShwbHVnaW4uc2V0dGluZ3MpO1xyXG5cclxuICAgICAgICAgICAgLy8gSWYgc2VsZWN0aW5nIGEgY3VzdG9tIHByZXNldCwgc3luYyBpdHMgYWNjZW50IGNvbG9yIHRvIE9ic2lkaWFuXHJcbiAgICAgICAgICAgIGlmICh2YWx1ZS5zdGFydHNXaXRoKCdveHlnZW4tY3VzdG9tLScpKSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgcHJlc2V0SWQgPSB2YWx1ZS5yZXBsYWNlKCdveHlnZW4tY3VzdG9tLScsICcnKTtcclxuICAgICAgICAgICAgICBjb25zdCBwcmVzZXQgPSBwbHVnaW4uc2V0dGluZ3MuY3VzdG9tUHJlc2V0cy5maW5kKHAgPT4gcC5pZCA9PT0gcHJlc2V0SWQpO1xyXG4gICAgICAgICAgICAgIGlmIChwcmVzZXQpIHtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZU9ic2lkaWFuQWNjZW50Q29sb3IocGx1Z2luLmFwcCwgcHJlc2V0LmxpZ2h0LmFjY2VudCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBSZWdlbmVyYXRlIGFsbCBDU1MgaW5jbHVkaW5nIGN1c3RvbSBwcmVzZXRzXHJcbiAgICAgICAgICAgIHBsdWdpbi51cGRhdGVTdHlsZSgpO1xyXG4gICAgICAgICAgICBwbHVnaW4udXBkYXRlQ3VzdG9tUHJlc2V0Q1NTKCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIC8vIExpZ2h0IG1vZGUgYmFja2dyb3VuZCBjb250cmFzdFxyXG4gIGNvbG9yR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG4gICAgc2V0dGluZ1xyXG4gICAgICAuc2V0TmFtZSgnTGlnaHQgbW9kZSBiYWNrZ3JvdW5kIGNvbnRyYXN0JylcclxuICAgICAgLnNldERlc2MoJ0xldmVsIG9mIGNvbnRyYXN0IGJldHdlZW4gc2lkZWJhciBhbmQgbWFpbiBjb250ZW50LicpXHJcbiAgICAgIC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcclxuICAgICAgICBkcm9wZG93blxyXG4gICAgICAgICAgLmFkZE9wdGlvbignb3h5Z2VuLWxpZ2h0JywgJ0RlZmF1bHQnKVxyXG4gICAgICAgICAgLmFkZE9wdGlvbignb3h5Z2VuLWxpZ2h0LXdoaXRlJywgJ0FsbCB3aGl0ZScpXHJcbiAgICAgICAgICAuYWRkT3B0aW9uKCdveHlnZW4tbGlnaHQtdG9uYWwnLCAnTG93IGNvbnRyYXN0JylcclxuICAgICAgICAgIC5hZGRPcHRpb24oJ294eWdlbi1saWdodC1jb250cmFzdCcsICdIaWdoIGNvbnRyYXN0JylcclxuICAgICAgICAgIC5zZXRWYWx1ZShwbHVnaW4uc2V0dGluZ3MubGlnaHRTdHlsZSlcclxuICAgICAgICAgIC5vbkNoYW5nZSgodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLmxpZ2h0U3R5bGUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgdm9pZCBwbHVnaW4uc2F2ZURhdGEocGx1Z2luLnNldHRpbmdzKTtcclxuICAgICAgICAgICAgLy8gUmVmcmVzaCBhbGwgc3R5bGVzIHRvIGFwcGx5IHRoZSBuZXcgY29udHJhc3QgY2xhc3MgYW5kIGhhbmRsZSBzdGlja2luZ1xyXG4gICAgICAgICAgICBwbHVnaW4udXBkYXRlU3R5bGUoKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgLy8gRGFyayBtb2RlIGNvbG9yIHNjaGVtZVxyXG4gIGNvbG9yR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG4gICAgc2V0dGluZ1xyXG4gICAgICAuc2V0TmFtZSgnRGFyayBtb2RlIGNvbG9yIHNjaGVtZScpXHJcbiAgICAgIC5zZXREZXNjKCdQcmVzZXQgY29sb3JzIG9wdGlvbnMgZm9yIGRhcmsgbW9kZS4nKVxyXG4gICAgICAuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XHJcbiAgICAgICAgLy8gQnVpbHQtaW4gc2NoZW1lc1xyXG4gICAgICAgIGRyb3Bkb3duXHJcbiAgICAgICAgICAuYWRkT3B0aW9uKCdveHlnZW4tb3h5Z2VuLWRhcmsnLCAnT3h5Z2VuJylcclxuICAgICAgICAgIC5hZGRPcHRpb24oJ294eWdlbi1taW5pbWFsLWRhcmsnLCAnTWluaW1hbCcpXHJcbiAgICAgICAgICAuYWRkT3B0aW9uKCdveHlnZW4tYXRvbS1kYXJrJywgJ0F0b20nKVxyXG4gICAgICAgICAgLmFkZE9wdGlvbignb3h5Z2VuLWF5dS1kYXJrJywgJ0F5dScpXHJcbiAgICAgICAgICAuYWRkT3B0aW9uKCdveHlnZW4tY2F0cHB1Y2Npbi1kYXJrJywgJ0NhdHBwdWNjaW4nKVxyXG4gICAgICAgICAgLmFkZE9wdGlvbignb3h5Z2VuLWRyYWN1bGEtZGFyaycsICdEcmFjdWxhJylcclxuICAgICAgICAgIC5hZGRPcHRpb24oJ294eWdlbi1laW5rLWRhcmsnLCAnRS1pbmsgKGJldGEpJylcclxuICAgICAgICAgIC5hZGRPcHRpb24oJ294eWdlbi1ldmVyZm9yZXN0LWRhcmsnLCAnRXZlcmZvcmVzdCcpXHJcbiAgICAgICAgICAuYWRkT3B0aW9uKCdveHlnZW4tZmxleG9raS1kYXJrJywgJ0ZsZXhva2knKVxyXG4gICAgICAgICAgLmFkZE9wdGlvbignb3h5Z2VuLWdydXZib3gtZGFyaycsICdHcnV2Ym94JylcclxuICAgICAgICAgIC5hZGRPcHRpb24oJ294eWdlbi1tYWNvcy1kYXJrJywgJ21hY09TJylcclxuICAgICAgICAgIC5hZGRPcHRpb24oJ294eWdlbi1ub3JkLWRhcmsnLCAnTm9yZCcpXHJcbiAgICAgICAgICAvLyBGYWxzZSBwb3NpdGl2ZTogXCJSb3NcdTAwRTkgUGluZVwiIGFuZCBcIlNreVwiIGFyZSBwcm9wZXIgbm91bnMgKGNvbG9yIHNjaGVtZSBuYW1lcylcclxuICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYnNpZGlhbm1kL3VpL3NlbnRlbmNlLWNhc2VcclxuICAgICAgICAgIC5hZGRPcHRpb24oJ294eWdlbi1yb3NlLXBpbmUtZGFyaycsICdSb3NcdTAwRTkgUGluZScpXHJcbiAgICAgICAgICAuYWRkT3B0aW9uKCdveHlnZW4tbm90aW9uLWRhcmsnLCAnU2t5JylcclxuICAgICAgICAgIC5hZGRPcHRpb24oJ294eWdlbi1zb2xhcml6ZWQtZGFyaycsICdTb2xhcml6ZWQnKVxyXG4gICAgICAgICAgLmFkZE9wdGlvbignb3h5Z2VuLXRoaW5ncy1kYXJrJywgJ1RoaW5ncycpO1xyXG5cclxuICAgICAgICAvLyBBZGQgY3VzdG9tIHByZXNldHMgaWYgZW5hYmxlZCBhbmQgYW55IGV4aXN0XHJcbiAgICAgICAgaWYgKHBsdWdpbi5zZXR0aW5ncy5lbmFibGVDdXN0b21QcmVzZXRzICYmIHBsdWdpbi5zZXR0aW5ncy5jdXN0b21QcmVzZXRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy5jdXN0b21QcmVzZXRzXHJcbiAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpKVxyXG4gICAgICAgICAgICAuZm9yRWFjaChwcmVzZXQgPT4ge1xyXG4gICAgICAgICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbihgb3h5Z2VuLWN1c3RvbS0ke3ByZXNldC5pZH1gLCBwcmVzZXQubmFtZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZHJvcGRvd25cclxuICAgICAgICAgIC5zZXRWYWx1ZShwbHVnaW4uc2V0dGluZ3MuZGFya1NjaGVtZSlcclxuICAgICAgICAgIC5vbkNoYW5nZSgodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLmRhcmtTY2hlbWUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgdm9pZCBwbHVnaW4uc2F2ZURhdGEocGx1Z2luLnNldHRpbmdzKTtcclxuXHJcbiAgICAgICAgICAgIC8vIElmIHNlbGVjdGluZyBhIGN1c3RvbSBwcmVzZXQsIHN5bmMgaXRzIGFjY2VudCBjb2xvciB0byBPYnNpZGlhblxyXG4gICAgICAgICAgICBpZiAodmFsdWUuc3RhcnRzV2l0aCgnb3h5Z2VuLWN1c3RvbS0nKSkge1xyXG4gICAgICAgICAgICAgIGNvbnN0IHByZXNldElkID0gdmFsdWUucmVwbGFjZSgnb3h5Z2VuLWN1c3RvbS0nLCAnJyk7XHJcbiAgICAgICAgICAgICAgY29uc3QgcHJlc2V0ID0gcGx1Z2luLnNldHRpbmdzLmN1c3RvbVByZXNldHMuZmluZChwID0+IHAuaWQgPT09IHByZXNldElkKTtcclxuICAgICAgICAgICAgICBpZiAocHJlc2V0KSB7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVPYnNpZGlhbkFjY2VudENvbG9yKHBsdWdpbi5hcHAsIHByZXNldC5kYXJrLmFjY2VudCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBSZWdlbmVyYXRlIGFsbCBDU1MgaW5jbHVkaW5nIGN1c3RvbSBwcmVzZXRzXHJcbiAgICAgICAgICAgIHBsdWdpbi51cGRhdGVTdHlsZSgpO1xyXG4gICAgICAgICAgICBwbHVnaW4udXBkYXRlQ3VzdG9tUHJlc2V0Q1NTKCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIC8vIERhcmsgbW9kZSBiYWNrZ3JvdW5kIGNvbnRyYXN0XHJcbiAgY29sb3JHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcbiAgICBzZXR0aW5nXHJcbiAgICAgIC5zZXROYW1lKCdEYXJrIG1vZGUgYmFja2dyb3VuZCBjb250cmFzdCcpXHJcbiAgICAgIC5zZXREZXNjKCdMZXZlbCBvZiBjb250cmFzdCBiZXR3ZWVuIHNpZGViYXIgYW5kIG1haW4gY29udGVudC4nKVxyXG4gICAgICAuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XHJcbiAgICAgICAgZHJvcGRvd25cclxuICAgICAgICAgIC5hZGRPcHRpb24oJ294eWdlbi1kYXJrJywgJ0RlZmF1bHQnKVxyXG4gICAgICAgICAgLmFkZE9wdGlvbignb3h5Z2VuLWRhcmstdG9uYWwnLCAnTG93IGNvbnRyYXN0JylcclxuICAgICAgICAgIC5hZGRPcHRpb24oJ294eWdlbi1kYXJrLWJsYWNrJywgJ1RydWUgYmxhY2snKVxyXG4gICAgICAgICAgLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy5kYXJrU3R5bGUpXHJcbiAgICAgICAgICAub25DaGFuZ2UoKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy5kYXJrU3R5bGUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgdm9pZCBwbHVnaW4uc2F2ZURhdGEocGx1Z2luLnNldHRpbmdzKTtcclxuICAgICAgICAgICAgLy8gUmVmcmVzaCBhbGwgc3R5bGVzIHRvIGFwcGx5IHRoZSBuZXcgY29udHJhc3QgY2xhc3MgYW5kIGhhbmRsZSBzdGlja2luZ1xyXG4gICAgICAgICAgICBwbHVnaW4udXBkYXRlU3R5bGUoKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICB9KTtcclxufVxyXG5cclxuIiwgIi8qKlxyXG4gKiBGZWF0dXJlIHNldHRpbmdzIHNlY3Rpb25cclxuICogTmF2aWdhdGlvbiwgYm9yZGVycywgaGVhZGluZ3MsIGxpbmtzLCBldGMuXHJcbiAqL1xyXG5cclxuaW1wb3J0IE1pbmltYWxUaGVtZSBmcm9tICcuLi8uLi9tYWluJztcclxuaW1wb3J0IHsgTWluaW1hbFNldHRpbmdzIH0gZnJvbSAnLi4vc2V0dGluZ3MtaW50ZXJmYWNlJztcclxuaW1wb3J0IHsgY3JlYXRlU2V0dGluZ3NHcm91cCB9IGZyb20gJy4uLy4uL3V0aWxzL3NldHRpbmdzLWNvbXBhdCc7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRGZWF0dXJlU2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50LCBwbHVnaW46IE1pbmltYWxUaGVtZSk6IHZvaWQge1xyXG4gIGNvbnN0IGZlYXR1cmVzR3JvdXAgPSBjcmVhdGVTZXR0aW5nc0dyb3VwKGNvbnRhaW5lckVsLCAnRmVhdHVyZXMnLCAnb3h5Z2VuLXNldHRpbmdzJyk7XHJcblxyXG4gIGZlYXR1cmVzR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG4gICAgc2V0dGluZ1xyXG4gICAgICAuc2V0TmFtZSgnVGV4dCBsYWJlbHMgZm9yIHByaW1hcnkgbmF2aWdhdGlvbicpXHJcbiAgICAgIC8vIEZhbHNlIHBvc2l0aXZlOiBcIkRvY3VtZW50YXRpb25cIiBpcyBhIHByb3BlciBub3VuIChzZWN0aW9uIG5hbWUpXHJcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYnNpZGlhbm1kL3VpL3NlbnRlbmNlLWNhc2VcclxuICAgICAgLnNldERlc2MoJ05hdmlnYXRpb24gaXRlbXMgaW4gdGhlIGxlZnQgc2lkZWJhciB1c2VzIHRleHQgbGFiZWxzLiBTZWUgRG9jdW1lbnRhdGlvbiBmb3IgZGV0YWlscy4nKVxyXG4gICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuICAgICAgICB0b2dnbGUuc2V0VmFsdWUocGx1Z2luLnNldHRpbmdzLmxhYmVsZWROYXYpLm9uQ2hhbmdlKCAodmFsdWUpID0+IHtcclxuICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy5sYWJlbGVkTmF2ID0gdmFsdWU7XHJcbiAgICAgICAgICB2b2lkIHBsdWdpbi5zYXZlRGF0YShwbHVnaW4uc2V0dGluZ3MpO1xyXG4gICAgICAgICAgcGx1Z2luLnJlZnJlc2goKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGZlYXR1cmVzR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG4gICAgc2V0dGluZ1xyXG4gICAgICAuc2V0TmFtZSgnQ29sb3JmdWwgd2luZG93IGZyYW1lJylcclxuICAgICAgLnNldERlc2MoJ1RoZSB0b3AgYXJlYSBvZiB0aGUgYXBwIHVzZXMgeW91ciBhY2NlbnQgY29sb3IuJylcclxuICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcbiAgICAgICAgdG9nZ2xlLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy5jb2xvcmZ1bEZyYW1lKS5vbkNoYW5nZSggKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuY29sb3JmdWxGcmFtZSA9IHZhbHVlO1xyXG4gICAgICAgICAgdm9pZCBwbHVnaW4uc2F2ZURhdGEocGx1Z2luLnNldHRpbmdzKTtcclxuICAgICAgICAgIHBsdWdpbi5yZWZyZXNoKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBmZWF0dXJlc0dyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuICAgIHNldHRpbmdcclxuICAgICAgLnNldE5hbWUoJ0NvbG9yZnVsIGFjdGl2ZSBzdGF0ZXMnKVxyXG4gICAgICAuc2V0RGVzYygnQWN0aXZlIGZpbGUgYW5kIG1lbnUgaXRlbXMgdXNlIHlvdXIgYWNjZW50IGNvbG9yLicpXHJcbiAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG4gICAgICAgIHRvZ2dsZS5zZXRWYWx1ZShwbHVnaW4uc2V0dGluZ3MuY29sb3JmdWxBY3RpdmVTdGF0ZXMpLm9uQ2hhbmdlKCAodmFsdWUpID0+IHtcclxuICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy5jb2xvcmZ1bEFjdGl2ZVN0YXRlcyA9IHZhbHVlO1xyXG4gICAgICAgICAgdm9pZCBwbHVnaW4uc2F2ZURhdGEocGx1Z2luLnNldHRpbmdzKTtcclxuICAgICAgICAgIHBsdWdpbi5yZWZyZXNoKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBmZWF0dXJlc0dyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuICAgIHNldHRpbmdcclxuICAgICAgLnNldE5hbWUoJ0NvbG9yZnVsIGhlYWRpbmdzJylcclxuICAgICAgLnNldERlc2MoJ0hlYWRpbmdzIHVzZSBhIGRpZmZlcmVudCBjb2xvciBmb3IgZWFjaCBzaXplLicpXHJcbiAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG4gICAgICAgIHRvZ2dsZS5zZXRWYWx1ZShwbHVnaW4uc2V0dGluZ3MuY29sb3JmdWxIZWFkaW5ncykub25DaGFuZ2UoICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgcGx1Z2luLnNldHRpbmdzLmNvbG9yZnVsSGVhZGluZ3MgPSB2YWx1ZTtcclxuICAgICAgICAgIHZvaWQgcGx1Z2luLnNhdmVEYXRhKHBsdWdpbi5zZXR0aW5ncyk7XHJcbiAgICAgICAgICBwbHVnaW4ucmVmcmVzaCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZmVhdHVyZXNHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcbiAgICBzZXR0aW5nXHJcbiAgICAgIC5zZXROYW1lKCdNaW5pbWFsIHN0YXR1cyBiYXInKVxyXG4gICAgICAuc2V0RGVzYygnVHVybiBvZmYgdG8gdXNlIGZ1bGwtd2lkdGggc3RhdHVzIGJhci4nKVxyXG4gICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuICAgICAgICB0b2dnbGUuc2V0VmFsdWUocGx1Z2luLnNldHRpbmdzLm1pbmltYWxTdGF0dXMpLm9uQ2hhbmdlKCAodmFsdWUpID0+IHtcclxuICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy5taW5pbWFsU3RhdHVzID0gdmFsdWU7XHJcbiAgICAgICAgICB2b2lkIHBsdWdpbi5zYXZlRGF0YShwbHVnaW4uc2V0dGluZ3MpO1xyXG4gICAgICAgICAgcGx1Z2luLnJlZnJlc2goKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGZlYXR1cmVzR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG4gICAgc2V0dGluZ1xyXG4gICAgICAuc2V0TmFtZSgnVHJpbSBmaWxlIG5hbWVzIGluIHNpZGViYXJzJylcclxuICAgICAgLnNldERlc2MoJ1VzZSBlbGxpcHNlcyB0byBmaXQgZmlsZSBuYW1lcyBvbiBhIHNpbmdsZSBsaW5lLicpXHJcbiAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG4gICAgICAgIHRvZ2dsZS5zZXRWYWx1ZShwbHVnaW4uc2V0dGluZ3MudHJpbU5hbWVzKS5vbkNoYW5nZSggKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MudHJpbU5hbWVzID0gdmFsdWU7XHJcbiAgICAgICAgICB2b2lkIHBsdWdpbi5zYXZlRGF0YShwbHVnaW4uc2V0dGluZ3MpO1xyXG4gICAgICAgICAgcGx1Z2luLnJlZnJlc2goKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGZlYXR1cmVzR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG4gICAgc2V0dGluZ1xyXG4gICAgICAuc2V0TmFtZSgnQm9yZGVycycpXHJcbiAgICAgIC5zZXREZXNjKCdCb3JkZXIgc3R5bGUgZm9yIHdvcmtzcGFjZSBlbGVtZW50cy4nKVxyXG4gICAgICAuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XHJcbiAgICAgICAgZHJvcGRvd25cclxuICAgICAgICAgIC5hZGRPcHRpb24oJ2VuaGFuY2VkJywgJ0VuaGFuY2VkJylcclxuICAgICAgICAgIC5hZGRPcHRpb24oJ2RlZmF1bHQnLCAnRGVmYXVsdCcpXHJcbiAgICAgICAgICAuYWRkT3B0aW9uKCdub25lJywgJ05vbmUnKVxyXG4gICAgICAgICAgLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy53b3Jrc3BhY2VCb3JkZXJzKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKCAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLndvcmtzcGFjZUJvcmRlcnMgPSB2YWx1ZTtcclxuICAgICAgICAgICAgdm9pZCBwbHVnaW4uc2F2ZURhdGEocGx1Z2luLnNldHRpbmdzKTtcclxuICAgICAgICAgICAgcGx1Z2luLnJlZnJlc2goKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZmVhdHVyZXNHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcbiAgICBzZXR0aW5nXHJcbiAgICAgIC5zZXROYW1lKCdJbmRlbnRhdGlvbiBndWlkZXMgdGhpY2tuZXNzJylcclxuICAgICAgLnNldERlc2MoJ1RoaWNrbmVzcyBvZiBpbmRlbnRhdGlvbiBndWlkZXMgaW4gdGhlIHNpZGViYXIgZmlsZSBleHBsb3Jlci4nKVxyXG4gICAgICAuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XHJcbiAgICAgICAgZHJvcGRvd25cclxuICAgICAgICAgIC5hZGRPcHRpb24oJzBweCcsICdOb25lJylcclxuICAgICAgICAgIC5hZGRPcHRpb24oJzFweCcsICdUaGluJylcclxuICAgICAgICAgIC5hZGRPcHRpb24oJzJweCcsICdNZWRpdW0nKVxyXG4gICAgICAgICAgLmFkZE9wdGlvbignM3B4JywgJ1RoaWNrJylcclxuICAgICAgICAgIC5zZXRWYWx1ZShwbHVnaW4uc2V0dGluZ3MubmF2SW5kZW50YXRpb25HdWlkZVdpZHRoKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKCAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLm5hdkluZGVudGF0aW9uR3VpZGVXaWR0aCA9IHZhbHVlO1xyXG4gICAgICAgICAgICB2b2lkIHBsdWdpbi5zYXZlRGF0YShwbHVnaW4uc2V0dGluZ3MpO1xyXG4gICAgICAgICAgICBwbHVnaW4ucmVmcmVzaCgpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBmZWF0dXJlc0dyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuICAgIHNldHRpbmdcclxuICAgICAgLnNldE5hbWUoJ0luZGVudGF0aW9uIGd1aWRlcyBjb2xvcicpXHJcbiAgICAgIC5zZXREZXNjKCdDb2xvciBvZiBpbmRlbnRhdGlvbiBndWlkZXMgaW4gdGhlIHNpZGViYXIuJylcclxuICAgICAgLmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xyXG4gICAgICAgIGRyb3Bkb3duXHJcbiAgICAgICAgICAuYWRkT3B0aW9uKCdyZ2JhKHZhcigtLW1vbm8tcmdiLTEwMCksIDAuMTIpJywgJ1N1YnRsZScpXHJcbiAgICAgICAgICAuYWRkT3B0aW9uKCd2YXIoLS10ZXh0LWZhaW50KScsICdTdHJvbmcnKVxyXG4gICAgICAgICAgLmFkZE9wdGlvbigndmFyKC0tY29sb3ItYWNjZW50KScsICdBY2NlbnQgY29sb3InKVxyXG4gICAgICAgICAgLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy5uYXZJbmRlbnRhdGlvbkd1aWRlQ29sb3IpXHJcbiAgICAgICAgICAub25DaGFuZ2UoICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MubmF2SW5kZW50YXRpb25HdWlkZUNvbG9yID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHZvaWQgcGx1Z2luLnNhdmVEYXRhKHBsdWdpbi5zZXR0aW5ncyk7XHJcbiAgICAgICAgICAgIHBsdWdpbi5yZWZyZXNoKCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGZlYXR1cmVzR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG4gICAgc2V0dGluZ1xyXG4gICAgICAuc2V0TmFtZSgnVW5kZXJsaW5lIGludGVybmFsIGxpbmtzJylcclxuICAgICAgLnNldERlc2MoJ1Nob3cgdW5kZXJsaW5lcyBvbiBpbnRlcm5hbCBsaW5rcy4nKVxyXG4gICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuICAgICAgICB0b2dnbGUuc2V0VmFsdWUocGx1Z2luLnNldHRpbmdzLnVuZGVybGluZUludGVybmFsKS5vbkNoYW5nZSggKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MudW5kZXJsaW5lSW50ZXJuYWwgPSB2YWx1ZTtcclxuICAgICAgICAgIHZvaWQgcGx1Z2luLnNhdmVEYXRhKHBsdWdpbi5zZXR0aW5ncyk7XHJcbiAgICAgICAgICBwbHVnaW4ucmVmcmVzaCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZmVhdHVyZXNHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcbiAgICBzZXR0aW5nXHJcbiAgICAgIC5zZXROYW1lKCdVbmRlcmxpbmUgZXh0ZXJuYWwgbGlua3MnKVxyXG4gICAgICAuc2V0RGVzYygnU2hvdyB1bmRlcmxpbmVzIG9uIGV4dGVybmFsIGxpbmtzLicpXHJcbiAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG4gICAgICAgIHRvZ2dsZS5zZXRWYWx1ZShwbHVnaW4uc2V0dGluZ3MudW5kZXJsaW5lRXh0ZXJuYWwpLm9uQ2hhbmdlKCAodmFsdWUpID0+IHtcclxuICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy51bmRlcmxpbmVFeHRlcm5hbCA9IHZhbHVlO1xyXG4gICAgICAgICAgdm9pZCBwbHVnaW4uc2F2ZURhdGEocGx1Z2luLnNldHRpbmdzKTtcclxuICAgICAgICAgIHBsdWdpbi5yZWZyZXNoKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBmZWF0dXJlc0dyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuICAgIHNldHRpbmdcclxuICAgICAgLnNldE5hbWUoJ01heGltaXplIG1lZGlhJylcclxuICAgICAgLnNldERlc2MoJ0ltYWdlcyBhbmQgdmlkZW9zIGZpbGwgdGhlIHdpZHRoIG9mIHRoZSBsaW5lLicpXHJcbiAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG4gICAgICAgIHRvZ2dsZS5zZXRWYWx1ZShwbHVnaW4uc2V0dGluZ3MuZnVsbFdpZHRoTWVkaWEpLm9uQ2hhbmdlKCAodmFsdWUpID0+IHtcclxuICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy5mdWxsV2lkdGhNZWRpYSA9IHZhbHVlO1xyXG4gICAgICAgICAgdm9pZCBwbHVnaW4uc2F2ZURhdGEocGx1Z2luLnNldHRpbmdzKTtcclxuICAgICAgICAgIHBsdWdpbi5yZWZyZXNoKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBmZWF0dXJlc0dyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuICAgIC8vIEVuc3VyZSBlbmFibGVCbHVyIGV4aXN0cyBvbiBzZXR0aW5ncyBvYmplY3RcclxuICAgIGlmICghKCdlbmFibGVCbHVyJyBpbiBwbHVnaW4uc2V0dGluZ3MpKSB7XHJcbiAgICAgIChwbHVnaW4uc2V0dGluZ3MgYXMgTWluaW1hbFNldHRpbmdzICYgeyBlbmFibGVCbHVyPzogYm9vbGVhbiB9KS5lbmFibGVCbHVyID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBzZXR0aW5nXHJcbiAgICAgIC5zZXROYW1lKCdFbmFibGUgYmFja2dyb3VuZCBibHVyJylcclxuICAgICAgLnNldERlc2MoJ0FkZHMgYmFja2dyb3VuZCBibHVyIHRvIG1vZGFsIGRpYWxvZ3MuIERpc2FibGUgaWYgc2Nyb2xsaW5nIGJlY29tZXMgbGFnZ3kuIE5vdCBhdmFpbGFibGUgb24gbW9iaWxlIGRldmljZXMuJylcclxuICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcbiAgICAgICAgdG9nZ2xlLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy5lbmFibGVCbHVyKS5vbkNoYW5nZSggKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuZW5hYmxlQmx1ciA9IHZhbHVlO1xyXG4gICAgICAgICAgdm9pZCBwbHVnaW4uc2F2ZURhdGEocGx1Z2luLnNldHRpbmdzKTtcclxuICAgICAgICAgIHBsdWdpbi5yZWZyZXNoKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBmZWF0dXJlc0dyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuICAgIC8vIEVuc3VyZSB1c2VEZWZhdWx0Rm9sZGVySWNvbiBleGlzdHMgb24gc2V0dGluZ3Mgb2JqZWN0XHJcbiAgICBpZiAoISgndXNlRGVmYXVsdEZvbGRlckljb24nIGluIHBsdWdpbi5zZXR0aW5ncykpIHtcclxuICAgICAgKHBsdWdpbi5zZXR0aW5ncyBhcyBNaW5pbWFsU2V0dGluZ3MgJiB7IHVzZURlZmF1bHRGb2xkZXJJY29uPzogYm9vbGVhbiB9KS51c2VEZWZhdWx0Rm9sZGVySWNvbiA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgc2V0dGluZ1xyXG4gICAgICAuc2V0TmFtZSgnVXNlIGRlZmF1bHQgT2JzaWRpYW4gZm9sZGVyIGljb24nKVxyXG4gICAgICAuc2V0RGVzYygnVG9nZ2xlIHRvIHVzZSBPYnNpZGlhblxcJ3MgZGVmYXVsdCBmaWxlIGV4cGxvcmVyIGljb24gaW5zdGVhZCBvZiB0aGUgZm9sZGVyLWNsb3NlZCBpY29uLicpXHJcbiAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG4gICAgICAgIHRvZ2dsZS5zZXRWYWx1ZShwbHVnaW4uc2V0dGluZ3MudXNlRGVmYXVsdEZvbGRlckljb24pLm9uQ2hhbmdlKCAodmFsdWUpID0+IHtcclxuICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy51c2VEZWZhdWx0Rm9sZGVySWNvbiA9IHZhbHVlO1xyXG4gICAgICAgICAgdm9pZCBwbHVnaW4uc2F2ZURhdGEocGx1Z2luLnNldHRpbmdzKTtcclxuICAgICAgICAgIHBsdWdpbi5yZWZyZXNoKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gIH0pO1xyXG59XHJcblxyXG4iLCAiLyoqXHJcbiAqIExheW91dCBzZXR0aW5ncyBzZWN0aW9uXHJcbiAqIEltYWdlIGdyaWRzIGFuZCBibG9jayB3aWR0aCBzZXR0aW5ncyAoY2hhcnRzLCBpZnJhbWVzLCBpbWFnZXMsIG1hcHMsIHRhYmxlcylcclxuICovXHJcblxyXG5pbXBvcnQgTWluaW1hbFRoZW1lIGZyb20gJy4uLy4uL21haW4nO1xyXG5pbXBvcnQgeyBjcmVhdGVTZXR0aW5nc0dyb3VwIH0gZnJvbSAnLi4vLi4vdXRpbHMvc2V0dGluZ3MtY29tcGF0JztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBidWlsZExheW91dFNldHRpbmdzKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCwgcGx1Z2luOiBNaW5pbWFsVGhlbWUpOiB2b2lkIHtcclxuICBjb25zdCBsYXlvdXRHcm91cCA9IGNyZWF0ZVNldHRpbmdzR3JvdXAoY29udGFpbmVyRWwsICdMYXlvdXQnLCAnb3h5Z2VuLXNldHRpbmdzJyk7XHJcblxyXG4gIGxheW91dEdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuICAgIHNldHRpbmdcclxuICAgICAgLnNldE5hbWUoJ0ltYWdlIGdyaWRzJylcclxuICAgICAgLy8gRmFsc2UgcG9zaXRpdmU6IFwiRG9jdW1lbnRhdGlvblwiIGlzIGEgcHJvcGVyIG5vdW4gKHNlY3Rpb24gbmFtZSlcclxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9ic2lkaWFubWQvdWkvc2VudGVuY2UtY2FzZVxyXG4gICAgICAuc2V0RGVzYygnVHVybiBjb25zZWN1dGl2ZSBpbWFnZXMgaW50byBjb2x1bW5zIFx1MjAxNCB0byBtYWtlIGEgbmV3IHJvdywgYWRkIGFuIGV4dHJhIGxpbmUgYnJlYWsgYmV0d2VlbiBpbWFnZXMuIFRoZXNlIG9wdGlvbnMgY2FuIGFsc28gYmUgZGVmaW5lZCBvbiBhIHBlci1maWxlIGJhc2lzLCBzZWUgRG9jdW1lbnRhdGlvbiBmb3IgZGV0YWlscy4nKVxyXG4gICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuICAgICAgICB0b2dnbGUuc2V0VmFsdWUocGx1Z2luLnNldHRpbmdzLmltZ0dyaWQpLm9uQ2hhbmdlKCAodmFsdWUpID0+IHtcclxuICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy5pbWdHcmlkID0gdmFsdWU7XHJcbiAgICAgICAgICB2b2lkIHBsdWdpbi5zYXZlRGF0YShwbHVnaW4uc2V0dGluZ3MpO1xyXG4gICAgICAgICAgcGx1Z2luLnJlZnJlc2goKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGxheW91dEdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuICAgIHNldHRpbmdcclxuICAgICAgLnNldE5hbWUoJ0NoYXJ0IHdpZHRoJylcclxuICAgICAgLnNldERlc2MoJ0RlZmF1bHQgd2lkdGggZm9yIGNoYXJ0IGJsb2Nrcy4nKVxyXG4gICAgICAuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XHJcbiAgICAgICAgZHJvcGRvd25cclxuICAgICAgICAgIC5hZGRPcHRpb24oJ2NoYXJ0LWRlZmF1bHQtd2lkdGgnLCAnRGVmYXVsdCcpXHJcbiAgICAgICAgICAuYWRkT3B0aW9uKCdjaGFydC13aWRlJywgJ1dpZGUgbGluZSB3aWR0aCcpXHJcbiAgICAgICAgICAuYWRkT3B0aW9uKCdjaGFydC1tYXgnLCAnTWF4aW11bSBsaW5lIHdpZHRoJylcclxuICAgICAgICAgIC5hZGRPcHRpb24oJ2NoYXJ0LTEwMCcsICcxMDAlIHBhbmUgd2lkdGgnKVxyXG4gICAgICAgICAgLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy5jaGFydFdpZHRoKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKCAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLmNoYXJ0V2lkdGggPSB2YWx1ZTtcclxuICAgICAgICAgICAgdm9pZCBwbHVnaW4uc2F2ZURhdGEocGx1Z2luLnNldHRpbmdzKTtcclxuICAgICAgICAgICAgcGx1Z2luLnJlZnJlc2goKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgbGF5b3V0R3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG4gICAgc2V0dGluZ1xyXG4gICAgICAuc2V0TmFtZSgnSWZyYW1lIHdpZHRoJylcclxuICAgICAgLnNldERlc2MoJ0RlZmF1bHQgd2lkdGggZm9yIGlmcmFtZSBibG9ja3MuJylcclxuICAgICAgLmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xyXG4gICAgICAgIGRyb3Bkb3duXHJcbiAgICAgICAgICAuYWRkT3B0aW9uKCdpZnJhbWUtZGVmYXVsdC13aWR0aCcsICdEZWZhdWx0JylcclxuICAgICAgICAgIC5hZGRPcHRpb24oJ2lmcmFtZS13aWRlJywgJ1dpZGUgbGluZSB3aWR0aCcpXHJcbiAgICAgICAgICAuYWRkT3B0aW9uKCdpZnJhbWUtbWF4JywgJ01heGltdW0gbGluZSB3aWR0aCcpXHJcbiAgICAgICAgICAuYWRkT3B0aW9uKCdpZnJhbWUtMTAwJywgJzEwMCUgcGFuZSB3aWR0aCcpXHJcbiAgICAgICAgICAuc2V0VmFsdWUocGx1Z2luLnNldHRpbmdzLmlmcmFtZVdpZHRoKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKCAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLmlmcmFtZVdpZHRoID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHZvaWQgcGx1Z2luLnNhdmVEYXRhKHBsdWdpbi5zZXR0aW5ncyk7XHJcbiAgICAgICAgICAgIHBsdWdpbi5yZWZyZXNoKCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGxheW91dEdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuICAgIHNldHRpbmdcclxuICAgICAgLnNldE5hbWUoJ0ltYWdlIHdpZHRoJylcclxuICAgICAgLnNldERlc2MoJ0RlZmF1bHQgd2lkdGggZm9yIGltYWdlIGJsb2Nrcy4nKVxyXG4gICAgICAuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XHJcbiAgICAgICAgZHJvcGRvd25cclxuICAgICAgICAgIC5hZGRPcHRpb24oJ2ltZy1kZWZhdWx0LXdpZHRoJywgJ0RlZmF1bHQnKVxyXG4gICAgICAgICAgLmFkZE9wdGlvbignaW1nLXdpZGUnLCAnV2lkZSBsaW5lIHdpZHRoJylcclxuICAgICAgICAgIC5hZGRPcHRpb24oJ2ltZy1tYXgnLCAnTWF4aW11bSBsaW5lIHdpZHRoJylcclxuICAgICAgICAgIC5hZGRPcHRpb24oJ2ltZy0xMDAnLCAnMTAwJSBwYW5lIHdpZHRoJylcclxuICAgICAgICAgIC5zZXRWYWx1ZShwbHVnaW4uc2V0dGluZ3MuaW1nV2lkdGgpXHJcbiAgICAgICAgICAub25DaGFuZ2UoICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuaW1nV2lkdGggPSB2YWx1ZTtcclxuICAgICAgICAgICAgdm9pZCBwbHVnaW4uc2F2ZURhdGEocGx1Z2luLnNldHRpbmdzKTtcclxuICAgICAgICAgICAgcGx1Z2luLnJlZnJlc2goKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgbGF5b3V0R3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG4gICAgc2V0dGluZ1xyXG4gICAgICAuc2V0TmFtZSgnTWFwIHdpZHRoJylcclxuICAgICAgLnNldERlc2MoJ0RlZmF1bHQgd2lkdGggZm9yIG1hcCBibG9ja3MuJylcclxuICAgICAgLmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xyXG4gICAgICAgIGRyb3Bkb3duXHJcbiAgICAgICAgICAuYWRkT3B0aW9uKCdtYXAtZGVmYXVsdC13aWR0aCcsICdEZWZhdWx0JylcclxuICAgICAgICAgIC5hZGRPcHRpb24oJ21hcC13aWRlJywgJ1dpZGUgbGluZSB3aWR0aCcpXHJcbiAgICAgICAgICAuYWRkT3B0aW9uKCdtYXAtbWF4JywgJ01heGltdW0gbGluZSB3aWR0aCcpXHJcbiAgICAgICAgICAuYWRkT3B0aW9uKCdtYXAtMTAwJywgJzEwMCUgcGFuZSB3aWR0aCcpXHJcbiAgICAgICAgICAuc2V0VmFsdWUocGx1Z2luLnNldHRpbmdzLm1hcFdpZHRoKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKCAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLm1hcFdpZHRoID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHZvaWQgcGx1Z2luLnNhdmVEYXRhKHBsdWdpbi5zZXR0aW5ncyk7XHJcbiAgICAgICAgICAgIHBsdWdpbi5yZWZyZXNoKCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGxheW91dEdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuICAgIHNldHRpbmdcclxuICAgICAgLnNldE5hbWUoJ1RhYmxlIHdpZHRoJylcclxuICAgICAgLy8gRmFsc2UgcG9zaXRpdmU6IFwiRGF0YXZpZXdcIiBpcyBhIHByb3BlciBub3VuIChwbHVnaW4gbmFtZSlcclxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9ic2lkaWFubWQvdWkvc2VudGVuY2UtY2FzZVxyXG4gICAgICAuc2V0RGVzYygnRGVmYXVsdCB3aWR0aCBmb3IgdGFibGUgYW5kIERhdGF2aWV3IGJsb2Nrcy4nKVxyXG4gICAgICAuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XHJcbiAgICAgICAgZHJvcGRvd25cclxuICAgICAgICAgIC5hZGRPcHRpb24oJ3RhYmxlLWRlZmF1bHQtd2lkdGgnLCAnRGVmYXVsdCcpXHJcbiAgICAgICAgICAuYWRkT3B0aW9uKCd0YWJsZS13aWRlJywgJ1dpZGUgbGluZSB3aWR0aCcpXHJcbiAgICAgICAgICAuYWRkT3B0aW9uKCd0YWJsZS1tYXgnLCAnTWF4aW11bSBsaW5lIHdpZHRoJylcclxuICAgICAgICAgIC5hZGRPcHRpb24oJ3RhYmxlLTEwMCcsICcxMDAlIHBhbmUgd2lkdGgnKVxyXG4gICAgICAgICAgLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy50YWJsZVdpZHRoKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKCAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLnRhYmxlV2lkdGggPSB2YWx1ZTtcclxuICAgICAgICAgICAgdm9pZCBwbHVnaW4uc2F2ZURhdGEocGx1Z2luLnNldHRpbmdzKTtcclxuICAgICAgICAgICAgcGx1Z2luLnJlZnJlc2goKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICB9KTtcclxufVxyXG5cclxuIiwgIi8qKlxyXG4gKiBUeXBvZ3JhcGh5IHNldHRpbmdzIHNlY3Rpb25cclxuICogRm9udCBzaXplcywgbGluZSBoZWlnaHQsIGxpbmUgd2lkdGhzLCBlZGl0b3IgZm9udFxyXG4gKi9cclxuXHJcbmltcG9ydCBNaW5pbWFsVGhlbWUgZnJvbSAnLi4vLi4vbWFpbic7XHJcbmltcG9ydCB7IGNyZWF0ZVNldHRpbmdzR3JvdXAgfSBmcm9tICcuLi8uLi91dGlscy9zZXR0aW5ncy1jb21wYXQnO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkVHlwb2dyYXBoeVNldHRpbmdzKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCwgcGx1Z2luOiBNaW5pbWFsVGhlbWUpOiB2b2lkIHtcclxuICBjb25zdCB0eXBvZ3JhcGh5R3JvdXAgPSBjcmVhdGVTZXR0aW5nc0dyb3VwKGNvbnRhaW5lckVsLCAnVHlwb2dyYXBoeScsICdveHlnZW4tc2V0dGluZ3MnKTtcclxuXHJcbiAgdHlwb2dyYXBoeUdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuICAgIHNldHRpbmdcclxuICAgICAgLnNldE5hbWUoJ1RleHQgZm9udCBzaXplJylcclxuICAgICAgLnNldERlc2MoJ1VzZWQgZm9yIHRoZSBtYWluIHRleHQgKGRlZmF1bHQgMTYpLicpXHJcbiAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcbiAgICAgICAgdGV4dFxyXG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCcxNicpXHJcbiAgICAgICAgICAuc2V0VmFsdWUoKHBsdWdpbi5zZXR0aW5ncy50ZXh0Tm9ybWFsIHx8ICcnKSArICcnKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKCAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLnRleHROb3JtYWwgPSBwYXJzZUZsb2F0KHZhbHVlKTtcclxuICAgICAgICAgICAgdm9pZCBwbHVnaW4uc2F2ZURhdGEocGx1Z2luLnNldHRpbmdzKTtcclxuICAgICAgICAgICAgcGx1Z2luLnNldEZvbnRTaXplKCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIHR5cG9ncmFwaHlHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcbiAgICBzZXR0aW5nXHJcbiAgICAgIC5zZXROYW1lKCdTbWFsbCBmb250IHNpemUnKVxyXG4gICAgICAuc2V0RGVzYygnVXNlZCBmb3IgdGV4dCBpbiB0aGUgc2lkZWJhcnMgYW5kIHRhYnMgKGRlZmF1bHQgMTMpLicpXHJcbiAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcbiAgICAgICAgdGV4dFxyXG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCcxMycpXHJcbiAgICAgICAgICAuc2V0VmFsdWUoKHBsdWdpbi5zZXR0aW5ncy50ZXh0U21hbGwgfHwgJycpICsgJycpXHJcbiAgICAgICAgICAub25DaGFuZ2UoICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MudGV4dFNtYWxsID0gcGFyc2VGbG9hdCh2YWx1ZSk7XHJcbiAgICAgICAgICAgIHZvaWQgcGx1Z2luLnNhdmVEYXRhKHBsdWdpbi5zZXR0aW5ncyk7XHJcbiAgICAgICAgICAgIHBsdWdpbi5yZWZyZXNoKCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIHR5cG9ncmFwaHlHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcbiAgICBzZXR0aW5nXHJcbiAgICAgIC5zZXROYW1lKCdMaW5lIGhlaWdodCcpXHJcbiAgICAgIC5zZXREZXNjKCdMaW5lIGhlaWdodCBvZiB0ZXh0IChkZWZhdWx0IDEuNSkuJylcclxuICAgICAgLmFkZFRleHQoKHRleHQpID0+IHtcclxuICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJzEuNScpXHJcbiAgICAgICAgICAuc2V0VmFsdWUoKHBsdWdpbi5zZXR0aW5ncy5saW5lSGVpZ2h0IHx8ICcnKSArICcnKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKCAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLmxpbmVIZWlnaHQgPSBwYXJzZUZsb2F0KHZhbHVlKTtcclxuICAgICAgICAgICAgdm9pZCBwbHVnaW4uc2F2ZURhdGEocGx1Z2luLnNldHRpbmdzKTtcclxuICAgICAgICAgICAgcGx1Z2luLnJlZnJlc2goKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgdHlwb2dyYXBoeUdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuICAgIHNldHRpbmdcclxuICAgICAgLnNldE5hbWUoJ05vcm1hbCBsaW5lIHdpZHRoJylcclxuICAgICAgLnNldERlc2MoJ051bWJlciBvZiBjaGFyYWN0ZXJzIHBlciBsaW5lIChkZWZhdWx0IDQwKS4nKVxyXG4gICAgICAuYWRkVGV4dCgodGV4dCkgPT4ge1xyXG4gICAgICAgIHRleHRcclxuICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignNDAnKVxyXG4gICAgICAgICAgLnNldFZhbHVlKChwbHVnaW4uc2V0dGluZ3MubGluZVdpZHRoIHx8ICcnKSArICcnKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKCAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLmxpbmVXaWR0aCA9IHBhcnNlSW50KHZhbHVlLnRyaW0oKSk7XHJcbiAgICAgICAgICAgIHZvaWQgcGx1Z2luLnNhdmVEYXRhKHBsdWdpbi5zZXR0aW5ncyk7XHJcbiAgICAgICAgICAgIHBsdWdpbi5yZWZyZXNoKCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIHR5cG9ncmFwaHlHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcbiAgICBzZXR0aW5nXHJcbiAgICAgIC5zZXROYW1lKCdXaWRlIGxpbmUgd2lkdGgnKVxyXG4gICAgICAuc2V0RGVzYygnTnVtYmVyIG9mIGNoYXJhY3RlcnMgcGVyIGxpbmUgZm9yIHdpZGUgZWxlbWVudHMgKGRlZmF1bHQgNTApLicpXHJcbiAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcbiAgICAgICAgdGV4dFxyXG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCc1MCcpXHJcbiAgICAgICAgICAuc2V0VmFsdWUoKHBsdWdpbi5zZXR0aW5ncy5saW5lV2lkdGhXaWRlIHx8ICcnKSArICcnKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKCAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLmxpbmVXaWR0aFdpZGUgPSBwYXJzZUludCh2YWx1ZS50cmltKCkpO1xyXG4gICAgICAgICAgICB2b2lkIHBsdWdpbi5zYXZlRGF0YShwbHVnaW4uc2V0dGluZ3MpO1xyXG4gICAgICAgICAgICBwbHVnaW4ucmVmcmVzaCgpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICB0eXBvZ3JhcGh5R3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG4gICAgc2V0dGluZ1xyXG4gICAgICAuc2V0TmFtZSgnTWF4aW11bSBsaW5lIHdpZHRoICUnKVxyXG4gICAgICAuc2V0RGVzYygnUGVyY2VudGFnZSBvZiBzcGFjZSBpbnNpZGUgYSBwYW5lIHRoYXQgYSBsaW5lIGNhbiBmaWxsIChkZWZhdWx0IDg4KS4nKVxyXG4gICAgICAuYWRkVGV4dCgodGV4dCkgPT4ge1xyXG4gICAgICAgIHRleHRcclxuICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignODgnKVxyXG4gICAgICAgICAgLnNldFZhbHVlKChwbHVnaW4uc2V0dGluZ3MubWF4V2lkdGggfHwgJycpICsgJycpXHJcbiAgICAgICAgICAub25DaGFuZ2UoICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MubWF4V2lkdGggPSBwYXJzZUludCh2YWx1ZS50cmltKCkpO1xyXG4gICAgICAgICAgICB2b2lkIHBsdWdpbi5zYXZlRGF0YShwbHVnaW4uc2V0dGluZ3MpO1xyXG4gICAgICAgICAgICBwbHVnaW4ucmVmcmVzaCgpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICB0eXBvZ3JhcGh5R3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG4gICAgc2V0dGluZ1xyXG4gICAgICAuc2V0TmFtZSgnRWRpdG9yIGZvbnQnKVxyXG4gICAgICAuc2V0RGVzYygnT3ZlcnJpZGVzIHRoZSB0ZXh0IGZvbnQgZGVmaW5lZCBpbiBPYnNpZGlhbiBhcHBlYXJhbmNlIHNldHRpbmdzIHdoZW4gaW4gZWRpdCBtb2RlLicpXHJcbiAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcbiAgICAgICAgdGV4dFxyXG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCcnKVxyXG4gICAgICAgICAgLnNldFZhbHVlKChwbHVnaW4uc2V0dGluZ3MuZWRpdG9yRm9udCB8fCAnJykgKyAnJylcclxuICAgICAgICAgIC5vbkNoYW5nZSggKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy5lZGl0b3JGb250ID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHZvaWQgcGx1Z2luLnNhdmVEYXRhKHBsdWdpbi5zZXR0aW5ncyk7XHJcbiAgICAgICAgICAgIHBsdWdpbi5yZWZyZXNoKCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbiIsICIvKipcbiAqIEN1c3RvbSBwcmVzZXRzIHNldHRpbmdzIHNlY3Rpb25cbiAqIEVuYWJsZS9kaXNhYmxlLCBjcmVhdGUsIGltcG9ydCwgbGlzdCwgZWRpdCwgZXhwb3J0LCBkZWxldGUgcHJlc2V0c1xuICovXG5cbmltcG9ydCB7IFNldHRpbmcsIEFwcCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCBNaW5pbWFsVGhlbWUgZnJvbSAnLi4vLi4vbWFpbic7XG5pbXBvcnQgeyBDdXN0b21Db2xvclByZXNldCB9IGZyb20gJy4uLy4uL3ByZXNldHMvQ3VzdG9tUHJlc2V0JztcbmltcG9ydCB7IFByZXNldE1hbmFnZXIgfSBmcm9tICcuLi8uLi9wcmVzZXRzL1ByZXNldE1hbmFnZXInO1xuaW1wb3J0IHsgUHJlc2V0RWRpdG9yTW9kYWwgfSBmcm9tICcuLi8uLi9tb2RhbHMvUHJlc2V0RWRpdG9yTW9kYWwnO1xuaW1wb3J0IHsgUHJlc2V0SW1wb3J0TW9kYWwgfSBmcm9tICcuLi8uLi9tb2RhbHMvUHJlc2V0SW1wb3J0TW9kYWwnO1xuaW1wb3J0IHsgQ29uZmlybWF0aW9uTW9kYWwgfSBmcm9tICcuLi8uLi9tb2RhbHMvQ29uZmlybWF0aW9uTW9kYWwnO1xuaW1wb3J0IHsgZ2VuZXJhdGVDb2xvclN3YXRjaCB9IGZyb20gJy4uLy4uL3V0aWxzL2NvbG9yLXV0aWxzJztcbmltcG9ydCB7IGNyZWF0ZVNldHRpbmdzR3JvdXAgfSBmcm9tICcuLi8uLi91dGlscy9zZXR0aW5ncy1jb21wYXQnO1xuaW1wb3J0IHsgdXBkYXRlT2JzaWRpYW5BY2NlbnRDb2xvciB9IGZyb20gJy4uLy4uL3V0aWxzL3RoZW1lLXV0aWxzJztcblxuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkQ3VzdG9tUHJlc2V0U2V0dGluZ3MoXG4gIGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCxcbiAgcGx1Z2luOiBNaW5pbWFsVGhlbWUsXG4gIGFwcDogQXBwLFxuICByZWZyZXNoQ2FsbGJhY2s6ICgpID0+IHZvaWRcbik6IHZvaWQge1xuICBjb25zdCBjdXN0b21QcmVzZXRzR3JvdXAgPSBjcmVhdGVTZXR0aW5nc0dyb3VwKGNvbnRhaW5lckVsLCAnQ3VzdG9tIGNvbG9yIHNjaGVtZXMnLCAnb3h5Z2VuLXNldHRpbmdzJyk7XG5cbiAgLy8gRW5hYmxlL0Rpc2FibGUgQ3VzdG9tIFByZXNldHNcbiAgY3VzdG9tUHJlc2V0c0dyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcbiAgICBzZXR0aW5nXG4gICAgICAuc2V0TmFtZSgnRW5hYmxlIGN1c3RvbSBwcmVzZXRzJylcbiAgICAgIC5zZXREZXNjKCdBbGxvdyBjcmVhdGlvbiBhbmQgdXNlIG9mIGN1c3RvbSBjb2xvciBwcmVzZXRzJylcbiAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xuICAgICAgICB0b2dnbGUuc2V0VmFsdWUocGx1Z2luLnNldHRpbmdzLmVuYWJsZUN1c3RvbVByZXNldHMpLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy5lbmFibGVDdXN0b21QcmVzZXRzID0gdmFsdWU7XG5cbiAgICAgICAgICAvLyBJZiBkaXNhYmxpbmcsIHJlc2V0IGFueSBhY3RpdmUgY3VzdG9tIHByZXNldCBzY2hlbWVzIHRvIGRlZmF1bHRcbiAgICAgICAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgICAgICBsZXQgbmVlZHNVcGRhdGUgPSBmYWxzZTtcblxuICAgICAgICAgICAgaWYgKHBsdWdpbi5zZXR0aW5ncy5saWdodFNjaGVtZS5zdGFydHNXaXRoKCdveHlnZW4tY3VzdG9tLScpKSB7XG4gICAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy5saWdodFNjaGVtZSA9ICdveHlnZW4tb3h5Z2VuLWxpZ2h0JztcbiAgICAgICAgICAgICAgbmVlZHNVcGRhdGUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocGx1Z2luLnNldHRpbmdzLmRhcmtTY2hlbWUuc3RhcnRzV2l0aCgnb3h5Z2VuLWN1c3RvbS0nKSkge1xuICAgICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuZGFya1NjaGVtZSA9ICdveHlnZW4tb3h5Z2VuLWRhcmsnO1xuICAgICAgICAgICAgICBuZWVkc1VwZGF0ZSA9IHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChuZWVkc1VwZGF0ZSkge1xuICAgICAgICAgICAgICBwbHVnaW4udXBkYXRlU3R5bGUoKTtcbiAgICAgICAgICAgICAgcGx1Z2luLnVwZGF0ZUN1c3RvbVByZXNldENTUygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHZvaWQgcGx1Z2luLnNhdmVEYXRhKHBsdWdpbi5zZXR0aW5ncyk7XG4gICAgICAgICAgcmVmcmVzaENhbGxiYWNrKCk7IC8vIFJlZnJlc2ggdGhlIHNldHRpbmdzIHRhYlxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICB9KTtcblxuICBpZiAoIXBsdWdpbi5zZXR0aW5ncy5lbmFibGVDdXN0b21QcmVzZXRzKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gQWN0aW9uIGJ1dHRvbnNcbiAgY3VzdG9tUHJlc2V0c0dyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcbiAgICBzZXR0aW5nXG4gICAgICAuc2V0TmFtZSgnQ3JlYXRlIG5ldyBwcmVzZXQnKVxuICAgICAgLnNldERlc2MoJ0Rlc2lnbiBhIGN1c3RvbSBjb2xvciBzY2hlbWUgZnJvbSBzY3JhdGNoJylcbiAgICAgIC5hZGRFeHRyYUJ1dHRvbigoYnV0dG9uKSA9PiB7XG4gICAgICAgIGJ1dHRvblxuICAgICAgICAgIC5zZXRJY29uKCdwbHVzJylcbiAgICAgICAgICAuc2V0VG9vbHRpcCgnQ3JlYXRlIG5ldyBwcmVzZXQnKVxuICAgICAgICAgIC5vbkNsaWNrKCgpID0+IG9wZW5QcmVzZXRFZGl0b3IoYXBwLCBwbHVnaW4sIG51bGwsIHJlZnJlc2hDYWxsYmFjaykpO1xuICAgICAgfSk7XG4gIH0pO1xuXG4gIGN1c3RvbVByZXNldHNHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XG4gICAgc2V0dGluZ1xuICAgICAgLnNldE5hbWUoJ0ltcG9ydCBwcmVzZXQnKVxuICAgICAgLnNldERlc2MoJ0ltcG9ydCBhIHByZXNldCBmcm9tIEpTT04gZGF0YScpXG4gICAgICAuYWRkRXh0cmFCdXR0b24oKGJ1dHRvbikgPT4ge1xuICAgICAgICBidXR0b25cbiAgICAgICAgICAuc2V0SWNvbignZG93bmxvYWQnKVxuICAgICAgICAgIC5zZXRUb29sdGlwKCdJbXBvcnQgcHJlc2V0JylcbiAgICAgICAgICAub25DbGljaygoKSA9PiBvcGVuUHJlc2V0SW1wb3J0ZXIoYXBwLCBwbHVnaW4sIHJlZnJlc2hDYWxsYmFjaykpO1xuICAgICAgfSk7XG4gIH0pO1xuXG4gIC8vIEFkZCBzcGFjaW5nIGJlZm9yZSBwcmVzZXQgbGlzdCB0byBzZXBhcmF0ZSBmcm9tIHRoZSBncm91cFxuICBjb250YWluZXJFbC5jcmVhdGVFbCgnYnInKTtcblxuICAvLyBQcmVzZXRzIGxpc3RcbiAgaWYgKHBsdWdpbi5zZXR0aW5ncy5jdXN0b21QcmVzZXRzLmxlbmd0aCA+IDApIHtcbiAgICBjb25zdCBwcmVzZXRzTGlzdCA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2N1c3RvbS1wcmVzZXRzLWxpc3QnIH0pO1xuXG4gICAgcGx1Z2luLnNldHRpbmdzLmN1c3RvbVByZXNldHNcbiAgICAgIC5zb3J0KChhLCBiKSA9PiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpKVxuICAgICAgLmZvckVhY2gocHJlc2V0ID0+IHtcbiAgICAgICAgYWRkUHJlc2V0TGlzdEl0ZW0ocHJlc2V0c0xpc3QsIHByZXNldCwgYXBwLCBwbHVnaW4sIHJlZnJlc2hDYWxsYmFjayk7XG4gICAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBlbXB0eVN0YXRlID0gY29udGFpbmVyRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnY3VzdG9tLXByZXNldHMtZW1wdHknIH0pO1xuICAgIGVtcHR5U3RhdGUuY3JlYXRlRWwoJ3AnLCB7XG4gICAgICB0ZXh0OiAnTm8gY3VzdG9tIHByZXNldHMgeWV0LiBDcmVhdGUgeW91ciBmaXJzdCBwcmVzZXQgdG8gZ2V0IHN0YXJ0ZWQhJyxcbiAgICAgIGNsczogJ2VtcHR5LW1lc3NhZ2UnXG4gICAgfSk7XG4gIH1cblxuICAvLyBBZGQgc3BhY2luZyBhZnRlciBwcmVzZXQgbGlzdC9lbXB0eSBzdGF0ZSBmb3IgY29uc2lzdGVudCBzcGFjaW5nIGJlZm9yZSBuZXh0IHNlY3Rpb25cbiAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2JyJyk7XG59XG5cbmZ1bmN0aW9uIGFkZFByZXNldExpc3RJdGVtKFxuICBjb250YWluZXI6IEhUTUxFbGVtZW50LFxuICBwcmVzZXQ6IEN1c3RvbUNvbG9yUHJlc2V0LFxuICBhcHA6IEFwcCxcbiAgcGx1Z2luOiBNaW5pbWFsVGhlbWUsXG4gIHJlZnJlc2hDYWxsYmFjazogKCkgPT4gdm9pZFxuKTogdm9pZCB7XG4gIGNvbnN0IHByZXNldEl0ZW0gPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnY3VzdG9tLXByZXNldC1pdGVtJyB9KTtcblxuICAvLyBQcmVzZXQgaW5mb1xuICBjb25zdCBwcmVzZXRJbmZvID0gcHJlc2V0SXRlbS5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdwcmVzZXQtaW5mbycgfSk7XG5cbiAgLy8gQ29sb3Igc3dhdGNoXG4gIGNvbnN0IHN3YXRjaCA9IGdlbmVyYXRlQ29sb3JTd2F0Y2gocHJlc2V0KTtcbiAgcHJlc2V0SW5mby5hcHBlbmRDaGlsZChzd2F0Y2gpO1xuXG4gIC8vIFByZXNldCBkZXRhaWxzXG4gIGNvbnN0IGRldGFpbHMgPSBwcmVzZXRJbmZvLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ByZXNldC1kZXRhaWxzJyB9KTtcbiAgZGV0YWlscy5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiBwcmVzZXQubmFtZSwgY2xzOiAncHJlc2V0LW5hbWUnIH0pO1xuXG4gIGlmIChwcmVzZXQuYXV0aG9yKSB7XG4gICAgZGV0YWlscy5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiBgYnkgJHtwcmVzZXQuYXV0aG9yfWAsIGNsczogJ3ByZXNldC1hdXRob3InIH0pO1xuICB9XG5cbiAgZGV0YWlscy5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiBwcmVzZXQuaWQsIGNsczogJ3ByZXNldC1pZCBwcmVzZXQtaWQtZGlzcGxheScgfSk7XG5cbiAgLy8gQWN0aW9uIGJ1dHRvbnMgdXNpbmcgcHJvcGVyIE9ic2lkaWFuIEFQSVxuICBuZXcgU2V0dGluZyhwcmVzZXRJdGVtKVxuICAgIC5zZXROYW1lKCcnKVxuICAgIC5zZXREZXNjKCcnKVxuICAgIC5hZGRFeHRyYUJ1dHRvbihidXR0b24gPT4gYnV0dG9uXG4gICAgICAuc2V0SWNvbignZWRpdCcpXG4gICAgICAuc2V0VG9vbHRpcCgnRWRpdCBwcmVzZXQnKVxuICAgICAgLm9uQ2xpY2soKCkgPT4gb3BlblByZXNldEVkaXRvcihhcHAsIHBsdWdpbiwgcHJlc2V0LCByZWZyZXNoQ2FsbGJhY2spKSlcbiAgICAuYWRkRXh0cmFCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxuICAgICAgLnNldEljb24oJ2Rvd25sb2FkJylcbiAgICAgIC5zZXRUb29sdGlwKCdFeHBvcnQgcHJlc2V0JylcbiAgICAgIC5vbkNsaWNrKCgpID0+IGV4cG9ydFByZXNldChwcmVzZXQpKSlcbiAgICAuYWRkRXh0cmFCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxuICAgICAgLnNldEljb24oJ3RyYXNoJylcbiAgICAgIC5zZXRUb29sdGlwKCdEZWxldGUgcHJlc2V0JylcbiAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IGF3YWl0IGRlbGV0ZVByZXNldChhcHAsIHBsdWdpbiwgcHJlc2V0LCByZWZyZXNoQ2FsbGJhY2spKSk7XG59XG5cbmZ1bmN0aW9uIG9wZW5QcmVzZXRFZGl0b3IoXG4gIGFwcDogQXBwLFxuICBwbHVnaW46IE1pbmltYWxUaGVtZSxcbiAgcHJlc2V0OiBDdXN0b21Db2xvclByZXNldCB8IG51bGwsXG4gIHJlZnJlc2hDYWxsYmFjazogKCkgPT4gdm9pZFxuKTogdm9pZCB7XG4gIGNvbnN0IG1vZGFsID0gbmV3IFByZXNldEVkaXRvck1vZGFsKGFwcCwgcGx1Z2luLCBwcmVzZXQsICh1cGRhdGVkUHJlc2V0KSA9PiB7XG4gICAgaWYgKHByZXNldCkge1xuICAgICAgLy8gVXBkYXRlIGV4aXN0aW5nIHByZXNldFxuICAgICAgY29uc3QgaW5kZXggPSBwbHVnaW4uc2V0dGluZ3MuY3VzdG9tUHJlc2V0cy5maW5kSW5kZXgocCA9PiBwLmlkID09PSBwcmVzZXQuaWQpO1xuICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICBwbHVnaW4uc2V0dGluZ3MuY3VzdG9tUHJlc2V0c1tpbmRleF0gPSB1cGRhdGVkUHJlc2V0O1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBBZGQgbmV3IHByZXNldFxuICAgICAgcGx1Z2luLnNldHRpbmdzLmN1c3RvbVByZXNldHMucHVzaCh1cGRhdGVkUHJlc2V0KTtcbiAgICB9XG5cbiAgICB2b2lkIHBsdWdpbi5zYXZlRGF0YShwbHVnaW4uc2V0dGluZ3MpO1xuXG4gICAgLy8gVXBkYXRlIHN0eWxlcyBpZiB0aGlzIHByZXNldCBpcyBjdXJyZW50bHkgYWN0aXZlXG4gICAgY29uc3QgcHJlc2V0U2NoZW1lSWQgPSBgb3h5Z2VuLWN1c3RvbS0ke3VwZGF0ZWRQcmVzZXQuaWR9YDtcbiAgICBjb25zdCBpc0FjdGl2ZUxpZ2h0ID0gcGx1Z2luLnNldHRpbmdzLmxpZ2h0U2NoZW1lID09PSBwcmVzZXRTY2hlbWVJZDtcbiAgICBjb25zdCBpc0FjdGl2ZURhcmsgPSBwbHVnaW4uc2V0dGluZ3MuZGFya1NjaGVtZSA9PT0gcHJlc2V0U2NoZW1lSWQ7XG5cbiAgICBpZiAoaXNBY3RpdmVMaWdodCB8fCBpc0FjdGl2ZURhcmspIHtcbiAgICAgIC8vIFN5bmMgYWNjZW50IGNvbG9yIGlmIGFjdGl2ZVxuICAgICAgY29uc3QgaXNMaWdodE1vZGUgPSBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucygndGhlbWUtbGlnaHQnKTtcbiAgICAgIGlmIChpc0xpZ2h0TW9kZSAmJiBpc0FjdGl2ZUxpZ2h0KSB7XG4gICAgICAgIHVwZGF0ZU9ic2lkaWFuQWNjZW50Q29sb3IocGx1Z2luLmFwcCwgdXBkYXRlZFByZXNldC5saWdodC5hY2NlbnQpO1xuICAgICAgfSBlbHNlIGlmICghaXNMaWdodE1vZGUgJiYgaXNBY3RpdmVEYXJrKSB7XG4gICAgICAgIHVwZGF0ZU9ic2lkaWFuQWNjZW50Q29sb3IocGx1Z2luLmFwcCwgdXBkYXRlZFByZXNldC5kYXJrLmFjY2VudCk7XG4gICAgICB9XG5cbiAgICAgIHBsdWdpbi51cGRhdGVTdHlsZSgpO1xuICAgICAgcGx1Z2luLnVwZGF0ZUN1c3RvbVByZXNldENTUygpO1xuICAgIH1cblxuICAgIHJlZnJlc2hDYWxsYmFjaygpOyAvLyBSZWZyZXNoIHRoZSBzZXR0aW5ncyB0YWJcbiAgfSk7XG4gIG1vZGFsLm9wZW4oKTtcbn1cblxuZnVuY3Rpb24gb3BlblByZXNldEltcG9ydGVyKFxuICBhcHA6IEFwcCxcbiAgcGx1Z2luOiBNaW5pbWFsVGhlbWUsXG4gIHJlZnJlc2hDYWxsYmFjazogKCkgPT4gdm9pZFxuKTogdm9pZCB7XG4gIGNvbnN0IG1vZGFsID0gbmV3IFByZXNldEltcG9ydE1vZGFsKGFwcCwgcGx1Z2luLCAoaW1wb3J0ZWRQcmVzZXQpID0+IHtcbiAgICBwbHVnaW4uc2V0dGluZ3MuY3VzdG9tUHJlc2V0cy5wdXNoKGltcG9ydGVkUHJlc2V0KTtcbiAgICB2b2lkIHBsdWdpbi5zYXZlRGF0YShwbHVnaW4uc2V0dGluZ3MpO1xuICAgIHJlZnJlc2hDYWxsYmFjaygpOyAvLyBSZWZyZXNoIHRoZSBzZXR0aW5ncyB0YWJcbiAgfSk7XG4gIG1vZGFsLm9wZW4oKTtcbn1cblxuZnVuY3Rpb24gZXhwb3J0UHJlc2V0KHByZXNldDogQ3VzdG9tQ29sb3JQcmVzZXQpOiB2b2lkIHtcbiAgY29uc3QganNvbiA9IFByZXNldE1hbmFnZXIuZXhwb3J0UHJlc2V0QXNKU09OKHByZXNldCk7XG4gIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbanNvbl0sIHsgdHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nIH0pO1xuICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuXG4gIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gIGEuaHJlZiA9IHVybDtcbiAgYS5kb3dubG9hZCA9IGAke3ByZXNldC5pZH0uanNvbmA7XG4gIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7XG4gIGEuY2xpY2soKTtcbiAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChhKTtcbiAgVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBkZWxldGVQcmVzZXQoXG4gIGFwcDogQXBwLFxuICBwbHVnaW46IE1pbmltYWxUaGVtZSxcbiAgcHJlc2V0OiBDdXN0b21Db2xvclByZXNldCxcbiAgcmVmcmVzaENhbGxiYWNrOiAoKSA9PiB2b2lkXG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgLy8gQ2hlY2sgaWYgcHJlc2V0IGlzIGN1cnJlbnRseSBhY3RpdmVcbiAgY29uc3QgaXNBY3RpdmUgPSBQcmVzZXRNYW5hZ2VyLmlzUHJlc2V0QWN0aXZlKFxuICAgIHByZXNldC5pZCxcbiAgICBwbHVnaW4uc2V0dGluZ3MubGlnaHRTY2hlbWUsXG4gICAgcGx1Z2luLnNldHRpbmdzLmRhcmtTY2hlbWVcbiAgKTtcblxuICBpZiAoaXNBY3RpdmUpIHtcbiAgICAvLyBTaG93IHdhcm5pbmcgbW9kYWxcbiAgICBjb25zdCBjb25maXJtZWQgPSBhd2FpdCBDb25maXJtYXRpb25Nb2RhbC5zaG93KFxuICAgICAgYXBwLFxuICAgICAgJ0RlbGV0ZSBhY3RpdmUgcHJlc2V0JyxcbiAgICAgICdUaGlzIHByZXNldCBpcyBjdXJyZW50bHkgYWN0aXZlLiBEZWxldGluZyBpdCB3aWxsIHN3aXRjaCB0byB0aGUgZGVmYXVsdCBzY2hlbWUuIENvbnRpbnVlPycsXG4gICAgICAnRGVsZXRlJ1xuICAgICk7XG5cbiAgICBpZiAoIWNvbmZpcm1lZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFN3aXRjaCB0byBkZWZhdWx0IHNjaGVtZXNcbiAgICBpZiAocGx1Z2luLnNldHRpbmdzLmxpZ2h0U2NoZW1lID09PSBgb3h5Z2VuLWN1c3RvbS0ke3ByZXNldC5pZH1gKSB7XG4gICAgICBwbHVnaW4uc2V0dGluZ3MubGlnaHRTY2hlbWUgPSAnb3h5Z2VuLW94eWdlbi1saWdodCc7XG4gICAgfVxuICAgIGlmIChwbHVnaW4uc2V0dGluZ3MuZGFya1NjaGVtZSA9PT0gYG94eWdlbi1jdXN0b20tJHtwcmVzZXQuaWR9YCkge1xuICAgICAgcGx1Z2luLnNldHRpbmdzLmRhcmtTY2hlbWUgPSAnb3h5Z2VuLW94eWdlbi1kYXJrJztcbiAgICB9XG4gIH1cblxuICAvLyBSZW1vdmUgcHJlc2V0IGZyb20gc2V0dGluZ3NcbiAgcGx1Z2luLnNldHRpbmdzLmN1c3RvbVByZXNldHMgPSBwbHVnaW4uc2V0dGluZ3MuY3VzdG9tUHJlc2V0cy5maWx0ZXIocCA9PiBwLmlkICE9PSBwcmVzZXQuaWQpO1xuICBhd2FpdCBwbHVnaW4uc2F2ZURhdGEocGx1Z2luLnNldHRpbmdzKTtcblxuICAvLyBVcGRhdGUgc3R5bGVzXG4gIHBsdWdpbi51cGRhdGVTdHlsZSgpO1xuICBwbHVnaW4udXBkYXRlQ3VzdG9tUHJlc2V0Q1NTKCk7XG5cbiAgcmVmcmVzaENhbGxiYWNrKCk7IC8vIFJlZnJlc2ggdGhlIHNldHRpbmdzIHRhYlxufVxuXG4iLCAiLyoqXG4gKiBQcmVzZXQgbWFuYWdlbWVudCBhbmQgQ1JVRCBvcGVyYXRpb25zXG4gKi9cblxuaW1wb3J0IHsgQ3VzdG9tQ29sb3JQcmVzZXQsIEhTTENvbG9yIH0gZnJvbSAnLi9DdXN0b21QcmVzZXQnO1xuaW1wb3J0IHsgXG4gIHZhbGlkYXRlUHJlc2V0SWQsIFxuICBpc1ByZXNldElkVW5pcXVlLCBcbiAgc2FuaXRpemVQcmVzZXROYW1lLCBcbiAgZ2VuZXJhdGVQcmVzZXRJZCxcbiAgaHNsVG9IZXggXG59IGZyb20gJy4uL3V0aWxzL2NvbG9yLXV0aWxzJztcblxuLyoqXG4gKiBJbnRlcmZhY2UgZm9yIHBhcnNlZCBKU09OIHByZXNldCBkYXRhIChiZWZvcmUgdmFsaWRhdGlvbilcbiAqL1xuaW50ZXJmYWNlIFBhcnNlZFByZXNldEpTT04ge1xuICBpZD86IHVua25vd247XG4gIG5hbWU/OiB1bmtub3duO1xuICBhdXRob3I/OiB1bmtub3duO1xuICB2ZXJzaW9uPzogdW5rbm93bjtcbiAgbGlnaHQ/OiB7XG4gICAgYmFzZT86IHVua25vd247XG4gICAgYWNjZW50PzogdW5rbm93bjtcbiAgICBjb2xvcnM/OiB1bmtub3duO1xuICAgIGZyYW1lTGlnaHRuZXNzT2Zmc2V0PzogdW5rbm93bjtcbiAgfTtcbiAgZGFyaz86IHtcbiAgICBiYXNlPzogdW5rbm93bjtcbiAgICBhY2NlbnQ/OiB1bmtub3duO1xuICAgIGNvbG9ycz86IHVua25vd247XG4gICAgZnJhbWVMaWdodG5lc3NPZmZzZXQ/OiB1bmtub3duO1xuICB9O1xufVxuXG5leHBvcnQgY2xhc3MgUHJlc2V0TWFuYWdlciB7XG5cbiAgLyoqXG4gICAqIFZhbGlkYXRlIHByZXNldCBJRCBmb3JtYXQgYW5kIHVuaXF1ZW5lc3NcbiAgICovXG4gIHN0YXRpYyB2YWxpZGF0ZVByZXNldElkKGlkOiBzdHJpbmcsIGV4aXN0aW5nUHJlc2V0czogQ3VzdG9tQ29sb3JQcmVzZXRbXSwgZXhjbHVkZUlkPzogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHZhbGlkYXRlUHJlc2V0SWQoaWQpICYmIGlzUHJlc2V0SWRVbmlxdWUoaWQsIGV4aXN0aW5nUHJlc2V0cywgZXhjbHVkZUlkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTYW5pdGl6ZSBwcmVzZXQgbmFtZVxuICAgKi9cbiAgc3RhdGljIHNhbml0aXplUHJlc2V0TmFtZShuYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiBzYW5pdGl6ZVByZXNldE5hbWUobmFtZSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IHByZXNldCB3aXRoIHZhbGlkYXRpb25cbiAgICovXG4gIHN0YXRpYyBjcmVhdGVQcmVzZXQoXG4gICAgbmFtZTogc3RyaW5nLCBcbiAgICBhdXRob3I6IHN0cmluZyA9ICcnLCBcbiAgICBleGlzdGluZ1ByZXNldHM6IEN1c3RvbUNvbG9yUHJlc2V0W10gPSBbXVxuICApOiBDdXN0b21Db2xvclByZXNldCB7XG4gICAgY29uc3Qgc2FuaXRpemVkTmFtZSA9IHRoaXMuc2FuaXRpemVQcmVzZXROYW1lKG5hbWUpO1xuICAgIGlmICghc2FuaXRpemVkTmFtZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdQcmVzZXQgbmFtZSBjYW5ub3QgYmUgZW1wdHknKTtcbiAgICB9XG5cbiAgICBsZXQgaWQgPSBnZW5lcmF0ZVByZXNldElkKHNhbml0aXplZE5hbWUpO1xuICAgIGxldCBjb3VudGVyID0gMTtcbiAgICBcbiAgICAvLyBFbnN1cmUgdW5pcXVlIElEXG4gICAgd2hpbGUgKCF0aGlzLnZhbGlkYXRlUHJlc2V0SWQoaWQsIGV4aXN0aW5nUHJlc2V0cykpIHtcbiAgICAgIGlkID0gYCR7Z2VuZXJhdGVQcmVzZXRJZChzYW5pdGl6ZWROYW1lKX0tJHtjb3VudGVyfWA7XG4gICAgICBjb3VudGVyKys7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGlkLFxuICAgICAgbmFtZTogc2FuaXRpemVkTmFtZSxcbiAgICAgIGF1dGhvcjogYXV0aG9yLnRyaW0oKSxcbiAgICAgIHZlcnNpb246ICcxLjAuMCcsXG4gICAgICBsaWdodDogeyBcbiAgICAgICAgYmFzZTogeyBoOiAyMTAsIHM6IDIsIGw6IDk2IH0sICAvLyBMaWdodCBiYWNrZ3JvdW5kXG4gICAgICAgIGFjY2VudDogeyBoOiAyMDAsIHM6IDgwLCBsOiA1MCB9LFxuICAgICAgICBjb2xvcnM6IHt9XG4gICAgICB9LFxuICAgICAgZGFyazogeyBcbiAgICAgICAgYmFzZTogeyBoOiAyMTAsIHM6IDIsIGw6IDEzIH0sICAvLyBEYXJrIGJhY2tncm91bmRcbiAgICAgICAgYWNjZW50OiB7IGg6IDIwMCwgczogODAsIGw6IDUwIH0sXG4gICAgICAgIGNvbG9yczoge31cbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBhbiBleGlzdGluZyBwcmVzZXRcbiAgICovXG4gIHN0YXRpYyB1cGRhdGVQcmVzZXQoXG4gICAgaWQ6IHN0cmluZywgXG4gICAgdXBkYXRlczogUGFydGlhbDxDdXN0b21Db2xvclByZXNldD4sIFxuICAgIGV4aXN0aW5nUHJlc2V0czogQ3VzdG9tQ29sb3JQcmVzZXRbXVxuICApOiBDdXN0b21Db2xvclByZXNldCB7XG4gICAgY29uc3QgZXhpc3RpbmdQcmVzZXQgPSBleGlzdGluZ1ByZXNldHMuZmluZChwID0+IHAuaWQgPT09IGlkKTtcbiAgICBpZiAoIWV4aXN0aW5nUHJlc2V0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFByZXNldCB3aXRoIElEIFwiJHtpZH1cIiBub3QgZm91bmRgKTtcbiAgICB9XG5cbiAgICBjb25zdCB1cGRhdGVkUHJlc2V0ID0geyAuLi5leGlzdGluZ1ByZXNldCwgLi4udXBkYXRlcyB9O1xuICAgIFxuICAgIC8vIFZhbGlkYXRlIG5ldyBJRCBpZiBjaGFuZ2VkXG4gICAgaWYgKHVwZGF0ZXMuaWQgJiYgdXBkYXRlcy5pZCAhPT0gaWQpIHtcbiAgICAgIGlmICghdGhpcy52YWxpZGF0ZVByZXNldElkKHVwZGF0ZXMuaWQsIGV4aXN0aW5nUHJlc2V0cywgaWQpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgUHJlc2V0IElEIFwiJHt1cGRhdGVzLmlkfVwiIGlzIGludmFsaWQgb3IgYWxyZWFkeSBleGlzdHNgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTYW5pdGl6ZSBuYW1lIGlmIGNoYW5nZWRcbiAgICBpZiAodXBkYXRlcy5uYW1lKSB7XG4gICAgICB1cGRhdGVkUHJlc2V0Lm5hbWUgPSB0aGlzLnNhbml0aXplUHJlc2V0TmFtZSh1cGRhdGVzLm5hbWUpO1xuICAgICAgaWYgKCF1cGRhdGVkUHJlc2V0Lm5hbWUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQcmVzZXQgbmFtZSBjYW5ub3QgYmUgZW1wdHknKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdXBkYXRlZFByZXNldDtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGUgYSBwcmVzZXRcbiAgICovXG4gIHN0YXRpYyBkZWxldGVQcmVzZXQoaWQ6IHN0cmluZywgZXhpc3RpbmdQcmVzZXRzOiBDdXN0b21Db2xvclByZXNldFtdKTogQ3VzdG9tQ29sb3JQcmVzZXRbXSB7XG4gICAgcmV0dXJuIGV4aXN0aW5nUHJlc2V0cy5maWx0ZXIocHJlc2V0ID0+IHByZXNldC5pZCAhPT0gaWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4cG9ydCBwcmVzZXQgYXMgSlNPTlxuICAgKi9cbiAgc3RhdGljIGV4cG9ydFByZXNldEFzSlNPTihwcmVzZXQ6IEN1c3RvbUNvbG9yUHJlc2V0KTogc3RyaW5nIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkocHJlc2V0LCBudWxsLCAyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbXBvcnQgcHJlc2V0IGZyb20gSlNPTlxuICAgKi9cbiAgc3RhdGljIGltcG9ydFByZXNldEZyb21KU09OKGpzb246IHN0cmluZyk6IEN1c3RvbUNvbG9yUHJlc2V0IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZShqc29uKSBhcyB1bmtub3duO1xuICAgICAgXG4gICAgICAvLyBUeXBlIGd1YXJkOiBjaGVjayBpZiBwYXJzZWQgaXMgYW4gb2JqZWN0XG4gICAgICBpZiAodHlwZW9mIHBhcnNlZCAhPT0gJ29iamVjdCcgfHwgcGFyc2VkID09PSBudWxsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBwcmVzZXQgZm9ybWF0OiBub3QgYW4gb2JqZWN0Jyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IGRhdGEgPSBwYXJzZWQgYXMgUGFyc2VkUHJlc2V0SlNPTjtcbiAgICAgIFxuICAgICAgLy8gVmFsaWRhdGUgcmVxdWlyZWQgZmllbGRzXG4gICAgICBpZiAoIWRhdGEuaWQgfHwgIWRhdGEubmFtZSB8fCAhZGF0YS5saWdodCB8fCAhZGF0YS5kYXJrKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBwcmVzZXQgZm9ybWF0OiBtaXNzaW5nIHJlcXVpcmVkIGZpZWxkcycpO1xuICAgICAgfVxuXG4gICAgICAvLyBWYWxpZGF0ZSBzdHJ1Y3R1cmVcbiAgICAgIGlmICghZGF0YS5saWdodC5iYXNlIHx8ICFkYXRhLmxpZ2h0LmFjY2VudCB8fCAhZGF0YS5kYXJrLmJhc2UgfHwgIWRhdGEuZGFyay5hY2NlbnQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHByZXNldCBmb3JtYXQ6IG1pc3NpbmcgYmFzZSBvciBhY2NlbnQgY29sb3JzJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIFZhbGlkYXRlIEhTTCByYW5nZXNcbiAgICAgIGNvbnN0IHZhbGlkYXRlSFNMID0gKGhzbDogdW5rbm93bik6IGhzbCBpcyBIU0xDb2xvciA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgaHNsICE9PSAnb2JqZWN0JyB8fCBoc2wgPT09IG51bGwpIHJldHVybiBmYWxzZTtcbiAgICAgICAgY29uc3QgaCA9IChoc2wgYXMgeyBoPzogdW5rbm93biB9KS5oO1xuICAgICAgICBjb25zdCBzID0gKGhzbCBhcyB7IHM/OiB1bmtub3duIH0pLnM7XG4gICAgICAgIGNvbnN0IGwgPSAoaHNsIGFzIHsgbD86IHVua25vd24gfSkubDtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBoID09PSAnbnVtYmVyJyAmJiBoID49IDAgJiYgaCA8PSAzNjAgJiZcbiAgICAgICAgICAgICAgIHR5cGVvZiBzID09PSAnbnVtYmVyJyAmJiBzID49IDAgJiYgcyA8PSAxMDAgJiZcbiAgICAgICAgICAgICAgIHR5cGVvZiBsID09PSAnbnVtYmVyJyAmJiBsID49IDAgJiYgbCA8PSAxMDA7XG4gICAgICB9O1xuXG4gICAgICBpZiAoIXZhbGlkYXRlSFNMKGRhdGEubGlnaHQuYmFzZSkgfHwgIXZhbGlkYXRlSFNMKGRhdGEubGlnaHQuYWNjZW50KSB8fFxuICAgICAgICAgICF2YWxpZGF0ZUhTTChkYXRhLmRhcmsuYmFzZSkgfHwgIXZhbGlkYXRlSFNMKGRhdGEuZGFyay5hY2NlbnQpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBwcmVzZXQgZm9ybWF0OiBIU0wgdmFsdWVzIG91dCBvZiByYW5nZScpO1xuICAgICAgfVxuXG4gICAgICAvLyBWYWxpZGF0ZSBhbmQgZXh0cmFjdCBjb2xvcnNcbiAgICAgIGNvbnN0IGV4dHJhY3RDb2xvcnMgPSAoY29sb3JzOiB1bmtub3duKTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgY29sb3JzID09PSAnb2JqZWN0JyAmJiBjb2xvcnMgIT09IG51bGwpIHtcbiAgICAgICAgICBjb25zdCByZXN1bHQ6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcbiAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhjb2xvcnMpKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICByZXN1bHRba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7fTtcbiAgICAgIH07XG5cbiAgICAgIC8vIFZhbGlkYXRlIGZyYW1lTGlnaHRuZXNzT2Zmc2V0XG4gICAgICBjb25zdCBleHRyYWN0RnJhbWVPZmZzZXQgPSAob2Zmc2V0OiB1bmtub3duKTogbnVtYmVyIHwgdW5kZWZpbmVkID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiBvZmZzZXQgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgcmV0dXJuIG9mZnNldDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfTtcblxuICAgICAgLy8gU2FuaXRpemUgYW5kIHZhbGlkYXRlIC0gZW5zdXJlIGlkIGFuZCBuYW1lIGFyZSBzdHJpbmdzXG4gICAgICBpZiAodHlwZW9mIGRhdGEuaWQgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBwcmVzZXQgZm9ybWF0OiBpZCBtdXN0IGJlIGEgc3RyaW5nJyk7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGRhdGEubmFtZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHByZXNldCBmb3JtYXQ6IG5hbWUgbXVzdCBiZSBhIHN0cmluZycpO1xuICAgICAgfVxuICAgICAgY29uc3QgaWRTdHIgPSBkYXRhLmlkO1xuICAgICAgY29uc3QgbmFtZVN0ciA9IGRhdGEubmFtZTtcbiAgICAgIGNvbnN0IGF1dGhvclN0ciA9IHR5cGVvZiBkYXRhLmF1dGhvciA9PT0gJ3N0cmluZycgPyBkYXRhLmF1dGhvciA6ICcnO1xuICAgICAgY29uc3QgdmVyc2lvblN0ciA9IHR5cGVvZiBkYXRhLnZlcnNpb24gPT09ICdzdHJpbmcnID8gZGF0YS52ZXJzaW9uIDogJzEuMC4wJztcblxuICAgICAgY29uc3QgcHJlc2V0OiBDdXN0b21Db2xvclByZXNldCA9IHtcbiAgICAgICAgaWQ6IHRoaXMuc2FuaXRpemVQcmVzZXROYW1lKGlkU3RyKSxcbiAgICAgICAgbmFtZTogdGhpcy5zYW5pdGl6ZVByZXNldE5hbWUobmFtZVN0ciksXG4gICAgICAgIGF1dGhvcjogYXV0aG9yU3RyLFxuICAgICAgICB2ZXJzaW9uOiB2ZXJzaW9uU3RyLFxuICAgICAgICBsaWdodDoge1xuICAgICAgICAgIGJhc2U6IGRhdGEubGlnaHQuYmFzZSxcbiAgICAgICAgICBhY2NlbnQ6IGRhdGEubGlnaHQuYWNjZW50LFxuICAgICAgICAgIGNvbG9yczogZXh0cmFjdENvbG9ycyhkYXRhLmxpZ2h0LmNvbG9ycyksXG4gICAgICAgICAgZnJhbWVMaWdodG5lc3NPZmZzZXQ6IGV4dHJhY3RGcmFtZU9mZnNldChkYXRhLmxpZ2h0LmZyYW1lTGlnaHRuZXNzT2Zmc2V0KVxuICAgICAgICB9LFxuICAgICAgICBkYXJrOiB7XG4gICAgICAgICAgYmFzZTogZGF0YS5kYXJrLmJhc2UsXG4gICAgICAgICAgYWNjZW50OiBkYXRhLmRhcmsuYWNjZW50LFxuICAgICAgICAgIGNvbG9yczogZXh0cmFjdENvbG9ycyhkYXRhLmRhcmsuY29sb3JzKSxcbiAgICAgICAgICBmcmFtZUxpZ2h0bmVzc09mZnNldDogZXh0cmFjdEZyYW1lT2Zmc2V0KGRhdGEuZGFyay5mcmFtZUxpZ2h0bmVzc09mZnNldClcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgaWYgKCFwcmVzZXQuaWQgfHwgIXByZXNldC5uYW1lKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBwcmVzZXQgZm9ybWF0OiBJRCBvciBuYW1lIGlzIGVtcHR5IGFmdGVyIHNhbml0aXphdGlvbicpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcHJlc2V0O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBTeW50YXhFcnJvcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgSlNPTiBmb3JtYXQnKTtcbiAgICAgIH1cbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgcHJlc2V0IGJ5IElEXG4gICAqL1xuICBzdGF0aWMgZ2V0UHJlc2V0QnlJZChpZDogc3RyaW5nLCBwcmVzZXRzOiBDdXN0b21Db2xvclByZXNldFtdKTogQ3VzdG9tQ29sb3JQcmVzZXQgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiBwcmVzZXRzLmZpbmQocHJlc2V0ID0+IHByZXNldC5pZCA9PT0gaWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHByZXNldCBpcyBjdXJyZW50bHkgYWN0aXZlXG4gICAqL1xuICBzdGF0aWMgaXNQcmVzZXRBY3RpdmUocHJlc2V0SWQ6IHN0cmluZywgbGlnaHRTY2hlbWU6IHN0cmluZywgZGFya1NjaGVtZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGxpZ2h0U2NoZW1lID09PSBgb3h5Z2VuLWN1c3RvbS0ke3ByZXNldElkfWAgfHwgXG4gICAgICAgICAgIGRhcmtTY2hlbWUgPT09IGBveHlnZW4tY3VzdG9tLSR7cHJlc2V0SWR9YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBhIHByZXZpZXcgb2YgdGhlIHByZXNldCBjb2xvcnNcbiAgICovXG4gIHN0YXRpYyBnZW5lcmF0ZVByZXNldFByZXZpZXcocHJlc2V0OiBDdXN0b21Db2xvclByZXNldCk6IHsgbGlnaHQ6IHN0cmluZ1tdLCBkYXJrOiBzdHJpbmdbXSB9IHtcbiAgICByZXR1cm4ge1xuICAgICAgbGlnaHQ6IFtcbiAgICAgICAgaHNsVG9IZXgocHJlc2V0LmxpZ2h0LmJhc2UpLFxuICAgICAgICBoc2xUb0hleChwcmVzZXQubGlnaHQuYWNjZW50KSxcbiAgICAgICAgcHJlc2V0LmxpZ2h0LmNvbG9ycz8uYmcxIHx8IGhzbFRvSGV4KHByZXNldC5saWdodC5iYXNlKSxcbiAgICAgICAgcHJlc2V0LmxpZ2h0LmNvbG9ycz8udHgxIHx8IGhzbFRvSGV4KHsgLi4ucHJlc2V0LmxpZ2h0LmJhc2UsIGw6IE1hdGgubWF4KDAsIHByZXNldC5saWdodC5iYXNlLmwgLSAzMCkgfSlcbiAgICAgIF0sXG4gICAgICBkYXJrOiBbXG4gICAgICAgIGhzbFRvSGV4KHByZXNldC5kYXJrLmJhc2UpLFxuICAgICAgICBoc2xUb0hleChwcmVzZXQuZGFyay5hY2NlbnQpLFxuICAgICAgICBwcmVzZXQuZGFyay5jb2xvcnM/LmJnMSB8fCBoc2xUb0hleChwcmVzZXQuZGFyay5iYXNlKSxcbiAgICAgICAgcHJlc2V0LmRhcmsuY29sb3JzPy50eDEgfHwgaHNsVG9IZXgoeyAuLi5wcmVzZXQuZGFyay5iYXNlLCBsOiBNYXRoLm1pbigxMDAsIHByZXNldC5kYXJrLmJhc2UubCArIDMwKSB9KVxuICAgICAgXVxuICAgIH07XG4gIH1cbn1cbiIsICIvKipcbiAqIE1vZGFsIGZvciBjcmVhdGluZyBhbmQgZWRpdGluZyBjdXN0b20gY29sb3IgcHJlc2V0c1xuICogUmVmYWN0b3JlZCB0byB1c2UgZXh0cmFjdGVkIFVJIGNvbXBvbmVudHMgYW5kIHV0aWxpdGllc1xuICovXG5cbmltcG9ydCB7IE1vZGFsLCBTZXR0aW5nLCBBcHAsIHNldEljb24gfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBDdXN0b21Db2xvclByZXNldCB9IGZyb20gJy4uL3ByZXNldHMvQ3VzdG9tUHJlc2V0JztcbmltcG9ydCB7IFByZXNldE1hbmFnZXIgfSBmcm9tICcuLi9wcmVzZXRzL1ByZXNldE1hbmFnZXInO1xuaW1wb3J0IHsgaHNsVG9IZXggfSBmcm9tICcuLi91dGlscy9jb2xvci11dGlscyc7XG5pbXBvcnQgeyBjcmVhdGVIU0xDb250cm9scywgY3JlYXRlQ29sb3JPdmVycmlkZSB9IGZyb20gJy4vY29tcG9uZW50cy9QcmVzZXRDb2xvckNvbnRyb2xzJztcbmltcG9ydCB7IHNldENzc1Byb3AgfSBmcm9tICcuLi91dGlscy9jc3MtcHJvcHMnO1xuaW1wb3J0IHsgdXBkYXRlT2JzaWRpYW5BY2NlbnRDb2xvciB9IGZyb20gJy4uL3V0aWxzL3RoZW1lLXV0aWxzJztcbmltcG9ydCBNaW5pbWFsVGhlbWUgZnJvbSAnLi4vbWFpbic7XG5cbmV4cG9ydCBjbGFzcyBQcmVzZXRFZGl0b3JNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgcHJpdmF0ZSBwcmVzZXQ6IEN1c3RvbUNvbG9yUHJlc2V0O1xuICBwcml2YXRlIGlzRWRpdGluZzogYm9vbGVhbjtcbiAgcHJpdmF0ZSBvblNhdmU6IChwcmVzZXQ6IEN1c3RvbUNvbG9yUHJlc2V0KSA9PiB2b2lkO1xuICBwcml2YXRlIHBsdWdpbjogTWluaW1hbFRoZW1lO1xuXG4gIC8vIEZvcm0gZWxlbWVudHNcbiAgcHJpdmF0ZSBuYW1lSW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQ7XG4gIHByaXZhdGUgYXV0aG9ySW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQ7XG4gIHByaXZhdGUgcHJldmlld1N3YXRjaDogSFRNTEVsZW1lbnQ7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgYXBwOiBBcHAsXG4gICAgcGx1Z2luOiBNaW5pbWFsVGhlbWUsXG4gICAgcHJlc2V0OiBDdXN0b21Db2xvclByZXNldCB8IG51bGwsXG4gICAgb25TYXZlOiAocHJlc2V0OiBDdXN0b21Db2xvclByZXNldCkgPT4gdm9pZFxuICApIHtcbiAgICBzdXBlcihhcHApO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIHRoaXMuaXNFZGl0aW5nID0gcHJlc2V0ICE9PSBudWxsO1xuICAgIHRoaXMucHJlc2V0ID0gcHJlc2V0IHx8IHRoaXMuY3JlYXRlRGVmYXVsdFByZXNldCgpO1xuICAgIHRoaXMub25TYXZlID0gb25TYXZlO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVEZWZhdWx0UHJlc2V0KCk6IEN1c3RvbUNvbG9yUHJlc2V0IHtcbiAgICByZXR1cm4gUHJlc2V0TWFuYWdlci5jcmVhdGVQcmVzZXQoJ05ldyBQcmVzZXQnLCAnJywgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tUHJlc2V0cyk7XG4gIH1cblxuICBvbk9wZW4oKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgY29udGVudEVsLmFkZENsYXNzKCdwcmVzZXQtZWRpdG9yLW1vZGFsJyk7XG5cbiAgICAvLyBIZWFkZXJcbiAgICBjb25zdCBoZWFkZXIgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnbW9kYWwtaGVhZGVyJyB9KTtcbiAgICBoZWFkZXIuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiB0aGlzLmlzRWRpdGluZyA/ICdFZGl0IHByZXNldCcgOiAnQ3JlYXRlIG5ldyBwcmVzZXQnIH0pO1xuXG4gICAgLy8gQmFzaWMgaW5mbyBzZWN0aW9uXG4gICAgY29uc3QgYmFzaWNJbmZvID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ21vZGFsLXNlY3Rpb24nIH0pO1xuXG4gICAgbmV3IFNldHRpbmcoYmFzaWNJbmZvKVxuICAgICAgLnNldE5hbWUoJ1ByZXNldCBuYW1lJylcbiAgICAgIC5zZXREZXNjKCdBIHVuaXF1ZSBuYW1lIGZvciB5b3VyIGNvbG9yIHByZXNldCcpXG4gICAgICAuYWRkVGV4dCh0ZXh0ID0+IHtcbiAgICAgICAgdGhpcy5uYW1lSW5wdXQgPSB0ZXh0LmlucHV0RWw7XG4gICAgICAgIHRleHQuc2V0VmFsdWUodGhpcy5wcmVzZXQubmFtZSlcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ0VudGVyIHByZXNldCBuYW1lJylcbiAgICAgICAgICAub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5wcmVzZXQubmFtZSA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVQcmV2aWV3KCk7XG4gICAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgIG5ldyBTZXR0aW5nKGJhc2ljSW5mbylcbiAgICAgIC5zZXROYW1lKCdBdXRob3IgKG9wdGlvbmFsKScpXG4gICAgICAuc2V0RGVzYygnWW91ciBuYW1lIG9yIHRoZSBjcmVhdG9yIG9mIHRoaXMgcHJlc2V0JylcbiAgICAgIC5hZGRUZXh0KHRleHQgPT4ge1xuICAgICAgICB0aGlzLmF1dGhvcklucHV0ID0gdGV4dC5pbnB1dEVsO1xuICAgICAgICB0ZXh0LnNldFZhbHVlKHRoaXMucHJlc2V0LmF1dGhvciB8fCAnJylcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ0VudGVyIGF1dGhvciBuYW1lJylcbiAgICAgICAgICAub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5wcmVzZXQuYXV0aG9yID0gdmFsdWU7XG4gICAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgIC8vIENvbnRlbnQgYXJlYSAtIHNob3cgYm90aCBtb2RlcyBsaW5lYXJseVxuICAgIGNvbnN0IGNvbnRlbnRBcmVhID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ21vZGVzLWNvbnRhaW5lcicgfSk7XG5cbiAgICAvLyBMaWdodCBtb2RlIHNlY3Rpb25cbiAgICBjb25zdCBsaWdodFNlY3Rpb24gPSBjb250ZW50QXJlYS5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdtb2RlLXNlY3Rpb24nIH0pO1xuICAgIGxpZ2h0U2VjdGlvbi5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdMaWdodCBtb2RlJyB9KTtcbiAgICB0aGlzLmJ1aWxkTW9kZUNvbnRlbnQobGlnaHRTZWN0aW9uLCAnbGlnaHQnKTtcblxuICAgIC8vIERhcmsgbW9kZSBzZWN0aW9uXG4gICAgY29uc3QgZGFya1NlY3Rpb24gPSBjb250ZW50QXJlYS5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdtb2RlLXNlY3Rpb24nIH0pO1xuICAgIGRhcmtTZWN0aW9uLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0RhcmsgbW9kZScgfSk7XG4gICAgdGhpcy5idWlsZE1vZGVDb250ZW50KGRhcmtTZWN0aW9uLCAnZGFyaycpO1xuXG4gICAgLy8gUHJldmlldyBzZWN0aW9uXG4gICAgY29uc3QgcHJldmlld1NlY3Rpb24gPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnbW9kYWwtc2VjdGlvbicgfSk7XG4gICAgcHJldmlld1NlY3Rpb24uY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnUHJldmlldycgfSk7XG4gICAgdGhpcy5wcmV2aWV3U3dhdGNoID0gcHJldmlld1NlY3Rpb24uY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncHJldmlldy1zd2F0Y2gnIH0pO1xuICAgIHRoaXMudXBkYXRlUHJldmlldygpO1xuXG4gICAgLy8gRm9vdGVyIGJ1dHRvbnNcbiAgICBjb25zdCBmb290ZXIgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnbW9kYWwtZm9vdGVyJyB9KTtcblxuICAgIGNvbnN0IGNhbmNlbEJ0biA9IGZvb3Rlci5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnQ2FuY2VsJywgY2xzOiAnbW9kLWN0YScgfSk7XG4gICAgY2FuY2VsQnRuLm9uY2xpY2sgPSAoKSA9PiB0aGlzLmNsb3NlKCk7XG5cbiAgICBjb25zdCBzYXZlQnRuID0gZm9vdGVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiB0aGlzLmlzRWRpdGluZyA/ICdVcGRhdGUnIDogJ0NyZWF0ZScsXG4gICAgICBjbHM6ICdtb2QtY3RhJ1xuICAgIH0pO1xuICAgIHNhdmVCdG4ub25jbGljayA9ICgpID0+IHRoaXMuc2F2ZVByZXNldCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBidWlsZE1vZGVDb250ZW50KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIG1vZGU6ICdsaWdodCcgfCAnZGFyaycpIHtcbiAgICBjb250YWluZXIuZW1wdHkoKTtcbiAgICBjb25zdCBwYWxldHRlID0gbW9kZSA9PT0gJ2xpZ2h0JyA/IHRoaXMucHJlc2V0LmxpZ2h0IDogdGhpcy5wcmVzZXQuZGFyaztcblxuICAgIC8vIFJlcXVpcmVkIGNvbG9ycyBzZWN0aW9uXG4gICAgY29uc3QgcmVxdWlyZWRTZWN0aW9uID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2NvbG9yLXNlY3Rpb24nIH0pO1xuICAgIGNvbnN0IGhlYWRlclRleHQgPSBtb2RlID09PSAnbGlnaHQnID8gJ0xpZ2h0IHRoZW1lIGNvbG9ycycgOiAnRGFyayB0aGVtZSBjb2xvcnMnO1xuICAgIHJlcXVpcmVkU2VjdGlvbi5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6IGhlYWRlclRleHQgfSk7XG5cbiAgICAvLyBCYXNlIGNvbG9yXG4gICAgY29uc3QgYmFzZVNlY3Rpb24gPSByZXF1aXJlZFNlY3Rpb24uY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnY29sb3ItZ3JvdXAnIH0pO1xuICAgIGJhc2VTZWN0aW9uLmNyZWF0ZUVsKCdsYWJlbCcsIHsgdGV4dDogJ0Jhc2UgY29sb3InIH0pO1xuICAgIGNyZWF0ZUhTTENvbnRyb2xzKGJhc2VTZWN0aW9uLCBwYWxldHRlLmJhc2UsIChoc2wpID0+IHtcbiAgICAgIGlmIChtb2RlID09PSAnbGlnaHQnKSB7XG4gICAgICAgIHRoaXMucHJlc2V0LmxpZ2h0LmJhc2UgPSBoc2w7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnByZXNldC5kYXJrLmJhc2UgPSBoc2w7XG4gICAgICB9XG4gICAgICB0aGlzLnVwZGF0ZVByZXZpZXcoKTtcbiAgICB9KTtcblxuICAgIC8vIEFjY2VudCBjb2xvclxuICAgIGNvbnN0IGFjY2VudFNlY3Rpb24gPSByZXF1aXJlZFNlY3Rpb24uY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnY29sb3ItZ3JvdXAnIH0pO1xuICAgIGFjY2VudFNlY3Rpb24uY3JlYXRlRWwoJ2xhYmVsJywgeyB0ZXh0OiAnQWNjZW50IGNvbG9yJyB9KTtcbiAgICBjcmVhdGVIU0xDb250cm9scyhhY2NlbnRTZWN0aW9uLCBwYWxldHRlLmFjY2VudCwgKGhzbCkgPT4ge1xuICAgICAgaWYgKG1vZGUgPT09ICdsaWdodCcpIHtcbiAgICAgICAgdGhpcy5wcmVzZXQubGlnaHQuYWNjZW50ID0gaHNsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5wcmVzZXQuZGFyay5hY2NlbnQgPSBoc2w7XG4gICAgICB9XG4gICAgICB0aGlzLnVwZGF0ZVByZXZpZXcoKTtcbiAgICB9KTtcblxuICAgIC8vIENvbG9yZnVsIGZyYW1lIGxpZ2h0bmVzcyBvdmVycmlkZSAob3B0aW9uYWwpXG4gICAgY29uc3QgZnJhbWVTZWN0aW9uID0gcmVxdWlyZWRTZWN0aW9uLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2NvbG9yLWdyb3VwJyB9KTtcbiAgICBmcmFtZVNlY3Rpb24uY3JlYXRlRWwoJ2xhYmVsJywgeyB0ZXh0OiAnQ29sb3JmdWwgZnJhbWUgbGlnaHRuZXNzIG92ZXJyaWRlIChvcHRpb25hbCknLCBjbHM6ICdmcmFtZS1sYWJlbCcgfSk7XG4gICAgY29uc3QgZnJhbWVEZXNjID0gZnJhbWVTZWN0aW9uLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3NldHRpbmctaXRlbS1kZXNjcmlwdGlvbiBmcmFtZS1kZXNjcmlwdGlvbicgfSk7XG4gICAgZnJhbWVEZXNjLnRleHRDb250ZW50ID0gbW9kZSA9PT0gJ2RhcmsnXG4gICAgICA/ICdPZmZzZXQgZnJvbSBhY2NlbnQgbGlnaHRuZXNzIGZvciBjb2xvcmZ1bCBmcmFtZS4gRGVmYXVsdDogLTI1IChkYXJrZW5zIGJ5IDI1JSkuIExlYXZlIGVtcHR5IGZvciBkZWZhdWx0LidcbiAgICAgIDogJ09mZnNldCBmcm9tIGFjY2VudCBsaWdodG5lc3MgZm9yIGNvbG9yZnVsIGZyYW1lLiBEZWZhdWx0OiArMzAgKGJyaWdodGVucyBieSAzMCUpLiBMZWF2ZSBlbXB0eSBmb3IgZGVmYXVsdC4nO1xuXG4gICAgY29uc3QgZnJhbWVJbnB1dCA9IGZyYW1lU2VjdGlvbi5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICdudW1iZXInLCBjbHM6ICdmcmFtZS1pbnB1dCcgfSk7XG4gICAgZnJhbWVJbnB1dC5wbGFjZWhvbGRlciA9IG1vZGUgPT09ICdkYXJrJyA/ICctMjUnIDogJyszMCc7XG4gICAgZnJhbWVJbnB1dC5taW4gPSAnLTEwMCc7XG4gICAgZnJhbWVJbnB1dC5tYXggPSAnMTAwJztcbiAgICBmcmFtZUlucHV0LnN0ZXAgPSAnNSc7XG4gICAgaWYgKHBhbGV0dGUuZnJhbWVMaWdodG5lc3NPZmZzZXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgZnJhbWVJbnB1dC52YWx1ZSA9IHBhbGV0dGUuZnJhbWVMaWdodG5lc3NPZmZzZXQudG9TdHJpbmcoKTtcbiAgICB9XG5cbiAgICBmcmFtZUlucHV0Lm9uaW5wdXQgPSAoKSA9PiB7XG4gICAgICBjb25zdCB2YWx1ZSA9IGZyYW1lSW5wdXQudmFsdWUudHJpbSgpO1xuICAgICAgaWYgKHZhbHVlID09PSAnJykge1xuICAgICAgICAvLyBDbGVhciBvdmVycmlkZSAtIHVzZSB0aGVtZSBkZWZhdWx0XG4gICAgICAgIGlmIChtb2RlID09PSAnbGlnaHQnKSB7XG4gICAgICAgICAgZGVsZXRlIHRoaXMucHJlc2V0LmxpZ2h0LmZyYW1lTGlnaHRuZXNzT2Zmc2V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRlbGV0ZSB0aGlzLnByZXNldC5kYXJrLmZyYW1lTGlnaHRuZXNzT2Zmc2V0O1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBvZmZzZXQgPSBwYXJzZUludCh2YWx1ZSk7XG4gICAgICAgIGlmICghaXNOYU4ob2Zmc2V0KSkge1xuICAgICAgICAgIGlmIChtb2RlID09PSAnbGlnaHQnKSB7XG4gICAgICAgICAgICB0aGlzLnByZXNldC5saWdodC5mcmFtZUxpZ2h0bmVzc09mZnNldCA9IG9mZnNldDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wcmVzZXQuZGFyay5mcmFtZUxpZ2h0bmVzc09mZnNldCA9IG9mZnNldDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMudXBkYXRlUHJldmlldygpO1xuICAgIH07XG5cbiAgICAvLyBBZHZhbmNlZCBvdmVycmlkZXMgKGNvbGxhcHNpYmxlKVxuICAgIGNvbnN0IGFkdmFuY2VkU2VjdGlvbiA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdjb2xvci1zZWN0aW9uJyB9KTtcbiAgICBjb25zdCBhZHZhbmNlZEhlYWRlciA9IGFkdmFuY2VkU2VjdGlvbi5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdjb2xsYXBzaWJsZS1oZWFkZXInIH0pO1xuICAgIGFkdmFuY2VkSGVhZGVyLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ0FkdmFuY2VkIG92ZXJyaWRlcyAob3B0aW9uYWwpJyB9KTtcbiAgICBjb25zdCBhZHZhbmNlZFRvZ2dsZSA9IGFkdmFuY2VkSGVhZGVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICBjbHM6ICdjb2xsYXBzZS10b2dnbGUnXG4gICAgfSk7XG4gICAgc2V0SWNvbihhZHZhbmNlZFRvZ2dsZSwgJ2NoZXZyb24tZG93bicpO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSBjb2xvcnMgb2JqZWN0IGlmIG5vdCBleGlzdHNcbiAgICBpZiAoIXBhbGV0dGUuY29sb3JzKSB7XG4gICAgICBwYWxldHRlLmNvbG9ycyA9IHt9O1xuICAgIH1cblxuICAgIC8vIENyZWF0ZSBjb2xvciBvdmVycmlkZXNcbiAgICBjb25zdCBhZHZhbmNlZEl0ZW1zOiBIVE1MRWxlbWVudFtdID0gW107XG4gICAgY29uc3Qgb3ZlcnJpZGVLZXlzID0gWydiZzEnLCAnYmcyJywgJ2JnMycsICd1aTEnLCAndWkyJywgJ3VpMycsICd0eDEnLCAndHgyJywgJ3R4MycsICd0eDQnLCAnaGwxJywgJ2hsMiddO1xuICAgIGNvbnN0IG92ZXJyaWRlTGFiZWxzID0gWydCYWNrZ3JvdW5kIDEnLCAnQmFja2dyb3VuZCAyJywgJ0JhY2tncm91bmQgMycsICdVSSAxJywgJ1VJIDInLCAnVUkgMycsICdUZXh0IDEnLCAnVGV4dCAyJywgJ1RleHQgMycsICdUZXh0IDQnLCAnSGlnaGxpZ2h0IDEnLCAnSGlnaGxpZ2h0IDInXTtcbiAgICBjb25zdCBjb2xvcnMgPSBwYWxldHRlLmNvbG9yczsgLy8gVHlwZVNjcmlwdCBub3cga25vd3MgdGhpcyBpcyBkZWZpbmVkXG5cbiAgICBvdmVycmlkZUtleXMuZm9yRWFjaCgoa2V5LCBpbmRleCkgPT4ge1xuICAgICAgY29uc3QgaXRlbSA9IGNyZWF0ZUNvbG9yT3ZlcnJpZGUoXG4gICAgICAgIGFkdmFuY2VkU2VjdGlvbixcbiAgICAgICAgb3ZlcnJpZGVMYWJlbHNbaW5kZXhdLFxuICAgICAgICBrZXksXG4gICAgICAgIGNvbG9ycyxcbiAgICAgICAgcGFsZXR0ZSxcbiAgICAgICAgKCkgPT4gdGhpcy51cGRhdGVQcmV2aWV3KClcbiAgICAgICk7XG4gICAgICBhZHZhbmNlZEl0ZW1zLnB1c2goaXRlbSk7XG4gICAgICBpdGVtLmFkZENsYXNzKCdjb2xsYXBzaWJsZS1jb250ZW50LWl0ZW0nKTsgLy8gSGlkZSBieSBkZWZhdWx0XG4gICAgfSk7XG5cbiAgICAvLyBUb2dnbGUgdmlzaWJpbGl0eVxuICAgIGFkdmFuY2VkVG9nZ2xlLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICBjb25zdCBpc0NvbGxhcHNlZCA9ICFhZHZhbmNlZEl0ZW1zWzBdLmNsYXNzTGlzdC5jb250YWlucygnZXhwYW5kZWQnKTtcbiAgICAgIGFkdmFuY2VkSXRlbXMuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgaWYgKGlzQ29sbGFwc2VkKSB7XG4gICAgICAgICAgaXRlbS5hZGRDbGFzcygnZXhwYW5kZWQnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpdGVtLnJlbW92ZUNsYXNzKCdleHBhbmRlZCcpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHNldEljb24oYWR2YW5jZWRUb2dnbGUsIGlzQ29sbGFwc2VkID8gJ2NoZXZyb24tdXAnIDogJ2NoZXZyb24tZG93bicpO1xuICAgIH07XG5cbiAgICAvLyBTeW50YXggY29sb3JzIChjb2xsYXBzaWJsZSlcbiAgICBjb25zdCBzeW50YXhTZWN0aW9uID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2NvbG9yLXNlY3Rpb24nIH0pO1xuICAgIGNvbnN0IHN5bnRheEhlYWRlciA9IHN5bnRheFNlY3Rpb24uY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnY29sbGFwc2libGUtaGVhZGVyJyB9KTtcbiAgICBzeW50YXhIZWFkZXIuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnU3ludGF4IGNvbG9ycyAob3B0aW9uYWwpJyB9KTtcbiAgICBjb25zdCBzeW50YXhUb2dnbGUgPSBzeW50YXhIZWFkZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIGNsczogJ2NvbGxhcHNlLXRvZ2dsZSdcbiAgICB9KTtcbiAgICBzZXRJY29uKHN5bnRheFRvZ2dsZSwgJ2NoZXZyb24tZG93bicpO1xuXG4gICAgLy8gQ3JlYXRlIHN5bnRheCBjb2xvciBvdmVycmlkZXNcbiAgICBjb25zdCBzeW50YXhDb2xvcnMgPSBbJ3JlZCcsICdvcmFuZ2UnLCAneWVsbG93JywgJ2dyZWVuJywgJ2N5YW4nLCAnYmx1ZScsICdwdXJwbGUnLCAncGluayddO1xuICAgIGNvbnN0IHN5bnRheEl0ZW1zOiBIVE1MRWxlbWVudFtdID0gW107XG5cbiAgICBzeW50YXhDb2xvcnMuZm9yRWFjaChjb2xvciA9PiB7XG4gICAgICBjb25zdCBpdGVtID0gY3JlYXRlQ29sb3JPdmVycmlkZShcbiAgICAgICAgc3ludGF4U2VjdGlvbixcbiAgICAgICAgY29sb3IuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBjb2xvci5zbGljZSgxKSxcbiAgICAgICAgY29sb3IsXG4gICAgICAgIGNvbG9ycyxcbiAgICAgICAgcGFsZXR0ZSxcbiAgICAgICAgKCkgPT4gdGhpcy51cGRhdGVQcmV2aWV3KClcbiAgICAgICk7XG4gICAgICBzeW50YXhJdGVtcy5wdXNoKGl0ZW0pO1xuICAgICAgaXRlbS5hZGRDbGFzcygnY29sbGFwc2libGUtY29udGVudC1pdGVtJyk7IC8vIEhpZGUgYnkgZGVmYXVsdFxuICAgIH0pO1xuXG4gICAgLy8gVG9nZ2xlIHZpc2liaWxpdHlcbiAgICBzeW50YXhUb2dnbGUub25jbGljayA9ICgpID0+IHtcbiAgICAgIGNvbnN0IGlzQ29sbGFwc2VkID0gIXN5bnRheEl0ZW1zWzBdLmNsYXNzTGlzdC5jb250YWlucygnZXhwYW5kZWQnKTtcbiAgICAgIHN5bnRheEl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgIGlmIChpc0NvbGxhcHNlZCkge1xuICAgICAgICAgIGl0ZW0uYWRkQ2xhc3MoJ2V4cGFuZGVkJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXRlbS5yZW1vdmVDbGFzcygnZXhwYW5kZWQnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBzZXRJY29uKHN5bnRheFRvZ2dsZSwgaXNDb2xsYXBzZWQgPyAnY2hldnJvbi11cCcgOiAnY2hldnJvbi1kb3duJyk7XG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlUHJldmlldygpIHtcbiAgICB0aGlzLnByZXZpZXdTd2F0Y2guZW1wdHkoKTtcblxuICAgIC8vIExpdmUgcHJldmlldzogdGVtcG9yYXJpbHkgdXBkYXRlIHRoZSBwbHVnaW4ncyBwcmVzZXQgZGF0YSB0byBzaG93IGNoYW5nZXMgaW4gcmVhbC10aW1lXG4gICAgY29uc3QgcHJlc2V0SW5kZXggPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21QcmVzZXRzLmZpbmRJbmRleChwID0+IHAuaWQgPT09IHRoaXMucHJlc2V0LmlkKTtcbiAgICBpZiAocHJlc2V0SW5kZXggIT09IC0xKSB7XG4gICAgICAvLyBUZW1wb3JhcmlseSB1cGRhdGUgdGhlIHByZXNldCBpbiBzZXR0aW5nc1xuICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tUHJlc2V0c1twcmVzZXRJbmRleF0gPSB0aGlzLnByZXNldDtcblxuICAgICAgLy8gQXBwbHkgY2hhbmdlcyBpZiB0aGlzIHByZXNldCBpcyBjdXJyZW50bHkgYWN0aXZlXG4gICAgICBjb25zdCBwcmVzZXRTY2hlbWVJZCA9IGBveHlnZW4tY3VzdG9tLSR7dGhpcy5wcmVzZXQuaWR9YDtcbiAgICAgIGNvbnN0IGlzQWN0aXZlTGlnaHQgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5saWdodFNjaGVtZSA9PT0gcHJlc2V0U2NoZW1lSWQ7XG4gICAgICBjb25zdCBpc0FjdGl2ZURhcmsgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kYXJrU2NoZW1lID09PSBwcmVzZXRTY2hlbWVJZDtcblxuICAgICAgaWYgKGlzQWN0aXZlTGlnaHQgfHwgaXNBY3RpdmVEYXJrKSB7XG4gICAgICAgIC8vIFN5bmMgYWNjZW50IGNvbG9yIGlmIGFjdGl2ZVxuICAgICAgICBjb25zdCBpc0xpZ2h0TW9kZSA9IGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCd0aGVtZS1saWdodCcpO1xuICAgICAgICBpZiAoaXNMaWdodE1vZGUgJiYgaXNBY3RpdmVMaWdodCkge1xuICAgICAgICAgIHVwZGF0ZU9ic2lkaWFuQWNjZW50Q29sb3IodGhpcy5wbHVnaW4uYXBwLCB0aGlzLnByZXNldC5saWdodC5hY2NlbnQpO1xuICAgICAgICB9IGVsc2UgaWYgKCFpc0xpZ2h0TW9kZSAmJiBpc0FjdGl2ZURhcmspIHtcbiAgICAgICAgICB1cGRhdGVPYnNpZGlhbkFjY2VudENvbG9yKHRoaXMucGx1Z2luLmFwcCwgdGhpcy5wcmVzZXQuZGFyay5hY2NlbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5wbHVnaW4udXBkYXRlU3R5bGUoKTtcbiAgICAgICAgdGhpcy5wbHVnaW4udXBkYXRlQ3VzdG9tUHJlc2V0Q1NTKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gR2V0IGNvbG9ycyBmb3IgYm90aCBtb2Rlc1xuICAgIGNvbnN0IGxpZ2h0UGFsZXR0ZSA9IHRoaXMucHJlc2V0LmxpZ2h0O1xuICAgIGNvbnN0IGRhcmtQYWxldHRlID0gdGhpcy5wcmVzZXQuZGFyaztcblxuICAgIGNvbnN0IGxpZ2h0QmFzZUhleCA9IGhzbFRvSGV4KGxpZ2h0UGFsZXR0ZS5iYXNlKTtcbiAgICBjb25zdCBsaWdodEFjY2VudEhleCA9IGhzbFRvSGV4KGxpZ2h0UGFsZXR0ZS5hY2NlbnQpO1xuICAgIGNvbnN0IGRhcmtCYXNlSGV4ID0gaHNsVG9IZXgoZGFya1BhbGV0dGUuYmFzZSk7XG4gICAgY29uc3QgZGFya0FjY2VudEhleCA9IGhzbFRvSGV4KGRhcmtQYWxldHRlLmFjY2VudCk7XG5cbiAgICAvLyBDcmVhdGUgTGlnaHQgTW9kZSBzZWN0aW9uXG4gICAgY29uc3QgbGlnaHRSb3cgPSB0aGlzLnByZXZpZXdTd2F0Y2guY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncHJldmlldy1yb3cnIH0pO1xuICAgIGxpZ2h0Um93LmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6ICdMaWdodCBtb2RlJywgY2xzOiAncHJldmlldy1sYWJlbCcgfSk7XG4gICAgY29uc3QgbGlnaHRDb2xvcnMgPSBsaWdodFJvdy5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdwcmV2aWV3LWNvbG9ycycgfSk7XG4gICAgY29uc3QgbGlnaHRCYXNlQ29sb3IgPSBsaWdodENvbG9ycy5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdwcmV2aWV3LWNvbG9yJyB9KTtcbiAgICBsaWdodEJhc2VDb2xvci5zZXRBdHRyaWJ1dGUoJ2RhdGEtY29sb3InLCBsaWdodEJhc2VIZXgpO1xuICAgIHNldENzc1Byb3AobGlnaHRCYXNlQ29sb3IsICctLXByZXZpZXctY29sb3InLCBsaWdodEJhc2VIZXgpO1xuICAgIGNvbnN0IGxpZ2h0QWNjZW50Q29sb3IgPSBsaWdodENvbG9ycy5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdwcmV2aWV3LWNvbG9yJyB9KTtcbiAgICBsaWdodEFjY2VudENvbG9yLnNldEF0dHJpYnV0ZSgnZGF0YS1jb2xvcicsIGxpZ2h0QWNjZW50SGV4KTtcbiAgICBzZXRDc3NQcm9wKGxpZ2h0QWNjZW50Q29sb3IsICctLXByZXZpZXctY29sb3InLCBsaWdodEFjY2VudEhleCk7XG5cbiAgICAvLyBDcmVhdGUgRGFyayBNb2RlIHNlY3Rpb25cbiAgICBjb25zdCBkYXJrUm93ID0gdGhpcy5wcmV2aWV3U3dhdGNoLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ByZXZpZXctcm93JyB9KTtcbiAgICBkYXJrUm93LmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6ICdEYXJrIG1vZGUnLCBjbHM6ICdwcmV2aWV3LWxhYmVsJyB9KTtcbiAgICBjb25zdCBkYXJrQ29sb3JzID0gZGFya1Jvdy5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdwcmV2aWV3LWNvbG9ycycgfSk7XG4gICAgY29uc3QgZGFya0Jhc2VDb2xvciA9IGRhcmtDb2xvcnMuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncHJldmlldy1jb2xvcicgfSk7XG4gICAgZGFya0Jhc2VDb2xvci5zZXRBdHRyaWJ1dGUoJ2RhdGEtY29sb3InLCBkYXJrQmFzZUhleCk7XG4gICAgc2V0Q3NzUHJvcChkYXJrQmFzZUNvbG9yLCAnLS1wcmV2aWV3LWNvbG9yJywgZGFya0Jhc2VIZXgpO1xuICAgIGNvbnN0IGRhcmtBY2NlbnRDb2xvciA9IGRhcmtDb2xvcnMuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncHJldmlldy1jb2xvcicgfSk7XG4gICAgZGFya0FjY2VudENvbG9yLnNldEF0dHJpYnV0ZSgnZGF0YS1jb2xvcicsIGRhcmtBY2NlbnRIZXgpO1xuICAgIHNldENzc1Byb3AoZGFya0FjY2VudENvbG9yLCAnLS1wcmV2aWV3LWNvbG9yJywgZGFya0FjY2VudEhleCk7XG4gIH1cblxuICBwcml2YXRlIHNhdmVQcmVzZXQoKSB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFZhbGlkYXRlIHByZXNldFxuICAgICAgaWYgKCF0aGlzLnByZXNldC5uYW1lLnRyaW0oKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1ByZXNldCBuYW1lIGlzIHJlcXVpcmVkJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIEdlbmVyYXRlIElEIGlmIGNyZWF0aW5nIG5ldyBwcmVzZXRcbiAgICAgIGlmICghdGhpcy5pc0VkaXRpbmcpIHtcbiAgICAgICAgdGhpcy5wcmVzZXQuaWQgPSBQcmVzZXRNYW5hZ2VyLmNyZWF0ZVByZXNldChcbiAgICAgICAgICB0aGlzLnByZXNldC5uYW1lLFxuICAgICAgICAgIHRoaXMucHJlc2V0LmF1dGhvciB8fCAnJyxcbiAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21QcmVzZXRzXG4gICAgICAgICkuaWQ7XG4gICAgICB9XG5cbiAgICAgIHRoaXMub25TYXZlKHRoaXMucHJlc2V0KTtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2F2aW5nIHByZXNldDonLCBlcnJvcik7XG4gICAgICAvLyBDb3VsZCBzaG93IGVycm9yIG1lc3NhZ2UgdG8gdXNlciBoZXJlXG4gICAgfVxuICB9XG5cbiAgb25DbG9zZSgpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgfVxufVxuXG4iLCAiLyoqXHJcbiAqIERlZmF1bHQgY29sb3IgY2FsY3VsYXRpb24gZm9yIHByZXNldCBvdmVycmlkZXNcclxuICogR2VuZXJhdGVzIGludGVsbGlnZW50IGRlZmF1bHRzIGJhc2VkIG9uIGJhc2UgYW5kIGFjY2VudCBjb2xvcnNcclxuICovXHJcblxyXG5pbXBvcnQgeyBDb2xvclBhbGV0dGUgfSBmcm9tICcuLi9wcmVzZXRzL0N1c3RvbVByZXNldCc7XHJcbmltcG9ydCB7IGhzbFRvSGV4IH0gZnJvbSAnLi9jb2xvci11dGlscyc7XHJcblxyXG4vKipcclxuICogR2V0IGRlZmF1bHQgY29sb3IgdmFsdWUgZm9yIGEgZ2l2ZW4gY29sb3Iga2V5XHJcbiAqIEBwYXJhbSBrZXkgLSBDb2xvciBrZXkgKGJnMSwgdHgxLCByZWQsIGV0Yy4pXHJcbiAqIEBwYXJhbSBwYWxldHRlIC0gQmFzZSBwYWxldHRlIHdpdGggYmFzZSBhbmQgYWNjZW50IGNvbG9yc1xyXG4gKiBAcmV0dXJucyBIZXggY29sb3Igc3RyaW5nXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVmYXVsdENvbG9yRm9yS2V5KGtleTogc3RyaW5nLCBwYWxldHRlOiBDb2xvclBhbGV0dGUpOiBzdHJpbmcge1xyXG4gIGNvbnN0IGJhc2VIID0gcGFsZXR0ZS5iYXNlLmg7XHJcbiAgY29uc3QgYmFzZVMgPSBwYWxldHRlLmJhc2UucztcclxuICBjb25zdCBiYXNlTCA9IHBhbGV0dGUuYmFzZS5sO1xyXG4gIGNvbnN0IGFjY2VudEggPSBwYWxldHRlLmFjY2VudC5oO1xyXG4gIFxyXG4gIGNvbnN0IGlzTGlnaHRCYXNlID0gYmFzZUwgPiA1MDtcclxuICBcclxuICAvLyBTeW50YXggY29sb3JzIC0gYWN0dWFsIGNvbG9ycyFcclxuICBjb25zdCBzeW50YXhEZWZhdWx0czogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSA9IHtcclxuICAgICdyZWQnOiAnI2U3NGMzYycsXHJcbiAgICAnb3JhbmdlJzogJyNlNjdlMjInLFxyXG4gICAgJ3llbGxvdyc6ICcjZjM5YzEyJyxcclxuICAgICdncmVlbic6ICcjMjdhZTYwJyxcclxuICAgICdjeWFuJzogJyMxNmEwODUnLFxyXG4gICAgJ2JsdWUnOiAnIzM0OThkYicsXHJcbiAgICAncHVycGxlJzogJyM5YjU5YjYnLFxyXG4gICAgJ3BpbmsnOiAnI2U5MWU2MydcclxuICB9O1xyXG4gIFxyXG4gIGlmIChzeW50YXhEZWZhdWx0c1trZXldKSB7XHJcbiAgICByZXR1cm4gc3ludGF4RGVmYXVsdHNba2V5XTtcclxuICB9XHJcbiAgXHJcbiAgLy8gQ2FsY3VsYXRlIGRlcml2ZWQgY29sb3JzIGJhc2VkIG9uIHRoZW1lIGFuZCBjb252ZXJ0IHRvIGhleFxyXG4gIGxldCBzOiBudW1iZXIsIGw6IG51bWJlcjtcclxuICBcclxuICBzd2l0Y2goa2V5KSB7XHJcbiAgICBjYXNlICdiZzEnOlxyXG4gICAgICByZXR1cm4gaHNsVG9IZXgoeyBoOiBiYXNlSCwgczogYmFzZVMsIGw6IGJhc2VMIH0pO1xyXG4gICAgY2FzZSAnYmcyJzpcclxuICAgICAgbCA9IGlzTGlnaHRCYXNlID8gTWF0aC5tYXgoMCwgYmFzZUwgLSA1KSA6IE1hdGgubWluKDEwMCwgYmFzZUwgKyA1KTtcclxuICAgICAgcmV0dXJuIGhzbFRvSGV4KHsgaDogYmFzZUgsIHM6IGJhc2VTLCBsIH0pO1xyXG4gICAgY2FzZSAnYmczJzpcclxuICAgICAgbCA9IGlzTGlnaHRCYXNlID8gTWF0aC5tYXgoMCwgYmFzZUwgLSAxMCkgOiBNYXRoLm1pbigxMDAsIGJhc2VMICsgMTApO1xyXG4gICAgICByZXR1cm4gaHNsVG9IZXgoeyBoOiBiYXNlSCwgczogYmFzZVMsIGwgfSk7XHJcbiAgICBjYXNlICd1aTEnOlxyXG4gICAgICBsID0gaXNMaWdodEJhc2UgPyBNYXRoLm1heCgwLCBiYXNlTCAtIDE1KSA6IE1hdGgubWluKDEwMCwgYmFzZUwgKyAxNSk7XHJcbiAgICAgIHJldHVybiBoc2xUb0hleCh7IGg6IGJhc2VILCBzOiBiYXNlUywgbCB9KTtcclxuICAgIGNhc2UgJ3VpMic6XHJcbiAgICAgIGwgPSBpc0xpZ2h0QmFzZSA/IE1hdGgubWF4KDAsIGJhc2VMIC0gMTApIDogTWF0aC5taW4oMTAwLCBiYXNlTCArIDEwKTtcclxuICAgICAgcmV0dXJuIGhzbFRvSGV4KHsgaDogYmFzZUgsIHM6IGJhc2VTLCBsIH0pO1xyXG4gICAgY2FzZSAndWkzJzpcclxuICAgICAgbCA9IGlzTGlnaHRCYXNlID8gTWF0aC5tYXgoMCwgYmFzZUwgLSA1KSA6IE1hdGgubWluKDEwMCwgYmFzZUwgKyA1KTtcclxuICAgICAgcmV0dXJuIGhzbFRvSGV4KHsgaDogYmFzZUgsIHM6IGJhc2VTLCBsIH0pO1xyXG4gICAgY2FzZSAndHgxJzpcclxuICAgICAgcyA9IE1hdGgubWF4KDAsIGJhc2VTIC0gMTApO1xyXG4gICAgICBsID0gaXNMaWdodEJhc2UgPyBNYXRoLm1heCgwLCBiYXNlTCAtIDg3KSA6IE1hdGgubWluKDEwMCwgYmFzZUwgKyA3Nyk7XHJcbiAgICAgIHJldHVybiBoc2xUb0hleCh7IGg6IGJhc2VILCBzLCBsIH0pO1xyXG4gICAgY2FzZSAndHgyJzpcclxuICAgICAgcyA9IE1hdGgubWF4KDAsIGJhc2VTIC0gMjApO1xyXG4gICAgICBsID0gaXNMaWdodEJhc2UgPyBNYXRoLm1heCgwLCBiYXNlTCAtIDUzKSA6IE1hdGgubWluKDEwMCwgYmFzZUwgKyA0NSk7XHJcbiAgICAgIHJldHVybiBoc2xUb0hleCh7IGg6IGJhc2VILCBzLCBsIH0pO1xyXG4gICAgY2FzZSAndHgzJzpcclxuICAgICAgcyA9IE1hdGgubWF4KDAsIGJhc2VTIC0gMTApO1xyXG4gICAgICBsID0gaXNMaWdodEJhc2UgPyBNYXRoLm1heCgwLCBiYXNlTCAtIDc4KSA6IE1hdGgubWluKDEwMCwgYmFzZUwgKyAzMCk7XHJcbiAgICAgIHJldHVybiBoc2xUb0hleCh7IGg6IGJhc2VILCBzLCBsIH0pO1xyXG4gICAgY2FzZSAndHg0JzpcclxuICAgICAgcyA9IE1hdGgubWF4KDAsIGJhc2VTIC0gMTApO1xyXG4gICAgICBsID0gaXNMaWdodEJhc2UgPyBNYXRoLm1heCgwLCBiYXNlTCAtIDQ4KSA6IE1hdGgubWluKDEwMCwgYmFzZUwgKyA0MCk7XHJcbiAgICAgIHJldHVybiBoc2xUb0hleCh7IGg6IGJhc2VILCBzLCBsIH0pO1xyXG4gICAgY2FzZSAnaGwxJzpcclxuICAgICAgLy8gU2VtaS10cmFuc3BhcmVudCBhY2NlbnQgY29sb3IgLSBmb3IgY29sb3IgaW5wdXQsIHVzZSBvcGFxdWUgdmVyc2lvblxyXG4gICAgICByZXR1cm4gaHNsVG9IZXgoeyBoOiBhY2NlbnRILCBzOiA1MCwgbDogNDAgfSk7XHJcbiAgICBjYXNlICdobDInOlxyXG4gICAgICAvLyBPcmFuZ2UgaGlnaGxpZ2h0XHJcbiAgICAgIHJldHVybiAnI2ZmYjE1MCc7XHJcbiAgICBkZWZhdWx0OlxyXG4gICAgICByZXR1cm4gJyMwMDAwMDAnO1xyXG4gIH1cclxufVxyXG5cclxuIiwgIi8qKlxuICogUmV1c2FibGUgVUkgY29tcG9uZW50cyBmb3IgcHJlc2V0IGNvbG9yIGNvbnRyb2xzXG4gKiBIU0wgc2xpZGVycyBhbmQgY29sb3Igb3ZlcnJpZGUgaW5wdXRzXG4gKi9cblxuaW1wb3J0IHsgSFNMQ29sb3IsIENvbG9yT3ZlcnJpZGVzIH0gZnJvbSAnLi4vLi4vcHJlc2V0cy9DdXN0b21QcmVzZXQnO1xuaW1wb3J0IHsgaHNsVG9IZXgsIGhleFRvSFNMLCB2YWxpZGF0ZUhleCB9IGZyb20gJy4uLy4uL3V0aWxzL2NvbG9yLXV0aWxzJztcbmltcG9ydCB7IGdldERlZmF1bHRDb2xvckZvcktleSB9IGZyb20gJy4uLy4uL3V0aWxzL3ByZXNldC1jb2xvci1kZWZhdWx0cyc7XG5pbXBvcnQgeyBzZXRDc3NQcm9wIH0gZnJvbSAnLi4vLi4vdXRpbHMvY3NzLXByb3BzJztcblxuLyoqXG4gKiBDcmVhdGUgSFNMIGNvbG9yIGNvbnRyb2xzIChILCBTLCBMIHNsaWRlcnMgd2l0aCBsaXZlIHByZXZpZXcpXG4gKiBAcGFyYW0gY29udGFpbmVyIC0gUGFyZW50IEhUTUxFbGVtZW50IHRvIGFwcGVuZCBjb250cm9scyB0b1xuICogQHBhcmFtIGhzbCAtIEluaXRpYWwgSFNMIGNvbG9yIHZhbHVlc1xuICogQHBhcmFtIG9uQ2hhbmdlIC0gQ2FsbGJhY2sgd2hlbiBjb2xvciBjaGFuZ2VzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVIU0xDb250cm9scyhcbiAgY29udGFpbmVyOiBIVE1MRWxlbWVudCwgXG4gIGhzbDogSFNMQ29sb3IsIFxuICBvbkNoYW5nZTogKGhzbDogSFNMQ29sb3IpID0+IHZvaWRcbik6IHZvaWQge1xuICBjb25zdCBjb250cm9scyA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdoc2wtY29udHJvbHMnIH0pO1xuICBcbiAgLy8gQ3JlYXRlIGEgY29weSBvZiB0aGUgSFNMIG9iamVjdCB0byBhdm9pZCBtb2RpZnlpbmcgdGhlIG9yaWdpbmFsXG4gIGNvbnN0IGhzbENvcHkgPSB7IC4uLmhzbCB9O1xuICBcbiAgLy8gQ29sb3IgcHJldmlldyAoY2xpY2thYmxlKSAtIHdyYXBwZXIgd2l0aCByZWxhdGl2ZSBwb3NpdGlvbmluZ1xuICBjb25zdCBwcmV2aWV3V3JhcHBlciA9IGNvbnRyb2xzLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2NvbG9yLXByZXZpZXctd3JhcHBlcicgfSk7XG5cbiAgY29uc3QgcHJldmlldyA9IHByZXZpZXdXcmFwcGVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2NvbG9yLXByZXZpZXcnIH0pO1xuICBzZXRDc3NQcm9wKHByZXZpZXcsICctLXByZXZpZXctY29sb3InLCBoc2xUb0hleChoc2xDb3B5KSk7XG4gIHByZXZpZXcudGl0bGUgPSAnQ2xpY2sgdG8gcGljayBhIGNvbG9yIHdpdGggaGV4IGlucHV0JztcbiAgXG4gIC8vIENvbG9yIGlucHV0IHBvc2l0aW9uZWQgb3ZlciB0aGUgcHJldmlld1xuICBjb25zdCBjb2xvcklucHV0ID0gcHJldmlld1dyYXBwZXIuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAnY29sb3InLCBjbHM6ICdoc2wtY29sb3ItaW5wdXQtb3ZlcmxheScgfSk7XG4gIGNvbG9ySW5wdXQudmFsdWUgPSBoc2xUb0hleChoc2xDb3B5KTtcbiAgXG4gIC8vIFVwZGF0ZSBwcmV2aWV3IGZ1bmN0aW9uXG4gIGNvbnN0IHVwZGF0ZVByZXZpZXcgPSAoKSA9PiB7XG4gICAgY29uc3QgaGV4Q29sb3IgPSBoc2xUb0hleChoc2xDb3B5KTtcbiAgICBzZXRDc3NQcm9wKHByZXZpZXcsICctLXByZXZpZXctY29sb3InLCBoZXhDb2xvcik7XG4gICAgY29sb3JJbnB1dC52YWx1ZSA9IGhleENvbG9yO1xuICB9O1xuICBcbiAgLy8gV2hlbiB1c2VyIHBpY2tzIGEgY29sb3Igd2l0aCB0aGUgY29sb3IgaW5wdXQsIHVwZGF0ZSBIU0wgdmFsdWVzXG4gIGNvbG9ySW5wdXQub25jaGFuZ2UgPSAoKSA9PiB7XG4gICAgY29uc3QgbmV3SFNMID0gaGV4VG9IU0woY29sb3JJbnB1dC52YWx1ZSk7XG4gICAgaHNsQ29weS5oID0gbmV3SFNMLmg7XG4gICAgaHNsQ29weS5zID0gbmV3SFNMLnM7XG4gICAgaHNsQ29weS5sID0gbmV3SFNMLmw7XG4gICAgXG4gICAgLy8gVXBkYXRlIGFsbCBzbGlkZXIgdmFsdWVzIGFuZCBsYWJlbHNcbiAgICBodWVTbGlkZXIudmFsdWUgPSBuZXdIU0wuaC50b1N0cmluZygpO1xuICAgIGh1ZVZhbHVlLnRleHRDb250ZW50ID0gbmV3SFNMLmgudG9TdHJpbmcoKTtcbiAgICBzYXRTbGlkZXIudmFsdWUgPSBuZXdIU0wucy50b1N0cmluZygpO1xuICAgIHNhdFZhbHVlLnRleHRDb250ZW50ID0gbmV3SFNMLnMudG9TdHJpbmcoKTtcbiAgICBsaWdodFNsaWRlci52YWx1ZSA9IG5ld0hTTC5sLnRvU3RyaW5nKCk7XG4gICAgbGlnaHRWYWx1ZS50ZXh0Q29udGVudCA9IG5ld0hTTC5sLnRvU3RyaW5nKCk7XG4gICAgXG4gICAgdXBkYXRlUHJldmlldygpO1xuICAgIG9uQ2hhbmdlKGhzbENvcHkpO1xuICB9O1xuICBcbiAgLy8gSHVlXG4gIGNvbnN0IGh1ZUNvbnRyb2wgPSBjb250cm9scy5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdoc2wtY29udHJvbCcgfSk7XG4gIGh1ZUNvbnRyb2wuY3JlYXRlRWwoJ2xhYmVsJywgeyB0ZXh0OiAnSHVlJyB9KTtcbiAgY29uc3QgaHVlU2xpZGVyID0gaHVlQ29udHJvbC5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICdyYW5nZScgfSk7XG4gIGh1ZVNsaWRlci5taW4gPSAnMCc7XG4gIGh1ZVNsaWRlci5tYXggPSAnMzYwJztcbiAgY29uc3QgaHVlVmFsdWUgPSBodWVDb250cm9sLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiBoc2wuaC50b1N0cmluZygpIH0pO1xuICBodWVTbGlkZXIudmFsdWUgPSBoc2wuaC50b1N0cmluZygpO1xuICBodWVTbGlkZXIub25pbnB1dCA9ICgpID0+IHtcbiAgICBoc2xDb3B5LmggPSBwYXJzZUludChodWVTbGlkZXIudmFsdWUpO1xuICAgIGh1ZVZhbHVlLnRleHRDb250ZW50ID0gaHNsQ29weS5oLnRvU3RyaW5nKCk7XG4gICAgdXBkYXRlUHJldmlldygpO1xuICAgIG9uQ2hhbmdlKGhzbENvcHkpO1xuICB9O1xuXG4gIC8vIFNhdHVyYXRpb25cbiAgY29uc3Qgc2F0Q29udHJvbCA9IGNvbnRyb2xzLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2hzbC1jb250cm9sJyB9KTtcbiAgc2F0Q29udHJvbC5jcmVhdGVFbCgnbGFiZWwnLCB7IHRleHQ6ICdTYXR1cmF0aW9uJyB9KTtcbiAgY29uc3Qgc2F0U2xpZGVyID0gc2F0Q29udHJvbC5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICdyYW5nZScgfSk7XG4gIHNhdFNsaWRlci5taW4gPSAnMCc7XG4gIHNhdFNsaWRlci5tYXggPSAnMTAwJztcbiAgY29uc3Qgc2F0VmFsdWUgPSBzYXRDb250cm9sLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiBoc2wucy50b1N0cmluZygpIH0pO1xuICBzYXRTbGlkZXIudmFsdWUgPSBoc2wucy50b1N0cmluZygpO1xuICBzYXRTbGlkZXIub25pbnB1dCA9ICgpID0+IHtcbiAgICBoc2xDb3B5LnMgPSBwYXJzZUludChzYXRTbGlkZXIudmFsdWUpO1xuICAgIHNhdFZhbHVlLnRleHRDb250ZW50ID0gaHNsQ29weS5zLnRvU3RyaW5nKCk7XG4gICAgdXBkYXRlUHJldmlldygpO1xuICAgIG9uQ2hhbmdlKGhzbENvcHkpO1xuICB9O1xuXG4gIC8vIExpZ2h0bmVzc1xuICBjb25zdCBsaWdodENvbnRyb2wgPSBjb250cm9scy5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdoc2wtY29udHJvbCcgfSk7XG4gIGxpZ2h0Q29udHJvbC5jcmVhdGVFbCgnbGFiZWwnLCB7IHRleHQ6ICdMaWdodG5lc3MnIH0pO1xuICBjb25zdCBsaWdodFNsaWRlciA9IGxpZ2h0Q29udHJvbC5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICdyYW5nZScgfSk7XG4gIGxpZ2h0U2xpZGVyLm1pbiA9ICcwJztcbiAgbGlnaHRTbGlkZXIubWF4ID0gJzEwMCc7XG4gIGNvbnN0IGxpZ2h0VmFsdWUgPSBsaWdodENvbnRyb2wuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IGhzbC5sLnRvU3RyaW5nKCkgfSk7XG4gIGxpZ2h0U2xpZGVyLnZhbHVlID0gaHNsLmwudG9TdHJpbmcoKTtcbiAgbGlnaHRTbGlkZXIub25pbnB1dCA9ICgpID0+IHtcbiAgICBoc2xDb3B5LmwgPSBwYXJzZUludChsaWdodFNsaWRlci52YWx1ZSk7XG4gICAgbGlnaHRWYWx1ZS50ZXh0Q29udGVudCA9IGhzbENvcHkubC50b1N0cmluZygpO1xuICAgIHVwZGF0ZVByZXZpZXcoKTtcbiAgICBvbkNoYW5nZShoc2xDb3B5KTtcbiAgfTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBjb2xvciBvdmVycmlkZSB0b2dnbGUgYW5kIGlucHV0XG4gKiBAcGFyYW0gY29udGFpbmVyIC0gUGFyZW50IEhUTUxFbGVtZW50XG4gKiBAcGFyYW0gbGFiZWwgLSBEaXNwbGF5IGxhYmVsIGZvciB0aGUgY29sb3JcbiAqIEBwYXJhbSBrZXkgLSBDb2xvciBrZXkgaW4gdGhlIHBhbGV0dGUuY29sb3JzIG9iamVjdFxuICogQHBhcmFtIGNvbG9ycyAtIFRoZSBjb2xvcnMgb2JqZWN0IHRvIG1vZGlmeVxuICogQHBhcmFtIHBhbGV0dGUgLSBUaGUgcGFsZXR0ZSBmb3IgY2FsY3VsYXRpbmcgZGVmYXVsdHNcbiAqIEBwYXJhbSBvblVwZGF0ZSAtIENhbGxiYWNrIHdoZW4gY29sb3IgaXMgdG9nZ2xlZCBvciBjaGFuZ2VkXG4gKiBAcmV0dXJucyBUaGUgY3JlYXRlZCBvdmVycmlkZSBIVE1MRWxlbWVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ29sb3JPdmVycmlkZShcbiAgY29udGFpbmVyOiBIVE1MRWxlbWVudCwgXG4gIGxhYmVsOiBzdHJpbmcsIFxuICBrZXk6IHN0cmluZywgXG4gIGNvbG9yczogQ29sb3JPdmVycmlkZXMsIFxuICBwYWxldHRlOiB7IGJhc2U6IEhTTENvbG9yOyBhY2NlbnQ6IEhTTENvbG9yOyBjb2xvcnM/OiBDb2xvck92ZXJyaWRlcyB9LFxuICBvblVwZGF0ZTogKCkgPT4gdm9pZFxuKTogSFRNTEVsZW1lbnQge1xuICBjb25zdCBvdmVycmlkZSA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdjb2xvci1vdmVycmlkZSBjb2xsYXBzaWJsZS1pdGVtJyB9KTtcbiAgXG4gIGNvbnN0IGhlYWRlciA9IG92ZXJyaWRlLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ292ZXJyaWRlLWhlYWRlcicgfSk7XG4gIGNvbnN0IHRvZ2dsZSA9IGhlYWRlci5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICdjaGVja2JveCcgfSk7XG4gIGhlYWRlci5jcmVhdGVFbCgnbGFiZWwnLCB7IHRleHQ6IGxhYmVsIH0pO1xuICBcbiAgLy8gQ3JlYXRlIGNvbG9yIHBpY2tlciB3aXRoIHNhbWUgcGF0dGVybiBhcyBIU0wgY29udHJvbHNcbiAgY29uc3QgY29sb3JJbnB1dFdyYXBwZXIgPSBoZWFkZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnY29sb3ItaW5wdXQtd3JhcHBlcicgfSk7XG4gIFxuICAvLyBWaXNpYmxlIGNvbG9yIHByZXZpZXdcbiAgY29uc3QgY29sb3JQcmV2aWV3ID0gY29sb3JJbnB1dFdyYXBwZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnY29sb3ItcHJldmlldy1zd2F0Y2gnIH0pO1xuICBcbiAgLy8gSGlkZGVuIGNvbG9yIGlucHV0IHBvc2l0aW9uZWQgb3ZlciB0aGUgcHJldmlld1xuICBjb25zdCBjb2xvcklucHV0ID0gY29sb3JJbnB1dFdyYXBwZXIuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAnY29sb3InLCBjbHM6ICdoc2wtY29sb3ItaW5wdXQtb3ZlcmxheScgfSk7XG4gIGNvbG9ySW5wdXQuZGlzYWJsZWQgPSB0cnVlO1xuICBcbiAgLy8gU3RvcmUgdGhlIG9yaWdpbmFsIGNvbG9yIHZhbHVlIHdoZW4gdG9nZ2xpbmcgb2ZmXG4gIGxldCBvcmlnaW5hbENvbG9yOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgXG4gIC8vIEZ1bmN0aW9uIHRvIHVwZGF0ZSB0aGUgY29sb3IgcHJldmlld1xuICBjb25zdCB1cGRhdGVDb2xvclByZXZpZXcgPSAoY29sb3I6IHN0cmluZykgPT4ge1xuICAgIHNldENzc1Byb3AoY29sb3JQcmV2aWV3LCAnLS1wcmV2aWV3LWNvbG9yJywgY29sb3IpO1xuICAgIGNvbG9ySW5wdXQudmFsdWUgPSBjb2xvcjtcbiAgfTtcbiAgXG4gIGlmIChjb2xvcnNba2V5XSkge1xuICAgIHRvZ2dsZS5jaGVja2VkID0gdHJ1ZTtcbiAgICBjb2xvcklucHV0LmRpc2FibGVkID0gZmFsc2U7XG4gICAgdXBkYXRlQ29sb3JQcmV2aWV3KGNvbG9yc1trZXldKTtcbiAgICBvcmlnaW5hbENvbG9yID0gY29sb3JzW2tleV07XG4gIH0gZWxzZSB7XG4gICAgLy8gU2hvdyBkZWZhdWx0IGNvbG9yIHByZXZpZXcgZXZlbiB3aGVuIGRpc2FibGVkXG4gICAgY29uc3QgZGVmYXVsdENvbG9yID0gZ2V0RGVmYXVsdENvbG9yRm9yS2V5KGtleSwgcGFsZXR0ZSk7XG4gICAgdXBkYXRlQ29sb3JQcmV2aWV3KGRlZmF1bHRDb2xvcik7XG4gICAgb3JpZ2luYWxDb2xvciA9IGRlZmF1bHRDb2xvcjtcbiAgfVxuICBcbiAgLy8gTWFrZSBjbGlja2luZyB0aGUgY29sb3IgaW5wdXQgYXV0b21hdGljYWxseSBjaGVjayB0aGUgdG9nZ2xlXG4gIGNvbG9ySW5wdXQub25jbGljayA9ICgpID0+IHtcbiAgICBpZiAoIXRvZ2dsZS5jaGVja2VkKSB7XG4gICAgICB0b2dnbGUuY2hlY2tlZCA9IHRydWU7XG4gICAgICBjb2xvcklucHV0LmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAvLyBVc2Ugc3RvcmVkIG9yaWdpbmFsQ29sb3IsIG9yIGRlZmF1bHQgdG8gY3VycmVudCBjb2xvciwgb3IgY2FsY3VsYXRlIHNlbnNpYmxlIGRlZmF1bHRcbiAgICAgIGNvbnN0IHJlc3RvcmVkQ29sb3IgPSBvcmlnaW5hbENvbG9yIHx8IGNvbG9yc1trZXldIHx8IGdldERlZmF1bHRDb2xvckZvcktleShrZXksIHBhbGV0dGUpO1xuICAgICAgY29sb3JzW2tleV0gPSByZXN0b3JlZENvbG9yO1xuICAgICAgdXBkYXRlQ29sb3JQcmV2aWV3KHJlc3RvcmVkQ29sb3IpO1xuICAgICAgb3JpZ2luYWxDb2xvciA9IHJlc3RvcmVkQ29sb3I7XG4gICAgICBvblVwZGF0ZSgpO1xuICAgIH1cbiAgfTtcbiAgXG4gIHRvZ2dsZS5vbmNoYW5nZSA9ICgpID0+IHtcbiAgICBpZiAodG9nZ2xlLmNoZWNrZWQpIHtcbiAgICAgIGNvbG9ySW5wdXQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgIC8vIFVzZSBzdG9yZWQgb3JpZ2luYWxDb2xvciwgb3IgZGVmYXVsdCB0byBjdXJyZW50IGNvbG9yLCBvciBjYWxjdWxhdGUgc2Vuc2libGUgZGVmYXVsdFxuICAgICAgY29uc3QgcmVzdG9yZWRDb2xvciA9IG9yaWdpbmFsQ29sb3IgfHwgY29sb3JzW2tleV0gfHwgZ2V0RGVmYXVsdENvbG9yRm9yS2V5KGtleSwgcGFsZXR0ZSk7XG4gICAgICBjb2xvcnNba2V5XSA9IHJlc3RvcmVkQ29sb3I7XG4gICAgICB1cGRhdGVDb2xvclByZXZpZXcocmVzdG9yZWRDb2xvcik7XG4gICAgICBvcmlnaW5hbENvbG9yID0gcmVzdG9yZWRDb2xvcjtcbiAgICB9IGVsc2Uge1xuICAgICAgY29sb3JJbnB1dC5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAvLyBTdG9yZSB0aGUgY3VycmVudCB2YWx1ZSBiZWZvcmUgZGVsZXRpbmdcbiAgICAgIG9yaWdpbmFsQ29sb3IgPSBjb2xvcnNba2V5XSB8fCBvcmlnaW5hbENvbG9yO1xuICAgICAgZGVsZXRlIGNvbG9yc1trZXldO1xuICAgIH1cbiAgICBvblVwZGF0ZSgpO1xuICB9O1xuICBcbiAgY29sb3JJbnB1dC5vbmNoYW5nZSA9ICgpID0+IHtcbiAgICBpZiAodmFsaWRhdGVIZXgoY29sb3JJbnB1dC52YWx1ZSkpIHtcbiAgICAgIGNvbG9yc1trZXldID0gY29sb3JJbnB1dC52YWx1ZTtcbiAgICAgIG9yaWdpbmFsQ29sb3IgPSBjb2xvcklucHV0LnZhbHVlO1xuICAgICAgdXBkYXRlQ29sb3JQcmV2aWV3KGNvbG9ySW5wdXQudmFsdWUpO1xuICAgICAgb25VcGRhdGUoKTtcbiAgICB9XG4gIH07XG4gIFxuICAvLyBBbHNvIGhhbmRsZSBpbnB1dCBldmVudCBmb3IgcmVhbC10aW1lIHVwZGF0ZXNcbiAgY29sb3JJbnB1dC5vbmlucHV0ID0gKCkgPT4ge1xuICAgIGlmICh2YWxpZGF0ZUhleChjb2xvcklucHV0LnZhbHVlKSkge1xuICAgICAgY29sb3JzW2tleV0gPSBjb2xvcklucHV0LnZhbHVlO1xuICAgICAgb3JpZ2luYWxDb2xvciA9IGNvbG9ySW5wdXQudmFsdWU7XG4gICAgICB1cGRhdGVDb2xvclByZXZpZXcoY29sb3JJbnB1dC52YWx1ZSk7XG4gICAgICBvblVwZGF0ZSgpO1xuICAgIH1cbiAgfTtcbiAgXG4gIHJldHVybiBvdmVycmlkZTtcbn1cblxuIiwgIi8qKlxuICogTW9kYWwgZm9yIGltcG9ydGluZyBjdXN0b20gY29sb3IgcHJlc2V0cyBmcm9tIEpTT05cbiAqL1xuXG5pbXBvcnQgeyBNb2RhbCwgU2V0dGluZywgQXBwIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgQ3VzdG9tQ29sb3JQcmVzZXQgfSBmcm9tICcuLi9wcmVzZXRzL0N1c3RvbVByZXNldCc7XG5pbXBvcnQgeyBQcmVzZXRNYW5hZ2VyIH0gZnJvbSAnLi4vcHJlc2V0cy9QcmVzZXRNYW5hZ2VyJztcbmltcG9ydCB7IHNldENzc1Byb3AgfSBmcm9tICcuLi91dGlscy9jc3MtcHJvcHMnO1xuaW1wb3J0IE1pbmltYWxUaGVtZSBmcm9tICcuLi9tYWluJztcblxuZXhwb3J0IGNsYXNzIFByZXNldEltcG9ydE1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICBwcml2YXRlIG9uSW1wb3J0OiAocHJlc2V0OiBDdXN0b21Db2xvclByZXNldCkgPT4gdm9pZDtcbiAgcHJpdmF0ZSBwbHVnaW46IE1pbmltYWxUaGVtZTtcbiAgcHJpdmF0ZSB0ZXh0QXJlYTogSFRNTFRleHRBcmVhRWxlbWVudDtcbiAgcHJpdmF0ZSBwcmV2aWV3Q29udGFpbmVyOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBpbXBvcnRCdXR0b246IEhUTUxCdXR0b25FbGVtZW50O1xuICBwcml2YXRlIHBhcnNlZFByZXNldDogQ3VzdG9tQ29sb3JQcmVzZXQgfCBudWxsID0gbnVsbDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBhcHA6IEFwcCwgXG4gICAgcGx1Z2luOiBNaW5pbWFsVGhlbWUsXG4gICAgb25JbXBvcnQ6IChwcmVzZXQ6IEN1c3RvbUNvbG9yUHJlc2V0KSA9PiB2b2lkXG4gICkge1xuICAgIHN1cGVyKGFwcCk7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgdGhpcy5vbkltcG9ydCA9IG9uSW1wb3J0O1xuICB9XG5cbiAgb25PcGVuKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIGNvbnRlbnRFbC5hZGRDbGFzcygncHJlc2V0LWltcG9ydC1tb2RhbCcpO1xuXG4gICAgLy8gSGVhZGVyXG4gICAgY29uc3QgaGVhZGVyID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ21vZGFsLWhlYWRlcicgfSk7XG4gICAgaGVhZGVyLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ0ltcG9ydCBjdXN0b20gcHJlc2V0JyB9KTtcblxuICAgIC8vIEluc3RydWN0aW9uc1xuICAgIGNvbnN0IGluc3RydWN0aW9ucyA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdtb2RhbC1zZWN0aW9uJyB9KTtcbiAgICBpbnN0cnVjdGlvbnMuY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgdGV4dDogJ1Bhc3RlIGEgSlNPTiBwcmVzZXQgYmVsb3cuIFlvdSBjYW4gZXhwb3J0IHByZXNldHMgZnJvbSB0aGlzIHBsdWdpbiBvciBjcmVhdGUgdGhlbSBtYW51YWxseSBmb2xsb3dpbmcgdGhlIGNvcnJlY3QgZm9ybWF0LicgXG4gICAgfSk7XG5cbiAgICAvLyBKU09OIGlucHV0IGFyZWFcbiAgICBjb25zdCBpbnB1dFNlY3Rpb24gPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnbW9kYWwtc2VjdGlvbicgfSk7XG4gICAgaW5wdXRTZWN0aW9uLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0pTT04gcHJlc2V0IGRhdGEnIH0pO1xuXG4gICAgbmV3IFNldHRpbmcoaW5wdXRTZWN0aW9uKVxuICAgICAgLnNldE5hbWUoJ1ByZXNldCBKU09OJylcbiAgICAgIC5zZXREZXNjKCdQYXN0ZSB0aGUgY29tcGxldGUgSlNPTiBwcmVzZXQgZGF0YSBoZXJlJylcbiAgICAgIC5hZGRUZXh0QXJlYSh0ZXh0ID0+IHtcbiAgICAgICAgdGhpcy50ZXh0QXJlYSA9IHRleHQuaW5wdXRFbDtcbiAgICAgICAgdGhpcy50ZXh0QXJlYS5hZGRDbGFzcygncHJlc2V0LWpzb24taW5wdXQnKTtcbiAgICAgICAgdGV4dC5zZXRQbGFjZWhvbGRlcignUGFzdGUgSlNPTiBwcmVzZXQgZGF0YSBoZXJlLi4uJylcbiAgICAgICAgICAub25DaGFuZ2UodmFsdWUgPT4gdGhpcy5wYXJzZUpTT04odmFsdWUpKTtcbiAgICAgIH0pO1xuXG4gICAgLy8gUHJldmlldyBzZWN0aW9uXG4gICAgY29uc3QgcHJldmlld1NlY3Rpb24gPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnbW9kYWwtc2VjdGlvbicgfSk7XG4gICAgcHJldmlld1NlY3Rpb24uY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnUHJldmlldycgfSk7XG4gICAgdGhpcy5wcmV2aWV3Q29udGFpbmVyID0gcHJldmlld1NlY3Rpb24uY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncHJldmlldy1jb250YWluZXInIH0pO1xuICAgIHRoaXMucHJldmlld0NvbnRhaW5lci5jcmVhdGVFbCgncCcsIHsgXG4gICAgICB0ZXh0OiAnRW50ZXIgdmFsaWQgSlNPTiB0byBzZWUgYSBwcmV2aWV3IG9mIHRoZSBwcmVzZXQnLFxuICAgICAgY2xzOiAncHJldmlldy1wbGFjZWhvbGRlcidcbiAgICB9KTtcblxuICAgIC8vIEVycm9yIGRpc3BsYXlcbiAgICBjb25zdCBlcnJvclNlY3Rpb24gPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnbW9kYWwtc2VjdGlvbiBlcnJvci1zZWN0aW9uIGhpZGRlbicgfSk7XG4gICAgZXJyb3JTZWN0aW9uLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2Vycm9yLW1lc3NhZ2UnIH0pO1xuXG4gICAgLy8gRm9vdGVyIGJ1dHRvbnNcbiAgICBjb25zdCBmb290ZXIgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnbW9kYWwtZm9vdGVyJyB9KTtcbiAgICBcbiAgICBjb25zdCBjYW5jZWxCdG4gPSBmb290ZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0NhbmNlbCcsIGNsczogJ21vZC1jdGEnIH0pO1xuICAgIGNhbmNlbEJ0bi5vbmNsaWNrID0gKCkgPT4gdGhpcy5jbG9zZSgpO1xuICAgIFxuICAgIHRoaXMuaW1wb3J0QnV0dG9uID0gZm9vdGVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgdGV4dDogJ0ltcG9ydCBwcmVzZXQnLCBcbiAgICAgIGNsczogJ21vZC1jdGEnIFxuICAgIH0pO1xuICAgIHRoaXMuaW1wb3J0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICB0aGlzLmltcG9ydEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5pbXBvcnRQcmVzZXQoKTtcbiAgfVxuXG4gIHByaXZhdGUgcGFyc2VKU09OKGpzb25TdHJpbmc6IHN0cmluZykge1xuICAgIGNvbnN0IGVycm9yU2VjdGlvbiA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJy5lcnJvci1zZWN0aW9uJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcignLmVycm9yLW1lc3NhZ2UnKSBhcyBIVE1MRWxlbWVudDtcbiAgICBcbiAgICAvLyBDbGVhciBwcmV2aW91cyBzdGF0ZVxuICAgIHRoaXMucGFyc2VkUHJlc2V0ID0gbnVsbDtcbiAgICB0aGlzLmltcG9ydEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgZXJyb3JTZWN0aW9uLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICB0aGlzLnByZXZpZXdDb250YWluZXIuZW1wdHkoKTtcblxuICAgIGlmICghanNvblN0cmluZy50cmltKCkpIHtcbiAgICAgIHRoaXMucHJldmlld0NvbnRhaW5lci5jcmVhdGVFbCgncCcsIHsgXG4gICAgICAgIHRleHQ6ICdFbnRlciB2YWxpZCBKU09OIHRvIHNlZSBhIHByZXZpZXcgb2YgdGhlIHByZXNldCcsXG4gICAgICAgIGNsczogJ3ByZXZpZXctcGxhY2Vob2xkZXInXG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgLy8gUGFyc2UgYW5kIHZhbGlkYXRlIHRoZSBKU09OXG4gICAgICB0aGlzLnBhcnNlZFByZXNldCA9IFByZXNldE1hbmFnZXIuaW1wb3J0UHJlc2V0RnJvbUpTT04oanNvblN0cmluZyk7XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGZvciBJRCBjb25mbGljdHNcbiAgICAgIGNvbnN0IGV4aXN0aW5nUHJlc2V0ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tUHJlc2V0cy5maW5kKHAgPT4gcC5pZCA9PT0gdGhpcy5wYXJzZWRQcmVzZXQhLmlkKTtcbiAgICAgIGlmIChleGlzdGluZ1ByZXNldCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEEgcHJlc2V0IHdpdGggSUQgXCIke3RoaXMucGFyc2VkUHJlc2V0LmlkfVwiIGFscmVhZHkgZXhpc3RzLiBQbGVhc2UgcmVuYW1lIHRoZSBwcmVzZXQuYCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFNob3cgcHJldmlld1xuICAgICAgdGhpcy5zaG93UHJldmlldyh0aGlzLnBhcnNlZFByZXNldCk7XG4gICAgICB0aGlzLmltcG9ydEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vIFNob3cgZXJyb3JcbiAgICAgIGVycm9yTWVzc2FnZS50ZXh0Q29udGVudCA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ludmFsaWQgSlNPTiBmb3JtYXQnO1xuICAgICAgZXJyb3JTZWN0aW9uLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgIFxuICAgICAgdGhpcy5wcmV2aWV3Q29udGFpbmVyLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgICAgdGV4dDogJ0ZpeCB0aGUgSlNPTiBlcnJvcnMgYWJvdmUgdG8gc2VlIGEgcHJldmlldycsXG4gICAgICAgIGNsczogJ3ByZXZpZXctZXJyb3InXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHNob3dQcmV2aWV3KHByZXNldDogQ3VzdG9tQ29sb3JQcmVzZXQpIHtcbiAgICB0aGlzLnByZXZpZXdDb250YWluZXIuZW1wdHkoKTtcblxuICAgIC8vIFByZXNldCBpbmZvXG4gICAgY29uc3QgaW5mbyA9IHRoaXMucHJldmlld0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdwcmVzZXQtaW5mbycgfSk7XG4gICAgXG4gICAgY29uc3QgbmFtZVJvdyA9IGluZm8uY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnaW5mby1yb3cnIH0pO1xuICAgIG5hbWVSb3cuY3JlYXRlRWwoJ3N0cm9uZycsIHsgdGV4dDogJ05hbWU6ICcgfSk7XG4gICAgbmFtZVJvdy5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogcHJlc2V0Lm5hbWUgfSk7XG5cbiAgICBpZiAocHJlc2V0LmF1dGhvcikge1xuICAgICAgY29uc3QgYXV0aG9yUm93ID0gaW5mby5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdpbmZvLXJvdycgfSk7XG4gICAgICBhdXRob3JSb3cuY3JlYXRlRWwoJ3N0cm9uZycsIHsgdGV4dDogJ0F1dGhvcjogJyB9KTtcbiAgICAgIGF1dGhvclJvdy5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogcHJlc2V0LmF1dGhvciB9KTtcbiAgICB9XG5cbiAgICBjb25zdCB2ZXJzaW9uUm93ID0gaW5mby5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdpbmZvLXJvdycgfSk7XG4gICAgdmVyc2lvblJvdy5jcmVhdGVFbCgnc3Ryb25nJywgeyB0ZXh0OiAnVmVyc2lvbjogJyB9KTtcbiAgICB2ZXJzaW9uUm93LmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiBwcmVzZXQudmVyc2lvbiB8fCAnMS4wLjAnIH0pO1xuXG4gICAgY29uc3QgaWRSb3cgPSBpbmZvLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2luZm8tcm93JyB9KTtcbiAgICBpZFJvdy5jcmVhdGVFbCgnc3Ryb25nJywgeyB0ZXh0OiAnSUQ6ICcgfSk7XG4gICAgaWRSb3cuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IHByZXNldC5pZCwgY2xzOiAncHJlc2V0LWlkJyB9KTtcblxuICAgIC8vIENvbG9yIHByZXZpZXcgc2VjdGlvblxuICAgIGNvbnN0IHByZXZpZXcgPSB0aGlzLnByZXZpZXdDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnY29sb3ItcHJldmlldy1zZWN0aW9uJyB9KTtcbiAgICBwcmV2aWV3LmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ0NvbG9yIHByZXZpZXcnIH0pO1xuXG4gICAgLy8gTW9kZSB0b2dnbGVcbiAgICBjb25zdCBtb2RlVG9nZ2xlID0gcHJldmlldy5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdtb2RlLXRvZ2dsZScgfSk7XG4gICAgY29uc3QgbGlnaHRNb2RlQnRuID0gbW9kZVRvZ2dsZS5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgIHRleHQ6ICdMaWdodCBtb2RlJywgXG4gICAgICBjbHM6ICdtb2RlLWJ0biBhY3RpdmUnIFxuICAgIH0pO1xuICAgIGNvbnN0IGRhcmtNb2RlQnRuID0gbW9kZVRvZ2dsZS5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgIHRleHQ6ICdEYXJrIG1vZGUnLCBcbiAgICAgIGNsczogJ21vZGUtYnRuJyBcbiAgICB9KTtcblxuICAgIC8vIENvbG9yIHN3YXRjaGVzIGNvbnRhaW5lclxuICAgIGNvbnN0IHN3YXRjaENvbnRhaW5lciA9IHByZXZpZXcuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc3dhdGNoLWNvbnRhaW5lcicgfSk7XG4gICAgXG4gICAgLy8gTGlnaHQgbW9kZSBzd2F0Y2hlc1xuICAgIGNvbnN0IGxpZ2h0U3dhdGNoZXMgPSBzd2F0Y2hDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnbW9kZS1zd2F0Y2hlcyBhY3RpdmUnIH0pO1xuICAgIGNvbnN0IGxpZ2h0QmFzZVN3YXRjaFByZXZpZXcgPSBsaWdodFN3YXRjaGVzLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2NvbG9yLXN3YXRjaCcgfSk7XG4gICAgY29uc3QgbGlnaHRCYXNlSFNMID0gYCR7cHJlc2V0LmxpZ2h0LmJhc2UuaH0sICR7cHJlc2V0LmxpZ2h0LmJhc2Uuc30lLCAke3ByZXNldC5saWdodC5iYXNlLmx9JWA7XG4gICAgbGlnaHRCYXNlU3dhdGNoUHJldmlldy5zZXRBdHRyaWJ1dGUoJ2RhdGEtaHNsJywgbGlnaHRCYXNlSFNMKTtcbiAgICBzZXRDc3NQcm9wKGxpZ2h0QmFzZVN3YXRjaFByZXZpZXcsICctLXN3YXRjaC1oc2wnLCBsaWdodEJhc2VIU0wpO1xuICAgIGxpZ2h0QmFzZVN3YXRjaFByZXZpZXcudGl0bGUgPSBgQmFzZTogaHNsKCR7cHJlc2V0LmxpZ2h0LmJhc2UuaH0sICR7cHJlc2V0LmxpZ2h0LmJhc2Uuc30lLCAke3ByZXNldC5saWdodC5iYXNlLmx9JSlgO1xuICAgIFxuICAgIGNvbnN0IGxpZ2h0QWNjZW50U3dhdGNoUHJldmlldyA9IGxpZ2h0U3dhdGNoZXMuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnY29sb3Itc3dhdGNoJyB9KTtcbiAgICBjb25zdCBsaWdodEFjY2VudEhTTCA9IGAke3ByZXNldC5saWdodC5hY2NlbnQuaH0sICR7cHJlc2V0LmxpZ2h0LmFjY2VudC5zfSUsICR7cHJlc2V0LmxpZ2h0LmFjY2VudC5sfSVgO1xuICAgIGxpZ2h0QWNjZW50U3dhdGNoUHJldmlldy5zZXRBdHRyaWJ1dGUoJ2RhdGEtaHNsJywgbGlnaHRBY2NlbnRIU0wpO1xuICAgIHNldENzc1Byb3AobGlnaHRBY2NlbnRTd2F0Y2hQcmV2aWV3LCAnLS1zd2F0Y2gtaHNsJywgbGlnaHRBY2NlbnRIU0wpO1xuICAgIGxpZ2h0QWNjZW50U3dhdGNoUHJldmlldy50aXRsZSA9IGBBY2NlbnQ6IGhzbCgke3ByZXNldC5saWdodC5hY2NlbnQuaH0sICR7cHJlc2V0LmxpZ2h0LmFjY2VudC5zfSUsICR7cHJlc2V0LmxpZ2h0LmFjY2VudC5sfSUpYDtcblxuICAgIC8vIERhcmsgbW9kZSBzd2F0Y2hlc1xuICAgIGNvbnN0IGRhcmtTd2F0Y2hlcyA9IHN3YXRjaENvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdtb2RlLXN3YXRjaGVzJyB9KTtcbiAgICBjb25zdCBkYXJrQmFzZVN3YXRjaFByZXZpZXcgPSBkYXJrU3dhdGNoZXMuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnY29sb3Itc3dhdGNoJyB9KTtcbiAgICBjb25zdCBkYXJrQmFzZUhTTCA9IGAke3ByZXNldC5kYXJrLmJhc2UuaH0sICR7cHJlc2V0LmRhcmsuYmFzZS5zfSUsICR7cHJlc2V0LmRhcmsuYmFzZS5sfSVgO1xuICAgIGRhcmtCYXNlU3dhdGNoUHJldmlldy5zZXRBdHRyaWJ1dGUoJ2RhdGEtaHNsJywgZGFya0Jhc2VIU0wpO1xuICAgIHNldENzc1Byb3AoZGFya0Jhc2VTd2F0Y2hQcmV2aWV3LCAnLS1zd2F0Y2gtaHNsJywgZGFya0Jhc2VIU0wpO1xuICAgIGRhcmtCYXNlU3dhdGNoUHJldmlldy50aXRsZSA9IGBCYXNlOiBoc2woJHtwcmVzZXQuZGFyay5iYXNlLmh9LCAke3ByZXNldC5kYXJrLmJhc2Uuc30lLCAke3ByZXNldC5kYXJrLmJhc2UubH0lKWA7XG4gICAgXG4gICAgY29uc3QgZGFya0FjY2VudFN3YXRjaFByZXZpZXcgPSBkYXJrU3dhdGNoZXMuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnY29sb3Itc3dhdGNoJyB9KTtcbiAgICBjb25zdCBkYXJrQWNjZW50SFNMID0gYCR7cHJlc2V0LmRhcmsuYWNjZW50Lmh9LCAke3ByZXNldC5kYXJrLmFjY2VudC5zfSUsICR7cHJlc2V0LmRhcmsuYWNjZW50Lmx9JWA7XG4gICAgZGFya0FjY2VudFN3YXRjaFByZXZpZXcuc2V0QXR0cmlidXRlKCdkYXRhLWhzbCcsIGRhcmtBY2NlbnRIU0wpO1xuICAgIHNldENzc1Byb3AoZGFya0FjY2VudFN3YXRjaFByZXZpZXcsICctLXN3YXRjaC1oc2wnLCBkYXJrQWNjZW50SFNMKTtcbiAgICBkYXJrQWNjZW50U3dhdGNoUHJldmlldy50aXRsZSA9IGBBY2NlbnQ6IGhzbCgke3ByZXNldC5kYXJrLmFjY2VudC5ofSwgJHtwcmVzZXQuZGFyay5hY2NlbnQuc30lLCAke3ByZXNldC5kYXJrLmFjY2VudC5sfSUpYDtcblxuICAgIC8vIE1vZGUgdG9nZ2xlIGZ1bmN0aW9uYWxpdHlcbiAgICBsaWdodE1vZGVCdG4ub25jbGljayA9ICgpID0+IHtcbiAgICAgIGxpZ2h0TW9kZUJ0bi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgIGRhcmtNb2RlQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgbGlnaHRTd2F0Y2hlcy5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgIGRhcmtTd2F0Y2hlcy5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICB9O1xuXG4gICAgZGFya01vZGVCdG4ub25jbGljayA9ICgpID0+IHtcbiAgICAgIGRhcmtNb2RlQnRuLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgbGlnaHRNb2RlQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgZGFya1N3YXRjaGVzLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgbGlnaHRTd2F0Y2hlcy5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICB9O1xuXG4gICAgLy8gQ29sb3IgZGV0YWlsc1xuICAgIGNvbnN0IGRldGFpbHMgPSB0aGlzLnByZXZpZXdDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnY29sb3ItZGV0YWlscy1zZWN0aW9uJyB9KTtcbiAgICBkZXRhaWxzLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ0NvbG9yIHZhbHVlcycgfSk7XG5cbiAgICBjb25zdCBsaWdodERldGFpbHMgPSBkZXRhaWxzLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ21vZGUtZGV0YWlscycgfSk7XG4gICAgbGlnaHREZXRhaWxzLmNyZWF0ZUVsKCdoNScsIHsgdGV4dDogJ0xpZ2h0IG1vZGUnIH0pO1xuICAgIFxuICAgIGNvbnN0IGxpZ2h0QmFzZSA9IGxpZ2h0RGV0YWlscy5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdjb2xvci1kZXRhaWwnIH0pO1xuICAgIGNvbnN0IGxpZ2h0QmFzZVN3YXRjaERldGFpbCA9IGxpZ2h0QmFzZS5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdkZXRhaWwtc3dhdGNoJyB9KTtcbiAgICBjb25zdCBsaWdodEJhc2VIU0xEZXRhaWwgPSBgJHtwcmVzZXQubGlnaHQuYmFzZS5ofSwgJHtwcmVzZXQubGlnaHQuYmFzZS5zfSUsICR7cHJlc2V0LmxpZ2h0LmJhc2UubH0lYDtcbiAgICBsaWdodEJhc2VTd2F0Y2hEZXRhaWwuc2V0QXR0cmlidXRlKCdkYXRhLWhzbCcsIGxpZ2h0QmFzZUhTTERldGFpbCk7XG4gICAgc2V0Q3NzUHJvcChsaWdodEJhc2VTd2F0Y2hEZXRhaWwsICctLWRldGFpbC1oc2wnLCBsaWdodEJhc2VIU0xEZXRhaWwpO1xuICAgIGxpZ2h0QmFzZS5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ0Jhc2U6ICcgfSk7XG4gICAgbGlnaHRCYXNlLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiBgaHNsKCR7cHJlc2V0LmxpZ2h0LmJhc2UuaH0sICR7cHJlc2V0LmxpZ2h0LmJhc2Uuc30lLCAke3ByZXNldC5saWdodC5iYXNlLmx9JSlgIH0pO1xuICAgIFxuICAgIGNvbnN0IGxpZ2h0QWNjZW50ID0gbGlnaHREZXRhaWxzLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2NvbG9yLWRldGFpbCcgfSk7XG4gICAgY29uc3QgbGlnaHRBY2NlbnRTd2F0Y2hEZXRhaWwgPSBsaWdodEFjY2VudC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdkZXRhaWwtc3dhdGNoJyB9KTtcbiAgICBjb25zdCBsaWdodEFjY2VudEhTTERldGFpbCA9IGAke3ByZXNldC5saWdodC5hY2NlbnQuaH0sICR7cHJlc2V0LmxpZ2h0LmFjY2VudC5zfSUsICR7cHJlc2V0LmxpZ2h0LmFjY2VudC5sfSVgO1xuICAgIGxpZ2h0QWNjZW50U3dhdGNoRGV0YWlsLnNldEF0dHJpYnV0ZSgnZGF0YS1oc2wnLCBsaWdodEFjY2VudEhTTERldGFpbCk7XG4gICAgc2V0Q3NzUHJvcChsaWdodEFjY2VudFN3YXRjaERldGFpbCwgJy0tZGV0YWlsLWhzbCcsIGxpZ2h0QWNjZW50SFNMRGV0YWlsKTtcbiAgICBsaWdodEFjY2VudC5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ0FjY2VudDogJyB9KTtcbiAgICBsaWdodEFjY2VudC5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogYGhzbCgke3ByZXNldC5saWdodC5hY2NlbnQuaH0sICR7cHJlc2V0LmxpZ2h0LmFjY2VudC5zfSUsICR7cHJlc2V0LmxpZ2h0LmFjY2VudC5sfSUpYCB9KTtcblxuICAgIGNvbnN0IGRhcmtEZXRhaWxzID0gZGV0YWlscy5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdtb2RlLWRldGFpbHMnIH0pO1xuICAgIGRhcmtEZXRhaWxzLmNyZWF0ZUVsKCdoNScsIHsgdGV4dDogJ0RhcmsgbW9kZScgfSk7XG4gICAgXG4gICAgY29uc3QgZGFya0Jhc2UgPSBkYXJrRGV0YWlscy5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdjb2xvci1kZXRhaWwnIH0pO1xuICAgIGNvbnN0IGRhcmtCYXNlU3dhdGNoRGV0YWlsID0gZGFya0Jhc2UuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnZGV0YWlsLXN3YXRjaCcgfSk7XG4gICAgY29uc3QgZGFya0Jhc2VIU0xEZXRhaWwgPSBgJHtwcmVzZXQuZGFyay5iYXNlLmh9LCAke3ByZXNldC5kYXJrLmJhc2Uuc30lLCAke3ByZXNldC5kYXJrLmJhc2UubH0lYDtcbiAgICBkYXJrQmFzZVN3YXRjaERldGFpbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtaHNsJywgZGFya0Jhc2VIU0xEZXRhaWwpO1xuICAgIHNldENzc1Byb3AoZGFya0Jhc2VTd2F0Y2hEZXRhaWwsICctLWRldGFpbC1oc2wnLCBkYXJrQmFzZUhTTERldGFpbCk7XG4gICAgZGFya0Jhc2UuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6ICdCYXNlOiAnIH0pO1xuICAgIGRhcmtCYXNlLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiBgaHNsKCR7cHJlc2V0LmRhcmsuYmFzZS5ofSwgJHtwcmVzZXQuZGFyay5iYXNlLnN9JSwgJHtwcmVzZXQuZGFyay5iYXNlLmx9JSlgIH0pO1xuICAgIFxuICAgIGNvbnN0IGRhcmtBY2NlbnQgPSBkYXJrRGV0YWlscy5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdjb2xvci1kZXRhaWwnIH0pO1xuICAgIGNvbnN0IGRhcmtBY2NlbnRTd2F0Y2hEZXRhaWwgPSBkYXJrQWNjZW50LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2RldGFpbC1zd2F0Y2gnIH0pO1xuICAgIGNvbnN0IGRhcmtBY2NlbnRIU0xEZXRhaWwgPSBgJHtwcmVzZXQuZGFyay5hY2NlbnQuaH0sICR7cHJlc2V0LmRhcmsuYWNjZW50LnN9JSwgJHtwcmVzZXQuZGFyay5hY2NlbnQubH0lYDtcbiAgICBkYXJrQWNjZW50U3dhdGNoRGV0YWlsLnNldEF0dHJpYnV0ZSgnZGF0YS1oc2wnLCBkYXJrQWNjZW50SFNMRGV0YWlsKTtcbiAgICBzZXRDc3NQcm9wKGRhcmtBY2NlbnRTd2F0Y2hEZXRhaWwsICctLWRldGFpbC1oc2wnLCBkYXJrQWNjZW50SFNMRGV0YWlsKTtcbiAgICBkYXJrQWNjZW50LmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiAnQWNjZW50OiAnIH0pO1xuICAgIGRhcmtBY2NlbnQuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IGBoc2woJHtwcmVzZXQuZGFyay5hY2NlbnQuaH0sICR7cHJlc2V0LmRhcmsuYWNjZW50LnN9JSwgJHtwcmVzZXQuZGFyay5hY2NlbnQubH0lKWAgfSk7XG5cbiAgICAvLyBTaG93IG92ZXJyaWRlIGNvdW50IGlmIGFueVxuICAgIGNvbnN0IGxpZ2h0T3ZlcnJpZGVzID0gT2JqZWN0LmtleXMocHJlc2V0LmxpZ2h0LmNvbG9ycyB8fCB7fSkubGVuZ3RoO1xuICAgIGNvbnN0IGRhcmtPdmVycmlkZXMgPSBPYmplY3Qua2V5cyhwcmVzZXQuZGFyay5jb2xvcnMgfHwge30pLmxlbmd0aDtcbiAgICBcbiAgICBpZiAobGlnaHRPdmVycmlkZXMgPiAwIHx8IGRhcmtPdmVycmlkZXMgPiAwKSB7XG4gICAgICBjb25zdCBvdmVycmlkZXNJbmZvID0gdGhpcy5wcmV2aWV3Q29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ292ZXJyaWRlcy1pbmZvJyB9KTtcbiAgICAgIG92ZXJyaWRlc0luZm8uY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgICB0ZXh0OiBgQ3VzdG9tIG92ZXJyaWRlczogJHtsaWdodE92ZXJyaWRlc30gbGlnaHQgbW9kZSwgJHtkYXJrT3ZlcnJpZGVzfSBkYXJrIG1vZGVgIFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBpbXBvcnRQcmVzZXQoKSB7XG4gICAgaWYgKHRoaXMucGFyc2VkUHJlc2V0KSB7XG4gICAgICB0aGlzLm9uSW1wb3J0KHRoaXMucGFyc2VkUHJlc2V0KTtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuXG4gIG9uQ2xvc2UoKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBNb2RhbCwgQXBwIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG5leHBvcnQgY2xhc3MgQ29uZmlybWF0aW9uTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gIHByaXZhdGUgcmVzb2x2ZTogKHZhbHVlOiBib29sZWFuKSA9PiB2b2lkO1xuICBwcml2YXRlIHRpdGxlOiBzdHJpbmc7XG4gIHByaXZhdGUgbWVzc2FnZTogc3RyaW5nO1xuICBwcml2YXRlIGNvbmZpcm1UZXh0OiBzdHJpbmc7XG4gIHByaXZhdGUgY2FuY2VsVGV4dDogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIGFwcDogQXBwLFxuICAgIHRpdGxlOiBzdHJpbmcsXG4gICAgbWVzc2FnZTogc3RyaW5nLFxuICAgIGNvbmZpcm1UZXh0OiBzdHJpbmcgPSAnWWVzJyxcbiAgICBjYW5jZWxUZXh0OiBzdHJpbmcgPSAnQ2FuY2VsJ1xuICApIHtcbiAgICBzdXBlcihhcHApO1xuICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgIHRoaXMuY29uZmlybVRleHQgPSBjb25maXJtVGV4dDtcbiAgICB0aGlzLmNhbmNlbFRleHQgPSBjYW5jZWxUZXh0O1xuICB9XG5cbiAgb25PcGVuKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuXG4gICAgLy8gVGl0bGVcbiAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiB0aGlzLnRpdGxlIH0pO1xuXG4gICAgLy8gTWVzc2FnZVxuICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogdGhpcy5tZXNzYWdlIH0pO1xuXG4gICAgLy8gQnV0dG9ucyBjb250YWluZXJcbiAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KCdtb2RhbC1idXR0b24tY29udGFpbmVyJyk7XG5cbiAgICAvLyBDYW5jZWwgYnV0dG9uXG4gICAgY29uc3QgY2FuY2VsQnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiB0aGlzLmNhbmNlbFRleHQsXG4gICAgICBjbHM6ICdtb2QtY3RhJ1xuICAgIH0pO1xuICAgIGNhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIHRoaXMucmVzb2x2ZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICAvLyBDb25maXJtIGJ1dHRvblxuICAgIGNvbnN0IGNvbmZpcm1CdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6IHRoaXMuY29uZmlybVRleHQsXG4gICAgICBjbHM6ICdtb2QtY3RhIGNvbmZpcm0tYnV0dG9uJ1xuICAgIH0pO1xuICAgIGNvbmZpcm1CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB0aGlzLnJlc29sdmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICAvLyBGb2N1cyB0aGUgY29uZmlybSBidXR0b25cbiAgICBjb25maXJtQnV0dG9uLmZvY3VzKCk7XG4gIH1cblxuICBvbkNsb3NlKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICB9XG5cbiAgLy8gU3RhdGljIG1ldGhvZCB0byBzaG93IHRoZSBtb2RhbCBhbmQgcmV0dXJuIGEgcHJvbWlzZVxuICBzdGF0aWMgYXN5bmMgc2hvdyhcbiAgICBhcHA6IEFwcCxcbiAgICB0aXRsZTogc3RyaW5nLFxuICAgIG1lc3NhZ2U6IHN0cmluZyxcbiAgICBjb25maXJtVGV4dDogc3RyaW5nID0gJ1llcycsXG4gICAgY2FuY2VsVGV4dDogc3RyaW5nID0gJ0NhbmNlbCdcbiAgKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICBjb25zdCBtb2RhbCA9IG5ldyBDb25maXJtYXRpb25Nb2RhbChhcHAsIHRpdGxlLCBtZXNzYWdlLCBjb25maXJtVGV4dCwgY2FuY2VsVGV4dCk7XG4gICAgICBtb2RhbC5yZXNvbHZlID0gcmVzb2x2ZTtcbiAgICAgIG1vZGFsLm9wZW4oKTtcbiAgICB9KTtcbiAgfVxufVxuIiwgIi8qKlxyXG4gKiBBbmltYXRpb24gc2V0dGluZ3Mgc2VjdGlvblxyXG4gKiBDb250cm9scyBhbmltYXRpb24gcGVyc29uYWxpdHkgYW5kIHNwZWVkXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IE1pbmltYWxUaGVtZSBmcm9tICcuLi8uLi9tYWluJztcclxuaW1wb3J0IHsgY3JlYXRlU2V0dGluZ3NHcm91cCB9IGZyb20gJy4uLy4uL3V0aWxzL3NldHRpbmdzLWNvbXBhdCc7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRBbmltYXRpb25TZXR0aW5ncyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQsIHBsdWdpbjogTWluaW1hbFRoZW1lKTogdm9pZCB7XHJcbiAgY29uc3QgYW5pbWF0aW9uR3JvdXAgPSBjcmVhdGVTZXR0aW5nc0dyb3VwKGNvbnRhaW5lckVsLCAnQW5pbWF0aW9ucycsICdveHlnZW4tc2V0dGluZ3MnKTtcclxuXHJcbiAgLy8gRGVjbGFyZSBzcGVlZFNldHRpbmcgdmFyaWFibGUgZmlyc3Qgc28gaXQgY2FuIGJlIHJlZmVyZW5jZWQgaW4gcGVyc29uYWxpdHkgb25DaGFuZ2VcclxuICBsZXQgc3BlZWRTZXR0aW5nOiBTZXR0aW5nO1xyXG5cclxuICAvLyBBbmltYXRpb24gUGVyc29uYWxpdHkgZHJvcGRvd25cclxuICBhbmltYXRpb25Hcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcbiAgICBzZXR0aW5nXHJcbiAgICAgIC5zZXROYW1lKCdBbmltYXRpb24gcGVyc29uYWxpdHknKVxyXG4gICAgICAvLyBGYWxzZSBwb3NpdGl2ZTogVGV4dCBpcyBhbHJlYWR5IGluIHNlbnRlbmNlIGNhc2U7IFwiRGVmYXVsdFwiLCBcIlBsYXlmdWxcIiwgYW5kIFwiT2ZmXCIgYXJlIG9wdGlvbiBsYWJlbHNcclxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9ic2lkaWFubWQvdWkvc2VudGVuY2UtY2FzZVxyXG4gICAgICAuc2V0RGVzYygnQ2hvb3NlIHRoZSBhbmltYXRpb24gc3R5bGU6IERlZmF1bHQgKHNtb290aCksIFBsYXlmdWwgKGJvdW5jeSksIG9yIE9mZiAoZGlzYWJsZWQpLicpXHJcbiAgICAgIC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcclxuICAgICAgICBkcm9wZG93blxyXG4gICAgICAgICAgLmFkZE9wdGlvbignZGVmYXVsdCcsICdEZWZhdWx0JylcclxuICAgICAgICAgIC5hZGRPcHRpb24oJ3BsYXlmdWwnLCAnUGxheWZ1bCcpXHJcbiAgICAgICAgICAuYWRkT3B0aW9uKCdvZmYnLCAnT2ZmJylcclxuICAgICAgICAgIC5zZXRWYWx1ZShwbHVnaW4uc2V0dGluZ3MuYW5pbWF0aW9uUGVyc29uYWxpdHkgfHwgJ2RlZmF1bHQnKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKCAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLmFuaW1hdGlvblBlcnNvbmFsaXR5ID0gdmFsdWUgYXMgJ2RlZmF1bHQnIHwgJ3BsYXlmdWwnIHwgJ29mZic7XHJcbiAgICAgICAgICAgIHZvaWQgcGx1Z2luLnNhdmVEYXRhKHBsdWdpbi5zZXR0aW5ncyk7XHJcbiAgICAgICAgICAgIHBsdWdpbi5yZWZyZXNoKCk7XHJcblxyXG4gICAgICAgICAgICAvLyBVcGRhdGUgc3BlZWQgc2xpZGVyIHZpc2liaWxpdHkgdXNpbmcgQ1NTIGNsYXNzXHJcbiAgICAgICAgICAgIGlmIChzcGVlZFNldHRpbmcgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gJ29mZicpIHtcclxuICAgICAgICAgICAgICAgIHNwZWVkU2V0dGluZy5zZXR0aW5nRWwuYWRkQ2xhc3MoJ2hpZGRlbicpO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzcGVlZFNldHRpbmcuc2V0dGluZ0VsLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgLy8gQW5pbWF0aW9uIFNwZWVkIHNsaWRlclxyXG4gIGFuaW1hdGlvbkdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuICAgIHNwZWVkU2V0dGluZyA9IHNldHRpbmc7XHJcbiAgICBzZXR0aW5nXHJcbiAgICAgIC5zZXROYW1lKCdBbmltYXRpb24gc3BlZWQnKVxyXG4gICAgICAuc2V0RGVzYygnQ29udHJvbCB0aGUgc3BlZWQgb2YgYW5pbWF0aW9ucy4gUmFuZ2U6IDAgKGRpc2FibGVkKSB0byAyIChoYWxmIHNwZWVkIC8gc2xvd2VyKS4gRGVmYXVsdDogMSAobm9ybWFsIHNwZWVkKS4gTG93ZXIgdmFsdWVzID0gZmFzdGVyIGFuaW1hdGlvbnMsIGhpZ2hlciB2YWx1ZXMgPSBzbG93ZXIgYW5pbWF0aW9ucy4nKVxyXG4gICAgICAuYWRkU2xpZGVyKChzbGlkZXIpID0+IHtcclxuICAgICAgICBzbGlkZXJcclxuICAgICAgICAgIC5zZXRMaW1pdHMoMCwgMiwgMC4xKVxyXG4gICAgICAgICAgLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy5hbmltYXRpb25TcGVlZClcclxuICAgICAgICAgIC5zZXREeW5hbWljVG9vbHRpcCgpXHJcbiAgICAgICAgICAub25DaGFuZ2UoICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuYW5pbWF0aW9uU3BlZWQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgdm9pZCBwbHVnaW4uc2F2ZURhdGEocGx1Z2luLnNldHRpbmdzKTtcclxuICAgICAgICAgICAgcGx1Z2luLnJlZnJlc2goKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAvLyBIaWRlIHNwZWVkIHNsaWRlciBpZiBhbmltYXRpb25zIGFyZSBvZmYgdXNpbmcgQ1NTIGNsYXNzXHJcbiAgICBpZiAocGx1Z2luLnNldHRpbmdzLmFuaW1hdGlvblBlcnNvbmFsaXR5ID09PSAnb2ZmJykge1xyXG4gICAgICBzcGVlZFNldHRpbmcuc2V0dGluZ0VsLmFkZENsYXNzKCdoaWRkZW4nKTtcclxuICAgIH1cclxuICB9KTtcclxufVxyXG5cclxuIiwgIi8qKlxyXG4gKiBQcmVzZXQgQ1NTIEdlbmVyYXRpb25cclxuICogR2VuZXJhdGVzIENTUyBydWxlcyBmb3IgY3VzdG9tIGNvbG9yIHByZXNldHNcclxuICovXHJcblxyXG5pbXBvcnQgeyBDdXN0b21Db2xvclByZXNldCB9IGZyb20gJy4vQ3VzdG9tUHJlc2V0JztcclxuXHJcbmV4cG9ydCBjbGFzcyBQcmVzZXRDU1NHZW5lcmF0b3Ige1xyXG4gIC8qKlxyXG4gICAqIEdlbmVyYXRlIENTUyBjdXN0b20gcHJvcGVydGllcyBhcyBhbiBvYmplY3QgZm9yIGRpcmVjdCBhcHBsaWNhdGlvbiB0byBib2R5IGVsZW1lbnRcclxuICAgKiBUaGlzIGF2b2lkcyBjcmVhdGluZyBzdHlsZSBlbGVtZW50cyBhbmQgY29tcGxpZXMgd2l0aCBPYnNpZGlhbiBndWlkZWxpbmVzXHJcbiAgICovXHJcbiAgc3RhdGljIGdlbmVyYXRlUHJvcGVydGllcyhwcmVzZXQ6IEN1c3RvbUNvbG9yUHJlc2V0LCBtb2RlOiAnbGlnaHQnIHwgJ2RhcmsnKTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiB7XHJcbiAgICBjb25zdCBwYWxldHRlID0gbW9kZSA9PT0gJ2xpZ2h0JyA/IHByZXNldC5saWdodCA6IHByZXNldC5kYXJrO1xyXG5cclxuICAgIC8vIENhbGN1bGF0ZSBhbGwgZGVyaXZlZCBjb2xvcnMgYmFzZWQgb24gdGhlIHRoZW1lJ3MgY29sb3Igc3lzdGVtXHJcbiAgICBjb25zdCBiYXNlSCA9IHBhbGV0dGUuYmFzZS5oO1xyXG4gICAgY29uc3QgYmFzZVMgPSBwYWxldHRlLmJhc2UucztcclxuICAgIGNvbnN0IGJhc2VMID0gcGFsZXR0ZS5iYXNlLmw7XHJcbiAgICBjb25zdCBhY2NlbnRIID0gcGFsZXR0ZS5hY2NlbnQuaDtcclxuICAgIGNvbnN0IGFjY2VudFMgPSBwYWxldHRlLmFjY2VudC5zO1xyXG4gICAgY29uc3QgYWNjZW50TCA9IHBhbGV0dGUuYWNjZW50Lmw7XHJcblxyXG4gICAgLy8gRGV0ZXJtaW5lIGlmIHRoaXMgaXMgYSBsaWdodCBvciBkYXJrIHRoZW1lIGJhc2VkIG9uIGJhc2UgbGlnaHRuZXNzXHJcbiAgICBjb25zdCBpc0xpZ2h0TW9kZSA9IG1vZGUgPT09ICdsaWdodCc7XHJcbiAgICBjb25zdCBpc0xpZ2h0QmFzZSA9IGJhc2VMID4gNTA7XHJcblxyXG4gICAgLy8gQ2FsY3VsYXRlIGNvbG9yIHZhbHVlc1xyXG4gICAgY29uc3QgYmcxID0gYGhzbCgke2Jhc2VIfSwgJHtiYXNlU30lLCAke2Jhc2VMfSUpYDtcclxuICAgIGNvbnN0IGJnMiA9IGBoc2woJHtiYXNlSH0sICR7YmFzZVN9JSwgJHtpc0xpZ2h0QmFzZSA/IE1hdGgubWF4KDAsIGJhc2VMIC0gNSkgOiBNYXRoLm1pbigxMDAsIGJhc2VMICsgNSl9JSlgO1xyXG4gICAgY29uc3QgYmczID0gYGhzbCgke2Jhc2VIfSwgJHtiYXNlU30lLCAke2lzTGlnaHRCYXNlID8gTWF0aC5tYXgoMCwgYmFzZUwgLSAxMCkgOiBNYXRoLm1pbigxMDAsIGJhc2VMICsgMTApfSUpYDtcclxuXHJcbiAgICAvLyBVSSBjb2xvcnMgKGJvcmRlcnMsIGRpdmlkZXJzLCBldGMuKSAtIGRhcmtlciBmb3IgbGlnaHQgbW9kZSwgbGlnaHRlciBmb3IgZGFyayBtb2RlXHJcbiAgICBjb25zdCB1aTFMID0gaXNMaWdodEJhc2UgPyBNYXRoLm1heCgwLCBiYXNlTCAtIDE1KSA6IE1hdGgubWluKDEwMCwgYmFzZUwgKyAxNSk7XHJcbiAgICBjb25zdCB1aTJMID0gaXNMaWdodEJhc2UgPyBNYXRoLm1heCgwLCBiYXNlTCAtIDEwKSA6IE1hdGgubWluKDEwMCwgYmFzZUwgKyAxMCk7XHJcbiAgICBjb25zdCB1aTNMID0gaXNMaWdodEJhc2UgPyBNYXRoLm1heCgwLCBiYXNlTCAtIDUpIDogTWF0aC5taW4oMTAwLCBiYXNlTCArIDUpO1xyXG5cclxuICAgIGNvbnN0IHVpMSA9IGBoc2woJHtiYXNlSH0sICR7YmFzZVN9JSwgJHt1aTFMfSUpYDtcclxuICAgIGNvbnN0IHVpMiA9IGBoc2woJHtiYXNlSH0sICR7YmFzZVN9JSwgJHt1aTJMfSUpYDtcclxuICAgIGNvbnN0IHVpMyA9IGBoc2woJHtiYXNlSH0sICR7YmFzZVN9JSwgJHt1aTNMfSUpYDtcclxuXHJcbiAgICAvLyBUZXh0IGNvbG9ycyAtIGVuc3VyZSBwcm9wZXIgY29udHJhc3RcclxuICAgIGNvbnN0IHR4MUwgPSBpc0xpZ2h0QmFzZSA/IDE1IDogODU7XHJcbiAgICBjb25zdCB0eDJMID0gaXNMaWdodEJhc2UgPyAyNSA6IDc1O1xyXG4gICAgY29uc3QgdHgzTCA9IGlzTGlnaHRCYXNlID8gMzUgOiA2NTtcclxuICAgIGNvbnN0IHR4NEwgPSBpc0xpZ2h0QmFzZSA/IDMwIDogNzA7XHJcblxyXG4gICAgY29uc3QgdHgxID0gYGhzbCgke2Jhc2VIfSwgJHtNYXRoLm1heCgwLCBiYXNlUyAtIDEwKX0lLCAke3R4MUx9JSlgO1xyXG4gICAgY29uc3QgdHgyID0gYGhzbCgke2Jhc2VIfSwgJHtNYXRoLm1heCgwLCBiYXNlUyAtIDIwKX0lLCAke3R4Mkx9JSlgO1xyXG4gICAgY29uc3QgdHgzID0gYGhzbCgke2Jhc2VIfSwgJHtNYXRoLm1heCgwLCBiYXNlUyAtIDEwKX0lLCAke3R4M0x9JSlgO1xyXG4gICAgY29uc3QgdHg0ID0gYGhzbCgke2Jhc2VIfSwgJHtNYXRoLm1heCgwLCBiYXNlUyAtIDEwKX0lLCAke3R4NEx9JSlgO1xyXG5cclxuICAgIC8vIEhpZ2hsaWdodCBjb2xvcnNcclxuICAgIGNvbnN0IGhsMSA9IGBoc2xhKCR7YWNjZW50SH0sIDUwJSwgNDAlLCAzMCUpYDtcclxuICAgIGNvbnN0IGhsMiA9IGByZ2JhKDI1NSwgMTc3LCA4MCwgMC4zKWA7XHJcblxyXG4gICAgLy8gU3BlY2lhbCBjb2xvcnNcclxuICAgIGNvbnN0IHNwMSA9IGlzTGlnaHRNb2RlID8gJ3doaXRlJyA6ICdibGFjayc7XHJcblxyXG4gICAgLy8gQ2FsY3VsYXRlIHByb3BlciBjb250cmFzdCBmb3IgYWNjZW50IGNvbG9yIHVzaW5nIHJlbGF0aXZlIGx1bWluYW5jZVxyXG4gICAgY29uc3QgaHNsVG9SZ2IgPSAoaDogbnVtYmVyLCBzOiBudW1iZXIsIGw6IG51bWJlcik6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSA9PiB7XHJcbiAgICAgIGggPSBoIC8gMzYwO1xyXG4gICAgICBzID0gcyAvIDEwMDtcclxuICAgICAgbCA9IGwgLyAxMDA7XHJcblxyXG4gICAgICBjb25zdCBodWUycmdiID0gKHA6IG51bWJlciwgcTogbnVtYmVyLCB0OiBudW1iZXIpID0+IHtcclxuICAgICAgICBpZiAodCA8IDApIHQgKz0gMTtcclxuICAgICAgICBpZiAodCA+IDEpIHQgLT0gMTtcclxuICAgICAgICBpZiAodCA8IDEgLyA2KSByZXR1cm4gcCArIChxIC0gcCkgKiA2ICogdDtcclxuICAgICAgICBpZiAodCA8IDEgLyAyKSByZXR1cm4gcTtcclxuICAgICAgICBpZiAodCA8IDIgLyAzKSByZXR1cm4gcCArIChxIC0gcCkgKiAoMiAvIDMgLSB0KSAqIDY7XHJcbiAgICAgICAgcmV0dXJuIHA7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBpZiAocyA9PT0gMCkge1xyXG4gICAgICAgIHJldHVybiBbbCwgbCwgbF07XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IHEgPSBsIDwgMC41ID8gbCAqICgxICsgcykgOiBsICsgcyAtIGwgKiBzO1xyXG4gICAgICBjb25zdCBwID0gMiAqIGwgLSBxO1xyXG4gICAgICBjb25zdCByID0gaHVlMnJnYihwLCBxLCBoICsgMSAvIDMpO1xyXG4gICAgICBjb25zdCBnID0gaHVlMnJnYihwLCBxLCBoKTtcclxuICAgICAgY29uc3QgYiA9IGh1ZTJyZ2IocCwgcSwgaCAtIDEgLyAzKTtcclxuXHJcbiAgICAgIHJldHVybiBbciwgZywgYl07XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IFtyLCBnLCBiXSA9IGhzbFRvUmdiKGFjY2VudEgsIGFjY2VudFMsIGFjY2VudEwpO1xyXG5cclxuICAgIC8vIENhbGN1bGF0ZSByZWxhdGl2ZSBsdW1pbmFuY2UgKFdDQUcgZm9ybXVsYSlcclxuICAgIGNvbnN0IGx1bWluYW5jZSA9IDAuMjEyNiAqIChyIDw9IDAuMDM5MjggPyByIC8gMTIuOTIgOiBNYXRoLnBvdygociArIDAuMDU1KSAvIDEuMDU1LCAyLjQpKVxyXG4gICAgICArIDAuNzE1MiAqIChnIDw9IDAuMDM5MjggPyBnIC8gMTIuOTIgOiBNYXRoLnBvdygoZyArIDAuMDU1KSAvIDEuMDU1LCAyLjQpKVxyXG4gICAgICArIDAuMDcyMiAqIChiIDw9IDAuMDM5MjggPyBiIC8gMTIuOTIgOiBNYXRoLnBvdygoYiArIDAuMDU1KSAvIDEuMDU1LCAyLjQpKTtcclxuXHJcbiAgICAvLyBVc2Ugd2hpdGUgdGV4dCBpZiBsdW1pbmFuY2UgaXMgbG93IChkYXJrIGNvbG9yKSwgYmxhY2sgdGV4dCBpZiBoaWdoIChsaWdodCBjb2xvcilcclxuICAgIGNvbnN0IHRleHRPbkFjY2VudCA9IGx1bWluYW5jZSA+IDAuNSA/ICdibGFjaycgOiAnd2hpdGUnO1xyXG5cclxuICAgIC8vIEJ1aWxkIHByb3BlcnRpZXMgb2JqZWN0XHJcbiAgICBjb25zdCBwcm9wczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcclxuICAgICAgJy0tYmFzZS1oJzogYCR7YmFzZUh9YCxcclxuICAgICAgJy0tYmFzZS1zJzogYCR7YmFzZVN9JWAsXHJcbiAgICAgICctLWJhc2UtbCc6IGAke2Jhc2VMfSVgLFxyXG4gICAgICAnLS1iZzEnOiBiZzEsXHJcbiAgICAgICctLWJnMic6IGJnMixcclxuICAgICAgJy0tYmctdGFiJzogYmcyLFxyXG4gICAgICAnLS1iZzMnOiBiZzMsXHJcbiAgICAgICctLXVpMSc6IHVpMSxcclxuICAgICAgJy0tdWkyJzogdWkyLFxyXG4gICAgICAnLS11aTMnOiB1aTMsXHJcbiAgICAgICctLXR4MSc6IHR4MSxcclxuICAgICAgJy0tdHgyJzogdHgyLFxyXG4gICAgICAnLS10eDMnOiB0eDMsXHJcbiAgICAgICctLXR4NCc6IHR4NCxcclxuICAgICAgJy0taGwxJzogaGwxLFxyXG4gICAgICAnLS1obDInOiBobDIsXHJcbiAgICAgICctLXNwMSc6IHNwMSxcclxuICAgIH07XHJcblxyXG4gICAgLy8gRXh0ZW5kZWQgY29sb3IgcGFsZXR0ZVxyXG4gICAgY29uc3QgZXh0ZW5kZWRTID0gYWNjZW50UztcclxuICAgIGNvbnN0IGV4dGVuZGVkTCA9IGlzTGlnaHRCYXNlID8gNTUgOiA2NTtcclxuXHJcbiAgICBwcm9wc1snLS1jb2xvci1yZWQnXSA9IGBoc2woMCwgdmFyKC0tYWNjZW50LXMpLCAke2V4dGVuZGVkTH0lKWA7XHJcbiAgICBwcm9wc1snLS1jb2xvci1vcmFuZ2UnXSA9IGBoc2woMjUsIHZhcigtLWFjY2VudC1zKSwgJHtleHRlbmRlZEx9JSlgO1xyXG4gICAgcHJvcHNbJy0tY29sb3IteWVsbG93J10gPSBgaHNsKDUwLCB2YXIoLS1hY2NlbnQtcyksICR7ZXh0ZW5kZWRMfSUpYDtcclxuICAgIHByb3BzWyctLWNvbG9yLWdyZWVuJ10gPSBgaHNsKDEzMCwgdmFyKC0tYWNjZW50LXMpLCAke2V4dGVuZGVkTH0lKWA7XHJcbiAgICBwcm9wc1snLS1jb2xvci1jeWFuJ10gPSBgaHNsKDE4MCwgdmFyKC0tYWNjZW50LXMpLCAke2V4dGVuZGVkTH0lKWA7XHJcbiAgICBwcm9wc1snLS1jb2xvci1ibHVlJ10gPSBgaHNsKDIyMCwgdmFyKC0tYWNjZW50LXMpLCAke2V4dGVuZGVkTH0lKWA7XHJcbiAgICBwcm9wc1snLS1jb2xvci1wdXJwbGUnXSA9IGBoc2woMjgwLCB2YXIoLS1hY2NlbnQtcyksICR7ZXh0ZW5kZWRMfSUpYDtcclxuICAgIHByb3BzWyctLWNvbG9yLXBpbmsnXSA9IGBoc2woMzMwLCB2YXIoLS1hY2NlbnQtcyksICR7ZXh0ZW5kZWRMfSUpYDtcclxuXHJcbiAgICAvLyBPcHRpb25hbCBmcmFtZSBsaWdodG5lc3Mgb3ZlcnJpZGVcclxuICAgIGlmIChwYWxldHRlLmZyYW1lTGlnaHRuZXNzT2Zmc2V0ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgY29uc3Qgb2Zmc2V0ID0gcGFsZXR0ZS5mcmFtZUxpZ2h0bmVzc09mZnNldCA+PSAwID8gYCsgJHtwYWxldHRlLmZyYW1lTGlnaHRuZXNzT2Zmc2V0fWAgOiBgLSAke01hdGguYWJzKHBhbGV0dGUuZnJhbWVMaWdodG5lc3NPZmZzZXQpfWA7XHJcbiAgICAgIHByb3BzWyctLWZyYW1lLWJhY2tncm91bmQtbCddID0gYGNhbGModmFyKC0tYWNjZW50LWwpICR7b2Zmc2V0fSUpYDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBPcHRpb25hbCBjb2xvciBvdmVycmlkZXNcclxuICAgIGlmIChwYWxldHRlLmNvbG9ycykge1xyXG4gICAgICBjb25zdCBvdmVycmlkZXMgPSBbXHJcbiAgICAgICAgJ2JnMScsICdiZzInLCAnYmczJyxcclxuICAgICAgICAndWkxJywgJ3VpMicsICd1aTMnLFxyXG4gICAgICAgICd0eDEnLCAndHgyJywgJ3R4MycsICd0eDQnLFxyXG4gICAgICAgICdobDEnLCAnaGwyJyxcclxuICAgICAgICAncmVkJywgJ29yYW5nZScsICd5ZWxsb3cnLCAnZ3JlZW4nLCAnY3lhbicsICdibHVlJywgJ3B1cnBsZScsICdwaW5rJ1xyXG4gICAgICBdO1xyXG5cclxuICAgICAgb3ZlcnJpZGVzLmZvckVhY2goY29sb3JLZXkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNvbG9yID0gcGFsZXR0ZS5jb2xvcnM/Lltjb2xvcktleSBhcyBrZXlvZiB0eXBlb2YgcGFsZXR0ZS5jb2xvcnNdO1xyXG4gICAgICAgIGlmIChjb2xvcikge1xyXG4gICAgICAgICAgc3dpdGNoIChjb2xvcktleSkge1xyXG4gICAgICAgICAgICBjYXNlICdiZzEnOlxyXG4gICAgICAgICAgICBjYXNlICdiZzInOlxyXG4gICAgICAgICAgICBjYXNlICdiZzMnOlxyXG4gICAgICAgICAgICBjYXNlICd1aTEnOlxyXG4gICAgICAgICAgICBjYXNlICd1aTInOlxyXG4gICAgICAgICAgICBjYXNlICd1aTMnOlxyXG4gICAgICAgICAgICBjYXNlICd0eDEnOlxyXG4gICAgICAgICAgICBjYXNlICd0eDInOlxyXG4gICAgICAgICAgICBjYXNlICd0eDMnOlxyXG4gICAgICAgICAgICBjYXNlICd0eDQnOlxyXG4gICAgICAgICAgICBjYXNlICdobDEnOlxyXG4gICAgICAgICAgICBjYXNlICdobDInOlxyXG4gICAgICAgICAgICAgIHByb3BzW2AtLSR7Y29sb3JLZXl9YF0gPSBjb2xvcjtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICBwcm9wc1tgLS1jb2xvci0ke2NvbG9yS2V5fWBdID0gY29sb3I7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcHJvcHM7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZW5lcmF0ZSBDU1MgZm9yIGEgY3VzdG9tIHByZXNldCB1c2luZyBPeHlnZW4gY3VzdG9tIHZhcmlhYmxlc1xyXG4gICAqIFRoaXMgYWxsb3dzIFN0eWxlIFNldHRpbmdzIHRvIG92ZXJyaWRlIE9ic2lkaWFuIG5hdGl2ZSB2YXJpYWJsZXNcclxuICAgKiBAZGVwcmVjYXRlZCBVc2UgZ2VuZXJhdGVQcm9wZXJ0aWVzIGluc3RlYWQgdG8gYXZvaWQgY3JlYXRpbmcgc3R5bGUgZWxlbWVudHNcclxuICAgKi9cclxuICBzdGF0aWMgZ2VuZXJhdGVDU1MocHJlc2V0OiBDdXN0b21Db2xvclByZXNldCwgbW9kZTogJ2xpZ2h0JyB8ICdkYXJrJyk6IHN0cmluZyB7XHJcbiAgICBjb25zdCBwYWxldHRlID0gbW9kZSA9PT0gJ2xpZ2h0JyA/IHByZXNldC5saWdodCA6IHByZXNldC5kYXJrO1xyXG4gICAgY29uc3QgdGhlbWVDbGFzcyA9IG1vZGUgPT09ICdsaWdodCcgPyAndGhlbWUtbGlnaHQnIDogJ3RoZW1lLWRhcmsnO1xyXG4gICAgY29uc3QgY2xhc3NOYW1lID0gYG94eWdlbi1jdXN0b20tJHtwcmVzZXQuaWR9YDtcclxuXHJcbiAgICAvLyBVc2Ugc2ltcGxlciBzZWxlY3RvciAtIG1vZGlmaWVzIE94eWdlbiBjdXN0b20gdmFyaWFibGVzLCBub3QgT2JzaWRpYW4gbmF0aXZlXHJcbiAgICBsZXQgY3NzID0gYC4ke3RoZW1lQ2xhc3N9LiR7Y2xhc3NOYW1lfSB7XFxuYDtcclxuXHJcbiAgICAvLyBDYWxjdWxhdGUgYWxsIGRlcml2ZWQgY29sb3JzIGJhc2VkIG9uIHRoZSB0aGVtZSdzIGNvbG9yIHN5c3RlbVxyXG4gICAgY29uc3QgYmFzZUggPSBwYWxldHRlLmJhc2UuaDtcclxuICAgIGNvbnN0IGJhc2VTID0gcGFsZXR0ZS5iYXNlLnM7XHJcbiAgICBjb25zdCBiYXNlTCA9IHBhbGV0dGUuYmFzZS5sO1xyXG4gICAgY29uc3QgYWNjZW50SCA9IHBhbGV0dGUuYWNjZW50Lmg7XHJcbiAgICBjb25zdCBhY2NlbnRTID0gcGFsZXR0ZS5hY2NlbnQucztcclxuICAgIGNvbnN0IGFjY2VudEwgPSBwYWxldHRlLmFjY2VudC5sO1xyXG5cclxuICAgIC8vIERldGVybWluZSBpZiB0aGlzIGlzIGEgbGlnaHQgb3IgZGFyayB0aGVtZSBiYXNlZCBvbiBiYXNlIGxpZ2h0bmVzc1xyXG4gICAgY29uc3QgaXNMaWdodE1vZGUgPSBtb2RlID09PSAnbGlnaHQnO1xyXG4gICAgY29uc3QgaXNMaWdodEJhc2UgPSBiYXNlTCA+IDUwO1xyXG5cclxuICAgIC8vIENhbGN1bGF0ZSBjb2xvciB2YWx1ZXNcclxuICAgIGNvbnN0IGJnMSA9IGBoc2woJHtiYXNlSH0sICR7YmFzZVN9JSwgJHtiYXNlTH0lKWA7XHJcbiAgICBjb25zdCBiZzIgPSBgaHNsKCR7YmFzZUh9LCAke2Jhc2VTfSUsICR7aXNMaWdodEJhc2UgPyBNYXRoLm1heCgwLCBiYXNlTCAtIDUpIDogTWF0aC5taW4oMTAwLCBiYXNlTCArIDUpfSUpYDtcclxuICAgIGNvbnN0IGJnMyA9IGBoc2woJHtiYXNlSH0sICR7YmFzZVN9JSwgJHtpc0xpZ2h0QmFzZSA/IE1hdGgubWF4KDAsIGJhc2VMIC0gMTApIDogTWF0aC5taW4oMTAwLCBiYXNlTCArIDEwKX0lKWA7XHJcblxyXG4gICAgLy8gVUkgY29sb3JzIChib3JkZXJzLCBkaXZpZGVycywgZXRjLikgLSBkYXJrZXIgZm9yIGxpZ2h0IG1vZGUsIGxpZ2h0ZXIgZm9yIGRhcmsgbW9kZVxyXG4gICAgY29uc3QgdWkxTCA9IGlzTGlnaHRCYXNlID8gTWF0aC5tYXgoMCwgYmFzZUwgLSAxNSkgOiBNYXRoLm1pbigxMDAsIGJhc2VMICsgMTUpO1xyXG4gICAgY29uc3QgdWkyTCA9IGlzTGlnaHRCYXNlID8gTWF0aC5tYXgoMCwgYmFzZUwgLSAxMCkgOiBNYXRoLm1pbigxMDAsIGJhc2VMICsgMTApO1xyXG4gICAgY29uc3QgdWkzTCA9IGlzTGlnaHRCYXNlID8gTWF0aC5tYXgoMCwgYmFzZUwgLSA1KSA6IE1hdGgubWluKDEwMCwgYmFzZUwgKyA1KTtcclxuXHJcbiAgICBjb25zdCB1aTEgPSBgaHNsKCR7YmFzZUh9LCAke2Jhc2VTfSUsICR7dWkxTH0lKWA7XHJcbiAgICBjb25zdCB1aTIgPSBgaHNsKCR7YmFzZUh9LCAke2Jhc2VTfSUsICR7dWkyTH0lKWA7XHJcbiAgICBjb25zdCB1aTMgPSBgaHNsKCR7YmFzZUh9LCAke2Jhc2VTfSUsICR7dWkzTH0lKWA7XHJcblxyXG4gICAgLy8gVGV4dCBjb2xvcnMgLSBlbnN1cmUgcHJvcGVyIGNvbnRyYXN0XHJcbiAgICBjb25zdCB0eDFMID0gaXNMaWdodEJhc2UgPyAxNSA6IDg1OyAgLy8gVmVyeSBkYXJrIHRleHQgZm9yIGxpZ2h0IGJnLCB2ZXJ5IGxpZ2h0IHRleHQgZm9yIGRhcmsgYmdcclxuICAgIGNvbnN0IHR4MkwgPSBpc0xpZ2h0QmFzZSA/IDI1IDogNzU7XHJcbiAgICBjb25zdCB0eDNMID0gaXNMaWdodEJhc2UgPyAzNSA6IDY1O1xyXG4gICAgY29uc3QgdHg0TCA9IGlzTGlnaHRCYXNlID8gMzAgOiA3MDtcclxuXHJcbiAgICBjb25zdCB0eDEgPSBgaHNsKCR7YmFzZUh9LCAke01hdGgubWF4KDAsIGJhc2VTIC0gMTApfSUsICR7dHgxTH0lKWA7XHJcbiAgICBjb25zdCB0eDIgPSBgaHNsKCR7YmFzZUh9LCAke01hdGgubWF4KDAsIGJhc2VTIC0gMjApfSUsICR7dHgyTH0lKWA7XHJcbiAgICBjb25zdCB0eDMgPSBgaHNsKCR7YmFzZUh9LCAke01hdGgubWF4KDAsIGJhc2VTIC0gMTApfSUsICR7dHgzTH0lKWA7XHJcbiAgICBjb25zdCB0eDQgPSBgaHNsKCR7YmFzZUh9LCAke01hdGgubWF4KDAsIGJhc2VTIC0gMTApfSUsICR7dHg0TH0lKWA7XHJcblxyXG4gICAgLy8gQWNjZW50IGNvbG9ycyAtIE5vdCBjYWxjdWxhdGVkIGhlcmUgYW55bW9yZVxyXG4gICAgLy8gTGV0IHRoZSBPeHlnZW4gdGhlbWUgY2FsY3VsYXRlIGF4MS9heDIvYXgzIGZyb20gLS1hY2NlbnQtaC9zL2xcclxuICAgIC8vIFRoaXMgYWxsb3dzIE9ic2lkaWFuJ3MgbmF0aXZlIGFjY2VudCBwaWNrZXIgdG8gb3ZlcnJpZGUgcHJvcGVybHlcclxuXHJcbiAgICAvLyBIaWdobGlnaHQgY29sb3JzXHJcbiAgICBjb25zdCBobDEgPSBgaHNsYSgke2FjY2VudEh9LCA1MCUsIDQwJSwgMzAlKWA7XHJcbiAgICBjb25zdCBobDIgPSBgcmdiYSgyNTUsIDE3NywgODAsIDAuMylgO1xyXG5cclxuICAgIC8vIFNwZWNpYWwgY29sb3JzXHJcbiAgICBjb25zdCBzcDEgPSBpc0xpZ2h0TW9kZSA/ICd3aGl0ZScgOiAnYmxhY2snO1xyXG5cclxuICAgIC8vIENhbGN1bGF0ZSBwcm9wZXIgY29udHJhc3QgZm9yIGFjY2VudCBjb2xvciB1c2luZyByZWxhdGl2ZSBsdW1pbmFuY2VcclxuICAgIC8vIENvbnZlcnQgSFNMIHRvIFJHQiBmb3IgbHVtaW5hbmNlIGNhbGN1bGF0aW9uXHJcbiAgICBjb25zdCBoc2xUb1JnYiA9IChoOiBudW1iZXIsIHM6IG51bWJlciwgbDogbnVtYmVyKTogW251bWJlciwgbnVtYmVyLCBudW1iZXJdID0+IHtcclxuICAgICAgaCA9IGggLyAzNjA7XHJcbiAgICAgIHMgPSBzIC8gMTAwO1xyXG4gICAgICBsID0gbCAvIDEwMDtcclxuXHJcbiAgICAgIGNvbnN0IGh1ZTJyZ2IgPSAocDogbnVtYmVyLCBxOiBudW1iZXIsIHQ6IG51bWJlcikgPT4ge1xyXG4gICAgICAgIGlmICh0IDwgMCkgdCArPSAxO1xyXG4gICAgICAgIGlmICh0ID4gMSkgdCAtPSAxO1xyXG4gICAgICAgIGlmICh0IDwgMSAvIDYpIHJldHVybiBwICsgKHEgLSBwKSAqIDYgKiB0O1xyXG4gICAgICAgIGlmICh0IDwgMSAvIDIpIHJldHVybiBxO1xyXG4gICAgICAgIGlmICh0IDwgMiAvIDMpIHJldHVybiBwICsgKHEgLSBwKSAqICgyIC8gMyAtIHQpICogNjtcclxuICAgICAgICByZXR1cm4gcDtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGlmIChzID09PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIFtsLCBsLCBsXTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgcSA9IGwgPCAwLjUgPyBsICogKDEgKyBzKSA6IGwgKyBzIC0gbCAqIHM7XHJcbiAgICAgIGNvbnN0IHAgPSAyICogbCAtIHE7XHJcbiAgICAgIGNvbnN0IHIgPSBodWUycmdiKHAsIHEsIGggKyAxIC8gMyk7XHJcbiAgICAgIGNvbnN0IGcgPSBodWUycmdiKHAsIHEsIGgpO1xyXG4gICAgICBjb25zdCBiID0gaHVlMnJnYihwLCBxLCBoIC0gMSAvIDMpO1xyXG5cclxuICAgICAgcmV0dXJuIFtyLCBnLCBiXTtcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgW3IsIGcsIGJdID0gaHNsVG9SZ2IoYWNjZW50SCwgYWNjZW50UywgYWNjZW50TCk7XHJcblxyXG4gICAgLy8gQ2FsY3VsYXRlIHJlbGF0aXZlIGx1bWluYW5jZSAoV0NBRyBmb3JtdWxhKVxyXG4gICAgY29uc3QgbHVtaW5hbmNlID0gMC4yMTI2ICogKHIgPD0gMC4wMzkyOCA/IHIgLyAxMi45MiA6IE1hdGgucG93KChyICsgMC4wNTUpIC8gMS4wNTUsIDIuNCkpXHJcbiAgICAgICsgMC43MTUyICogKGcgPD0gMC4wMzkyOCA/IGcgLyAxMi45MiA6IE1hdGgucG93KChnICsgMC4wNTUpIC8gMS4wNTUsIDIuNCkpXHJcbiAgICAgICsgMC4wNzIyICogKGIgPD0gMC4wMzkyOCA/IGIgLyAxMi45MiA6IE1hdGgucG93KChiICsgMC4wNTUpIC8gMS4wNTUsIDIuNCkpO1xyXG5cclxuICAgIC8vIFVzZSB3aGl0ZSB0ZXh0IGlmIGx1bWluYW5jZSBpcyBsb3cgKGRhcmsgY29sb3IpLCBibGFjayB0ZXh0IGlmIGhpZ2ggKGxpZ2h0IGNvbG9yKVxyXG4gICAgLy8gVGhyZXNob2xkIG9mIDAuNSB3b3JrcyB3ZWxsIGZvciBtb3N0IGNhc2VzIChXQ0FHIHVzZXMgMC4xNzkgZm9yIEFBIGNvbnRyYXN0KVxyXG4gICAgY29uc3QgdGV4dE9uQWNjZW50ID0gbHVtaW5hbmNlID4gMC41ID8gJ2JsYWNrJyA6ICd3aGl0ZSc7XHJcblxyXG4gICAgLy8gPT09IEJBU0UgSFNMIFZBTFVFUyAoUmVxdWlyZWQgZm9yIGNvbG9yZnVsLWZyYW1lIGFuZCBjb2xvcmZ1bC1oZWFkaW5ncykgPT09XHJcbiAgICBjc3MgKz0gYCAgLS1iYXNlLWg6ICR7YmFzZUh9O1xcbmA7XHJcbiAgICBjc3MgKz0gYCAgLS1iYXNlLXM6ICR7YmFzZVN9JTtcXG5gO1xyXG4gICAgY3NzICs9IGAgIC0tYmFzZS1sOiAke2Jhc2VMfSU7XFxuYDtcclxuICAgIGNzcyArPSBgXFxuYDtcclxuXHJcbiAgICAvLyA9PT0gT1hZR0VOIENVU1RPTSBWQVJJQUJMRVMgKENvcmUgdGhlbWUgY29sb3JzKSA9PT1cclxuICAgIC8vIEJhY2tncm91bmRzXHJcbiAgICBjc3MgKz0gYCAgLS1iZzE6ICR7YmcxfTtcXG5gO1xyXG4gICAgY3NzICs9IGAgIC0tYmcyOiAke2JnMn07XFxuYDtcclxuICAgIGNzcyArPSBgICAtLWJnLXRhYjogJHtiZzJ9O1xcbmA7XHJcbiAgICBjc3MgKz0gYCAgLS1iZzM6ICR7YmczfTtcXG5gO1xyXG4gICAgY3NzICs9IGBcXG5gO1xyXG5cclxuICAgIC8vIFVJIEVsZW1lbnRzXHJcbiAgICBjc3MgKz0gYCAgLS11aTE6ICR7dWkxfTtcXG5gO1xyXG4gICAgY3NzICs9IGAgIC0tdWkyOiAke3VpMn07XFxuYDtcclxuICAgIGNzcyArPSBgICAtLXVpMzogJHt1aTN9O1xcbmA7XHJcbiAgICBjc3MgKz0gYFxcbmA7XHJcblxyXG4gICAgLy8gVGV4dCBDb2xvcnNcclxuICAgIGNzcyArPSBgICAtLXR4MTogJHt0eDF9O1xcbmA7XHJcbiAgICBjc3MgKz0gYCAgLS10eDI6ICR7dHgyfTtcXG5gO1xyXG4gICAgY3NzICs9IGAgIC0tdHgzOiAke3R4M307XFxuYDtcclxuICAgIGNzcyArPSBgICAtLXR4NDogJHt0eDR9O1xcbmA7XHJcbiAgICBjc3MgKz0gYFxcbmA7XHJcblxyXG4gICAgLy8gQWNjZW50IENvbG9ycyAtIERvbid0IHNldCBheDEvYXgyL2F4MyBleHBsaWNpdGx5XHJcbiAgICAvLyBMZXQgdGhlIE94eWdlbiB0aGVtZSBDU1MgY2FsY3VsYXRlIHRoZXNlIGZyb20gLS1hY2NlbnQtaC9zL2xcclxuICAgIC8vIFRoaXMgYWxsb3dzIE9ic2lkaWFuJ3MgbmF0aXZlIGFjY2VudCBjb2xvciBwaWNrZXIgdG8gd29yayBwcm9wZXJseVxyXG4gICAgLy8gY3NzICs9IGAgIC0tYXgxOiAke2F4MX07XFxuYDtcclxuICAgIC8vIGNzcyArPSBgICAtLWF4MjogJHtheDJ9O1xcbmA7XHJcbiAgICAvLyBjc3MgKz0gYCAgLS1heDM6ICR7YXgzfTtcXG5gO1xyXG4gICAgLy8gY3NzICs9IGBcXG5gO1xyXG5cclxuICAgIC8vIEhpZ2hsaWdodHNcclxuICAgIGNzcyArPSBgICAtLWhsMTogJHtobDF9O1xcbmA7XHJcbiAgICBjc3MgKz0gYCAgLS1obDI6ICR7aGwyfTtcXG5gO1xyXG4gICAgY3NzICs9IGBcXG5gO1xyXG5cclxuICAgIC8vIFNwZWNpYWxcclxuICAgIGNzcyArPSBgICAtLXNwMTogJHtzcDF9O1xcbmA7XHJcbiAgICBjc3MgKz0gYFxcbmA7XHJcblxyXG4gICAgLy8gPT09IEVYVEVOREVEIENPTE9SIFBBTEVUVEUgPT09XHJcbiAgICAvLyBHZW5lcmF0ZSBleHRlbmRlZCBwYWxldHRlIGJhc2VkIG9uIGFjY2VudCBjb2xvciBmb3IgY29sb3JmdWwgaGVhZGluZ3MvZnJhbWVzXHJcbiAgICAvLyBVc2VzIGZpeGVkIGh1ZXMgd2l0aCB0aGUgcHJlc2V0J3Mgc2F0dXJhdGlvbiBhbmQgYWRqdXN0ZWQgbGlnaHRuZXNzXHJcbiAgICBjb25zdCBleHRlbmRlZFMgPSBhY2NlbnRTO1xyXG4gICAgY29uc3QgZXh0ZW5kZWRMID0gaXNMaWdodEJhc2UgPyA1NSA6IDY1OyAvLyBTbGlnaHRseSBkaWZmZXJlbnQgZm9yIGxpZ2h0IHZzIGRhcmtcclxuXHJcbiAgICBjc3MgKz0gYCAgLS1jb2xvci1yZWQ6IGhzbCgwLCB2YXIoLS1hY2NlbnQtcyksICR7ZXh0ZW5kZWRMfSUpO1xcbmA7XHJcbiAgICBjc3MgKz0gYCAgLS1jb2xvci1vcmFuZ2U6IGhzbCgyNSwgdmFyKC0tYWNjZW50LXMpLCAke2V4dGVuZGVkTH0lKTtcXG5gO1xyXG4gICAgY3NzICs9IGAgIC0tY29sb3IteWVsbG93OiBoc2woNTAsIHZhcigtLWFjY2VudC1zKSwgJHtleHRlbmRlZEx9JSk7XFxuYDtcclxuICAgIGNzcyArPSBgICAtLWNvbG9yLWdyZWVuOiBoc2woMTMwLCB2YXIoLS1hY2NlbnQtcyksICR7ZXh0ZW5kZWRMfSUpO1xcbmA7XHJcbiAgICBjc3MgKz0gYCAgLS1jb2xvci1jeWFuOiBoc2woMTgwLCB2YXIoLS1hY2NlbnQtcyksICR7ZXh0ZW5kZWRMfSUpO1xcbmA7XHJcbiAgICBjc3MgKz0gYCAgLS1jb2xvci1ibHVlOiBoc2woMjIwLCB2YXIoLS1hY2NlbnQtcyksICR7ZXh0ZW5kZWRMfSUpO1xcbmA7XHJcbiAgICBjc3MgKz0gYCAgLS1jb2xvci1wdXJwbGU6IGhzbCgyODAsIHZhcigtLWFjY2VudC1zKSwgJHtleHRlbmRlZEx9JSk7XFxuYDtcclxuICAgIGNzcyArPSBgICAtLWNvbG9yLXBpbms6IGhzbCgzMzAsIHZhcigtLWFjY2VudC1zKSwgJHtleHRlbmRlZEx9JSk7XFxuYDtcclxuICAgIGNzcyArPSBgXFxuYDtcclxuXHJcbiAgICAvLyA9PT0gQ09MT1JGVUwgRlJBTUUgT1ZFUlJJREUgPT09XHJcbiAgICAvLyBPcHRpb25hbCBvdmVycmlkZSBmb3IgY29sb3JmdWwtZnJhbWUgbGlnaHRuZXNzXHJcbiAgICAvLyBEZWZhdWx0IE94eWdlbiBiZWhhdmlvcjogZGFyayBtb2RlIC0yNSUsIGxpZ2h0IG1vZGUgKzMwJVxyXG4gICAgaWYgKHBhbGV0dGUuZnJhbWVMaWdodG5lc3NPZmZzZXQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICBjb25zdCBvZmZzZXQgPSBwYWxldHRlLmZyYW1lTGlnaHRuZXNzT2Zmc2V0ID49IDAgPyBgKyAke3BhbGV0dGUuZnJhbWVMaWdodG5lc3NPZmZzZXR9YCA6IGAtICR7TWF0aC5hYnMocGFsZXR0ZS5mcmFtZUxpZ2h0bmVzc09mZnNldCl9YDtcclxuICAgICAgY3NzICs9IGAgIC0tZnJhbWUtYmFja2dyb3VuZC1sOiBjYWxjKHZhcigtLWFjY2VudC1sKSAke29mZnNldH0lKTtcXG5gO1xyXG4gICAgICBjc3MgKz0gYFxcbmA7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gT3B0aW9uYWwgY29sb3Igb3ZlcnJpZGVzIChpZiB1c2VyIHByb3ZpZGVkIHNwZWNpZmljIGNvbG9ycylcclxuICAgIGlmIChwYWxldHRlLmNvbG9ycykge1xyXG4gICAgICBjb25zdCBvdmVycmlkZXMgPSBbXHJcbiAgICAgICAgJ2JnMScsICdiZzInLCAnYmczJyxcclxuICAgICAgICAndWkxJywgJ3VpMicsICd1aTMnLFxyXG4gICAgICAgICd0eDEnLCAndHgyJywgJ3R4MycsICd0eDQnLFxyXG4gICAgICAgICdobDEnLCAnaGwyJyxcclxuICAgICAgICAncmVkJywgJ29yYW5nZScsICd5ZWxsb3cnLCAnZ3JlZW4nLCAnY3lhbicsICdibHVlJywgJ3B1cnBsZScsICdwaW5rJ1xyXG4gICAgICBdO1xyXG5cclxuICAgICAgb3ZlcnJpZGVzLmZvckVhY2goY29sb3JLZXkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNvbG9yID0gcGFsZXR0ZS5jb2xvcnM/Lltjb2xvcktleSBhcyBrZXlvZiB0eXBlb2YgcGFsZXR0ZS5jb2xvcnNdO1xyXG4gICAgICAgIGlmIChjb2xvcikge1xyXG4gICAgICAgICAgLy8gTWFwIGN1c3RvbSBvdmVycmlkZXMgdG8gYXBwcm9wcmlhdGUgT2JzaWRpYW4gdmFyaWFibGVzXHJcbiAgICAgICAgICBzd2l0Y2ggKGNvbG9yS2V5KSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ2JnMSc6XHJcbiAgICAgICAgICAgIGNhc2UgJ2JnMic6XHJcbiAgICAgICAgICAgIGNhc2UgJ2JnMyc6XHJcbiAgICAgICAgICAgIGNhc2UgJ3VpMSc6XHJcbiAgICAgICAgICAgIGNhc2UgJ3VpMic6XHJcbiAgICAgICAgICAgIGNhc2UgJ3VpMyc6XHJcbiAgICAgICAgICAgIGNhc2UgJ3R4MSc6XHJcbiAgICAgICAgICAgIGNhc2UgJ3R4Mic6XHJcbiAgICAgICAgICAgIGNhc2UgJ3R4Myc6XHJcbiAgICAgICAgICAgIGNhc2UgJ3R4NCc6XHJcbiAgICAgICAgICAgIGNhc2UgJ2hsMSc6XHJcbiAgICAgICAgICAgIGNhc2UgJ2hsMic6XHJcbiAgICAgICAgICAgICAgLy8gT3ZlcnJpZGUgT3h5Z2VuIGN1c3RvbSB2YXJpYWJsZXMgZGlyZWN0bHkgKG5vICFpbXBvcnRhbnQpXHJcbiAgICAgICAgICAgICAgY3NzICs9IGAgIC0tJHtjb2xvcktleX06ICR7Y29sb3J9O1xcbmA7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIC8vIEZvciBhY2NlbnQgY29sb3JzLCB3ZSBuZWVkIHRvIGRldGVybWluZSB3aGljaCBheCB2YXJpYWJsZSB0aGlzIHNob3VsZCBtYXAgdG9cclxuICAgICAgICAgICAgLy8gVGhpcyBpcyBhIHNpbXBsaWZpZWQgbWFwcGluZyAtIGluIHByYWN0aWNlLCB5b3UgbWlnaHQgd2FudCBtb3JlIHNvcGhpc3RpY2F0ZWQgbG9naWNcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAvLyBGb3Igc3ludGF4IGNvbG9ycyBhbmQgb3RoZXIgY3VzdG9tIGNvbG9ycywgd2UgY2FuIGFkZCB0aGVtIGFzIGN1c3RvbSBwcm9wZXJ0aWVzXHJcbiAgICAgICAgICAgICAgY3NzICs9IGAgIC0tY29sb3ItJHtjb2xvcktleX06ICR7Y29sb3J9O1xcbmA7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjc3MgKz0gJ31cXG4nO1xyXG5cclxuICAgIHJldHVybiBjc3M7XHJcbiAgfVxyXG59XHJcblxyXG4iLCAiLyoqXHJcbiAqIEN1c3RvbSBQcmVzZXQgQ1NTIE1hbmFnZW1lbnRcclxuICogSGFuZGxlcyBnZW5lcmF0aW9uIGFuZCBpbmplY3Rpb24gb2YgQ1NTIGZvciBjdXN0b20gY29sb3IgcHJlc2V0c1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IFBsdWdpbkNvbnRleHQgfSBmcm9tICcuLi90eXBlcyc7XHJcbmltcG9ydCB7IFByZXNldENTU0dlbmVyYXRvciB9IGZyb20gJy4uL3ByZXNldHMvcHJlc2V0LWNzcy1nZW5lcmF0b3InO1xyXG5pbXBvcnQgeyBzZXRDc3NQcm9wcyB9IGZyb20gJy4uL3V0aWxzL2Nzcy1wcm9wcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgQ3VzdG9tUHJlc2V0Q1NTIHtcclxuICBwcml2YXRlIHBsdWdpbjogUGx1Z2luQ29udGV4dDtcclxuICBwcml2YXRlIGlzVXBkYXRpbmc6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgY29uc3RydWN0b3IocGx1Z2luOiBQbHVnaW5Db250ZXh0KSB7XHJcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEluaXRpYWxpemUgY3VzdG9tIHByZXNldCBDU1NcclxuICAgKiBVc2VzIENTUyBjdXN0b20gcHJvcGVydGllcyBvbiBib2R5IGVsZW1lbnQgaW5zdGVhZCBvZiBjcmVhdGluZyBzdHlsZSBlbGVtZW50c1xyXG4gICAqL1xyXG4gIGluaXRpYWxpemUoKTogdm9pZCB7XHJcbiAgICAvLyBPbmx5IGluaXRpYWxpemUgaWYgT3h5Z2VuIHRoZW1lIGlzIGFjdGl2ZVxyXG4gICAgaWYgKCF0aGlzLnBsdWdpbi5pc094eWdlblRoZW1lQWN0aXZlKCkpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy51cGRhdGVDU1MoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFVwZGF0ZSBjdXN0b20gcHJlc2V0IENTUyBiYXNlZCBvbiBjdXJyZW50IHNldHRpbmdzXHJcbiAgICogVXNlcyBDU1MgY3VzdG9tIHByb3BlcnRpZXMgb24gYm9keSBlbGVtZW50IGluc3RlYWQgb2YgY3JlYXRpbmcgc3R5bGUgZWxlbWVudHNcclxuICAgKiBUaGlzIGNvbXBsaWVzIHdpdGggT2JzaWRpYW4gZ3VpZGVsaW5lcyB0byBhdm9pZCBjcmVhdGluZyBzdHlsZSBlbGVtZW50c1xyXG4gICAqL1xyXG4gIHVwZGF0ZUNTUygpOiB2b2lkIHtcclxuICAgIC8vIFByZXZlbnQgcmUtZW50cmFudCB1cGRhdGVzIChmaXhlcyBpbmZpbml0ZSBsb29wKVxyXG4gICAgaWYgKHRoaXMuaXNVcGRhdGluZykge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8gT25seSB1cGRhdGUgQ1NTIGlmIE94eWdlbiB0aGVtZSBpcyBhY3RpdmVcclxuICAgIGlmICghdGhpcy5wbHVnaW4uaXNPeHlnZW5UaGVtZUFjdGl2ZSgpKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBTZXQgZmxhZyB0byBwcmV2ZW50IHJlLWVudHJhbnQgY2FsbHNcclxuICAgIHRoaXMuaXNVcGRhdGluZyA9IHRydWU7XHJcblxyXG4gICAgLy8gUmVtb3ZlIGFsbCBjdXN0b20gcHJlc2V0IGNsYXNzZXMgZnJvbSBib2R5XHJcbiAgICBjb25zdCBhbGxQcmVzZXRDbGFzc2VzID0gQXJyYXkuZnJvbShkb2N1bWVudC5ib2R5LmNsYXNzTGlzdCkuZmlsdGVyKGNscyA9PlxyXG4gICAgICBjbHMuc3RhcnRzV2l0aCgnb3h5Z2VuLWN1c3RvbS0nKVxyXG4gICAgKTtcclxuICAgIGFsbFByZXNldENsYXNzZXMuZm9yRWFjaChjbHMgPT4gZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKGNscykpO1xyXG5cclxuICAgIC8vIFJlbW92ZSBhbGwgY3VzdG9tIHByZXNldCBDU1MgcHJvcGVydGllc1xyXG4gICAgLy8gTGlzdCBvZiBhbGwgcG9zc2libGUgY3VzdG9tIHByZXNldCBDU1MgcHJvcGVydGllc1xyXG4gICAgY29uc3QgcHJlc2V0UHJvcGVydGllcyA9IFtcclxuICAgICAgJy0tYmFzZS1oJywgJy0tYmFzZS1zJywgJy0tYmFzZS1sJyxcclxuICAgICAgJy0tYmcxJywgJy0tYmcyJywgJy0tYmctdGFiJywgJy0tYmczJyxcclxuICAgICAgJy0tdWkxJywgJy0tdWkyJywgJy0tdWkzJyxcclxuICAgICAgJy0tdHgxJywgJy0tdHgyJywgJy0tdHgzJywgJy0tdHg0JyxcclxuICAgICAgJy0taGwxJywgJy0taGwyJyxcclxuICAgICAgJy0tc3AxJyxcclxuICAgICAgJy0tY29sb3ItcmVkJywgJy0tY29sb3Itb3JhbmdlJywgJy0tY29sb3IteWVsbG93JywgJy0tY29sb3ItZ3JlZW4nLFxyXG4gICAgICAnLS1jb2xvci1jeWFuJywgJy0tY29sb3ItYmx1ZScsICctLWNvbG9yLXB1cnBsZScsICctLWNvbG9yLXBpbmsnLFxyXG4gICAgICAnLS1mcmFtZS1iYWNrZ3JvdW5kLWwnXHJcbiAgICBdO1xyXG5cclxuICAgIHByZXNldFByb3BlcnRpZXMuZm9yRWFjaChwcm9wID0+IHtcclxuICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5yZW1vdmVQcm9wZXJ0eShwcm9wKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIEZpbmQgYWN0aXZlIHByZXNldHNcclxuICAgIGNvbnN0IGFjdGl2ZUxpZ2h0UHJlc2V0ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tUHJlc2V0cy5maW5kKHAgPT5cclxuICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubGlnaHRTY2hlbWUgPT09IGBveHlnZW4tY3VzdG9tLSR7cC5pZH1gXHJcbiAgICApO1xyXG4gICAgY29uc3QgYWN0aXZlRGFya1ByZXNldCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbVByZXNldHMuZmluZChwID0+XHJcbiAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmRhcmtTY2hlbWUgPT09IGBveHlnZW4tY3VzdG9tLSR7cC5pZH1gXHJcbiAgICApO1xyXG5cclxuICAgIC8vIERldGVybWluZSBjdXJyZW50IHRoZW1lIG1vZGVcclxuICAgIGNvbnN0IGlzTGlnaHRNb2RlID0gZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ3RoZW1lLWxpZ2h0Jyk7XHJcbiAgICBjb25zdCBhY3RpdmVQcmVzZXQgPSBpc0xpZ2h0TW9kZSA/IGFjdGl2ZUxpZ2h0UHJlc2V0IDogYWN0aXZlRGFya1ByZXNldDtcclxuXHJcbiAgICAvLyBBcHBseSBwcm9wZXJ0aWVzIGZvciB0aGUgYWN0aXZlIHByZXNldFxyXG4gICAgaWYgKGFjdGl2ZVByZXNldCkge1xyXG4gICAgICBjb25zdCBwcmVzZXRDbGFzcyA9IGBveHlnZW4tY3VzdG9tLSR7YWN0aXZlUHJlc2V0LmlkfWA7XHJcbiAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZChwcmVzZXRDbGFzcyk7XHJcblxyXG4gICAgICBjb25zdCBtb2RlID0gaXNMaWdodE1vZGUgPyAnbGlnaHQnIDogJ2RhcmsnO1xyXG4gICAgICBjb25zdCBwcm9wZXJ0aWVzID0gUHJlc2V0Q1NTR2VuZXJhdG9yLmdlbmVyYXRlUHJvcGVydGllcyhhY3RpdmVQcmVzZXQsIG1vZGUpO1xyXG4gICAgICBzZXRDc3NQcm9wcyhkb2N1bWVudC5ib2R5LCBwcm9wZXJ0aWVzKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDbGVhciB0aGUgdXBkYXRpbmcgZmxhZyBhZnRlciBhIHNob3J0IGRlbGF5IHRvIGFsbG93IENTUyB0byBzZXR0bGVcclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICB0aGlzLmlzVXBkYXRpbmcgPSBmYWxzZTtcclxuICAgIH0sIDUwKTtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBDbGVhbnVwIC0gcmVtb3ZlIGFsbCBjdXN0b20gcHJlc2V0IGNsYXNzZXMgYW5kIENTUyBwcm9wZXJ0aWVzXHJcbiAgICovXHJcbiAgY2xlYW51cCgpOiB2b2lkIHtcclxuICAgIC8vIFJlbW92ZSBhbGwgY3VzdG9tIHByZXNldCBjbGFzc2VzXHJcbiAgICBjb25zdCBhbGxQcmVzZXRDbGFzc2VzID0gQXJyYXkuZnJvbShkb2N1bWVudC5ib2R5LmNsYXNzTGlzdCkuZmlsdGVyKGNscyA9PlxyXG4gICAgICBjbHMuc3RhcnRzV2l0aCgnb3h5Z2VuLWN1c3RvbS0nKVxyXG4gICAgKTtcclxuICAgIGFsbFByZXNldENsYXNzZXMuZm9yRWFjaChjbHMgPT4gZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKGNscykpO1xyXG5cclxuICAgIC8vIFJlbW92ZSBhbGwgY3VzdG9tIHByZXNldCBDU1MgcHJvcGVydGllc1xyXG4gICAgY29uc3QgcHJlc2V0UHJvcGVydGllcyA9IFtcclxuICAgICAgJy0tYmFzZS1oJywgJy0tYmFzZS1zJywgJy0tYmFzZS1sJyxcclxuICAgICAgJy0tYmcxJywgJy0tYmcyJywgJy0tYmctdGFiJywgJy0tYmczJyxcclxuICAgICAgJy0tdWkxJywgJy0tdWkyJywgJy0tdWkzJyxcclxuICAgICAgJy0tdHgxJywgJy0tdHgyJywgJy0tdHgzJywgJy0tdHg0JyxcclxuICAgICAgJy0taGwxJywgJy0taGwyJyxcclxuICAgICAgJy0tc3AxJyxcclxuICAgICAgJy0tY29sb3ItcmVkJywgJy0tY29sb3Itb3JhbmdlJywgJy0tY29sb3IteWVsbG93JywgJy0tY29sb3ItZ3JlZW4nLFxyXG4gICAgICAnLS1jb2xvci1jeWFuJywgJy0tY29sb3ItYmx1ZScsICctLWNvbG9yLXB1cnBsZScsICctLWNvbG9yLXBpbmsnLFxyXG4gICAgICAnLS1mcmFtZS1iYWNrZ3JvdW5kLWwnXHJcbiAgICBdO1xyXG5cclxuICAgIHByZXNldFByb3BlcnRpZXMuZm9yRWFjaChwcm9wID0+IHtcclxuICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5yZW1vdmVQcm9wZXJ0eShwcm9wKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuIiwgIi8qKlxyXG4gKiBTdHlsZSBNYW5hZ2VyXHJcbiAqIEhhbmRsZXMgYWxsIENTUyBhcHBsaWNhdGlvbiwgc2NoZW1lIHN3aXRjaGluZywgYW5kIHN0eWxlIHVwZGF0ZXNcclxuICovXHJcblxyXG5pbXBvcnQgeyBQbHVnaW5Db250ZXh0IH0gZnJvbSAnLi4vdHlwZXMnO1xyXG5pbXBvcnQgeyBDdXN0b21QcmVzZXRDU1MgfSBmcm9tICcuL2N1c3RvbS1wcmVzZXQtY3NzJztcclxuaW1wb3J0IHsgXHJcbiAgQ1NTX0NMQVNTRVMsIFxyXG4gIExJR0hUX1NDSEVNRVMsIFxyXG4gIERBUktfU0NIRU1FU1xyXG59IGZyb20gJy4uL2NvbnN0YW50cyc7XHJcbmltcG9ydCB7IHNldFRoZW1lLCBnZXRWYXVsdENvbmZpZywgc2V0VmF1bHRDb25maWcgfSBmcm9tICcuLi90eXBlcy9vYnNpZGlhbi1leHRlbnNpb25zJztcclxuaW1wb3J0IHsgc2V0Q3NzUHJvcHMgfSBmcm9tICcuLi91dGlscy9jc3MtcHJvcHMnO1xyXG5pbXBvcnQgeyBQbGF0Zm9ybSB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmV4cG9ydCBjbGFzcyBTdHlsZU1hbmFnZXJJbXBsIHtcclxuICBwcml2YXRlIHBsdWdpbjogUGx1Z2luQ29udGV4dDtcclxuICBwcml2YXRlIGNzc09ic2VydmVyOiBNdXRhdGlvbk9ic2VydmVyIHwgbnVsbCA9IG51bGw7XHJcbiAgcHJpdmF0ZSBjdXN0b21QcmVzZXRDU1M6IEN1c3RvbVByZXNldENTUztcclxuXHJcbiAgY29uc3RydWN0b3IocGx1Z2luOiBQbHVnaW5Db250ZXh0KSB7XHJcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuICAgIHRoaXMuY3VzdG9tUHJlc2V0Q1NTID0gbmV3IEN1c3RvbVByZXNldENTUyhwbHVnaW4pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRGV0ZWN0IE9TIGZvciBPUy1zcGVjaWZpYyBzdHlsaW5nXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBkZXRlY3RPUygpOiAnd2luZG93cycgfCAnbWFjb3MnIHwgJ25ldXRyYWwnIHtcclxuICAgIGlmIChQbGF0Zm9ybS5pc01hY09TKSB7XHJcbiAgICAgIHJldHVybiAnbWFjb3MnO1xyXG4gICAgfVxyXG4gICAgaWYgKFBsYXRmb3JtLmlzV2luKSB7XHJcbiAgICAgIHJldHVybiAnd2luZG93cyc7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gJ25ldXRyYWwnO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSW5pdGlhbGl6ZSBzdHlsZSBtYW5hZ2VtZW50XHJcbiAgICovXHJcbiAgaW5pdGlhbGl6ZSgpOiB2b2lkIHtcclxuICAgIHRoaXMubG9hZFJ1bGVzKCk7XHJcbiAgICAvLyBDU1Mgd2F0Y2hlciByZW1vdmVkIC0gaXQgd2FzIGNhdXNpbmcgaW5maW5pdGUgbG9vcHNcclxuICAgIC8vIEN1c3RvbSBwcmVzZXQgQ1NTIHVwZGF0ZXMgYXJlIGhhbmRsZWQgYnkgc2V0dGluZ3MgVUkgYW5kIHRoZW1lIHN3aXRjaGVzXHJcbiAgfVxyXG4gIFxyXG4gIC8qKlxyXG4gICAqIEluaXRpYWxpemUgY3VzdG9tIHByZXNldCBDU1MgKGNhbGxlZCBhZnRlciBtYWluIGxvYWQgY29tcGxldGVzKVxyXG4gICAqL1xyXG4gIGluaXRpYWxpemVDdXN0b21QcmVzZXRzKCk6IHZvaWQge1xyXG4gICAgdGhpcy5jdXN0b21QcmVzZXRDU1MuaW5pdGlhbGl6ZSgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2xlYW51cCBvbiBwbHVnaW4gdW5sb2FkXHJcbiAgICovXHJcbiAgY2xlYW51cCgpOiB2b2lkIHtcclxuICAgIHRoaXMudW5sb2FkUnVsZXMoKTtcclxuICAgIHRoaXMucmVtb3ZlU3R5bGUoKTtcclxuICAgIHRoaXMucmVtb3ZlU2V0dGluZ3MoKTtcclxuICAgIHRoaXMucmVtb3ZlTGlnaHRTY2hlbWUoKTtcclxuICAgIHRoaXMucmVtb3ZlRGFya1NjaGVtZSgpO1xyXG4gICAgXHJcbiAgICAvLyBDbGVhbnVwIGN1c3RvbSBwcmVzZXQgQ1NTXHJcbiAgICB0aGlzLmN1c3RvbVByZXNldENTUy5jbGVhbnVwKCk7XHJcbiAgICBcclxuICAgIC8vIENsZWFudXAgQ1NTIG9ic2VydmVyXHJcbiAgICBpZiAodGhpcy5jc3NPYnNlcnZlcikge1xyXG4gICAgICB0aGlzLmNzc09ic2VydmVyLmRpc2Nvbm5lY3QoKTtcclxuICAgICAgdGhpcy5jc3NPYnNlcnZlciA9IG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZWZyZXNoIGFsbCBzdHlsZXNcclxuICAgKi9cclxuICByZWZyZXNoKCk6IHZvaWQge1xyXG4gICAgLy8gT25seSByZWZyZXNoIHN0eWxlcyBpZiBPeHlnZW4gdGhlbWUgaXMgYWN0aXZlXHJcbiAgICBpZiAoIXRoaXMucGx1Z2luLmlzT3h5Z2VuVGhlbWVBY3RpdmUoKSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLnVwZGF0ZVN0eWxlKCk7XHJcbiAgfVxyXG4gIFxyXG4gIC8qKlxyXG4gICAqIFVwZGF0ZSBjdXN0b20gcHJlc2V0IENTUyAocHVibGljIGludGVyZmFjZSlcclxuICAgKi9cclxuICB1cGRhdGVDdXN0b21QcmVzZXRDU1MoKTogdm9pZCB7XHJcbiAgICB0aGlzLmN1c3RvbVByZXNldENTUy51cGRhdGVDU1MoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFVwZGF0ZSBhbGwgc3R5bGVzIGJhc2VkIG9uIGN1cnJlbnQgc2V0dGluZ3NcclxuICAgKi9cclxuICB1cGRhdGVTdHlsZSgpOiB2b2lkIHtcclxuICAgIC8vIE9ubHkgYXBwbHkgc3R5bGVzIGlmIE94eWdlbiB0aGVtZSBpcyBhY3RpdmVcclxuICAgIGlmICghdGhpcy5wbHVnaW4uaXNPeHlnZW5UaGVtZUFjdGl2ZSgpKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIFxyXG4gICAgdGhpcy5yZW1vdmVTdHlsZSgpO1xyXG4gICAgdGhpcy5yZW1vdmVTZXR0aW5ncygpO1xyXG5cclxuICAgIC8vIEFkZCBzdHlsZSBjbGFzc2VzIChvbmx5IGlmIG5vdCBlbXB0eSlcclxuICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5saWdodFN0eWxlICYmIHRoaXMucGx1Z2luLnNldHRpbmdzLmxpZ2h0U3R5bGUudHJpbSgpKSB7XHJcbiAgICAgIGRvY3VtZW50LmJvZHkuYWRkQ2xhc3ModGhpcy5wbHVnaW4uc2V0dGluZ3MubGlnaHRTdHlsZSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGFya1N0eWxlICYmIHRoaXMucGx1Z2luLnNldHRpbmdzLmRhcmtTdHlsZS50cmltKCkpIHtcclxuICAgICAgZG9jdW1lbnQuYm9keS5hZGRDbGFzcyh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kYXJrU3R5bGUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFVwZGF0ZSBzY2hlbWVzIGJhc2VkIG9uIGN1cnJlbnQgdGhlbWUgbW9kZVxyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCd0aGVtZS1saWdodCcpKSB7XHJcbiAgICAgICAgdGhpcy51cGRhdGVMaWdodFNjaGVtZSgpO1xyXG4gICAgICB9IGVsc2UgaWYgKGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCd0aGVtZS1kYXJrJykpIHtcclxuICAgICAgICB0aGlzLnVwZGF0ZURhcmtTY2hlbWUoKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBEZWZhdWx0IHRvIGxpZ2h0IHRoZW1lXHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hZGRDbGFzcygndGhlbWUtbGlnaHQnKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZUxpZ2h0U2NoZW1lKCk7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIHNjaGVtZXM6JywgZXJyb3IpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEFwcGx5IGZlYXR1cmUgdG9nZ2xlc1xyXG4gICAgLy8gV29ya3NwYWNlIGJvcmRlcnM6ICdlbmhhbmNlZCcgfCAnZGVmYXVsdCcgfCAnbm9uZSdcclxuICAgIC8vIC0gJ2VuaGFuY2VkJyAoZGVmYXVsdCk6IERvIG5vdGhpbmcgLSB0aGVtZSdzIGRlZmF1bHQgYmVoYXZpb3IgYXBwbGllcyAoYm9keTpub3QoLmJvcmRlcnMtb24pKVxyXG4gICAgLy8gLSAnZGVmYXVsdCc6IEFkZCBib3JkZXJzLW9uIHRvIHJlc3RvcmUgT2JzaWRpYW4ncyBvcmlnaW5hbCBib3JkZXJzXHJcbiAgICAvLyAtICdub25lJzogQWRkIGJvcmRlcnMtbm9uZSB0byByZW1vdmUgYWxsIGJvcmRlcnNcclxuICAgIGNvbnN0IGJvcmRlcnNWYWx1ZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLndvcmtzcGFjZUJvcmRlcnM7XHJcbiAgICBpZiAoYm9yZGVyc1ZhbHVlID09PSAnZW5oYW5jZWQnKSB7XHJcbiAgICAgIC8vIEVuaGFuY2VkIGlzIGRlZmF1bHQgLSByZW1vdmUgYW55IGJvcmRlciBjbGFzc2VzIHRvIGxldCB0aGVtZSBoYW5kbGUgaXRcclxuICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdib3JkZXJzLW5vbmUnLCAnYm9yZGVycy1vbicpO1xyXG4gICAgfSBlbHNlIGlmIChib3JkZXJzVmFsdWUgPT09ICdkZWZhdWx0Jykge1xyXG4gICAgICAvLyBEZWZhdWx0IC0gcmVzdG9yZSBPYnNpZGlhbidzIG9yaWdpbmFsIGJvcmRlcnNcclxuICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdib3JkZXJzLW5vbmUnKTtcclxuICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdib3JkZXJzLW9uJyk7XHJcbiAgICB9IGVsc2UgaWYgKGJvcmRlcnNWYWx1ZSA9PT0gJ25vbmUnKSB7XHJcbiAgICAgIC8vIE5vbmUgLSByZW1vdmUgYWxsIGJvcmRlcnNcclxuICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdib3JkZXJzLW9uJyk7XHJcbiAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnYm9yZGVycy1ub25lJyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnY29sb3JmdWwtaGVhZGluZ3MnLCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb2xvcmZ1bEhlYWRpbmdzKTtcclxuICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnY29sb3JmdWwtZnJhbWUnLCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb2xvcmZ1bEZyYW1lKTtcclxuICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnY29sb3JmdWwtYWN0aXZlJywgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY29sb3JmdWxBY3RpdmVTdGF0ZXMpO1xyXG4gICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QudG9nZ2xlKCdlbmFibGUtYmx1cicsIHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUJsdXIpO1xyXG4gICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QudG9nZ2xlKCdsaW5rcy1pbnQtb24nLCB0aGlzLnBsdWdpbi5zZXR0aW5ncy51bmRlcmxpbmVJbnRlcm5hbCk7XHJcbiAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC50b2dnbGUoJ2xpbmtzLWV4dC1vbicsIHRoaXMucGx1Z2luLnNldHRpbmdzLnVuZGVybGluZUV4dGVybmFsKTtcclxuICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnZnVsbC13aWR0aC1tZWRpYScsIHRoaXMucGx1Z2luLnNldHRpbmdzLmZ1bGxXaWR0aE1lZGlhKTtcclxuICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnaW1nLWdyaWQnLCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbWdHcmlkKTtcclxuICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnb3h5Z2VuLWRldi1ibG9jay13aWR0aCcsIHRoaXMucGx1Z2luLnNldHRpbmdzLmRldkJsb2NrV2lkdGgpO1xyXG4gICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QudG9nZ2xlKCdveHlnZW4tc3RhdHVzLW9mZicsICF0aGlzLnBsdWdpbi5zZXR0aW5ncy5taW5pbWFsU3RhdHVzKTtcclxuICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnZnVsbC1maWxlLW5hbWVzJywgIXRoaXMucGx1Z2luLnNldHRpbmdzLnRyaW1OYW1lcyk7XHJcbiAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC50b2dnbGUoJ2xhYmVsZWQtbmF2JywgdGhpcy5wbHVnaW4uc2V0dGluZ3MubGFiZWxlZE5hdik7XHJcbiAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC50b2dnbGUoJ294eWdlbi1mb2xkaW5nJywgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGluZyk7XHJcbiAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC50b2dnbGUoJ3VzZS1kZWZhdWx0LWZvbGRlci1pY29uJywgdGhpcy5wbHVnaW4uc2V0dGluZ3MudXNlRGVmYXVsdEZvbGRlckljb24pO1xyXG5cclxuICAgIC8vIEFkZCB3aWR0aCBjbGFzc2VzXHJcbiAgICBkb2N1bWVudC5ib2R5LmFkZENsYXNzKFxyXG4gICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGFydFdpZHRoLFxyXG4gICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWJsZVdpZHRoLFxyXG4gICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbWdXaWR0aCxcclxuICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaWZyYW1lV2lkdGgsXHJcbiAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm1hcFdpZHRoXHJcbiAgICApO1xyXG5cclxuICAgIC8vIFVwZGF0ZSBjdXN0b20gQ1NTIHZhcmlhYmxlcyBvbiBib2R5IGVsZW1lbnQgdXNpbmcgc2V0Q3NzUHJvcHMgdXRpbGl0eVxyXG4gICAgY29uc3QgY3NzUHJvcHM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XHJcbiAgICAgICctLWZvbnQtdWktc21hbGwnOiBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy50ZXh0U21hbGx9cHhgLFxyXG4gICAgICAnLS1saW5lLWhlaWdodCc6IFN0cmluZyh0aGlzLnBsdWdpbi5zZXR0aW5ncy5saW5lSGVpZ2h0KSxcclxuICAgICAgJy0tbGluZS13aWR0aCc6IGAke3RoaXMucGx1Z2luLnNldHRpbmdzLmxpbmVXaWR0aH1yZW1gLFxyXG4gICAgICAnLS1saW5lLXdpZHRoLXdpZGUnOiBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5saW5lV2lkdGhXaWRlfXJlbWAsXHJcbiAgICAgICctLW1heC13aWR0aCc6IGAke3RoaXMucGx1Z2luLnNldHRpbmdzLm1heFdpZHRofSVgLFxyXG4gICAgICAnLS1mb250LWVkaXRvci1vdmVycmlkZSc6IHRoaXMucGx1Z2luLnNldHRpbmdzLmVkaXRvckZvbnRcclxuICAgIH07XHJcbiAgICBcclxuICAgIC8vIE9ubHkgc2V0IGluZGVudGF0aW9uIGd1aWRlIHZhcmlhYmxlcyBpZiB0aGV5IGRpZmZlciBmcm9tIGRlZmF1bHRcclxuICAgIC8vIFdpZHRoOiBvbmx5IHNldCBpZiBub3QgZGVmYXVsdCAoMHB4IC0gdGhlbWUgbm93IGhpZGVzIGd1aWRlcyBieSBkZWZhdWx0KVxyXG4gICAgLy8gQ29sb3I6IG9ubHkgc2V0IGlmIG5vdCBcIlN1YnRsZVwiIChsZXQgdGhlbWUgdXNlIGl0cyBkZWZhdWx0IGNvbG9yKVxyXG4gICAgY29uc3QgaXNEZWZhdWx0V2lkdGggPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5uYXZJbmRlbnRhdGlvbkd1aWRlV2lkdGggPT09ICcwcHgnO1xyXG4gICAgY29uc3QgaXNEZWZhdWx0Q29sb3IgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5uYXZJbmRlbnRhdGlvbkd1aWRlQ29sb3IgPT09ICdyZ2JhKHZhcigtLW1vbm8tcmdiLTEwMCksIDAuMTIpJztcclxuICAgIFxyXG4gICAgaWYgKCFpc0RlZmF1bHRXaWR0aCkge1xyXG4gICAgICBjc3NQcm9wc1snLS1uYXYtaW5kZW50YXRpb24tZ3VpZGUtd2lkdGgnXSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLm5hdkluZGVudGF0aW9uR3VpZGVXaWR0aDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIFJlbW92ZSB3aWR0aCB2YXJpYWJsZSB0byBsZXQgdGhlbWUgdXNlIGRlZmF1bHRcclxuICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnLS1uYXYtaW5kZW50YXRpb24tZ3VpZGUtd2lkdGgnKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYgKCFpc0RlZmF1bHRDb2xvcikge1xyXG4gICAgICBjc3NQcm9wc1snLS1uYXYtaW5kZW50YXRpb24tZ3VpZGUtY29sb3InXSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLm5hdkluZGVudGF0aW9uR3VpZGVDb2xvcjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIFJlbW92ZSBjb2xvciB2YXJpYWJsZSB0byBsZXQgdGhlbWUgdXNlIGl0cyBkZWZhdWx0IGNvbG9yXHJcbiAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUucmVtb3ZlUHJvcGVydHkoJy0tbmF2LWluZGVudGF0aW9uLWd1aWRlLWNvbG9yJyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHNldENzc1Byb3BzKGRvY3VtZW50LmJvZHksIGNzc1Byb3BzKTtcclxuICAgIFxyXG4gICAgXHJcbiAgICAvLyBBcHBseSBhbmltYXRpb24gc2V0dGluZ3NcclxuICAgIC8vIFJlbW92ZSBhbGwgYW5pbWF0aW9uIGNsYXNzZXMgZmlyc3QgKGluY2x1ZGluZyBvbGQgJ2FuaW1hdGlvbnMtcmVmaW5lZCcgZm9yIG1pZ3JhdGlvbilcclxuICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnYW5pbWF0aW9ucy1yZWZpbmVkJywgJ2FuaW1hdGlvbnMtZGVmYXVsdCcsICdhbmltYXRpb25zLXBsYXlmdWwnLCAnYW5pbWF0aW9ucy1vZmYnKTtcclxuICAgIFxyXG4gICAgLy8gR2V0IGFuaW1hdGlvbiBwZXJzb25hbGl0eSAoZGVmYXVsdCB0byAnZGVmYXVsdCcgaWYgbm90IHNldCBmb3IgbWlncmF0aW9uKVxyXG4gICAgY29uc3QgYW5pbWF0aW9uUGVyc29uYWxpdHkgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hbmltYXRpb25QZXJzb25hbGl0eSB8fCAnZGVmYXVsdCc7XHJcbiAgICBcclxuICAgIC8vIEFwcGx5IHBlcnNvbmFsaXR5IGNsYXNzXHJcbiAgICBpZiAoYW5pbWF0aW9uUGVyc29uYWxpdHkgPT09ICdvZmYnKSB7XHJcbiAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnYW5pbWF0aW9ucy1vZmYnKTtcclxuICAgICAgLy8gU3BlZWQgaXMgYXV0b21hdGljYWxseSAwIHdoZW4gb2ZmLCBidXQgY2xlYXIgdGhlIHZhcmlhYmxlIHRvIGJlIGV4cGxpY2l0XHJcbiAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUucmVtb3ZlUHJvcGVydHkoJy0tYW5pbS1zcGVlZC1tb2RpZmllcicpO1xyXG4gICAgfSBlbHNlIGlmIChhbmltYXRpb25QZXJzb25hbGl0eSA9PT0gJ3BsYXlmdWwnKSB7XHJcbiAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnYW5pbWF0aW9ucy1wbGF5ZnVsJyk7XHJcbiAgICAgIC8vIEFwcGx5IHNwZWVkIChvbmx5IGlmIG5vdCBcIm9mZlwiKVxyXG4gICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnNldFByb3BlcnR5KCctLWFuaW0tc3BlZWQtbW9kaWZpZXInLCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hbmltYXRpb25TcGVlZC50b1N0cmluZygpKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIGRlZmF1bHQgKG1hcHMgdG8gYW5pbWF0aW9ucy1kZWZhdWx0IGNsYXNzKVxyXG4gICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ2FuaW1hdGlvbnMtZGVmYXVsdCcpO1xyXG4gICAgICAvLyBBcHBseSBzcGVlZCAob25seSBpZiBub3QgXCJvZmZcIilcclxuICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1hbmltLXNwZWVkLW1vZGlmaWVyJywgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYW5pbWF0aW9uU3BlZWQudG9TdHJpbmcoKSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHRoaXMuY3VzdG9tUHJlc2V0Q1NTLnVwZGF0ZUNTUygpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVXBkYXRlIGxpZ2h0IG1vZGUgc3R5bGVcclxuICAgKi9cclxuICB1cGRhdGVMaWdodFN0eWxlKCk6IHZvaWQge1xyXG4gICAgLy8gT25seSBhcHBseSBzdHlsZXMgaWYgT3h5Z2VuIHRoZW1lIGlzIGFjdGl2ZVxyXG4gICAgaWYgKCF0aGlzLnBsdWdpbi5pc094eWdlblRoZW1lQWN0aXZlKCkpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICB0aGlzLnJlbW92ZVN0eWxlKCk7XHJcbiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNsYXNzKCd0aGVtZS1kYXJrJyk7XHJcbiAgICBkb2N1bWVudC5ib2R5LmFkZENsYXNzKCd0aGVtZS1saWdodCcsIHRoaXMucGx1Z2luLnNldHRpbmdzLmxpZ2h0U3R5bGUpO1xyXG4gICAgXHJcbiAgICBjb25zdCB0aGVtZSA9IGdldFZhdWx0Q29uZmlnKHRoaXMucGx1Z2luLmFwcCwgJ3RoZW1lJyk7XHJcbiAgICBpZiAodGhlbWUgIT09ICdzeXN0ZW0nKSB7XHJcbiAgICAgIHNldFRoZW1lKHRoaXMucGx1Z2luLmFwcCwgJ21vb25zdG9uZScpO1xyXG4gICAgICBzZXRWYXVsdENvbmZpZyh0aGlzLnBsdWdpbi5hcHAsICd0aGVtZScsICdtb29uc3RvbmUnKTtcclxuICAgIH1cclxuICAgIHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UudHJpZ2dlcignY3NzLWNoYW5nZScpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVXBkYXRlIGRhcmsgbW9kZSBzdHlsZVxyXG4gICAqL1xyXG4gIHVwZGF0ZURhcmtTdHlsZSgpOiB2b2lkIHtcclxuICAgIC8vIE9ubHkgYXBwbHkgc3R5bGVzIGlmIE94eWdlbiB0aGVtZSBpcyBhY3RpdmVcclxuICAgIGlmICghdGhpcy5wbHVnaW4uaXNPeHlnZW5UaGVtZUFjdGl2ZSgpKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIFxyXG4gICAgdGhpcy5yZW1vdmVTdHlsZSgpO1xyXG4gICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDbGFzcygndGhlbWUtbGlnaHQnKTtcclxuICAgIGRvY3VtZW50LmJvZHkuYWRkQ2xhc3MoJ3RoZW1lLWRhcmsnLCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kYXJrU3R5bGUpO1xyXG4gICAgXHJcbiAgICBjb25zdCB0aGVtZSA9IGdldFZhdWx0Q29uZmlnKHRoaXMucGx1Z2luLmFwcCwgJ3RoZW1lJyk7XHJcbiAgICBpZiAodGhlbWUgIT09ICdzeXN0ZW0nKSB7XHJcbiAgICAgIHNldFRoZW1lKHRoaXMucGx1Z2luLmFwcCwgJ29ic2lkaWFuJyk7XHJcbiAgICAgIHNldFZhdWx0Q29uZmlnKHRoaXMucGx1Z2luLmFwcCwgJ3RoZW1lJywgJ29ic2lkaWFuJyk7XHJcbiAgICB9XHJcbiAgICB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLnRyaWdnZXIoJ2Nzcy1jaGFuZ2UnKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFVwZGF0ZSBsaWdodCBjb2xvciBzY2hlbWVcclxuICAgKi9cclxuICB1cGRhdGVMaWdodFNjaGVtZSgpOiB2b2lkIHtcclxuICAgIC8vIE9ubHkgYXBwbHkgc3R5bGVzIGlmIE94eWdlbiB0aGVtZSBpcyBhY3RpdmVcclxuICAgIGlmICghdGhpcy5wbHVnaW4uaXNPeHlnZW5UaGVtZUFjdGl2ZSgpKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIFxyXG4gICAgdGhpcy5yZW1vdmVMaWdodFNjaGVtZSgpO1xyXG4gICAgdGhpcy5yZW1vdmVEYXJrU2NoZW1lKCk7XHJcbiAgICBcclxuICAgIGlmICghZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ3RoZW1lLWxpZ2h0JykpIHtcclxuICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDbGFzcygndGhlbWUtZGFyaycpO1xyXG4gICAgICBkb2N1bWVudC5ib2R5LmFkZENsYXNzKCd0aGVtZS1saWdodCcpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBPbmx5IGFkZCBjbGFzcyBpZiBzY2hlbWUgaXMgbm90IGVtcHR5XHJcbiAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MubGlnaHRTY2hlbWUgJiYgdGhpcy5wbHVnaW4uc2V0dGluZ3MubGlnaHRTY2hlbWUudHJpbSgpKSB7XHJcbiAgICAgIGRvY3VtZW50LmJvZHkuYWRkQ2xhc3ModGhpcy5wbHVnaW4uc2V0dGluZ3MubGlnaHRTY2hlbWUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVXBkYXRlIGRhcmsgY29sb3Igc2NoZW1lXHJcbiAgICovXHJcbiAgdXBkYXRlRGFya1NjaGVtZSgpOiB2b2lkIHtcclxuICAgIC8vIE9ubHkgYXBwbHkgc3R5bGVzIGlmIE94eWdlbiB0aGVtZSBpcyBhY3RpdmVcclxuICAgIGlmICghdGhpcy5wbHVnaW4uaXNPeHlnZW5UaGVtZUFjdGl2ZSgpKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIFxyXG4gICAgdGhpcy5yZW1vdmVEYXJrU2NoZW1lKCk7XHJcbiAgICB0aGlzLnJlbW92ZUxpZ2h0U2NoZW1lKCk7XHJcbiAgICBcclxuICAgIGlmICghZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ3RoZW1lLWRhcmsnKSkge1xyXG4gICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNsYXNzKCd0aGVtZS1saWdodCcpO1xyXG4gICAgICBkb2N1bWVudC5ib2R5LmFkZENsYXNzKCd0aGVtZS1kYXJrJyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIE9ubHkgYWRkIGNsYXNzIGlmIHNjaGVtZSBpcyBub3QgZW1wdHlcclxuICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kYXJrU2NoZW1lICYmIHRoaXMucGx1Z2luLnNldHRpbmdzLmRhcmtTY2hlbWUudHJpbSgpKSB7XHJcbiAgICAgIGRvY3VtZW50LmJvZHkuYWRkQ2xhc3ModGhpcy5wbHVnaW4uc2V0dGluZ3MuZGFya1NjaGVtZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogUmVtb3ZlIHN0eWxlIGNsYXNzZXNcclxuICAgKi9cclxuICByZW1vdmVTdHlsZSgpOiB2b2lkIHtcclxuICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2xhc3MoXHJcbiAgICAgICdveHlnZW4tbGlnaHQnLFxyXG4gICAgICAnb3h5Z2VuLWxpZ2h0LXRvbmFsJyxcclxuICAgICAgJ294eWdlbi1saWdodC1jb250cmFzdCcsXHJcbiAgICAgICdveHlnZW4tbGlnaHQtd2hpdGUnLFxyXG4gICAgICAnb3h5Z2VuLWRhcmsnLFxyXG4gICAgICAnb3h5Z2VuLWRhcmstdG9uYWwnLFxyXG4gICAgICAnb3h5Z2VuLWRhcmstYmxhY2snLFxyXG4gICAgICAvLyBMZWdhY3kgb3IgbWlzLXByZWZpeGVkIGNsYXNzZXMgdGhhdCBtaWdodCBiZSBzdGlja2luZ1xyXG4gICAgICAnbWluaW1hbC1saWdodCcsXHJcbiAgICAgICdtaW5pbWFsLWxpZ2h0LXRvbmFsJyxcclxuICAgICAgJ21pbmltYWwtbGlnaHQtY29udHJhc3QnLFxyXG4gICAgICAnbWluaW1hbC1saWdodC13aGl0ZScsXHJcbiAgICAgICdtaW5pbWFsLWRhcmsnLFxyXG4gICAgICAnbWluaW1hbC1kYXJrLXRvbmFsJyxcclxuICAgICAgJ21pbmltYWwtZGFyay1ibGFjaydcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZW1vdmUgbGlnaHQgc2NoZW1lIGNsYXNzZXNcclxuICAgKi9cclxuICByZW1vdmVMaWdodFNjaGVtZSgpOiB2b2lkIHtcclxuICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2xhc3MoLi4uTElHSFRfU0NIRU1FUyk7XHJcbiAgICBcclxuICAgIC8vIFJlbW92ZSBjdXN0b20gcHJlc2V0IGNsYXNzZXNcclxuICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbVByZXNldHMuZm9yRWFjaChwcmVzZXQgPT4ge1xyXG4gICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNsYXNzKGBveHlnZW4tY3VzdG9tLSR7cHJlc2V0LmlkfWApO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZW1vdmUgZGFyayBzY2hlbWUgY2xhc3Nlc1xyXG4gICAqL1xyXG4gIHJlbW92ZURhcmtTY2hlbWUoKTogdm9pZCB7XHJcbiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNsYXNzKC4uLkRBUktfU0NIRU1FUyk7XHJcbiAgICBcclxuICAgIC8vIFJlbW92ZSBjdXN0b20gcHJlc2V0IGNsYXNzZXNcclxuICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbVByZXNldHMuZm9yRWFjaChwcmVzZXQgPT4ge1xyXG4gICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNsYXNzKGBveHlnZW4tY3VzdG9tLSR7cHJlc2V0LmlkfWApO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZW1vdmUgc2V0dGluZ3MgY2xhc3Nlc1xyXG4gICAqL1xyXG4gIHJlbW92ZVNldHRpbmdzKCk6IHZvaWQge1xyXG4gICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDbGFzcyhcclxuICAgICAgJ2JvcmRlcnMtbm9uZScsXHJcbiAgICAgICdib3JkZXJzLW9uJyxcclxuICAgICAgJ2NvbG9yZnVsLWhlYWRpbmdzJyxcclxuICAgICAgJ2NvbG9yZnVsLWZyYW1lJyxcclxuICAgICAgJ2NvbG9yZnVsLWFjdGl2ZScsXHJcbiAgICAgICdsaW5rcy1pbnQtb24nLFxyXG4gICAgICAnbGlua3MtZXh0LW9uJyxcclxuICAgICAgJ2Z1bGwtd2lkdGgtbWVkaWEnLFxyXG4gICAgICAnaW1nLWdyaWQnLFxyXG4gICAgICAnb3h5Z2VuLWRldi1ibG9jay13aWR0aCcsXHJcbiAgICAgICdveHlnZW4tc3RhdHVzLW9mZicsXHJcbiAgICAgICdmdWxsLWZpbGUtbmFtZXMnLFxyXG4gICAgICAnbGFiZWxlZC1uYXYnLFxyXG4gICAgICAnb3h5Z2VuLWZvbGRpbmcnLFxyXG4gICAgICAnZW5hYmxlLWJsdXInLFxyXG4gICAgICAndXNlLWRlZmF1bHQtZm9sZGVyLWljb24nLFxyXG4gICAgICAnYW5pbWF0aW9ucy1yZWZpbmVkJyxcclxuICAgICAgJ2FuaW1hdGlvbnMtZGVmYXVsdCcsXHJcbiAgICAgICdhbmltYXRpb25zLXBsYXlmdWwnLFxyXG4gICAgICAnYW5pbWF0aW9ucy1vZmYnLFxyXG4gICAgICAndGFibGUtd2lkZScsXHJcbiAgICAgICd0YWJsZS1tYXgnLFxyXG4gICAgICAndGFibGUtMTAwJyxcclxuICAgICAgJ3RhYmxlLWRlZmF1bHQtd2lkdGgnLFxyXG4gICAgICAnaWZyYW1lLXdpZGUnLFxyXG4gICAgICAnaWZyYW1lLW1heCcsXHJcbiAgICAgICdpZnJhbWUtMTAwJyxcclxuICAgICAgJ2lmcmFtZS1kZWZhdWx0LXdpZHRoJyxcclxuICAgICAgJ2ltZy13aWRlJyxcclxuICAgICAgJ2ltZy1tYXgnLFxyXG4gICAgICAnaW1nLTEwMCcsXHJcbiAgICAgICdpbWctZGVmYXVsdC13aWR0aCcsXHJcbiAgICAgICdjaGFydC13aWRlJyxcclxuICAgICAgJ2NoYXJ0LW1heCcsXHJcbiAgICAgICdjaGFydC0xMDAnLFxyXG4gICAgICAnY2hhcnQtZGVmYXVsdC13aWR0aCcsXHJcbiAgICAgICdtYXAtd2lkZScsXHJcbiAgICAgICdtYXAtbWF4JyxcclxuICAgICAgJ21hcC0xMDAnLFxyXG4gICAgICAnbWFwLWRlZmF1bHQtd2lkdGgnXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogTG9hZCBDU1MgcnVsZXNcclxuICAgKiBVc2VzIENTUyBjdXN0b20gcHJvcGVydGllcyBvbiBib2R5IGluc3RlYWQgb2YgY3JlYXRpbmcgc3R5bGUgZWxlbWVudHNcclxuICAgKi9cclxuICBwcml2YXRlIGxvYWRSdWxlcygpOiB2b2lkIHtcclxuICAgIC8vIE9ubHkgbG9hZCBDU1MgcnVsZXMgaWYgT3h5Z2VuIHRoZW1lIGlzIGFjdGl2ZVxyXG4gICAgaWYgKCF0aGlzLnBsdWdpbi5pc094eWdlblRoZW1lQWN0aXZlKCkpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZChDU1NfQ0xBU1NFUy5QTFVHSU5fVEhFTUUpO1xyXG4gICAgXHJcbiAgICAvLyBVcGRhdGUgc3R5bGVzIG9uY2UgLSBtYXRjaGVzIG9yaWdpbmFsIHBsdWdpbiBiZWhhdmlvclxyXG4gICAgdGhpcy51cGRhdGVTdHlsZSgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVW5sb2FkIENTUyBydWxlc1xyXG4gICAqL1xyXG4gIHByaXZhdGUgdW5sb2FkUnVsZXMoKTogdm9pZCB7XHJcbiAgICAvLyBSZW1vdmUgQ1NTIGN1c3RvbSBwcm9wZXJ0aWVzXHJcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnJlbW92ZVByb3BlcnR5KCctLWZvbnQtdWktc21hbGwnKTtcclxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUucmVtb3ZlUHJvcGVydHkoJy0tbGluZS1oZWlnaHQnKTtcclxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUucmVtb3ZlUHJvcGVydHkoJy0tbGluZS13aWR0aCcpO1xyXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnLS1saW5lLXdpZHRoLXdpZGUnKTtcclxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUucmVtb3ZlUHJvcGVydHkoJy0tbWF4LXdpZHRoJyk7XHJcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnJlbW92ZVByb3BlcnR5KCctLWZvbnQtZWRpdG9yLW92ZXJyaWRlJyk7XHJcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnJlbW92ZVByb3BlcnR5KCctLW5hdi1pbmRlbnRhdGlvbi1ndWlkZS13aWR0aCcpO1xyXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnLS1uYXYtaW5kZW50YXRpb24tZ3VpZGUtY29sb3InKTtcclxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUucmVtb3ZlUHJvcGVydHkoJy0tYW5pbS1zcGVlZC1tb2RpZmllcicpO1xyXG4gICAgXHJcbiAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoQ1NTX0NMQVNTRVMuUExVR0lOX1RIRU1FKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldHVwIENTUyB3YXRjaGVyIGZvciByZS1hcHBseWluZyBjdXN0b20gcHJlc2V0c1xyXG4gICAqL1xyXG4gIHByaXZhdGUgc2V0dXBDU1NXYXRjaGVyKCk6IHZvaWQge1xyXG4gICAgLy8gQ1NTIHdhdGNoZXIgZGlzYWJsZWQgLSB3YXMgY2F1c2luZyBpbmZpbml0ZSBsb29wc1xyXG4gICAgLy8gQ3VzdG9tIHByZXNldCBDU1MgaXMgbm93IG9ubHkgdXBkYXRlZCB3aGVuIGV4cGxpY2l0bHkgY2FsbGVkXHJcbiAgfVxyXG5cclxufVxyXG5cclxuIiwgIi8qKlxuICogVGhlbWUgTWFuYWdlclxuICogSGFuZGxlcyB0aGVtZSBtb2RlIHN3aXRjaGluZyAobGlnaHQvZGFyaylcbiAqL1xuXG5pbXBvcnQgeyBQbHVnaW5Db250ZXh0LCBUaGVtZU1vZGUgfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgeyBPQlNJRElBTl9USEVNRVMgfSBmcm9tICcuLi9jb25zdGFudHMnO1xuaW1wb3J0IHsgZ2V0VmF1bHRDb25maWcsIHNldFRoZW1lLCBzZXRWYXVsdENvbmZpZyB9IGZyb20gJy4uL3R5cGVzL29ic2lkaWFuLWV4dGVuc2lvbnMnO1xuXG5leHBvcnQgY2xhc3MgVGhlbWVNYW5hZ2VySW1wbCB7XG4gIHByaXZhdGUgcGx1Z2luOiBQbHVnaW5Db250ZXh0O1xuXG4gIGNvbnN0cnVjdG9yKHBsdWdpbjogUGx1Z2luQ29udGV4dCkge1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICB9XG5cbiAgLyoqXG4gICAqIFRvZ2dsZSBiZXR3ZWVuIGxpZ2h0IGFuZCBkYXJrIHRoZW1lc1xuICAgKi9cbiAgdXBkYXRlVGhlbWUoKTogdm9pZCB7XG4gICAgY29uc3QgY3VycmVudFRoZW1lID0gZ2V0VmF1bHRDb25maWcodGhpcy5wbHVnaW4uYXBwLCAndGhlbWUnKTtcbiAgICBpZiAoY3VycmVudFRoZW1lID09PSBPQlNJRElBTl9USEVNRVMuU1lTVEVNKSB7XG4gICAgICAvLyBTeXN0ZW0gdGhlbWUgbW9kZSAtIGp1c3QgdG9nZ2xlIGNsYXNzXG4gICAgICBpZiAoZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ3RoZW1lLWxpZ2h0JykpIHtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDbGFzcygndGhlbWUtbGlnaHQnKTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hZGRDbGFzcygndGhlbWUtZGFyaycpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDbGFzcygndGhlbWUtZGFyaycpO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFkZENsYXNzKCd0aGVtZS1saWdodCcpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBNYW51YWwgdGhlbWUgbW9kZSAtIHRvZ2dsZSBib3RoIGNsYXNzIGFuZCBPYnNpZGlhbiB0aGVtZVxuICAgICAgaWYgKGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCd0aGVtZS1saWdodCcpKSB7XG4gICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2xhc3MoJ3RoZW1lLWxpZ2h0Jyk7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYWRkQ2xhc3MoJ3RoZW1lLWRhcmsnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2xhc3MoJ3RoZW1lLWRhcmsnKTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hZGRDbGFzcygndGhlbWUtbGlnaHQnKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgdGhlbWUgPSBnZXRWYXVsdENvbmZpZyh0aGlzLnBsdWdpbi5hcHAsICd0aGVtZScpO1xuICAgICAgY29uc3QgbmV3VGhlbWUgPSB0aGVtZSA9PT0gT0JTSURJQU5fVEhFTUVTLkxJR0hUIFxuICAgICAgICA/IE9CU0lESUFOX1RIRU1FUy5EQVJLIFxuICAgICAgICA6IE9CU0lESUFOX1RIRU1FUy5MSUdIVDtcblxuICAgICAgc2V0VGhlbWUodGhpcy5wbHVnaW4uYXBwLCBuZXdUaGVtZSk7XG4gICAgICBzZXRWYXVsdENvbmZpZyh0aGlzLnBsdWdpbi5hcHAsICd0aGVtZScsIG5ld1RoZW1lKTtcbiAgICB9XG4gICAgXG4gICAgdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS50cmlnZ2VyKCdjc3MtY2hhbmdlJyk7XG4gIH1cblxuICAvKipcbiAgICogU3dpdGNoIHRvIGxpZ2h0IHRoZW1lXG4gICAqL1xuICBzd2l0Y2hUb0xpZ2h0KCk6IHZvaWQge1xuICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2xhc3MoJ3RoZW1lLWRhcmsnKTtcbiAgICBkb2N1bWVudC5ib2R5LmFkZENsYXNzKCd0aGVtZS1saWdodCcpO1xuICAgIFxuICAgIGNvbnN0IHRoZW1lID0gZ2V0VmF1bHRDb25maWcodGhpcy5wbHVnaW4uYXBwLCAndGhlbWUnKTtcbiAgICBpZiAodGhlbWUgIT09IE9CU0lESUFOX1RIRU1FUy5TWVNURU0pIHtcbiAgICAgIHNldFRoZW1lKHRoaXMucGx1Z2luLmFwcCwgT0JTSURJQU5fVEhFTUVTLkxJR0hUKTtcbiAgICAgIHNldFZhdWx0Q29uZmlnKHRoaXMucGx1Z2luLmFwcCwgJ3RoZW1lJywgT0JTSURJQU5fVEhFTUVTLkxJR0hUKTtcbiAgICB9XG4gICAgXG4gICAgdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS50cmlnZ2VyKCdjc3MtY2hhbmdlJyk7XG4gIH1cblxuICAvKipcbiAgICogU3dpdGNoIHRvIGRhcmsgdGhlbWVcbiAgICovXG4gIHN3aXRjaFRvRGFyaygpOiB2b2lkIHtcbiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNsYXNzKCd0aGVtZS1saWdodCcpO1xuICAgIGRvY3VtZW50LmJvZHkuYWRkQ2xhc3MoJ3RoZW1lLWRhcmsnKTtcbiAgICBcbiAgICBjb25zdCB0aGVtZSA9IGdldFZhdWx0Q29uZmlnKHRoaXMucGx1Z2luLmFwcCwgJ3RoZW1lJyk7XG4gICAgaWYgKHRoZW1lICE9PSBPQlNJRElBTl9USEVNRVMuU1lTVEVNKSB7XG4gICAgICBzZXRUaGVtZSh0aGlzLnBsdWdpbi5hcHAsIE9CU0lESUFOX1RIRU1FUy5EQVJLKTtcbiAgICAgIHNldFZhdWx0Q29uZmlnKHRoaXMucGx1Z2luLmFwcCwgJ3RoZW1lJywgT0JTSURJQU5fVEhFTUVTLkRBUkspO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLnRyaWdnZXIoJ2Nzcy1jaGFuZ2UnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY3VycmVudCB0aGVtZSBtb2RlXG4gICAqL1xuICBnZXRDdXJyZW50TW9kZSgpOiBUaGVtZU1vZGUge1xuICAgIHJldHVybiBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucygndGhlbWUtbGlnaHQnKSA/ICdsaWdodCcgOiAnZGFyayc7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIHNpZGViYXIgdGhlbWUgZm9yIGhpZ2ggY29udHJhc3QgbGlnaHQgbW9kZVxuICAgKi9cbiAgdXBkYXRlU2lkZWJhclRoZW1lKCk6IHZvaWQge1xuICAgIC8vIE9ubHkgdXBkYXRlIHNpZGViYXIgdGhlbWUgaWYgT3h5Z2VuIHRoZW1lIGlzIGFjdGl2ZVxuICAgIGlmICghdGhpcy5wbHVnaW4uaXNPeHlnZW5UaGVtZUFjdGl2ZSgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHNpZGViYXJFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ21vZC1sZWZ0LXNwbGl0JylbMF07XG4gICAgY29uc3QgcmliYm9uRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdzaWRlLWRvY2stcmliYm9uJylbMF07XG4gICAgXG4gICAgaWYgKFxuICAgICAgc2lkZWJhckVsICYmIFxuICAgICAgcmliYm9uRWwgJiYgXG4gICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucygndGhlbWUtbGlnaHQnKSAmJiBcbiAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmxpZ2h0U3R5bGUgPT09ICdveHlnZW4tbGlnaHQtY29udHJhc3QnXG4gICAgKSB7XG4gICAgICBzaWRlYmFyRWwuYWRkQ2xhc3MoJ3RoZW1lLWRhcmsnKTtcbiAgICAgIHJpYmJvbkVsLmFkZENsYXNzKCd0aGVtZS1kYXJrJyk7XG4gICAgfSBlbHNlIGlmIChzaWRlYmFyRWwgJiYgcmliYm9uRWwpIHtcbiAgICAgIHNpZGViYXJFbC5yZW1vdmVDbGFzcygndGhlbWUtZGFyaycpOyBcbiAgICAgIHJpYmJvbkVsLnJlbW92ZUNsYXNzKCd0aGVtZS1kYXJrJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENsZWFudXAgc2lkZWJhciB0aGVtZSBvbiB1bmxvYWRcbiAgICovXG4gIGNsZWFudXBTaWRlYmFyVGhlbWUoKTogdm9pZCB7XG4gICAgY29uc3Qgc2lkZWJhckVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbW9kLWxlZnQtc3BsaXQnKVswXTtcbiAgICBpZiAoc2lkZWJhckVsKSB7XG4gICAgICBzaWRlYmFyRWwucmVtb3ZlQ2xhc3MoJ3RoZW1lLWRhcmsnKTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgcmliYm9uRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdzaWRlLWRvY2stcmliYm9uJylbMF07XG4gICAgaWYgKHJpYmJvbkVsKSB7XG4gICAgICByaWJib25FbC5yZW1vdmVDbGFzcygndGhlbWUtZGFyaycpO1xuICAgIH1cbiAgfVxufVxuXG4iLCAiLyoqXG4gKiBTZXR0aW5ncyBTeW5jIE1hbmFnZXJcbiAqIFN5bmNocm9uaXplcyBwbHVnaW4gc2V0dGluZ3Mgd2l0aCBPYnNpZGlhbiB2YXVsdCBjb25maWd1cmF0aW9uXG4gKi9cblxuaW1wb3J0IHsgUGx1Z2luQ29udGV4dCB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7IFZBVUxUX0NPTkZJRyB9IGZyb20gJy4uL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBnZXRWYXVsdENvbmZpZywgc2V0VmF1bHRDb25maWcsIG9uVmF1bHRDb25maWdDaGFuZ2VkLCB1cGRhdGVGb250U2l6ZSB9IGZyb20gJy4uL3R5cGVzL29ic2lkaWFuLWV4dGVuc2lvbnMnO1xuXG5leHBvcnQgY2xhc3MgU2V0dGluZ3NTeW5jTWFuYWdlciB7XG4gIHByaXZhdGUgcGx1Z2luOiBQbHVnaW5Db250ZXh0O1xuXG4gIGNvbnN0cnVjdG9yKHBsdWdpbjogUGx1Z2luQ29udGV4dCkge1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIGV2ZW50IHdhdGNoZXJzIGZvciB2YXVsdCBjb25maWcgY2hhbmdlc1xuICAgKi9cbiAgc2V0dXBXYXRjaGVycygpOiB2b2lkIHtcbiAgICAvLyBXYXRjaCBmb3IgdmF1bHQgY29uZmlnIGNoYW5nZXNcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KFxuICAgICAgb25WYXVsdENvbmZpZ0NoYW5nZWQodGhpcy5wbHVnaW4uYXBwLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuc3luY0Zyb21WYXVsdCgpO1xuICAgICAgfSlcbiAgICApO1xuICAgIFxuICAgIC8vIFdhdGNoIGZvciBDU1MgY2hhbmdlcyAoc2lkZWJhciB0aGVtZSB1cGRhdGVzKVxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQoXG4gICAgICB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKCdjc3MtY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICB0aGlzLnVwZGF0ZVNpZGViYXJUaGVtZSgpO1xuICAgICAgfSlcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFN5bmMgc2V0dGluZ3MgZnJvbSBPYnNpZGlhbiB2YXVsdCBjb25maWdcbiAgICogQHBhcmFtIHNraXBTYXZlIC0gSWYgdHJ1ZSwgZG9uJ3Qgc2F2ZSBzZXR0aW5ncyAodXNlZCBkdXJpbmcgaW5pdGlhbCBsb2FkKVxuICAgKi9cbiAgc3luY0Zyb21WYXVsdChza2lwU2F2ZTogYm9vbGVhbiA9IGZhbHNlKTogdm9pZCB7XG4gICAgLy8gRm9udCBzaXplXG4gICAgY29uc3QgZm9udFNpemUgPSBnZXRWYXVsdENvbmZpZyh0aGlzLnBsdWdpbi5hcHAsIFZBVUxUX0NPTkZJRy5CQVNFX0ZPTlRfU0laRSk7XG4gICAgaWYgKHR5cGVvZiBmb250U2l6ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRleHROb3JtYWwgPSBmb250U2l6ZTtcbiAgICB9XG5cbiAgICAvLyBGb2xkaW5nXG4gICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGluZyA9ICEhZ2V0VmF1bHRDb25maWcodGhpcy5wbHVnaW4uYXBwLCBWQVVMVF9DT05GSUcuRk9MRF9IRUFESU5HKTtcblxuICAgIC8vIExpbmUgbnVtYmVyc1xuICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmxpbmVOdW1iZXJzID0gISFnZXRWYXVsdENvbmZpZyh0aGlzLnBsdWdpbi5hcHAsIFZBVUxUX0NPTkZJRy5TSE9XX0xJTkVfTlVNQkVSKTtcblxuICAgIC8vIFJlYWRhYmxlIGxpbmUgbGVuZ3RoXG4gICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucmVhZGFibGVMaW5lTGVuZ3RoID0gISFnZXRWYXVsdENvbmZpZyh0aGlzLnBsdWdpbi5hcHAsIFZBVUxUX0NPTkZJRy5SRUFEQUJMRV9MSU5FX0xFTkdUSCk7XG5cbiAgICAvLyBVcGRhdGUgYm9keSBjbGFzc2VzXG4gICAgY29uc3QgYm9keUNsYXNzTGlzdCA9IGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0O1xuICAgIGJvZHlDbGFzc0xpc3QudG9nZ2xlKCdveHlnZW4tZm9sZGluZycsIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRpbmcpO1xuICAgIGJvZHlDbGFzc0xpc3QudG9nZ2xlKCdveHlnZW4tbGluZS1udW1zJywgdGhpcy5wbHVnaW4uc2V0dGluZ3MubGluZU51bWJlcnMpO1xuICAgIGJvZHlDbGFzc0xpc3QudG9nZ2xlKCdveHlnZW4tcmVhZGFibGUnLCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZWFkYWJsZUxpbmVMZW5ndGgpO1xuICAgIGJvZHlDbGFzc0xpc3QudG9nZ2xlKCdveHlnZW4tcmVhZGFibGUtb2ZmJywgIXRoaXMucGx1Z2luLnNldHRpbmdzLnJlYWRhYmxlTGluZUxlbmd0aCk7XG5cbiAgICAvLyBTYXZlIHVwZGF0ZWQgc2V0dGluZ3MgKHNraXAgZHVyaW5nIGluaXRpYWwgbG9hZCB0byBhdm9pZCB1bm5lY2Vzc2FyeSBJL08pXG4gICAgaWYgKCFza2lwU2F2ZSkge1xuICAgICAgdm9pZCB0aGlzLnBsdWdpbi5zYXZlRGF0YSh0aGlzLnBsdWdpbi5zZXR0aW5ncyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFN5bmMgZm9udCBzaXplIHRvIE9ic2lkaWFuIHZhdWx0IGNvbmZpZ1xuICAgKi9cbiAgc2V0Rm9udFNpemUoKTogdm9pZCB7XG4gICAgc2V0VmF1bHRDb25maWcodGhpcy5wbHVnaW4uYXBwLCBWQVVMVF9DT05GSUcuQkFTRV9GT05UX1NJWkUsIHRoaXMucGx1Z2luLnNldHRpbmdzLnRleHROb3JtYWwpO1xuICAgIHVwZGF0ZUZvbnRTaXplKHRoaXMucGx1Z2luLmFwcCk7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIHNpZGViYXIgdGhlbWUgZm9yIGhpZ2ggY29udHJhc3QgbW9kZVxuICAgKi9cbiAgcHJpdmF0ZSB1cGRhdGVTaWRlYmFyVGhlbWUoKTogdm9pZCB7XG4gICAgY29uc3Qgc2lkZWJhckVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbW9kLWxlZnQtc3BsaXQnKVswXTtcbiAgICBjb25zdCByaWJib25FbCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3NpZGUtZG9jay1yaWJib24nKVswXTtcbiAgICBcbiAgICBpZiAoXG4gICAgICBzaWRlYmFyRWwgJiYgXG4gICAgICByaWJib25FbCAmJiBcbiAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCd0aGVtZS1saWdodCcpICYmIFxuICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubGlnaHRTdHlsZSA9PT0gJ294eWdlbi1saWdodC1jb250cmFzdCdcbiAgICApIHtcbiAgICAgIHNpZGViYXJFbC5hZGRDbGFzcygndGhlbWUtZGFyaycpO1xuICAgICAgcmliYm9uRWwuYWRkQ2xhc3MoJ3RoZW1lLWRhcmsnKTtcbiAgICB9IGVsc2UgaWYgKHNpZGViYXJFbCAmJiByaWJib25FbCkge1xuICAgICAgc2lkZWJhckVsLnJlbW92ZUNsYXNzKCd0aGVtZS1kYXJrJyk7IFxuICAgICAgcmliYm9uRWwucmVtb3ZlQ2xhc3MoJ3RoZW1lLWRhcmsnKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2xlYW51cCAtIG5vIHNwZWNpZmljIGNsZWFudXAgbmVlZGVkIGZvciB0aGlzIG1hbmFnZXJcbiAgICovXG4gIGNsZWFudXAoKTogdm9pZCB7XG4gICAgLy8gRXZlbnQgbGlzdGVuZXJzIGFyZSBhdXRvbWF0aWNhbGx5IGNsZWFuZWQgdXAgYnkgT2JzaWRpYW5cbiAgfVxufVxuXG4iLCAiLyoqXG4gKiBGb250IHNpemUgYWRqdXN0bWVudCBjb21tYW5kc1xuICovXG5cbmltcG9ydCB7IFBsdWdpbkNvbnRleHQgfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgeyBDT01NQU5EX0lEUywgREVGQVVMVFMgfSBmcm9tICcuLi9jb25zdGFudHMnO1xuaW1wb3J0IHsgc2V0VmF1bHRDb25maWcsIHVwZGF0ZUZvbnRTaXplIH0gZnJvbSAnLi4vdHlwZXMvb2JzaWRpYW4tZXh0ZW5zaW9ucyc7XG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlckZvbnRDb21tYW5kcyhwbHVnaW46IFBsdWdpbkNvbnRleHQpOiB2b2lkIHtcbiAgcGx1Z2luLmFkZENvbW1hbmQoe1xuICAgIGlkOiBDT01NQU5EX0lEUy5JTkNSRUFTRV9GT05ULFxuICAgIG5hbWU6ICdJbmNyZWFzZSBib2R5IGZvbnQgc2l6ZScsXG4gICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgIHBsdWdpbi5zZXR0aW5ncy50ZXh0Tm9ybWFsICs9IERFRkFVTFRTLkZPTlRfU1RFUDtcbiAgICAgIHZvaWQgcGx1Z2luLnNhdmVEYXRhKHBsdWdpbi5zZXR0aW5ncyk7XG4gICAgICBzZXRGb250U2l6ZShwbHVnaW4pO1xuICAgIH1cbiAgfSk7XG5cbiAgcGx1Z2luLmFkZENvbW1hbmQoe1xuICAgIGlkOiBDT01NQU5EX0lEUy5ERUNSRUFTRV9GT05ULFxuICAgIG5hbWU6ICdEZWNyZWFzZSBib2R5IGZvbnQgc2l6ZScsXG4gICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgIHBsdWdpbi5zZXR0aW5ncy50ZXh0Tm9ybWFsIC09IERFRkFVTFRTLkZPTlRfU1RFUDtcbiAgICAgIHZvaWQgcGx1Z2luLnNhdmVEYXRhKHBsdWdpbi5zZXR0aW5ncyk7XG4gICAgICBzZXRGb250U2l6ZShwbHVnaW4pO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHNldEZvbnRTaXplKHBsdWdpbjogUGx1Z2luQ29udGV4dCk6IHZvaWQge1xuICBzZXRWYXVsdENvbmZpZyhwbHVnaW4uYXBwLCAnYmFzZUZvbnRTaXplJywgcGx1Z2luLnNldHRpbmdzLnRleHROb3JtYWwpO1xuICB1cGRhdGVGb250U2l6ZShwbHVnaW4uYXBwKTtcbn1cblxuIiwgIi8qKlxuICogQ29sb3Igc2NoZW1lIHN3aXRjaGluZyBjb21tYW5kc1xuICogR2VuZXJhdGVzIGNvbW1hbmRzIGZvciBhbGwgYnVpbHQtaW4gbGlnaHQgYW5kIGRhcmsgc2NoZW1lc1xuICovXG5cbmltcG9ydCB7IFBsdWdpbkNvbnRleHQgfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgeyBMSUdIVF9TQ0hFTUVTLCBEQVJLX1NDSEVNRVMsIFNDSEVNRV9ESVNQTEFZX05BTUVTIH0gZnJvbSAnLi4vY29uc3RhbnRzJztcbmltcG9ydCB7IHNldFRoZW1lLCBnZXRWYXVsdENvbmZpZywgc2V0VmF1bHRDb25maWcgfSBmcm9tICcuLi90eXBlcy9vYnNpZGlhbi1leHRlbnNpb25zJztcblxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyU2NoZW1lQ29tbWFuZHMocGx1Z2luOiBQbHVnaW5Db250ZXh0KTogdm9pZCB7XG4gIC8vIFJlZ2lzdGVyIGxpZ2h0IHNjaGVtZSBjb21tYW5kc1xuICBMSUdIVF9TQ0hFTUVTLmZvckVhY2goc2NoZW1lID0+IHtcbiAgICBjb25zdCBzY2hlbWVOYW1lID0gU0NIRU1FX0RJU1BMQVlfTkFNRVNbc2NoZW1lXSB8fCBzY2hlbWU7XG4gICAgXG4gICAgcGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6IGB0b2dnbGUtJHtzY2hlbWV9YCxcbiAgICAgIG5hbWU6IGBTd2l0Y2ggbGlnaHQgY29sb3Igc2NoZW1lIHRvICR7c2NoZW1lTmFtZX0gKGxpZ2h0KWAsXG4gICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICBwbHVnaW4uc2V0dGluZ3MubGlnaHRTY2hlbWUgPSBzY2hlbWU7XG4gICAgICAgIHZvaWQgcGx1Z2luLnNhdmVEYXRhKHBsdWdpbi5zZXR0aW5ncyk7XG4gICAgICAgIHVwZGF0ZUxpZ2h0U2NoZW1lKHBsdWdpbik7XG4gICAgICAgIHVwZGF0ZUxpZ2h0U3R5bGUocGx1Z2luKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8gUmVnaXN0ZXIgZGFyayBzY2hlbWUgY29tbWFuZHNcbiAgREFSS19TQ0hFTUVTLmZvckVhY2goc2NoZW1lID0+IHtcbiAgICBjb25zdCBzY2hlbWVOYW1lID0gU0NIRU1FX0RJU1BMQVlfTkFNRVNbc2NoZW1lXSB8fCBzY2hlbWU7XG4gICAgXG4gICAgcGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6IGB0b2dnbGUtJHtzY2hlbWV9YCxcbiAgICAgIG5hbWU6IGBTd2l0Y2ggZGFyayBjb2xvciBzY2hlbWUgdG8gJHtzY2hlbWVOYW1lfSAoZGFyaylgLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgcGx1Z2luLnNldHRpbmdzLmRhcmtTY2hlbWUgPSBzY2hlbWU7XG4gICAgICAgIHZvaWQgcGx1Z2luLnNhdmVEYXRhKHBsdWdpbi5zZXR0aW5ncyk7XG4gICAgICAgIHVwZGF0ZURhcmtTY2hlbWUocGx1Z2luKTtcbiAgICAgICAgdXBkYXRlRGFya1N0eWxlKHBsdWdpbik7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlTGlnaHRTY2hlbWUocGx1Z2luOiBQbHVnaW5Db250ZXh0KTogdm9pZCB7XG4gIHJlbW92ZUxpZ2h0U2NoZW1lKHBsdWdpbik7XG4gIHJlbW92ZURhcmtTY2hlbWUocGx1Z2luKTtcbiAgXG4gIGlmICghZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ3RoZW1lLWxpZ2h0JykpIHtcbiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNsYXNzKCd0aGVtZS1kYXJrJyk7XG4gICAgZG9jdW1lbnQuYm9keS5hZGRDbGFzcygndGhlbWUtbGlnaHQnKTtcbiAgfVxuICBcbiAgZG9jdW1lbnQuYm9keS5hZGRDbGFzcyhwbHVnaW4uc2V0dGluZ3MubGlnaHRTY2hlbWUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlRGFya1NjaGVtZShwbHVnaW46IFBsdWdpbkNvbnRleHQpOiB2b2lkIHtcbiAgcmVtb3ZlRGFya1NjaGVtZShwbHVnaW4pO1xuICByZW1vdmVMaWdodFNjaGVtZShwbHVnaW4pO1xuICBcbiAgaWYgKCFkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucygndGhlbWUtZGFyaycpKSB7XG4gICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDbGFzcygndGhlbWUtbGlnaHQnKTtcbiAgICBkb2N1bWVudC5ib2R5LmFkZENsYXNzKCd0aGVtZS1kYXJrJyk7XG4gIH1cbiAgXG4gIGRvY3VtZW50LmJvZHkuYWRkQ2xhc3MocGx1Z2luLnNldHRpbmdzLmRhcmtTY2hlbWUpO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVMaWdodFN0eWxlKHBsdWdpbjogUGx1Z2luQ29udGV4dCk6IHZvaWQge1xuICAvLyBPbmx5IGFwcGx5IHN0eWxlcyBpZiBPeHlnZW4gdGhlbWUgaXMgYWN0aXZlXG4gIGlmICghcGx1Z2luLmlzT3h5Z2VuVGhlbWVBY3RpdmUoKSkge1xuICAgIHJldHVybjtcbiAgfVxuICBcbiAgZG9jdW1lbnQuYm9keS5yZW1vdmVDbGFzcyhcbiAgICAndGhlbWUtZGFyaycsXG4gICAgJ294eWdlbi1saWdodCcsXG4gICAgJ294eWdlbi1saWdodC10b25hbCcsXG4gICAgJ294eWdlbi1saWdodC1jb250cmFzdCcsXG4gICAgJ294eWdlbi1saWdodC13aGl0ZSdcbiAgKTtcbiAgZG9jdW1lbnQuYm9keS5hZGRDbGFzcygndGhlbWUtbGlnaHQnLCBwbHVnaW4uc2V0dGluZ3MubGlnaHRTdHlsZSk7XG4gIFxuICBjb25zdCB0aGVtZSA9IGdldFZhdWx0Q29uZmlnKHBsdWdpbi5hcHAsICd0aGVtZScpO1xuICBpZiAodGhlbWUgIT09ICdzeXN0ZW0nKSB7XG4gICAgc2V0VGhlbWUocGx1Z2luLmFwcCwgJ21vb25zdG9uZScpO1xuICAgIHNldFZhdWx0Q29uZmlnKHBsdWdpbi5hcHAsICd0aGVtZScsICdtb29uc3RvbmUnKTtcbiAgfVxuICBwbHVnaW4uYXBwLndvcmtzcGFjZS50cmlnZ2VyKCdjc3MtY2hhbmdlJyk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZURhcmtTdHlsZShwbHVnaW46IFBsdWdpbkNvbnRleHQpOiB2b2lkIHtcbiAgLy8gT25seSBhcHBseSBzdHlsZXMgaWYgT3h5Z2VuIHRoZW1lIGlzIGFjdGl2ZVxuICBpZiAoIXBsdWdpbi5pc094eWdlblRoZW1lQWN0aXZlKCkpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgXG4gIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2xhc3MoXG4gICAgJ3RoZW1lLWxpZ2h0JyxcbiAgICAnb3h5Z2VuLWRhcmsnLFxuICAgICdveHlnZW4tZGFyay10b25hbCcsXG4gICAgJ294eWdlbi1kYXJrLWJsYWNrJ1xuICApO1xuICBkb2N1bWVudC5ib2R5LmFkZENsYXNzKCd0aGVtZS1kYXJrJywgcGx1Z2luLnNldHRpbmdzLmRhcmtTdHlsZSk7XG4gIFxuICBjb25zdCB0aGVtZSA9IGdldFZhdWx0Q29uZmlnKHBsdWdpbi5hcHAsICd0aGVtZScpO1xuICBpZiAodGhlbWUgIT09ICdzeXN0ZW0nKSB7XG4gICAgc2V0VGhlbWUocGx1Z2luLmFwcCwgJ29ic2lkaWFuJyk7XG4gICAgc2V0VmF1bHRDb25maWcocGx1Z2luLmFwcCwgJ3RoZW1lJywgJ29ic2lkaWFuJyk7XG4gIH1cbiAgcGx1Z2luLmFwcC53b3Jrc3BhY2UudHJpZ2dlcignY3NzLWNoYW5nZScpO1xufVxuXG5mdW5jdGlvbiByZW1vdmVMaWdodFNjaGVtZShwbHVnaW46IFBsdWdpbkNvbnRleHQpOiB2b2lkIHtcbiAgZG9jdW1lbnQuYm9keS5yZW1vdmVDbGFzcyguLi5MSUdIVF9TQ0hFTUVTKTtcbiAgXG4gIC8vIFJlbW92ZSBjdXN0b20gcHJlc2V0IGNsYXNzZXNcbiAgcGx1Z2luLnNldHRpbmdzLmN1c3RvbVByZXNldHMuZm9yRWFjaChwcmVzZXQgPT4ge1xuICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2xhc3MoYG1pbmltYWwtY3VzdG9tLSR7cHJlc2V0LmlkfWApO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlRGFya1NjaGVtZShwbHVnaW46IFBsdWdpbkNvbnRleHQpOiB2b2lkIHtcbiAgZG9jdW1lbnQuYm9keS5yZW1vdmVDbGFzcyguLi5EQVJLX1NDSEVNRVMpO1xuICBcbiAgLy8gUmVtb3ZlIGN1c3RvbSBwcmVzZXQgY2xhc3Nlc1xuICBwbHVnaW4uc2V0dGluZ3MuY3VzdG9tUHJlc2V0cy5mb3JFYWNoKHByZXNldCA9PiB7XG4gICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDbGFzcyhgbWluaW1hbC1jdXN0b20tJHtwcmVzZXQuaWR9YCk7XG4gIH0pO1xufVxuXG4iLCAiLyoqXG4gKiBMaWdodC9EYXJrIHN0eWxlIGN5Y2xpbmcgY29tbWFuZHNcbiAqL1xuXG5pbXBvcnQgeyBQbHVnaW5Db250ZXh0IH0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHsgQ09NTUFORF9JRFMsIExJR0hUX1NUWUxFUywgREFSS19TVFlMRVMgfSBmcm9tICcuLi9jb25zdGFudHMnO1xuaW1wb3J0IHsgc2V0VGhlbWUsIGdldFZhdWx0Q29uZmlnLCBzZXRWYXVsdENvbmZpZyB9IGZyb20gJy4uL3R5cGVzL29ic2lkaWFuLWV4dGVuc2lvbnMnO1xuaW1wb3J0IHsgdXBkYXRlTGlnaHRTY2hlbWUsIHVwZGF0ZURhcmtTY2hlbWUgfSBmcm9tICcuL3NjaGVtZS1jb21tYW5kcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlclN0eWxlQ29tbWFuZHMocGx1Z2luOiBQbHVnaW5Db250ZXh0KTogdm9pZCB7XG4gIC8vIEN5Y2xlIGRhcmsgc3R5bGVzXG4gIHBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICBpZDogQ09NTUFORF9JRFMuQ1lDTEVfREFSS19TVFlMRSxcbiAgICBuYW1lOiAnQ3ljbGUgYmV0d2VlbiBkYXJrIG1vZGUgc3R5bGVzJyxcbiAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgY29uc3QgY3VycmVudEluZGV4ID0gKERBUktfU1RZTEVTIGFzIHJlYWRvbmx5IHN0cmluZ1tdKS5pbmRleE9mKHBsdWdpbi5zZXR0aW5ncy5kYXJrU3R5bGUpO1xuICAgICAgY29uc3QgbmV4dEluZGV4ID0gKGN1cnJlbnRJbmRleCArIDEpICUgREFSS19TVFlMRVMubGVuZ3RoO1xuICAgICAgcGx1Z2luLnNldHRpbmdzLmRhcmtTdHlsZSA9IERBUktfU1RZTEVTW25leHRJbmRleF07XG4gICAgICB2b2lkIHBsdWdpbi5zYXZlRGF0YShwbHVnaW4uc2V0dGluZ3MpO1xuICAgICAgdXBkYXRlRGFya1N0eWxlKHBsdWdpbik7XG4gICAgfVxuICB9KTtcblxuICAvLyBDeWNsZSBsaWdodCBzdHlsZXNcbiAgcGx1Z2luLmFkZENvbW1hbmQoe1xuICAgIGlkOiBDT01NQU5EX0lEUy5DWUNMRV9MSUdIVF9TVFlMRSxcbiAgICBuYW1lOiAnQ3ljbGUgYmV0d2VlbiBsaWdodCBtb2RlIHN0eWxlcycsXG4gICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRJbmRleCA9IChMSUdIVF9TVFlMRVMgYXMgcmVhZG9ubHkgc3RyaW5nW10pLmluZGV4T2YocGx1Z2luLnNldHRpbmdzLmxpZ2h0U3R5bGUpO1xuICAgICAgY29uc3QgbmV4dEluZGV4ID0gKGN1cnJlbnRJbmRleCArIDEpICUgTElHSFRfU1RZTEVTLmxlbmd0aDtcbiAgICAgIHBsdWdpbi5zZXR0aW5ncy5saWdodFN0eWxlID0gTElHSFRfU1RZTEVTW25leHRJbmRleF07XG4gICAgICB2b2lkIHBsdWdpbi5zYXZlRGF0YShwbHVnaW4uc2V0dGluZ3MpO1xuICAgICAgdXBkYXRlTGlnaHRTdHlsZShwbHVnaW4pO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gSW5kaXZpZHVhbCBsaWdodCBzdHlsZSBjb21tYW5kc1xuICBwbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgaWQ6IENPTU1BTkRfSURTLkxJR0hUX0RFRkFVTFQsXG4gICAgbmFtZTogJ1VzZSBsaWdodCBtb2RlIChkZWZhdWx0KScsXG4gICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgIHBsdWdpbi5zZXR0aW5ncy5saWdodFN0eWxlID0gJ294eWdlbi1saWdodCc7XG4gICAgICBwbHVnaW4uc2V0dGluZ3MubGlnaHRTY2hlbWUgPSAnb3h5Z2VuLW94eWdlbi1saWdodCc7XG4gICAgICB2b2lkIHBsdWdpbi5zYXZlRGF0YShwbHVnaW4uc2V0dGluZ3MpO1xuICAgICAgdXBkYXRlTGlnaHRTY2hlbWUocGx1Z2luKTtcbiAgICAgIHVwZGF0ZUxpZ2h0U3R5bGUocGx1Z2luKTtcbiAgICB9XG4gIH0pO1xuXG4gIHBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICBpZDogQ09NTUFORF9JRFMuTElHSFRfV0hJVEUsXG4gICAgbmFtZTogJ1VzZSBsaWdodCBtb2RlIChhbGwgd2hpdGUpJyxcbiAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgcGx1Z2luLnNldHRpbmdzLmxpZ2h0U3R5bGUgPSAnb3h5Z2VuLWxpZ2h0LXdoaXRlJztcbiAgICAgIHZvaWQgcGx1Z2luLnNhdmVEYXRhKHBsdWdpbi5zZXR0aW5ncyk7XG4gICAgICB1cGRhdGVMaWdodFN0eWxlKHBsdWdpbik7XG4gICAgfVxuICB9KTtcblxuICBwbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgaWQ6IENPTU1BTkRfSURTLkxJR0hUX1RPTkFMLFxuICAgIG5hbWU6ICdVc2UgbGlnaHQgbW9kZSAobG93IGNvbnRyYXN0KScsXG4gICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgIHBsdWdpbi5zZXR0aW5ncy5saWdodFN0eWxlID0gJ294eWdlbi1saWdodC10b25hbCc7XG4gICAgICB2b2lkIHBsdWdpbi5zYXZlRGF0YShwbHVnaW4uc2V0dGluZ3MpO1xuICAgICAgdXBkYXRlTGlnaHRTdHlsZShwbHVnaW4pO1xuICAgIH1cbiAgfSk7XG5cbiAgcGx1Z2luLmFkZENvbW1hbmQoe1xuICAgIGlkOiBDT01NQU5EX0lEUy5MSUdIVF9DT05UUkFTVCxcbiAgICBuYW1lOiAnVXNlIGxpZ2h0IG1vZGUgKGhpZ2ggY29udHJhc3QpJyxcbiAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgcGx1Z2luLnNldHRpbmdzLmxpZ2h0U3R5bGUgPSAnb3h5Z2VuLWxpZ2h0LWNvbnRyYXN0JztcbiAgICAgIHZvaWQgcGx1Z2luLnNhdmVEYXRhKHBsdWdpbi5zZXR0aW5ncyk7XG4gICAgICB1cGRhdGVMaWdodFN0eWxlKHBsdWdpbik7XG4gICAgfVxuICB9KTtcblxuICAvLyBJbmRpdmlkdWFsIGRhcmsgc3R5bGUgY29tbWFuZHNcbiAgcGx1Z2luLmFkZENvbW1hbmQoe1xuICAgIGlkOiBDT01NQU5EX0lEUy5EQVJLX0RFRkFVTFQsXG4gICAgbmFtZTogJ1VzZSBkYXJrIG1vZGUgKGRlZmF1bHQpJyxcbiAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgcGx1Z2luLnNldHRpbmdzLmRhcmtTdHlsZSA9ICdveHlnZW4tZGFyayc7XG4gICAgICBwbHVnaW4uc2V0dGluZ3MuZGFya1NjaGVtZSA9ICdveHlnZW4tb3h5Z2VuLWRhcmsnO1xuICAgICAgdm9pZCBwbHVnaW4uc2F2ZURhdGEocGx1Z2luLnNldHRpbmdzKTtcbiAgICAgIHVwZGF0ZURhcmtTY2hlbWUocGx1Z2luKTtcbiAgICAgIHVwZGF0ZURhcmtTdHlsZShwbHVnaW4pO1xuICAgIH1cbiAgfSk7XG5cbiAgcGx1Z2luLmFkZENvbW1hbmQoe1xuICAgIGlkOiBDT01NQU5EX0lEUy5EQVJLX1RPTkFMLFxuICAgIG5hbWU6ICdVc2UgZGFyayBtb2RlIChsb3cgY29udHJhc3QpJyxcbiAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgcGx1Z2luLnNldHRpbmdzLmRhcmtTdHlsZSA9ICdveHlnZW4tZGFyay10b25hbCc7XG4gICAgICB2b2lkIHBsdWdpbi5zYXZlRGF0YShwbHVnaW4uc2V0dGluZ3MpO1xuICAgICAgdXBkYXRlRGFya1N0eWxlKHBsdWdpbik7XG4gICAgfVxuICB9KTtcblxuICBwbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgaWQ6IENPTU1BTkRfSURTLkRBUktfQkxBQ0ssXG4gICAgbmFtZTogJ1VzZSBkYXJrIG1vZGUgKHRydWUgYmxhY2spJyxcbiAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgcGx1Z2luLnNldHRpbmdzLmRhcmtTdHlsZSA9ICdveHlnZW4tZGFyay1ibGFjayc7XG4gICAgICB2b2lkIHBsdWdpbi5zYXZlRGF0YShwbHVnaW4uc2V0dGluZ3MpO1xuICAgICAgdXBkYXRlRGFya1N0eWxlKHBsdWdpbik7XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlTGlnaHRTdHlsZShwbHVnaW46IFBsdWdpbkNvbnRleHQpOiB2b2lkIHtcbiAgLy8gT25seSBhcHBseSBzdHlsZXMgaWYgT3h5Z2VuIHRoZW1lIGlzIGFjdGl2ZVxuICBpZiAoIXBsdWdpbi5pc094eWdlblRoZW1lQWN0aXZlKCkpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgXG4gIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2xhc3MoXG4gICAgJ3RoZW1lLWRhcmsnLFxuICAgICdveHlnZW4tbGlnaHQnLFxuICAgICdveHlnZW4tbGlnaHQtdG9uYWwnLFxuICAgICdveHlnZW4tbGlnaHQtY29udHJhc3QnLFxuICAgICdveHlnZW4tbGlnaHQtd2hpdGUnXG4gICk7XG4gIGRvY3VtZW50LmJvZHkuYWRkQ2xhc3MoJ3RoZW1lLWxpZ2h0JywgcGx1Z2luLnNldHRpbmdzLmxpZ2h0U3R5bGUpO1xuICBcbiAgY29uc3QgdGhlbWUgPSBnZXRWYXVsdENvbmZpZyhwbHVnaW4uYXBwLCAndGhlbWUnKTtcbiAgaWYgKHRoZW1lICE9PSAnc3lzdGVtJykge1xuICAgIHNldFRoZW1lKHBsdWdpbi5hcHAsICdtb29uc3RvbmUnKTtcbiAgICBzZXRWYXVsdENvbmZpZyhwbHVnaW4uYXBwLCAndGhlbWUnLCAnbW9vbnN0b25lJyk7XG4gIH1cbiAgcGx1Z2luLmFwcC53b3Jrc3BhY2UudHJpZ2dlcignY3NzLWNoYW5nZScpO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVEYXJrU3R5bGUocGx1Z2luOiBQbHVnaW5Db250ZXh0KTogdm9pZCB7XG4gIC8vIE9ubHkgYXBwbHkgc3R5bGVzIGlmIE94eWdlbiB0aGVtZSBpcyBhY3RpdmVcbiAgaWYgKCFwbHVnaW4uaXNPeHlnZW5UaGVtZUFjdGl2ZSgpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIFxuICBkb2N1bWVudC5ib2R5LnJlbW92ZUNsYXNzKFxuICAgICd0aGVtZS1saWdodCcsXG4gICAgJ294eWdlbi1kYXJrJyxcbiAgICAnb3h5Z2VuLWRhcmstdG9uYWwnLFxuICAgICdveHlnZW4tZGFyay1ibGFjaydcbiAgKTtcbiAgZG9jdW1lbnQuYm9keS5hZGRDbGFzcygndGhlbWUtZGFyaycsIHBsdWdpbi5zZXR0aW5ncy5kYXJrU3R5bGUpO1xuICBcbiAgY29uc3QgdGhlbWUgPSBnZXRWYXVsdENvbmZpZyhwbHVnaW4uYXBwLCAndGhlbWUnKTtcbiAgaWYgKHRoZW1lICE9PSAnc3lzdGVtJykge1xuICAgIHNldFRoZW1lKHBsdWdpbi5hcHAsICdvYnNpZGlhbicpO1xuICAgIHNldFZhdWx0Q29uZmlnKHBsdWdpbi5hcHAsICd0aGVtZScsICdvYnNpZGlhbicpO1xuICB9XG4gIHBsdWdpbi5hcHAud29ya3NwYWNlLnRyaWdnZXIoJ2Nzcy1jaGFuZ2UnKTtcbn1cblxuIiwgIi8qKlxyXG4gKiBDdXN0b20gcHJlc2V0IGNvbW1hbmRzIChjcmVhdGUsIGltcG9ydCwgY3ljbGUpXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgUGx1Z2luQ29udGV4dCB9IGZyb20gJy4uL3R5cGVzJztcclxuaW1wb3J0IHsgQ09NTUFORF9JRFMgfSBmcm9tICcuLi9jb25zdGFudHMnO1xyXG5pbXBvcnQgeyBQcmVzZXRFZGl0b3JNb2RhbCB9IGZyb20gJy4uL21vZGFscy9QcmVzZXRFZGl0b3JNb2RhbCc7XHJcbmltcG9ydCB7IFByZXNldEltcG9ydE1vZGFsIH0gZnJvbSAnLi4vbW9kYWxzL1ByZXNldEltcG9ydE1vZGFsJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlclByZXNldENvbW1hbmRzKHBsdWdpbjogUGx1Z2luQ29udGV4dCk6IHZvaWQge1xyXG4gIHBsdWdpbi5hZGRDb21tYW5kKHtcclxuICAgIGlkOiBDT01NQU5EX0lEUy5DUkVBVEVfUFJFU0VULFxyXG4gICAgbmFtZTogJ0NyZWF0ZSBjdXN0b20gY29sb3IgcHJlc2V0JyxcclxuICAgIGNhbGxiYWNrOiAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1vZGFsID0gbmV3IFByZXNldEVkaXRvck1vZGFsKHBsdWdpbi5hcHAsIHBsdWdpbiwgbnVsbCwgKHByZXNldCkgPT4ge1xyXG4gICAgICAgIHBsdWdpbi5zZXR0aW5ncy5jdXN0b21QcmVzZXRzLnB1c2gocHJlc2V0KTtcclxuICAgICAgICB2b2lkIHBsdWdpbi5zYXZlRGF0YShwbHVnaW4uc2V0dGluZ3MpO1xyXG4gICAgICB9KTtcclxuICAgICAgbW9kYWwub3BlbigpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICBwbHVnaW4uYWRkQ29tbWFuZCh7XHJcbiAgICBpZDogQ09NTUFORF9JRFMuSU1QT1JUX1BSRVNFVCxcclxuICAgIG5hbWU6ICdJbXBvcnQgY3VzdG9tIGNvbG9yIHByZXNldCcsXHJcbiAgICBjYWxsYmFjazogKCkgPT4ge1xyXG4gICAgICBjb25zdCBtb2RhbCA9IG5ldyBQcmVzZXRJbXBvcnRNb2RhbChwbHVnaW4uYXBwLCBwbHVnaW4sIChwcmVzZXQpID0+IHtcclxuICAgICAgICBwbHVnaW4uc2V0dGluZ3MuY3VzdG9tUHJlc2V0cy5wdXNoKHByZXNldCk7XHJcbiAgICAgICAgdm9pZCBwbHVnaW4uc2F2ZURhdGEocGx1Z2luLnNldHRpbmdzKTtcclxuICAgICAgfSk7XHJcbiAgICAgIG1vZGFsLm9wZW4oKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgcGx1Z2luLmFkZENvbW1hbmQoe1xyXG4gICAgaWQ6IENPTU1BTkRfSURTLkNZQ0xFX1BSRVNFVFNfTElHSFQsXHJcbiAgICBuYW1lOiAnQ3ljbGUgdGhyb3VnaCBjdXN0b20gcHJlc2V0cyAobGlnaHQgbW9kZSknLFxyXG4gICAgY2FsbGJhY2s6ICgpID0+IHtcclxuICAgICAgaWYgKHBsdWdpbi5zZXR0aW5ncy5jdXN0b21QcmVzZXRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgY3VycmVudEluZGV4ID0gcGx1Z2luLnNldHRpbmdzLmN1c3RvbVByZXNldHMuZmluZEluZGV4KHAgPT4gXHJcbiAgICAgICAgcGx1Z2luLnNldHRpbmdzLmxpZ2h0U2NoZW1lID09PSBgb3h5Z2VuLWN1c3RvbS0ke3AuaWR9YFxyXG4gICAgICApO1xyXG4gICAgICBjb25zdCBuZXh0SW5kZXggPSAoY3VycmVudEluZGV4ICsgMSkgJSBwbHVnaW4uc2V0dGluZ3MuY3VzdG9tUHJlc2V0cy5sZW5ndGg7XHJcbiAgICAgIGNvbnN0IG5leHRQcmVzZXQgPSBwbHVnaW4uc2V0dGluZ3MuY3VzdG9tUHJlc2V0c1tuZXh0SW5kZXhdO1xyXG4gICAgICBcclxuICAgICAgcGx1Z2luLnNldHRpbmdzLmxpZ2h0U2NoZW1lID0gYG94eWdlbi1jdXN0b20tJHtuZXh0UHJlc2V0LmlkfWA7XHJcbiAgICAgIHZvaWQgcGx1Z2luLnNhdmVEYXRhKHBsdWdpbi5zZXR0aW5ncyk7XHJcbiAgICAgIHVwZGF0ZUxpZ2h0U2NoZW1lKHBsdWdpbik7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIHBsdWdpbi5hZGRDb21tYW5kKHtcclxuICAgIGlkOiBDT01NQU5EX0lEUy5DWUNMRV9QUkVTRVRTX0RBUkssXHJcbiAgICBuYW1lOiAnQ3ljbGUgdGhyb3VnaCBjdXN0b20gcHJlc2V0cyAoZGFyayBtb2RlKScsXHJcbiAgICBjYWxsYmFjazogKCkgPT4ge1xyXG4gICAgICBpZiAocGx1Z2luLnNldHRpbmdzLmN1c3RvbVByZXNldHMubGVuZ3RoID09PSAwKSByZXR1cm47XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBjdXJyZW50SW5kZXggPSBwbHVnaW4uc2V0dGluZ3MuY3VzdG9tUHJlc2V0cy5maW5kSW5kZXgocCA9PiBcclxuICAgICAgICBwbHVnaW4uc2V0dGluZ3MuZGFya1NjaGVtZSA9PT0gYG94eWdlbi1jdXN0b20tJHtwLmlkfWBcclxuICAgICAgKTtcclxuICAgICAgY29uc3QgbmV4dEluZGV4ID0gKGN1cnJlbnRJbmRleCArIDEpICUgcGx1Z2luLnNldHRpbmdzLmN1c3RvbVByZXNldHMubGVuZ3RoO1xyXG4gICAgICBjb25zdCBuZXh0UHJlc2V0ID0gcGx1Z2luLnNldHRpbmdzLmN1c3RvbVByZXNldHNbbmV4dEluZGV4XTtcclxuICAgICAgXHJcbiAgICAgIHBsdWdpbi5zZXR0aW5ncy5kYXJrU2NoZW1lID0gYG94eWdlbi1jdXN0b20tJHtuZXh0UHJlc2V0LmlkfWA7XHJcbiAgICAgIHZvaWQgcGx1Z2luLnNhdmVEYXRhKHBsdWdpbi5zZXR0aW5ncyk7XHJcbiAgICAgIHVwZGF0ZURhcmtTY2hlbWUocGx1Z2luKTtcclxuICAgIH1cclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gdXBkYXRlTGlnaHRTY2hlbWUocGx1Z2luOiBQbHVnaW5Db250ZXh0KTogdm9pZCB7XHJcbiAgcGx1Z2luLnVwZGF0ZUxpZ2h0U2NoZW1lKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZURhcmtTY2hlbWUocGx1Z2luOiBQbHVnaW5Db250ZXh0KTogdm9pZCB7XHJcbiAgcGx1Z2luLnVwZGF0ZURhcmtTY2hlbWUoKTtcclxufVxyXG5cclxuIiwgIi8qKlxuICogRmVhdHVyZSB0b2dnbGUgY29tbWFuZHMgKGJvcmRlcnMsIGhlYWRpbmdzLCBmb2N1cyBtb2RlLCBldGMuKVxuICovXG5cbmltcG9ydCB7IEFwcCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IFBsdWdpbkNvbnRleHQgfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgeyBDT01NQU5EX0lEUyB9IGZyb20gJy4uL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBnZXRWYXVsdENvbmZpZywgc2V0VGhlbWUsIHNldFZhdWx0Q29uZmlnIH0gZnJvbSAnLi4vdHlwZXMvb2JzaWRpYW4tZXh0ZW5zaW9ucyc7XG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlckZlYXR1cmVDb21tYW5kcyhwbHVnaW46IFBsdWdpbkNvbnRleHQpOiB2b2lkIHtcbiAgcGx1Z2luLmFkZENvbW1hbmQoe1xuICAgIGlkOiBDT01NQU5EX0lEUy5UT0dHTEVfQk9SREVSUyxcbiAgICBuYW1lOiAnVG9nZ2xlIHNpZGViYXIgYm9yZGVycycsXG4gICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgIC8vIEN5Y2xlIHRocm91Z2g6IGVuaGFuY2VkIC0+IGRlZmF1bHQgLT4gbm9uZSAtPiBlbmhhbmNlZFxuICAgICAgY29uc3QgY3VycmVudCA9IHBsdWdpbi5zZXR0aW5ncy53b3Jrc3BhY2VCb3JkZXJzO1xuICAgICAgaWYgKGN1cnJlbnQgPT09ICdlbmhhbmNlZCcpIHtcbiAgICAgICAgcGx1Z2luLnNldHRpbmdzLndvcmtzcGFjZUJvcmRlcnMgPSAnZGVmYXVsdCc7XG4gICAgICB9IGVsc2UgaWYgKGN1cnJlbnQgPT09ICdkZWZhdWx0Jykge1xuICAgICAgICBwbHVnaW4uc2V0dGluZ3Mud29ya3NwYWNlQm9yZGVycyA9ICdub25lJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBsdWdpbi5zZXR0aW5ncy53b3Jrc3BhY2VCb3JkZXJzID0gJ2VuaGFuY2VkJztcbiAgICAgIH1cbiAgICAgIHZvaWQgcGx1Z2luLnNhdmVEYXRhKHBsdWdpbi5zZXR0aW5ncyk7XG4gICAgICByZWZyZXNoKHBsdWdpbik7XG4gICAgfVxuICB9KTtcblxuICBwbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgaWQ6IENPTU1BTkRfSURTLlRPR0dMRV9DT0xPUkZVTF9IRUFESU5HUyxcbiAgICBuYW1lOiAnVG9nZ2xlIGNvbG9yZnVsIGhlYWRpbmdzJyxcbiAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgcGx1Z2luLnNldHRpbmdzLmNvbG9yZnVsSGVhZGluZ3MgPSAhcGx1Z2luLnNldHRpbmdzLmNvbG9yZnVsSGVhZGluZ3M7XG4gICAgICB2b2lkIHBsdWdpbi5zYXZlRGF0YShwbHVnaW4uc2V0dGluZ3MpO1xuICAgICAgcmVmcmVzaChwbHVnaW4pO1xuICAgIH1cbiAgfSk7XG5cbiAgcGx1Z2luLmFkZENvbW1hbmQoe1xuICAgIGlkOiBDT01NQU5EX0lEUy5UT0dHTEVfQ09MT1JGVUxfRlJBTUUsXG4gICAgbmFtZTogJ1RvZ2dsZSBjb2xvcmZ1bCB3aW5kb3cgZnJhbWUnLFxuICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICBwbHVnaW4uc2V0dGluZ3MuY29sb3JmdWxGcmFtZSA9ICFwbHVnaW4uc2V0dGluZ3MuY29sb3JmdWxGcmFtZTtcbiAgICAgIHZvaWQgcGx1Z2luLnNhdmVEYXRhKHBsdWdpbi5zZXR0aW5ncyk7XG4gICAgICByZWZyZXNoKHBsdWdpbik7XG4gICAgfVxuICB9KTtcblxuICBwbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgaWQ6IENPTU1BTkRfSURTLlRPR0dMRV9JTUFHRV9HUklELFxuICAgIG5hbWU6ICdUb2dnbGUgaW1hZ2UgZ3JpZHMnLFxuICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICBwbHVnaW4uc2V0dGluZ3MuaW1nR3JpZCA9ICFwbHVnaW4uc2V0dGluZ3MuaW1nR3JpZDtcbiAgICAgIHZvaWQgcGx1Z2luLnNhdmVEYXRhKHBsdWdpbi5zZXR0aW5ncyk7XG4gICAgICByZWZyZXNoKHBsdWdpbik7XG4gICAgfVxuICB9KTtcblxuICBwbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgaWQ6IENPTU1BTkRfSURTLlRPR0dMRV9USEVNRSxcbiAgICBuYW1lOiAnU3dpdGNoIGJldHdlZW4gbGlnaHQgYW5kIGRhcmsgbW9kZScsXG4gICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgIHVwZGF0ZVRoZW1lKHBsdWdpbik7XG4gICAgfVxuICB9KTtcblxuICBwbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgaWQ6IENPTU1BTkRfSURTLkRFVl9CTE9DS19XSURUSCxcbiAgICBuYW1lOiAnRGV2IFx1MjAxNCBzaG93IGJsb2NrIHdpZHRocycsXG4gICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgIHBsdWdpbi5zZXR0aW5ncy5kZXZCbG9ja1dpZHRoID0gIXBsdWdpbi5zZXR0aW5ncy5kZXZCbG9ja1dpZHRoO1xuICAgICAgdm9pZCBwbHVnaW4uc2F2ZURhdGEocGx1Z2luLnNldHRpbmdzKTtcbiAgICAgIHJlZnJlc2gocGx1Z2luKTtcbiAgICB9XG4gIH0pO1xuXG5cbiAgLy8gT3BlbiBzZXR0aW5ncyBjb21tYW5kXG4gIHBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICBpZDogQ09NTUFORF9JRFMuT1BFTl9TRVRUSU5HUyxcbiAgICBuYW1lOiAnT3BlbiBzZXR0aW5ncycsXG4gICAgaWNvbjogJ3NldHRpbmdzLTInLFxuICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAvLyBPcGVuIHNldHRpbmdzIGFuZCBuYXZpZ2F0ZSB0byB0aGlzIHBsdWdpbidzIHRhYlxuICAgICAgLy8gVXNpbmcgdHlwZS1zYWZlIGFjY2VzcyB0byBpbnRlcm5hbCBPYnNpZGlhbiBBUElcbiAgICAgIGNvbnN0IGFwcFdpdGhTZXR0aW5ncyA9IHBsdWdpbi5hcHAgYXMgQXBwICYge1xuICAgICAgICBzZXR0aW5nOiB7XG4gICAgICAgICAgb3BlbjogKCkgPT4gdm9pZDtcbiAgICAgICAgICBvcGVuVGFiQnlJZDogKGlkOiBzdHJpbmcpID0+IHZvaWQ7XG4gICAgICAgIH07XG4gICAgICB9O1xuICAgICAgYXBwV2l0aFNldHRpbmdzLnNldHRpbmcub3BlbigpO1xuICAgICAgYXBwV2l0aFNldHRpbmdzLnNldHRpbmcub3BlblRhYkJ5SWQocGx1Z2luLm1hbmlmZXN0LmlkKTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiByZWZyZXNoKHBsdWdpbjogUGx1Z2luQ29udGV4dCk6IHZvaWQge1xuICBwbHVnaW4udXBkYXRlU3R5bGUoKTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlVGhlbWUocGx1Z2luOiBQbHVnaW5Db250ZXh0KTogdm9pZCB7XG4gIC8vIE9ubHkgYXBwbHkgc3R5bGVzIGlmIE94eWdlbiB0aGVtZSBpcyBhY3RpdmVcbiAgaWYgKCFwbHVnaW4uaXNPeHlnZW5UaGVtZUFjdGl2ZSgpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIFxuICBjb25zdCB0aGVtZSA9IGdldFZhdWx0Q29uZmlnKHBsdWdpbi5hcHAsICd0aGVtZScpO1xuICBcbiAgaWYgKHRoZW1lID09PSAnc3lzdGVtJykge1xuICAgIGlmIChkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucygndGhlbWUtbGlnaHQnKSkge1xuICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDbGFzcygndGhlbWUtbGlnaHQnKTtcbiAgICAgIGRvY3VtZW50LmJvZHkuYWRkQ2xhc3MoJ3RoZW1lLWRhcmsnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDbGFzcygndGhlbWUtZGFyaycpO1xuICAgICAgZG9jdW1lbnQuYm9keS5hZGRDbGFzcygndGhlbWUtbGlnaHQnKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCd0aGVtZS1saWdodCcpKSB7XG4gICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNsYXNzKCd0aGVtZS1saWdodCcpO1xuICAgICAgZG9jdW1lbnQuYm9keS5hZGRDbGFzcygndGhlbWUtZGFyaycpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNsYXNzKCd0aGVtZS1kYXJrJyk7XG4gICAgICBkb2N1bWVudC5ib2R5LmFkZENsYXNzKCd0aGVtZS1saWdodCcpO1xuICAgIH1cblxuICAgIGNvbnN0IGN1cnJlbnRUaGVtZSA9IGdldFZhdWx0Q29uZmlnKHBsdWdpbi5hcHAsICd0aGVtZScpO1xuICAgIGNvbnN0IG5ld1RoZW1lID0gY3VycmVudFRoZW1lID09PSAnbW9vbnN0b25lJyA/ICdvYnNpZGlhbicgOiAnbW9vbnN0b25lJztcbiAgICBzZXRUaGVtZShwbHVnaW4uYXBwLCBuZXdUaGVtZSk7XG4gICAgc2V0VmF1bHRDb25maWcocGx1Z2luLmFwcCwgJ3RoZW1lJywgbmV3VGhlbWUpO1xuICB9XG4gIHBsdWdpbi5hcHAud29ya3NwYWNlLnRyaWdnZXIoJ2Nzcy1jaGFuZ2UnKTtcbn1cblxuIiwgIi8qKlxyXG4gKiBXaWR0aCBjeWNsaW5nIGNvbW1hbmRzIGZvciB0YWJsZXMsIGltYWdlcywgaWZyYW1lcywgY2hhcnRzLCBhbmQgbWFwc1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IFBsdWdpbkNvbnRleHQgfSBmcm9tICcuLi90eXBlcyc7XHJcbmltcG9ydCB7IFxyXG4gIENPTU1BTkRfSURTLCBcclxuICBUQUJMRV9XSURUSF9TVFlMRVMsIFxyXG4gIElNQUdFX1dJRFRIX1NUWUxFUywgXHJcbiAgSUZSQU1FX1dJRFRIX1NUWUxFUyxcclxuICBDSEFSVF9XSURUSF9TVFlMRVMsXHJcbiAgTUFQX1dJRFRIX1NUWUxFU1xyXG59IGZyb20gJy4uL2NvbnN0YW50cyc7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJXaWR0aENvbW1hbmRzKHBsdWdpbjogUGx1Z2luQ29udGV4dCk6IHZvaWQge1xyXG4gIHBsdWdpbi5hZGRDb21tYW5kKHtcclxuICAgIGlkOiBDT01NQU5EX0lEUy5DWUNMRV9UQUJMRV9XSURUSCxcclxuICAgIG5hbWU6ICdDeWNsZSBiZXR3ZWVuIHRhYmxlIHdpZHRoIG9wdGlvbnMnLFxyXG4gICAgY2FsbGJhY2s6ICgpID0+IHtcclxuICAgICAgY29uc3QgY3VycmVudEluZGV4ID0gKFRBQkxFX1dJRFRIX1NUWUxFUyBhcyByZWFkb25seSBzdHJpbmdbXSkuaW5kZXhPZihwbHVnaW4uc2V0dGluZ3MudGFibGVXaWR0aCk7XHJcbiAgICAgIGNvbnN0IG5leHRJbmRleCA9IChjdXJyZW50SW5kZXggKyAxKSAlIFRBQkxFX1dJRFRIX1NUWUxFUy5sZW5ndGg7XHJcbiAgICAgIHBsdWdpbi5zZXR0aW5ncy50YWJsZVdpZHRoID0gVEFCTEVfV0lEVEhfU1RZTEVTW25leHRJbmRleF07XHJcbiAgICAgIHZvaWQgcGx1Z2luLnNhdmVEYXRhKHBsdWdpbi5zZXR0aW5ncyk7XHJcbiAgICAgIHJlZnJlc2gocGx1Z2luKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgcGx1Z2luLmFkZENvbW1hbmQoe1xyXG4gICAgaWQ6IENPTU1BTkRfSURTLkNZQ0xFX0lNQUdFX1dJRFRILFxyXG4gICAgbmFtZTogJ0N5Y2xlIGJldHdlZW4gaW1hZ2Ugd2lkdGggb3B0aW9ucycsXHJcbiAgICBjYWxsYmFjazogKCkgPT4ge1xyXG4gICAgICBjb25zdCBjdXJyZW50SW5kZXggPSAoSU1BR0VfV0lEVEhfU1RZTEVTIGFzIHJlYWRvbmx5IHN0cmluZ1tdKS5pbmRleE9mKHBsdWdpbi5zZXR0aW5ncy5pbWdXaWR0aCk7XHJcbiAgICAgIGNvbnN0IG5leHRJbmRleCA9IChjdXJyZW50SW5kZXggKyAxKSAlIElNQUdFX1dJRFRIX1NUWUxFUy5sZW5ndGg7XHJcbiAgICAgIHBsdWdpbi5zZXR0aW5ncy5pbWdXaWR0aCA9IElNQUdFX1dJRFRIX1NUWUxFU1tuZXh0SW5kZXhdO1xyXG4gICAgICB2b2lkIHBsdWdpbi5zYXZlRGF0YShwbHVnaW4uc2V0dGluZ3MpO1xyXG4gICAgICByZWZyZXNoKHBsdWdpbik7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIHBsdWdpbi5hZGRDb21tYW5kKHtcclxuICAgIGlkOiBDT01NQU5EX0lEUy5DWUNMRV9JRlJBTUVfV0lEVEgsXHJcbiAgICBuYW1lOiAnQ3ljbGUgYmV0d2VlbiBpZnJhbWUgd2lkdGggb3B0aW9ucycsXHJcbiAgICBjYWxsYmFjazogKCkgPT4ge1xyXG4gICAgICBjb25zdCBjdXJyZW50SW5kZXggPSAoSUZSQU1FX1dJRFRIX1NUWUxFUyBhcyByZWFkb25seSBzdHJpbmdbXSkuaW5kZXhPZihwbHVnaW4uc2V0dGluZ3MuaWZyYW1lV2lkdGgpO1xyXG4gICAgICBjb25zdCBuZXh0SW5kZXggPSAoY3VycmVudEluZGV4ICsgMSkgJSBJRlJBTUVfV0lEVEhfU1RZTEVTLmxlbmd0aDtcclxuICAgICAgcGx1Z2luLnNldHRpbmdzLmlmcmFtZVdpZHRoID0gSUZSQU1FX1dJRFRIX1NUWUxFU1tuZXh0SW5kZXhdO1xyXG4gICAgICB2b2lkIHBsdWdpbi5zYXZlRGF0YShwbHVnaW4uc2V0dGluZ3MpO1xyXG4gICAgICByZWZyZXNoKHBsdWdpbik7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIHBsdWdpbi5hZGRDb21tYW5kKHtcclxuICAgIGlkOiBDT01NQU5EX0lEUy5DWUNMRV9DSEFSVF9XSURUSCxcclxuICAgIG5hbWU6ICdDeWNsZSBiZXR3ZWVuIGNoYXJ0IHdpZHRoIG9wdGlvbnMnLFxyXG4gICAgY2FsbGJhY2s6ICgpID0+IHtcclxuICAgICAgY29uc3QgY3VycmVudEluZGV4ID0gKENIQVJUX1dJRFRIX1NUWUxFUyBhcyByZWFkb25seSBzdHJpbmdbXSkuaW5kZXhPZihwbHVnaW4uc2V0dGluZ3MuY2hhcnRXaWR0aCk7XHJcbiAgICAgIGNvbnN0IG5leHRJbmRleCA9IChjdXJyZW50SW5kZXggKyAxKSAlIENIQVJUX1dJRFRIX1NUWUxFUy5sZW5ndGg7XHJcbiAgICAgIHBsdWdpbi5zZXR0aW5ncy5jaGFydFdpZHRoID0gQ0hBUlRfV0lEVEhfU1RZTEVTW25leHRJbmRleF07XHJcbiAgICAgIHZvaWQgcGx1Z2luLnNhdmVEYXRhKHBsdWdpbi5zZXR0aW5ncyk7XHJcbiAgICAgIHJlZnJlc2gocGx1Z2luKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgcGx1Z2luLmFkZENvbW1hbmQoe1xyXG4gICAgaWQ6IENPTU1BTkRfSURTLkNZQ0xFX01BUF9XSURUSCxcclxuICAgIG5hbWU6ICdDeWNsZSBiZXR3ZWVuIG1hcCB3aWR0aCBvcHRpb25zJyxcclxuICAgIGNhbGxiYWNrOiAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGN1cnJlbnRJbmRleCA9IChNQVBfV0lEVEhfU1RZTEVTIGFzIHJlYWRvbmx5IHN0cmluZ1tdKS5pbmRleE9mKHBsdWdpbi5zZXR0aW5ncy5tYXBXaWR0aCk7XHJcbiAgICAgIGNvbnN0IG5leHRJbmRleCA9IChjdXJyZW50SW5kZXggKyAxKSAlIE1BUF9XSURUSF9TVFlMRVMubGVuZ3RoO1xyXG4gICAgICBwbHVnaW4uc2V0dGluZ3MubWFwV2lkdGggPSBNQVBfV0lEVEhfU1RZTEVTW25leHRJbmRleF07XHJcbiAgICAgIHZvaWQgcGx1Z2luLnNhdmVEYXRhKHBsdWdpbi5zZXR0aW5ncyk7XHJcbiAgICAgIHJlZnJlc2gocGx1Z2luKTtcclxuICAgIH1cclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVmcmVzaChwbHVnaW46IFBsdWdpbkNvbnRleHQpOiB2b2lkIHtcclxuICBwbHVnaW4udXBkYXRlU3R5bGUoKTtcclxufVxyXG5cclxuIiwgIi8qKlxyXG4gKiBDZW50cmFsIGNvbW1hbmQgcmVnaXN0cmF0aW9uXHJcbiAqIEltcG9ydHMgYW5kIHJlZ2lzdGVycyBhbGwgY29tbWFuZCBtb2R1bGVzXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgUGx1Z2luQ29udGV4dCB9IGZyb20gJy4uL3R5cGVzJztcclxuaW1wb3J0IHsgcmVnaXN0ZXJGb250Q29tbWFuZHMgfSBmcm9tICcuL2ZvbnQtY29tbWFuZHMnO1xyXG5pbXBvcnQgeyByZWdpc3RlclN0eWxlQ29tbWFuZHMgfSBmcm9tICcuL3N0eWxlLWNvbW1hbmRzJztcclxuaW1wb3J0IHsgcmVnaXN0ZXJTY2hlbWVDb21tYW5kcyB9IGZyb20gJy4vc2NoZW1lLWNvbW1hbmRzJztcclxuaW1wb3J0IHsgcmVnaXN0ZXJQcmVzZXRDb21tYW5kcyB9IGZyb20gJy4vcHJlc2V0LWNvbW1hbmRzJztcclxuaW1wb3J0IHsgcmVnaXN0ZXJGZWF0dXJlQ29tbWFuZHMgfSBmcm9tICcuL2ZlYXR1cmUtY29tbWFuZHMnO1xyXG5pbXBvcnQgeyByZWdpc3RlcldpZHRoQ29tbWFuZHMgfSBmcm9tICcuL3dpZHRoLWNvbW1hbmRzJztcclxuXHJcbi8qKlxyXG4gKiBSZWdpc3RlciBhbGwgcGx1Z2luIGNvbW1hbmRzXHJcbiAqIENhbGwgdGhpcyBmcm9tIHRoZSBwbHVnaW4ncyBvbmxvYWQoKSBtZXRob2RcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlckFsbENvbW1hbmRzKHBsdWdpbjogUGx1Z2luQ29udGV4dCk6IHZvaWQge1xyXG4gIHJlZ2lzdGVyRm9udENvbW1hbmRzKHBsdWdpbik7XHJcbiAgcmVnaXN0ZXJTdHlsZUNvbW1hbmRzKHBsdWdpbik7XHJcbiAgcmVnaXN0ZXJTY2hlbWVDb21tYW5kcyhwbHVnaW4pO1xyXG4gIHJlZ2lzdGVyUHJlc2V0Q29tbWFuZHMocGx1Z2luKTtcclxuICByZWdpc3RlckZlYXR1cmVDb21tYW5kcyhwbHVnaW4pO1xyXG4gIHJlZ2lzdGVyV2lkdGhDb21tYW5kcyhwbHVnaW4pO1xyXG59XHJcblxyXG4iLCAiaW1wb3J0IHsgQXBwIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBNaW5pbWFsU2V0dGluZ3MgfSBmcm9tICcuLi9zZXR0aW5ncy9zZXR0aW5ncy1pbnRlcmZhY2UnO1xyXG5cclxuZXhwb3J0IGNsYXNzIE1pZ3JhdGlvblJ1bm5lciB7XHJcbiAgICBwcml2YXRlIGFwcDogQXBwO1xyXG4gICAgcHJpdmF0ZSBzZXR0aW5nczogTWluaW1hbFNldHRpbmdzO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBzZXR0aW5nczogTWluaW1hbFNldHRpbmdzKSB7XHJcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBydW4oKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgICAgbGV0IG1pZ3JhdGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgIC8vIDEuIE1pZ3JhdGlvbiBmb3IgbWluaW1hbC0gdG8gb3h5Z2VuLSBwcmVmaXggKHJ1biBvbmNlIHBlciB1c2VyKVxyXG4gICAgICAgIGNvbnN0IG1pZ3JhdGlvblZlcnNpb24gPSAnbWluaW1hbC10by1veHlnZW4tcHJlZml4LXYxJztcclxuICAgICAgICBpZiAoIXRoaXMuc2V0dGluZ3MuX21pZ3JhdGlvblZlcnNpb25zIHx8ICF0aGlzLnNldHRpbmdzLl9taWdyYXRpb25WZXJzaW9ucy5pbmNsdWRlcyhtaWdyYXRpb25WZXJzaW9uKSkge1xyXG4gICAgICAgICAgICBsZXQgcHJlZml4TWlncmF0ZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIC8vIE1pZ3JhdGUgc3R5bGUgc2V0dGluZ3NcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MubGlnaHRTdHlsZSAmJiB0aGlzLnNldHRpbmdzLmxpZ2h0U3R5bGUuc3RhcnRzV2l0aCgnbWluaW1hbC0nKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5saWdodFN0eWxlID0gdGhpcy5zZXR0aW5ncy5saWdodFN0eWxlLnJlcGxhY2UoL15taW5pbWFsLS8sICdveHlnZW4tJyk7XHJcbiAgICAgICAgICAgICAgICBwcmVmaXhNaWdyYXRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZGFya1N0eWxlICYmIHRoaXMuc2V0dGluZ3MuZGFya1N0eWxlLnN0YXJ0c1dpdGgoJ21pbmltYWwtJykpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuZGFya1N0eWxlID0gdGhpcy5zZXR0aW5ncy5kYXJrU3R5bGUucmVwbGFjZSgvXm1pbmltYWwtLywgJ294eWdlbi0nKTtcclxuICAgICAgICAgICAgICAgIHByZWZpeE1pZ3JhdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gTWlncmF0ZSBjb2xvciBzY2hlbWUgc2V0dGluZ3NcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MubGlnaHRTY2hlbWUgJiYgdGhpcy5zZXR0aW5ncy5saWdodFNjaGVtZS5zdGFydHNXaXRoKCdtaW5pbWFsLScpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLmxpZ2h0U2NoZW1lID0gdGhpcy5zZXR0aW5ncy5saWdodFNjaGVtZS5yZXBsYWNlKC9ebWluaW1hbC0vLCAnb3h5Z2VuLScpO1xyXG4gICAgICAgICAgICAgICAgcHJlZml4TWlncmF0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmRhcmtTY2hlbWUgJiYgdGhpcy5zZXR0aW5ncy5kYXJrU2NoZW1lLnN0YXJ0c1dpdGgoJ21pbmltYWwtJykpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuZGFya1NjaGVtZSA9IHRoaXMuc2V0dGluZ3MuZGFya1NjaGVtZS5yZXBsYWNlKC9ebWluaW1hbC0vLCAnb3h5Z2VuLScpO1xyXG4gICAgICAgICAgICAgICAgcHJlZml4TWlncmF0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBNYXJrIG1pZ3JhdGlvbiBhcyBjb21wbGV0ZVxyXG4gICAgICAgICAgICBpZiAocHJlZml4TWlncmF0ZWQpIHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5fbWlncmF0aW9uVmVyc2lvbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLl9taWdyYXRpb25WZXJzaW9ucyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5fbWlncmF0aW9uVmVyc2lvbnMucHVzaChtaWdyYXRpb25WZXJzaW9uKTtcclxuICAgICAgICAgICAgICAgIG1pZ3JhdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoJ1tPeHlnZW4gU2V0dGluZ3NdIE1pZ3JhdGVkIHNldHRpbmdzIGZyb20gbWluaW1hbC0gdG8gb3h5Z2VuLSBwcmVmaXgnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gMi4gTWlncmF0aW9uIGZvciByZW5hbWVkIGRlZmF1bHQgc2NoZW1lc1xyXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmxpZ2h0U2NoZW1lID09PSAnbWluaW1hbC1kZWZhdWx0LWxpZ2h0Jykge1xyXG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLmxpZ2h0U2NoZW1lID0gJ294eWdlbi1taW5pbWFsLWxpZ2h0JztcclxuICAgICAgICAgICAgbWlncmF0ZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5kYXJrU2NoZW1lID09PSAnbWluaW1hbC1kZWZhdWx0LWRhcmsnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuZGFya1NjaGVtZSA9ICdveHlnZW4tbWluaW1hbC1kYXJrJztcclxuICAgICAgICAgICAgbWlncmF0ZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gMy4gTWlncmF0aW9uIGZvciB3b3Jrc3BhY2UgYm9yZGVyczogY29udmVydCBvbGQgYm9yZGVyc1RvZ2dsZSArIHdvcmtzcGFjZUJvcmRlcnNFbmhhbmNlZCB0byBuZXcgd29ya3NwYWNlQm9yZGVycyBkcm9wZG93blxyXG4gICAgICAgIC8vIE5vdGU6IFdlIG5lZWQgdGhlIHJhdyBsb2FkZWQgZGF0YSBpZiB3ZSB3YW50IHRvIGNoZWNrIGZvciB0aGUgYWJzZW5jZSBvZiB3b3Jrc3BhY2VCb3JkZXJzXHJcbiAgICAgICAgLy8gYnV0IHRoZSBjdXJyZW50IGxvZ2ljIGluIG1haW4udHMgdXNlcyB0aGlzLnNldHRpbmdzLiBTaW5jZSB3ZSBhcmUgcmVmYWN0b3JpbmcsIHdlJ2xsIGZvbGxvdyB0aGUgbG9naWMuXHJcbiAgICAgICAgLy8gSG93ZXZlciwgbG9va2luZyBhdCBvcmlnaW5hbCBtYWluLnRzLCBpdCB1c2VzIGxvYWRlZERhdGEgdG8gY2hlY2sgaWYgd29ya3NwYWNlQm9yZGVycyBpcyB1bmRlZmluZWQuXHJcbiAgICAgICAgLy8gTGV0J3MgYWRqdXN0IHRoZSBydW5uZXIgdG8gYWNjZXB0IGxvYWRlZERhdGEgb3IgaGFuZGxlIGl0LlxyXG5cclxuICAgICAgICAvLyA0LiBNaWdyYXRpb24gZm9yIGFuaW1hdGlvbiBwZXJzb25hbGl0eTogY29udmVydCAncmVmaW5lZCcgdG8gJ2RlZmF1bHQnXHJcbiAgICAgICAgaWYgKCh0aGlzLnNldHRpbmdzLmFuaW1hdGlvblBlcnNvbmFsaXR5IGFzIGFueSkgPT09ICdyZWZpbmVkJykge1xyXG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLmFuaW1hdGlvblBlcnNvbmFsaXR5ID0gJ2RlZmF1bHQnO1xyXG4gICAgICAgICAgICBtaWdyYXRlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbWlncmF0ZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTcGVjaWZpY2FsbHkgaGFuZGxlcyB0aGUgd29ya3NwYWNlIGJvcmRlcnMgbWlncmF0aW9uIHdoaWNoIHJlcXVpcmVzIGNoZWNraW5nIGlmIGEgdmFsdWUgd2FzIHByZXZpb3VzbHkgc2V0LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgbWlncmF0ZVdvcmtzcGFjZUJvcmRlcnMobG9hZGVkRGF0YTogYW55KTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKGxvYWRlZERhdGEgJiYgdHlwZW9mIGxvYWRlZERhdGEgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxlZ2FjeURhdGEgPSBsb2FkZWREYXRhIGFzIHsgYm9yZGVyc1RvZ2dsZT86IGJvb2xlYW47IHdvcmtzcGFjZUJvcmRlcnNFbmhhbmNlZD86IGJvb2xlYW47IHdvcmtzcGFjZUJvcmRlcnM/OiBzdHJpbmcgfTtcclxuICAgICAgICAgICAgaWYgKGxlZ2FjeURhdGEuYm9yZGVyc1RvZ2dsZSAhPT0gdW5kZWZpbmVkIHx8IGxlZ2FjeURhdGEud29ya3NwYWNlQm9yZGVyc0VuaGFuY2VkICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChsZWdhY3lEYXRhLndvcmtzcGFjZUJvcmRlcnMgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsZWdhY3lEYXRhLmJvcmRlcnNUb2dnbGUgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3Mud29ya3NwYWNlQm9yZGVycyA9ICdub25lJztcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxlZ2FjeURhdGEud29ya3NwYWNlQm9yZGVyc0VuaGFuY2VkID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3Mud29ya3NwYWNlQm9yZGVycyA9ICdlbmhhbmNlZCc7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy53b3Jrc3BhY2VCb3JkZXJzID0gJ2RlZmF1bHQnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUtBLElBQUFBLG1CQUF1Qjs7O0FDaURoQixJQUFNLG1CQUFvQztBQUFBLEVBQy9DLFlBQVk7QUFBQSxFQUNaLFdBQVc7QUFBQSxFQUNYLGFBQWE7QUFBQSxFQUNiLFlBQVk7QUFBQSxFQUNaLFlBQVk7QUFBQSxFQUNaLFlBQVk7QUFBQSxFQUNaLFdBQVc7QUFBQSxFQUNYLGVBQWU7QUFBQSxFQUNmLFVBQVU7QUFBQSxFQUNWLFlBQVk7QUFBQSxFQUNaLFdBQVc7QUFBQSxFQUNYLFNBQVM7QUFBQSxFQUNULFVBQVU7QUFBQSxFQUNWLFlBQVk7QUFBQSxFQUNaLGFBQWE7QUFBQSxFQUNiLFVBQVU7QUFBQSxFQUNWLFlBQVk7QUFBQSxFQUNaLGtCQUFrQjtBQUFBLEVBQ2xCLGVBQWU7QUFBQSxFQUNmLHNCQUFzQjtBQUFBLEVBQ3RCLFdBQVc7QUFBQSxFQUNYLFlBQVk7QUFBQSxFQUNaLGdCQUFnQjtBQUFBLEVBQ2hCLGtCQUFrQjtBQUFBLEVBQ2xCLGVBQWU7QUFBQSxFQUNmLG1CQUFtQjtBQUFBLEVBQ25CLG1CQUFtQjtBQUFBLEVBQ25CLFNBQVM7QUFBQSxFQUNULGFBQWE7QUFBQSxFQUNiLG9CQUFvQjtBQUFBLEVBQ3BCLGVBQWU7QUFBQSxFQUNmLGVBQWUsQ0FBQztBQUFBLEVBQ2hCLHFCQUFx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Q2pDO0FBQ0EsUUFBSSxLQUFLLFNBQVMsd0JBQXdCLFFBQVc7QUFDbkQsV0FBSyxTQUFTLHNCQUFzQjtBQUFBLElBQ3RDO0FBR0EsUUFBSSxDQUFDLEtBQUssU0FBUyxzQkFBc0I7QUFDdkMsV0FBSyxTQUFTLHVCQUF1QjtBQUFBLElBQ3ZDO0FBRUEsUUFBSSxVQUFVO0FBQ1osWUFBTSxLQUFLLGFBQWE7QUFBQSxJQUMxQjtBQUFBLEVBQ0Y7QUFBQSxFQUVBLE1BQU0sZUFBZTtBQUNuQixVQUFNLEtBQUssU0FBUyxLQUFLLFFBQVE7QUFBQSxFQUNuQztBQUFBO0FBQUEsRUFHQSxVQUFnQjtBQUNkLFNBQUssYUFBYSxRQUFRO0FBQUEsRUFDNUI7QUFBQSxFQUVBLGNBQW9CO0FBQ2xCLFNBQUssYUFBYSxZQUFZO0FBQUEsRUFDaEM7QUFBQSxFQUVBLG1CQUF5QjtBQUN2QixTQUFLLGFBQWEsaUJBQWlCO0FBQUEsRUFDckM7QUFBQSxFQUVBLGtCQUF3QjtBQUN0QixTQUFLLGFBQWEsZ0JBQWdCO0FBQUEsRUFDcEM7QUFBQSxFQUVBLG9CQUEwQjtBQUN4QixTQUFLLGFBQWEsa0JBQWtCO0FBQUEsRUFDdEM7QUFBQSxFQUVBLG1CQUF5QjtBQUN2QixTQUFLLGFBQWEsaUJBQWlCO0FBQUEsRUFDckM7QUFBQSxFQUVBLHdCQUE4QjtBQUM1QixTQUFLLGFBQWEsc0JBQXNCO0FBQUEsRUFDMUM7QUFBQSxFQUVBLGNBQW9CO0FBQ2xCLFNBQUssb0JBQW9CLFlBQVk7QUFBQSxFQUN2QztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFNQSxzQkFBK0I7QUFDN0IsV0FBTyxLQUFLO0FBQUEsRUFDZDtBQUNGOyIsCiAgIm5hbWVzIjogWyJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJwIiwgInEiLCAiciIsICJnIiwgImIiLCAiaW1wb3J0X29ic2lkaWFuIiwgInVwZGF0ZURhcmtTdHlsZSIsICJ1cGRhdGVMaWdodFN0eWxlIiwgInVwZGF0ZUxpZ2h0U2NoZW1lIiwgInVwZGF0ZURhcmtTY2hlbWUiLCAicmVmcmVzaCJdCn0K
