/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __esm = (fn, res) => function __init() {
  return fn && (res = (0, fn[__getOwnPropNames(fn)[0]])(fn = 0)), res;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/modals/ConfirmModal.ts
var ConfirmModal_exports = {};
__export(ConfirmModal_exports, {
  ConfirmModal: () => ConfirmModal,
  openConfirmModal: () => openConfirmModal
});
function openConfirmModal(app, title, message, confirmText = "Confirm", cancelText = "Cancel") {
  const modal = new ConfirmModal(app, title, message, confirmText, cancelText);
  return modal.openAndAwaitResult();
}
var import_obsidian15, ConfirmModal;
var init_ConfirmModal = __esm({
  "src/modals/ConfirmModal.ts"() {
    import_obsidian15 = require("obsidian");
    ConfirmModal = class extends import_obsidian15.Modal {
      constructor(app, title, message, confirmText = "Confirm", cancelText = "Cancel") {
        super(app);
        this.title = title;
        this.message = message;
        this.confirmText = confirmText;
        this.cancelText = cancelText;
      }
      onOpen() {
        const { contentEl, titleEl } = this;
        titleEl.setText(this.title);
        const messageEl = contentEl.createDiv({ cls: "image-manager-confirm-message" });
        messageEl.createEl("p", { text: this.message });
        const buttonContainer = contentEl.createDiv({ cls: "image-manager-confirm-buttons" });
        buttonContainer.createEl("button", {
          text: this.confirmText,
          cls: "mod-cta"
        }).addEventListener("click", () => {
          this.resolve({ confirmed: true });
          this.close();
        });
        buttonContainer.createEl("button", {
          text: this.cancelText
        }).addEventListener("click", () => {
          this.resolve({ confirmed: false });
          this.close();
        });
        setTimeout(() => {
          const confirmButton = buttonContainer.querySelector(".mod-cta");
          confirmButton == null ? void 0 : confirmButton.focus();
        }, 50);
      }
      onClose() {
        const { contentEl } = this;
        contentEl.empty();
      }
      openAndAwaitResult() {
        return new Promise((resolve) => {
          this.resolve = resolve;
          this.open();
        });
      }
    };
  }
});

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => ImageManagerPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian16 = require("obsidian");

// src/settings.ts
var import_obsidian2 = require("obsidian");

// src/utils/settings-compat.ts
var import_obsidian = require("obsidian");
var ObsidianModule = __toESM(require("obsidian"), 1);
function createSettingsGroup(containerEl, heading, manifestId) {
  if ((0, import_obsidian.requireApiVersion)("1.11.0")) {
    const SettingGroupClass = ObsidianModule.SettingGroup;
    if (SettingGroupClass) {
      const group = heading ? new SettingGroupClass(containerEl).setHeading(heading) : new SettingGroupClass(containerEl);
      return {
        addSetting(cb) {
          group.addSetting(cb);
        }
      };
    }
  }
  if (manifestId) {
    containerEl.addClass(`${manifestId}-settings-compat`);
  }
  {
    if (heading) {
      const headingEl = containerEl.createDiv("setting-group-heading");
      headingEl.createEl("h3", { text: heading });
    }
    return {
      addSetting(cb) {
        const setting = new import_obsidian.Setting(containerEl);
        cb(setting);
      }
    };
  }
}

// src/types.ts
var DEFAULT_BANNER_DEVICE_SETTINGS = {
  ["desktop" /* Desktop */]: {
    enabled: true,
    height: 240,
    viewOffset: 0,
    noteOffset: -32,
    bannerRadiusEnabled: false,
    borderRadius: [8, 8, 8, 8],
    padding: 8,
    fade: true,
    animation: false,
    iconEnabled: false,
    iconSize: 96,
    iconRadius: 8,
    iconBackground: true,
    iconBorder: 2,
    iconFrame: true,
    iconAlignmentH: "flex-start",
    iconAlignmentV: "flex-end",
    iconOffsetX: 0,
    iconOffsetY: -24
  },
  ["tablet" /* Tablet */]: {
    enabled: true,
    height: 190,
    viewOffset: 0,
    noteOffset: -32,
    bannerRadiusEnabled: false,
    borderRadius: [8, 8, 8, 8],
    padding: 8,
    fade: true,
    animation: false,
    iconEnabled: false,
    iconSize: 96,
    iconRadius: 8,
    iconBackground: true,
    iconBorder: 2,
    iconFrame: true,
    iconAlignmentH: "flex-start",
    iconAlignmentV: "flex-end",
    iconOffsetX: 0,
    iconOffsetY: -24
  },
  ["phone" /* Phone */]: {
    enabled: true,
    height: 160,
    viewOffset: 0,
    noteOffset: -32,
    bannerRadiusEnabled: false,
    borderRadius: [8, 8, 8, 8],
    padding: 8,
    fade: true,
    animation: false,
    iconEnabled: false,
    iconSize: 56,
    iconRadius: 8,
    iconBackground: true,
    iconBorder: 2,
    iconFrame: true,
    iconAlignmentH: "flex-start",
    iconAlignmentV: "flex-end",
    iconOffsetX: 0,
    iconOffsetY: -24
  }
};
var DEFAULT_BANNER_SETTINGS = {
  properties: {
    imageProperty: "banner",
    iconProperty: "icon",
    hidePropertyEnabled: false,
    hideProperty: ""
  },
  desktop: { ...DEFAULT_BANNER_DEVICE_SETTINGS["desktop" /* Desktop */] },
  tablet: { ...DEFAULT_BANNER_DEVICE_SETTINGS["tablet" /* Tablet */] },
  phone: { ...DEFAULT_BANNER_DEVICE_SETTINGS["phone" /* Phone */] }
};
var DEFAULT_SETTINGS = {
  // General Settings
  enableRenameOnPaste: true,
  enableRenameOnDrop: true,
  imageNameTemplate: "",
  attachmentLocation: "obsidian" /* ObsidianDefault */,
  customAttachmentPath: "./assets",
  // Image Services
  defaultProvider: "unsplash" /* Unsplash */,
  unsplashProxyServer: "",
  pexelsApiKey: "",
  pexelsApiKeySecretId: "",
  pixabayApiKey: "",
  pixabayApiKeySecretId: "",
  defaultOrientation: "any" /* Any */,
  defaultImageSize: "large" /* Large */,
  // Property Insertion
  enablePropertyPaste: true,
  propertyLinkFormat: "obsidian" /* ObsidianDefault */,
  customPropertyLinkFormat: "{image-url}",
  defaultPropertyName: "banner",
  defaultIconPropertyName: "icon",
  altTextProperty: "",
  // Conversion
  autoConvertRemoteImages: false,
  convertOnNoteOpen: false,
  convertOnNoteSave: false,
  processBackgroundChanges: true,
  // Rename Options
  showRenameDialog: true,
  autoRename: false,
  dupNumberDelimiter: "-",
  dupNumberAtStart: false,
  disableRenameNotice: false,
  enableDescriptiveImages: false,
  // Image Insertion Options (remote image attribution options)
  insertSize: "",
  // Empty = no size specified
  insertReferral: true,
  // Default to true (attribution)
  insertBackLink: false,
  // Default to false
  appendReferral: false,
  // Default to false
  // Banner Settings
  banner: { ...DEFAULT_BANNER_SETTINGS },
  // Advanced
  supportedExtensions: ["md", "mdx"],
  debugMode: false
};

// src/settings.ts
var ImageManagerSettingTab = class extends import_obsidian2.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.icon = "lucide-image-down";
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    this.renderGeneralSettings(containerEl);
    this.renderImageServicesSettings(containerEl);
    this.renderPropertySettings(containerEl);
    this.renderConversionSettings(containerEl);
    this.renderRenameSettings(containerEl);
    this.renderBannerSettings(containerEl);
    this.renderAdvancedSettings(containerEl);
  }
  renderGeneralSettings(containerEl) {
    const group = createSettingsGroup(containerEl, void 0, "image-manager");
    group.addSetting((setting) => {
      setting.setName("Image name template").setDesc("Template for generated image names. Variables: {{fileName}}, {{dirName}}, {{DATE:YYYY-MM-DD}}, {{TIME:HH-mm-ss}}").addText((text) => {
        text.setPlaceholder("{{fileName}}").setValue(this.plugin.settings.imageNameTemplate).onChange(async (value) => {
          this.plugin.settings.imageNameTemplate = value;
          await this.plugin.saveSettings();
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("Attachment location").setDesc("Where to save inserted images").addDropdown((dropdown) => {
        dropdown.addOption("obsidian" /* ObsidianDefault */, "Use Obsidian's settings").addOption("same" /* SameFolder */, "Same folder as note").addOption("subfolder" /* Subfolder */, "Subfolder (configure below)").addOption("vault" /* VaultFolder */, "Vault folder (configure below)").setValue(this.plugin.settings.attachmentLocation).onChange(async (value) => {
          this.plugin.settings.attachmentLocation = value;
          await this.plugin.saveSettings();
          const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
          const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
          this.display();
          requestAnimationFrame(() => {
            if (scrollContainer) {
              scrollContainer.scrollTop = scrollTop;
            }
          });
        });
      });
    });
    if (this.plugin.settings.attachmentLocation !== "obsidian" /* ObsidianDefault */ && this.plugin.settings.attachmentLocation !== "same" /* SameFolder */) {
      group.addSetting((setting) => {
        setting.setName("Custom attachment path").setDesc('Path for attachments. Use "./" for relative to note, or "/" for vault root.').addText((text) => {
          text.setPlaceholder("./assets").setValue(this.plugin.settings.customAttachmentPath).onChange(async (value) => {
            this.plugin.settings.customAttachmentPath = value;
            await this.plugin.saveSettings();
          });
        });
      });
    }
  }
  renderImageServicesSettings(containerEl) {
    const group = createSettingsGroup(containerEl, "Image services", "image-manager");
    group.addSetting((setting) => {
      setting.setName("Default provider").setDesc("Default image provider for search").addDropdown((dropdown) => {
        dropdown.addOption("unsplash" /* Unsplash */, "Unsplash").addOption("pexels" /* Pexels */, "Pexels").addOption("pixabay" /* Pixabay */, "Pixabay").addOption("local" /* Local */, "Local files").setValue(this.plugin.settings.defaultProvider).onChange(async (value) => {
          this.plugin.settings.defaultProvider = value;
          await this.plugin.saveSettings();
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("Default orientation").setDesc("Filter images by orientation").addDropdown((dropdown) => {
        dropdown.addOption("any" /* Any */, "Any").addOption("landscape" /* Landscape */, "Landscape").addOption("portrait" /* Portrait */, "Portrait").addOption("square" /* Square */, "Square").setValue(this.plugin.settings.defaultOrientation).onChange(async (value) => {
          this.plugin.settings.defaultOrientation = value;
          await this.plugin.saveSettings();
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("Default image size").setDesc("Preferred size when downloading images").addDropdown((dropdown) => {
        dropdown.addOption("original" /* Original */, "Original").addOption("large" /* Large */, "Large").addOption("medium" /* Medium */, "Medium").addOption("small" /* Small */, "Small").setValue(this.plugin.settings.defaultImageSize).onChange(async (value) => {
          this.plugin.settings.defaultImageSize = value;
          await this.plugin.saveSettings();
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("Unsplash proxy server").setDesc("Optional proxy server (leave empty to use built-in)").addText((text) => {
        text.setPlaceholder("https://your-proxy.com/").setValue(this.plugin.settings.unsplashProxyServer).onChange(async (value) => {
          this.plugin.settings.unsplashProxyServer = value;
          await this.plugin.saveSettings();
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("Pexels API key");
      if ((0, import_obsidian2.requireApiVersion)("1.11.4")) {
        setting.setDesc("Choose a secret that contains your Pexels API key.").addComponent((el) => {
          const obsidian = require("obsidian");
          const SecretComponent = obsidian.SecretComponent;
          const component = new SecretComponent(this.app, el);
          component.setValue(this.plugin.settings.pexelsApiKeySecretId);
          component.onChange((value) => {
            void (async () => {
              this.plugin.settings.pexelsApiKeySecretId = value;
              await this.plugin.saveSettings();
            })();
          });
          return component;
        });
      } else {
        setting.setDesc("Get your API key from https://www.pexels.com/api/new/").addText((text) => {
          text.setPlaceholder("Pexels API key").setValue(this.plugin.settings.pexelsApiKey).onChange(async (value) => {
            this.plugin.settings.pexelsApiKey = value;
            await this.plugin.saveSettings();
          });
        });
      }
    });
    group.addSetting((setting) => {
      setting.setName("Pixabay API key");
      if ((0, import_obsidian2.requireApiVersion)("1.11.4")) {
        setting.setDesc("Choose a secret that contains your Pixabay API key.").addComponent((el) => {
          const obsidian = require("obsidian");
          const SecretComponent = obsidian.SecretComponent;
          const component = new SecretComponent(this.app, el);
          component.setValue(this.plugin.settings.pixabayApiKeySecretId);
          component.onChange((value) => {
            void (async () => {
              this.plugin.settings.pixabayApiKeySecretId = value;
              await this.plugin.saveSettings();
            })();
          });
          return component;
        });
      } else {
        setting.setDesc("Get your API key from https://pixabay.com/api/docs/").addText((text) => {
          text.setPlaceholder("Pixabay API key").setValue(this.plugin.settings.pixabayApiKey).onChange(async (value) => {
            this.plugin.settings.pixabayApiKey = value;
            await this.plugin.saveSettings();
          });
        });
      }
    });
    group.addSetting((setting) => {
      setting.setName("Insert size").setDesc('Set the size of the image when inserting. Format could be only the width "200" or the width and height "200x100". Leave empty for no size.').addText((text) => {
        text.setPlaceholder("200 or 200x100").setValue(this.plugin.settings.insertSize).onChange(async (value) => {
          this.plugin.settings.insertSize = value;
          await this.plugin.saveSettings();
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("Insert referral").setDesc("Insert the reference text").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.insertReferral).onChange(async (value) => {
          this.plugin.settings.insertReferral = value;
          await this.plugin.saveSettings();
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("Insert backlink").setDesc("Insert a backlink in front of the reference text").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.insertBackLink).onChange(async (value) => {
          this.plugin.settings.insertBackLink = value;
          await this.plugin.saveSettings();
        });
      });
    });
  }
  renderPropertySettings(containerEl) {
    const group = createSettingsGroup(containerEl, "Property insertion", "image-manager");
    group.addSetting((setting) => {
      setting.setName("Enable paste into properties").setDesc("Allow pasting images directly into properties").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.enablePropertyPaste).onChange(async (value) => {
          this.plugin.settings.enablePropertyPaste = value;
          await this.plugin.saveSettings();
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("Property link format").setDesc("How to format the image link in properties").addDropdown((dropdown) => {
        dropdown.addOption("obsidian" /* ObsidianDefault */, "Use Obsidian's settings").addOption("path" /* Path */, "Plain path (path/to/image.jpg)").addOption("relative" /* RelativePath */, "Relative path (./image.jpg)").addOption("wikilink" /* Wikilink */, "Wikilink ([[path/to/image.jpg]])").addOption("markdown" /* Markdown */, "Markdown (![](path/to/image.jpg))").addOption("custom" /* Custom */, "Custom format").setValue(this.plugin.settings.propertyLinkFormat).onChange(async (value) => {
          this.plugin.settings.propertyLinkFormat = value;
          await this.plugin.saveSettings();
          const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
          const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
          this.display();
          requestAnimationFrame(() => {
            if (scrollContainer) {
              scrollContainer.scrollTop = scrollTop;
            }
          });
        });
      });
    });
    if (this.plugin.settings.propertyLinkFormat === "custom" /* Custom */) {
      group.addSetting((setting) => {
        setting.setName("Custom format template").setDesc("Use {image-url} as placeholder for the image path").addText((text) => {
          text.setPlaceholder("{image-url}").setValue(this.plugin.settings.customPropertyLinkFormat).onChange(async (value) => {
            this.plugin.settings.customPropertyLinkFormat = value;
            await this.plugin.saveSettings();
          });
        });
      });
    }
    group.addSetting((setting) => {
      setting.setName("Default property name").setDesc("Default property name when inserting to properties via command").addText((text) => {
        text.setPlaceholder("Banner").setValue(this.plugin.settings.defaultPropertyName).onChange(async (value) => {
          this.plugin.settings.defaultPropertyName = value;
          await this.plugin.saveSettings();
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("Default icon property name").setDesc("Default property name when inserting to icon property via command").addText((text) => {
        text.setPlaceholder("Icon").setValue(this.plugin.settings.defaultIconPropertyName).onChange(async (value) => {
          this.plugin.settings.defaultIconPropertyName = value;
          await this.plugin.saveSettings();
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("Alt text property name").setDesc('Property name to use for image alt text (description) when inserting to properties. If "Descriptive images" is enabled, this will be filled with the description you provide. If disabled, it will be filled with the search term for external images.').addText((text) => {
        text.setPlaceholder("alt").setValue(this.plugin.settings.altTextProperty).onChange(async (value) => {
          this.plugin.settings.altTextProperty = value;
          await this.plugin.saveSettings();
        });
      });
    });
  }
  renderConversionSettings(containerEl) {
    const group = createSettingsGroup(containerEl, "Remote image conversion", "image-manager");
    group.addSetting((setting) => {
      setting.setName("Auto-convert remote images").setDesc("Automatically download and replace remote image urls with local files").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.autoConvertRemoteImages).onChange(async (value) => {
          this.plugin.settings.autoConvertRemoteImages = value;
          await this.plugin.saveSettings();
          const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
          const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
          this.display();
          requestAnimationFrame(() => {
            if (scrollContainer) {
              scrollContainer.scrollTop = scrollTop;
            }
          });
        });
      });
    });
    if (this.plugin.settings.autoConvertRemoteImages) {
      group.addSetting((setting) => {
        setting.setName("Convert on note open").setDesc("Process remote images when opening a note").addToggle((toggle) => {
          toggle.setValue(this.plugin.settings.convertOnNoteOpen).onChange(async (value) => {
            this.plugin.settings.convertOnNoteOpen = value;
            await this.plugin.saveSettings();
          });
        });
      });
      group.addSetting((setting) => {
        setting.setName("Convert on note save").setDesc("Process remote images when saving a note").addToggle((toggle) => {
          toggle.setValue(this.plugin.settings.convertOnNoteSave).onChange(async (value) => {
            this.plugin.settings.convertOnNoteSave = value;
            await this.plugin.saveSettings();
          });
        });
      });
    }
  }
  renderRenameSettings(containerEl) {
    const group = createSettingsGroup(containerEl, "Rename options", "image-manager");
    group.addSetting((setting) => {
      setting.setName("Show image rename dialog automatically").setDesc("Handle and rename images when they are added to the vault via paste or drag and drop").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.showRenameDialog).onChange(async (value) => {
          this.plugin.settings.showRenameDialog = value;
          await this.plugin.saveSettings();
          this.refreshWithScrollPreserve(containerEl);
        });
      });
    });
    if (this.plugin.settings.showRenameDialog) {
      group.addSetting((setting) => {
        setting.setName("Rename on paste").setDesc("Handle and rename images when pasting into the editor").addToggle((toggle) => {
          toggle.setValue(this.plugin.settings.enableRenameOnPaste).onChange(async (value) => {
            this.plugin.settings.enableRenameOnPaste = value;
            await this.plugin.saveSettings();
          });
        });
      });
      group.addSetting((setting) => {
        setting.setName("Rename on drag and drop").setDesc("Handle and rename images when dropping into the editor").addToggle((toggle) => {
          toggle.setValue(this.plugin.settings.enableRenameOnDrop).onChange(async (value) => {
            this.plugin.settings.enableRenameOnDrop = value;
            await this.plugin.saveSettings();
          });
        });
      });
    }
    group.addSetting((setting) => {
      setting.setName("Process background file changes").setDesc("Automatically convert and rename remote images when files are changed in the background (by Git or other plugins). Warning: Turning this on may cause the rename modal to appear for images you've already processed on other devices during a sync.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.processBackgroundChanges).onChange(async (value) => {
          this.plugin.settings.processBackgroundChanges = value;
          await this.plugin.saveSettings();
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("Descriptive images").setDesc("Ask for image description, use as display text and kebab-case for filename (applies to note body insertions only, not properties)").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.enableDescriptiveImages).onChange(async (value) => {
          this.plugin.settings.enableDescriptiveImages = value;
          await this.plugin.saveSettings();
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("Auto rename").setDesc("Automatically rename without showing dialog (uses template)").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.autoRename).onChange(async (value) => {
          this.plugin.settings.autoRename = value;
          await this.plugin.saveSettings();
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("Duplicate number delimiter").setDesc('Character(s) between name and number for duplicates (e.g., "-" gives "image-1")').addText((text) => {
        text.setPlaceholder("-").setValue(this.plugin.settings.dupNumberDelimiter).onChange(async (value) => {
          this.plugin.settings.dupNumberDelimiter = value;
          await this.plugin.saveSettings();
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("Duplicate number at start").setDesc('Put the duplicate number at the start (e.g., "1-image" instead of "image-1")').addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.dupNumberAtStart).onChange(async (value) => {
          this.plugin.settings.dupNumberAtStart = value;
          await this.plugin.saveSettings();
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("Disable rename notice").setDesc("Do not show a notice after renaming an image").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.disableRenameNotice).onChange(async (value) => {
          this.plugin.settings.disableRenameNotice = value;
          await this.plugin.saveSettings();
        });
      });
    });
  }
  /**
   * Get the current device type
   */
  getCurrentDevice() {
    if (import_obsidian2.Platform.isPhone) {
      return "phone" /* Phone */;
    }
    if (import_obsidian2.Platform.isTablet) {
      return "tablet" /* Tablet */;
    }
    return "desktop" /* Desktop */;
  }
  /**
   * Helper to preserve scroll position when re-rendering settings
   */
  refreshWithScrollPreserve(containerEl) {
    const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
    const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
    this.display();
    requestAnimationFrame(() => {
      if (scrollContainer) {
        scrollContainer.scrollTop = scrollTop;
      }
    });
  }
  renderBannerSettings(containerEl) {
    const group = createSettingsGroup(containerEl, "Banner images", "image-manager");
    const currentDevice = this.getCurrentDevice();
    const deviceSettings = this.plugin.settings.banner[currentDevice];
    const defaultDeviceSettings = DEFAULT_BANNER_DEVICE_SETTINGS[currentDevice];
    const propertySettings = this.plugin.settings.banner.properties;
    group.addSetting((setting) => {
      setting.setName("Show banner").setDesc(`Enable or disable banners on your ${currentDevice} device`).addToggle((toggle) => {
        toggle.setValue(deviceSettings.enabled).onChange(async (value) => {
          this.plugin.settings.banner[currentDevice].enabled = value;
          await this.plugin.saveSettings();
          this.refreshWithScrollPreserve(containerEl);
        });
      });
    });
    if (!deviceSettings.enabled) {
      return;
    }
    group.addSetting((setting) => {
      setting.setName("Height").setDesc(`Height of the banner on your ${currentDevice} device (in pixels)`).addText((text) => {
        text.setPlaceholder(String(defaultDeviceSettings.height)).setValue(String(deviceSettings.height)).onChange(async (value) => {
          const num = parseInt(value, 10);
          if (!isNaN(num) && num > 0) {
            this.plugin.settings.banner[currentDevice].height = num;
            await this.plugin.saveSettings();
          }
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("Padding").setDesc("Padding of the banner from the edges of the note (in pixels)").addText((text) => {
        text.setPlaceholder(String(defaultDeviceSettings.padding)).setValue(String(deviceSettings.padding)).onChange(async (value) => {
          const num = parseInt(value, 10);
          if (!isNaN(num) && num >= 0) {
            this.plugin.settings.banner[currentDevice].padding = num;
            await this.plugin.saveSettings();
          }
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("Note offset").setDesc("Move the position of the note content (in pixels)").addText((text) => {
        text.setPlaceholder(String(defaultDeviceSettings.noteOffset)).setValue(String(deviceSettings.noteOffset)).onChange(async (value) => {
          const num = parseInt(value, 10);
          if (!isNaN(num)) {
            this.plugin.settings.banner[currentDevice].noteOffset = num;
            await this.plugin.saveSettings();
          }
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("View offset").setDesc("Move the position of the view content (in pixels)").addText((text) => {
        text.setPlaceholder(String(defaultDeviceSettings.viewOffset)).setValue(String(deviceSettings.viewOffset)).onChange(async (value) => {
          const num = parseInt(value, 10);
          if (!isNaN(num)) {
            this.plugin.settings.banner[currentDevice].viewOffset = num;
            await this.plugin.saveSettings();
          }
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("Fade").setDesc("Fade the image out towards the content").addToggle((toggle) => {
        toggle.setValue(deviceSettings.fade).onChange(async (value) => {
          this.plugin.settings.banner[currentDevice].fade = value;
          await this.plugin.saveSettings();
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("Rounded corners").setDesc("Enable rounded corners for the banner").addToggle((toggle) => {
        toggle.setValue(deviceSettings.bannerRadiusEnabled).onChange(async (value) => {
          this.plugin.settings.banner[currentDevice].bannerRadiusEnabled = value;
          await this.plugin.saveSettings();
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("Animation").setDesc("Enable banner animation when opening files").addToggle((toggle) => {
        toggle.setValue(deviceSettings.animation).onChange(async (value) => {
          this.plugin.settings.banner[currentDevice].animation = value;
          await this.plugin.saveSettings();
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("Banner property").setDesc("Name of the banner property this plugin will look for in the properties").addText((text) => {
        text.setPlaceholder("Banner").setValue(propertySettings.imageProperty).onChange(async (value) => {
          this.plugin.settings.banner.properties.imageProperty = value || "banner";
          await this.plugin.saveSettings();
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("Icon property").setDesc("Name of the icon property this plugin will look for in the properties").addText((text) => {
        text.setPlaceholder("Icon").setValue(propertySettings.iconProperty).onChange(async (value) => {
          this.plugin.settings.banner.properties.iconProperty = value || "icon";
          await this.plugin.saveSettings();
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("Enable per-note banner hiding").setDesc("Allow disabling banners on a per-note basis using a properties field").addToggle((toggle) => {
        toggle.setValue(propertySettings.hidePropertyEnabled).onChange(async (value) => {
          this.plugin.settings.banner.properties.hidePropertyEnabled = value;
          await this.plugin.saveSettings();
          this.refreshWithScrollPreserve(containerEl);
        });
      });
    });
    if (propertySettings.hidePropertyEnabled) {
      group.addSetting((setting) => {
        setting.setName("Hide banner property").setDesc("Name of the property that, when set to true, will hide the banner for that note").addText((text) => {
          text.setPlaceholder("hideBanner").setValue(propertySettings.hideProperty).onChange(async (value) => {
            this.plugin.settings.banner.properties.hideProperty = value || "";
            await this.plugin.saveSettings();
          });
        });
      });
    }
    group.addSetting((setting) => {
      setting.setName("Show icon").setDesc("Enable or disable the icon").addToggle((toggle) => {
        toggle.setValue(deviceSettings.iconEnabled).onChange(async (value) => {
          this.plugin.settings.banner[currentDevice].iconEnabled = value;
          await this.plugin.saveSettings();
          this.refreshWithScrollPreserve(containerEl);
        });
      });
    });
    if (deviceSettings.iconEnabled) {
      group.addSetting((setting) => {
        setting.setName("Icon size").setDesc("Size of the icon (in pixels)").addText((text) => {
          text.setPlaceholder(String(defaultDeviceSettings.iconSize)).setValue(String(deviceSettings.iconSize)).onChange(async (value) => {
            const num = parseInt(value, 10);
            if (!isNaN(num) && num > 0) {
              this.plugin.settings.banner[currentDevice].iconSize = num;
              await this.plugin.saveSettings();
            }
          });
        });
      });
      group.addSetting((setting) => {
        setting.setName("Icon background").setDesc("Enable or disable the icon background").addToggle((toggle) => {
          toggle.setValue(deviceSettings.iconBackground).onChange(async (value) => {
            this.plugin.settings.banner[currentDevice].iconBackground = value;
            await this.plugin.saveSettings();
          });
        });
      });
      group.addSetting((setting) => {
        setting.setName("Icon frame").setDesc("Show the border/background frame around the icon (disable to display just the icon graphic)").addToggle((toggle) => {
          toggle.setValue(deviceSettings.iconFrame).onChange(async (value) => {
            this.plugin.settings.banner[currentDevice].iconFrame = value;
            await this.plugin.saveSettings();
          });
        });
      });
      group.addSetting((setting) => {
        setting.setName("Icon border size").setDesc("Size of the icon border (in pixels)").addText((text) => {
          text.setPlaceholder(String(defaultDeviceSettings.iconBorder)).setValue(String(deviceSettings.iconBorder)).onChange(async (value) => {
            const num = parseInt(value, 10);
            if (!isNaN(num) && num >= 0) {
              this.plugin.settings.banner[currentDevice].iconBorder = num;
              await this.plugin.saveSettings();
            }
          });
        });
      });
      group.addSetting((setting) => {
        setting.setName("Icon border radius").setDesc("Size of the icon border radius (in pixels)").addText((text) => {
          text.setPlaceholder(String(defaultDeviceSettings.iconRadius)).setValue(String(deviceSettings.iconRadius)).onChange(async (value) => {
            const num = parseInt(value, 10);
            if (!isNaN(num) && num >= 0) {
              this.plugin.settings.banner[currentDevice].iconRadius = num;
              await this.plugin.saveSettings();
            }
          });
        });
      });
      group.addSetting((setting) => {
        setting.setName("Icon alignment - horizontal").setDesc("Horizontal alignment of the icon").addDropdown((dropdown) => {
          dropdown.addOption("flex-start", "Left").addOption("center", "Center").addOption("flex-end", "Right").setValue(deviceSettings.iconAlignmentH).onChange(async (value) => {
            this.plugin.settings.banner[currentDevice].iconAlignmentH = value;
            await this.plugin.saveSettings();
          });
        });
      });
      group.addSetting((setting) => {
        setting.setName("Icon alignment - vertical").setDesc("Vertical alignment of the icon").addDropdown((dropdown) => {
          dropdown.addOption("flex-start", "Top").addOption("center", "Center").addOption("flex-end", "Bottom").setValue(deviceSettings.iconAlignmentV).onChange(async (value) => {
            this.plugin.settings.banner[currentDevice].iconAlignmentV = value;
            await this.plugin.saveSettings();
          });
        });
      });
    }
  }
  renderAdvancedSettings(containerEl) {
    const group = createSettingsGroup(containerEl, "Advanced", "image-manager");
    group.addSetting((setting) => {
      setting.setName("Supported file extensions").setDesc("File extensions to process (comma-separated)").addText((text) => {
        const currentValue = this.plugin.settings.supportedExtensions.length > 0 ? this.plugin.settings.supportedExtensions.join(", ") : "";
        text.setPlaceholder("File extensions").setValue(currentValue).onChange(async (value) => {
          const extensions = value.split(",").map((ext) => ext.trim().toLowerCase()).filter((ext) => ext.length > 0);
          this.plugin.settings.supportedExtensions = extensions.length > 0 ? extensions : ["md"];
          await this.plugin.saveSettings();
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("Debug mode").setDesc("Enable debug logging to console").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.debugMode).onChange(async (value) => {
          this.plugin.settings.debugMode = value;
          await this.plugin.saveSettings();
        });
      });
    });
  }
};

// src/services/StorageManager.ts
var import_obsidian3 = require("obsidian");
var StorageManager = class {
  constructor(app, settings, observable) {
    this.app = app;
    this.settings = settings;
    observable == null ? void 0 : observable.subscribe((newSettings) => {
      this.updateSettings(newSettings);
    });
  }
  /**
   * Update settings reference
   */
  updateSettings(settings) {
    this.settings = settings;
  }
  /**
   * Get the attachment folder path for a given note
   */
  getAttachmentFolder(noteFile) {
    var _a, _b;
    const notePath = (_b = (_a = noteFile.parent) == null ? void 0 : _a.path) != null ? _b : "";
    switch (this.settings.attachmentLocation) {
      case "same" /* SameFolder */:
        return notePath;
      case "subfolder" /* Subfolder */:
        return (0, import_obsidian3.normalizePath)(this.joinPaths(notePath, this.settings.customAttachmentPath));
      case "vault" /* VaultFolder */:
        return (0, import_obsidian3.normalizePath)(this.settings.customAttachmentPath);
      case "obsidian" /* ObsidianDefault */:
      default:
        return this.getObsidianAttachmentFolder(noteFile);
    }
  }
  /**
   * Get Obsidian's configured attachment folder
   */
  getObsidianAttachmentFolder(noteFile) {
    var _a, _b, _c;
    const vaultConfig = this.app.vault.config;
    const attachmentFolderPath = (_a = vaultConfig == null ? void 0 : vaultConfig.attachmentFolderPath) != null ? _a : "/";
    const notePath = (_c = (_b = noteFile.parent) == null ? void 0 : _b.path) != null ? _c : "";
    if (attachmentFolderPath === "/") {
      return "";
    } else if (attachmentFolderPath === "./") {
      return notePath;
    } else if (attachmentFolderPath.startsWith("./")) {
      const relativePath = attachmentFolderPath.slice(2);
      return (0, import_obsidian3.normalizePath)(this.joinPaths(notePath, relativePath));
    } else {
      return (0, import_obsidian3.normalizePath)(attachmentFolderPath);
    }
  }
  /**
   * Join path segments
   */
  joinPaths(...parts) {
    return parts.filter((p) => p).join("/");
  }
  /**
   * Ensure a folder exists, creating it if necessary
   */
  async ensureFolderExists(folderPath) {
    if (!folderPath) return;
    const normalizedPath = (0, import_obsidian3.normalizePath)(folderPath);
    const folder = this.app.vault.getAbstractFileByPath(normalizedPath);
    if (!folder) {
      await this.app.vault.createFolder(normalizedPath);
    } else if (!(folder instanceof import_obsidian3.TFolder)) {
      throw new Error(`Path exists but is not a folder: ${normalizedPath}`);
    }
  }
  /**
   * Generate a unique file path for an image
   */
  async getAvailablePath(baseName, extension, noteFile) {
    const folder = this.getAttachmentFolder(noteFile);
    await this.ensureFolderExists(folder);
    const sanitizedName = this.sanitizeFileName(baseName);
    let fileName = `${sanitizedName}.${extension}`;
    let filePath = folder ? (0, import_obsidian3.normalizePath)(this.joinPaths(folder, fileName)) : (0, import_obsidian3.normalizePath)(fileName);
    let counter = 1;
    while (this.app.vault.getAbstractFileByPath(filePath)) {
      if (this.settings.dupNumberAtStart) {
        fileName = `${counter}${this.settings.dupNumberDelimiter}${sanitizedName}.${extension}`;
      } else {
        fileName = `${sanitizedName}${this.settings.dupNumberDelimiter}${counter}.${extension}`;
      }
      filePath = folder ? (0, import_obsidian3.normalizePath)(this.joinPaths(folder, fileName)) : (0, import_obsidian3.normalizePath)(fileName);
      counter++;
    }
    return filePath;
  }
  /**
   * Save binary data as a file
   */
  async saveFile(data, filePath) {
    const normalizedPath = (0, import_obsidian3.normalizePath)(filePath);
    const lastSlash = normalizedPath.lastIndexOf("/");
    const parentPath = lastSlash > 0 ? normalizedPath.slice(0, lastSlash) : "";
    if (parentPath) {
      await this.ensureFolderExists(parentPath);
    }
    return await this.app.vault.createBinary(normalizedPath, data);
  }
  /**
   * Generate markdown image link for a file
   * Ensures the link includes '!' for images
   * @param displayText Optional display text to add after the link (e.g., ![[image.jpg|display text]])
   * @param insertSize Optional size to add (e.g., "200" or "200x100")
   */
  generateMarkdownLink(file, sourcePath, displayText, insertSize) {
    const link = this.app.fileManager.generateMarkdownLink(file, sourcePath);
    let imageLink = link;
    if (this.isImageFile(file) && !link.startsWith("!")) {
      imageLink = `!${link}`;
    }
    if (this.settings.debugMode) {
      console.debug("[Image Manager] generateMarkdownLink", {
        originalLink: link,
        imageLink,
        insertSize,
        displayText,
        hasSize: !!(insertSize && insertSize.trim())
      });
    }
    if (imageLink.startsWith("![") && imageLink.includes("](")) {
      if (insertSize && insertSize.trim()) {
        const sizePart = `|${insertSize}`;
        if (displayText && displayText.trim()) {
          imageLink = imageLink.replace(/^!\[([^\]]*)\]/, `![${displayText}${sizePart}]`);
        } else {
          const altMatch = imageLink.match(/^!\[([^\]]*)\]/);
          if (altMatch) {
            const alt = altMatch[1] || "";
            imageLink = imageLink.replace(/^!\[([^\]]*)\]/, `![${alt}${sizePart}]`);
          }
        }
      } else if (displayText && displayText.trim()) {
        imageLink = imageLink.replace(/^!\[([^\]]*)\]/, `![${displayText}]`);
      }
    } else if (imageLink.startsWith("![") && imageLink.includes("]]")) {
      const parts = [];
      if (insertSize && insertSize.trim()) {
        parts.push(insertSize);
      }
      if (displayText && displayText.trim()) {
        parts.push(displayText);
      }
      if (parts.length > 0) {
        imageLink = imageLink.replace(/\]\]$/, `|${parts.join("|")}]]`);
      }
    }
    if (this.settings.debugMode) {
      console.debug("[Image Manager] generateMarkdownLink result", {
        finalLink: imageLink
      });
    }
    return imageLink;
  }
  /**
   * Get relative path from source file to target file
   */
  getRelativePath(from, to) {
    var _a, _b, _c, _d;
    const fromDir = (_b = (_a = from.parent) == null ? void 0 : _a.path) != null ? _b : "";
    const toPath = to.path;
    if (!fromDir) {
      return toPath;
    }
    const toDir = (_d = (_c = to.parent) == null ? void 0 : _c.path) != null ? _d : "";
    if (fromDir === toDir) {
      return to.name;
    }
    return toPath;
  }
  /**
   * Sanitize a file name
   */
  sanitizeFileName(name) {
    return name.replace(/[\\/:*?"<>|]/g, "-").replace(/\s+/g, " ").replace(/^\.+/, "").replace(/\.+$/, "").trim();
  }
  /**
   * Get file extension from MIME type
   */
  getExtensionFromMimeType(mimeType) {
    var _a;
    const mimeToExt = {
      "image/jpeg": "jpg",
      "image/jpg": "jpg",
      "image/png": "png",
      "image/gif": "gif",
      "image/webp": "webp",
      "image/svg+xml": "svg",
      "image/bmp": "bmp",
      "image/tiff": "tiff",
      "image/avif": "avif"
    };
    return (_a = mimeToExt[mimeType]) != null ? _a : "png";
  }
  /**
   * Check if a file is an image based on extension
   */
  isImageFile(file) {
    const imageExtensions = ["jpg", "jpeg", "png", "gif", "webp", "svg", "bmp", "tiff", "avif"];
    return imageExtensions.includes(file.extension.toLowerCase());
  }
  /**
   * Check if a URL points to an external image
   */
  isExternalImageUrl(url) {
    try {
      const parsed = new URL(url);
      if (!["http:", "https:"].includes(parsed.protocol)) {
        return false;
      }
      const pathname = parsed.pathname.toLowerCase();
      const imageExtensions = [".jpg", ".jpeg", ".png", ".gif", ".webp", ".svg", ".bmp", ".tiff", ".avif"];
      if (imageExtensions.some((ext) => pathname.endsWith(ext))) {
        return true;
      }
      const imageHosts = [
        "images.unsplash.com",
        "images.pexels.com",
        "pixabay.com",
        "i.imgur.com",
        "cdn.discordapp.com"
      ];
      return imageHosts.some((host) => parsed.hostname.includes(host));
    } catch (e) {
      return false;
    }
  }
};

// src/services/ImageProcessor.ts
var import_obsidian6 = require("obsidian");

// src/utils/template.ts
function renderTemplate(template, variables, frontmatter) {
  var _a, _b;
  let result = template;
  result = result.replace(/\{\{fileName\}\}/g, variables.fileName);
  result = result.replace(/\{\{dirName\}\}/g, variables.dirName);
  result = result.replace(/\{\{imageNameKey\}\}/g, (_a = variables.imageNameKey) != null ? _a : "");
  result = result.replace(/\{\{firstHeading\}\}/g, (_b = variables.firstHeading) != null ? _b : "");
  result = result.replace(/\{\{DATE:([^}]+)\}\}/g, (_, format) => {
    return formatDate(/* @__PURE__ */ new Date(), format);
  });
  result = result.replace(/\{\{TIME:([^}]+)\}\}/g, (_, format) => {
    return formatTime(/* @__PURE__ */ new Date(), format);
  });
  if (frontmatter) {
    result = result.replace(/\{\{fm:([^}]+)\}\}/g, (_, key) => {
      const value = frontmatter[key.trim()];
      if (value == null) return "";
      if (typeof value === "string") return value;
      if (typeof value === "number" || typeof value === "boolean") return String(value);
      return "";
    });
  }
  return result;
}
function formatDate(date, format) {
  const year = date.getFullYear();
  const month = date.getMonth() + 1;
  const day = date.getDate();
  return format.replace("YYYY", String(year)).replace("YY", String(year).slice(-2)).replace("MM", String(month).padStart(2, "0")).replace("DD", String(day).padStart(2, "0")).replace("M", String(month)).replace("D", String(day));
}
function formatTime(date, format) {
  const hours = date.getHours();
  const minutes = date.getMinutes();
  const seconds = date.getSeconds();
  return format.replace("HH", String(hours).padStart(2, "0")).replace("mm", String(minutes).padStart(2, "0")).replace("ss", String(seconds).padStart(2, "0")).replace("H", String(hours)).replace("m", String(minutes)).replace("s", String(seconds));
}
function buildTemplateVariables(app, activeFile) {
  var _a, _b;
  const cache = app.metadataCache.getFileCache(activeFile);
  const frontmatter = cache == null ? void 0 : cache.frontmatter;
  let firstHeading = "";
  if (cache == null ? void 0 : cache.headings) {
    for (const heading of cache.headings) {
      if (heading.level === 1) {
        firstHeading = heading.heading;
        break;
      }
    }
  }
  return {
    fileName: activeFile.basename,
    dirName: (_b = (_a = activeFile.parent) == null ? void 0 : _a.name) != null ? _b : "",
    imageNameKey: frontmatter == null ? void 0 : frontmatter.imageNameKey,
    firstHeading,
    date: formatDate(/* @__PURE__ */ new Date(), "YYYY-MM-DD"),
    time: formatTime(/* @__PURE__ */ new Date(), "HH-mm-ss")
  };
}
function isTemplateMeaningful(result, delimiter) {
  const meaninglessRegex = new RegExp(`[${escapeRegExp(delimiter)}\\s]`, "gm");
  return result.replace(meaninglessRegex, "") !== "";
}
function escapeRegExp(string) {
  return string.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
}

// src/modals/RenameModal.ts
var import_obsidian4 = require("obsidian");
var RenameModal = class extends import_obsidian4.Modal {
  constructor(app, imageFile, suggestedName, onSubmit) {
    super(app);
    this.nameInput = null;
    this.previewEl = null;
    this.errorEl = null;
    this.imageFile = imageFile;
    this.suggestedName = suggestedName;
    this.currentName = suggestedName;
    this.onSubmit = onSubmit;
  }
  onOpen() {
    const { contentEl, titleEl } = this;
    this.containerEl.addClass("image-manager-rename-modal");
    titleEl.setText("Rename image");
    this.renderImagePreview(contentEl);
    this.renderFileInfo(contentEl);
    this.renderNameInput(contentEl);
    this.errorEl = contentEl.createDiv({ cls: "image-manager-error image-manager-error-hidden" });
    this.renderButtons(contentEl);
    setTimeout(() => {
      if (this.nameInput) {
        this.nameInput.focus();
        this.nameInput.select();
      }
    }, 50);
  }
  renderImagePreview(containerEl) {
    const previewContainer = containerEl.createDiv({ cls: "image-manager-preview" });
    const img = previewContainer.createEl("img", {
      attr: {
        src: this.app.vault.getResourcePath(this.imageFile),
        alt: this.imageFile.name
      }
    });
    img.addClass("image-manager-preview-img");
  }
  renderFileInfo(containerEl) {
    const infoContainer = containerEl.createDiv({ cls: "image-manager-info" });
    const infoList = infoContainer.createEl("ul");
    const originalItem = infoList.createEl("li");
    originalItem.createEl("strong", { text: "Original: " });
    originalItem.createEl("span", { text: this.imageFile.path });
    const newItem = infoList.createEl("li");
    newItem.createEl("strong", { text: "New path: " });
    this.previewEl = newItem.createEl("span", { text: this.getNewPath(this.currentName) });
  }
  renderNameInput(containerEl) {
    new import_obsidian4.Setting(containerEl).setName("New name").setDesc("Enter a new name for the image (without extension)").addText((text) => {
      this.nameInput = text.inputEl;
      text.setPlaceholder("Enter name").setValue(this.currentName).onChange((value) => {
        this.currentName = this.sanitizeName(value);
        this.updatePreview();
      });
      text.inputEl.addEventListener("keydown", (e) => {
        if (e.key === "Enter" && !e.isComposing) {
          e.preventDefault();
          this.submit();
        }
      });
    });
  }
  renderButtons(containerEl) {
    new import_obsidian4.Setting(containerEl).addButton((btn) => {
      btn.setButtonText("Rename").setCta().onClick(() => this.submit());
    }).addButton((btn) => {
      btn.setButtonText("Skip").onClick(() => this.cancel());
    });
  }
  getNewPath(name) {
    var _a, _b;
    const folder = (_b = (_a = this.imageFile.parent) == null ? void 0 : _a.path) != null ? _b : "";
    const extension = this.imageFile.extension;
    const fileName = `${name}.${extension}`;
    return folder ? `${folder}/${fileName}` : fileName;
  }
  updatePreview() {
    if (this.previewEl) {
      this.previewEl.setText(this.getNewPath(this.currentName));
    }
  }
  sanitizeName(name) {
    return name.replace(/[\\/:*?"<>|]/g, "-").replace(/\s+/g, " ").trim();
  }
  showError(message) {
    if (this.errorEl) {
      this.errorEl.setText(message);
      this.errorEl.addClass("image-manager-error-visible");
      this.errorEl.removeClass("image-manager-error-hidden");
    }
  }
  hideError() {
    if (this.errorEl) {
      this.errorEl.addClass("image-manager-error-hidden");
      this.errorEl.removeClass("image-manager-error-visible");
    }
  }
  submit() {
    this.hideError();
    if (!this.currentName || this.currentName.trim() === "") {
      this.showError("Name cannot be empty");
      return;
    }
    this.onSubmit({
      newName: this.currentName,
      cancelled: false
    });
    this.close();
  }
  cancel() {
    this.onSubmit({
      newName: "",
      cancelled: true
    });
    this.close();
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
function openRenameModal(app, imageFile, suggestedName) {
  return new Promise((resolve) => {
    const modal = new RenameModal(app, imageFile, suggestedName, resolve);
    modal.open();
  });
}

// src/modals/DescriptiveImageModal.ts
var import_obsidian5 = require("obsidian");

// src/utils/kebab-case.ts
function toKebabCase(str) {
  return str.toLowerCase().replace(/[<>:"/\\|?*]/g, "").replace(/['"]/g, "").replace(/[^\w\s-]/g, "").trim().replace(/\s+/g, "-").replace(/-+/g, "-").replace(/^-|-$/g, "");
}

// src/modals/DescriptiveImageModal.ts
var DescriptiveImageModal = class extends import_obsidian5.Modal {
  constructor(app, imageFile, onSubmit, suggestedDescription) {
    super(app);
    this.description = "";
    this.descriptionInput = null;
    this.previewEl = null;
    this.fileNamePreviewEl = null;
    this.errorEl = null;
    this.imageFile = imageFile;
    this.onSubmit = onSubmit;
    this.description = suggestedDescription != null ? suggestedDescription : "";
  }
  onOpen() {
    const { contentEl, titleEl } = this;
    this.containerEl.addClass("image-manager-rename-modal");
    titleEl.setText("Describe image");
    this.renderImagePreview(contentEl);
    new import_obsidian5.Setting(contentEl).setName("Image description").setDesc("Describe this image. This will be used as display text and for the filename.").addText((text) => {
      this.descriptionInput = text.inputEl;
      text.setPlaceholder("A beautiful sunset over mountains").setValue(this.description).onChange((value) => {
        this.description = value;
        this.updatePreview();
      });
      text.inputEl.addEventListener("keydown", (e) => {
        if (e.key === "Enter" && !e.isComposing) {
          e.preventDefault();
          this.submit();
        }
      });
    });
    const previewContainer = contentEl.createDiv({ cls: "image-manager-info" });
    previewContainer.createEl("p", { text: "Preview:" });
    const fileNamePreview = previewContainer.createEl("p");
    fileNamePreview.createEl("strong", { text: "Filename: " });
    this.fileNamePreviewEl = fileNamePreview.createEl("span");
    const linkPreview = previewContainer.createEl("p");
    linkPreview.createEl("strong", { text: "Link: " });
    this.previewEl = linkPreview.createEl("span", { cls: "code" });
    this.errorEl = contentEl.createDiv({ cls: "image-manager-error image-manager-error-hidden" });
    new import_obsidian5.Setting(contentEl).addButton((btn) => {
      btn.setButtonText("Insert").setCta().onClick(() => this.submit());
    }).addButton((btn) => {
      btn.setButtonText("Cancel").onClick(() => this.cancel());
    });
    if (this.description) {
      this.updatePreview();
    }
    setTimeout(() => {
      if (this.descriptionInput) {
        this.descriptionInput.focus();
      }
    }, 50);
  }
  renderImagePreview(containerEl) {
    const previewContainer = containerEl.createDiv({ cls: "image-manager-preview" });
    const img = previewContainer.createEl("img", {
      attr: {
        src: this.app.vault.getResourcePath(this.imageFile),
        alt: this.imageFile.name
      }
    });
    img.addClass("image-manager-preview-img");
  }
  updatePreview() {
    if (!this.description || this.description.trim() === "") {
      if (this.fileNamePreviewEl) {
        this.fileNamePreviewEl.setText("(enter description)");
      }
      if (this.previewEl) {
        this.previewEl.setText("(enter description)");
      }
      return;
    }
    const kebabName = toKebabCase(this.description);
    const extension = this.imageFile.extension;
    const fileName = `${kebabName}.${extension}`;
    const displayText = this.description.trim();
    if (this.fileNamePreviewEl) {
      this.fileNamePreviewEl.setText(fileName);
    }
    if (this.previewEl) {
      this.previewEl.setText(`![[${fileName}|${displayText}]]`);
    }
  }
  showError(message) {
    if (this.errorEl) {
      this.errorEl.setText(message);
      this.errorEl.addClass("image-manager-error-visible");
      this.errorEl.removeClass("image-manager-error-hidden");
    }
  }
  hideError() {
    if (this.errorEl) {
      this.errorEl.addClass("image-manager-error-hidden");
      this.errorEl.removeClass("image-manager-error-visible");
    }
  }
  submit() {
    this.hideError();
    if (!this.description || this.description.trim() === "") {
      this.showError("Description cannot be empty");
      return;
    }
    const kebabName = toKebabCase(this.description);
    if (!kebabName || kebabName === "") {
      this.showError("Description must contain valid characters");
      return;
    }
    this.onSubmit({
      description: this.description.trim(),
      fileName: kebabName,
      cancelled: false
    });
    this.close();
  }
  cancel() {
    this.onSubmit({
      description: "",
      fileName: "",
      cancelled: true
    });
    this.close();
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
function openDescriptiveImageModal(app, imageFile, suggestedDescription) {
  return new Promise((resolve) => {
    const modal = new DescriptiveImageModal(app, imageFile, resolve, suggestedDescription);
    modal.open();
  });
}

// src/services/ImageProcessor.ts
var ImageProcessor = class {
  constructor(app, settings, storageManager, observable) {
    this.app = app;
    this.settings = settings;
    this.storageManager = storageManager;
    observable == null ? void 0 : observable.subscribe((newSettings) => {
      this.updateSettings(newSettings);
    });
  }
  /**
   * Update settings reference
   */
  updateSettings(settings) {
    this.settings = settings;
    this.storageManager.updateSettings(settings);
  }
  /**
   * Process a pasted/dropped image file
   * This is called from our event handlers (user-initiated action)
   * @param isPropertyInsertion - If true, skip descriptive images (only applies to note body)
   */
  async processImageFile(file, activeFile, showRenameModal = true, isPropertyInsertion = false) {
    try {
      const arrayBuffer = await file.arrayBuffer();
      const extension = this.getExtension(file);
      const suggestedName = this.generateNameWithSuffix(activeFile);
      let finalName = suggestedName;
      if (showRenameModal && !this.settings.autoRename) {
        const tempPath = await this.storageManager.getAvailablePath(
          `temp-${Date.now()}`,
          extension,
          activeFile
        );
        const tempFile = await this.storageManager.saveFile(arrayBuffer, tempPath);
        let finalName2;
        let displayText;
        if (this.settings.enableDescriptiveImages) {
          const descResult = await openDescriptiveImageModal(this.app, tempFile, suggestedName);
          if (descResult.cancelled) {
            await this.app.fileManager.trashFile(tempFile);
            return {
              file: null,
              path: "",
              linkText: "",
              success: false,
              error: "Cancelled by user"
            };
          }
          finalName2 = descResult.fileName;
          displayText = descResult.description;
        } else {
          const result = await openRenameModal(this.app, tempFile, suggestedName);
          if (result.cancelled) {
            await this.app.fileManager.trashFile(tempFile);
            return {
              file: null,
              path: "",
              linkText: "",
              success: false,
              error: "Cancelled by user"
            };
          }
          finalName2 = result.newName;
        }
        const finalPath = await this.getDeduplicatedPath(finalName2, extension, activeFile);
        await this.app.fileManager.renameFile(tempFile, finalPath);
        const abstractFile = this.app.vault.getAbstractFileByPath(finalPath);
        if (!(abstractFile instanceof import_obsidian6.TFile)) {
          throw new Error("Renamed file not found");
        }
        const renamedFile = abstractFile;
        const linkText = this.storageManager.generateMarkdownLink(
          renamedFile,
          activeFile.path,
          displayText,
          this.settings.insertSize
        );
        if (!this.settings.disableRenameNotice) {
          new import_obsidian6.Notice(`Image saved as: ${renamedFile.name}`);
        }
        return {
          file: renamedFile,
          path: finalPath,
          linkText,
          description: displayText,
          success: true
        };
      } else {
        const finalPath = await this.getDeduplicatedPath(finalName, extension, activeFile);
        const savedFile = await this.storageManager.saveFile(arrayBuffer, finalPath);
        const linkText = this.storageManager.generateMarkdownLink(
          savedFile,
          activeFile.path,
          void 0,
          this.settings.insertSize
        );
        if (!this.settings.disableRenameNotice) {
          new import_obsidian6.Notice(`Image saved as: ${savedFile.name}`);
        }
        return {
          file: savedFile,
          path: finalPath,
          linkText,
          description: void 0,
          success: true
        };
      }
    } catch (error) {
      console.error("Error processing image:", error);
      return {
        file: null,
        path: "",
        linkText: "",
        success: false,
        error: error instanceof Error ? error.message : String(error)
      };
    }
  }
  /**
   * Process an image from a URL (download and save locally)
   * @param isPropertyInsertion - If true, skip descriptive images (only applies to note body)
   * @param suggestedNameOverride - Optional override for suggested name (e.g., from search term)
   */
  async processImageUrl(url, activeFile, showRenameModal = true, isPropertyInsertion = false, suggestedNameOverride) {
    var _a;
    try {
      const response = await (0, import_obsidian6.requestUrl)({ url });
      if (response.status >= 400) {
        throw new Error(`Failed to download image: ${response.status}`);
      }
      const arrayBuffer = response.arrayBuffer;
      const contentType = (_a = response.headers["content-type"]) != null ? _a : "image/png";
      const extension = this.storageManager.getExtensionFromMimeType(contentType);
      const suggestedName = this.generateNameWithSuffix(activeFile, suggestedNameOverride);
      let finalName = suggestedName;
      if (showRenameModal && !this.settings.autoRename) {
        const tempPath = await this.storageManager.getAvailablePath(
          `temp-${Date.now()}`,
          extension,
          activeFile
        );
        const tempFile = await this.storageManager.saveFile(arrayBuffer, tempPath);
        let finalName2;
        let displayText;
        const shouldShowDescriptive = this.settings.enableDescriptiveImages && (!isPropertyInsertion || this.settings.altTextProperty !== "");
        if (shouldShowDescriptive) {
          const descResult = await openDescriptiveImageModal(this.app, tempFile, suggestedName);
          if (descResult.cancelled) {
            await this.app.fileManager.trashFile(tempFile);
            return {
              file: null,
              path: "",
              linkText: "",
              success: false,
              error: "Cancelled by user"
            };
          }
          finalName2 = descResult.fileName;
          displayText = descResult.description;
        } else {
          const result = await openRenameModal(this.app, tempFile, suggestedName);
          if (result.cancelled) {
            await this.app.fileManager.trashFile(tempFile);
            return {
              file: null,
              path: "",
              linkText: "",
              success: false,
              error: "Cancelled by user"
            };
          }
          finalName2 = result.newName;
        }
        const finalPath = await this.getDeduplicatedPath(finalName2, extension, activeFile);
        await this.app.fileManager.renameFile(tempFile, finalPath);
        const abstractFile = this.app.vault.getAbstractFileByPath(finalPath);
        if (!(abstractFile instanceof import_obsidian6.TFile)) {
          throw new Error("Renamed file not found");
        }
        const renamedFile = abstractFile;
        const linkText = this.storageManager.generateMarkdownLink(
          renamedFile,
          activeFile.path,
          displayText,
          this.settings.insertSize
        );
        if (!this.settings.disableRenameNotice) {
          new import_obsidian6.Notice(`Image downloaded and saved as: ${renamedFile.name}`);
        }
        return {
          file: renamedFile,
          path: finalPath,
          linkText,
          description: displayText,
          success: true
        };
      } else {
        const finalPath = await this.getDeduplicatedPath(finalName, extension, activeFile);
        const savedFile = await this.storageManager.saveFile(arrayBuffer, finalPath);
        const linkText = this.storageManager.generateMarkdownLink(
          savedFile,
          activeFile.path,
          void 0,
          this.settings.insertSize
        );
        if (!this.settings.disableRenameNotice) {
          new import_obsidian6.Notice(`Image downloaded and saved as: ${savedFile.name}`);
        }
        return {
          file: savedFile,
          path: finalPath,
          linkText,
          description: isPropertyInsertion ? suggestedNameOverride : void 0,
          success: true
        };
      }
    } catch (error) {
      console.error("Error processing image URL:", error);
      return {
        file: null,
        path: "",
        linkText: "",
        success: false,
        error: error instanceof Error ? error.message : String(error)
      };
    }
  }
  /**
   * Generate a suggested name based on the template and optional suffix
   */
  generateNameWithSuffix(activeFile, suffix) {
    const variables = buildTemplateVariables(this.app, activeFile);
    const rendered = renderTemplate(this.settings.imageNameTemplate, variables);
    const isMeaningful = isTemplateMeaningful(rendered, this.settings.dupNumberDelimiter);
    const base = isMeaningful ? rendered : "";
    if (base && suffix) {
      return `${base} - ${suffix}`;
    } else if (base) {
      return `${base} - `;
    } else if (suffix) {
      return suffix;
    }
    return "";
  }
  /**
   * Generate a suggested name based on the template
   */
  generateSuggestedName(activeFile) {
    return this.generateNameWithSuffix(activeFile);
  }
  /**
   * Get a deduplicated file path
   */
  async getDeduplicatedPath(baseName, extension, activeFile) {
    return await this.storageManager.getAvailablePath(baseName, extension, activeFile);
  }
  /**
   * Get file extension from File object
   */
  getExtension(file) {
    var _a;
    const nameParts = file.name.split(".");
    if (nameParts.length > 1) {
      const nameExt = (_a = nameParts[nameParts.length - 1]) == null ? void 0 : _a.toLowerCase();
      if (nameExt) {
        return nameExt;
      }
    }
    return this.storageManager.getExtensionFromMimeType(file.type);
  }
  /**
   * Insert link text at cursor position
   */
  insertLinkAtCursor(linkText) {
    const view = this.app.workspace.getActiveViewOfType(import_obsidian6.MarkdownView);
    if (view == null ? void 0 : view.editor) {
      view.editor.replaceSelection(linkText);
    }
  }
  /**
   * Get the active markdown file
   */
  getActiveFile() {
    var _a;
    const view = this.app.workspace.getActiveViewOfType(import_obsidian6.MarkdownView);
    return (_a = view == null ? void 0 : view.file) != null ? _a : null;
  }
  /**
   * Rename an existing image file with optional rename modal
   * Used by LocalConversionService to rename converted images
   */
  async renameImageFile(imageFile, suggestedName, activeFile) {
    try {
      const extension = imageFile.extension;
      let finalName = suggestedName;
      let displayText = "";
      if (this.settings.enableDescriptiveImages) {
        const descResult = await openDescriptiveImageModal(this.app, imageFile, suggestedName);
        if (descResult.cancelled) {
          return null;
        }
        displayText = descResult.description;
        finalName = descResult.fileName;
      } else if (!this.settings.autoRename) {
        const result = await openRenameModal(
          this.app,
          imageFile,
          finalName
        );
        if (result.cancelled) {
          return null;
        }
        finalName = result.newName;
      }
      const finalPath = await this.getDeduplicatedPath(finalName, extension, activeFile);
      await this.app.fileManager.renameFile(imageFile, finalPath);
      const abstractFile = this.app.vault.getAbstractFileByPath(finalPath);
      if (!(abstractFile instanceof import_obsidian6.TFile)) {
        throw new Error("Renamed file not found");
      }
      const renamedFile = abstractFile;
      const linkText = this.storageManager.generateMarkdownLink(
        renamedFile,
        activeFile.path,
        displayText,
        this.settings.insertSize
      );
      return {
        file: renamedFile,
        path: finalPath,
        linkText,
        success: true
      };
    } catch (error) {
      console.error("Error renaming image file:", error);
      return {
        file: null,
        path: "",
        linkText: "",
        success: false,
        error: error instanceof Error ? error.message : String(error)
      };
    }
  }
  /**
   * Debug logging
   */
  log(...args) {
    if (this.settings.debugMode) {
      console.debug("[Image Manager]", ...args);
    }
  }
};

// src/services/PropertyHandler.ts
var import_obsidian8 = require("obsidian");

// src/utils/mdx-frontmatter.ts
var import_obsidian7 = require("obsidian");
function isMdxFile(file) {
  return file.extension === "mdx";
}
function isMarkdownFile(file) {
  return file.extension === "md" || file.extension === "mdx";
}
function parseMdxFrontmatter(content) {
  var _a;
  const frontmatterRegex = /^---\r?\n([\s\S]*?)\r?\n---\r?\n/;
  const match = content.match(frontmatterRegex);
  if (!match) {
    return {
      frontmatter: {},
      body: content
    };
  }
  const frontmatterText = (_a = match[1]) != null ? _a : "";
  const bodyContent = content.slice(match[0].length);
  try {
    const parsed = (0, import_obsidian7.parseYaml)(frontmatterText);
    const frontmatter = parsed && typeof parsed === "object" ? parsed : {};
    return {
      frontmatter,
      body: bodyContent
    };
  } catch (e) {
    console.error("Error parsing MDX properties:", e);
    return {
      frontmatter: {},
      body: bodyContent
    };
  }
}
async function readMdxFrontmatter(app, file) {
  if (!isMdxFile(file)) {
    return null;
  }
  try {
    const content = await app.vault.read(file);
    const parsed = parseMdxFrontmatter(content);
    return parsed ? parsed.frontmatter : null;
  } catch (e) {
    console.error(`Error reading MDX properties from ${file.path}:`, e);
    return null;
  }
}
async function processMdxFrontMatter(app, file, callback) {
  if (!isMdxFile(file)) {
    throw new Error(`File ${file.path} is not an MDX file`);
  }
  try {
    const content = await app.vault.read(file);
    const parsed = parseMdxFrontmatter(content);
    if (!parsed) {
      throw new Error("Failed to parse existing frontmatter");
    }
    const frontmatter = { ...parsed.frontmatter };
    callback(frontmatter);
    const newFrontmatterText = (0, import_obsidian7.stringifyYaml)(frontmatter).trim();
    const newContent = `---
${newFrontmatterText}
---
${parsed.body}`;
    await app.vault.modify(file, newContent);
  } catch (e) {
    console.error(`Error processing MDX properties for ${file.path}:`, e);
    throw e;
  }
}
async function getFrontmatter(app, file) {
  var _a;
  if (isMdxFile(file)) {
    return await readMdxFrontmatter(app, file);
  }
  const cache = app.metadataCache.getFileCache(file);
  return (_a = cache == null ? void 0 : cache.frontmatter) != null ? _a : null;
}

// src/services/PropertyHandler.ts
var PropertyHandler = class {
  constructor(app, settings, storageManager, imageProcessor, remoteService, observable) {
    this.app = app;
    this.settings = settings;
    this.storageManager = storageManager;
    this.imageProcessor = imageProcessor;
    this.remoteService = remoteService;
    observable == null ? void 0 : observable.subscribe((newSettings) => {
      this.updateSettings(newSettings);
    });
  }
  /**
   * Update settings reference
   */
  updateSettings(settings) {
    var _a;
    this.settings = settings;
    (_a = this.imageProcessor) == null ? void 0 : _a.updateSettings(settings);
  }
  /**
   * Set an image property value in frontmatter
   */
  async setPropertyValue(noteFile, propertyName, imageFile, altText) {
    const linkValue = this.formatPropertyLink(imageFile, noteFile);
    try {
      if (isMdxFile(noteFile)) {
        await this.setMdxProperty(noteFile, propertyName, linkValue, altText);
      } else {
        await this.setMdProperty(noteFile, propertyName, linkValue, altText);
      }
      new import_obsidian8.Notice(`Image added to property: ${propertyName}`);
    } catch (error) {
      console.error("Failed to update property:", error);
      new import_obsidian8.Notice(`Failed to update property: ${error instanceof Error ? error.message : String(error)}`);
      throw error;
    }
  }
  /**
   * Set property in MD file using Obsidian's API
   */
  async setMdProperty(file, propertyName, value, altText) {
    await this.app.fileManager.processFrontMatter(file, (frontmatter) => {
      frontmatter[propertyName] = value;
      if (altText && this.settings.altTextProperty) {
        frontmatter[this.settings.altTextProperty] = altText;
      }
    });
  }
  /**
   * Set property in MDX file using custom handler
   */
  async setMdxProperty(file, propertyName, value, altText) {
    await processMdxFrontMatter(this.app, file, (frontmatter) => {
      frontmatter[propertyName] = value;
      if (altText && this.settings.altTextProperty) {
        frontmatter[this.settings.altTextProperty] = altText;
      }
    });
  }
  /**
   * Format the image link according to settings
   * Public method so PasteHandler can get the formatted value for UI updates
   */
  formatPropertyLink(imageFile, noteFile) {
    if (this.settings.propertyLinkFormat === "obsidian" /* ObsidianDefault */) {
      const generatedLink = this.app.fileManager.generateMarkdownLink(imageFile, noteFile.path);
      if (generatedLink.startsWith("![") && generatedLink.includes("]]")) {
        return generatedLink.substring(1);
      } else if (generatedLink.startsWith("![") && generatedLink.includes("](")) {
        const match = generatedLink.match(/!\[.*?\]\((.*?)\)/);
        return match && match[1] ? match[1] : generatedLink;
      } else if (generatedLink.startsWith("[[") && generatedLink.endsWith("]]")) {
        return generatedLink;
      } else if (generatedLink.includes("](")) {
        const match = generatedLink.match(/\[.*?\]\((.*?)\)/);
        return match && match[1] ? match[1] : generatedLink;
      }
      return generatedLink;
    }
    let pathToUse;
    switch (this.settings.propertyLinkFormat) {
      case "relative" /* RelativePath */:
        pathToUse = `./${imageFile.name}`;
        break;
      case "custom" /* Custom */:
        pathToUse = imageFile.name;
        break;
      case "path" /* Path */:
      default:
        pathToUse = this.getRelativePath(noteFile, imageFile);
        break;
    }
    switch (this.settings.propertyLinkFormat) {
      case "wikilink" /* Wikilink */:
        return `[[${pathToUse}]]`;
      case "markdown" /* Markdown */:
        return `![](${encodeURI(pathToUse)})`;
      case "custom" /* Custom */:
        return this.settings.customPropertyLinkFormat.replace(
          /\{image-url\}/gi,
          pathToUse
        );
      case "relative" /* RelativePath */:
      case "path" /* Path */:
      default:
        return pathToUse;
    }
  }
  /**
   * Get relative path from note to image
   */
  getRelativePath(fromFile, toFile) {
    var _a;
    const vaultConfig = this.app.vault.config;
    const useMarkdownLinks = (_a = vaultConfig == null ? void 0 : vaultConfig.useMarkdownLinks) != null ? _a : false;
    const useWikilinks = !useMarkdownLinks;
    if (useWikilinks && this.settings.propertyLinkFormat === "wikilink" /* Wikilink */) {
      return toFile.name;
    }
    return this.storageManager.getRelativePath(fromFile, toFile);
  }
  /**
   * Get the current value of a property
   */
  getPropertyValue(file, propertyName) {
    var _a;
    const cache = this.app.metadataCache.getFileCache(file);
    return (_a = cache == null ? void 0 : cache.frontmatter) == null ? void 0 : _a[propertyName];
  }
  /**
   * Check if a property exists in frontmatter
   */
  hasProperty(file, propertyName) {
    var _a;
    const cache = this.app.metadataCache.getFileCache(file);
    return ((_a = cache == null ? void 0 : cache.frontmatter) == null ? void 0 : _a[propertyName]) !== void 0;
  }
  /**
   * Insert an image from a URL into a property
   * Downloads the image, saves it locally, and sets the property
   * @param remoteImage Optional RemoteImage object for generating referral text
   * @param suggestedNameOverride Optional override for suggested name (e.g., from search term)
   */
  async insertImageFromUrl(imageUrl, noteFile, propertyName, remoteImage, suggestedNameOverride) {
    const result = await this.imageProcessor.processImageUrl(
      imageUrl,
      noteFile,
      true,
      // Show rename modal if enabled
      true,
      // isPropertyInsertion - skip descriptive images
      suggestedNameOverride
      // Pass search term as suggested name
    );
    if (!result.success || !result.file) {
      throw new Error(result.error || "Failed to process image");
    }
    await this.setPropertyValue(noteFile, propertyName, result.file, result.description);
    if (this.settings.appendReferral && remoteImage && this.remoteService) {
      const referralText = this.remoteService.generateReferralText(remoteImage);
      if (referralText) {
        const content = await this.app.vault.read(noteFile);
        const updatedContent = content + referralText;
        await this.app.vault.modify(noteFile, updatedContent);
      }
    }
  }
};

// src/services/PasteHandler.ts
var import_obsidian9 = require("obsidian");
var PasteHandler = class {
  constructor(app, settings, imageProcessor, propertyHandler, observable) {
    this.app = app;
    this.settings = settings;
    this.imageProcessor = imageProcessor;
    this.propertyHandler = propertyHandler;
    observable == null ? void 0 : observable.subscribe((newSettings) => {
      this.updateSettings(newSettings);
    });
  }
  /**
   * Update settings reference
   */
  updateSettings(settings) {
    this.settings = settings;
  }
  /**
   * Handle editor paste event
   * This is registered via workspace.on('editor-paste')
   */
  async handleEditorPaste(evt, editor, view) {
    var _a;
    if (!this.settings.showRenameDialog || !this.settings.enableRenameOnPaste) {
      return false;
    }
    const activeEl = document.activeElement;
    if (activeEl && this.isFrontmatterField(activeEl)) {
      return false;
    }
    const files = (_a = evt.clipboardData) == null ? void 0 : _a.files;
    if (!files || files.length === 0) {
      return false;
    }
    const imageFiles = [];
    for (let i = 0; i < files.length; i++) {
      const file = files.item(i);
      if (file && file.type.startsWith("image/")) {
        imageFiles.push(file);
      }
    }
    if (imageFiles.length === 0) {
      return false;
    }
    evt.preventDefault();
    const activeFile = view.file;
    if (!activeFile) {
      new import_obsidian9.Notice("No active file");
      return true;
    }
    for (let i = 0; i < imageFiles.length; i++) {
      const imageFile = imageFiles[i];
      if (!imageFile) continue;
      const result = await this.imageProcessor.processImageFile(
        imageFile,
        activeFile,
        true
        // Show rename modal
      );
      if (result.success && result.linkText) {
        editor.replaceSelection(result.linkText);
      }
    }
    return true;
  }
  /**
   * Handle paste into frontmatter property
   * This is registered via document paste event with property detection
   */
  async handlePropertyPaste(evt) {
    var _a;
    if (!this.settings.showRenameDialog || !this.settings.enablePropertyPaste) {
      return false;
    }
    const activeEl = document.activeElement;
    if (!activeEl) {
      return false;
    }
    if (!this.isFrontmatterField(activeEl)) {
      return false;
    }
    if (this.settings.debugMode) {
      console.debug("[Image Manager] Property paste detected", {
        activeElement: activeEl.tagName,
        classes: activeEl.className,
        propertyName: this.getPropertyName(activeEl)
      });
    }
    const files = (_a = evt.clipboardData) == null ? void 0 : _a.files;
    if (!files || files.length === 0) {
      return false;
    }
    let imageFile = null;
    for (let i = 0; i < files.length; i++) {
      const f = files.item(i);
      if (f && f.type.startsWith("image/")) {
        imageFile = f;
        break;
      }
    }
    if (!imageFile) {
      return false;
    }
    const currentEl = document.activeElement;
    if (!currentEl || !this.isFrontmatterField(currentEl)) {
      return false;
    }
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile) {
      return false;
    }
    evt.preventDefault();
    evt.stopPropagation();
    evt.stopImmediatePropagation();
    const propertyName = this.getPropertyName(currentEl);
    if (!propertyName) {
      new import_obsidian9.Notice("Could not determine property name");
      return true;
    }
    const result = await this.imageProcessor.processImageFile(
      imageFile,
      activeFile,
      true,
      // Show rename modal for property paste
      true
      // isPropertyInsertion - skip descriptive images
    );
    if (result.success && result.file) {
      const linkValue = this.propertyHandler.formatPropertyLink(result.file, activeFile);
      await this.propertyHandler.setPropertyValue(
        activeFile,
        propertyName,
        result.file,
        result.description
      );
      await new Promise((resolve) => setTimeout(resolve, 300));
      const propertyEl = document.querySelector(
        `.metadata-property[data-property-key="${propertyName}"]`
      );
      if (this.settings.debugMode) {
        console.debug("[Image Manager] Updating property UI", {
          propertyName,
          linkValue,
          propertyElFound: !!propertyEl
        });
      }
      const inputEl = propertyEl == null ? void 0 : propertyEl.querySelector(
        ".metadata-input-longtext, .metadata-input-text, input.metadata-input, textarea.metadata-input"
      );
      if (inputEl) {
        if (this.settings.debugMode) {
          const currentValue = inputEl instanceof HTMLInputElement || inputEl instanceof HTMLTextAreaElement ? inputEl.value : inputEl.textContent || inputEl.innerText;
          console.debug("[Image Manager] Found input field, updating value", {
            elementType: inputEl.tagName,
            currentValue,
            newValue: linkValue
          });
        }
        if (inputEl instanceof HTMLInputElement || inputEl instanceof HTMLTextAreaElement) {
          inputEl.value = linkValue;
        } else {
          inputEl.textContent = linkValue;
          inputEl.innerText = linkValue;
        }
        const inputEvent = new Event("input", { bubbles: true, cancelable: true });
        const changeEvent = new Event("change", { bubbles: true, cancelable: true });
        const blurEvent = new Event("blur", { bubbles: true, cancelable: true });
        inputEl.dispatchEvent(inputEvent);
        setTimeout(() => {
          inputEl.dispatchEvent(changeEvent);
          if (inputEl instanceof HTMLElement) {
            inputEl.focus();
            setTimeout(() => {
              inputEl.blur();
              inputEl.dispatchEvent(blurEvent);
              setTimeout(() => {
                const view = this.app.workspace.getActiveViewOfType(import_obsidian9.MarkdownView);
                if (view == null ? void 0 : view.editor) {
                  view.editor.focus();
                }
              }, 50);
            }, 50);
          }
        }, 50);
      } else {
        const view = this.app.workspace.getActiveViewOfType(import_obsidian9.MarkdownView);
        if (view == null ? void 0 : view.editor) {
          view.editor.focus();
        }
      }
    }
    return true;
  }
  /**
   * Check if an element is a supported frontmatter field
   * Works for both MD and MDX files
   */
  isFrontmatterField(element) {
    const propertyEl = element.closest(".metadata-property");
    if (!propertyEl) {
      return false;
    }
    return element.matches(".metadata-input-longtext") || element.matches(".metadata-input-text") || element.matches("input.metadata-input") || element.matches("textarea.metadata-input") || // Also check if the element itself is an input/textarea/div inside a property
    (element instanceof HTMLInputElement || element instanceof HTMLTextAreaElement || element instanceof HTMLDivElement && element.classList.contains("metadata-input-longtext")) && propertyEl !== null;
  }
  /**
   * Get the property name from a frontmatter field element
   */
  getPropertyName(element) {
    var _a;
    const propertyEl = element.closest(".metadata-property");
    return (_a = propertyEl == null ? void 0 : propertyEl.getAttribute("data-property-key")) != null ? _a : null;
  }
};
var DropHandler = class {
  constructor(app, settings, imageProcessor, observable) {
    this.app = app;
    this.settings = settings;
    this.imageProcessor = imageProcessor;
    observable == null ? void 0 : observable.subscribe((newSettings) => {
      this.updateSettings(newSettings);
    });
  }
  /**
   * Update settings reference
   */
  updateSettings(settings) {
    this.settings = settings;
  }
  /**
   * Handle editor drop event
   */
  async handleEditorDrop(evt, editor, view) {
    var _a;
    if (!this.settings.showRenameDialog || !this.settings.enableRenameOnDrop) {
      return false;
    }
    const files = (_a = evt.dataTransfer) == null ? void 0 : _a.files;
    if (!files || files.length === 0) {
      return false;
    }
    const imageFiles = [];
    for (let i = 0; i < files.length; i++) {
      const f = files.item(i);
      if (f && f.type.startsWith("image/")) {
        imageFiles.push(f);
      }
    }
    if (imageFiles.length === 0) {
      return false;
    }
    evt.preventDefault();
    const activeFile = view.file;
    if (!activeFile) {
      new import_obsidian9.Notice("No active file");
      return true;
    }
    for (let i = 0; i < imageFiles.length; i++) {
      const imageFile = imageFiles[i];
      if (!imageFile) continue;
      const result = await this.imageProcessor.processImageFile(
        imageFile,
        activeFile,
        true
      );
      if (result.success && result.linkText) {
        editor.replaceSelection(result.linkText);
      }
    }
    return true;
  }
};

// src/services/RemoteImageService.ts
var import_obsidian10 = require("obsidian");
var UNSPLASH_PROXY = "https://insert-unsplash-image.cloudy9101.com/";
var RemoteImageService = class {
  constructor(app, settings, observable) {
    this.app = app;
    this.settings = settings;
    observable == null ? void 0 : observable.subscribe((newSettings) => {
      this.updateSettings(newSettings);
    });
  }
  /**
   * Update settings reference
   */
  updateSettings(settings) {
    this.settings = settings;
  }
  /**
   * Search for images from the specified provider
   */
  async search(query, provider, page = 1) {
    const targetProvider = provider != null ? provider : this.settings.defaultProvider;
    switch (targetProvider) {
      case "unsplash" /* Unsplash */:
        return await this.searchUnsplash(query, page);
      case "pexels" /* Pexels */:
        return await this.searchPexels(query, page);
      case "pixabay" /* Pixabay */:
        return await this.searchPixabay(query, page);
      default:
        throw new Error(`Unsupported provider: ${targetProvider}`);
    }
  }
  /**
   * Search Unsplash
   */
  async searchUnsplash(query, page) {
    var _a;
    let proxyUrl = this.settings.unsplashProxyServer || UNSPLASH_PROXY;
    if (!proxyUrl.endsWith("/")) {
      proxyUrl += "/";
    }
    const orientation = this.mapOrientation(this.settings.defaultOrientation);
    const url = new URL("/search/photos", proxyUrl);
    url.searchParams.set("query", query);
    url.searchParams.set("page", String(page));
    url.searchParams.set("per_page", "20");
    if (orientation) {
      url.searchParams.set("orientation", orientation);
    }
    const response = await (0, import_obsidian10.requestUrl)({ url: url.toString() });
    if (response.status >= 400) {
      console.error("Unsplash API error:", response.status, response.text);
      throw new Error(`Unsplash search failed: ${response.status} - ${response.text}`);
    }
    const data = response.json;
    if (!data || !data.results) {
      console.error("Invalid Unsplash response:", data);
      throw new Error("Invalid response from Unsplash API");
    }
    const results = (_a = data.results) != null ? _a : [];
    return results.map((photo) => this.mapUnsplashPhoto(photo));
  }
  /**
   * Get Pexels API key from SecretStorage or fall back to plaintext
   */
  getPexelsApiKey() {
    if ((0, import_obsidian10.requireApiVersion)("1.11.4") && this.settings.pexelsApiKeySecretId) {
      const secretStorage = this.app.secretStorage;
      if (secretStorage) {
        const secret = secretStorage.getSecret(this.settings.pexelsApiKeySecretId);
        if (secret) {
          return secret;
        }
      }
    }
    return this.settings.pexelsApiKey || null;
  }
  /**
   * Get Pixabay API key from SecretStorage or fall back to plaintext
   */
  getPixabayApiKey() {
    if ((0, import_obsidian10.requireApiVersion)("1.11.4") && this.settings.pixabayApiKeySecretId) {
      const secretStorage = this.app.secretStorage;
      if (secretStorage) {
        const secret = secretStorage.getSecret(this.settings.pixabayApiKeySecretId);
        if (secret) {
          return secret;
        }
      }
    }
    return this.settings.pixabayApiKey || null;
  }
  /**
   * Search Pexels
   */
  async searchPexels(query, page) {
    var _a;
    const apiKey = this.getPexelsApiKey();
    if (!apiKey) {
      const errorMsg = (0, import_obsidian10.requireApiVersion)("1.11.4") ? "Pexels API key is required. Please configure it in settings (use SecretStorage on Obsidian 1.11.4+ or enter plaintext on older versions)." : "Pexels API key is required. Please configure it in settings.";
      throw new Error(errorMsg);
    }
    const orientation = this.mapOrientation(this.settings.defaultOrientation);
    const params = new URLSearchParams({
      query,
      page: String(page),
      per_page: "20"
    });
    if (orientation) {
      params.set("orientation", orientation);
    }
    const url = `https://api.pexels.com/v1/search?${params.toString()}`;
    const response = await (0, import_obsidian10.requestUrl)({
      url,
      headers: {
        Authorization: apiKey
      }
    });
    if (response.status >= 400) {
      throw new Error(`Pexels search failed: ${response.status}`);
    }
    const data = response.json;
    const photos = (_a = data.photos) != null ? _a : [];
    return photos.map((photo) => this.mapPexelsPhoto(photo));
  }
  /**
   * Search Pixabay
   */
  async searchPixabay(query, page) {
    var _a;
    const apiKey = this.getPixabayApiKey();
    if (!apiKey) {
      const errorMsg = (0, import_obsidian10.requireApiVersion)("1.11.4") ? "Pixabay API key is required. Please configure it in settings (use SecretStorage on Obsidian 1.11.4+ or enter plaintext on older versions)." : "Pixabay API key is required. Please configure it in settings.";
      throw new Error(errorMsg);
    }
    const orientation = this.mapPixabayOrientation(this.settings.defaultOrientation);
    const params = new URLSearchParams({
      key: apiKey,
      q: query,
      page: String(page),
      per_page: "20",
      image_type: "photo"
    });
    if (orientation) {
      params.set("orientation", orientation);
    }
    const url = `https://pixabay.com/api/?${params.toString()}`;
    const response = await (0, import_obsidian10.requestUrl)({ url });
    if (response.status >= 400) {
      throw new Error(`Pixabay search failed: ${response.status}`);
    }
    const data = response.json;
    const hits = (_a = data.hits) != null ? _a : [];
    return hits.map((hit) => this.mapPixabayHit(hit));
  }
  /**
   * Get the download URL for an image based on size preference
   */
  getDownloadUrl(image, size) {
    const targetSize = size != null ? size : this.settings.defaultImageSize;
    switch (targetSize) {
      case "original" /* Original */:
        return image.fullUrl;
      case "large" /* Large */:
        return image.regularUrl;
      case "medium" /* Medium */:
        return image.regularUrl;
      case "small" /* Small */:
        return image.thumbnailUrl;
      default:
        return image.regularUrl;
    }
  }
  /**
   * Download an image and return the binary data
   */
  async downloadImage(image) {
    const url = this.getDownloadUrl(image);
    const response = await (0, import_obsidian10.requestUrl)({ url });
    if (response.status >= 400) {
      throw new Error(`Failed to download image: ${response.status}`);
    }
    return response.arrayBuffer;
  }
  /**
   * Generate referral text for an image (attribution)
   */
  generateReferralText(image) {
    if (!this.settings.insertReferral) {
      return "";
    }
    const backlink = this.settings.insertBackLink && image.pageUrl ? `[Backlink](${image.pageUrl}) | ` : "";
    let referral = "";
    switch (image.provider) {
      case "unsplash" /* Unsplash */:
        if (image.author && image.authorUrl) {
          const utm = "utm_source=Obsidian%20Image%20Manager&utm_medium=referral";
          referral = `
*${backlink}Photo by [${image.author}](${image.authorUrl}) on [Unsplash](https://unsplash.com/?${utm})*
`;
        }
        break;
      case "pexels" /* Pexels */:
        if (image.author && image.authorUrl) {
          referral = `
*${backlink}Photo by [${image.author}](${image.authorUrl}) on [Pexels](https://www.pexels.com/)*
`;
        }
        break;
      case "pixabay" /* Pixabay */:
        if (image.author && image.authorUrl) {
          referral = `
*${backlink}Image by [${image.author}](${image.authorUrl}) on [Pixabay](https://pixabay.com/)*
`;
        }
        break;
    }
    return referral;
  }
  /**
   * Map orientation setting to API parameter
   */
  mapOrientation(orientation) {
    switch (orientation) {
      case "landscape" /* Landscape */:
        return "landscape";
      case "portrait" /* Portrait */:
        return "portrait";
      case "square" /* Square */:
        return "squarish";
      default:
        return null;
    }
  }
  /**
   * Map orientation for Pixabay (different values)
   */
  mapPixabayOrientation(orientation) {
    switch (orientation) {
      case "landscape" /* Landscape */:
        return "horizontal";
      case "portrait" /* Portrait */:
        return "vertical";
      default:
        return null;
    }
  }
  /**
   * Map Unsplash photo to RemoteImage
   */
  mapUnsplashPhoto(photo) {
    var _a, _b;
    return {
      id: photo.id,
      provider: "unsplash" /* Unsplash */,
      thumbnailUrl: photo.urls.thumb,
      regularUrl: photo.urls.regular,
      fullUrl: photo.urls.full,
      downloadUrl: photo.links.download_location || photo.links.download,
      width: photo.width,
      height: photo.height,
      description: (_b = (_a = photo.description) != null ? _a : photo.alt_description) != null ? _b : "",
      author: photo.user.name,
      authorUrl: photo.user.links.html,
      pageUrl: photo.links.html
    };
  }
  /**
   * Map Pexels photo to RemoteImage
   */
  mapPexelsPhoto(photo) {
    var _a;
    return {
      id: String(photo.id),
      provider: "pexels" /* Pexels */,
      thumbnailUrl: photo.src.tiny,
      regularUrl: photo.src.large,
      fullUrl: photo.src.original,
      downloadUrl: photo.src.original,
      width: photo.width,
      height: photo.height,
      description: (_a = photo.alt) != null ? _a : "",
      author: photo.photographer,
      authorUrl: photo.photographer_url,
      pageUrl: photo.url
    };
  }
  /**
   * Map Pixabay hit to RemoteImage
   */
  mapPixabayHit(hit) {
    return {
      id: String(hit.id),
      provider: "pixabay" /* Pixabay */,
      thumbnailUrl: hit.previewURL,
      regularUrl: hit.webformatURL,
      fullUrl: hit.largeImageURL,
      downloadUrl: hit.largeImageURL,
      width: hit.imageWidth,
      height: hit.imageHeight,
      description: hit.tags,
      author: hit.user,
      authorUrl: `https://pixabay.com/users/${hit.user}-${hit.user_id}/`,
      pageUrl: hit.pageURL
    };
  }
};

// src/services/LocalConversionService.ts
var import_obsidian11 = require("obsidian");
var MARKDOWN_IMAGE_REGEX = /!\[([^\]]*)\]\((https?:\/\/[^\s)]+)\)/g;
var HTML_IMAGE_REGEX = /<img[^>]+src=["'](https?:\/\/[^"']+)["'][^>]*>/g;
var LocalConversionService = class {
  constructor(app, settings, storageManager, imageProcessor, observable) {
    this.app = app;
    this.settings = settings;
    this.storageManager = storageManager;
    this.imageProcessor = imageProcessor;
    observable == null ? void 0 : observable.subscribe((newSettings) => {
      this.updateSettings(newSettings);
    });
  }
  /**
   * Update settings reference
   */
  updateSettings(settings) {
    var _a;
    this.settings = settings;
    (_a = this.imageProcessor) == null ? void 0 : _a.updateSettings(settings);
  }
  /**
   * Process a file to convert all remote images to local
   * @param file - The file to process
   * @param isBackground - If true, skip conversion if user interaction (modal) would be required
   */
  async processFile(file, isBackground = false) {
    if (!isMarkdownFile(file)) {
      return 0;
    }
    const content = await this.app.vault.read(file);
    const { newContent, count } = await this.processContent(content, file, isBackground);
    if (count > 0) {
      await this.app.vault.modify(file, newContent);
    }
    return count;
  }
  /**
   * Process content and replace remote images with local
   */
  async processContent(content, sourceFile, isBackground = false) {
    let newContent = content;
    let count = 0;
    const externalImages = await this.findExternalImages(content, sourceFile);
    for (const image of externalImages) {
      try {
        if (isBackground && !this.settings.autoRename) {
          continue;
        }
        const tempPath = await this.downloadAndSave(image.url, sourceFile);
        if (!tempPath) {
          continue;
        }
        const tempFile = this.app.vault.getAbstractFileByPath(tempPath);
        if (!(tempFile instanceof import_obsidian11.TFile)) {
          continue;
        }
        let finalFile = tempFile;
        const suggestedName = image.alt ? this.storageManager.sanitizeFileName(image.alt) : tempFile.basename;
        const result = await this.imageProcessor.renameImageFile(
          tempFile,
          suggestedName,
          sourceFile
        );
        if (result && result.file) {
          finalFile = result.file;
        } else {
          await this.app.fileManager.trashFile(tempFile);
          continue;
        }
        newContent = newContent.replace(image.fullMatch, image.replacement(finalFile.path));
        count++;
      } catch (error) {
        console.error(`Failed to convert image: ${image.url}`, error);
      }
    }
    return { newContent, count };
  }
  /**
   * Check if a position in content is inside a code block
   */
  isInsideCodeBlock(content, position) {
    const fencedCodeBlockRegex = /```[\s\S]*?```/g;
    let match;
    while ((match = fencedCodeBlockRegex.exec(content)) !== null) {
      const start = match.index;
      const end = start + match[0].length;
      if (position >= start && position < end) {
        return true;
      }
    }
    const fencedPositions = Array.from({ length: content.length }, () => false);
    const fencedRegex = /```[\s\S]*?```/g;
    while ((match = fencedRegex.exec(content)) !== null) {
      for (let i = match.index; i < match.index + match[0].length; i++) {
        fencedPositions[i] = true;
      }
    }
    const inlineCodeRegex = /`[^`\n]+`/g;
    while ((match = inlineCodeRegex.exec(content)) !== null) {
      if (fencedPositions[match.index]) {
        continue;
      }
      const start = match.index;
      const end = start + match[0].length;
      if (position >= start && position < end) {
        return true;
      }
    }
    return false;
  }
  /**
   * Find all external images in content
   * Verifies each URL with HEAD request to ensure it actually serves an image
   */
  async findExternalImages(content, sourceFile) {
    var _a;
    const candidateMatches = [];
    let match;
    const mdRegex = new RegExp(MARKDOWN_IMAGE_REGEX.source, "g");
    while ((match = mdRegex.exec(content)) !== null) {
      const matchIndex = match.index;
      if (this.isInsideCodeBlock(content, matchIndex)) {
        continue;
      }
      const fullMatch = match[0];
      const alt = (_a = match[1]) != null ? _a : "";
      const url = match[2];
      if (url && this.isExternalUrl(url) && this.isImageUrl(url)) {
        const sourceFileRef = sourceFile;
        candidateMatches.push({
          fullMatch,
          url,
          alt,
          replacement: (localPath) => {
            const savedFile = this.app.vault.getAbstractFileByPath(localPath);
            if (savedFile instanceof import_obsidian11.TFile) {
              const link = this.storageManager.generateMarkdownLink(savedFile, sourceFileRef.path);
              if (alt && link.startsWith("![") && link.includes("]]")) {
                return link.replace("]]", `|${alt}]]`);
              }
              if (link.startsWith("![") && link.includes("](")) {
                const pathMatch = link.match(/\]\(([^)]+)\)/);
                if (pathMatch) {
                  return `![${alt}](${pathMatch[1]})`;
                }
                return `![${alt}](${encodeURI(localPath)})`;
              }
              return link;
            }
            const localFile = this.app.vault.getAbstractFileByPath(localPath);
            if (localFile instanceof import_obsidian11.TFile) {
              const relativePath = this.storageManager.getRelativePath(sourceFileRef, localFile);
              return `![${alt}](${encodeURI(relativePath)})`;
            }
            return `![${alt}](${encodeURI(localPath)})`;
          }
        });
      }
    }
    const htmlRegex = new RegExp(HTML_IMAGE_REGEX.source, "g");
    while ((match = htmlRegex.exec(content)) !== null) {
      const matchIndex = match.index;
      if (this.isInsideCodeBlock(content, matchIndex)) {
        continue;
      }
      const fullMatch = match[0];
      const url = match[1];
      if (url && this.isExternalUrl(url) && this.isImageUrl(url)) {
        candidateMatches.push({
          fullMatch,
          url,
          replacement: (localPath) => `![](${encodeURI(localPath)})`
        });
      }
    }
    const verifiedMatches = [];
    for (const candidate of candidateMatches) {
      const isImage = await this.verifyImageUrl(candidate.url);
      if (isImage) {
        verifiedMatches.push(candidate);
      }
    }
    return verifiedMatches;
  }
  /**
   * Check if a URL is external
   */
  isExternalUrl(url) {
    try {
      const parsed = new URL(url);
      return ["http:", "https:"].includes(parsed.protocol);
    } catch (e) {
      return false;
    }
  }
  /**
   * Check if a URL should be considered for image conversion
   * Returns false for known non-image embed domains (YouTube, etc.)
   * This is a preliminary filter - actual image verification happens via HEAD request
   */
  isImageUrl(url) {
    try {
      const parsed = new URL(url);
      const hostname = parsed.hostname.toLowerCase();
      const nonImageDomains = [
        "youtube.com",
        "www.youtube.com",
        "youtu.be",
        "m.youtube.com",
        "youtube-nocookie.com",
        "www.youtube-nocookie.com",
        "vimeo.com",
        "www.vimeo.com",
        "spotify.com",
        "open.spotify.com",
        "soundcloud.com",
        "www.soundcloud.com"
      ];
      if (nonImageDomains.some((domain) => hostname === domain || hostname.endsWith("." + domain))) {
        return false;
      }
      return true;
    } catch (e) {
      return false;
    }
  }
  /**
   * Verify if a URL actually serves an image by checking Content-Type header
   * Uses HEAD request to avoid downloading non-image content
   */
  async verifyImageUrl(url) {
    var _a, _b;
    try {
      const response = await (0, import_obsidian11.requestUrl)({ url, method: "HEAD" });
      const contentType = (_b = (_a = response.headers["content-type"]) == null ? void 0 : _a.toLowerCase()) != null ? _b : "";
      return contentType.startsWith("image/");
    } catch (e) {
      return false;
    }
  }
  /**
   * Download an image and save it locally
   * Includes Content-Type validation as a safety net
   */
  async downloadAndSave(url, sourceFile) {
    var _a, _b, _c;
    try {
      const response = await (0, import_obsidian11.requestUrl)({ url });
      if (response.status >= 400) {
        throw new Error(`HTTP ${response.status}`);
      }
      const contentType = (_a = response.headers["content-type"]) != null ? _a : "";
      if (!contentType.toLowerCase().startsWith("image/")) {
        console.warn(`Skipping ${url}: Content-Type is ${contentType}, not an image`);
        return null;
      }
      const extension = this.storageManager.getExtensionFromMimeType(contentType);
      const arrayBuffer = response.arrayBuffer;
      const urlPath = new URL(url).pathname;
      const urlFileName = (_c = (_b = urlPath.split("/").pop()) == null ? void 0 : _b.split(".")[0]) != null ? _c : "image";
      const baseName = this.storageManager.sanitizeFileName(urlFileName);
      const filePath = await this.storageManager.getAvailablePath(baseName, extension, sourceFile);
      await this.storageManager.saveFile(arrayBuffer, filePath);
      return filePath;
    } catch (error) {
      console.error(`Failed to download ${url}:`, error);
      return null;
    }
  }
  /**
   * Process all files in the vault
   */
  async processAllFiles() {
    const files = this.app.vault.getMarkdownFiles();
    let totalCount = 0;
    for (const file of files) {
      if (this.settings.supportedExtensions.includes(file.extension)) {
        const count = await this.processFile(file);
        totalCount += count;
      }
    }
    return totalCount;
  }
  /**
   * Register event handlers for automatic conversion
   */
  registerEventHandlers(onNoteOpen, onNoteSave) {
  }
};

// src/services/BannerService.ts
var import_obsidian12 = require("obsidian");
var ObsidianModule2 = __toESM(require("obsidian"), 1);
function setCssProperties(element, props) {
  const obsidian = ObsidianModule2;
  if (typeof obsidian.setCssProperties === "function") {
    obsidian.setCssProperties(element, props);
  } else {
    for (const [key, value] of Object.entries(props)) {
      element.style.setProperty(key, value);
    }
  }
}
var CSS_CLASSES = {
  Main: "image-manager-banner",
  Content: "banner-content",
  Icon: "banner-icon",
  Static: "static"
};
var PATTERNS = {
  Wikilink: /^!?\[\[([^\]]+?)(\|([^\]]+?))?\]\]$/,
  Markdown: /^!?\[([^\]]*)\]\(([^)]+?)\)$/,
  MarkdownBare: /^!?<([^>]+)>$/,
  Weblink: /^https?:\/\//i
};
var bannerDataStore = /* @__PURE__ */ new Map();
var BannerService = class {
  constructor(app, settings, observable) {
    this.app = app;
    this.settings = settings;
    observable == null ? void 0 : observable.subscribe((newSettings) => {
      this.updateSettings(newSettings);
      this.applySettings();
    });
  }
  /**
   * Update settings reference
   */
  updateSettings(settings) {
    this.settings = settings;
  }
  /**
   * Get the current device type
   */
  getCurrentDevice() {
    if (import_obsidian12.Platform.isPhone) {
      return "phone" /* Phone */;
    }
    if (import_obsidian12.Platform.isTablet) {
      return "tablet" /* Tablet */;
    }
    return "desktop" /* Desktop */;
  }
  /**
   * Get device-specific settings
   */
  getDeviceSettings() {
    const device = this.getCurrentDevice();
    return this.settings.banner[device];
  }
  /**
   * Process all open markdown views
   */
  processAll(force = false) {
    const deviceSettings = this.getDeviceSettings();
    this.app.workspace.iterateRootLeaves((leaf) => {
      const view = leaf.view;
      if (view instanceof import_obsidian12.MarkdownView) {
        if (deviceSettings.enabled) {
          const file = (view == null ? void 0 : view.file) || null;
          void this.process(file, view, force);
        } else {
          this.remove(view);
        }
      }
    });
  }
  /**
   * Process a single file/view
   */
  async process(file, view, force = false) {
    const data = await this.compute(file, view);
    if (!data) {
      return;
    }
    if (force) {
      data.needsUpdate = true;
    }
    if (!data.image) {
      this.remove(view, data);
      return;
    }
    if (!data.icon) {
      data.needsUpdate = true;
    }
    const deviceSettings = this.getDeviceSettings();
    if (deviceSettings.enabled) {
      await this.render(data, view, force);
    }
  }
  /**
   * Compute banner data from frontmatter
   */
  async compute(file, targetView) {
    var _a;
    const view = targetView || this.getActiveView();
    if (!file || !(view instanceof import_obsidian12.MarkdownView)) {
      return null;
    }
    const deviceSettings = this.getDeviceSettings();
    if (!deviceSettings.enabled) {
      return null;
    }
    if (!this.settings.supportedExtensions.includes(file.extension) && file.extension !== "md") {
      return null;
    }
    const leafId = (_a = view == null ? void 0 : view.leaf) == null ? void 0 : _a.id;
    if (!leafId) {
      return null;
    }
    const oldData = bannerDataStore.get(leafId) || this.createDefaultBannerData();
    const newData = this.createDefaultBannerData(view, oldData.viewMode);
    if (file.extension === "md") {
      const cache = this.app.metadataCache.getFileCache(file);
      if ((cache == null ? void 0 : cache.frontmatter) != null) {
        const propertySettings2 = this.settings.banner.properties;
        const imageProp2 = propertySettings2.imageProperty;
        const iconProp2 = propertySettings2.iconProperty;
        if (propertySettings2.hidePropertyEnabled && propertySettings2.hideProperty) {
          const hideProp = propertySettings2.hideProperty;
          const hideValue = cache.frontmatter[hideProp];
          if (hideValue === true || hideValue === "true" || hideValue === 1 || hideValue === "1") {
            return newData;
          }
        }
        const hasBannerProperty = cache.frontmatter[imageProp2] != null;
        const hasIconProperty = deviceSettings.iconEnabled && cache.frontmatter[iconProp2] != null;
        if (!hasBannerProperty && !hasIconProperty) {
          return newData;
        }
      }
    }
    const frontmatter = await getFrontmatter(this.app, file);
    if (!frontmatter) {
      return newData;
    }
    const propertySettings = this.settings.banner.properties;
    if (propertySettings.hidePropertyEnabled && propertySettings.hideProperty) {
      const hideProp = propertySettings.hideProperty;
      const hideValue = frontmatter[hideProp];
      if (hideValue === true || hideValue === "true" || hideValue === 1 || hideValue === "1") {
        return newData;
      }
    }
    const imageProp = propertySettings.imageProperty;
    const iconProp = propertySettings.iconProperty;
    const imageValue = frontmatter[imageProp];
    if (imageValue && typeof imageValue === "string") {
      newData.image = imageValue;
      newData.filepath = file.path;
      if (oldData.filepath !== newData.filepath) {
        newData.needsUpdate = true;
        newData.isImageChange = true;
      } else if (oldData.image !== newData.image) {
        newData.needsUpdate = true;
        newData.isImageChange = true;
        if (await this.isImagePropertiesUpdate(oldData.image, newData.image, view)) {
          newData.isImagePropsUpdate = true;
          newData.isImageChange = false;
        }
      }
    }
    if (deviceSettings.iconEnabled) {
      const iconValue = frontmatter[iconProp];
      if (iconValue && typeof iconValue === "string") {
        newData.icon = iconValue;
        if (oldData.icon !== newData.icon) {
          newData.needsUpdate = true;
        }
      } else if (oldData.icon) {
        newData.icon = null;
        newData.needsUpdate = true;
      }
    }
    return newData;
  }
  /**
   * Render banner in the view
   */
  async render(data, targetView, force = false) {
    var _a;
    const { image, viewMode, lastViewMode, needsUpdate, isImageChange } = data;
    const view = targetView || this.getActiveView();
    if (!view || !(view instanceof import_obsidian12.MarkdownView)) {
      return;
    }
    const container = view.containerEl;
    if (!container || !force && !needsUpdate && lastViewMode === viewMode) {
      return;
    }
    const containers = container.querySelectorAll(
      ".cm-scroller, .markdown-reading-view > .markdown-preview-view"
    );
    if (containers.length === 0) {
      return;
    }
    const imageOptions = await this.parseLink(image || "", view);
    const banners = this.updateBannerElements(data, imageOptions, containers);
    await this.updateIcons(data, banners, view);
    if (isImageChange) {
      this.injectBanners(banners, containers);
    } else {
      this.replaceBanners(banners);
    }
    data.lastViewMode = viewMode;
    container.dataset.imBanner = "";
    const leafId = (_a = view == null ? void 0 : view.leaf) == null ? void 0 : _a.id;
    if (leafId) {
      bannerDataStore.set(leafId, data);
    }
  }
  /**
   * Update banner DOM elements
   */
  updateBannerElements(data, imgOptions, containers) {
    const { isImageChange, isImagePropsUpdate } = data;
    const banners = [];
    containers.forEach((container) => {
      var _a;
      let element = container.querySelector(`.${CSS_CLASSES.Main}`);
      if (!element) {
        element = document.createElement("div");
        element.classList.add(CSS_CLASSES.Main);
      }
      let content = element.querySelector(`.${CSS_CLASSES.Content}`);
      if (!content) {
        content = document.createElement("div");
        content.classList.add(CSS_CLASSES.Content);
        element.appendChild(content);
      }
      banners.push(element);
      if (isImageChange || isImagePropsUpdate) {
        if (isImageChange) {
          element.classList.remove(CSS_CLASSES.Static);
          (_a = content.firstChild) == null ? void 0 : _a.remove();
        }
        const cssVars = {
          "--im-banner-img-x": `${imgOptions.x}px`,
          "--im-banner-img-y": `${imgOptions.y}px`,
          "--im-banner-size": imgOptions.repeatable ? "auto" : "cover",
          "--im-banner-repeat": imgOptions.repeatable ? "repeat" : "no-repeat",
          "--im-banner-url": "none"
        };
        if (imgOptions.type === "video" /* Video */) {
          const video = document.createElement("video");
          video.controls = false;
          video.autoplay = true;
          video.muted = true;
          video.loop = true;
          video.src = imgOptions.url.replace(/^"|"$/g, "");
          content.appendChild(video);
        } else {
          cssVars["--im-banner-url"] = `url(${imgOptions.url})`;
        }
        setCssProperties(container, cssVars);
      }
    });
    return banners;
  }
  /**
   * Update icon elements on banners
   */
  async updateIcons(data, banners, view) {
    var _a;
    const deviceSettings = this.getDeviceSettings();
    let calculatedFontSize = null;
    for (const banner of banners) {
      const { icon } = data;
      let iconContainer = banner.querySelector(`.${CSS_CLASSES.Icon}`);
      const hasContainer = iconContainer !== null;
      if (hasContainer) {
        iconContainer == null ? void 0 : iconContainer.classList.add(CSS_CLASSES.Static);
      }
      if (deviceSettings.iconEnabled && icon) {
        if (!hasContainer) {
          iconContainer = document.createElement("div");
          iconContainer.classList.add(CSS_CLASSES.Icon);
          const innerDiv = document.createElement("div");
          iconContainer.appendChild(innerDiv);
          banner.prepend(iconContainer);
        }
        const iconElement = iconContainer == null ? void 0 : iconContainer.querySelector("div");
        if (!iconElement) continue;
        const iconData = await this.parseIcon(icon, view);
        let value = ((_a = iconData.value) == null ? void 0 : _a.replace(/([#.:[\\]"])/g, "\\$1")) || "";
        iconElement.dataset.type = iconData.type;
        if (iconData.type === "link" /* Link */) {
          setCssProperties(iconElement, {
            "--im-banner-icon-value": `url(${value})`
          });
        } else {
          calculatedFontSize = calculatedFontSize != null ? calculatedFontSize : this.calculateFontSize(value, deviceSettings.iconSize);
          setCssProperties(iconElement, {
            "--im-banner-icon-value": `"${value}"`,
            "--im-banner-icon-fontsize": calculatedFontSize
          });
        }
      } else if (hasContainer && iconContainer) {
        data.icon = null;
        iconContainer.remove();
      }
    }
  }
  /**
   * Inject banners into containers
   */
  injectBanners(banners, containers) {
    const deviceSettings = this.getDeviceSettings();
    const shouldAnimate = deviceSettings.animation;
    containers.forEach((container, index) => {
      const banner = banners[index];
      if (banner) {
        banner.classList.remove(CSS_CLASSES.Static);
        container.prepend(banner);
        if (shouldAnimate) {
          void banner.offsetHeight;
          requestAnimationFrame(() => {
            banner.onanimationend = () => {
              banner.classList.add(CSS_CLASSES.Static);
            };
          });
        } else {
          banner.classList.add(CSS_CLASSES.Static);
        }
      }
    });
  }
  /**
   * Replace banners (no animation)
   */
  replaceBanners(banners) {
    banners.forEach((banner) => {
      banner.classList.add(CSS_CLASSES.Static);
    });
  }
  /**
   * Remove banner from view
   */
  remove(view, data) {
    var _a;
    const targetView = view || (data == null ? void 0 : data.filepath) ? this.getActiveView() : null;
    if (!(targetView instanceof import_obsidian12.MarkdownView)) {
      return;
    }
    const container = targetView.containerEl;
    if (!container) {
      return;
    }
    const targets = container.querySelectorAll(`.${CSS_CLASSES.Main}`);
    targets.forEach((t) => t.remove());
    const leafId = (_a = targetView == null ? void 0 : targetView.leaf) == null ? void 0 : _a.id;
    if (leafId) {
      bannerDataStore.delete(leafId);
    }
    delete container.dataset.imBanner;
  }
  /**
   * Apply current settings to DOM
   */
  applySettings() {
    var _a;
    const deviceSettings = this.getDeviceSettings();
    const height = deviceSettings.height;
    const noteOffset = deviceSettings.noteOffset;
    const viewOffset = deviceSettings.viewOffset;
    const radius = deviceSettings.bannerRadiusEnabled ? deviceSettings.borderRadius : [0, 0, 0, 0];
    const padding = deviceSettings.padding;
    const fade = deviceSettings.fade;
    const cssVars = {
      "--im-banner-height": `${height}px`,
      "--im-banner-note-offset": `${noteOffset}px`,
      "--im-banner-view-offset": `${viewOffset}px`,
      "--im-banner-radius": `${radius[0]}px ${radius[1]}px ${radius[2]}px ${radius[3]}px`,
      "--im-banner-padding": `${padding}px`,
      "--im-banner-mask": fade ? "revert-layer" : "initial",
      "--im-banner-mask-webkit": fade ? "revert-layer" : "initial"
    };
    if (deviceSettings.iconEnabled) {
      const iconFrame = (_a = deviceSettings.iconFrame) != null ? _a : true;
      cssVars["--im-banner-icon-size-w"] = `${deviceSettings.iconSize}px`;
      cssVars["--im-banner-icon-size-h"] = `${deviceSettings.iconSize}px`;
      cssVars["--im-banner-icon-radius"] = `${deviceSettings.iconRadius}px`;
      cssVars["--im-banner-icon-align-h"] = deviceSettings.iconAlignmentH;
      cssVars["--im-banner-icon-align-v"] = deviceSettings.iconAlignmentV;
      cssVars["--im-banner-icon-offset-x"] = `${deviceSettings.iconOffsetX}px`;
      cssVars["--im-banner-icon-offset-y"] = `${deviceSettings.iconOffsetY}px`;
      cssVars["--im-banner-icon-border"] = iconFrame ? `${deviceSettings.iconBorder}px` : "0px";
      cssVars["--im-banner-icon-background"] = iconFrame && deviceSettings.iconBackground ? "revert-layer" : "transparent";
    }
    setCssProperties(document.body, cssVars);
    this.processAll(true);
  }
  /**
   * Parse image link string into options
   */
  async parseLink(str, view) {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k;
    let url = null;
    let displayText = null;
    let external = false;
    let obsidianUrl = false;
    let options = { x: 0, y: 0, repeatable: false };
    const wikilinkMatch = str.match(PATTERNS.Wikilink);
    if (wikilinkMatch) {
      url = (_b = (_a = wikilinkMatch[1]) == null ? void 0 : _a.trim()) != null ? _b : null;
      displayText = (_d = (_c = wikilinkMatch[3]) == null ? void 0 : _c.trim()) != null ? _d : null;
    }
    const markdownMatch = str.match(PATTERNS.Markdown);
    const markdownBareMatch = str.match(PATTERNS.MarkdownBare);
    if (markdownMatch) {
      displayText = (_f = (_e = markdownMatch[1]) == null ? void 0 : _e.trim()) != null ? _f : null;
      url = (_h = (_g = markdownMatch[2]) == null ? void 0 : _g.trim()) != null ? _h : null;
    } else if (markdownBareMatch) {
      url = (_j = (_i = markdownBareMatch[1]) == null ? void 0 : _i.trim()) != null ? _j : null;
      displayText = null;
    }
    if (!url) {
      url = str;
      displayText = null;
    }
    external = PATTERNS.Weblink.test(url);
    if (this.isObsidianUrl(url)) {
      const urlStr = url.replace("obsidian://open", "");
      const params = new URLSearchParams(urlStr);
      const file = params.get("file");
      if (file) {
        url = file;
        obsidianUrl = true;
        external = false;
        displayText = null;
      }
    }
    if (url.startsWith("file:")) {
      url = url.replace(/^file:\/{1,}/, import_obsidian12.Platform.resourcePathPrefix);
      external = true;
    }
    const hashIndex = url.indexOf("#");
    if ((external || obsidianUrl) && hashIndex !== -1) {
      options = this.parseImageProperties(url.substring(hashIndex + 1));
      url = url.replace(/#.*/, "").trim();
    }
    if (displayText) {
      options = this.parseImageProperties(displayText);
    }
    if (!external) {
      const vault = this.app.vault;
      let file = null;
      if ((view == null ? void 0 : view.file) && (url.includes("../") || url.includes("./") || !url.startsWith("/") && url.includes("/"))) {
        const resolvedPath = this.app.metadataCache.getFirstLinkpathDest(url, view.file.path);
        if (resolvedPath) {
          file = resolvedPath;
        }
      }
      if (!file) {
        const files = vault.getFiles().filter((f) => f.path === url || f.name === url);
        file = files.find((f) => f.path === url) || files.find((f) => f.name === url) || null;
      }
      if (file) {
        url = vault.getResourcePath(file);
      }
    }
    let type = null;
    try {
      const urlObj = new URL(url);
      const extension = (_k = urlObj.pathname.split(".").pop()) == null ? void 0 : _k.toLowerCase();
      const imageExtensions = ["jpg", "jpeg", "png", "gif", "svg", "webp"];
      const videoExtensions = ["mp4", "webm", "ogg", "ogv", "mov"];
      if (extension && imageExtensions.includes(extension)) {
        type = "image" /* Image */;
      } else if (extension && videoExtensions.includes(extension)) {
        type = "video" /* Video */;
      }
      if (!type) {
        try {
          const response = await (0, import_obsidian12.requestUrl)({ url, method: "HEAD" });
          const contentType = (response == null ? void 0 : response.headers["content-type"]) || null;
          if (contentType) {
            if (contentType.includes("image")) {
              type = "image" /* Image */;
            } else if (contentType.includes("video")) {
              type = "video" /* Video */;
            }
          }
        } catch (e) {
        }
      }
    } catch (e) {
    }
    return {
      url: `"${url.trim().replace(/(["\\])/g, "\\$1")}"`,
      external,
      type,
      ...options
    };
  }
  /**
   * Parse image properties (offset, repeat) from string
   */
  parseImageProperties(str) {
    const values = str.toLowerCase();
    const repeatable = values.includes("repeat");
    const sizes = str.split(/x|,/);
    const numbers = sizes.filter((v) => !isNaN(parseInt(v.trim(), 10)));
    let x = 0;
    let y = 0;
    const num0 = numbers[0];
    const num1 = numbers[1];
    if (numbers.length === 2 && num0 && num1) {
      x = parseInt(num0.trim(), 10);
      y = parseInt(num1.trim(), 10);
    } else if (numbers.length === 1 && num0) {
      y = parseInt(num0.trim(), 10);
    }
    return { x, y, repeatable };
  }
  /**
   * Parse icon property
   */
  async parseIcon(icon, view) {
    const str = icon || "";
    const result = { value: null, type: "text" /* Text */ };
    const isExplicitLink = PATTERNS.Wikilink.test(str) || PATTERNS.Markdown.test(str) || PATTERNS.MarkdownBare.test(str) || PATTERNS.Weblink.test(str) || this.isObsidianUrl(str);
    const imageExtensions = /\.(jpg|jpeg|png|gif|svg|webp|bmp|ico|avif)$/i;
    const isFilePath = imageExtensions.test(str);
    if (isExplicitLink || isFilePath) {
      result.type = "link" /* Link */;
      const data = await this.parseLink(str, view);
      result.value = data.url;
    } else {
      result.value = str;
    }
    return result;
  }
  /**
   * Check if only image properties changed (not the URL)
   */
  async isImagePropertiesUpdate(oldStr, newStr, view) {
    if (!oldStr || !newStr) {
      return false;
    }
    const oldOpt = await this.parseLink(oldStr, view);
    const newOpt = await this.parseLink(newStr, view);
    return oldOpt.url === newOpt.url;
  }
  /**
   * Check if URL is an obsidian:// URL
   */
  isObsidianUrl(url) {
    return url.startsWith("obsidian://open");
  }
  /**
   * Calculate font size to fit text in icon
   * Uses actual DOM measurement for accurate sizing
   */
  calculateFontSize(textContent, iconSize) {
    const temp = document.createElement("span");
    temp.addClass("im-measure-temp");
    setCssProperties(temp, {
      position: "absolute",
      visibility: "hidden",
      "white-space": "nowrap",
      padding: "0",
      margin: "0",
      left: "-9999px"
    });
    temp.textContent = textContent.toUpperCase();
    document.body.appendChild(temp);
    const checkWidth = iconSize - 16;
    let fontSize = iconSize;
    setCssProperties(temp, { "font-size": `${fontSize}px` });
    while (temp.offsetWidth > checkWidth && fontSize > 1) {
      fontSize -= 1;
      setCssProperties(temp, { "font-size": `${fontSize}px` });
    }
    document.body.removeChild(temp);
    return `${fontSize}px`;
  }
  /**
   * Get active markdown view
   */
  getActiveView() {
    return this.app.workspace.getActiveViewOfType(import_obsidian12.MarkdownView);
  }
  /**
   * Create default banner data object
   */
  createDefaultBannerData(view, lastViewMode) {
    let viewMode = null;
    if (view) {
      const mode = view.getMode();
      viewMode = mode === "preview" ? "preview" : "source";
    }
    return {
      filepath: null,
      image: null,
      icon: null,
      viewMode,
      lastViewMode: lastViewMode || null,
      isImagePropsUpdate: false,
      isImageChange: false,
      needsUpdate: false
    };
  }
  /**
   * Cleanup when plugin unloads
   */
  destroy() {
    document.querySelectorAll(`.${CSS_CLASSES.Main}`).forEach((el) => el.remove());
    bannerDataStore.clear();
  }
};

// src/modals/FilePickerModal.ts
var import_obsidian13 = require("obsidian");
var FilePickerModal = class extends import_obsidian13.Modal {
  constructor(app, imageProcessor, propertyHandler, insertToProperty = false, propertyName) {
    super(app);
    this.imageProcessor = imageProcessor;
    this.propertyHandler = propertyHandler;
    this.insertToProperty = insertToProperty;
    this.propertyName = propertyName;
  }
  onOpen() {
    const { contentEl } = this;
    const input = contentEl.createEl("input", {
      type: "file",
      attr: {
        accept: "image/*",
        multiple: "true",
        style: "display: none;"
      }
    });
    input.addEventListener("change", () => {
      void this.handleFileSelection(input);
    });
    input.addEventListener("cancel", () => {
      this.close();
    });
    input.click();
  }
  async handleFileSelection(input) {
    this.close();
    const files = input.files;
    if (!files || files.length === 0) {
      new import_obsidian13.Notice("No files selected");
      return;
    }
    const activeFile = this.getActiveFile();
    if (!activeFile) {
      new import_obsidian13.Notice("No active file");
      return;
    }
    const view = this.app.workspace.getActiveViewOfType(import_obsidian13.MarkdownView);
    const editor = view == null ? void 0 : view.editor;
    for (let i = 0; i < files.length; i++) {
      const file = files.item(i);
      if (!file || !file.type.startsWith("image/")) {
        continue;
      }
      if (this.insertToProperty) {
        if (!this.propertyName || this.propertyName.trim() === "") {
          new import_obsidian13.Notice("Please specify a property name in settings");
          return;
        }
        const result = await this.imageProcessor.processImageFile(
          file,
          activeFile,
          true,
          // Show rename modal
          true
          // isPropertyInsertion - skip descriptive images
        );
        if (result.success && result.file) {
          await this.propertyHandler.setPropertyValue(
            activeFile,
            this.propertyName,
            result.file
          );
        }
      } else {
        const result = await this.imageProcessor.processImageFile(
          file,
          activeFile,
          true
          // Show rename modal
        );
        if (result.success && result.linkText && editor) {
          editor.replaceSelection(result.linkText);
        }
      }
    }
    new import_obsidian13.Notice(`Added ${files.length} image(s)`);
  }
  getActiveFile() {
    var _a;
    const view = this.app.workspace.getActiveViewOfType(import_obsidian13.MarkdownView);
    return (_a = view == null ? void 0 : view.file) != null ? _a : null;
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
function openFilePicker(app, imageProcessor, propertyHandler, insertToProperty = false, propertyName) {
  new FilePickerModal(app, imageProcessor, propertyHandler, insertToProperty, propertyName).open();
}

// src/modals/RemoteSearchModal.ts
var import_obsidian14 = require("obsidian");
var RemoteSearchModal = class extends import_obsidian14.Modal {
  constructor(app, settings, remoteService, imageProcessor, propertyHandler, options = {}) {
    super(app);
    this.container = null;
    this.queryInput = null;
    this.providerSelect = null;
    this.sizeSelect = null;
    this.scrollArea = null;
    this.imagesList = null;
    this.loadingContainer = null;
    this.currentQuery = "";
    this.currentPage = 1;
    this.currentResults = [];
    this.isLoading = false;
    this.selectedImage = 0;
    this.settings = settings;
    this.remoteService = remoteService;
    this.imageProcessor = imageProcessor;
    this.propertyHandler = propertyHandler;
    this.options = options;
    this.currentProvider = settings.defaultProvider;
    this.containerEl.addClass("image-inserter-container");
  }
  onOpen() {
    const { contentEl } = this;
    this.container = contentEl.createDiv({ cls: "container" });
    const inputGroup = this.container.createDiv({ cls: "input-group" });
    this.queryInput = inputGroup.createEl("input", {
      type: "text",
      cls: "query-input",
      attr: { placeholder: "Search images...", autofocus: "true" }
    });
    this.providerSelect = inputGroup.createEl("select", { cls: "selector" });
    this.providerSelect.createEl("option", { text: "Unsplash", value: "unsplash" /* Unsplash */ });
    this.providerSelect.createEl("option", { text: "Pexels", value: "pexels" /* Pexels */ });
    this.providerSelect.createEl("option", { text: "Pixabay", value: "pixabay" /* Pixabay */ });
    this.providerSelect.value = this.currentProvider;
    this.sizeSelect = inputGroup.createEl("select", { cls: "selector" });
    this.sizeSelect.createEl("option", { text: "Original", value: "original" /* Original */ });
    this.sizeSelect.createEl("option", { text: "Large", value: "large" /* Large */ });
    this.sizeSelect.createEl("option", { text: "Medium", value: "medium" /* Medium */ });
    this.sizeSelect.createEl("option", { text: "Small", value: "small" /* Small */ });
    this.sizeSelect.value = this.settings.defaultImageSize;
    this.loadingContainer = this.container.createDiv({ cls: "loading-container" });
    const loaderIcon = this.loadingContainer.createDiv({ cls: "loader-icon" });
    const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
    svg.setAttribute("width", "24");
    svg.setAttribute("height", "24");
    svg.setAttribute("viewBox", "0 0 24 24");
    svg.setAttribute("fill", "none");
    svg.setAttribute("stroke", "currentColor");
    svg.setAttribute("stroke-width", "2");
    svg.setAttribute("stroke-linecap", "round");
    svg.setAttribute("stroke-linejoin", "round");
    svg.classList.add("lucide", "lucide-loader-circle");
    const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
    path.setAttribute("d", "M21 12a9 9 0 1 1-6.219-8.56");
    svg.appendChild(path);
    loaderIcon.appendChild(svg);
    this.showLoading(false);
    this.scrollArea = this.container.createDiv({ cls: "scroll-area" });
    this.imagesList = this.scrollArea.createDiv({ cls: "images-list" });
    this.setupEventListeners();
    setTimeout(() => {
      var _a;
      (_a = this.queryInput) == null ? void 0 : _a.focus();
    }, 50);
  }
  setupEventListeners() {
    var _a, _b, _c, _d;
    const debouncedSearch = (0, import_obsidian14.debounce)((query) => {
      if (query.trim()) {
        void this.performSearch(query, true);
      } else {
        this.clearResults();
      }
    }, 1e3, true);
    (_a = this.queryInput) == null ? void 0 : _a.addEventListener("input", (e) => {
      const query = e.target.value;
      this.currentQuery = query;
      this.showLoading(true);
      debouncedSearch(query);
    });
    (_b = this.queryInput) == null ? void 0 : _b.addEventListener("keydown", (e) => {
      var _a2;
      if (e.key === "Enter") {
        e.preventDefault();
        const query = ((_a2 = this.queryInput) == null ? void 0 : _a2.value.trim()) || "";
        if (query) {
          void this.performSearch(query, true);
        } else if (this.currentResults.length > 0 && this.selectedImage < this.currentResults.length) {
          const image = this.currentResults[this.selectedImage];
          if (image) {
            void this.insertImage(image);
          }
        }
      } else if (e.ctrlKey && e.key === "n") {
        e.preventDefault();
        if (this.currentResults.length > 0) {
          this.selectedImage = (this.selectedImage + 1) % this.currentResults.length;
          this.renderResults();
        }
      } else if (e.ctrlKey && e.key === "p") {
        e.preventDefault();
        if (this.currentResults.length > 0) {
          this.selectedImage = (this.selectedImage - 1 + this.currentResults.length) % this.currentResults.length;
          this.renderResults();
        }
      }
    });
    (_c = this.providerSelect) == null ? void 0 : _c.addEventListener("change", (e) => {
      this.currentProvider = e.target.value;
      if (this.currentQuery) {
        this.showLoading(true);
        void this.performSearch(this.currentQuery, true);
      }
    });
    (_d = this.sizeSelect) == null ? void 0 : _d.addEventListener("change", (e) => {
      const size = e.target.value;
      this.settings.defaultImageSize = size;
      if (this.currentQuery) {
        this.showLoading(true);
        void this.performSearch(this.currentQuery, true);
      }
    });
  }
  async performSearch(query, resetPage = false) {
    if (this.isLoading) return;
    this.currentQuery = query;
    if (resetPage) {
      this.currentPage = 1;
    }
    this.isLoading = true;
    this.showLoading(true);
    try {
      this.currentResults = await this.remoteService.search(
        query,
        this.currentProvider,
        this.currentPage
      );
      this.selectedImage = 0;
      this.renderResults();
    } catch (error) {
      console.error("Search failed:", error);
      const errorMsg = error instanceof Error ? error.message : "Search failed";
      new import_obsidian14.Notice(`Request failed, status ${errorMsg}`);
      this.renderError(errorMsg);
    } finally {
      this.isLoading = false;
      this.showLoading(false);
    }
  }
  renderResults() {
    if (!this.imagesList) return;
    this.imagesList.empty();
    if (this.currentResults.length === 0) {
      const noResult = this.imagesList.createDiv({ cls: "no-result-container" });
      noResult.setText("No results found");
      return;
    }
    for (let i = 0; i < this.currentResults.length; i++) {
      const image = this.currentResults[i];
      if (!image) continue;
      const result = this.imagesList.createDiv({
        cls: `query-result${i === this.selectedImage ? " is-selected" : ""}`
      });
      result.createEl("img", {
        attr: {
          src: image.thumbnailUrl,
          alt: image.description || "Image"
        }
      });
      result.addEventListener("click", () => {
        void this.insertImage(image);
      });
      result.addEventListener("mousemove", () => {
        this.selectedImage = i;
        this.renderResults();
      });
    }
    this.renderPagination();
  }
  renderPagination() {
    if (!this.scrollArea) return;
    const existingPagination = this.scrollArea.querySelector(".pagination");
    if (existingPagination) {
      existingPagination.remove();
    }
    const hasMore = this.currentResults.length >= 20;
    if (hasMore || this.currentPage > 1) {
      const pagination = this.scrollArea.createDiv({ cls: "pagination" });
      if (this.currentPage > 1) {
        const prevBtn = pagination.createEl("button", { cls: "btn", text: "Previous" });
        prevBtn.addEventListener("click", () => {
          this.currentPage--;
          this.showLoading(true);
          void this.performSearch(this.currentQuery);
        });
      }
      if (hasMore) {
        const nextBtn = pagination.createEl("button", { cls: "btn", text: "Next" });
        nextBtn.addEventListener("click", () => {
          this.currentPage++;
          this.showLoading(true);
          void this.performSearch(this.currentQuery);
        });
      }
    }
  }
  renderError(message) {
    if (!this.imagesList) return;
    this.imagesList.empty();
    const errorDiv = this.imagesList.createDiv({ cls: "no-result-container error-text" });
    errorDiv.setText(`Error: ${message}`);
  }
  clearResults() {
    if (this.imagesList) {
      this.imagesList.empty();
    }
    this.currentResults = [];
  }
  showLoading(show) {
    if (this.loadingContainer) {
      this.loadingContainer.style.display = show ? "flex" : "none";
    }
    if (this.scrollArea) {
      if (show) {
        this.scrollArea.addClass("loading");
      } else {
        this.scrollArea.removeClass("loading");
      }
    }
  }
  async insertImage(image) {
    this.close();
    const activeFile = this.getActiveFile();
    if (!activeFile) {
      new import_obsidian14.Notice("No active file");
      return;
    }
    try {
      const downloadUrl = this.remoteService.getDownloadUrl(image, this.settings.defaultImageSize);
      if (this.options.insertToProperty) {
        if (!this.options.propertyName || this.options.propertyName.trim() === "") {
          new import_obsidian14.Notice("Please specify a property name in settings");
          return;
        }
        await this.propertyHandler.insertImageFromUrl(
          downloadUrl,
          activeFile,
          this.options.propertyName,
          image,
          // Pass RemoteImage for referral text generation
          this.currentQuery
          // Pass search term as suggested name
        );
      } else {
        const result = await this.imageProcessor.processImageUrl(
          downloadUrl,
          activeFile,
          true,
          // Show rename modal
          false,
          // Not property insertion
          this.currentQuery
          // Pass search term as suggested name
        );
        if (result.success && result.linkText) {
          const referralText = this.remoteService.generateReferralText(image);
          const fullText = result.linkText + referralText;
          const view = this.app.workspace.getActiveViewOfType(import_obsidian14.MarkdownView);
          if (view == null ? void 0 : view.editor) {
            view.editor.replaceSelection(fullText);
          }
        }
      }
    } catch (error) {
      console.error("Failed to insert image:", error);
      new import_obsidian14.Notice(`Failed to insert image: ${error instanceof Error ? error.message : String(error)}`);
    }
  }
  getActiveFile() {
    var _a;
    const view = this.app.workspace.getActiveViewOfType(import_obsidian14.MarkdownView);
    return (_a = view == null ? void 0 : view.file) != null ? _a : null;
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
function openRemoteSearch(app, settings, remoteService, imageProcessor, propertyHandler, options = {}) {
  new RemoteSearchModal(app, settings, remoteService, imageProcessor, propertyHandler, options).open();
}

// src/main.ts
var SettingsObservable = class {
  constructor() {
    this.observers = [];
  }
  subscribe(fn) {
    this.observers.push(fn);
  }
  notify(settings) {
    this.observers.forEach((fn) => fn(settings));
  }
};
var ImageManagerPlugin = class extends import_obsidian16.Plugin {
  constructor() {
    super(...arguments);
    // Settings observer for notifying services of changes
    this.settingsObservable = new SettingsObservable();
  }
  async onload() {
    await this.loadSettings();
    await this.migrateApiKeysToSecrets();
    this.initializeServices();
    this.registerEventHandlers();
    this.registerCommands();
    this.addSettingTab(new ImageManagerSettingTab(this.app, this));
    this.log("Image Manager plugin loaded");
  }
  onunload() {
    var _a;
    (_a = this.bannerService) == null ? void 0 : _a.destroy();
    this.log("Image Manager plugin unloaded");
  }
  /**
   * Migrate API keys from plaintext to SecretStorage (one-time migration for 1.11.4+)
   * Only runs if Secrets API is available and secret IDs are not already set
   */
  async migrateApiKeysToSecrets() {
    if (!(0, import_obsidian16.requireApiVersion)("1.11.4")) {
      return;
    }
    let migrated = false;
    const failures = [];
    const secretStorage = this.app.secretStorage;
    if (!secretStorage) {
      return;
    }
    if (!this.settings.pexelsApiKeySecretId && this.settings.pexelsApiKey) {
      const secretId = "image-manager-pexels-api-key";
      try {
        secretStorage.setSecret(secretId, this.settings.pexelsApiKey);
        this.settings.pexelsApiKeySecretId = secretId;
        migrated = true;
        console.info("[Image Manager] Successfully migrated Pexels API key to SecretStorage");
      } catch (error) {
        console.error("[Image Manager] Failed to migrate Pexels API key to SecretStorage:", error);
        failures.push("Pexels");
      }
    }
    if (!this.settings.pixabayApiKeySecretId && this.settings.pixabayApiKey) {
      const secretId = "image-manager-pixabay-api-key";
      try {
        secretStorage.setSecret(secretId, this.settings.pixabayApiKey);
        this.settings.pixabayApiKeySecretId = secretId;
        migrated = true;
        console.info("[Image Manager] Successfully migrated Pixabay API key to SecretStorage");
      } catch (error) {
        console.error("[Image Manager] Failed to migrate Pixabay API key to SecretStorage:", error);
        failures.push("Pixabay");
      }
    }
    if (migrated) {
      await this.saveSettings();
      console.info("[Image Manager] API key migration completed");
    }
    if (failures.length > 0) {
      new import_obsidian16.Notice(
        `Image Manager: Failed to migrate ${failures.join(" and ")} API key(s) to secure storage. Please re-enter your API key(s) in settings.`,
        1e4
      );
    }
  }
  /**
   * Initialize all services
   */
  initializeServices() {
    this.storageManager = new StorageManager(this.app, this.settings, this.settingsObservable);
    this.remoteService = new RemoteImageService(this.app, this.settings, this.settingsObservable);
    this.imageProcessor = new ImageProcessor(this.app, this.settings, this.storageManager, this.settingsObservable);
    this.propertyHandler = new PropertyHandler(this.app, this.settings, this.storageManager, this.imageProcessor, this.remoteService, this.settingsObservable);
    this.pasteHandler = new PasteHandler(
      this.app,
      this.settings,
      this.imageProcessor,
      this.propertyHandler,
      this.settingsObservable
    );
    this.dropHandler = new DropHandler(this.app, this.settings, this.imageProcessor, this.settingsObservable);
    this.conversionService = new LocalConversionService(this.app, this.settings, this.storageManager, this.imageProcessor, this.settingsObservable);
    this.bannerService = new BannerService(this.app, this.settings, this.settingsObservable);
  }
  /**
   * Register event handlers
   */
  registerEventHandlers() {
    this.registerEvent(
      this.app.workspace.on("editor-paste", (evt, editor, view) => {
        void this.pasteHandler.handleEditorPaste(evt, editor, view);
      })
    );
    this.registerEvent(
      this.app.workspace.on("editor-drop", (evt, editor, view) => {
        void this.dropHandler.handleEditorDrop(evt, editor, view);
      })
    );
    this.registerDomEvent(document, "paste", (evt) => {
      const target = evt.target;
      if (!target || !target.closest(".workspace")) {
        return;
      }
      void this.pasteHandler.handlePropertyPaste(evt);
    }, { capture: true });
    this.registerEvent(
      this.app.workspace.on("file-open", (file) => {
        if (!file) {
          return;
        }
        if (this.settings.autoConvertRemoteImages && this.settings.convertOnNoteOpen) {
          if (this.settings.supportedExtensions.includes(file.extension)) {
            void (async () => {
              await new Promise((resolve) => setTimeout(resolve, 500));
              const activeFile = this.app.workspace.getActiveFile();
              const isActiveFile = activeFile && activeFile.path === file.path;
              if (isActiveFile || this.settings.processBackgroundChanges) {
                const count = await this.conversionService.processFile(file, !isActiveFile);
                if (count > 0) {
                  new import_obsidian16.Notice(`Converted ${count} remote image(s) to local`);
                }
              }
            })();
          }
        }
        const deviceSettings = this.bannerService.getDeviceSettings();
        if (deviceSettings.enabled && (this.settings.supportedExtensions.includes(file.extension) || file.extension === "md")) {
          const view = this.app.workspace.getActiveViewOfType(import_obsidian16.MarkdownView);
          if (view instanceof import_obsidian16.MarkdownView) {
            void this.bannerService.process(file, view);
          }
        }
      })
    );
    this.registerEvent(
      this.app.workspace.on("layout-change", () => {
        const deviceSettings = this.bannerService.getDeviceSettings();
        if (!deviceSettings.enabled) {
          return;
        }
        const view = this.app.workspace.getActiveViewOfType(import_obsidian16.MarkdownView);
        if (view && view.file && (this.settings.supportedExtensions.includes(view.file.extension) || view.file.extension === "md")) {
          void this.bannerService.process(view.file, view);
        }
      })
    );
    this.registerEvent(
      this.app.metadataCache.on("changed", (file) => {
        if (this.settings.autoConvertRemoteImages && this.settings.convertOnNoteSave) {
          if (this.settings.supportedExtensions.includes(file.extension)) {
            void (async () => {
              const activeFile = this.app.workspace.getActiveFile();
              const isActiveFile = activeFile && activeFile.path === file.path;
              if (isActiveFile || this.settings.processBackgroundChanges) {
                const count = await this.conversionService.processFile(file, !isActiveFile);
                if (count > 0) {
                  new import_obsidian16.Notice(`Converted ${count} remote image(s) to local`);
                }
              }
            })();
          }
        }
        const deviceSettings = this.bannerService.getDeviceSettings();
        if (!deviceSettings.enabled || !this.settings.supportedExtensions.includes(file.extension) && file.extension !== "md") {
          return;
        }
        this.app.workspace.iterateRootLeaves((leaf) => {
          const view = leaf.view;
          if (view instanceof import_obsidian16.MarkdownView && view.file === file) {
            void this.bannerService.process(file, view);
          }
        });
      })
    );
    this.app.workspace.onLayoutReady(() => {
      this.bannerService.applySettings();
    });
  }
  /**
   * Register commands
   */
  registerCommands() {
    this.addCommand({
      id: "insert-image",
      name: "Insert local image",
      editorCallback: (editor, view) => {
        openFilePicker(this.app, this.imageProcessor, this.propertyHandler);
      }
    });
    this.addCommand({
      id: "search-image",
      name: "Insert remote image",
      editorCallback: (editor, view) => {
        openRemoteSearch(
          this.app,
          this.settings,
          this.remoteService,
          this.imageProcessor,
          this.propertyHandler
        );
      }
    });
    this.addCommand({
      id: "insert-remote-image-to-property",
      name: "Insert remote image to property",
      editorCallback: (editor, view) => {
        openRemoteSearch(
          this.app,
          this.settings,
          this.remoteService,
          this.imageProcessor,
          this.propertyHandler,
          { insertToProperty: true, propertyName: this.settings.defaultPropertyName }
        );
      }
    });
    this.addCommand({
      id: "insert-local-image-to-property",
      name: "Insert local image to property",
      editorCallback: (editor, view) => {
        openFilePicker(
          this.app,
          this.imageProcessor,
          this.propertyHandler,
          true,
          // insertToProperty
          this.settings.defaultPropertyName
        );
      }
    });
    this.addCommand({
      id: "insert-remote-image-to-icon-property",
      name: "Insert remote image to icon property",
      editorCallback: (editor, view) => {
        openRemoteSearch(
          this.app,
          this.settings,
          this.remoteService,
          this.imageProcessor,
          this.propertyHandler,
          { insertToProperty: true, propertyName: this.settings.defaultIconPropertyName }
        );
      }
    });
    this.addCommand({
      id: "insert-local-image-to-icon-property",
      name: "Insert local image to icon property",
      editorCallback: (editor, view) => {
        openFilePicker(
          this.app,
          this.imageProcessor,
          this.propertyHandler,
          true,
          // insertToProperty
          this.settings.defaultIconPropertyName
        );
      }
    });
    this.addCommand({
      id: "convert-remote-images",
      name: "Convert remote images",
      editorCallback: async (editor, view) => {
        const file = view.file;
        if (!file) {
          new import_obsidian16.Notice("No active file");
          return;
        }
        const count = await this.conversionService.processFile(file);
        if (count > 0) {
          new import_obsidian16.Notice(`Converted ${count} remote image(s) to local`);
        } else {
          new import_obsidian16.Notice("No remote images found");
        }
      }
    });
    this.addCommand({
      id: "convert-all-remote-images",
      name: "Convert all remote images",
      callback: async () => {
        const { openConfirmModal: openConfirmModal2 } = await Promise.resolve().then(() => (init_ConfirmModal(), ConfirmModal_exports));
        const result = await openConfirmModal2(
          this.app,
          "Convert All Remote Images",
          "This will scan all files in your vault and convert every remote image URL to a local file. This action cannot be undone.\n\nEach image will be downloaded and you'll be prompted to rename them. This may take a while if you have many images.\n\nAre you sure you want to proceed?",
          "Yes, convert all images",
          "Cancel"
        );
        if (!result.confirmed) {
          return;
        }
        new import_obsidian16.Notice("Processing all files... This may take a while.");
        const count = await this.conversionService.processAllFiles();
        new import_obsidian16.Notice(`Converted ${count} remote image(s) to local`);
      }
    });
  }
  /**
   * Load settings from storage
   */
  async loadSettings() {
    const data = await this.loadData();
    this.settings = Object.assign({}, DEFAULT_SETTINGS, data != null ? data : {});
  }
  /**
   * Save settings to storage
   */
  async saveSettings() {
    await this.saveData(this.settings);
    this.settingsObservable.notify(this.settings);
  }
  /**
   * Debug logging
   */
  log(...args) {
    var _a;
    if ((_a = this.settings) == null ? void 0 : _a.debugMode) {
      console.debug("[Image Manager]", ...args);
    }
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21vZGFscy9Db25maXJtTW9kYWwudHMiLCAic3JjL21haW4udHMiLCAic3JjL3NldHRpbmdzLnRzIiwgInNyYy91dGlscy9zZXR0aW5ncy1jb21wYXQudHMiLCAic3JjL3R5cGVzLnRzIiwgInNyYy9zZXJ2aWNlcy9TdG9yYWdlTWFuYWdlci50cyIsICJzcmMvc2VydmljZXMvSW1hZ2VQcm9jZXNzb3IudHMiLCAic3JjL3V0aWxzL3RlbXBsYXRlLnRzIiwgInNyYy9tb2RhbHMvUmVuYW1lTW9kYWwudHMiLCAic3JjL21vZGFscy9EZXNjcmlwdGl2ZUltYWdlTW9kYWwudHMiLCAic3JjL3V0aWxzL2tlYmFiLWNhc2UudHMiLCAic3JjL3NlcnZpY2VzL1Byb3BlcnR5SGFuZGxlci50cyIsICJzcmMvdXRpbHMvbWR4LWZyb250bWF0dGVyLnRzIiwgInNyYy9zZXJ2aWNlcy9QYXN0ZUhhbmRsZXIudHMiLCAic3JjL3NlcnZpY2VzL1JlbW90ZUltYWdlU2VydmljZS50cyIsICJzcmMvc2VydmljZXMvTG9jYWxDb252ZXJzaW9uU2VydmljZS50cyIsICJzcmMvc2VydmljZXMvQmFubmVyU2VydmljZS50cyIsICJzcmMvbW9kYWxzL0ZpbGVQaWNrZXJNb2RhbC50cyIsICJzcmMvbW9kYWxzL1JlbW90ZVNlYXJjaE1vZGFsLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyIvKipcclxuICogQ29uZmlybWF0aW9uIE1vZGFsXHJcbiAqIFNpbXBsZSBtb2RhbCBmb3IgY29uZmlybWluZyBwb3RlbnRpYWxseSBkZXN0cnVjdGl2ZSBhY3Rpb25zXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQXBwLCBNb2RhbCB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ29uZmlybVJlc3VsdCB7XHJcblx0Y29uZmlybWVkOiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQ29uZmlybU1vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG5cdHByaXZhdGUgdGl0bGU6IHN0cmluZztcclxuXHRwcml2YXRlIG1lc3NhZ2U6IHN0cmluZztcclxuXHRwcml2YXRlIGNvbmZpcm1UZXh0OiBzdHJpbmc7XHJcblx0cHJpdmF0ZSBjYW5jZWxUZXh0OiBzdHJpbmc7XHJcblx0cHJpdmF0ZSByZXNvbHZlOiAocmVzdWx0OiBDb25maXJtUmVzdWx0KSA9PiB2b2lkO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihcclxuXHRcdGFwcDogQXBwLFxyXG5cdFx0dGl0bGU6IHN0cmluZyxcclxuXHRcdG1lc3NhZ2U6IHN0cmluZyxcclxuXHRcdGNvbmZpcm1UZXh0OiBzdHJpbmcgPSAnQ29uZmlybScsXHJcblx0XHRjYW5jZWxUZXh0OiBzdHJpbmcgPSAnQ2FuY2VsJ1xyXG5cdCkge1xyXG5cdFx0c3VwZXIoYXBwKTtcclxuXHRcdHRoaXMudGl0bGUgPSB0aXRsZTtcclxuXHRcdHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XHJcblx0XHR0aGlzLmNvbmZpcm1UZXh0ID0gY29uZmlybVRleHQ7XHJcblx0XHR0aGlzLmNhbmNlbFRleHQgPSBjYW5jZWxUZXh0O1xyXG5cdH1cclxuXHJcblx0b25PcGVuKCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgeyBjb250ZW50RWwsIHRpdGxlRWwgfSA9IHRoaXM7XHJcblx0XHR0aXRsZUVsLnNldFRleHQodGhpcy50aXRsZSk7XHJcblxyXG5cdFx0Ly8gTWVzc2FnZVxyXG5cdFx0Y29uc3QgbWVzc2FnZUVsID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ2ltYWdlLW1hbmFnZXItY29uZmlybS1tZXNzYWdlJyB9KTtcclxuXHRcdG1lc3NhZ2VFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogdGhpcy5tZXNzYWdlIH0pO1xyXG5cclxuXHRcdC8vIEJ1dHRvbnNcclxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdpbWFnZS1tYW5hZ2VyLWNvbmZpcm0tYnV0dG9ucycgfSk7XHJcblx0XHRcclxuXHRcdGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG5cdFx0XHR0ZXh0OiB0aGlzLmNvbmZpcm1UZXh0LFxyXG5cdFx0XHRjbHM6ICdtb2QtY3RhJyxcclxuXHRcdH0pLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0XHR0aGlzLnJlc29sdmUoeyBjb25maXJtZWQ6IHRydWUgfSk7XHJcblx0XHRcdHRoaXMuY2xvc2UoKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG5cdFx0XHR0ZXh0OiB0aGlzLmNhbmNlbFRleHQsXHJcblx0XHR9KS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRcdFx0dGhpcy5yZXNvbHZlKHsgY29uZmlybWVkOiBmYWxzZSB9KTtcclxuXHRcdFx0dGhpcy5jbG9zZSgpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gRm9jdXMgdGhlIGNvbmZpcm0gYnV0dG9uXHJcblx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0Y29uc3QgY29uZmlybUJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcubW9kLWN0YScpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG5cdFx0XHRjb25maXJtQnV0dG9uPy5mb2N1cygpO1xyXG5cdFx0fSwgNTApO1xyXG5cdH1cclxuXHJcblx0b25DbG9zZSgpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgb3BlbkFuZEF3YWl0UmVzdWx0KCk6IFByb21pc2U8Q29uZmlybVJlc3VsdD4ge1xyXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcblx0XHRcdHRoaXMucmVzb2x2ZSA9IHJlc29sdmU7XHJcblx0XHRcdHRoaXMub3BlbigpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG59XHJcblxyXG4vKipcclxuICogT3BlbiBhIGNvbmZpcm1hdGlvbiBtb2RhbCBhbmQgcmV0dXJuIHRoZSByZXN1bHRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBvcGVuQ29uZmlybU1vZGFsKFxyXG5cdGFwcDogQXBwLFxyXG5cdHRpdGxlOiBzdHJpbmcsXHJcblx0bWVzc2FnZTogc3RyaW5nLFxyXG5cdGNvbmZpcm1UZXh0OiBzdHJpbmcgPSAnQ29uZmlybScsXHJcblx0Y2FuY2VsVGV4dDogc3RyaW5nID0gJ0NhbmNlbCdcclxuKTogUHJvbWlzZTxDb25maXJtUmVzdWx0PiB7XHJcblx0Y29uc3QgbW9kYWwgPSBuZXcgQ29uZmlybU1vZGFsKGFwcCwgdGl0bGUsIG1lc3NhZ2UsIGNvbmZpcm1UZXh0LCBjYW5jZWxUZXh0KTtcclxuXHRyZXR1cm4gbW9kYWwub3BlbkFuZEF3YWl0UmVzdWx0KCk7XHJcbn1cclxuIiwgIi8qKlxuICogSW1hZ2UgTWFuYWdlciBQbHVnaW5cbiAqIEluc2VydCwgcmVuYW1lLCBhbmQgc29ydCBleHRlcm5hbCBpbWFnZXMgYnkgdHJhbnNmb3JtaW5nIHRoZW0gaW50byBsb2NhbCBmaWxlc1xuICovXG5cbmltcG9ydCB7IEVkaXRvciwgTWFya2Rvd25WaWV3LCBOb3RpY2UsIFBsdWdpbiwgcmVxdWlyZUFwaVZlcnNpb24sIFRGaWxlLCBXb3Jrc3BhY2VMZWFmIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgREVGQVVMVF9TRVRUSU5HUywgSW1hZ2VNYW5hZ2VyU2V0dGluZ3MsIEltYWdlTWFuYWdlclNldHRpbmdUYWIgfSBmcm9tICcuL3NldHRpbmdzJztcbmltcG9ydCB7IFN0b3JhZ2VNYW5hZ2VyIH0gZnJvbSAnLi9zZXJ2aWNlcy9TdG9yYWdlTWFuYWdlcic7XG5pbXBvcnQgeyBJbWFnZVByb2Nlc3NvciB9IGZyb20gJy4vc2VydmljZXMvSW1hZ2VQcm9jZXNzb3InO1xuaW1wb3J0IHsgUHJvcGVydHlIYW5kbGVyIH0gZnJvbSAnLi9zZXJ2aWNlcy9Qcm9wZXJ0eUhhbmRsZXInO1xuaW1wb3J0IHsgUGFzdGVIYW5kbGVyLCBEcm9wSGFuZGxlciB9IGZyb20gJy4vc2VydmljZXMvUGFzdGVIYW5kbGVyJztcbmltcG9ydCB7IFJlbW90ZUltYWdlU2VydmljZSB9IGZyb20gJy4vc2VydmljZXMvUmVtb3RlSW1hZ2VTZXJ2aWNlJztcbmltcG9ydCB7IExvY2FsQ29udmVyc2lvblNlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2VzL0xvY2FsQ29udmVyc2lvblNlcnZpY2UnO1xuaW1wb3J0IHsgQmFubmVyU2VydmljZSB9IGZyb20gJy4vc2VydmljZXMvQmFubmVyU2VydmljZSc7XG5pbXBvcnQgeyBvcGVuRmlsZVBpY2tlciB9IGZyb20gJy4vbW9kYWxzL0ZpbGVQaWNrZXJNb2RhbCc7XG5pbXBvcnQgeyBvcGVuUmVtb3RlU2VhcmNoIH0gZnJvbSAnLi9tb2RhbHMvUmVtb3RlU2VhcmNoTW9kYWwnO1xuXG4vKipcbiAqIFNpbXBsZSBvYnNlcnZlciBmb3Igc2V0dGluZ3MgY2hhbmdlc1xuICogU2VydmljZXMgc3Vic2NyaWJlIHRvIHJlY2VpdmUgc2V0dGluZ3MgdXBkYXRlcyB2aWEgYSBzaW5nbGUgbm90aWZ5KCkgY2FsbFxuICovXG5jbGFzcyBTZXR0aW5nc09ic2VydmFibGUge1xuXHRwcml2YXRlIG9ic2VydmVyczogKChzZXR0aW5nczogSW1hZ2VNYW5hZ2VyU2V0dGluZ3MpID0+IHZvaWQpW10gPSBbXTtcblxuXHRzdWJzY3JpYmUoZm46IChzZXR0aW5nczogSW1hZ2VNYW5hZ2VyU2V0dGluZ3MpID0+IHZvaWQpOiB2b2lkIHtcblx0XHR0aGlzLm9ic2VydmVycy5wdXNoKGZuKTtcblx0fVxuXG5cdG5vdGlmeShzZXR0aW5nczogSW1hZ2VNYW5hZ2VyU2V0dGluZ3MpOiB2b2lkIHtcblx0XHR0aGlzLm9ic2VydmVycy5mb3JFYWNoKGZuID0+IGZuKHNldHRpbmdzKSk7XG5cdH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSW1hZ2VNYW5hZ2VyUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcblx0c2V0dGluZ3M6IEltYWdlTWFuYWdlclNldHRpbmdzO1xuXG5cdC8vIFNldHRpbmdzIG9ic2VydmVyIGZvciBub3RpZnlpbmcgc2VydmljZXMgb2YgY2hhbmdlc1xuXHRwcml2YXRlIHNldHRpbmdzT2JzZXJ2YWJsZSA9IG5ldyBTZXR0aW5nc09ic2VydmFibGUoKTtcblxuXHQvLyBTZXJ2aWNlc1xuXHRwcml2YXRlIHN0b3JhZ2VNYW5hZ2VyOiBTdG9yYWdlTWFuYWdlcjtcblx0cHJpdmF0ZSBpbWFnZVByb2Nlc3NvcjogSW1hZ2VQcm9jZXNzb3I7XG5cdHByaXZhdGUgcHJvcGVydHlIYW5kbGVyOiBQcm9wZXJ0eUhhbmRsZXI7XG5cdHByaXZhdGUgcGFzdGVIYW5kbGVyOiBQYXN0ZUhhbmRsZXI7XG5cdHByaXZhdGUgZHJvcEhhbmRsZXI6IERyb3BIYW5kbGVyO1xuXHRwcml2YXRlIHJlbW90ZVNlcnZpY2U6IFJlbW90ZUltYWdlU2VydmljZTtcblx0cHJpdmF0ZSBjb252ZXJzaW9uU2VydmljZTogTG9jYWxDb252ZXJzaW9uU2VydmljZTtcblx0cHJpdmF0ZSBiYW5uZXJTZXJ2aWNlOiBCYW5uZXJTZXJ2aWNlO1xuXG5cdGFzeW5jIG9ubG9hZCgpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXG5cdFx0Ly8gTWlncmF0ZSBBUEkga2V5cyB0byBzZWNyZXRzIGlmIGF2YWlsYWJsZSAob25lLXRpbWUgbWlncmF0aW9uKVxuXHRcdGF3YWl0IHRoaXMubWlncmF0ZUFwaUtleXNUb1NlY3JldHMoKTtcblxuXHRcdC8vIEluaXRpYWxpemUgc2VydmljZXNcblx0XHR0aGlzLmluaXRpYWxpemVTZXJ2aWNlcygpO1xuXG5cdFx0Ly8gUmVnaXN0ZXIgZXZlbnQgaGFuZGxlcnNcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnRIYW5kbGVycygpO1xuXG5cdFx0Ly8gUmVnaXN0ZXIgY29tbWFuZHNcblx0XHR0aGlzLnJlZ2lzdGVyQ29tbWFuZHMoKTtcblxuXHRcdC8vIEFkZCBzZXR0aW5ncyB0YWJcblx0XHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IEltYWdlTWFuYWdlclNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcblxuXHRcdHRoaXMubG9nKCdJbWFnZSBNYW5hZ2VyIHBsdWdpbiBsb2FkZWQnKTtcblx0fVxuXG5cdG9udW5sb2FkKCk6IHZvaWQge1xuXHRcdC8vIENsZWFuIHVwIGJhbm5lciBzZXJ2aWNlXG5cdFx0dGhpcy5iYW5uZXJTZXJ2aWNlPy5kZXN0cm95KCk7XG5cblx0XHR0aGlzLmxvZygnSW1hZ2UgTWFuYWdlciBwbHVnaW4gdW5sb2FkZWQnKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBNaWdyYXRlIEFQSSBrZXlzIGZyb20gcGxhaW50ZXh0IHRvIFNlY3JldFN0b3JhZ2UgKG9uZS10aW1lIG1pZ3JhdGlvbiBmb3IgMS4xMS40Kylcblx0ICogT25seSBydW5zIGlmIFNlY3JldHMgQVBJIGlzIGF2YWlsYWJsZSBhbmQgc2VjcmV0IElEcyBhcmUgbm90IGFscmVhZHkgc2V0XG5cdCAqL1xuXHRwcml2YXRlIGFzeW5jIG1pZ3JhdGVBcGlLZXlzVG9TZWNyZXRzKCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdC8vIE9ubHkgbWlncmF0ZSBpZiBTZWNyZXRzIEFQSSBpcyBhdmFpbGFibGVcblx0XHRpZiAoIXJlcXVpcmVBcGlWZXJzaW9uKCcxLjExLjQnKSkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGxldCBtaWdyYXRlZCA9IGZhbHNlO1xuXHRcdGNvbnN0IGZhaWx1cmVzOiBzdHJpbmdbXSA9IFtdO1xuXG5cdFx0Ly8gQWNjZXNzIHNlY3JldFN0b3JhZ2UgdmlhIHR5cGUgYXNzZXJ0aW9uIChtYXkgbm90IGJlIGluIHR5cGUgZGVmaW5pdGlvbnMpXG5cdFx0Y29uc3Qgc2VjcmV0U3RvcmFnZSA9ICh0aGlzLmFwcCBhcyB1bmtub3duIGFzIHsgc2VjcmV0U3RvcmFnZT86IHsgc2V0U2VjcmV0KGlkOiBzdHJpbmcsIHNlY3JldDogc3RyaW5nKTogdm9pZCB9IH0pLnNlY3JldFN0b3JhZ2U7XG5cdFx0aWYgKCFzZWNyZXRTdG9yYWdlKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gTWlncmF0ZSBQZXhlbHMgQVBJIGtleVxuXHRcdGlmICghdGhpcy5zZXR0aW5ncy5wZXhlbHNBcGlLZXlTZWNyZXRJZCAmJiB0aGlzLnNldHRpbmdzLnBleGVsc0FwaUtleSkge1xuXHRcdFx0Y29uc3Qgc2VjcmV0SWQgPSAnaW1hZ2UtbWFuYWdlci1wZXhlbHMtYXBpLWtleSc7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRzZWNyZXRTdG9yYWdlLnNldFNlY3JldChzZWNyZXRJZCwgdGhpcy5zZXR0aW5ncy5wZXhlbHNBcGlLZXkpO1xuXHRcdFx0XHR0aGlzLnNldHRpbmdzLnBleGVsc0FwaUtleVNlY3JldElkID0gc2VjcmV0SWQ7XG5cdFx0XHRcdG1pZ3JhdGVkID0gdHJ1ZTtcblx0XHRcdFx0Y29uc29sZS5pbmZvKCdbSW1hZ2UgTWFuYWdlcl0gU3VjY2Vzc2Z1bGx5IG1pZ3JhdGVkIFBleGVscyBBUEkga2V5IHRvIFNlY3JldFN0b3JhZ2UnKTtcblx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ1tJbWFnZSBNYW5hZ2VyXSBGYWlsZWQgdG8gbWlncmF0ZSBQZXhlbHMgQVBJIGtleSB0byBTZWNyZXRTdG9yYWdlOicsIGVycm9yKTtcblx0XHRcdFx0ZmFpbHVyZXMucHVzaCgnUGV4ZWxzJyk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gTWlncmF0ZSBQaXhhYmF5IEFQSSBrZXlcblx0XHRpZiAoIXRoaXMuc2V0dGluZ3MucGl4YWJheUFwaUtleVNlY3JldElkICYmIHRoaXMuc2V0dGluZ3MucGl4YWJheUFwaUtleSkge1xuXHRcdFx0Y29uc3Qgc2VjcmV0SWQgPSAnaW1hZ2UtbWFuYWdlci1waXhhYmF5LWFwaS1rZXknO1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0c2VjcmV0U3RvcmFnZS5zZXRTZWNyZXQoc2VjcmV0SWQsIHRoaXMuc2V0dGluZ3MucGl4YWJheUFwaUtleSk7XG5cdFx0XHRcdHRoaXMuc2V0dGluZ3MucGl4YWJheUFwaUtleVNlY3JldElkID0gc2VjcmV0SWQ7XG5cdFx0XHRcdG1pZ3JhdGVkID0gdHJ1ZTtcblx0XHRcdFx0Y29uc29sZS5pbmZvKCdbSW1hZ2UgTWFuYWdlcl0gU3VjY2Vzc2Z1bGx5IG1pZ3JhdGVkIFBpeGFiYXkgQVBJIGtleSB0byBTZWNyZXRTdG9yYWdlJyk7XG5cdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHRjb25zb2xlLmVycm9yKCdbSW1hZ2UgTWFuYWdlcl0gRmFpbGVkIHRvIG1pZ3JhdGUgUGl4YWJheSBBUEkga2V5IHRvIFNlY3JldFN0b3JhZ2U6JywgZXJyb3IpO1xuXHRcdFx0XHRmYWlsdXJlcy5wdXNoKCdQaXhhYmF5Jyk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gU2F2ZSBzZXR0aW5ncyBpZiBtaWdyYXRpb24gb2NjdXJyZWRcblx0XHRpZiAobWlncmF0ZWQpIHtcblx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRjb25zb2xlLmluZm8oJ1tJbWFnZSBNYW5hZ2VyXSBBUEkga2V5IG1pZ3JhdGlvbiBjb21wbGV0ZWQnKTtcblx0XHR9XG5cblx0XHQvLyBTaG93IE5vdGljZSBpZiBhbnkgbWlncmF0aW9ucyBmYWlsZWRcblx0XHRpZiAoZmFpbHVyZXMubGVuZ3RoID4gMCkge1xuXHRcdFx0bmV3IE5vdGljZShcblx0XHRcdFx0YEltYWdlIE1hbmFnZXI6IEZhaWxlZCB0byBtaWdyYXRlICR7ZmFpbHVyZXMuam9pbignIGFuZCAnKX0gQVBJIGtleShzKSB0byBzZWN1cmUgc3RvcmFnZS4gYCArXG5cdFx0XHRcdGBQbGVhc2UgcmUtZW50ZXIgeW91ciBBUEkga2V5KHMpIGluIHNldHRpbmdzLmAsXG5cdFx0XHRcdDEwMDAwXG5cdFx0XHQpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBJbml0aWFsaXplIGFsbCBzZXJ2aWNlc1xuXHQgKi9cblx0cHJpdmF0ZSBpbml0aWFsaXplU2VydmljZXMoKTogdm9pZCB7XG5cdFx0dGhpcy5zdG9yYWdlTWFuYWdlciA9IG5ldyBTdG9yYWdlTWFuYWdlcih0aGlzLmFwcCwgdGhpcy5zZXR0aW5ncywgdGhpcy5zZXR0aW5nc09ic2VydmFibGUpO1xuXHRcdHRoaXMucmVtb3RlU2VydmljZSA9IG5ldyBSZW1vdGVJbWFnZVNlcnZpY2UodGhpcy5hcHAsIHRoaXMuc2V0dGluZ3MsIHRoaXMuc2V0dGluZ3NPYnNlcnZhYmxlKTtcblx0XHR0aGlzLmltYWdlUHJvY2Vzc29yID0gbmV3IEltYWdlUHJvY2Vzc29yKHRoaXMuYXBwLCB0aGlzLnNldHRpbmdzLCB0aGlzLnN0b3JhZ2VNYW5hZ2VyLCB0aGlzLnNldHRpbmdzT2JzZXJ2YWJsZSk7XG5cdFx0dGhpcy5wcm9wZXJ0eUhhbmRsZXIgPSBuZXcgUHJvcGVydHlIYW5kbGVyKHRoaXMuYXBwLCB0aGlzLnNldHRpbmdzLCB0aGlzLnN0b3JhZ2VNYW5hZ2VyLCB0aGlzLmltYWdlUHJvY2Vzc29yLCB0aGlzLnJlbW90ZVNlcnZpY2UsIHRoaXMuc2V0dGluZ3NPYnNlcnZhYmxlKTtcblx0XHR0aGlzLnBhc3RlSGFuZGxlciA9IG5ldyBQYXN0ZUhhbmRsZXIoXG5cdFx0XHR0aGlzLmFwcCxcblx0XHRcdHRoaXMuc2V0dGluZ3MsXG5cdFx0XHR0aGlzLmltYWdlUHJvY2Vzc29yLFxuXHRcdFx0dGhpcy5wcm9wZXJ0eUhhbmRsZXIsXG5cdFx0XHR0aGlzLnNldHRpbmdzT2JzZXJ2YWJsZVxuXHRcdCk7XG5cdFx0dGhpcy5kcm9wSGFuZGxlciA9IG5ldyBEcm9wSGFuZGxlcih0aGlzLmFwcCwgdGhpcy5zZXR0aW5ncywgdGhpcy5pbWFnZVByb2Nlc3NvciwgdGhpcy5zZXR0aW5nc09ic2VydmFibGUpO1xuXHRcdHRoaXMuY29udmVyc2lvblNlcnZpY2UgPSBuZXcgTG9jYWxDb252ZXJzaW9uU2VydmljZSh0aGlzLmFwcCwgdGhpcy5zZXR0aW5ncywgdGhpcy5zdG9yYWdlTWFuYWdlciwgdGhpcy5pbWFnZVByb2Nlc3NvciwgdGhpcy5zZXR0aW5nc09ic2VydmFibGUpO1xuXHRcdHRoaXMuYmFubmVyU2VydmljZSA9IG5ldyBCYW5uZXJTZXJ2aWNlKHRoaXMuYXBwLCB0aGlzLnNldHRpbmdzLCB0aGlzLnNldHRpbmdzT2JzZXJ2YWJsZSk7XG5cdH1cblxuXHQvKipcblx0ICogUmVnaXN0ZXIgZXZlbnQgaGFuZGxlcnNcblx0ICovXG5cdHByaXZhdGUgcmVnaXN0ZXJFdmVudEhhbmRsZXJzKCk6IHZvaWQge1xuXHRcdC8vIEVkaXRvciBwYXN0ZSBoYW5kbGVyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KFxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uKCdlZGl0b3ItcGFzdGUnLCAoZXZ0OiBDbGlwYm9hcmRFdmVudCwgZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldykgPT4ge1xuXHRcdFx0XHR2b2lkIHRoaXMucGFzdGVIYW5kbGVyLmhhbmRsZUVkaXRvclBhc3RlKGV2dCwgZWRpdG9yLCB2aWV3KTtcblx0XHRcdH0pXG5cdFx0KTtcblxuXHRcdC8vIEVkaXRvciBkcm9wIGhhbmRsZXJcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQoXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2VkaXRvci1kcm9wJywgKGV2dDogRHJhZ0V2ZW50LCBlZGl0b3I6IEVkaXRvciwgdmlldzogTWFya2Rvd25WaWV3KSA9PiB7XG5cdFx0XHRcdHZvaWQgdGhpcy5kcm9wSGFuZGxlci5oYW5kbGVFZGl0b3JEcm9wKGV2dCwgZWRpdG9yLCB2aWV3KTtcblx0XHRcdH0pXG5cdFx0KTtcblxuXHRcdC8vIERPTSBwYXN0ZSBoYW5kbGVyIGZvciBmcm9udG1hdHRlciBwcm9wZXJ0aWVzXG5cdFx0Ly8gVXNlIGNhcHR1cmUgcGhhc2UgYnV0IGJlIGRlZmVuc2l2ZSAtIG9ubHkgaGFuZGxlIGlmIHdlJ3JlIGRlZmluaXRlbHkgaW4gYSBwcm9wZXJ0eSBmaWVsZFxuXHRcdHRoaXMucmVnaXN0ZXJEb21FdmVudChkb2N1bWVudCwgJ3Bhc3RlJywgKGV2dDogQ2xpcGJvYXJkRXZlbnQpID0+IHtcblx0XHRcdC8vIE9ubHkgaGFuZGxlIGlmIHdlJ3JlIGluIHRoZSBPYnNpZGlhbiB3b3Jrc3BhY2UgKG5vdCBzeXN0ZW0gVUkgbGlrZSB0aXRsZSBiYXIpXG5cdFx0XHRjb25zdCB0YXJnZXQgPSBldnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xuXHRcdFx0aWYgKCF0YXJnZXQgfHwgIXRhcmdldC5jbG9zZXN0KCcud29ya3NwYWNlJykpIHtcblx0XHRcdFx0cmV0dXJuOyAvLyBOb3QgaW4gd29ya3NwYWNlLCBkb24ndCBpbnRlcmZlcmVcblx0XHRcdH1cblx0XHRcdHZvaWQgdGhpcy5wYXN0ZUhhbmRsZXIuaGFuZGxlUHJvcGVydHlQYXN0ZShldnQpO1xuXHRcdH0sIHsgY2FwdHVyZTogdHJ1ZSB9KTtcblxuXHRcdC8vIEZpbGUgb3BlbiBoYW5kbGVyIGZvciBhdXRvLWNvbnZlcnNpb24gYW5kIGJhbm5lclxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudChcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbignZmlsZS1vcGVuJywgKGZpbGU6IFRGaWxlIHwgbnVsbCkgPT4ge1xuXHRcdFx0XHRpZiAoIWZpbGUpIHtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBBdXRvLWNvbnZlcnNpb24gKG5vbi1ibG9ja2luZylcblx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MuYXV0b0NvbnZlcnRSZW1vdGVJbWFnZXMgJiYgdGhpcy5zZXR0aW5ncy5jb252ZXJ0T25Ob3RlT3Blbikge1xuXHRcdFx0XHRcdGlmICh0aGlzLnNldHRpbmdzLnN1cHBvcnRlZEV4dGVuc2lvbnMuaW5jbHVkZXMoZmlsZS5leHRlbnNpb24pKSB7XG5cdFx0XHRcdFx0XHQvLyBGaXJlLWFuZC1mb3JnZXQ6IGRvbid0IGJsb2NrIGZpbGUgb3BlblxuXHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHQvLyBTbWFsbCBkZWxheSB0byBsZXQgZmlsZSBmdWxseSBsb2FkXG5cdFx0XHRcdFx0XHRcdGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCA1MDApKTtcblxuXHRcdFx0XHRcdFx0XHQvLyBDaGVjayBpZiB0aGlzIGlzIHRoZSBhY3RpdmUgZmlsZVxuXHRcdFx0XHRcdFx0XHRjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcblx0XHRcdFx0XHRcdFx0Y29uc3QgaXNBY3RpdmVGaWxlID0gYWN0aXZlRmlsZSAmJiBhY3RpdmVGaWxlLnBhdGggPT09IGZpbGUucGF0aDtcblxuXHRcdFx0XHRcdFx0XHQvLyBPbmx5IHByb2Nlc3MgaWYgaXQncyB0aGUgYWN0aXZlIGZpbGUgT1IgYmFja2dyb3VuZCBwcm9jZXNzaW5nIGlzIGVuYWJsZWRcblx0XHRcdFx0XHRcdFx0aWYgKGlzQWN0aXZlRmlsZSB8fCB0aGlzLnNldHRpbmdzLnByb2Nlc3NCYWNrZ3JvdW5kQ2hhbmdlcykge1xuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IGNvdW50ID0gYXdhaXQgdGhpcy5jb252ZXJzaW9uU2VydmljZS5wcm9jZXNzRmlsZShmaWxlLCAhaXNBY3RpdmVGaWxlKTtcblx0XHRcdFx0XHRcdFx0XHRpZiAoY291bnQgPiAwKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRuZXcgTm90aWNlKGBDb252ZXJ0ZWQgJHtjb3VudH0gcmVtb3RlIGltYWdlKHMpIHRvIGxvY2FsYCk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9KSgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEJhbm5lciByZW5kZXJpbmcgLSBvbmx5IGlmIGVuYWJsZWQgYW5kIGZpbGUgZXh0ZW5zaW9uIGlzIHN1cHBvcnRlZFxuXHRcdFx0XHQvLyBBbHNvIGFsbG93ICdtZCcgYXMgYSBmYWxsYmFjayBpbiBjYXNlIHVzZXIgZGlkbid0IGluY2x1ZGUgaXQgaW4gc3VwcG9ydGVkRXh0ZW5zaW9uc1xuXHRcdFx0XHRjb25zdCBkZXZpY2VTZXR0aW5ncyA9IHRoaXMuYmFubmVyU2VydmljZS5nZXREZXZpY2VTZXR0aW5ncygpO1xuXHRcdFx0XHRpZiAoZGV2aWNlU2V0dGluZ3MuZW5hYmxlZCAmJiAodGhpcy5zZXR0aW5ncy5zdXBwb3J0ZWRFeHRlbnNpb25zLmluY2x1ZGVzKGZpbGUuZXh0ZW5zaW9uKSB8fCBmaWxlLmV4dGVuc2lvbiA9PT0gJ21kJykpIHtcblx0XHRcdFx0XHRjb25zdCB2aWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcblx0XHRcdFx0XHRpZiAodmlldyBpbnN0YW5jZW9mIE1hcmtkb3duVmlldykge1xuXHRcdFx0XHRcdFx0dm9pZCB0aGlzLmJhbm5lclNlcnZpY2UucHJvY2VzcyhmaWxlLCB2aWV3KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0KTtcblxuXHRcdC8vIExheW91dCBjaGFuZ2UgaGFuZGxlciBmb3IgYmFubmVyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KFxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uKCdsYXlvdXQtY2hhbmdlJywgKCkgPT4ge1xuXHRcdFx0XHRjb25zdCBkZXZpY2VTZXR0aW5ncyA9IHRoaXMuYmFubmVyU2VydmljZS5nZXREZXZpY2VTZXR0aW5ncygpO1xuXHRcdFx0XHRpZiAoIWRldmljZVNldHRpbmdzLmVuYWJsZWQpIHtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb25zdCB2aWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcblx0XHRcdFx0Ly8gQWxzbyBhbGxvdyAnbWQnIGFzIGEgZmFsbGJhY2sgaW4gY2FzZSB1c2VyIGRpZG4ndCBpbmNsdWRlIGl0IGluIHN1cHBvcnRlZEV4dGVuc2lvbnNcblx0XHRcdFx0aWYgKHZpZXcgJiYgdmlldy5maWxlICYmICh0aGlzLnNldHRpbmdzLnN1cHBvcnRlZEV4dGVuc2lvbnMuaW5jbHVkZXModmlldy5maWxlLmV4dGVuc2lvbikgfHwgdmlldy5maWxlLmV4dGVuc2lvbiA9PT0gJ21kJykpIHtcblx0XHRcdFx0XHQvLyBQcm9jZXNzIGlmIHRoaXMgdmlldyBoYXNuJ3QgYmVlbiBwcm9jZXNzZWQgeWV0XG5cdFx0XHRcdFx0dm9pZCB0aGlzLmJhbm5lclNlcnZpY2UucHJvY2Vzcyh2aWV3LmZpbGUsIHZpZXcpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdCk7XG5cblx0XHQvLyBNZXRhZGF0YSBjaGFuZ2UgaGFuZGxlciBmb3IgYmFubmVyIHVwZGF0ZXNcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQoXG5cdFx0XHR0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLm9uKCdjaGFuZ2VkJywgKGZpbGU6IFRGaWxlKSA9PiB7XG5cdFx0XHRcdC8vIEF1dG8tY29udmVyc2lvbiBvbiBzYXZlIChtZXRhZGF0YSBjaGFuZ2UpXG5cdFx0XHRcdGlmICh0aGlzLnNldHRpbmdzLmF1dG9Db252ZXJ0UmVtb3RlSW1hZ2VzICYmIHRoaXMuc2V0dGluZ3MuY29udmVydE9uTm90ZVNhdmUpIHtcblx0XHRcdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5zdXBwb3J0ZWRFeHRlbnNpb25zLmluY2x1ZGVzKGZpbGUuZXh0ZW5zaW9uKSkge1xuXHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHQvLyBDaGVjayBpZiB0aGlzIGlzIHRoZSBhY3RpdmUgZmlsZVxuXHRcdFx0XHRcdFx0XHRjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcblx0XHRcdFx0XHRcdFx0Y29uc3QgaXNBY3RpdmVGaWxlID0gYWN0aXZlRmlsZSAmJiBhY3RpdmVGaWxlLnBhdGggPT09IGZpbGUucGF0aDtcblxuXHRcdFx0XHRcdFx0XHQvLyBPbmx5IHByb2Nlc3MgaWYgaXQncyB0aGUgYWN0aXZlIGZpbGUgT1IgYmFja2dyb3VuZCBwcm9jZXNzaW5nIGlzIGVuYWJsZWRcblx0XHRcdFx0XHRcdFx0aWYgKGlzQWN0aXZlRmlsZSB8fCB0aGlzLnNldHRpbmdzLnByb2Nlc3NCYWNrZ3JvdW5kQ2hhbmdlcykge1xuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IGNvdW50ID0gYXdhaXQgdGhpcy5jb252ZXJzaW9uU2VydmljZS5wcm9jZXNzRmlsZShmaWxlLCAhaXNBY3RpdmVGaWxlKTtcblx0XHRcdFx0XHRcdFx0XHRpZiAoY291bnQgPiAwKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRuZXcgTm90aWNlKGBDb252ZXJ0ZWQgJHtjb3VudH0gcmVtb3RlIGltYWdlKHMpIHRvIGxvY2FsYCk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9KSgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbnN0IGRldmljZVNldHRpbmdzID0gdGhpcy5iYW5uZXJTZXJ2aWNlLmdldERldmljZVNldHRpbmdzKCk7XG5cdFx0XHRcdC8vIEFsc28gYWxsb3cgJ21kJyBhcyBhIGZhbGxiYWNrIGluIGNhc2UgdXNlciBkaWRuJ3QgaW5jbHVkZSBpdCBpbiBzdXBwb3J0ZWRFeHRlbnNpb25zXG5cdFx0XHRcdGlmICghZGV2aWNlU2V0dGluZ3MuZW5hYmxlZCB8fCAoIXRoaXMuc2V0dGluZ3Muc3VwcG9ydGVkRXh0ZW5zaW9ucy5pbmNsdWRlcyhmaWxlLmV4dGVuc2lvbikgJiYgZmlsZS5leHRlbnNpb24gIT09ICdtZCcpKSB7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gT25seSBpdGVyYXRlIGxlYXZlcyB0aGF0IGFyZSBtYXJrZG93biB2aWV3cyBmb3IgdGhpcyBmaWxlXG5cdFx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5pdGVyYXRlUm9vdExlYXZlcygobGVhZjogV29ya3NwYWNlTGVhZikgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IHZpZXcgPSBsZWFmLnZpZXcgYXMgTWFya2Rvd25WaWV3O1xuXHRcdFx0XHRcdGlmICh2aWV3IGluc3RhbmNlb2YgTWFya2Rvd25WaWV3ICYmIHZpZXcuZmlsZSA9PT0gZmlsZSkge1xuXHRcdFx0XHRcdFx0dm9pZCB0aGlzLmJhbm5lclNlcnZpY2UucHJvY2VzcyhmaWxlLCB2aWV3KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSlcblx0XHQpO1xuXG5cdFx0Ly8gQXBwbHkgYmFubmVyIHNldHRpbmdzIHdoZW4gbGF5b3V0IGlzIHJlYWR5XG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uTGF5b3V0UmVhZHkoKCkgPT4ge1xuXHRcdFx0dGhpcy5iYW5uZXJTZXJ2aWNlLmFwcGx5U2V0dGluZ3MoKTtcblx0XHR9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZWdpc3RlciBjb21tYW5kc1xuXHQgKi9cblx0cHJpdmF0ZSByZWdpc3RlckNvbW1hbmRzKCk6IHZvaWQge1xuXHRcdC8vIEluc2VydCBsb2NhbCBpbWFnZVxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ2luc2VydC1pbWFnZScsXG5cdFx0XHRuYW1lOiAnSW5zZXJ0IGxvY2FsIGltYWdlJyxcblx0XHRcdGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldykgPT4ge1xuXHRcdFx0XHRvcGVuRmlsZVBpY2tlcih0aGlzLmFwcCwgdGhpcy5pbWFnZVByb2Nlc3NvciwgdGhpcy5wcm9wZXJ0eUhhbmRsZXIpO1xuXHRcdFx0fSxcblx0XHR9KTtcblxuXHRcdC8vIEluc2VydCByZW1vdGUgaW1hZ2Vcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6ICdzZWFyY2gtaW1hZ2UnLFxuXHRcdFx0bmFtZTogJ0luc2VydCByZW1vdGUgaW1hZ2UnLFxuXHRcdFx0ZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvciwgdmlldzogTWFya2Rvd25WaWV3KSA9PiB7XG5cdFx0XHRcdG9wZW5SZW1vdGVTZWFyY2goXG5cdFx0XHRcdFx0dGhpcy5hcHAsXG5cdFx0XHRcdFx0dGhpcy5zZXR0aW5ncyxcblx0XHRcdFx0XHR0aGlzLnJlbW90ZVNlcnZpY2UsXG5cdFx0XHRcdFx0dGhpcy5pbWFnZVByb2Nlc3Nvcixcblx0XHRcdFx0XHR0aGlzLnByb3BlcnR5SGFuZGxlclxuXHRcdFx0XHQpO1xuXHRcdFx0fSxcblx0XHR9KTtcblxuXHRcdC8vIEluc2VydCByZW1vdGUgaW1hZ2UgdG8gcHJvcGVydHlcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6ICdpbnNlcnQtcmVtb3RlLWltYWdlLXRvLXByb3BlcnR5Jyxcblx0XHRcdG5hbWU6ICdJbnNlcnQgcmVtb3RlIGltYWdlIHRvIHByb3BlcnR5Jyxcblx0XHRcdGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldykgPT4ge1xuXHRcdFx0XHRvcGVuUmVtb3RlU2VhcmNoKFxuXHRcdFx0XHRcdHRoaXMuYXBwLFxuXHRcdFx0XHRcdHRoaXMuc2V0dGluZ3MsXG5cdFx0XHRcdFx0dGhpcy5yZW1vdGVTZXJ2aWNlLFxuXHRcdFx0XHRcdHRoaXMuaW1hZ2VQcm9jZXNzb3IsXG5cdFx0XHRcdFx0dGhpcy5wcm9wZXJ0eUhhbmRsZXIsXG5cdFx0XHRcdFx0eyBpbnNlcnRUb1Byb3BlcnR5OiB0cnVlLCBwcm9wZXJ0eU5hbWU6IHRoaXMuc2V0dGluZ3MuZGVmYXVsdFByb3BlcnR5TmFtZSB9XG5cdFx0XHRcdCk7XG5cdFx0XHR9LFxuXHRcdH0pO1xuXG5cdFx0Ly8gSW5zZXJ0IGxvY2FsIGltYWdlIHRvIHByb3BlcnR5XG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAnaW5zZXJ0LWxvY2FsLWltYWdlLXRvLXByb3BlcnR5Jyxcblx0XHRcdG5hbWU6ICdJbnNlcnQgbG9jYWwgaW1hZ2UgdG8gcHJvcGVydHknLFxuXHRcdFx0ZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvciwgdmlldzogTWFya2Rvd25WaWV3KSA9PiB7XG5cdFx0XHRcdG9wZW5GaWxlUGlja2VyKFxuXHRcdFx0XHRcdHRoaXMuYXBwLFxuXHRcdFx0XHRcdHRoaXMuaW1hZ2VQcm9jZXNzb3IsXG5cdFx0XHRcdFx0dGhpcy5wcm9wZXJ0eUhhbmRsZXIsXG5cdFx0XHRcdFx0dHJ1ZSwgLy8gaW5zZXJ0VG9Qcm9wZXJ0eVxuXHRcdFx0XHRcdHRoaXMuc2V0dGluZ3MuZGVmYXVsdFByb3BlcnR5TmFtZVxuXHRcdFx0XHQpO1xuXHRcdFx0fSxcblx0XHR9KTtcblxuXHRcdC8vIEluc2VydCByZW1vdGUgaW1hZ2UgdG8gaWNvbiBwcm9wZXJ0eVxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ2luc2VydC1yZW1vdGUtaW1hZ2UtdG8taWNvbi1wcm9wZXJ0eScsXG5cdFx0XHRuYW1lOiAnSW5zZXJ0IHJlbW90ZSBpbWFnZSB0byBpY29uIHByb3BlcnR5Jyxcblx0XHRcdGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldykgPT4ge1xuXHRcdFx0XHRvcGVuUmVtb3RlU2VhcmNoKFxuXHRcdFx0XHRcdHRoaXMuYXBwLFxuXHRcdFx0XHRcdHRoaXMuc2V0dGluZ3MsXG5cdFx0XHRcdFx0dGhpcy5yZW1vdGVTZXJ2aWNlLFxuXHRcdFx0XHRcdHRoaXMuaW1hZ2VQcm9jZXNzb3IsXG5cdFx0XHRcdFx0dGhpcy5wcm9wZXJ0eUhhbmRsZXIsXG5cdFx0XHRcdFx0eyBpbnNlcnRUb1Byb3BlcnR5OiB0cnVlLCBwcm9wZXJ0eU5hbWU6IHRoaXMuc2V0dGluZ3MuZGVmYXVsdEljb25Qcm9wZXJ0eU5hbWUgfVxuXHRcdFx0XHQpO1xuXHRcdFx0fSxcblx0XHR9KTtcblxuXHRcdC8vIEluc2VydCBsb2NhbCBpbWFnZSB0byBpY29uIHByb3BlcnR5XG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAnaW5zZXJ0LWxvY2FsLWltYWdlLXRvLWljb24tcHJvcGVydHknLFxuXHRcdFx0bmFtZTogJ0luc2VydCBsb2NhbCBpbWFnZSB0byBpY29uIHByb3BlcnR5Jyxcblx0XHRcdGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldykgPT4ge1xuXHRcdFx0XHRvcGVuRmlsZVBpY2tlcihcblx0XHRcdFx0XHR0aGlzLmFwcCxcblx0XHRcdFx0XHR0aGlzLmltYWdlUHJvY2Vzc29yLFxuXHRcdFx0XHRcdHRoaXMucHJvcGVydHlIYW5kbGVyLFxuXHRcdFx0XHRcdHRydWUsIC8vIGluc2VydFRvUHJvcGVydHlcblx0XHRcdFx0XHR0aGlzLnNldHRpbmdzLmRlZmF1bHRJY29uUHJvcGVydHlOYW1lXG5cdFx0XHRcdCk7XG5cdFx0XHR9LFxuXHRcdH0pO1xuXG5cdFx0Ly8gQ29udmVydCByZW1vdGUgaW1hZ2VzIGluIGN1cnJlbnQgZmlsZVxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ2NvbnZlcnQtcmVtb3RlLWltYWdlcycsXG5cdFx0XHRuYW1lOiAnQ29udmVydCByZW1vdGUgaW1hZ2VzJyxcblx0XHRcdGVkaXRvckNhbGxiYWNrOiBhc3luYyAoZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldykgPT4ge1xuXHRcdFx0XHRjb25zdCBmaWxlID0gdmlldy5maWxlO1xuXHRcdFx0XHRpZiAoIWZpbGUpIHtcblx0XHRcdFx0XHRuZXcgTm90aWNlKCdObyBhY3RpdmUgZmlsZScpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbnN0IGNvdW50ID0gYXdhaXQgdGhpcy5jb252ZXJzaW9uU2VydmljZS5wcm9jZXNzRmlsZShmaWxlKTtcblx0XHRcdFx0aWYgKGNvdW50ID4gMCkge1xuXHRcdFx0XHRcdG5ldyBOb3RpY2UoYENvbnZlcnRlZCAke2NvdW50fSByZW1vdGUgaW1hZ2UocykgdG8gbG9jYWxgKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRuZXcgTm90aWNlKCdObyByZW1vdGUgaW1hZ2VzIGZvdW5kJyk7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0fSk7XG5cblx0XHQvLyBDb252ZXJ0IHJlbW90ZSBpbWFnZXMgaW4gYWxsIGZpbGVzXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAnY29udmVydC1hbGwtcmVtb3RlLWltYWdlcycsXG5cdFx0XHRuYW1lOiAnQ29udmVydCBhbGwgcmVtb3RlIGltYWdlcycsXG5cdFx0XHRjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRjb25zdCB7IG9wZW5Db25maXJtTW9kYWwgfSA9IGF3YWl0IGltcG9ydCgnLi9tb2RhbHMvQ29uZmlybU1vZGFsJyk7XG5cdFx0XHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IG9wZW5Db25maXJtTW9kYWwoXG5cdFx0XHRcdFx0dGhpcy5hcHAsXG5cdFx0XHRcdFx0J0NvbnZlcnQgQWxsIFJlbW90ZSBJbWFnZXMnLFxuXHRcdFx0XHRcdCdUaGlzIHdpbGwgc2NhbiBhbGwgZmlsZXMgaW4geW91ciB2YXVsdCBhbmQgY29udmVydCBldmVyeSByZW1vdGUgaW1hZ2UgVVJMIHRvIGEgbG9jYWwgZmlsZS4gVGhpcyBhY3Rpb24gY2Fubm90IGJlIHVuZG9uZS5cXG5cXG5FYWNoIGltYWdlIHdpbGwgYmUgZG93bmxvYWRlZCBhbmQgeW91XFwnbGwgYmUgcHJvbXB0ZWQgdG8gcmVuYW1lIHRoZW0uIFRoaXMgbWF5IHRha2UgYSB3aGlsZSBpZiB5b3UgaGF2ZSBtYW55IGltYWdlcy5cXG5cXG5BcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gcHJvY2VlZD8nLFxuXHRcdFx0XHRcdCdZZXMsIGNvbnZlcnQgYWxsIGltYWdlcycsXG5cdFx0XHRcdFx0J0NhbmNlbCdcblx0XHRcdFx0KTtcblxuXHRcdFx0XHRpZiAoIXJlc3VsdC5jb25maXJtZWQpIHtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRuZXcgTm90aWNlKCdQcm9jZXNzaW5nIGFsbCBmaWxlcy4uLiBUaGlzIG1heSB0YWtlIGEgd2hpbGUuJyk7XG5cdFx0XHRcdGNvbnN0IGNvdW50ID0gYXdhaXQgdGhpcy5jb252ZXJzaW9uU2VydmljZS5wcm9jZXNzQWxsRmlsZXMoKTtcblx0XHRcdFx0bmV3IE5vdGljZShgQ29udmVydGVkICR7Y291bnR9IHJlbW90ZSBpbWFnZShzKSB0byBsb2NhbGApO1xuXHRcdFx0fSxcblx0XHR9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBMb2FkIHNldHRpbmdzIGZyb20gc3RvcmFnZVxuXHQgKi9cblx0YXN5bmMgbG9hZFNldHRpbmdzKCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLmxvYWREYXRhKCkgYXMgUGFydGlhbDxJbWFnZU1hbmFnZXJTZXR0aW5ncz4gfCBudWxsO1xuXHRcdHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBkYXRhID8/IHt9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBTYXZlIHNldHRpbmdzIHRvIHN0b3JhZ2Vcblx0ICovXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuXG5cdFx0Ly8gTm90aWZ5IGFsbCBzZXJ2aWNlcyBvZiB0aGUgc2V0dGluZ3MgY2hhbmdlXG5cdFx0dGhpcy5zZXR0aW5nc09ic2VydmFibGUubm90aWZ5KHRoaXMuc2V0dGluZ3MpO1xuXHR9XG5cblx0LyoqXG5cdCAqIERlYnVnIGxvZ2dpbmdcblx0ICovXG5cdHByaXZhdGUgbG9nKC4uLmFyZ3M6IHVua25vd25bXSk6IHZvaWQge1xuXHRcdGlmICh0aGlzLnNldHRpbmdzPy5kZWJ1Z01vZGUpIHtcblx0XHRcdGNvbnNvbGUuZGVidWcoJ1tJbWFnZSBNYW5hZ2VyXScsIC4uLmFyZ3MpO1xuXHRcdH1cblx0fVxufVxuIiwgIi8qKlxyXG4gKiBJbWFnZSBNYW5hZ2VyIFBsdWdpbiBTZXR0aW5nc1xyXG4gKiBTZXR0aW5ncyB0YWIgd2l0aCBTZXR0aW5nR3JvdXAgY29tcGF0aWJpbGl0eSBmb3IgT2JzaWRpYW4gMS4xMS4wK1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IEFwcCwgQmFzZUNvbXBvbmVudCwgUGxhdGZvcm0sIFBsdWdpblNldHRpbmdUYWIsIHJlcXVpcmVBcGlWZXJzaW9uIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBjcmVhdGVTZXR0aW5nc0dyb3VwIH0gZnJvbSAnLi91dGlscy9zZXR0aW5ncy1jb21wYXQnO1xyXG5pbXBvcnQge1xyXG5cdEltYWdlTWFuYWdlclNldHRpbmdzLFxyXG5cdERFRkFVTFRfU0VUVElOR1MsXHJcblx0SW1hZ2VQcm92aWRlcixcclxuXHRJbWFnZU9yaWVudGF0aW9uLFxyXG5cdEltYWdlU2l6ZSxcclxuXHRQcm9wZXJ0eUxpbmtGb3JtYXQsXHJcblx0QXR0YWNobWVudExvY2F0aW9uLFxyXG5cdERldmljZVR5cGUsXHJcblx0REVGQVVMVF9CQU5ORVJfREVWSUNFX1NFVFRJTkdTLFxyXG59IGZyb20gJy4vdHlwZXMnO1xyXG5pbXBvcnQgdHlwZSBJbWFnZU1hbmFnZXJQbHVnaW4gZnJvbSAnLi9tYWluJztcclxuXHJcbi8qKlxyXG4gKiBJbnRlcmZhY2UgZm9yIFNlY3JldENvbXBvbmVudCBhY2Nlc3NlZCB2aWEgZHluYW1pYyByZXF1aXJlXHJcbiAqIFNlY3JldENvbXBvbmVudCBpcyBub3QgYXZhaWxhYmxlIGluIHR5cGUgZGVmaW5pdGlvbnMgZm9yIGFsbCBPYnNpZGlhbiB2ZXJzaW9uc1xyXG4gKi9cclxuaW50ZXJmYWNlIFNlY3JldENvbXBvbmVudFR5cGUge1xyXG5cdG5ldyhhcHA6IEFwcCwgZWw6IEhUTUxFbGVtZW50KTogQmFzZUNvbXBvbmVudCAmIHtcclxuXHRcdHNldFZhbHVlKHZhbHVlOiBzdHJpbmcpOiB2b2lkO1xyXG5cdFx0b25DaGFuZ2UoY2FsbGJhY2s6ICh2YWx1ZTogc3RyaW5nKSA9PiB2b2lkKTogdm9pZDtcclxuXHR9O1xyXG59XHJcblxyXG5leHBvcnQgeyBERUZBVUxUX1NFVFRJTkdTIH07XHJcbmV4cG9ydCB0eXBlIHsgSW1hZ2VNYW5hZ2VyU2V0dGluZ3MgfTtcclxuXHJcbmV4cG9ydCBjbGFzcyBJbWFnZU1hbmFnZXJTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XHJcblx0cGx1Z2luOiBJbWFnZU1hbmFnZXJQbHVnaW47XHJcblx0cHVibGljIGljb24gPSAnbHVjaWRlLWltYWdlLWRvd24nO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBJbWFnZU1hbmFnZXJQbHVnaW4pIHtcclxuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcclxuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG5cdH1cclxuXHJcblx0ZGlzcGxheSgpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XHJcblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xyXG5cclxuXHRcdC8vIEdlbmVyYWwgU2V0dGluZ3NcclxuXHRcdHRoaXMucmVuZGVyR2VuZXJhbFNldHRpbmdzKGNvbnRhaW5lckVsKTtcclxuXHJcblx0XHQvLyBJbWFnZSBTZXJ2aWNlc1xyXG5cdFx0dGhpcy5yZW5kZXJJbWFnZVNlcnZpY2VzU2V0dGluZ3MoY29udGFpbmVyRWwpO1xyXG5cclxuXHRcdC8vIFByb3BlcnR5IEluc2VydGlvblxyXG5cdFx0dGhpcy5yZW5kZXJQcm9wZXJ0eVNldHRpbmdzKGNvbnRhaW5lckVsKTtcclxuXHJcblx0XHQvLyBDb252ZXJzaW9uXHJcblx0XHR0aGlzLnJlbmRlckNvbnZlcnNpb25TZXR0aW5ncyhjb250YWluZXJFbCk7XHJcblxyXG5cdFx0Ly8gUmVuYW1lIE9wdGlvbnNcclxuXHRcdHRoaXMucmVuZGVyUmVuYW1lU2V0dGluZ3MoY29udGFpbmVyRWwpO1xyXG5cclxuXHRcdC8vIEJhbm5lciBJbWFnZXNcclxuXHRcdHRoaXMucmVuZGVyQmFubmVyU2V0dGluZ3MoY29udGFpbmVyRWwpO1xyXG5cclxuXHRcdC8vIEFkdmFuY2VkXHJcblx0XHR0aGlzLnJlbmRlckFkdmFuY2VkU2V0dGluZ3MoY29udGFpbmVyRWwpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSByZW5kZXJHZW5lcmFsU2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcblx0XHQvLyBHZW5lcmFsIHNldHRpbmdzIHdpdGhvdXQgaGVhZGluZyAoZmlyc3Qgc2VjdGlvbiBkb2Vzbid0IG5lZWQgYSBoZWFkaW5nKVxyXG5cdFx0Y29uc3QgZ3JvdXAgPSBjcmVhdGVTZXR0aW5nc0dyb3VwKGNvbnRhaW5lckVsLCB1bmRlZmluZWQsICdpbWFnZS1tYW5hZ2VyJyk7XHJcblxyXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ0ltYWdlIG5hbWUgdGVtcGxhdGUnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdUZW1wbGF0ZSBmb3IgZ2VuZXJhdGVkIGltYWdlIG5hbWVzLiBWYXJpYWJsZXM6IHt7ZmlsZU5hbWV9fSwge3tkaXJOYW1lfX0sIHt7REFURTpZWVlZLU1NLUREfX0sIHt7VElNRTpISC1tbS1zc319JylcclxuXHRcdFx0XHQuYWRkVGV4dCgodGV4dCkgPT4ge1xyXG5cdFx0XHRcdFx0dGV4dFxyXG5cdFx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJ3t7ZmlsZU5hbWV9fScpXHJcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbWFnZU5hbWVUZW1wbGF0ZSlcclxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmltYWdlTmFtZVRlbXBsYXRlID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ0F0dGFjaG1lbnQgbG9jYXRpb24nKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdXaGVyZSB0byBzYXZlIGluc2VydGVkIGltYWdlcycpXHJcblx0XHRcdFx0LmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xyXG5cdFx0XHRcdFx0ZHJvcGRvd25cclxuXHRcdFx0XHRcdFx0LmFkZE9wdGlvbihBdHRhY2htZW50TG9jYXRpb24uT2JzaWRpYW5EZWZhdWx0LCBcIlVzZSBPYnNpZGlhbidzIHNldHRpbmdzXCIpXHJcblx0XHRcdFx0XHRcdC5hZGRPcHRpb24oQXR0YWNobWVudExvY2F0aW9uLlNhbWVGb2xkZXIsICdTYW1lIGZvbGRlciBhcyBub3RlJylcclxuXHRcdFx0XHRcdFx0LmFkZE9wdGlvbihBdHRhY2htZW50TG9jYXRpb24uU3ViZm9sZGVyLCAnU3ViZm9sZGVyIChjb25maWd1cmUgYmVsb3cpJylcclxuXHRcdFx0XHRcdFx0LmFkZE9wdGlvbihBdHRhY2htZW50TG9jYXRpb24uVmF1bHRGb2xkZXIsICdWYXVsdCBmb2xkZXIgKGNvbmZpZ3VyZSBiZWxvdyknKVxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYXR0YWNobWVudExvY2F0aW9uKVxyXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYXR0YWNobWVudExvY2F0aW9uID0gdmFsdWUgYXMgQXR0YWNobWVudExvY2F0aW9uO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cclxuXHRcdFx0XHRcdFx0XHQvLyBQcmVzZXJ2ZSBzY3JvbGwgcG9zaXRpb24gd2hlbiByZS1yZW5kZXJpbmdcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxDb250YWluZXIgPSBjb250YWluZXJFbC5jbG9zZXN0KCcudmVydGljYWwtdGFiLWNvbnRlbnQnKSB8fFxyXG5cdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyRWwuY2xvc2VzdCgnLnNldHRpbmdzLWNvbnRlbnQnKSB8fFxyXG5cdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyRWwucGFyZW50RWxlbWVudDtcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxUb3AgPSBzY3JvbGxDb250YWluZXI/LnNjcm9sbFRvcCB8fCAwO1xyXG5cclxuXHRcdFx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTsgLy8gUmVmcmVzaCB0byBzaG93L2hpZGUgcGF0aCBpbnB1dFxyXG5cclxuXHRcdFx0XHRcdFx0XHQvLyBSZXN0b3JlIHNjcm9sbCBwb3NpdGlvbiBhZnRlciByZW5kZXJpbmdcclxuXHRcdFx0XHRcdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKHNjcm9sbENvbnRhaW5lcikge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsVG9wO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIFNob3cgY3VzdG9tIHBhdGggaW5wdXQgaWYgbm90IHVzaW5nIE9ic2lkaWFuIGRlZmF1bHRcclxuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdHRhY2htZW50TG9jYXRpb24gIT09IEF0dGFjaG1lbnRMb2NhdGlvbi5PYnNpZGlhbkRlZmF1bHQgJiZcclxuXHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYXR0YWNobWVudExvY2F0aW9uICE9PSBBdHRhY2htZW50TG9jYXRpb24uU2FtZUZvbGRlcikge1xyXG5cdFx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdFx0LnNldE5hbWUoJ0N1c3RvbSBhdHRhY2htZW50IHBhdGgnKVxyXG5cdFx0XHRcdFx0LnNldERlc2MoJ1BhdGggZm9yIGF0dGFjaG1lbnRzLiBVc2UgXCIuL1wiIGZvciByZWxhdGl2ZSB0byBub3RlLCBvciBcIi9cIiBmb3IgdmF1bHQgcm9vdC4nKVxyXG5cdFx0XHRcdFx0LmFkZFRleHQoKHRleHQpID0+IHtcclxuXHRcdFx0XHRcdFx0dGV4dFxyXG5cdFx0XHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignLi9hc3NldHMnKVxyXG5cdFx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21BdHRhY2htZW50UGF0aClcclxuXHRcdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21BdHRhY2htZW50UGF0aCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHJlbmRlckltYWdlU2VydmljZXNTZXR0aW5ncyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuXHRcdGNvbnN0IGdyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXJFbCwgJ0ltYWdlIHNlcnZpY2VzJywgJ2ltYWdlLW1hbmFnZXInKTtcclxuXHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnRGVmYXVsdCBwcm92aWRlcicpXHJcblx0XHRcdFx0LnNldERlc2MoJ0RlZmF1bHQgaW1hZ2UgcHJvdmlkZXIgZm9yIHNlYXJjaCcpXHJcblx0XHRcdFx0LmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xyXG5cdFx0XHRcdFx0ZHJvcGRvd25cclxuXHRcdFx0XHRcdFx0LmFkZE9wdGlvbihJbWFnZVByb3ZpZGVyLlVuc3BsYXNoLCAnVW5zcGxhc2gnKVxyXG5cdFx0XHRcdFx0XHQuYWRkT3B0aW9uKEltYWdlUHJvdmlkZXIuUGV4ZWxzLCAnUGV4ZWxzJylcclxuXHRcdFx0XHRcdFx0LmFkZE9wdGlvbihJbWFnZVByb3ZpZGVyLlBpeGFiYXksICdQaXhhYmF5JylcclxuXHRcdFx0XHRcdFx0LmFkZE9wdGlvbihJbWFnZVByb3ZpZGVyLkxvY2FsLCAnTG9jYWwgZmlsZXMnKVxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdFByb3ZpZGVyKVxyXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdFByb3ZpZGVyID0gdmFsdWUgYXMgSW1hZ2VQcm92aWRlcjtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnRGVmYXVsdCBvcmllbnRhdGlvbicpXHJcblx0XHRcdFx0LnNldERlc2MoJ0ZpbHRlciBpbWFnZXMgYnkgb3JpZW50YXRpb24nKVxyXG5cdFx0XHRcdC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcclxuXHRcdFx0XHRcdGRyb3Bkb3duXHJcblx0XHRcdFx0XHRcdC5hZGRPcHRpb24oSW1hZ2VPcmllbnRhdGlvbi5BbnksICdBbnknKVxyXG5cdFx0XHRcdFx0XHQuYWRkT3B0aW9uKEltYWdlT3JpZW50YXRpb24uTGFuZHNjYXBlLCAnTGFuZHNjYXBlJylcclxuXHRcdFx0XHRcdFx0LmFkZE9wdGlvbihJbWFnZU9yaWVudGF0aW9uLlBvcnRyYWl0LCAnUG9ydHJhaXQnKVxyXG5cdFx0XHRcdFx0XHQuYWRkT3B0aW9uKEltYWdlT3JpZW50YXRpb24uU3F1YXJlLCAnU3F1YXJlJylcclxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRPcmllbnRhdGlvbilcclxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRPcmllbnRhdGlvbiA9IHZhbHVlIGFzIEltYWdlT3JpZW50YXRpb247XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ0RlZmF1bHQgaW1hZ2Ugc2l6ZScpXHJcblx0XHRcdFx0LnNldERlc2MoJ1ByZWZlcnJlZCBzaXplIHdoZW4gZG93bmxvYWRpbmcgaW1hZ2VzJylcclxuXHRcdFx0XHQuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XHJcblx0XHRcdFx0XHRkcm9wZG93blxyXG5cdFx0XHRcdFx0XHQuYWRkT3B0aW9uKEltYWdlU2l6ZS5PcmlnaW5hbCwgJ09yaWdpbmFsJylcclxuXHRcdFx0XHRcdFx0LmFkZE9wdGlvbihJbWFnZVNpemUuTGFyZ2UsICdMYXJnZScpXHJcblx0XHRcdFx0XHRcdC5hZGRPcHRpb24oSW1hZ2VTaXplLk1lZGl1bSwgJ01lZGl1bScpXHJcblx0XHRcdFx0XHRcdC5hZGRPcHRpb24oSW1hZ2VTaXplLlNtYWxsLCAnU21hbGwnKVxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdEltYWdlU2l6ZSlcclxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRJbWFnZVNpemUgPSB2YWx1ZSBhcyBJbWFnZVNpemU7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ1Vuc3BsYXNoIHByb3h5IHNlcnZlcicpXHJcblx0XHRcdFx0LnNldERlc2MoJ09wdGlvbmFsIHByb3h5IHNlcnZlciAobGVhdmUgZW1wdHkgdG8gdXNlIGJ1aWx0LWluKScpXHJcblx0XHRcdFx0LmFkZFRleHQoKHRleHQpID0+IHtcclxuXHRcdFx0XHRcdHRleHRcclxuXHRcdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKCdodHRwczovL3lvdXItcHJveHkuY29tLycpXHJcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy51bnNwbGFzaFByb3h5U2VydmVyKVxyXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MudW5zcGxhc2hQcm94eVNlcnZlciA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0c2V0dGluZy5zZXROYW1lKCdQZXhlbHMgQVBJIGtleScpO1xyXG5cclxuXHRcdFx0aWYgKHJlcXVpcmVBcGlWZXJzaW9uKCcxLjExLjQnKSkge1xyXG5cdFx0XHRcdC8vIFVzZSBTZWNyZXRDb21wb25lbnQgZm9yIG5ld2VyIHZlcnNpb25zXHJcblx0XHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdFx0LnNldERlc2MoJ0Nob29zZSBhIHNlY3JldCB0aGF0IGNvbnRhaW5zIHlvdXIgUGV4ZWxzIEFQSSBrZXkuJylcclxuXHRcdFx0XHRcdC5hZGRDb21wb25lbnQoKGVsKSA9PiB7XHJcblx0XHRcdFx0XHRcdC8vIFVzZSBkeW5hbWljIHJlcXVpcmUgdG8gYWNjZXNzIFNlY3JldENvbXBvbmVudCAobWF5IG5vdCBiZSBpbiB0eXBlIGRlZmluaXRpb25zKVxyXG5cdFx0XHRcdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXJlcXVpcmUtaW1wb3J0cyAtLSBTZWNyZXRDb21wb25lbnQgbm90IGluIHR5cGUgZGVmaW5pdGlvbnMgZm9yIGFsbCBPYnNpZGlhbiB2ZXJzaW9uc1xyXG5cdFx0XHRcdFx0XHRjb25zdCBvYnNpZGlhbiA9IHJlcXVpcmUoJ29ic2lkaWFuJykgYXMgeyBTZWNyZXRDb21wb25lbnQ/OiBTZWNyZXRDb21wb25lbnRUeXBlIH07XHJcblx0XHRcdFx0XHRcdGNvbnN0IFNlY3JldENvbXBvbmVudCA9IG9ic2lkaWFuLlNlY3JldENvbXBvbmVudCBhcyBTZWNyZXRDb21wb25lbnRUeXBlO1xyXG5cdFx0XHRcdFx0XHRjb25zdCBjb21wb25lbnQgPSBuZXcgU2VjcmV0Q29tcG9uZW50KHRoaXMuYXBwLCBlbCk7XHJcblx0XHRcdFx0XHRcdGNvbXBvbmVudC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wZXhlbHNBcGlLZXlTZWNyZXRJZCk7XHJcblx0XHRcdFx0XHRcdGNvbXBvbmVudC5vbkNoYW5nZSgodmFsdWU6IHN0cmluZykgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnBleGVsc0FwaUtleVNlY3JldElkID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIGNvbXBvbmVudDtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdC8vIEZhbGwgYmFjayB0byBwbGFpbnRleHQgZm9yIG9sZGVyIHZlcnNpb25zXHJcblx0XHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdFx0LnNldERlc2MoJ0dldCB5b3VyIEFQSSBrZXkgZnJvbSBodHRwczovL3d3dy5wZXhlbHMuY29tL2FwaS9uZXcvJylcclxuXHRcdFx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcblx0XHRcdFx0XHRcdHRleHRcclxuXHRcdFx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJ1BleGVscyBBUEkga2V5JylcclxuXHRcdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucGV4ZWxzQXBpS2V5KVxyXG5cdFx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnBleGVsc0FwaUtleSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nLnNldE5hbWUoJ1BpeGFiYXkgQVBJIGtleScpO1xyXG5cclxuXHRcdFx0aWYgKHJlcXVpcmVBcGlWZXJzaW9uKCcxLjExLjQnKSkge1xyXG5cdFx0XHRcdC8vIFVzZSBTZWNyZXRDb21wb25lbnQgZm9yIG5ld2VyIHZlcnNpb25zXHJcblx0XHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdFx0LnNldERlc2MoJ0Nob29zZSBhIHNlY3JldCB0aGF0IGNvbnRhaW5zIHlvdXIgUGl4YWJheSBBUEkga2V5LicpXHJcblx0XHRcdFx0XHQuYWRkQ29tcG9uZW50KChlbCkgPT4ge1xyXG5cdFx0XHRcdFx0XHQvLyBVc2UgZHluYW1pYyByZXF1aXJlIHRvIGFjY2VzcyBTZWNyZXRDb21wb25lbnQgKG1heSBub3QgYmUgaW4gdHlwZSBkZWZpbml0aW9ucylcclxuXHRcdFx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1yZXF1aXJlLWltcG9ydHMgLS0gU2VjcmV0Q29tcG9uZW50IG5vdCBpbiB0eXBlIGRlZmluaXRpb25zIGZvciBhbGwgT2JzaWRpYW4gdmVyc2lvbnNcclxuXHRcdFx0XHRcdFx0Y29uc3Qgb2JzaWRpYW4gPSByZXF1aXJlKCdvYnNpZGlhbicpIGFzIHsgU2VjcmV0Q29tcG9uZW50PzogU2VjcmV0Q29tcG9uZW50VHlwZSB9O1xyXG5cdFx0XHRcdFx0XHRjb25zdCBTZWNyZXRDb21wb25lbnQgPSBvYnNpZGlhbi5TZWNyZXRDb21wb25lbnQgYXMgU2VjcmV0Q29tcG9uZW50VHlwZTtcclxuXHRcdFx0XHRcdFx0Y29uc3QgY29tcG9uZW50ID0gbmV3IFNlY3JldENvbXBvbmVudCh0aGlzLmFwcCwgZWwpO1xyXG5cdFx0XHRcdFx0XHRjb21wb25lbnQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucGl4YWJheUFwaUtleVNlY3JldElkKTtcclxuXHRcdFx0XHRcdFx0Y29tcG9uZW50Lm9uQ2hhbmdlKCh2YWx1ZTogc3RyaW5nKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MucGl4YWJheUFwaUtleVNlY3JldElkID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIGNvbXBvbmVudDtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdC8vIEZhbGwgYmFjayB0byBwbGFpbnRleHQgZm9yIG9sZGVyIHZlcnNpb25zXHJcblx0XHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdFx0LnNldERlc2MoJ0dldCB5b3VyIEFQSSBrZXkgZnJvbSBodHRwczovL3BpeGFiYXkuY29tL2FwaS9kb2NzLycpXHJcblx0XHRcdFx0XHQuYWRkVGV4dCgodGV4dCkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0ZXh0XHJcblx0XHRcdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKCdQaXhhYmF5IEFQSSBrZXknKVxyXG5cdFx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5waXhhYmF5QXBpS2V5KVxyXG5cdFx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnBpeGFiYXlBcGlLZXkgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdGdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdJbnNlcnQgc2l6ZScpXHJcblx0XHRcdFx0LnNldERlc2MoJ1NldCB0aGUgc2l6ZSBvZiB0aGUgaW1hZ2Ugd2hlbiBpbnNlcnRpbmcuIEZvcm1hdCBjb3VsZCBiZSBvbmx5IHRoZSB3aWR0aCBcIjIwMFwiIG9yIHRoZSB3aWR0aCBhbmQgaGVpZ2h0IFwiMjAweDEwMFwiLiBMZWF2ZSBlbXB0eSBmb3Igbm8gc2l6ZS4nKVxyXG5cdFx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcblx0XHRcdFx0XHR0ZXh0XHJcblx0XHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignMjAwIG9yIDIwMHgxMDAnKVxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5zZXJ0U2l6ZSlcclxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmluc2VydFNpemUgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnSW5zZXJ0IHJlZmVycmFsJylcclxuXHRcdFx0XHQuc2V0RGVzYygnSW5zZXJ0IHRoZSByZWZlcmVuY2UgdGV4dCcpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcblx0XHRcdFx0XHR0b2dnbGVcclxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmluc2VydFJlZmVycmFsKVxyXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5zZXJ0UmVmZXJyYWwgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnSW5zZXJ0IGJhY2tsaW5rJylcclxuXHRcdFx0XHQuc2V0RGVzYygnSW5zZXJ0IGEgYmFja2xpbmsgaW4gZnJvbnQgb2YgdGhlIHJlZmVyZW5jZSB0ZXh0JylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuXHRcdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5zZXJ0QmFja0xpbmspXHJcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbnNlcnRCYWNrTGluayA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSByZW5kZXJQcm9wZXJ0eVNldHRpbmdzKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgZ3JvdXAgPSBjcmVhdGVTZXR0aW5nc0dyb3VwKGNvbnRhaW5lckVsLCAnUHJvcGVydHkgaW5zZXJ0aW9uJywgJ2ltYWdlLW1hbmFnZXInKTtcclxuXHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnRW5hYmxlIHBhc3RlIGludG8gcHJvcGVydGllcycpXHJcblx0XHRcdFx0LnNldERlc2MoJ0FsbG93IHBhc3RpbmcgaW1hZ2VzIGRpcmVjdGx5IGludG8gcHJvcGVydGllcycpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcblx0XHRcdFx0XHR0b2dnbGVcclxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZVByb3BlcnR5UGFzdGUpXHJcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVQcm9wZXJ0eVBhc3RlID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ1Byb3BlcnR5IGxpbmsgZm9ybWF0JylcclxuXHRcdFx0XHQuc2V0RGVzYygnSG93IHRvIGZvcm1hdCB0aGUgaW1hZ2UgbGluayBpbiBwcm9wZXJ0aWVzJylcclxuXHRcdFx0XHQuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XHJcblx0XHRcdFx0XHRkcm9wZG93blxyXG5cdFx0XHRcdFx0XHQuYWRkT3B0aW9uKFByb3BlcnR5TGlua0Zvcm1hdC5PYnNpZGlhbkRlZmF1bHQsIFwiVXNlIE9ic2lkaWFuJ3Mgc2V0dGluZ3NcIilcclxuXHRcdFx0XHRcdFx0LmFkZE9wdGlvbihQcm9wZXJ0eUxpbmtGb3JtYXQuUGF0aCwgJ1BsYWluIHBhdGggKHBhdGgvdG8vaW1hZ2UuanBnKScpXHJcblx0XHRcdFx0XHRcdC5hZGRPcHRpb24oUHJvcGVydHlMaW5rRm9ybWF0LlJlbGF0aXZlUGF0aCwgJ1JlbGF0aXZlIHBhdGggKC4vaW1hZ2UuanBnKScpXHJcblx0XHRcdFx0XHRcdC5hZGRPcHRpb24oUHJvcGVydHlMaW5rRm9ybWF0Lldpa2lsaW5rLCAnV2lraWxpbmsgKFtbcGF0aC90by9pbWFnZS5qcGddXSknKVxyXG5cdFx0XHRcdFx0XHQuYWRkT3B0aW9uKFByb3BlcnR5TGlua0Zvcm1hdC5NYXJrZG93biwgJ01hcmtkb3duICghW10ocGF0aC90by9pbWFnZS5qcGcpKScpXHJcblx0XHRcdFx0XHRcdC5hZGRPcHRpb24oUHJvcGVydHlMaW5rRm9ybWF0LkN1c3RvbSwgJ0N1c3RvbSBmb3JtYXQnKVxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucHJvcGVydHlMaW5rRm9ybWF0KVxyXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MucHJvcGVydHlMaW5rRm9ybWF0ID0gdmFsdWUgYXMgUHJvcGVydHlMaW5rRm9ybWF0O1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cclxuXHRcdFx0XHRcdFx0XHQvLyBQcmVzZXJ2ZSBzY3JvbGwgcG9zaXRpb24gd2hlbiByZS1yZW5kZXJpbmdcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxDb250YWluZXIgPSBjb250YWluZXJFbC5jbG9zZXN0KCcudmVydGljYWwtdGFiLWNvbnRlbnQnKSB8fFxyXG5cdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyRWwuY2xvc2VzdCgnLnNldHRpbmdzLWNvbnRlbnQnKSB8fFxyXG5cdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyRWwucGFyZW50RWxlbWVudDtcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxUb3AgPSBzY3JvbGxDb250YWluZXI/LnNjcm9sbFRvcCB8fCAwO1xyXG5cclxuXHRcdFx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTsgLy8gUmVmcmVzaCB0byBzaG93L2hpZGUgY3VzdG9tIGZvcm1hdCBpbnB1dFxyXG5cclxuXHRcdFx0XHRcdFx0XHQvLyBSZXN0b3JlIHNjcm9sbCBwb3NpdGlvbiBhZnRlciByZW5kZXJpbmdcclxuXHRcdFx0XHRcdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKHNjcm9sbENvbnRhaW5lcikge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsVG9wO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIFNob3cgY3VzdG9tIGZvcm1hdCBpbnB1dCB3aGVuIFwiQ3VzdG9tXCIgaXMgc2VsZWN0ZWRcclxuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcm9wZXJ0eUxpbmtGb3JtYXQgPT09IFByb3BlcnR5TGlua0Zvcm1hdC5DdXN0b20pIHtcclxuXHRcdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHRcdC5zZXROYW1lKCdDdXN0b20gZm9ybWF0IHRlbXBsYXRlJylcclxuXHRcdFx0XHRcdC5zZXREZXNjKCdVc2Uge2ltYWdlLXVybH0gYXMgcGxhY2Vob2xkZXIgZm9yIHRoZSBpbWFnZSBwYXRoJylcclxuXHRcdFx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcblx0XHRcdFx0XHRcdHRleHRcclxuXHRcdFx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJ3tpbWFnZS11cmx9JylcclxuXHRcdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tUHJvcGVydHlMaW5rRm9ybWF0KVxyXG5cdFx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbVByb3BlcnR5TGlua0Zvcm1hdCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ0RlZmF1bHQgcHJvcGVydHkgbmFtZScpXHJcblx0XHRcdFx0LnNldERlc2MoJ0RlZmF1bHQgcHJvcGVydHkgbmFtZSB3aGVuIGluc2VydGluZyB0byBwcm9wZXJ0aWVzIHZpYSBjb21tYW5kJylcclxuXHRcdFx0XHQuYWRkVGV4dCgodGV4dCkgPT4ge1xyXG5cdFx0XHRcdFx0dGV4dFxyXG5cdFx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJ0Jhbm5lcicpXHJcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0UHJvcGVydHlOYW1lKVxyXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdFByb3BlcnR5TmFtZSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdEZWZhdWx0IGljb24gcHJvcGVydHkgbmFtZScpXHJcblx0XHRcdFx0LnNldERlc2MoJ0RlZmF1bHQgcHJvcGVydHkgbmFtZSB3aGVuIGluc2VydGluZyB0byBpY29uIHByb3BlcnR5IHZpYSBjb21tYW5kJylcclxuXHRcdFx0XHQuYWRkVGV4dCgodGV4dCkgPT4ge1xyXG5cdFx0XHRcdFx0dGV4dFxyXG5cdFx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJ0ljb24nKVxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdEljb25Qcm9wZXJ0eU5hbWUpXHJcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0SWNvblByb3BlcnR5TmFtZSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdBbHQgdGV4dCBwcm9wZXJ0eSBuYW1lJylcclxuXHRcdFx0XHQuc2V0RGVzYygnUHJvcGVydHkgbmFtZSB0byB1c2UgZm9yIGltYWdlIGFsdCB0ZXh0IChkZXNjcmlwdGlvbikgd2hlbiBpbnNlcnRpbmcgdG8gcHJvcGVydGllcy4gSWYgXCJEZXNjcmlwdGl2ZSBpbWFnZXNcIiBpcyBlbmFibGVkLCB0aGlzIHdpbGwgYmUgZmlsbGVkIHdpdGggdGhlIGRlc2NyaXB0aW9uIHlvdSBwcm92aWRlLiBJZiBkaXNhYmxlZCwgaXQgd2lsbCBiZSBmaWxsZWQgd2l0aCB0aGUgc2VhcmNoIHRlcm0gZm9yIGV4dGVybmFsIGltYWdlcy4nKVxyXG5cdFx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcblx0XHRcdFx0XHR0ZXh0XHJcblx0XHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignYWx0JylcclxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmFsdFRleHRQcm9wZXJ0eSlcclxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmFsdFRleHRQcm9wZXJ0eSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSByZW5kZXJDb252ZXJzaW9uU2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcblx0XHRjb25zdCBncm91cCA9IGNyZWF0ZVNldHRpbmdzR3JvdXAoY29udGFpbmVyRWwsICdSZW1vdGUgaW1hZ2UgY29udmVyc2lvbicsICdpbWFnZS1tYW5hZ2VyJyk7XHJcblxyXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ0F1dG8tY29udmVydCByZW1vdGUgaW1hZ2VzJylcclxuXHRcdFx0XHQuc2V0RGVzYygnQXV0b21hdGljYWxseSBkb3dubG9hZCBhbmQgcmVwbGFjZSByZW1vdGUgaW1hZ2UgdXJscyB3aXRoIGxvY2FsIGZpbGVzJylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuXHRcdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b0NvbnZlcnRSZW1vdGVJbWFnZXMpXHJcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvQ29udmVydFJlbW90ZUltYWdlcyA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cclxuXHRcdFx0XHRcdFx0XHQvLyBQcmVzZXJ2ZSBzY3JvbGwgcG9zaXRpb24gd2hlbiByZS1yZW5kZXJpbmdcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxDb250YWluZXIgPSBjb250YWluZXJFbC5jbG9zZXN0KCcudmVydGljYWwtdGFiLWNvbnRlbnQnKSB8fFxyXG5cdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyRWwuY2xvc2VzdCgnLnNldHRpbmdzLWNvbnRlbnQnKSB8fFxyXG5cdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyRWwucGFyZW50RWxlbWVudDtcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxUb3AgPSBzY3JvbGxDb250YWluZXI/LnNjcm9sbFRvcCB8fCAwO1xyXG5cclxuXHRcdFx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTsgLy8gUmVmcmVzaCB0byBzaG93L2hpZGUgc3ViLW9wdGlvbnNcclxuXHJcblx0XHRcdFx0XHRcdFx0Ly8gUmVzdG9yZSBzY3JvbGwgcG9zaXRpb24gYWZ0ZXIgcmVuZGVyaW5nXHJcblx0XHRcdFx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdGlmIChzY3JvbGxDb250YWluZXIpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFRvcDtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b0NvbnZlcnRSZW1vdGVJbWFnZXMpIHtcclxuXHRcdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHRcdC5zZXROYW1lKCdDb252ZXJ0IG9uIG5vdGUgb3BlbicpXHJcblx0XHRcdFx0XHQuc2V0RGVzYygnUHJvY2VzcyByZW1vdGUgaW1hZ2VzIHdoZW4gb3BlbmluZyBhIG5vdGUnKVxyXG5cdFx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb252ZXJ0T25Ob3RlT3BlbilcclxuXHRcdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb252ZXJ0T25Ob3RlT3BlbiA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdFx0LnNldE5hbWUoJ0NvbnZlcnQgb24gbm90ZSBzYXZlJylcclxuXHRcdFx0XHRcdC5zZXREZXNjKCdQcm9jZXNzIHJlbW90ZSBpbWFnZXMgd2hlbiBzYXZpbmcgYSBub3RlJylcclxuXHRcdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0b2dnbGVcclxuXHRcdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY29udmVydE9uTm90ZVNhdmUpXHJcblx0XHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY29udmVydE9uTm90ZVNhdmUgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSByZW5kZXJSZW5hbWVTZXR0aW5ncyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuXHRcdGNvbnN0IGdyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXJFbCwgJ1JlbmFtZSBvcHRpb25zJywgJ2ltYWdlLW1hbmFnZXInKTtcclxuXHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnU2hvdyBpbWFnZSByZW5hbWUgZGlhbG9nIGF1dG9tYXRpY2FsbHknKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdIYW5kbGUgYW5kIHJlbmFtZSBpbWFnZXMgd2hlbiB0aGV5IGFyZSBhZGRlZCB0byB0aGUgdmF1bHQgdmlhIHBhc3RlIG9yIGRyYWcgYW5kIGRyb3AnKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG5cdFx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93UmVuYW1lRGlhbG9nKVxyXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1JlbmFtZURpYWxvZyA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucmVmcmVzaFdpdGhTY3JvbGxQcmVzZXJ2ZShjb250YWluZXJFbCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dSZW5hbWVEaWFsb2cpIHtcclxuXHRcdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHRcdC5zZXROYW1lKCdSZW5hbWUgb24gcGFzdGUnKVxyXG5cdFx0XHRcdFx0LnNldERlc2MoJ0hhbmRsZSBhbmQgcmVuYW1lIGltYWdlcyB3aGVuIHBhc3RpbmcgaW50byB0aGUgZWRpdG9yJylcclxuXHRcdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0b2dnbGVcclxuXHRcdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlUmVuYW1lT25QYXN0ZSlcclxuXHRcdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVSZW5hbWVPblBhc3RlID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdGdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0XHQuc2V0TmFtZSgnUmVuYW1lIG9uIGRyYWcgYW5kIGRyb3AnKVxyXG5cdFx0XHRcdFx0LnNldERlc2MoJ0hhbmRsZSBhbmQgcmVuYW1lIGltYWdlcyB3aGVuIGRyb3BwaW5nIGludG8gdGhlIGVkaXRvcicpXHJcblx0XHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuXHRcdFx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZVJlbmFtZU9uRHJvcClcclxuXHRcdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVSZW5hbWVPbkRyb3AgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdGdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdQcm9jZXNzIGJhY2tncm91bmQgZmlsZSBjaGFuZ2VzJylcclxuXHRcdFx0XHQuc2V0RGVzYygnQXV0b21hdGljYWxseSBjb252ZXJ0IGFuZCByZW5hbWUgcmVtb3RlIGltYWdlcyB3aGVuIGZpbGVzIGFyZSBjaGFuZ2VkIGluIHRoZSBiYWNrZ3JvdW5kIChieSBHaXQgb3Igb3RoZXIgcGx1Z2lucykuIFdhcm5pbmc6IFR1cm5pbmcgdGhpcyBvbiBtYXkgY2F1c2UgdGhlIHJlbmFtZSBtb2RhbCB0byBhcHBlYXIgZm9yIGltYWdlcyB5b3VcXCd2ZSBhbHJlYWR5IHByb2Nlc3NlZCBvbiBvdGhlciBkZXZpY2VzIGR1cmluZyBhIHN5bmMuJylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuXHRcdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucHJvY2Vzc0JhY2tncm91bmRDaGFuZ2VzKVxyXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MucHJvY2Vzc0JhY2tncm91bmRDaGFuZ2VzID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ0Rlc2NyaXB0aXZlIGltYWdlcycpXHJcblx0XHRcdFx0LnNldERlc2MoJ0FzayBmb3IgaW1hZ2UgZGVzY3JpcHRpb24sIHVzZSBhcyBkaXNwbGF5IHRleHQgYW5kIGtlYmFiLWNhc2UgZm9yIGZpbGVuYW1lIChhcHBsaWVzIHRvIG5vdGUgYm9keSBpbnNlcnRpb25zIG9ubHksIG5vdCBwcm9wZXJ0aWVzKScpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcblx0XHRcdFx0XHR0b2dnbGVcclxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZURlc2NyaXB0aXZlSW1hZ2VzKVxyXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlRGVzY3JpcHRpdmVJbWFnZXMgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnQXV0byByZW5hbWUnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdBdXRvbWF0aWNhbGx5IHJlbmFtZSB3aXRob3V0IHNob3dpbmcgZGlhbG9nICh1c2VzIHRlbXBsYXRlKScpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcblx0XHRcdFx0XHR0b2dnbGVcclxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmF1dG9SZW5hbWUpXHJcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvUmVuYW1lID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ0R1cGxpY2F0ZSBudW1iZXIgZGVsaW1pdGVyJylcclxuXHRcdFx0XHQuc2V0RGVzYygnQ2hhcmFjdGVyKHMpIGJldHdlZW4gbmFtZSBhbmQgbnVtYmVyIGZvciBkdXBsaWNhdGVzIChlLmcuLCBcIi1cIiBnaXZlcyBcImltYWdlLTFcIiknKVxyXG5cdFx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcblx0XHRcdFx0XHR0ZXh0XHJcblx0XHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignLScpXHJcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kdXBOdW1iZXJEZWxpbWl0ZXIpXHJcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5kdXBOdW1iZXJEZWxpbWl0ZXIgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnRHVwbGljYXRlIG51bWJlciBhdCBzdGFydCcpXHJcblx0XHRcdFx0LnNldERlc2MoJ1B1dCB0aGUgZHVwbGljYXRlIG51bWJlciBhdCB0aGUgc3RhcnQgKGUuZy4sIFwiMS1pbWFnZVwiIGluc3RlYWQgb2YgXCJpbWFnZS0xXCIpJylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuXHRcdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZHVwTnVtYmVyQXRTdGFydClcclxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmR1cE51bWJlckF0U3RhcnQgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnRGlzYWJsZSByZW5hbWUgbm90aWNlJylcclxuXHRcdFx0XHQuc2V0RGVzYygnRG8gbm90IHNob3cgYSBub3RpY2UgYWZ0ZXIgcmVuYW1pbmcgYW4gaW1hZ2UnKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG5cdFx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kaXNhYmxlUmVuYW1lTm90aWNlKVxyXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZGlzYWJsZVJlbmFtZU5vdGljZSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogR2V0IHRoZSBjdXJyZW50IGRldmljZSB0eXBlXHJcblx0ICovXHJcblx0cHJpdmF0ZSBnZXRDdXJyZW50RGV2aWNlKCk6IERldmljZVR5cGUge1xyXG5cdFx0aWYgKFBsYXRmb3JtLmlzUGhvbmUpIHtcclxuXHRcdFx0cmV0dXJuIERldmljZVR5cGUuUGhvbmU7XHJcblx0XHR9XHJcblx0XHRpZiAoUGxhdGZvcm0uaXNUYWJsZXQpIHtcclxuXHRcdFx0cmV0dXJuIERldmljZVR5cGUuVGFibGV0O1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIERldmljZVR5cGUuRGVza3RvcDtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEhlbHBlciB0byBwcmVzZXJ2ZSBzY3JvbGwgcG9zaXRpb24gd2hlbiByZS1yZW5kZXJpbmcgc2V0dGluZ3NcclxuXHQgKi9cclxuXHRwcml2YXRlIHJlZnJlc2hXaXRoU2Nyb2xsUHJlc2VydmUoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcblx0XHRjb25zdCBzY3JvbGxDb250YWluZXIgPSBjb250YWluZXJFbC5jbG9zZXN0KCcudmVydGljYWwtdGFiLWNvbnRlbnQnKSB8fFxyXG5cdFx0XHRjb250YWluZXJFbC5jbG9zZXN0KCcuc2V0dGluZ3MtY29udGVudCcpIHx8XHJcblx0XHRcdGNvbnRhaW5lckVsLnBhcmVudEVsZW1lbnQ7XHJcblx0XHRjb25zdCBzY3JvbGxUb3AgPSBzY3JvbGxDb250YWluZXI/LnNjcm9sbFRvcCB8fCAwO1xyXG5cclxuXHRcdHRoaXMuZGlzcGxheSgpO1xyXG5cclxuXHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XHJcblx0XHRcdGlmIChzY3JvbGxDb250YWluZXIpIHtcclxuXHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsVG9wO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgcmVuZGVyQmFubmVyU2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcblx0XHRjb25zdCBncm91cCA9IGNyZWF0ZVNldHRpbmdzR3JvdXAoY29udGFpbmVyRWwsICdCYW5uZXIgaW1hZ2VzJywgJ2ltYWdlLW1hbmFnZXInKTtcclxuXHRcdGNvbnN0IGN1cnJlbnREZXZpY2UgPSB0aGlzLmdldEN1cnJlbnREZXZpY2UoKTtcclxuXHRcdGNvbnN0IGRldmljZVNldHRpbmdzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuYmFubmVyW2N1cnJlbnREZXZpY2VdO1xyXG5cdFx0Y29uc3QgZGVmYXVsdERldmljZVNldHRpbmdzID0gREVGQVVMVF9CQU5ORVJfREVWSUNFX1NFVFRJTkdTW2N1cnJlbnREZXZpY2VdO1xyXG5cdFx0Y29uc3QgcHJvcGVydHlTZXR0aW5ncyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmJhbm5lci5wcm9wZXJ0aWVzO1xyXG5cclxuXHRcdC8vIERldmljZS1zcGVjaWZpYyBlbmFibGUgdG9nZ2xlXHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnU2hvdyBiYW5uZXInKVxyXG5cdFx0XHRcdC5zZXREZXNjKGBFbmFibGUgb3IgZGlzYWJsZSBiYW5uZXJzIG9uIHlvdXIgJHtjdXJyZW50RGV2aWNlfSBkZXZpY2VgKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG5cdFx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZShkZXZpY2VTZXR0aW5ncy5lbmFibGVkKVxyXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYmFubmVyW2N1cnJlbnREZXZpY2VdLmVuYWJsZWQgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnJlZnJlc2hXaXRoU2Nyb2xsUHJlc2VydmUoY29udGFpbmVyRWwpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIE9ubHkgc2hvdyBvdGhlciBzZXR0aW5ncyBpZiBlbmFibGVkXHJcblx0XHRpZiAoIWRldmljZVNldHRpbmdzLmVuYWJsZWQpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEJhbm5lciBoZWlnaHRcclxuXHRcdGdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdIZWlnaHQnKVxyXG5cdFx0XHRcdC5zZXREZXNjKGBIZWlnaHQgb2YgdGhlIGJhbm5lciBvbiB5b3VyICR7Y3VycmVudERldmljZX0gZGV2aWNlIChpbiBwaXhlbHMpYClcclxuXHRcdFx0XHQuYWRkVGV4dCgodGV4dCkgPT4ge1xyXG5cdFx0XHRcdFx0dGV4dFxyXG5cdFx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoU3RyaW5nKGRlZmF1bHREZXZpY2VTZXR0aW5ncy5oZWlnaHQpKVxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUoU3RyaW5nKGRldmljZVNldHRpbmdzLmhlaWdodCkpXHJcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBudW0gPSBwYXJzZUludCh2YWx1ZSwgMTApO1xyXG5cdFx0XHRcdFx0XHRcdGlmICghaXNOYU4obnVtKSAmJiBudW0gPiAwKSB7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5iYW5uZXJbY3VycmVudERldmljZV0uaGVpZ2h0ID0gbnVtO1xyXG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIEJhbm5lciBwYWRkaW5nXHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnUGFkZGluZycpXHJcblx0XHRcdFx0LnNldERlc2MoJ1BhZGRpbmcgb2YgdGhlIGJhbm5lciBmcm9tIHRoZSBlZGdlcyBvZiB0aGUgbm90ZSAoaW4gcGl4ZWxzKScpXHJcblx0XHRcdFx0LmFkZFRleHQoKHRleHQpID0+IHtcclxuXHRcdFx0XHRcdHRleHRcclxuXHRcdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKFN0cmluZyhkZWZhdWx0RGV2aWNlU2V0dGluZ3MucGFkZGluZykpXHJcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZShTdHJpbmcoZGV2aWNlU2V0dGluZ3MucGFkZGluZykpXHJcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBudW0gPSBwYXJzZUludCh2YWx1ZSwgMTApO1xyXG5cdFx0XHRcdFx0XHRcdGlmICghaXNOYU4obnVtKSAmJiBudW0gPj0gMCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYmFubmVyW2N1cnJlbnREZXZpY2VdLnBhZGRpbmcgPSBudW07XHJcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gTm90ZSBvZmZzZXRcclxuXHRcdGdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdOb3RlIG9mZnNldCcpXHJcblx0XHRcdFx0LnNldERlc2MoJ01vdmUgdGhlIHBvc2l0aW9uIG9mIHRoZSBub3RlIGNvbnRlbnQgKGluIHBpeGVscyknKVxyXG5cdFx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcblx0XHRcdFx0XHR0ZXh0XHJcblx0XHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihTdHJpbmcoZGVmYXVsdERldmljZVNldHRpbmdzLm5vdGVPZmZzZXQpKVxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUoU3RyaW5nKGRldmljZVNldHRpbmdzLm5vdGVPZmZzZXQpKVxyXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgbnVtID0gcGFyc2VJbnQodmFsdWUsIDEwKTtcclxuXHRcdFx0XHRcdFx0XHRpZiAoIWlzTmFOKG51bSkpIHtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmJhbm5lcltjdXJyZW50RGV2aWNlXS5ub3RlT2Zmc2V0ID0gbnVtO1xyXG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIFZpZXcgb2Zmc2V0XHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnVmlldyBvZmZzZXQnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdNb3ZlIHRoZSBwb3NpdGlvbiBvZiB0aGUgdmlldyBjb250ZW50IChpbiBwaXhlbHMpJylcclxuXHRcdFx0XHQuYWRkVGV4dCgodGV4dCkgPT4ge1xyXG5cdFx0XHRcdFx0dGV4dFxyXG5cdFx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoU3RyaW5nKGRlZmF1bHREZXZpY2VTZXR0aW5ncy52aWV3T2Zmc2V0KSlcclxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKFN0cmluZyhkZXZpY2VTZXR0aW5ncy52aWV3T2Zmc2V0KSlcclxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IG51bSA9IHBhcnNlSW50KHZhbHVlLCAxMCk7XHJcblx0XHRcdFx0XHRcdFx0aWYgKCFpc05hTihudW0pKSB7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5iYW5uZXJbY3VycmVudERldmljZV0udmlld09mZnNldCA9IG51bTtcclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBGYWRlXHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnRmFkZScpXHJcblx0XHRcdFx0LnNldERlc2MoJ0ZhZGUgdGhlIGltYWdlIG91dCB0b3dhcmRzIHRoZSBjb250ZW50JylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuXHRcdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUoZGV2aWNlU2V0dGluZ3MuZmFkZSlcclxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmJhbm5lcltjdXJyZW50RGV2aWNlXS5mYWRlID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gUm91bmRlZCBjb3JuZXJzXHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnUm91bmRlZCBjb3JuZXJzJylcclxuXHRcdFx0XHQuc2V0RGVzYygnRW5hYmxlIHJvdW5kZWQgY29ybmVycyBmb3IgdGhlIGJhbm5lcicpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcblx0XHRcdFx0XHR0b2dnbGVcclxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKGRldmljZVNldHRpbmdzLmJhbm5lclJhZGl1c0VuYWJsZWQpXHJcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5iYW5uZXJbY3VycmVudERldmljZV0uYmFubmVyUmFkaXVzRW5hYmxlZCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIEFuaW1hdGlvblxyXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ0FuaW1hdGlvbicpXHJcblx0XHRcdFx0LnNldERlc2MoJ0VuYWJsZSBiYW5uZXIgYW5pbWF0aW9uIHdoZW4gb3BlbmluZyBmaWxlcycpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcblx0XHRcdFx0XHR0b2dnbGVcclxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKGRldmljZVNldHRpbmdzLmFuaW1hdGlvbilcclxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmJhbm5lcltjdXJyZW50RGV2aWNlXS5hbmltYXRpb24gPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBGcm9udG1hdHRlciBwcm9wZXJ0eSBzZXR0aW5ncyAoZ2xvYmFsLCBub3QgZGV2aWNlLXNwZWNpZmljKVxyXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ0Jhbm5lciBwcm9wZXJ0eScpXHJcblx0XHRcdFx0LnNldERlc2MoJ05hbWUgb2YgdGhlIGJhbm5lciBwcm9wZXJ0eSB0aGlzIHBsdWdpbiB3aWxsIGxvb2sgZm9yIGluIHRoZSBwcm9wZXJ0aWVzJylcclxuXHRcdFx0XHQuYWRkVGV4dCgodGV4dCkgPT4ge1xyXG5cdFx0XHRcdFx0dGV4dFxyXG5cdFx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJ0Jhbm5lcicpXHJcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZShwcm9wZXJ0eVNldHRpbmdzLmltYWdlUHJvcGVydHkpXHJcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5iYW5uZXIucHJvcGVydGllcy5pbWFnZVByb3BlcnR5ID0gdmFsdWUgfHwgJ2Jhbm5lcic7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ0ljb24gcHJvcGVydHknKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdOYW1lIG9mIHRoZSBpY29uIHByb3BlcnR5IHRoaXMgcGx1Z2luIHdpbGwgbG9vayBmb3IgaW4gdGhlIHByb3BlcnRpZXMnKVxyXG5cdFx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcblx0XHRcdFx0XHR0ZXh0XHJcblx0XHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignSWNvbicpXHJcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZShwcm9wZXJ0eVNldHRpbmdzLmljb25Qcm9wZXJ0eSlcclxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmJhbm5lci5wcm9wZXJ0aWVzLmljb25Qcm9wZXJ0eSA9IHZhbHVlIHx8ICdpY29uJztcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnRW5hYmxlIHBlci1ub3RlIGJhbm5lciBoaWRpbmcnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdBbGxvdyBkaXNhYmxpbmcgYmFubmVycyBvbiBhIHBlci1ub3RlIGJhc2lzIHVzaW5nIGEgcHJvcGVydGllcyBmaWVsZCcpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcblx0XHRcdFx0XHR0b2dnbGVcclxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHByb3BlcnR5U2V0dGluZ3MuaGlkZVByb3BlcnR5RW5hYmxlZClcclxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmJhbm5lci5wcm9wZXJ0aWVzLmhpZGVQcm9wZXJ0eUVuYWJsZWQgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnJlZnJlc2hXaXRoU2Nyb2xsUHJlc2VydmUoY29udGFpbmVyRWwpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIFNob3cgaGlkZSBwcm9wZXJ0eSBpbnB1dCB3aGVuIGVuYWJsZWRcclxuXHRcdGlmIChwcm9wZXJ0eVNldHRpbmdzLmhpZGVQcm9wZXJ0eUVuYWJsZWQpIHtcclxuXHRcdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHRcdC5zZXROYW1lKCdIaWRlIGJhbm5lciBwcm9wZXJ0eScpXHJcblx0XHRcdFx0XHQuc2V0RGVzYygnTmFtZSBvZiB0aGUgcHJvcGVydHkgdGhhdCwgd2hlbiBzZXQgdG8gdHJ1ZSwgd2lsbCBoaWRlIHRoZSBiYW5uZXIgZm9yIHRoYXQgbm90ZScpXHJcblx0XHRcdFx0XHQuYWRkVGV4dCgodGV4dCkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0ZXh0XHJcblx0XHRcdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKCdoaWRlQmFubmVyJylcclxuXHRcdFx0XHRcdFx0XHQuc2V0VmFsdWUocHJvcGVydHlTZXR0aW5ncy5oaWRlUHJvcGVydHkpXHJcblx0XHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYmFubmVyLnByb3BlcnRpZXMuaGlkZVByb3BlcnR5ID0gdmFsdWUgfHwgJyc7XHJcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBJY29uIHNldHRpbmdzXHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnU2hvdyBpY29uJylcclxuXHRcdFx0XHQuc2V0RGVzYygnRW5hYmxlIG9yIGRpc2FibGUgdGhlIGljb24nKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG5cdFx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZShkZXZpY2VTZXR0aW5ncy5pY29uRW5hYmxlZClcclxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmJhbm5lcltjdXJyZW50RGV2aWNlXS5pY29uRW5hYmxlZCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucmVmcmVzaFdpdGhTY3JvbGxQcmVzZXJ2ZShjb250YWluZXJFbCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gT25seSBzaG93IGljb24gc2V0dGluZ3MgaWYgZW5hYmxlZFxyXG5cdFx0aWYgKGRldmljZVNldHRpbmdzLmljb25FbmFibGVkKSB7XHJcblx0XHRcdGdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0XHQuc2V0TmFtZSgnSWNvbiBzaXplJylcclxuXHRcdFx0XHRcdC5zZXREZXNjKCdTaXplIG9mIHRoZSBpY29uIChpbiBwaXhlbHMpJylcclxuXHRcdFx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcblx0XHRcdFx0XHRcdHRleHRcclxuXHRcdFx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoU3RyaW5nKGRlZmF1bHREZXZpY2VTZXR0aW5ncy5pY29uU2l6ZSkpXHJcblx0XHRcdFx0XHRcdFx0LnNldFZhbHVlKFN0cmluZyhkZXZpY2VTZXR0aW5ncy5pY29uU2l6ZSkpXHJcblx0XHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgbnVtID0gcGFyc2VJbnQodmFsdWUsIDEwKTtcclxuXHRcdFx0XHRcdFx0XHRcdGlmICghaXNOYU4obnVtKSAmJiBudW0gPiAwKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmJhbm5lcltjdXJyZW50RGV2aWNlXS5pY29uU2l6ZSA9IG51bTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdFx0LnNldE5hbWUoJ0ljb24gYmFja2dyb3VuZCcpXHJcblx0XHRcdFx0XHQuc2V0RGVzYygnRW5hYmxlIG9yIGRpc2FibGUgdGhlIGljb24gYmFja2dyb3VuZCcpXHJcblx0XHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuXHRcdFx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHRcdFx0LnNldFZhbHVlKGRldmljZVNldHRpbmdzLmljb25CYWNrZ3JvdW5kKVxyXG5cdFx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmJhbm5lcltjdXJyZW50RGV2aWNlXS5pY29uQmFja2dyb3VuZCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdFx0LnNldE5hbWUoJ0ljb24gZnJhbWUnKVxyXG5cdFx0XHRcdFx0LnNldERlc2MoJ1Nob3cgdGhlIGJvcmRlci9iYWNrZ3JvdW5kIGZyYW1lIGFyb3VuZCB0aGUgaWNvbiAoZGlzYWJsZSB0byBkaXNwbGF5IGp1c3QgdGhlIGljb24gZ3JhcGhpYyknKVxyXG5cdFx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0XHRcdC5zZXRWYWx1ZShkZXZpY2VTZXR0aW5ncy5pY29uRnJhbWUpXHJcblx0XHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYmFubmVyW2N1cnJlbnREZXZpY2VdLmljb25GcmFtZSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdFx0LnNldE5hbWUoJ0ljb24gYm9yZGVyIHNpemUnKVxyXG5cdFx0XHRcdFx0LnNldERlc2MoJ1NpemUgb2YgdGhlIGljb24gYm9yZGVyIChpbiBwaXhlbHMpJylcclxuXHRcdFx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcblx0XHRcdFx0XHRcdHRleHRcclxuXHRcdFx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoU3RyaW5nKGRlZmF1bHREZXZpY2VTZXR0aW5ncy5pY29uQm9yZGVyKSlcclxuXHRcdFx0XHRcdFx0XHQuc2V0VmFsdWUoU3RyaW5nKGRldmljZVNldHRpbmdzLmljb25Cb3JkZXIpKVxyXG5cdFx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IG51bSA9IHBhcnNlSW50KHZhbHVlLCAxMCk7XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoIWlzTmFOKG51bSkgJiYgbnVtID49IDApIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYmFubmVyW2N1cnJlbnREZXZpY2VdLmljb25Cb3JkZXIgPSBudW07XHJcblx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHRcdC5zZXROYW1lKCdJY29uIGJvcmRlciByYWRpdXMnKVxyXG5cdFx0XHRcdFx0LnNldERlc2MoJ1NpemUgb2YgdGhlIGljb24gYm9yZGVyIHJhZGl1cyAoaW4gcGl4ZWxzKScpXHJcblx0XHRcdFx0XHQuYWRkVGV4dCgodGV4dCkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0ZXh0XHJcblx0XHRcdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKFN0cmluZyhkZWZhdWx0RGV2aWNlU2V0dGluZ3MuaWNvblJhZGl1cykpXHJcblx0XHRcdFx0XHRcdFx0LnNldFZhbHVlKFN0cmluZyhkZXZpY2VTZXR0aW5ncy5pY29uUmFkaXVzKSlcclxuXHRcdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBudW0gPSBwYXJzZUludCh2YWx1ZSwgMTApO1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKCFpc05hTihudW0pICYmIG51bSA+PSAwKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmJhbm5lcltjdXJyZW50RGV2aWNlXS5pY29uUmFkaXVzID0gbnVtO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdGdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0XHQuc2V0TmFtZSgnSWNvbiBhbGlnbm1lbnQgLSBob3Jpem9udGFsJylcclxuXHRcdFx0XHRcdC5zZXREZXNjKCdIb3Jpem9udGFsIGFsaWdubWVudCBvZiB0aGUgaWNvbicpXHJcblx0XHRcdFx0XHQuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XHJcblx0XHRcdFx0XHRcdGRyb3Bkb3duXHJcblx0XHRcdFx0XHRcdFx0LmFkZE9wdGlvbignZmxleC1zdGFydCcsICdMZWZ0JylcclxuXHRcdFx0XHRcdFx0XHQuYWRkT3B0aW9uKCdjZW50ZXInLCAnQ2VudGVyJylcclxuXHRcdFx0XHRcdFx0XHQuYWRkT3B0aW9uKCdmbGV4LWVuZCcsICdSaWdodCcpXHJcblx0XHRcdFx0XHRcdFx0LnNldFZhbHVlKGRldmljZVNldHRpbmdzLmljb25BbGlnbm1lbnRIKVxyXG5cdFx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmJhbm5lcltjdXJyZW50RGV2aWNlXS5pY29uQWxpZ25tZW50SCA9IHZhbHVlIGFzICdmbGV4LXN0YXJ0JyB8ICdjZW50ZXInIHwgJ2ZsZXgtZW5kJztcclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHRcdC5zZXROYW1lKCdJY29uIGFsaWdubWVudCAtIHZlcnRpY2FsJylcclxuXHRcdFx0XHRcdC5zZXREZXNjKCdWZXJ0aWNhbCBhbGlnbm1lbnQgb2YgdGhlIGljb24nKVxyXG5cdFx0XHRcdFx0LmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xyXG5cdFx0XHRcdFx0XHRkcm9wZG93blxyXG5cdFx0XHRcdFx0XHRcdC5hZGRPcHRpb24oJ2ZsZXgtc3RhcnQnLCAnVG9wJylcclxuXHRcdFx0XHRcdFx0XHQuYWRkT3B0aW9uKCdjZW50ZXInLCAnQ2VudGVyJylcclxuXHRcdFx0XHRcdFx0XHQuYWRkT3B0aW9uKCdmbGV4LWVuZCcsICdCb3R0b20nKVxyXG5cdFx0XHRcdFx0XHRcdC5zZXRWYWx1ZShkZXZpY2VTZXR0aW5ncy5pY29uQWxpZ25tZW50VilcclxuXHRcdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5iYW5uZXJbY3VycmVudERldmljZV0uaWNvbkFsaWdubWVudFYgPSB2YWx1ZSBhcyAnZmxleC1zdGFydCcgfCAnY2VudGVyJyB8ICdmbGV4LWVuZCc7XHJcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHByaXZhdGUgcmVuZGVyQWR2YW5jZWRTZXR0aW5ncyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuXHRcdGNvbnN0IGdyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXJFbCwgJ0FkdmFuY2VkJywgJ2ltYWdlLW1hbmFnZXInKTtcclxuXHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnU3VwcG9ydGVkIGZpbGUgZXh0ZW5zaW9ucycpXHJcblx0XHRcdFx0LnNldERlc2MoJ0ZpbGUgZXh0ZW5zaW9ucyB0byBwcm9jZXNzIChjb21tYS1zZXBhcmF0ZWQpJylcclxuXHRcdFx0XHQuYWRkVGV4dCgodGV4dCkgPT4ge1xyXG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudFZhbHVlID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Muc3VwcG9ydGVkRXh0ZW5zaW9ucy5sZW5ndGggPiAwXHJcblx0XHRcdFx0XHRcdD8gdGhpcy5wbHVnaW4uc2V0dGluZ3Muc3VwcG9ydGVkRXh0ZW5zaW9ucy5qb2luKCcsICcpXHJcblx0XHRcdFx0XHRcdDogJyc7XHJcblx0XHRcdFx0XHR0ZXh0XHJcblx0XHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignRmlsZSBleHRlbnNpb25zJylcclxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKGN1cnJlbnRWYWx1ZSlcclxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGV4dGVuc2lvbnMgPSB2YWx1ZVxyXG5cdFx0XHRcdFx0XHRcdFx0LnNwbGl0KCcsJylcclxuXHRcdFx0XHRcdFx0XHRcdC5tYXAoKGV4dCkgPT4gZXh0LnRyaW0oKS50b0xvd2VyQ2FzZSgpKVxyXG5cdFx0XHRcdFx0XHRcdFx0LmZpbHRlcigoZXh0KSA9PiBleHQubGVuZ3RoID4gMCk7XHJcblx0XHRcdFx0XHRcdFx0Ly8gRGVmYXVsdCB0byAnbWQnIGlmIGVtcHR5XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc3VwcG9ydGVkRXh0ZW5zaW9ucyA9IGV4dGVuc2lvbnMubGVuZ3RoID4gMCA/IGV4dGVuc2lvbnMgOiBbJ21kJ107XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ0RlYnVnIG1vZGUnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdFbmFibGUgZGVidWcgbG9nZ2luZyB0byBjb25zb2xlJylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuXHRcdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVidWdNb2RlKVxyXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVidWdNb2RlID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblx0fVxyXG59XHJcbiIsICIvKipcclxuICogQ29tcGF0aWJpbGl0eSB1dGlsaXRpZXMgZm9yIHNldHRpbmdzXHJcbiAqIFByb3ZpZGVzIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkgZm9yIFNldHRpbmdHcm91cCAocmVxdWlyZXMgQVBJIDEuMTEuMCspXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgU2V0dGluZywgcmVxdWlyZUFwaVZlcnNpb24gfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCAqIGFzIE9ic2lkaWFuTW9kdWxlIGZyb20gJ29ic2lkaWFuJztcclxuXHJcbi8qKlxyXG4gKiBJbnRlcmZhY2UgdGhhdCB3b3JrcyB3aXRoIGJvdGggU2V0dGluZ0dyb3VwIGFuZCBmYWxsYmFjayBjb250YWluZXJcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgU2V0dGluZ3NDb250YWluZXIge1xyXG5cdGFkZFNldHRpbmcoY2I6IChzZXR0aW5nOiBTZXR0aW5nKSA9PiB2b2lkKTogdm9pZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZXMgYSBzZXR0aW5ncyBjb250YWluZXIgdGhhdCB1c2VzIFNldHRpbmdHcm91cCBpZiBhdmFpbGFibGUgKEFQSSAxLjExLjArKSxcclxuICogb3RoZXJ3aXNlIGZhbGxzIGJhY2sgdG8gY3JlYXRpbmcgYSBoZWFkaW5nIGFuZCB1c2luZyB0aGUgY29udGFpbmVyIGRpcmVjdGx5LlxyXG4gKiBcclxuICogVXNlcyByZXF1aXJlQXBpVmVyc2lvbignMS4xMS4wJykgdG8gY2hlY2sgaWYgU2V0dGluZ0dyb3VwIGlzIGF2YWlsYWJsZS5cclxuICogVGhpcyBpcyB0aGUgb2ZmaWNpYWwgT2JzaWRpYW4gQVBJIG1ldGhvZCBmb3IgdmVyc2lvbiBjaGVja2luZy5cclxuICogXHJcbiAqIEBwYXJhbSBjb250YWluZXJFbCAtIFRoZSBjb250YWluZXIgZWxlbWVudCBmb3Igc2V0dGluZ3NcclxuICogQHBhcmFtIGhlYWRpbmcgLSBUaGUgaGVhZGluZyB0ZXh0IGZvciB0aGUgc2V0dGluZ3MgZ3JvdXAgKG9wdGlvbmFsKVxyXG4gKiBAcGFyYW0gbWFuaWZlc3RJZCAtIFRoZSBwbHVnaW4ncyBtYW5pZmVzdCBJRCBmb3IgQ1NTIHNjb3BpbmcgKHJlcXVpcmVkIGZvciBmYWxsYmFjayBtb2RlKVxyXG4gKiBAcmV0dXJucyBBIGNvbnRhaW5lciB0aGF0IGNhbiBiZSB1c2VkIHRvIGFkZCBzZXR0aW5nc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNldHRpbmdzR3JvdXAoXHJcblx0Y29udGFpbmVyRWw6IEhUTUxFbGVtZW50LFxyXG5cdGhlYWRpbmc/OiBzdHJpbmcsXHJcblx0bWFuaWZlc3RJZD86IHN0cmluZ1xyXG4pOiBTZXR0aW5nc0NvbnRhaW5lciB7XHJcblx0Ly8gQ2hlY2sgaWYgU2V0dGluZ0dyb3VwIGlzIGF2YWlsYWJsZSAoQVBJIDEuMTEuMCspXHJcblx0Ly8gcmVxdWlyZUFwaVZlcnNpb24gaXMgdGhlIG9mZmljaWFsIE9ic2lkaWFuIEFQSSBtZXRob2QgZm9yIHZlcnNpb24gY2hlY2tpbmdcclxuXHRpZiAocmVxdWlyZUFwaVZlcnNpb24oJzEuMTEuMCcpKSB7XHJcblx0XHQvLyBVc2UgU2V0dGluZ0dyb3VwIC0gaXQncyBndWFyYW50ZWVkIHRvIGV4aXN0IGlmIHJlcXVpcmVBcGlWZXJzaW9uIHJldHVybnMgdHJ1ZVxyXG5cdFx0Ly8gQWNjZXNzIFNldHRpbmdHcm91cCB2aWEgdHlwZSBhc3NlcnRpb24gc2luY2UgaXQgbWF5IG5vdCBiZSBpbiB0eXBlIGRlZmluaXRpb25zXHJcblx0XHQvLyBmb3Igb2xkZXIgVHlwZVNjcmlwdCB2ZXJzaW9ucywgYnV0IGV4aXN0cyBhdCBydW50aW1lIGluIE9ic2lkaWFuIDEuMTEuMCtcclxuXHRcdC8vIFVzaW5nIHVua25vd24gaW5zdGVhZCBvZiBhbnkgdG8gc2F0aXNmeSBlc2xpbnQgd2hpbGUgbWFpbnRhaW5pbmcgdHlwZSBzYWZldHlcclxuXHRcdGNvbnN0IFNldHRpbmdHcm91cENsYXNzID0gKE9ic2lkaWFuTW9kdWxlIGFzIHVua25vd24gYXMgeyBTZXR0aW5nR3JvdXA/OiBuZXcgKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCkgPT4ge1xyXG5cdFx0XHRzZXRIZWFkaW5nKGhlYWRpbmc6IHN0cmluZyk6IHtcclxuXHRcdFx0XHRhZGRTZXR0aW5nKGNiOiAoc2V0dGluZzogU2V0dGluZykgPT4gdm9pZCk6IHZvaWQ7XHJcblx0XHRcdH07XHJcblx0XHRcdGFkZFNldHRpbmcoY2I6IChzZXR0aW5nOiBTZXR0aW5nKSA9PiB2b2lkKTogdm9pZDtcclxuXHRcdH0gfSkuU2V0dGluZ0dyb3VwO1xyXG5cdFx0XHJcblx0XHRpZiAoU2V0dGluZ0dyb3VwQ2xhc3MpIHtcclxuXHRcdFx0Y29uc3QgZ3JvdXAgPSBoZWFkaW5nIFxyXG5cdFx0XHRcdD8gbmV3IFNldHRpbmdHcm91cENsYXNzKGNvbnRhaW5lckVsKS5zZXRIZWFkaW5nKGhlYWRpbmcpXHJcblx0XHRcdFx0OiBuZXcgU2V0dGluZ0dyb3VwQ2xhc3MoY29udGFpbmVyRWwpO1xyXG5cdFx0XHRyZXR1cm4ge1xyXG5cdFx0XHRcdGFkZFNldHRpbmcoY2I6IChzZXR0aW5nOiBTZXR0aW5nKSA9PiB2b2lkKSB7XHJcblx0XHRcdFx0XHRncm91cC5hZGRTZXR0aW5nKGNiKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH07XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdC8vIEZhbGxiYWNrIHBhdGggKGVpdGhlciBBUEkgPCAxLjExLjAgb3IgU2V0dGluZ0dyb3VwIG5vdCBmb3VuZClcclxuXHQvLyBBZGQgc2NvcGluZyBjbGFzcyB0byBjb250YWluZXJFbCB0byBzY29wZSBDU1MgdG8gb25seSB0aGlzIHBsdWdpbidzIHNldHRpbmdzXHJcblx0aWYgKG1hbmlmZXN0SWQpIHtcclxuXHRcdGNvbnRhaW5lckVsLmFkZENsYXNzKGAke21hbmlmZXN0SWR9LXNldHRpbmdzLWNvbXBhdGApO1xyXG5cdH1cclxuXHRcclxuXHR7XHJcblx0XHQvLyBGYWxsYmFjazogQ3JlYXRlIGEgaGVhZGluZyBtYW51YWxseSBmb3Igb2xkZXIgQVBJIHZlcnNpb25zXHJcblx0XHQvLyBOb3RlOiBXaGlsZSBiZXN0IHByYWN0aWNlIHByZWZlcnMgU2V0dGluZy5zZXRIZWFkaW5nKCksIHRoZSBmYWxsYmFjayBwYXRoXHJcblx0XHQvLyBpcyBmb3IgdmVyc2lvbnMgdGhhdCBtYXkgbm90IHN1cHBvcnQgaXQsIHNvIG1hbnVhbCBoZWFkaW5nIGlzIGFwcHJvcHJpYXRlIGhlcmVcclxuXHRcdGlmIChoZWFkaW5nKSB7XHJcblx0XHRcdGNvbnN0IGhlYWRpbmdFbCA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdignc2V0dGluZy1ncm91cC1oZWFkaW5nJyk7XHJcblx0XHRcdGhlYWRpbmdFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6IGhlYWRpbmcgfSk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdGFkZFNldHRpbmcoY2I6IChzZXR0aW5nOiBTZXR0aW5nKSA9PiB2b2lkKSB7XHJcblx0XHRcdFx0Y29uc3Qgc2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKTtcclxuXHRcdFx0XHRjYihzZXR0aW5nKTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHR9XHJcbn1cclxuIiwgIi8qKlxyXG4gKiBJbWFnZSBNYW5hZ2VyIFBsdWdpbiBUeXBlc1xyXG4gKiBTaGFyZWQgVHlwZVNjcmlwdCBpbnRlcmZhY2VzIGFuZCB0eXBlIGRlZmluaXRpb25zXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIFN1cHBvcnRlZCBpbWFnZSBwcm92aWRlcnMgZm9yIHJlbW90ZSBzZWFyY2hcclxuICovXHJcbmV4cG9ydCBlbnVtIEltYWdlUHJvdmlkZXIge1xyXG5cdFVuc3BsYXNoID0gJ3Vuc3BsYXNoJyxcclxuXHRQZXhlbHMgPSAncGV4ZWxzJyxcclxuXHRQaXhhYmF5ID0gJ3BpeGFiYXknLFxyXG5cdExvY2FsID0gJ2xvY2FsJyxcclxufVxyXG5cclxuLyoqXHJcbiAqIEltYWdlIG9yaWVudGF0aW9uIGZpbHRlclxyXG4gKi9cclxuZXhwb3J0IGVudW0gSW1hZ2VPcmllbnRhdGlvbiB7XHJcblx0QW55ID0gJ2FueScsXHJcblx0TGFuZHNjYXBlID0gJ2xhbmRzY2FwZScsXHJcblx0UG9ydHJhaXQgPSAncG9ydHJhaXQnLFxyXG5cdFNxdWFyZSA9ICdzcXVhcmUnLFxyXG59XHJcblxyXG4vKipcclxuICogSW1hZ2Ugc2l6ZSBwcmVmZXJlbmNlXHJcbiAqL1xyXG5leHBvcnQgZW51bSBJbWFnZVNpemUge1xyXG5cdE9yaWdpbmFsID0gJ29yaWdpbmFsJyxcclxuXHRMYXJnZSA9ICdsYXJnZScsXHJcblx0TWVkaXVtID0gJ21lZGl1bScsXHJcblx0U21hbGwgPSAnc21hbGwnLFxyXG59XHJcblxyXG4vKipcclxuICogTGluayBmb3JtYXQgZm9yIGluc2VydGluZyBpbWFnZXMgaW50byBwcm9wZXJ0aWVzXHJcbiAqL1xyXG5leHBvcnQgZW51bSBQcm9wZXJ0eUxpbmtGb3JtYXQge1xyXG5cdE9ic2lkaWFuRGVmYXVsdCA9ICdvYnNpZGlhbicsIC8vIFVzZSBPYnNpZGlhbidzIGRlZmF1bHQgbGluayBmb3JtYXQgKHJlc3BlY3RzIHVzZU1hcmtkb3duTGlua3MsIG5ld0xpbmtGb3JtYXQpXHJcblx0UGF0aCA9ICdwYXRoJywgICAgICAgICAgIC8vIGNvdmVyOiBwYXRoL3RvL2ltYWdlLmpwZ1xyXG5cdFJlbGF0aXZlUGF0aCA9ICdyZWxhdGl2ZScsIC8vIGNvdmVyOiAuL2ltYWdlLmpwZyBvciBpbWFnZS5qcGcgKHNhbWUgZm9sZGVyKVxyXG5cdFdpa2lsaW5rID0gJ3dpa2lsaW5rJywgICAvLyBjb3ZlcjogXCJbW3BhdGgvdG8vaW1hZ2UuanBnXV1cIlxyXG5cdE1hcmtkb3duID0gJ21hcmtkb3duJywgICAvLyBjb3ZlcjogXCIhW10ocGF0aC90by9pbWFnZS5qcGcpXCJcclxuXHRDdXN0b20gPSAnY3VzdG9tJywgICAgICAgLy8gY292ZXI6IFwie2ltYWdlLXVybH1cIiB3aXRoIGN1c3RvbSBmb3JtYXRcclxufVxyXG5cclxuLyoqXHJcbiAqIEF0dGFjaG1lbnQgbG9jYXRpb24gb3ZlcnJpZGUgb3B0aW9uc1xyXG4gKi9cclxuZXhwb3J0IGVudW0gQXR0YWNobWVudExvY2F0aW9uIHtcclxuXHRPYnNpZGlhbkRlZmF1bHQgPSAnb2JzaWRpYW4nLCAgLy8gRm9sbG93IE9ic2lkaWFuJ3Mgc2V0dGluZ1xyXG5cdFNhbWVGb2xkZXIgPSAnc2FtZScsICAgICAgICAgICAvLyBTYW1lIGZvbGRlciBhcyBub3RlXHJcblx0U3ViZm9sZGVyID0gJ3N1YmZvbGRlcicsICAgICAgIC8vIENvbmZpZ3VyYWJsZSBzdWJmb2xkZXJcclxuXHRWYXVsdEZvbGRlciA9ICd2YXVsdCcsICAgICAgICAgLy8gQ2VudHJhbGl6ZWQgdmF1bHQgZm9sZGVyXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBEZXZpY2UgdHlwZXMgZm9yIGJhbm5lciBzZXR0aW5nc1xyXG4gKi9cclxuZXhwb3J0IGVudW0gRGV2aWNlVHlwZSB7XHJcblx0RGVza3RvcCA9ICdkZXNrdG9wJyxcclxuXHRUYWJsZXQgPSAndGFibGV0JyxcclxuXHRQaG9uZSA9ICdwaG9uZScsXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJY29uIHR5cGUgZm9yIGJhbm5lciBpY29uc1xyXG4gKi9cclxuZXhwb3J0IGVudW0gQmFubmVySWNvblR5cGUge1xyXG5cdExpbmsgPSAnbGluaycsXHJcblx0VGV4dCA9ICd0ZXh0JyxcclxufVxyXG5cclxuLyoqXHJcbiAqIENvbnRlbnQgdHlwZSBmb3IgYmFubmVyIChpbWFnZSBvciB2aWRlbylcclxuICovXHJcbmV4cG9ydCBlbnVtIEJhbm5lckNvbnRlbnRUeXBlIHtcclxuXHRJbWFnZSA9ICdpbWFnZScsXHJcblx0VmlkZW8gPSAndmlkZW8nLFxyXG59XHJcblxyXG4vKipcclxuICogRGV2aWNlLXNwZWNpZmljIGJhbm5lciBzZXR0aW5nc1xyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBCYW5uZXJEZXZpY2VTZXR0aW5ncyB7XHJcblx0Ly8gQ29yZSBiYW5uZXIgc2V0dGluZ3NcclxuXHRlbmFibGVkOiBib29sZWFuO1xyXG5cdGhlaWdodDogbnVtYmVyO1xyXG5cdHZpZXdPZmZzZXQ6IG51bWJlcjtcclxuXHRub3RlT2Zmc2V0OiBudW1iZXI7XHJcblx0YmFubmVyUmFkaXVzRW5hYmxlZDogYm9vbGVhbjtcclxuXHRib3JkZXJSYWRpdXM6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdO1xyXG5cdHBhZGRpbmc6IG51bWJlcjtcclxuXHRmYWRlOiBib29sZWFuO1xyXG5cdGFuaW1hdGlvbjogYm9vbGVhbjtcclxuXHJcblx0Ly8gSWNvbiBzZXR0aW5nc1xyXG5cdGljb25FbmFibGVkOiBib29sZWFuO1xyXG5cdGljb25TaXplOiBudW1iZXI7XHJcblx0aWNvblJhZGl1czogbnVtYmVyO1xyXG5cdGljb25CYWNrZ3JvdW5kOiBib29sZWFuO1xyXG5cdGljb25Cb3JkZXI6IG51bWJlcjtcclxuXHRpY29uRnJhbWU6IGJvb2xlYW47XHJcblx0aWNvbkFsaWdubWVudEg6ICdmbGV4LXN0YXJ0JyB8ICdjZW50ZXInIHwgJ2ZsZXgtZW5kJztcclxuXHRpY29uQWxpZ25tZW50VjogJ2ZsZXgtc3RhcnQnIHwgJ2NlbnRlcicgfCAnZmxleC1lbmQnO1xyXG5cdGljb25PZmZzZXRYOiBudW1iZXI7XHJcblx0aWNvbk9mZnNldFk6IG51bWJlcjtcclxufVxyXG5cclxuLyoqXHJcbiAqIEJhbm5lciBwcm9wZXJ0eSBzZXR0aW5ncyAoZ2xvYmFsLCBub3QgZGV2aWNlLXNwZWNpZmljKVxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBCYW5uZXJQcm9wZXJ0eVNldHRpbmdzIHtcclxuXHRpbWFnZVByb3BlcnR5OiBzdHJpbmc7XHJcblx0aWNvblByb3BlcnR5OiBzdHJpbmc7XHJcblx0aGlkZVByb3BlcnR5RW5hYmxlZDogYm9vbGVhbjtcclxuXHRoaWRlUHJvcGVydHk6IHN0cmluZztcclxufVxyXG5cclxuLyoqXHJcbiAqIENvbXBsZXRlIGJhbm5lciBzZXR0aW5nc1xyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBCYW5uZXJTZXR0aW5ncyB7XHJcblx0cHJvcGVydGllczogQmFubmVyUHJvcGVydHlTZXR0aW5ncztcclxuXHRkZXNrdG9wOiBCYW5uZXJEZXZpY2VTZXR0aW5ncztcclxuXHR0YWJsZXQ6IEJhbm5lckRldmljZVNldHRpbmdzO1xyXG5cdHBob25lOiBCYW5uZXJEZXZpY2VTZXR0aW5ncztcclxufVxyXG5cclxuLyoqXHJcbiAqIFBhcnNlZCBiYW5uZXIgaW1hZ2Ugb3B0aW9uc1xyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBCYW5uZXJJbWFnZU9wdGlvbnMge1xyXG5cdHVybDogc3RyaW5nO1xyXG5cdGV4dGVybmFsOiBib29sZWFuO1xyXG5cdHg6IG51bWJlcjtcclxuXHR5OiBudW1iZXI7XHJcblx0dHlwZTogQmFubmVyQ29udGVudFR5cGUgfCBudWxsO1xyXG5cdHJlcGVhdGFibGU6IGJvb2xlYW47XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBCYW5uZXIgZGF0YSBmb3IgYSBzcGVjaWZpYyB2aWV3XHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEJhbm5lckRhdGEge1xyXG5cdGZpbGVwYXRoOiBzdHJpbmcgfCBudWxsO1xyXG5cdGltYWdlOiBzdHJpbmcgfCBudWxsO1xyXG5cdGljb246IHN0cmluZyB8IG51bGw7XHJcblx0dmlld01vZGU6ICdzb3VyY2UnIHwgJ3ByZXZpZXcnIHwgbnVsbDtcclxuXHRsYXN0Vmlld01vZGU6ICdzb3VyY2UnIHwgJ3ByZXZpZXcnIHwgbnVsbDtcclxuXHRpc0ltYWdlQ2hhbmdlOiBib29sZWFuO1xyXG5cdGlzSW1hZ2VQcm9wc1VwZGF0ZTogYm9vbGVhbjtcclxuXHRuZWVkc1VwZGF0ZTogYm9vbGVhbjtcclxufVxyXG5cclxuLyoqXHJcbiAqIERlZmF1bHQgZGV2aWNlLXNwZWNpZmljIGJhbm5lciBzZXR0aW5nc1xyXG4gKi9cclxuZXhwb3J0IGNvbnN0IERFRkFVTFRfQkFOTkVSX0RFVklDRV9TRVRUSU5HUzogUmVjb3JkPERldmljZVR5cGUsIEJhbm5lckRldmljZVNldHRpbmdzPiA9IHtcclxuXHRbRGV2aWNlVHlwZS5EZXNrdG9wXToge1xyXG5cdFx0ZW5hYmxlZDogdHJ1ZSxcclxuXHRcdGhlaWdodDogMjQwLFxyXG5cdFx0dmlld09mZnNldDogMCxcclxuXHRcdG5vdGVPZmZzZXQ6IC0zMixcclxuXHRcdGJhbm5lclJhZGl1c0VuYWJsZWQ6IGZhbHNlLFxyXG5cdFx0Ym9yZGVyUmFkaXVzOiBbOCwgOCwgOCwgOF0sXHJcblx0XHRwYWRkaW5nOiA4LFxyXG5cdFx0ZmFkZTogdHJ1ZSxcclxuXHRcdGFuaW1hdGlvbjogZmFsc2UsXHJcblx0XHRpY29uRW5hYmxlZDogZmFsc2UsXHJcblx0XHRpY29uU2l6ZTogOTYsXHJcblx0XHRpY29uUmFkaXVzOiA4LFxyXG5cdFx0aWNvbkJhY2tncm91bmQ6IHRydWUsXHJcblx0XHRpY29uQm9yZGVyOiAyLFxyXG5cdFx0aWNvbkZyYW1lOiB0cnVlLFxyXG5cdFx0aWNvbkFsaWdubWVudEg6ICdmbGV4LXN0YXJ0JyxcclxuXHRcdGljb25BbGlnbm1lbnRWOiAnZmxleC1lbmQnLFxyXG5cdFx0aWNvbk9mZnNldFg6IDAsXHJcblx0XHRpY29uT2Zmc2V0WTogLTI0LFxyXG5cdH0sXHJcblx0W0RldmljZVR5cGUuVGFibGV0XToge1xyXG5cdFx0ZW5hYmxlZDogdHJ1ZSxcclxuXHRcdGhlaWdodDogMTkwLFxyXG5cdFx0dmlld09mZnNldDogMCxcclxuXHRcdG5vdGVPZmZzZXQ6IC0zMixcclxuXHRcdGJhbm5lclJhZGl1c0VuYWJsZWQ6IGZhbHNlLFxyXG5cdFx0Ym9yZGVyUmFkaXVzOiBbOCwgOCwgOCwgOF0sXHJcblx0XHRwYWRkaW5nOiA4LFxyXG5cdFx0ZmFkZTogdHJ1ZSxcclxuXHRcdGFuaW1hdGlvbjogZmFsc2UsXHJcblx0XHRpY29uRW5hYmxlZDogZmFsc2UsXHJcblx0XHRpY29uU2l6ZTogOTYsXHJcblx0XHRpY29uUmFkaXVzOiA4LFxyXG5cdFx0aWNvbkJhY2tncm91bmQ6IHRydWUsXHJcblx0XHRpY29uQm9yZGVyOiAyLFxyXG5cdFx0aWNvbkZyYW1lOiB0cnVlLFxyXG5cdFx0aWNvbkFsaWdubWVudEg6ICdmbGV4LXN0YXJ0JyxcclxuXHRcdGljb25BbGlnbm1lbnRWOiAnZmxleC1lbmQnLFxyXG5cdFx0aWNvbk9mZnNldFg6IDAsXHJcblx0XHRpY29uT2Zmc2V0WTogLTI0LFxyXG5cdH0sXHJcblx0W0RldmljZVR5cGUuUGhvbmVdOiB7XHJcblx0XHRlbmFibGVkOiB0cnVlLFxyXG5cdFx0aGVpZ2h0OiAxNjAsXHJcblx0XHR2aWV3T2Zmc2V0OiAwLFxyXG5cdFx0bm90ZU9mZnNldDogLTMyLFxyXG5cdFx0YmFubmVyUmFkaXVzRW5hYmxlZDogZmFsc2UsXHJcblx0XHRib3JkZXJSYWRpdXM6IFs4LCA4LCA4LCA4XSxcclxuXHRcdHBhZGRpbmc6IDgsXHJcblx0XHRmYWRlOiB0cnVlLFxyXG5cdFx0YW5pbWF0aW9uOiBmYWxzZSxcclxuXHRcdGljb25FbmFibGVkOiBmYWxzZSxcclxuXHRcdGljb25TaXplOiA1NixcclxuXHRcdGljb25SYWRpdXM6IDgsXHJcblx0XHRpY29uQmFja2dyb3VuZDogdHJ1ZSxcclxuXHRcdGljb25Cb3JkZXI6IDIsXHJcblx0XHRpY29uRnJhbWU6IHRydWUsXHJcblx0XHRpY29uQWxpZ25tZW50SDogJ2ZsZXgtc3RhcnQnLFxyXG5cdFx0aWNvbkFsaWdubWVudFY6ICdmbGV4LWVuZCcsXHJcblx0XHRpY29uT2Zmc2V0WDogMCxcclxuXHRcdGljb25PZmZzZXRZOiAtMjQsXHJcblx0fSxcclxufTtcclxuXHJcbi8qKlxyXG4gKiBEZWZhdWx0IGJhbm5lciBzZXR0aW5nc1xyXG4gKi9cclxuZXhwb3J0IGNvbnN0IERFRkFVTFRfQkFOTkVSX1NFVFRJTkdTOiBCYW5uZXJTZXR0aW5ncyA9IHtcclxuXHRwcm9wZXJ0aWVzOiB7XHJcblx0XHRpbWFnZVByb3BlcnR5OiAnYmFubmVyJyxcclxuXHRcdGljb25Qcm9wZXJ0eTogJ2ljb24nLFxyXG5cdFx0aGlkZVByb3BlcnR5RW5hYmxlZDogZmFsc2UsXHJcblx0XHRoaWRlUHJvcGVydHk6ICcnLFxyXG5cdH0sXHJcblx0ZGVza3RvcDogeyAuLi5ERUZBVUxUX0JBTk5FUl9ERVZJQ0VfU0VUVElOR1NbRGV2aWNlVHlwZS5EZXNrdG9wXSB9LFxyXG5cdHRhYmxldDogeyAuLi5ERUZBVUxUX0JBTk5FUl9ERVZJQ0VfU0VUVElOR1NbRGV2aWNlVHlwZS5UYWJsZXRdIH0sXHJcblx0cGhvbmU6IHsgLi4uREVGQVVMVF9CQU5ORVJfREVWSUNFX1NFVFRJTkdTW0RldmljZVR5cGUuUGhvbmVdIH0sXHJcbn07XHJcblxyXG4vKipcclxuICogUGx1Z2luIHNldHRpbmdzIGludGVyZmFjZVxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBJbWFnZU1hbmFnZXJTZXR0aW5ncyB7XHJcblx0Ly8gR2VuZXJhbCBTZXR0aW5nc1xyXG5cdGVuYWJsZVJlbmFtZU9uUGFzdGU6IGJvb2xlYW47XHJcblx0ZW5hYmxlUmVuYW1lT25Ecm9wOiBib29sZWFuO1xyXG5cdGltYWdlTmFtZVRlbXBsYXRlOiBzdHJpbmc7XHJcblx0YXR0YWNobWVudExvY2F0aW9uOiBBdHRhY2htZW50TG9jYXRpb247XHJcblx0Y3VzdG9tQXR0YWNobWVudFBhdGg6IHN0cmluZztcclxuXHJcblx0Ly8gSW1hZ2UgU2VydmljZXNcclxuXHRkZWZhdWx0UHJvdmlkZXI6IEltYWdlUHJvdmlkZXI7XHJcblx0dW5zcGxhc2hQcm94eVNlcnZlcjogc3RyaW5nO1xyXG5cdHBleGVsc0FwaUtleTogc3RyaW5nOyAvLyBQbGFpbnRleHQgQVBJIGtleSAoYmFja3dhcmQgY29tcGF0aWJpbGl0eSwgZmFsbGJhY2spXHJcblx0cGV4ZWxzQXBpS2V5U2VjcmV0SWQ6IHN0cmluZzsgLy8gU2VjcmV0IElEIGZvciBTZWNyZXRTdG9yYWdlICgxLjExLjQrKVxyXG5cdHBpeGFiYXlBcGlLZXk6IHN0cmluZzsgLy8gUGxhaW50ZXh0IEFQSSBrZXkgKGJhY2t3YXJkIGNvbXBhdGliaWxpdHksIGZhbGxiYWNrKVxyXG5cdHBpeGFiYXlBcGlLZXlTZWNyZXRJZDogc3RyaW5nOyAvLyBTZWNyZXQgSUQgZm9yIFNlY3JldFN0b3JhZ2UgKDEuMTEuNCspXHJcblx0ZGVmYXVsdE9yaWVudGF0aW9uOiBJbWFnZU9yaWVudGF0aW9uO1xyXG5cdGRlZmF1bHRJbWFnZVNpemU6IEltYWdlU2l6ZTtcclxuXHJcblx0Ly8gUHJvcGVydHkgSW5zZXJ0aW9uXHJcblx0ZW5hYmxlUHJvcGVydHlQYXN0ZTogYm9vbGVhbjtcclxuXHRwcm9wZXJ0eUxpbmtGb3JtYXQ6IFByb3BlcnR5TGlua0Zvcm1hdDtcclxuXHRjdXN0b21Qcm9wZXJ0eUxpbmtGb3JtYXQ6IHN0cmluZztcclxuXHRkZWZhdWx0UHJvcGVydHlOYW1lOiBzdHJpbmc7XHJcblx0ZGVmYXVsdEljb25Qcm9wZXJ0eU5hbWU6IHN0cmluZztcclxuXHJcblx0Ly8gQWx0IHRleHQgcHJvcGVydHlcclxuXHRhbHRUZXh0UHJvcGVydHk6IHN0cmluZztcclxuXHJcblx0Ly8gQ29udmVyc2lvblxyXG5cdGF1dG9Db252ZXJ0UmVtb3RlSW1hZ2VzOiBib29sZWFuO1xyXG5cdGNvbnZlcnRPbk5vdGVPcGVuOiBib29sZWFuO1xyXG5cdGNvbnZlcnRPbk5vdGVTYXZlOiBib29sZWFuO1xyXG5cdHByb2Nlc3NCYWNrZ3JvdW5kQ2hhbmdlczogYm9vbGVhbjtcclxuXHJcblx0Ly8gUmVuYW1lIE9wdGlvbnNcclxuXHRzaG93UmVuYW1lRGlhbG9nOiBib29sZWFuO1xyXG5cdGF1dG9SZW5hbWU6IGJvb2xlYW47XHJcblx0ZHVwTnVtYmVyRGVsaW1pdGVyOiBzdHJpbmc7XHJcblx0ZHVwTnVtYmVyQXRTdGFydDogYm9vbGVhbjtcclxuXHRkaXNhYmxlUmVuYW1lTm90aWNlOiBib29sZWFuO1xyXG5cdGVuYWJsZURlc2NyaXB0aXZlSW1hZ2VzOiBib29sZWFuOyAvLyBBc2sgZm9yIGRlc2NyaXB0aW9uLCB1c2UgYXMgZGlzcGxheSB0ZXh0IChub3RlIGJvZHkgb25seSlcclxuXHJcblx0Ly8gSW1hZ2UgSW5zZXJ0aW9uIE9wdGlvbnMgKHJlbW90ZSBpbWFnZSBhdHRyaWJ1dGlvbiBvcHRpb25zKVxyXG5cdGluc2VydFNpemU6IHN0cmluZzsgLy8gSW1hZ2Ugc2l6ZSBpbiBtYXJrZG93biAoZS5nLiwgXCIyMDBcIiBvciBcIjIwMHgxMDBcIilcclxuXHRpbnNlcnRSZWZlcnJhbDogYm9vbGVhbjsgLy8gSW5zZXJ0IGF0dHJpYnV0aW9uIHRleHQgKGUuZy4sIFwiUGhvdG8gYnkgW2F1dGhvcl0gb24gW3Byb3ZpZGVyXVwiKVxyXG5cdGluc2VydEJhY2tMaW5rOiBib29sZWFuOyAvLyBJbnNlcnQgYmFja2xpbmsgYmVmb3JlIGF0dHJpYnV0aW9uIChlLmcuLCBcIltCYWNrbGlua10odXJsKSB8IFBob3RvIGJ5Li4uXCIpXHJcblx0YXBwZW5kUmVmZXJyYWw6IGJvb2xlYW47IC8vIEFwcGVuZCByZWZlcnJhbCBhdCBlbmQgb2YgZmlsZSB3aGVuIGluc2VydGluZyB0byBmcm9udG1hdHRlclxyXG5cclxuXHQvLyBCYW5uZXIgU2V0dGluZ3NcclxuXHRiYW5uZXI6IEJhbm5lclNldHRpbmdzO1xyXG5cclxuXHQvLyBBZHZhbmNlZFxyXG5cdHN1cHBvcnRlZEV4dGVuc2lvbnM6IHN0cmluZ1tdO1xyXG5cdGRlYnVnTW9kZTogYm9vbGVhbjtcclxufVxyXG5cclxuLyoqXHJcbiAqIERlZmF1bHQgc2V0dGluZ3NcclxuICovXHJcbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBJbWFnZU1hbmFnZXJTZXR0aW5ncyA9IHtcclxuXHQvLyBHZW5lcmFsIFNldHRpbmdzXHJcblx0ZW5hYmxlUmVuYW1lT25QYXN0ZTogdHJ1ZSxcclxuXHRlbmFibGVSZW5hbWVPbkRyb3A6IHRydWUsXHJcblx0aW1hZ2VOYW1lVGVtcGxhdGU6ICcnLFxyXG5cdGF0dGFjaG1lbnRMb2NhdGlvbjogQXR0YWNobWVudExvY2F0aW9uLk9ic2lkaWFuRGVmYXVsdCxcclxuXHRjdXN0b21BdHRhY2htZW50UGF0aDogJy4vYXNzZXRzJyxcclxuXHJcblx0Ly8gSW1hZ2UgU2VydmljZXNcclxuXHRkZWZhdWx0UHJvdmlkZXI6IEltYWdlUHJvdmlkZXIuVW5zcGxhc2gsXHJcblx0dW5zcGxhc2hQcm94eVNlcnZlcjogJycsXHJcblx0cGV4ZWxzQXBpS2V5OiAnJyxcclxuXHRwZXhlbHNBcGlLZXlTZWNyZXRJZDogJycsXHJcblx0cGl4YWJheUFwaUtleTogJycsXHJcblx0cGl4YWJheUFwaUtleVNlY3JldElkOiAnJyxcclxuXHRkZWZhdWx0T3JpZW50YXRpb246IEltYWdlT3JpZW50YXRpb24uQW55LFxyXG5cdGRlZmF1bHRJbWFnZVNpemU6IEltYWdlU2l6ZS5MYXJnZSxcclxuXHJcblx0Ly8gUHJvcGVydHkgSW5zZXJ0aW9uXHJcblx0ZW5hYmxlUHJvcGVydHlQYXN0ZTogdHJ1ZSxcclxuXHRwcm9wZXJ0eUxpbmtGb3JtYXQ6IFByb3BlcnR5TGlua0Zvcm1hdC5PYnNpZGlhbkRlZmF1bHQsXHJcblx0Y3VzdG9tUHJvcGVydHlMaW5rRm9ybWF0OiAne2ltYWdlLXVybH0nLFxyXG5cdGRlZmF1bHRQcm9wZXJ0eU5hbWU6ICdiYW5uZXInLFxyXG5cdGRlZmF1bHRJY29uUHJvcGVydHlOYW1lOiAnaWNvbicsXHJcblx0YWx0VGV4dFByb3BlcnR5OiAnJyxcclxuXHJcblx0Ly8gQ29udmVyc2lvblxyXG5cdGF1dG9Db252ZXJ0UmVtb3RlSW1hZ2VzOiBmYWxzZSxcclxuXHRjb252ZXJ0T25Ob3RlT3BlbjogZmFsc2UsXHJcblx0Y29udmVydE9uTm90ZVNhdmU6IGZhbHNlLFxyXG5cdHByb2Nlc3NCYWNrZ3JvdW5kQ2hhbmdlczogdHJ1ZSxcclxuXHJcblx0Ly8gUmVuYW1lIE9wdGlvbnNcclxuXHRzaG93UmVuYW1lRGlhbG9nOiB0cnVlLFxyXG5cdGF1dG9SZW5hbWU6IGZhbHNlLFxyXG5cdGR1cE51bWJlckRlbGltaXRlcjogJy0nLFxyXG5cdGR1cE51bWJlckF0U3RhcnQ6IGZhbHNlLFxyXG5cdGRpc2FibGVSZW5hbWVOb3RpY2U6IGZhbHNlLFxyXG5cdGVuYWJsZURlc2NyaXB0aXZlSW1hZ2VzOiBmYWxzZSxcclxuXHJcblx0Ly8gSW1hZ2UgSW5zZXJ0aW9uIE9wdGlvbnMgKHJlbW90ZSBpbWFnZSBhdHRyaWJ1dGlvbiBvcHRpb25zKVxyXG5cdGluc2VydFNpemU6ICcnLCAvLyBFbXB0eSA9IG5vIHNpemUgc3BlY2lmaWVkXHJcblx0aW5zZXJ0UmVmZXJyYWw6IHRydWUsIC8vIERlZmF1bHQgdG8gdHJ1ZSAoYXR0cmlidXRpb24pXHJcblx0aW5zZXJ0QmFja0xpbms6IGZhbHNlLCAvLyBEZWZhdWx0IHRvIGZhbHNlXHJcblx0YXBwZW5kUmVmZXJyYWw6IGZhbHNlLCAvLyBEZWZhdWx0IHRvIGZhbHNlXHJcblxyXG5cdC8vIEJhbm5lciBTZXR0aW5nc1xyXG5cdGJhbm5lcjogeyAuLi5ERUZBVUxUX0JBTk5FUl9TRVRUSU5HUyB9LFxyXG5cclxuXHQvLyBBZHZhbmNlZFxyXG5cdHN1cHBvcnRlZEV4dGVuc2lvbnM6IFsnbWQnLCAnbWR4J10sXHJcblx0ZGVidWdNb2RlOiBmYWxzZSxcclxufTtcclxuXHJcbi8qKlxyXG4gKiBSZXByZXNlbnRzIGFuIGltYWdlIGZyb20gYSByZW1vdGUgcHJvdmlkZXJcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgUmVtb3RlSW1hZ2Uge1xyXG5cdGlkOiBzdHJpbmc7XHJcblx0cHJvdmlkZXI6IEltYWdlUHJvdmlkZXI7XHJcblx0dGh1bWJuYWlsVXJsOiBzdHJpbmc7XHJcblx0cmVndWxhclVybDogc3RyaW5nO1xyXG5cdGZ1bGxVcmw6IHN0cmluZztcclxuXHRkb3dubG9hZFVybDogc3RyaW5nO1xyXG5cdHdpZHRoOiBudW1iZXI7XHJcblx0aGVpZ2h0OiBudW1iZXI7XHJcblx0ZGVzY3JpcHRpb24/OiBzdHJpbmc7XHJcblx0YXV0aG9yPzogc3RyaW5nO1xyXG5cdGF1dGhvclVybD86IHN0cmluZztcclxuXHRwYWdlVXJsPzogc3RyaW5nO1xyXG59XHJcblxyXG4vKipcclxuICogUmVzdWx0IG9mIHByb2Nlc3NpbmcgYW4gaW1hZ2VcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgUHJvY2Vzc2VkSW1hZ2Uge1xyXG5cdGZpbGU6IFRGaWxlIHwgbnVsbDtcclxuXHRwYXRoOiBzdHJpbmc7XHJcblx0bGlua1RleHQ6IHN0cmluZztcclxuXHRkZXNjcmlwdGlvbj86IHN0cmluZztcclxuXHRzdWNjZXNzOiBib29sZWFuO1xyXG5cdGVycm9yPzogc3RyaW5nO1xyXG59XHJcblxyXG4vKipcclxuICogSW1hZ2UgaW5zZXJ0aW9uIGNvbnRleHRcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgSW5zZXJ0aW9uQ29udGV4dCB7XHJcblx0aXNQcm9wZXJ0eTogYm9vbGVhbjtcclxuXHRwcm9wZXJ0eU5hbWU/OiBzdHJpbmc7XHJcblx0Y3Vyc29yUG9zaXRpb24/OiBFZGl0b3JQb3NpdGlvbjtcclxuXHRhY3RpdmVGaWxlOiBURmlsZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIE5hbWUgdGVtcGxhdGUgdmFyaWFibGVzXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE5hbWVUZW1wbGF0ZVZhcmlhYmxlcyB7XHJcblx0ZmlsZU5hbWU6IHN0cmluZztcclxuXHRkaXJOYW1lOiBzdHJpbmc7XHJcblx0aW1hZ2VOYW1lS2V5Pzogc3RyaW5nO1xyXG5cdGZpcnN0SGVhZGluZz86IHN0cmluZztcclxuXHRkYXRlOiBzdHJpbmc7XHJcblx0dGltZTogc3RyaW5nO1xyXG5cdGluZGV4PzogbnVtYmVyO1xyXG59XHJcblxyXG4vLyBJbXBvcnQgdHlwZXMgZnJvbSBPYnNpZGlhbiBmb3IgdXNlIGluIGludGVyZmFjZXNcclxuaW1wb3J0IHR5cGUgeyBURmlsZSwgRWRpdG9yUG9zaXRpb24gfSBmcm9tICdvYnNpZGlhbic7XHJcbiIsICIvKipcclxuICogU3RvcmFnZSBNYW5hZ2VyIFNlcnZpY2VcclxuICogSGFuZGxlcyBmaWxlIHN0b3JhZ2UsIHBhdGggcmVzb2x1dGlvbiwgYW5kIE9ic2lkaWFuIGF0dGFjaG1lbnQgbG9jYXRpb24gaW50ZWdyYXRpb25cclxuICovXHJcblxyXG5pbXBvcnQgeyBBcHAsIFRGaWxlLCBURm9sZGVyLCBub3JtYWxpemVQYXRoIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBJbWFnZU1hbmFnZXJTZXR0aW5ncywgQXR0YWNobWVudExvY2F0aW9uIH0gZnJvbSAnLi4vdHlwZXMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFN0b3JhZ2VNYW5hZ2VyIHtcclxuXHRwcml2YXRlIGFwcDogQXBwO1xyXG5cdHByaXZhdGUgc2V0dGluZ3M6IEltYWdlTWFuYWdlclNldHRpbmdzO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgc2V0dGluZ3M6IEltYWdlTWFuYWdlclNldHRpbmdzLCBvYnNlcnZhYmxlPzogeyBzdWJzY3JpYmUoZm46IChzZXR0aW5nczogSW1hZ2VNYW5hZ2VyU2V0dGluZ3MpID0+IHZvaWQpOiB2b2lkIH0pIHtcclxuXHRcdHRoaXMuYXBwID0gYXBwO1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xyXG5cclxuXHRcdC8vIFN1YnNjcmliZSB0byBzZXR0aW5ncyB1cGRhdGVzIGlmIG9ic2VydmFibGUgaXMgcHJvdmlkZWRcclxuXHRcdG9ic2VydmFibGU/LnN1YnNjcmliZSgobmV3U2V0dGluZ3MpID0+IHtcclxuXHRcdFx0dGhpcy51cGRhdGVTZXR0aW5ncyhuZXdTZXR0aW5ncyk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFVwZGF0ZSBzZXR0aW5ncyByZWZlcmVuY2VcclxuXHQgKi9cclxuXHR1cGRhdGVTZXR0aW5ncyhzZXR0aW5nczogSW1hZ2VNYW5hZ2VyU2V0dGluZ3MpOiB2b2lkIHtcclxuXHRcdHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldCB0aGUgYXR0YWNobWVudCBmb2xkZXIgcGF0aCBmb3IgYSBnaXZlbiBub3RlXHJcblx0ICovXHJcblx0Z2V0QXR0YWNobWVudEZvbGRlcihub3RlRmlsZTogVEZpbGUpOiBzdHJpbmcge1xyXG5cdFx0Y29uc3Qgbm90ZVBhdGggPSBub3RlRmlsZS5wYXJlbnQ/LnBhdGggPz8gJyc7XHJcblxyXG5cdFx0c3dpdGNoICh0aGlzLnNldHRpbmdzLmF0dGFjaG1lbnRMb2NhdGlvbikge1xyXG5cdFx0XHRjYXNlIEF0dGFjaG1lbnRMb2NhdGlvbi5TYW1lRm9sZGVyOlxyXG5cdFx0XHRcdHJldHVybiBub3RlUGF0aDtcclxuXHJcblx0XHRcdGNhc2UgQXR0YWNobWVudExvY2F0aW9uLlN1YmZvbGRlcjpcclxuXHRcdFx0XHRyZXR1cm4gbm9ybWFsaXplUGF0aCh0aGlzLmpvaW5QYXRocyhub3RlUGF0aCwgdGhpcy5zZXR0aW5ncy5jdXN0b21BdHRhY2htZW50UGF0aCkpO1xyXG5cclxuXHRcdFx0Y2FzZSBBdHRhY2htZW50TG9jYXRpb24uVmF1bHRGb2xkZXI6XHJcblx0XHRcdFx0cmV0dXJuIG5vcm1hbGl6ZVBhdGgodGhpcy5zZXR0aW5ncy5jdXN0b21BdHRhY2htZW50UGF0aCk7XHJcblxyXG5cdFx0XHRjYXNlIEF0dGFjaG1lbnRMb2NhdGlvbi5PYnNpZGlhbkRlZmF1bHQ6XHJcblx0XHRcdGRlZmF1bHQ6XHJcblx0XHRcdFx0cmV0dXJuIHRoaXMuZ2V0T2JzaWRpYW5BdHRhY2htZW50Rm9sZGVyKG5vdGVGaWxlKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldCBPYnNpZGlhbidzIGNvbmZpZ3VyZWQgYXR0YWNobWVudCBmb2xkZXJcclxuXHQgKi9cclxuXHRwcml2YXRlIGdldE9ic2lkaWFuQXR0YWNobWVudEZvbGRlcihub3RlRmlsZTogVEZpbGUpOiBzdHJpbmcge1xyXG5cdFx0Ly8gQWNjZXNzIE9ic2lkaWFuJ3MgaW50ZXJuYWwgY29uZmlnIGZvciBhdHRhY2htZW50IGZvbGRlciAobm90IGluIHB1YmxpYyBBUEkgdHlwZXMgYnV0IGFjY2Vzc2libGUgYXQgcnVudGltZSlcclxuXHRcdGNvbnN0IHZhdWx0Q29uZmlnID0gKHRoaXMuYXBwLnZhdWx0IGFzIHVua25vd24gYXMgeyBjb25maWc/OiB7IGF0dGFjaG1lbnRGb2xkZXJQYXRoPzogc3RyaW5nIH0gfSkuY29uZmlnO1xyXG5cdFx0Y29uc3QgYXR0YWNobWVudEZvbGRlclBhdGg6IHN0cmluZyA9IHZhdWx0Q29uZmlnPy5hdHRhY2htZW50Rm9sZGVyUGF0aCA/PyAnLyc7XHJcblx0XHRjb25zdCBub3RlUGF0aCA9IG5vdGVGaWxlLnBhcmVudD8ucGF0aCA/PyAnJztcclxuXHJcblx0XHRpZiAoYXR0YWNobWVudEZvbGRlclBhdGggPT09ICcvJykge1xyXG5cdFx0XHQvLyBWYXVsdCByb290XHJcblx0XHRcdHJldHVybiAnJztcclxuXHRcdH0gZWxzZSBpZiAoYXR0YWNobWVudEZvbGRlclBhdGggPT09ICcuLycpIHtcclxuXHRcdFx0Ly8gU2FtZSBmb2xkZXIgYXMgbm90ZVxyXG5cdFx0XHRyZXR1cm4gbm90ZVBhdGg7XHJcblx0XHR9IGVsc2UgaWYgKGF0dGFjaG1lbnRGb2xkZXJQYXRoLnN0YXJ0c1dpdGgoJy4vJykpIHtcclxuXHRcdFx0Ly8gUmVsYXRpdmUgdG8gbm90ZVxyXG5cdFx0XHRjb25zdCByZWxhdGl2ZVBhdGggPSBhdHRhY2htZW50Rm9sZGVyUGF0aC5zbGljZSgyKTtcclxuXHRcdFx0cmV0dXJuIG5vcm1hbGl6ZVBhdGgodGhpcy5qb2luUGF0aHMobm90ZVBhdGgsIHJlbGF0aXZlUGF0aCkpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Ly8gQWJzb2x1dGUgcGF0aCBpbiB2YXVsdFxyXG5cdFx0XHRyZXR1cm4gbm9ybWFsaXplUGF0aChhdHRhY2htZW50Rm9sZGVyUGF0aCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBKb2luIHBhdGggc2VnbWVudHNcclxuXHQgKi9cclxuXHRwcml2YXRlIGpvaW5QYXRocyguLi5wYXJ0czogc3RyaW5nW10pOiBzdHJpbmcge1xyXG5cdFx0cmV0dXJuIHBhcnRzLmZpbHRlcihwID0+IHApLmpvaW4oJy8nKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEVuc3VyZSBhIGZvbGRlciBleGlzdHMsIGNyZWF0aW5nIGl0IGlmIG5lY2Vzc2FyeVxyXG5cdCAqL1xyXG5cdGFzeW5jIGVuc3VyZUZvbGRlckV4aXN0cyhmb2xkZXJQYXRoOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdGlmICghZm9sZGVyUGF0aCkgcmV0dXJuO1xyXG5cclxuXHRcdGNvbnN0IG5vcm1hbGl6ZWRQYXRoID0gbm9ybWFsaXplUGF0aChmb2xkZXJQYXRoKTtcclxuXHRcdGNvbnN0IGZvbGRlciA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChub3JtYWxpemVkUGF0aCk7XHJcblxyXG5cdFx0aWYgKCFmb2xkZXIpIHtcclxuXHRcdFx0YXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlRm9sZGVyKG5vcm1hbGl6ZWRQYXRoKTtcclxuXHRcdH0gZWxzZSBpZiAoIShmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSkge1xyXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoYFBhdGggZXhpc3RzIGJ1dCBpcyBub3QgYSBmb2xkZXI6ICR7bm9ybWFsaXplZFBhdGh9YCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBHZW5lcmF0ZSBhIHVuaXF1ZSBmaWxlIHBhdGggZm9yIGFuIGltYWdlXHJcblx0ICovXHJcblx0YXN5bmMgZ2V0QXZhaWxhYmxlUGF0aChiYXNlTmFtZTogc3RyaW5nLCBleHRlbnNpb246IHN0cmluZywgbm90ZUZpbGU6IFRGaWxlKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuXHRcdGNvbnN0IGZvbGRlciA9IHRoaXMuZ2V0QXR0YWNobWVudEZvbGRlcihub3RlRmlsZSk7XHJcblx0XHRhd2FpdCB0aGlzLmVuc3VyZUZvbGRlckV4aXN0cyhmb2xkZXIpO1xyXG5cclxuXHRcdGNvbnN0IHNhbml0aXplZE5hbWUgPSB0aGlzLnNhbml0aXplRmlsZU5hbWUoYmFzZU5hbWUpO1xyXG5cdFx0bGV0IGZpbGVOYW1lID0gYCR7c2FuaXRpemVkTmFtZX0uJHtleHRlbnNpb259YDtcclxuXHRcdGxldCBmaWxlUGF0aCA9IGZvbGRlciA/IG5vcm1hbGl6ZVBhdGgodGhpcy5qb2luUGF0aHMoZm9sZGVyLCBmaWxlTmFtZSkpIDogbm9ybWFsaXplUGF0aChmaWxlTmFtZSk7XHJcblxyXG5cdFx0Ly8gQ2hlY2sgZm9yIGR1cGxpY2F0ZXNcclxuXHRcdGxldCBjb3VudGVyID0gMTtcclxuXHRcdHdoaWxlICh0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpKSB7XHJcblx0XHRcdGlmICh0aGlzLnNldHRpbmdzLmR1cE51bWJlckF0U3RhcnQpIHtcclxuXHRcdFx0XHRmaWxlTmFtZSA9IGAke2NvdW50ZXJ9JHt0aGlzLnNldHRpbmdzLmR1cE51bWJlckRlbGltaXRlcn0ke3Nhbml0aXplZE5hbWV9LiR7ZXh0ZW5zaW9ufWA7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0ZmlsZU5hbWUgPSBgJHtzYW5pdGl6ZWROYW1lfSR7dGhpcy5zZXR0aW5ncy5kdXBOdW1iZXJEZWxpbWl0ZXJ9JHtjb3VudGVyfS4ke2V4dGVuc2lvbn1gO1xyXG5cdFx0XHR9XHJcblx0XHRcdGZpbGVQYXRoID0gZm9sZGVyID8gbm9ybWFsaXplUGF0aCh0aGlzLmpvaW5QYXRocyhmb2xkZXIsIGZpbGVOYW1lKSkgOiBub3JtYWxpemVQYXRoKGZpbGVOYW1lKTtcclxuXHRcdFx0Y291bnRlcisrO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBmaWxlUGF0aDtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNhdmUgYmluYXJ5IGRhdGEgYXMgYSBmaWxlXHJcblx0ICovXHJcblx0YXN5bmMgc2F2ZUZpbGUoZGF0YTogQXJyYXlCdWZmZXIsIGZpbGVQYXRoOiBzdHJpbmcpOiBQcm9taXNlPFRGaWxlPiB7XHJcblx0XHRjb25zdCBub3JtYWxpemVkUGF0aCA9IG5vcm1hbGl6ZVBhdGgoZmlsZVBhdGgpO1xyXG5cclxuXHRcdC8vIEVuc3VyZSBwYXJlbnQgZm9sZGVyIGV4aXN0c1xyXG5cdFx0Y29uc3QgbGFzdFNsYXNoID0gbm9ybWFsaXplZFBhdGgubGFzdEluZGV4T2YoJy8nKTtcclxuXHRcdGNvbnN0IHBhcmVudFBhdGggPSBsYXN0U2xhc2ggPiAwID8gbm9ybWFsaXplZFBhdGguc2xpY2UoMCwgbGFzdFNsYXNoKSA6ICcnO1xyXG5cdFx0aWYgKHBhcmVudFBhdGgpIHtcclxuXHRcdFx0YXdhaXQgdGhpcy5lbnN1cmVGb2xkZXJFeGlzdHMocGFyZW50UGF0aCk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZUJpbmFyeShub3JtYWxpemVkUGF0aCwgZGF0YSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBHZW5lcmF0ZSBtYXJrZG93biBpbWFnZSBsaW5rIGZvciBhIGZpbGVcclxuXHQgKiBFbnN1cmVzIHRoZSBsaW5rIGluY2x1ZGVzICchJyBmb3IgaW1hZ2VzXHJcblx0ICogQHBhcmFtIGRpc3BsYXlUZXh0IE9wdGlvbmFsIGRpc3BsYXkgdGV4dCB0byBhZGQgYWZ0ZXIgdGhlIGxpbmsgKGUuZy4sICFbW2ltYWdlLmpwZ3xkaXNwbGF5IHRleHRdXSlcclxuXHQgKiBAcGFyYW0gaW5zZXJ0U2l6ZSBPcHRpb25hbCBzaXplIHRvIGFkZCAoZS5nLiwgXCIyMDBcIiBvciBcIjIwMHgxMDBcIilcclxuXHQgKi9cclxuXHRnZW5lcmF0ZU1hcmtkb3duTGluayhmaWxlOiBURmlsZSwgc291cmNlUGF0aDogc3RyaW5nLCBkaXNwbGF5VGV4dD86IHN0cmluZywgaW5zZXJ0U2l6ZT86IHN0cmluZyk6IHN0cmluZyB7XHJcblx0XHRjb25zdCBsaW5rID0gdGhpcy5hcHAuZmlsZU1hbmFnZXIuZ2VuZXJhdGVNYXJrZG93bkxpbmsoZmlsZSwgc291cmNlUGF0aCk7XHJcblx0XHQvLyBPYnNpZGlhbidzIGdlbmVyYXRlTWFya2Rvd25MaW5rIHNob3VsZCBpbmNsdWRlICchJyBmb3IgaW1hZ2VzLCBidXQgZW5zdXJlIGl0IGRvZXNcclxuXHRcdGxldCBpbWFnZUxpbmsgPSBsaW5rO1xyXG5cdFx0aWYgKHRoaXMuaXNJbWFnZUZpbGUoZmlsZSkgJiYgIWxpbmsuc3RhcnRzV2l0aCgnIScpKSB7XHJcblx0XHRcdC8vIElmIGl0J3MgYW4gaW1hZ2UgYnV0IGRvZXNuJ3Qgc3RhcnQgd2l0aCAnIScsIGFkZCBpdFxyXG5cdFx0XHRpbWFnZUxpbmsgPSBgISR7bGlua31gO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIERlYnVnIGxvZ2dpbmdcclxuXHRcdGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkge1xyXG5cdFx0XHRjb25zb2xlLmRlYnVnKCdbSW1hZ2UgTWFuYWdlcl0gZ2VuZXJhdGVNYXJrZG93bkxpbmsnLCB7XHJcblx0XHRcdFx0b3JpZ2luYWxMaW5rOiBsaW5rLFxyXG5cdFx0XHRcdGltYWdlTGluayxcclxuXHRcdFx0XHRpbnNlcnRTaXplLFxyXG5cdFx0XHRcdGRpc3BsYXlUZXh0LFxyXG5cdFx0XHRcdGhhc1NpemU6ICEhKGluc2VydFNpemUgJiYgaW5zZXJ0U2l6ZS50cmltKCkpXHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEhhbmRsZSBzaXplIGFuZCBkaXNwbGF5IHRleHRcclxuXHRcdC8vIEZvciB3aWtpbGlua3M6ICFbW3BhdGhdXSAtPiAhW1twYXRofHNpemVdXSBvciAhW1twYXRofHNpemV8ZGlzcGxheVRleHRdXVxyXG5cdFx0Ly8gRm9yIG1hcmtkb3duOiAhW2FsdF0ocGF0aCkgLT4gIVthbHR8c2l6ZV0ocGF0aCkgb3IgIVtkaXNwbGF5VGV4dHxzaXplXShwYXRoKVxyXG5cdFx0aWYgKGltYWdlTGluay5zdGFydHNXaXRoKCchWycpICYmIGltYWdlTGluay5pbmNsdWRlcygnXSgnKSkge1xyXG5cdFx0XHQvLyBNYXJrZG93biBsaW5rOiAhW2FsdF0ocGF0aClcclxuXHRcdFx0aWYgKGluc2VydFNpemUgJiYgaW5zZXJ0U2l6ZS50cmltKCkpIHtcclxuXHRcdFx0XHQvLyBBZGQgc2l6ZTogIVthbHR8c2l6ZV0ocGF0aClcclxuXHRcdFx0XHRjb25zdCBzaXplUGFydCA9IGB8JHtpbnNlcnRTaXplfWA7XHJcblx0XHRcdFx0aWYgKGRpc3BsYXlUZXh0ICYmIGRpc3BsYXlUZXh0LnRyaW0oKSkge1xyXG5cdFx0XHRcdFx0Ly8gQm90aCBzaXplIGFuZCBkaXNwbGF5IHRleHQ6ICFbZGlzcGxheVRleHR8c2l6ZV0ocGF0aClcclxuXHRcdFx0XHRcdGltYWdlTGluayA9IGltYWdlTGluay5yZXBsYWNlKC9eIVxcWyhbXlxcXV0qKVxcXS8sIGAhWyR7ZGlzcGxheVRleHR9JHtzaXplUGFydH1dYCk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdC8vIEp1c3Qgc2l6ZTogIVthbHR8c2l6ZV0ocGF0aClcclxuXHRcdFx0XHRcdC8vIEhhbmRsZSBlbXB0eSBhbHQgdGV4dCBjYXNlOiAhW10gLT4gIVt8c2l6ZV1cclxuXHRcdFx0XHRcdGNvbnN0IGFsdE1hdGNoID0gaW1hZ2VMaW5rLm1hdGNoKC9eIVxcWyhbXlxcXV0qKVxcXS8pO1xyXG5cdFx0XHRcdFx0aWYgKGFsdE1hdGNoKSB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IGFsdCA9IGFsdE1hdGNoWzFdIHx8ICcnO1xyXG5cdFx0XHRcdFx0XHRpbWFnZUxpbmsgPSBpbWFnZUxpbmsucmVwbGFjZSgvXiFcXFsoW15cXF1dKilcXF0vLCBgIVske2FsdH0ke3NpemVQYXJ0fV1gKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSBpZiAoZGlzcGxheVRleHQgJiYgZGlzcGxheVRleHQudHJpbSgpKSB7XHJcblx0XHRcdFx0Ly8gSnVzdCBkaXNwbGF5IHRleHQ6ICFbZGlzcGxheVRleHRdKHBhdGgpXHJcblx0XHRcdFx0aW1hZ2VMaW5rID0gaW1hZ2VMaW5rLnJlcGxhY2UoL14hXFxbKFteXFxdXSopXFxdLywgYCFbJHtkaXNwbGF5VGV4dH1dYCk7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSBpZiAoaW1hZ2VMaW5rLnN0YXJ0c1dpdGgoJyFbJykgJiYgaW1hZ2VMaW5rLmluY2x1ZGVzKCddXScpKSB7XHJcblx0XHRcdC8vIFdpa2lsaW5rOiAhW1twYXRoXV1cclxuXHRcdFx0Y29uc3QgcGFydHM6IHN0cmluZ1tdID0gW107XHJcblx0XHRcdGlmIChpbnNlcnRTaXplICYmIGluc2VydFNpemUudHJpbSgpKSB7XHJcblx0XHRcdFx0cGFydHMucHVzaChpbnNlcnRTaXplKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoZGlzcGxheVRleHQgJiYgZGlzcGxheVRleHQudHJpbSgpKSB7XHJcblx0XHRcdFx0cGFydHMucHVzaChkaXNwbGF5VGV4dCk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKHBhcnRzLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0XHQvLyBBZGQgc2l6ZSBhbmQvb3IgZGlzcGxheSB0ZXh0OiAhW1twYXRofHNpemVdXSBvciAhW1twYXRofHNpemV8ZGlzcGxheVRleHRdXVxyXG5cdFx0XHRcdGltYWdlTGluayA9IGltYWdlTGluay5yZXBsYWNlKC9cXF1cXF0kLywgYHwke3BhcnRzLmpvaW4oJ3wnKX1dXWApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gRGVidWcgbG9nZ2luZ1xyXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MuZGVidWdNb2RlKSB7XHJcblx0XHRcdGNvbnNvbGUuZGVidWcoJ1tJbWFnZSBNYW5hZ2VyXSBnZW5lcmF0ZU1hcmtkb3duTGluayByZXN1bHQnLCB7XHJcblx0XHRcdFx0ZmluYWxMaW5rOiBpbWFnZUxpbmtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIGltYWdlTGluaztcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldCByZWxhdGl2ZSBwYXRoIGZyb20gc291cmNlIGZpbGUgdG8gdGFyZ2V0IGZpbGVcclxuXHQgKi9cclxuXHRnZXRSZWxhdGl2ZVBhdGgoZnJvbTogVEZpbGUsIHRvOiBURmlsZSk6IHN0cmluZyB7XHJcblx0XHRjb25zdCBmcm9tRGlyID0gZnJvbS5wYXJlbnQ/LnBhdGggPz8gJyc7XHJcblx0XHRjb25zdCB0b1BhdGggPSB0by5wYXRoO1xyXG5cclxuXHRcdGlmICghZnJvbURpcikge1xyXG5cdFx0XHRyZXR1cm4gdG9QYXRoO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFNpbXBsZSByZWxhdGl2ZSBwYXRoIGNhbGN1bGF0aW9uXHJcblx0XHQvLyBGb3Igc2FtZSBkaXJlY3RvcnksIGp1c3QgcmV0dXJuIGZpbGUgbmFtZVxyXG5cdFx0Y29uc3QgdG9EaXIgPSB0by5wYXJlbnQ/LnBhdGggPz8gJyc7XHJcblx0XHRpZiAoZnJvbURpciA9PT0gdG9EaXIpIHtcclxuXHRcdFx0cmV0dXJuIHRvLm5hbWU7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gT3RoZXJ3aXNlIHJldHVybiB0aGUgZnVsbCBwYXRoXHJcblx0XHRyZXR1cm4gdG9QYXRoO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogU2FuaXRpemUgYSBmaWxlIG5hbWVcclxuXHQgKi9cclxuXHRzYW5pdGl6ZUZpbGVOYW1lKG5hbWU6IHN0cmluZyk6IHN0cmluZyB7XHJcblx0XHQvLyBSZW1vdmUgb3IgcmVwbGFjZSBpbnZhbGlkIGNoYXJhY3RlcnNcclxuXHRcdHJldHVybiBuYW1lXHJcblx0XHRcdC5yZXBsYWNlKC9bXFxcXC86Kj9cIjw+fF0vZywgJy0nKSAgLy8gUmVwbGFjZSBXaW5kb3dzIGludmFsaWQgY2hhcnNcclxuXHRcdFx0LnJlcGxhY2UoL1xccysvZywgJyAnKSAgICAgICAgICAgIC8vIE5vcm1hbGl6ZSB3aGl0ZXNwYWNlXHJcblx0XHRcdC5yZXBsYWNlKC9eXFwuKy8sICcnKSAgICAgICAgICAgICAvLyBSZW1vdmUgbGVhZGluZyBkb3RzXHJcblx0XHRcdC5yZXBsYWNlKC9cXC4rJC8sICcnKSAgICAgICAgICAgICAvLyBSZW1vdmUgdHJhaWxpbmcgZG90c1xyXG5cdFx0XHQudHJpbSgpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogR2V0IGZpbGUgZXh0ZW5zaW9uIGZyb20gTUlNRSB0eXBlXHJcblx0ICovXHJcblx0Z2V0RXh0ZW5zaW9uRnJvbU1pbWVUeXBlKG1pbWVUeXBlOiBzdHJpbmcpOiBzdHJpbmcge1xyXG5cdFx0Y29uc3QgbWltZVRvRXh0OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xyXG5cdFx0XHQnaW1hZ2UvanBlZyc6ICdqcGcnLFxyXG5cdFx0XHQnaW1hZ2UvanBnJzogJ2pwZycsXHJcblx0XHRcdCdpbWFnZS9wbmcnOiAncG5nJyxcclxuXHRcdFx0J2ltYWdlL2dpZic6ICdnaWYnLFxyXG5cdFx0XHQnaW1hZ2Uvd2VicCc6ICd3ZWJwJyxcclxuXHRcdFx0J2ltYWdlL3N2Zyt4bWwnOiAnc3ZnJyxcclxuXHRcdFx0J2ltYWdlL2JtcCc6ICdibXAnLFxyXG5cdFx0XHQnaW1hZ2UvdGlmZic6ICd0aWZmJyxcclxuXHRcdFx0J2ltYWdlL2F2aWYnOiAnYXZpZicsXHJcblx0XHR9O1xyXG5cclxuXHRcdHJldHVybiBtaW1lVG9FeHRbbWltZVR5cGVdID8/ICdwbmcnO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2hlY2sgaWYgYSBmaWxlIGlzIGFuIGltYWdlIGJhc2VkIG9uIGV4dGVuc2lvblxyXG5cdCAqL1xyXG5cdGlzSW1hZ2VGaWxlKGZpbGU6IFRGaWxlKTogYm9vbGVhbiB7XHJcblx0XHRjb25zdCBpbWFnZUV4dGVuc2lvbnMgPSBbJ2pwZycsICdqcGVnJywgJ3BuZycsICdnaWYnLCAnd2VicCcsICdzdmcnLCAnYm1wJywgJ3RpZmYnLCAnYXZpZiddO1xyXG5cdFx0cmV0dXJuIGltYWdlRXh0ZW5zaW9ucy5pbmNsdWRlcyhmaWxlLmV4dGVuc2lvbi50b0xvd2VyQ2FzZSgpKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENoZWNrIGlmIGEgVVJMIHBvaW50cyB0byBhbiBleHRlcm5hbCBpbWFnZVxyXG5cdCAqL1xyXG5cdGlzRXh0ZXJuYWxJbWFnZVVybCh1cmw6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Y29uc3QgcGFyc2VkID0gbmV3IFVSTCh1cmwpO1xyXG5cdFx0XHRpZiAoIVsnaHR0cDonLCAnaHR0cHM6J10uaW5jbHVkZXMocGFyc2VkLnByb3RvY29sKSkge1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gQ2hlY2sgaWYgVVJMIGVuZHMgd2l0aCBjb21tb24gaW1hZ2UgZXh0ZW5zaW9uc1xyXG5cdFx0XHRjb25zdCBwYXRobmFtZSA9IHBhcnNlZC5wYXRobmFtZS50b0xvd2VyQ2FzZSgpO1xyXG5cdFx0XHRjb25zdCBpbWFnZUV4dGVuc2lvbnMgPSBbJy5qcGcnLCAnLmpwZWcnLCAnLnBuZycsICcuZ2lmJywgJy53ZWJwJywgJy5zdmcnLCAnLmJtcCcsICcudGlmZicsICcuYXZpZiddO1xyXG5cclxuXHRcdFx0Ly8gQWxzbyBjaGVjayBmb3IgaW1hZ2UtcmVsYXRlZCBxdWVyeSBwYXJhbXMgb3IgcGF0aHNcclxuXHRcdFx0aWYgKGltYWdlRXh0ZW5zaW9ucy5zb21lKGV4dCA9PiBwYXRobmFtZS5lbmRzV2l0aChleHQpKSkge1xyXG5cdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBDb21tb24gaW1hZ2UgaG9zdGluZyBwYXR0ZXJuc1xyXG5cdFx0XHRjb25zdCBpbWFnZUhvc3RzID0gW1xyXG5cdFx0XHRcdCdpbWFnZXMudW5zcGxhc2guY29tJyxcclxuXHRcdFx0XHQnaW1hZ2VzLnBleGVscy5jb20nLFxyXG5cdFx0XHRcdCdwaXhhYmF5LmNvbScsXHJcblx0XHRcdFx0J2kuaW1ndXIuY29tJyxcclxuXHRcdFx0XHQnY2RuLmRpc2NvcmRhcHAuY29tJyxcclxuXHRcdFx0XTtcclxuXHJcblx0XHRcdHJldHVybiBpbWFnZUhvc3RzLnNvbWUoaG9zdCA9PiBwYXJzZWQuaG9zdG5hbWUuaW5jbHVkZXMoaG9zdCkpO1xyXG5cdFx0fSBjYXRjaCB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuIiwgIi8qKlxyXG4gKiBJbWFnZSBQcm9jZXNzb3IgU2VydmljZVxyXG4gKiBDb3JlIGltYWdlIGhhbmRsaW5nLCBkb3dubG9hZGluZywgYW5kIHByb2Nlc3NpbmdcclxuICovXHJcblxyXG5pbXBvcnQgeyBBcHAsIFRGaWxlLCBOb3RpY2UsIE1hcmtkb3duVmlldywgcmVxdWVzdFVybCB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgSW1hZ2VNYW5hZ2VyU2V0dGluZ3MsIFByb2Nlc3NlZEltYWdlIH0gZnJvbSAnLi4vdHlwZXMnO1xyXG5pbXBvcnQgeyBTdG9yYWdlTWFuYWdlciB9IGZyb20gJy4vU3RvcmFnZU1hbmFnZXInO1xyXG5pbXBvcnQgeyByZW5kZXJUZW1wbGF0ZSwgYnVpbGRUZW1wbGF0ZVZhcmlhYmxlcywgaXNUZW1wbGF0ZU1lYW5pbmdmdWwgfSBmcm9tICcuLi91dGlscy90ZW1wbGF0ZSc7XHJcbmltcG9ydCB7IG9wZW5SZW5hbWVNb2RhbCB9IGZyb20gJy4uL21vZGFscy9SZW5hbWVNb2RhbCc7XHJcbmltcG9ydCB7IG9wZW5EZXNjcmlwdGl2ZUltYWdlTW9kYWwgfSBmcm9tICcuLi9tb2RhbHMvRGVzY3JpcHRpdmVJbWFnZU1vZGFsJztcclxuXHJcbmV4cG9ydCBjbGFzcyBJbWFnZVByb2Nlc3NvciB7XHJcblx0cHJpdmF0ZSBhcHA6IEFwcDtcclxuXHRwcml2YXRlIHNldHRpbmdzOiBJbWFnZU1hbmFnZXJTZXR0aW5ncztcclxuXHRwcml2YXRlIHN0b3JhZ2VNYW5hZ2VyOiBTdG9yYWdlTWFuYWdlcjtcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHNldHRpbmdzOiBJbWFnZU1hbmFnZXJTZXR0aW5ncywgc3RvcmFnZU1hbmFnZXI6IFN0b3JhZ2VNYW5hZ2VyLCBvYnNlcnZhYmxlPzogeyBzdWJzY3JpYmUoZm46IChzZXR0aW5nczogSW1hZ2VNYW5hZ2VyU2V0dGluZ3MpID0+IHZvaWQpOiB2b2lkIH0pIHtcclxuXHRcdHRoaXMuYXBwID0gYXBwO1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xyXG5cdFx0dGhpcy5zdG9yYWdlTWFuYWdlciA9IHN0b3JhZ2VNYW5hZ2VyO1xyXG5cclxuXHRcdC8vIFN1YnNjcmliZSB0byBzZXR0aW5ncyB1cGRhdGVzIGlmIG9ic2VydmFibGUgaXMgcHJvdmlkZWRcclxuXHRcdG9ic2VydmFibGU/LnN1YnNjcmliZSgobmV3U2V0dGluZ3MpID0+IHtcclxuXHRcdFx0dGhpcy51cGRhdGVTZXR0aW5ncyhuZXdTZXR0aW5ncyk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFVwZGF0ZSBzZXR0aW5ncyByZWZlcmVuY2VcclxuXHQgKi9cclxuXHR1cGRhdGVTZXR0aW5ncyhzZXR0aW5nczogSW1hZ2VNYW5hZ2VyU2V0dGluZ3MpOiB2b2lkIHtcclxuXHRcdHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuXHRcdHRoaXMuc3RvcmFnZU1hbmFnZXIudXBkYXRlU2V0dGluZ3Moc2V0dGluZ3MpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogUHJvY2VzcyBhIHBhc3RlZC9kcm9wcGVkIGltYWdlIGZpbGVcclxuXHQgKiBUaGlzIGlzIGNhbGxlZCBmcm9tIG91ciBldmVudCBoYW5kbGVycyAodXNlci1pbml0aWF0ZWQgYWN0aW9uKVxyXG5cdCAqIEBwYXJhbSBpc1Byb3BlcnR5SW5zZXJ0aW9uIC0gSWYgdHJ1ZSwgc2tpcCBkZXNjcmlwdGl2ZSBpbWFnZXMgKG9ubHkgYXBwbGllcyB0byBub3RlIGJvZHkpXHJcblx0ICovXHJcblx0YXN5bmMgcHJvY2Vzc0ltYWdlRmlsZShcclxuXHRcdGZpbGU6IEZpbGUsXHJcblx0XHRhY3RpdmVGaWxlOiBURmlsZSxcclxuXHRcdHNob3dSZW5hbWVNb2RhbDogYm9vbGVhbiA9IHRydWUsXHJcblx0XHRpc1Byb3BlcnR5SW5zZXJ0aW9uOiBib29sZWFuID0gZmFsc2VcclxuXHQpOiBQcm9taXNlPFByb2Nlc3NlZEltYWdlPiB7XHJcblx0XHR0cnkge1xyXG5cdFx0XHQvLyBSZWFkIGZpbGUgZGF0YVxyXG5cdFx0XHRjb25zdCBhcnJheUJ1ZmZlciA9IGF3YWl0IGZpbGUuYXJyYXlCdWZmZXIoKTtcclxuXHRcdFx0Y29uc3QgZXh0ZW5zaW9uID0gdGhpcy5nZXRFeHRlbnNpb24oZmlsZSk7XHJcblxyXG5cdFx0XHQvLyBHZW5lcmF0ZSBzdWdnZXN0ZWQgbmFtZSBmcm9tIHRlbXBsYXRlIChubyBzdWZmaXggZm9yIGxvY2FsIGZpbGVzKVxyXG5cdFx0XHRjb25zdCBzdWdnZXN0ZWROYW1lID0gdGhpcy5nZW5lcmF0ZU5hbWVXaXRoU3VmZml4KGFjdGl2ZUZpbGUpO1xyXG5cclxuXHRcdFx0Ly8gR2V0IHRoZSBuYW1lIHRvIHVzZVxyXG5cdFx0XHRsZXQgZmluYWxOYW1lID0gc3VnZ2VzdGVkTmFtZTtcclxuXHJcblx0XHRcdGlmIChzaG93UmVuYW1lTW9kYWwgJiYgIXRoaXMuc2V0dGluZ3MuYXV0b1JlbmFtZSkge1xyXG5cdFx0XHRcdC8vIENyZWF0ZSBhIHRlbXBvcmFyeSBmaWxlIHRvIHNob3cgaW4gbW9kYWxcclxuXHRcdFx0XHRjb25zdCB0ZW1wUGF0aCA9IGF3YWl0IHRoaXMuc3RvcmFnZU1hbmFnZXIuZ2V0QXZhaWxhYmxlUGF0aChcclxuXHRcdFx0XHRcdGB0ZW1wLSR7RGF0ZS5ub3coKX1gLFxyXG5cdFx0XHRcdFx0ZXh0ZW5zaW9uLFxyXG5cdFx0XHRcdFx0YWN0aXZlRmlsZVxyXG5cdFx0XHRcdCk7XHJcblx0XHRcdFx0Y29uc3QgdGVtcEZpbGUgPSBhd2FpdCB0aGlzLnN0b3JhZ2VNYW5hZ2VyLnNhdmVGaWxlKGFycmF5QnVmZmVyLCB0ZW1wUGF0aCk7XHJcblxyXG5cdFx0XHRcdGxldCBmaW5hbE5hbWU6IHN0cmluZztcclxuXHRcdFx0XHRsZXQgZGlzcGxheVRleHQ6IHN0cmluZyB8IHVuZGVmaW5lZDtcclxuXHJcblx0XHRcdFx0Ly8gU2hvdyBkZXNjcmlwdGl2ZSBpbWFnZSBtb2RhbCBpZiBlbmFibGVkLCBvdGhlcndpc2Ugc2hvdyByZW5hbWUgbW9kYWxcclxuXHRcdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5lbmFibGVEZXNjcmlwdGl2ZUltYWdlcykge1xyXG5cdFx0XHRcdFx0Y29uc3QgZGVzY1Jlc3VsdCA9IGF3YWl0IG9wZW5EZXNjcmlwdGl2ZUltYWdlTW9kYWwodGhpcy5hcHAsIHRlbXBGaWxlLCBzdWdnZXN0ZWROYW1lKTtcclxuXHJcblx0XHRcdFx0XHRpZiAoZGVzY1Jlc3VsdC5jYW5jZWxsZWQpIHtcclxuXHRcdFx0XHRcdFx0Ly8gVXNlciBjYW5jZWxsZWQgLSBkZWxldGUgdGVtcCBmaWxlIGFuZCByZXR1cm5cclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5hcHAuZmlsZU1hbmFnZXIudHJhc2hGaWxlKHRlbXBGaWxlKTtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHRcdFx0XHRmaWxlOiBudWxsLFxyXG5cdFx0XHRcdFx0XHRcdHBhdGg6ICcnLFxyXG5cdFx0XHRcdFx0XHRcdGxpbmtUZXh0OiAnJyxcclxuXHRcdFx0XHRcdFx0XHRzdWNjZXNzOiBmYWxzZSxcclxuXHRcdFx0XHRcdFx0XHRlcnJvcjogJ0NhbmNlbGxlZCBieSB1c2VyJyxcclxuXHRcdFx0XHRcdFx0fTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRmaW5hbE5hbWUgPSBkZXNjUmVzdWx0LmZpbGVOYW1lO1xyXG5cdFx0XHRcdFx0ZGlzcGxheVRleHQgPSBkZXNjUmVzdWx0LmRlc2NyaXB0aW9uO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHQvLyBTaG93IHJlbmFtZSBtb2RhbFxyXG5cdFx0XHRcdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgb3BlblJlbmFtZU1vZGFsKHRoaXMuYXBwLCB0ZW1wRmlsZSwgc3VnZ2VzdGVkTmFtZSk7XHJcblxyXG5cdFx0XHRcdFx0aWYgKHJlc3VsdC5jYW5jZWxsZWQpIHtcclxuXHRcdFx0XHRcdFx0Ly8gVXNlciBjYW5jZWxsZWQgLSBkZWxldGUgdGVtcCBmaWxlIGFuZCByZXR1cm5cclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5hcHAuZmlsZU1hbmFnZXIudHJhc2hGaWxlKHRlbXBGaWxlKTtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHRcdFx0XHRmaWxlOiBudWxsLFxyXG5cdFx0XHRcdFx0XHRcdHBhdGg6ICcnLFxyXG5cdFx0XHRcdFx0XHRcdGxpbmtUZXh0OiAnJyxcclxuXHRcdFx0XHRcdFx0XHRzdWNjZXNzOiBmYWxzZSxcclxuXHRcdFx0XHRcdFx0XHRlcnJvcjogJ0NhbmNlbGxlZCBieSB1c2VyJyxcclxuXHRcdFx0XHRcdFx0fTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRmaW5hbE5hbWUgPSByZXN1bHQubmV3TmFtZTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIFJlbmFtZSB0aGUgdGVtcCBmaWxlIHRvIHRoZSBmaW5hbCBuYW1lXHJcblx0XHRcdFx0Y29uc3QgZmluYWxQYXRoID0gYXdhaXQgdGhpcy5nZXREZWR1cGxpY2F0ZWRQYXRoKGZpbmFsTmFtZSwgZXh0ZW5zaW9uLCBhY3RpdmVGaWxlKTtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLmFwcC5maWxlTWFuYWdlci5yZW5hbWVGaWxlKHRlbXBGaWxlLCBmaW5hbFBhdGgpO1xyXG5cclxuXHRcdFx0XHRjb25zdCBhYnN0cmFjdEZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmluYWxQYXRoKTtcclxuXHRcdFx0XHRpZiAoIShhYnN0cmFjdEZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHtcclxuXHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcignUmVuYW1lZCBmaWxlIG5vdCBmb3VuZCcpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRjb25zdCByZW5hbWVkRmlsZSA9IGFic3RyYWN0RmlsZTtcclxuXHRcdFx0XHRjb25zdCBsaW5rVGV4dCA9IHRoaXMuc3RvcmFnZU1hbmFnZXIuZ2VuZXJhdGVNYXJrZG93bkxpbmsoXHJcblx0XHRcdFx0XHRyZW5hbWVkRmlsZSxcclxuXHRcdFx0XHRcdGFjdGl2ZUZpbGUucGF0aCxcclxuXHRcdFx0XHRcdGRpc3BsYXlUZXh0LFxyXG5cdFx0XHRcdFx0dGhpcy5zZXR0aW5ncy5pbnNlcnRTaXplXHJcblx0XHRcdFx0KTtcclxuXHJcblx0XHRcdFx0aWYgKCF0aGlzLnNldHRpbmdzLmRpc2FibGVSZW5hbWVOb3RpY2UpIHtcclxuXHRcdFx0XHRcdG5ldyBOb3RpY2UoYEltYWdlIHNhdmVkIGFzOiAke3JlbmFtZWRGaWxlLm5hbWV9YCk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRyZXR1cm4ge1xyXG5cdFx0XHRcdFx0ZmlsZTogcmVuYW1lZEZpbGUsXHJcblx0XHRcdFx0XHRwYXRoOiBmaW5hbFBhdGgsXHJcblx0XHRcdFx0XHRsaW5rVGV4dCxcclxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBkaXNwbGF5VGV4dCxcclxuXHRcdFx0XHRcdHN1Y2Nlc3M6IHRydWUsXHJcblx0XHRcdFx0fTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyBBdXRvLXJlbmFtZSB3aXRob3V0IG1vZGFsXHJcblx0XHRcdFx0Y29uc3QgZmluYWxQYXRoID0gYXdhaXQgdGhpcy5nZXREZWR1cGxpY2F0ZWRQYXRoKGZpbmFsTmFtZSwgZXh0ZW5zaW9uLCBhY3RpdmVGaWxlKTtcclxuXHRcdFx0XHRjb25zdCBzYXZlZEZpbGUgPSBhd2FpdCB0aGlzLnN0b3JhZ2VNYW5hZ2VyLnNhdmVGaWxlKGFycmF5QnVmZmVyLCBmaW5hbFBhdGgpO1xyXG5cdFx0XHRcdGNvbnN0IGxpbmtUZXh0ID0gdGhpcy5zdG9yYWdlTWFuYWdlci5nZW5lcmF0ZU1hcmtkb3duTGluayhcclxuXHRcdFx0XHRcdHNhdmVkRmlsZSxcclxuXHRcdFx0XHRcdGFjdGl2ZUZpbGUucGF0aCxcclxuXHRcdFx0XHRcdHVuZGVmaW5lZCxcclxuXHRcdFx0XHRcdHRoaXMuc2V0dGluZ3MuaW5zZXJ0U2l6ZVxyXG5cdFx0XHRcdCk7XHJcblxyXG5cdFx0XHRcdGlmICghdGhpcy5zZXR0aW5ncy5kaXNhYmxlUmVuYW1lTm90aWNlKSB7XHJcblx0XHRcdFx0XHRuZXcgTm90aWNlKGBJbWFnZSBzYXZlZCBhczogJHtzYXZlZEZpbGUubmFtZX1gKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0XHRmaWxlOiBzYXZlZEZpbGUsXHJcblx0XHRcdFx0XHRwYXRoOiBmaW5hbFBhdGgsXHJcblx0XHRcdFx0XHRsaW5rVGV4dCxcclxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiB1bmRlZmluZWQsXHJcblx0XHRcdFx0XHRzdWNjZXNzOiB0cnVlLFxyXG5cdFx0XHRcdH07XHJcblx0XHRcdH1cclxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHByb2Nlc3NpbmcgaW1hZ2U6JywgZXJyb3IpO1xyXG5cdFx0XHRyZXR1cm4ge1xyXG5cdFx0XHRcdGZpbGU6IG51bGwsXHJcblx0XHRcdFx0cGF0aDogJycsXHJcblx0XHRcdFx0bGlua1RleHQ6ICcnLFxyXG5cdFx0XHRcdHN1Y2Nlc3M6IGZhbHNlLFxyXG5cdFx0XHRcdGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXHJcblx0XHRcdH07XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBQcm9jZXNzIGFuIGltYWdlIGZyb20gYSBVUkwgKGRvd25sb2FkIGFuZCBzYXZlIGxvY2FsbHkpXHJcblx0ICogQHBhcmFtIGlzUHJvcGVydHlJbnNlcnRpb24gLSBJZiB0cnVlLCBza2lwIGRlc2NyaXB0aXZlIGltYWdlcyAob25seSBhcHBsaWVzIHRvIG5vdGUgYm9keSlcclxuXHQgKiBAcGFyYW0gc3VnZ2VzdGVkTmFtZU92ZXJyaWRlIC0gT3B0aW9uYWwgb3ZlcnJpZGUgZm9yIHN1Z2dlc3RlZCBuYW1lIChlLmcuLCBmcm9tIHNlYXJjaCB0ZXJtKVxyXG5cdCAqL1xyXG5cdGFzeW5jIHByb2Nlc3NJbWFnZVVybChcclxuXHRcdHVybDogc3RyaW5nLFxyXG5cdFx0YWN0aXZlRmlsZTogVEZpbGUsXHJcblx0XHRzaG93UmVuYW1lTW9kYWw6IGJvb2xlYW4gPSB0cnVlLFxyXG5cdFx0aXNQcm9wZXJ0eUluc2VydGlvbjogYm9vbGVhbiA9IGZhbHNlLFxyXG5cdFx0c3VnZ2VzdGVkTmFtZU92ZXJyaWRlPzogc3RyaW5nXHJcblx0KTogUHJvbWlzZTxQcm9jZXNzZWRJbWFnZT4ge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Ly8gRG93bmxvYWQgdGhlIGltYWdlXHJcblx0XHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdFVybCh7IHVybCB9KTtcclxuXHRcdFx0aWYgKHJlc3BvbnNlLnN0YXR1cyA+PSA0MDApIHtcclxuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBkb3dubG9hZCBpbWFnZTogJHtyZXNwb25zZS5zdGF0dXN9YCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGNvbnN0IGFycmF5QnVmZmVyID0gcmVzcG9uc2UuYXJyYXlCdWZmZXI7XHJcblx0XHRcdGNvbnN0IGNvbnRlbnRUeXBlID0gcmVzcG9uc2UuaGVhZGVyc1snY29udGVudC10eXBlJ10gPz8gJ2ltYWdlL3BuZyc7XHJcblx0XHRcdGNvbnN0IGV4dGVuc2lvbiA9IHRoaXMuc3RvcmFnZU1hbmFnZXIuZ2V0RXh0ZW5zaW9uRnJvbU1pbWVUeXBlKGNvbnRlbnRUeXBlKTtcclxuXHJcblx0XHRcdC8vIEdlbmVyYXRlIHN1Z2dlc3RlZCBuYW1lICh1c2Ugb3ZlcnJpZGUgaWYgcHJvdmlkZWQgYXMgc3VmZml4LCBvdGhlcndpc2UgZ2VuZXJhdGUgZnJvbSB0ZW1wbGF0ZSlcclxuXHRcdFx0Y29uc3Qgc3VnZ2VzdGVkTmFtZSA9IHRoaXMuZ2VuZXJhdGVOYW1lV2l0aFN1ZmZpeChhY3RpdmVGaWxlLCBzdWdnZXN0ZWROYW1lT3ZlcnJpZGUpO1xyXG5cclxuXHRcdFx0Ly8gR2V0IGZpbmFsIG5hbWVcclxuXHRcdFx0bGV0IGZpbmFsTmFtZSA9IHN1Z2dlc3RlZE5hbWU7XHJcblxyXG5cdFx0XHRpZiAoc2hvd1JlbmFtZU1vZGFsICYmICF0aGlzLnNldHRpbmdzLmF1dG9SZW5hbWUpIHtcclxuXHRcdFx0XHQvLyBTYXZlIHRlbXAgZmlsZSBmaXJzdFxyXG5cdFx0XHRcdGNvbnN0IHRlbXBQYXRoID0gYXdhaXQgdGhpcy5zdG9yYWdlTWFuYWdlci5nZXRBdmFpbGFibGVQYXRoKFxyXG5cdFx0XHRcdFx0YHRlbXAtJHtEYXRlLm5vdygpfWAsXHJcblx0XHRcdFx0XHRleHRlbnNpb24sXHJcblx0XHRcdFx0XHRhY3RpdmVGaWxlXHJcblx0XHRcdFx0KTtcclxuXHRcdFx0XHRjb25zdCB0ZW1wRmlsZSA9IGF3YWl0IHRoaXMuc3RvcmFnZU1hbmFnZXIuc2F2ZUZpbGUoYXJyYXlCdWZmZXIsIHRlbXBQYXRoKTtcclxuXHJcblx0XHRcdFx0bGV0IGZpbmFsTmFtZTogc3RyaW5nO1xyXG5cdFx0XHRcdGxldCBkaXNwbGF5VGV4dDogc3RyaW5nIHwgdW5kZWZpbmVkO1xyXG5cclxuXHRcdFx0XHQvLyBTaG93IGRlc2NyaXB0aXZlIGltYWdlIG1vZGFsIGlmIGVuYWJsZWRcclxuXHRcdFx0XHQvLyBGb3IgcHJvcGVydHkgaW5zZXJ0aW9ucywgd2Ugb25seSBzaG93IGl0IGlmIGFuIGFsdCB0ZXh0IHByb3BlcnR5IGlzIGNvbmZpZ3VyZWRcclxuXHRcdFx0XHRjb25zdCBzaG91bGRTaG93RGVzY3JpcHRpdmUgPSB0aGlzLnNldHRpbmdzLmVuYWJsZURlc2NyaXB0aXZlSW1hZ2VzICYmICghaXNQcm9wZXJ0eUluc2VydGlvbiB8fCB0aGlzLnNldHRpbmdzLmFsdFRleHRQcm9wZXJ0eSAhPT0gJycpO1xyXG5cclxuXHRcdFx0XHRpZiAoc2hvdWxkU2hvd0Rlc2NyaXB0aXZlKSB7XHJcblx0XHRcdFx0XHRjb25zdCBkZXNjUmVzdWx0ID0gYXdhaXQgb3BlbkRlc2NyaXB0aXZlSW1hZ2VNb2RhbCh0aGlzLmFwcCwgdGVtcEZpbGUsIHN1Z2dlc3RlZE5hbWUpO1xyXG5cclxuXHRcdFx0XHRcdGlmIChkZXNjUmVzdWx0LmNhbmNlbGxlZCkge1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwcC5maWxlTWFuYWdlci50cmFzaEZpbGUodGVtcEZpbGUpO1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4ge1xyXG5cdFx0XHRcdFx0XHRcdGZpbGU6IG51bGwsXHJcblx0XHRcdFx0XHRcdFx0cGF0aDogJycsXHJcblx0XHRcdFx0XHRcdFx0bGlua1RleHQ6ICcnLFxyXG5cdFx0XHRcdFx0XHRcdHN1Y2Nlc3M6IGZhbHNlLFxyXG5cdFx0XHRcdFx0XHRcdGVycm9yOiAnQ2FuY2VsbGVkIGJ5IHVzZXInLFxyXG5cdFx0XHRcdFx0XHR9O1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdGZpbmFsTmFtZSA9IGRlc2NSZXN1bHQuZmlsZU5hbWU7XHJcblx0XHRcdFx0XHRkaXNwbGF5VGV4dCA9IGRlc2NSZXN1bHQuZGVzY3JpcHRpb247XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdC8vIFNob3cgcmVuYW1lIG1vZGFsXHJcblx0XHRcdFx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCBvcGVuUmVuYW1lTW9kYWwodGhpcy5hcHAsIHRlbXBGaWxlLCBzdWdnZXN0ZWROYW1lKTtcclxuXHJcblx0XHRcdFx0XHRpZiAocmVzdWx0LmNhbmNlbGxlZCkge1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwcC5maWxlTWFuYWdlci50cmFzaEZpbGUodGVtcEZpbGUpO1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4ge1xyXG5cdFx0XHRcdFx0XHRcdGZpbGU6IG51bGwsXHJcblx0XHRcdFx0XHRcdFx0cGF0aDogJycsXHJcblx0XHRcdFx0XHRcdFx0bGlua1RleHQ6ICcnLFxyXG5cdFx0XHRcdFx0XHRcdHN1Y2Nlc3M6IGZhbHNlLFxyXG5cdFx0XHRcdFx0XHRcdGVycm9yOiAnQ2FuY2VsbGVkIGJ5IHVzZXInLFxyXG5cdFx0XHRcdFx0XHR9O1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdGZpbmFsTmFtZSA9IHJlc3VsdC5uZXdOYW1lO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Y29uc3QgZmluYWxQYXRoID0gYXdhaXQgdGhpcy5nZXREZWR1cGxpY2F0ZWRQYXRoKGZpbmFsTmFtZSwgZXh0ZW5zaW9uLCBhY3RpdmVGaWxlKTtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLmFwcC5maWxlTWFuYWdlci5yZW5hbWVGaWxlKHRlbXBGaWxlLCBmaW5hbFBhdGgpO1xyXG5cclxuXHRcdFx0XHRjb25zdCBhYnN0cmFjdEZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmluYWxQYXRoKTtcclxuXHRcdFx0XHRpZiAoIShhYnN0cmFjdEZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHtcclxuXHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcignUmVuYW1lZCBmaWxlIG5vdCBmb3VuZCcpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRjb25zdCByZW5hbWVkRmlsZSA9IGFic3RyYWN0RmlsZTtcclxuXHRcdFx0XHRjb25zdCBsaW5rVGV4dCA9IHRoaXMuc3RvcmFnZU1hbmFnZXIuZ2VuZXJhdGVNYXJrZG93bkxpbmsoXHJcblx0XHRcdFx0XHRyZW5hbWVkRmlsZSxcclxuXHRcdFx0XHRcdGFjdGl2ZUZpbGUucGF0aCxcclxuXHRcdFx0XHRcdGRpc3BsYXlUZXh0LFxyXG5cdFx0XHRcdFx0dGhpcy5zZXR0aW5ncy5pbnNlcnRTaXplXHJcblx0XHRcdFx0KTtcclxuXHJcblx0XHRcdFx0aWYgKCF0aGlzLnNldHRpbmdzLmRpc2FibGVSZW5hbWVOb3RpY2UpIHtcclxuXHRcdFx0XHRcdG5ldyBOb3RpY2UoYEltYWdlIGRvd25sb2FkZWQgYW5kIHNhdmVkIGFzOiAke3JlbmFtZWRGaWxlLm5hbWV9YCk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRyZXR1cm4ge1xyXG5cdFx0XHRcdFx0ZmlsZTogcmVuYW1lZEZpbGUsXHJcblx0XHRcdFx0XHRwYXRoOiBmaW5hbFBhdGgsXHJcblx0XHRcdFx0XHRsaW5rVGV4dCxcclxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBkaXNwbGF5VGV4dCxcclxuXHRcdFx0XHRcdHN1Y2Nlc3M6IHRydWUsXHJcblx0XHRcdFx0fTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRjb25zdCBmaW5hbFBhdGggPSBhd2FpdCB0aGlzLmdldERlZHVwbGljYXRlZFBhdGgoZmluYWxOYW1lLCBleHRlbnNpb24sIGFjdGl2ZUZpbGUpO1xyXG5cdFx0XHRcdGNvbnN0IHNhdmVkRmlsZSA9IGF3YWl0IHRoaXMuc3RvcmFnZU1hbmFnZXIuc2F2ZUZpbGUoYXJyYXlCdWZmZXIsIGZpbmFsUGF0aCk7XHJcblx0XHRcdFx0Y29uc3QgbGlua1RleHQgPSB0aGlzLnN0b3JhZ2VNYW5hZ2VyLmdlbmVyYXRlTWFya2Rvd25MaW5rKFxyXG5cdFx0XHRcdFx0c2F2ZWRGaWxlLFxyXG5cdFx0XHRcdFx0YWN0aXZlRmlsZS5wYXRoLFxyXG5cdFx0XHRcdFx0dW5kZWZpbmVkLFxyXG5cdFx0XHRcdFx0dGhpcy5zZXR0aW5ncy5pbnNlcnRTaXplXHJcblx0XHRcdFx0KTtcclxuXHJcblx0XHRcdFx0aWYgKCF0aGlzLnNldHRpbmdzLmRpc2FibGVSZW5hbWVOb3RpY2UpIHtcclxuXHRcdFx0XHRcdG5ldyBOb3RpY2UoYEltYWdlIGRvd25sb2FkZWQgYW5kIHNhdmVkIGFzOiAke3NhdmVkRmlsZS5uYW1lfWApO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHRcdGZpbGU6IHNhdmVkRmlsZSxcclxuXHRcdFx0XHRcdHBhdGg6IGZpbmFsUGF0aCxcclxuXHRcdFx0XHRcdGxpbmtUZXh0LFxyXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246IGlzUHJvcGVydHlJbnNlcnRpb24gPyBzdWdnZXN0ZWROYW1lT3ZlcnJpZGUgOiB1bmRlZmluZWQsXHJcblx0XHRcdFx0XHRzdWNjZXNzOiB0cnVlLFxyXG5cdFx0XHRcdH07XHJcblx0XHRcdH1cclxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHByb2Nlc3NpbmcgaW1hZ2UgVVJMOicsIGVycm9yKTtcclxuXHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHRmaWxlOiBudWxsLFxyXG5cdFx0XHRcdHBhdGg6ICcnLFxyXG5cdFx0XHRcdGxpbmtUZXh0OiAnJyxcclxuXHRcdFx0XHRzdWNjZXNzOiBmYWxzZSxcclxuXHRcdFx0XHRlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLFxyXG5cdFx0XHR9O1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogR2VuZXJhdGUgYSBzdWdnZXN0ZWQgbmFtZSBiYXNlZCBvbiB0aGUgdGVtcGxhdGUgYW5kIG9wdGlvbmFsIHN1ZmZpeFxyXG5cdCAqL1xyXG5cdGdlbmVyYXRlTmFtZVdpdGhTdWZmaXgoYWN0aXZlRmlsZTogVEZpbGUsIHN1ZmZpeD86IHN0cmluZyk6IHN0cmluZyB7XHJcblx0XHRjb25zdCB2YXJpYWJsZXMgPSBidWlsZFRlbXBsYXRlVmFyaWFibGVzKHRoaXMuYXBwLCBhY3RpdmVGaWxlKTtcclxuXHRcdGNvbnN0IHJlbmRlcmVkID0gcmVuZGVyVGVtcGxhdGUodGhpcy5zZXR0aW5ncy5pbWFnZU5hbWVUZW1wbGF0ZSwgdmFyaWFibGVzKTtcclxuXHJcblx0XHRjb25zdCBpc01lYW5pbmdmdWwgPSBpc1RlbXBsYXRlTWVhbmluZ2Z1bChyZW5kZXJlZCwgdGhpcy5zZXR0aW5ncy5kdXBOdW1iZXJEZWxpbWl0ZXIpO1xyXG5cdFx0Y29uc3QgYmFzZSA9IGlzTWVhbmluZ2Z1bCA/IHJlbmRlcmVkIDogJyc7XHJcblxyXG5cdFx0aWYgKGJhc2UgJiYgc3VmZml4KSB7XHJcblx0XHRcdHJldHVybiBgJHtiYXNlfSAtICR7c3VmZml4fWA7XHJcblx0XHR9IGVsc2UgaWYgKGJhc2UpIHtcclxuXHRcdFx0cmV0dXJuIGAke2Jhc2V9IC0gYDtcclxuXHRcdH0gZWxzZSBpZiAoc3VmZml4KSB7XHJcblx0XHRcdHJldHVybiBzdWZmaXg7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuICcnO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogR2VuZXJhdGUgYSBzdWdnZXN0ZWQgbmFtZSBiYXNlZCBvbiB0aGUgdGVtcGxhdGVcclxuXHQgKi9cclxuXHRnZW5lcmF0ZVN1Z2dlc3RlZE5hbWUoYWN0aXZlRmlsZTogVEZpbGUpOiBzdHJpbmcge1xyXG5cdFx0cmV0dXJuIHRoaXMuZ2VuZXJhdGVOYW1lV2l0aFN1ZmZpeChhY3RpdmVGaWxlKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldCBhIGRlZHVwbGljYXRlZCBmaWxlIHBhdGhcclxuXHQgKi9cclxuXHRwcml2YXRlIGFzeW5jIGdldERlZHVwbGljYXRlZFBhdGgoXHJcblx0XHRiYXNlTmFtZTogc3RyaW5nLFxyXG5cdFx0ZXh0ZW5zaW9uOiBzdHJpbmcsXHJcblx0XHRhY3RpdmVGaWxlOiBURmlsZVxyXG5cdCk6IFByb21pc2U8c3RyaW5nPiB7XHJcblx0XHRyZXR1cm4gYXdhaXQgdGhpcy5zdG9yYWdlTWFuYWdlci5nZXRBdmFpbGFibGVQYXRoKGJhc2VOYW1lLCBleHRlbnNpb24sIGFjdGl2ZUZpbGUpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogR2V0IGZpbGUgZXh0ZW5zaW9uIGZyb20gRmlsZSBvYmplY3RcclxuXHQgKi9cclxuXHRwcml2YXRlIGdldEV4dGVuc2lvbihmaWxlOiBGaWxlKTogc3RyaW5nIHtcclxuXHRcdC8vIFRyeSB0byBnZXQgZnJvbSBmaWxlIG5hbWUgZmlyc3RcclxuXHRcdGNvbnN0IG5hbWVQYXJ0cyA9IGZpbGUubmFtZS5zcGxpdCgnLicpO1xyXG5cdFx0aWYgKG5hbWVQYXJ0cy5sZW5ndGggPiAxKSB7XHJcblx0XHRcdGNvbnN0IG5hbWVFeHQgPSBuYW1lUGFydHNbbmFtZVBhcnRzLmxlbmd0aCAtIDFdPy50b0xvd2VyQ2FzZSgpO1xyXG5cdFx0XHRpZiAobmFtZUV4dCkge1xyXG5cdFx0XHRcdHJldHVybiBuYW1lRXh0O1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gRmFsbCBiYWNrIHRvIE1JTUUgdHlwZVxyXG5cdFx0cmV0dXJuIHRoaXMuc3RvcmFnZU1hbmFnZXIuZ2V0RXh0ZW5zaW9uRnJvbU1pbWVUeXBlKGZpbGUudHlwZSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBJbnNlcnQgbGluayB0ZXh0IGF0IGN1cnNvciBwb3NpdGlvblxyXG5cdCAqL1xyXG5cdGluc2VydExpbmtBdEN1cnNvcihsaW5rVGV4dDogc3RyaW5nKTogdm9pZCB7XHJcblx0XHRjb25zdCB2aWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcclxuXHRcdGlmICh2aWV3Py5lZGl0b3IpIHtcclxuXHRcdFx0dmlldy5lZGl0b3IucmVwbGFjZVNlbGVjdGlvbihsaW5rVGV4dCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBHZXQgdGhlIGFjdGl2ZSBtYXJrZG93biBmaWxlXHJcblx0ICovXHJcblx0Z2V0QWN0aXZlRmlsZSgpOiBURmlsZSB8IG51bGwge1xyXG5cdFx0Y29uc3QgdmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XHJcblx0XHRyZXR1cm4gdmlldz8uZmlsZSA/PyBudWxsO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogUmVuYW1lIGFuIGV4aXN0aW5nIGltYWdlIGZpbGUgd2l0aCBvcHRpb25hbCByZW5hbWUgbW9kYWxcclxuXHQgKiBVc2VkIGJ5IExvY2FsQ29udmVyc2lvblNlcnZpY2UgdG8gcmVuYW1lIGNvbnZlcnRlZCBpbWFnZXNcclxuXHQgKi9cclxuXHRhc3luYyByZW5hbWVJbWFnZUZpbGUoXHJcblx0XHRpbWFnZUZpbGU6IFRGaWxlLFxyXG5cdFx0c3VnZ2VzdGVkTmFtZTogc3RyaW5nLFxyXG5cdFx0YWN0aXZlRmlsZTogVEZpbGVcclxuXHQpOiBQcm9taXNlPFByb2Nlc3NlZEltYWdlIHwgbnVsbD4ge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Y29uc3QgZXh0ZW5zaW9uID0gaW1hZ2VGaWxlLmV4dGVuc2lvbjtcclxuXHRcdFx0bGV0IGZpbmFsTmFtZSA9IHN1Z2dlc3RlZE5hbWU7XHJcblx0XHRcdGxldCBkaXNwbGF5VGV4dCA9ICcnO1xyXG5cclxuXHRcdFx0Ly8gSGFuZGxlIGRlc2NyaXB0aXZlIGltYWdlcyBpZiBlbmFibGVkIChub3RlOiB0aGlzIGlzIGZvciByZW5hbWluZyBleGlzdGluZyBmaWxlcywgbm90IHByb3BlcnR5IGluc2VydGlvbilcclxuXHRcdFx0Ly8gSWYgZGVzY3JpcHRpdmUgaW1hZ2VzIGlzIGVuYWJsZWQsIGl0IGhhbmRsZXMgdGhlIG5hbWluZyBhbmQgd2Ugc2tpcCB0aGUgcmVuYW1lIG1vZGFsXHJcblx0XHRcdGlmICh0aGlzLnNldHRpbmdzLmVuYWJsZURlc2NyaXB0aXZlSW1hZ2VzKSB7XHJcblx0XHRcdFx0Y29uc3QgZGVzY1Jlc3VsdCA9IGF3YWl0IG9wZW5EZXNjcmlwdGl2ZUltYWdlTW9kYWwodGhpcy5hcHAsIGltYWdlRmlsZSwgc3VnZ2VzdGVkTmFtZSk7XHJcblx0XHRcdFx0aWYgKGRlc2NSZXN1bHQuY2FuY2VsbGVkKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gbnVsbDsgLy8gVXNlciBjYW5jZWxsZWRcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZGlzcGxheVRleHQgPSBkZXNjUmVzdWx0LmRlc2NyaXB0aW9uO1xyXG5cdFx0XHRcdGZpbmFsTmFtZSA9IGRlc2NSZXN1bHQuZmlsZU5hbWU7IC8vIEFscmVhZHkga2ViYWItY2FzZWRcclxuXHRcdFx0fSBlbHNlIGlmICghdGhpcy5zZXR0aW5ncy5hdXRvUmVuYW1lKSB7XHJcblx0XHRcdFx0Ly8gT25seSBzaG93IHJlbmFtZSBtb2RhbCBpZiBkZXNjcmlwdGl2ZSBpbWFnZXMgaXMgZGlzYWJsZWQgQU5EIGF1dG8tcmVuYW1lIGlzIG9mZlxyXG5cdFx0XHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IG9wZW5SZW5hbWVNb2RhbChcclxuXHRcdFx0XHRcdHRoaXMuYXBwLFxyXG5cdFx0XHRcdFx0aW1hZ2VGaWxlLFxyXG5cdFx0XHRcdFx0ZmluYWxOYW1lXHJcblx0XHRcdFx0KTtcclxuXHRcdFx0XHRpZiAocmVzdWx0LmNhbmNlbGxlZCkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIG51bGw7IC8vIFVzZXIgY2FuY2VsbGVkXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGZpbmFsTmFtZSA9IHJlc3VsdC5uZXdOYW1lO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBSZW5hbWUgdGhlIGZpbGVcclxuXHRcdFx0Y29uc3QgZmluYWxQYXRoID0gYXdhaXQgdGhpcy5nZXREZWR1cGxpY2F0ZWRQYXRoKGZpbmFsTmFtZSwgZXh0ZW5zaW9uLCBhY3RpdmVGaWxlKTtcclxuXHRcdFx0YXdhaXQgdGhpcy5hcHAuZmlsZU1hbmFnZXIucmVuYW1lRmlsZShpbWFnZUZpbGUsIGZpbmFsUGF0aCk7XHJcblxyXG5cdFx0XHRjb25zdCBhYnN0cmFjdEZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmluYWxQYXRoKTtcclxuXHRcdFx0aWYgKCEoYWJzdHJhY3RGaWxlIGluc3RhbmNlb2YgVEZpbGUpKSB7XHJcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCdSZW5hbWVkIGZpbGUgbm90IGZvdW5kJyk7XHJcblx0XHRcdH1cclxuXHRcdFx0Y29uc3QgcmVuYW1lZEZpbGUgPSBhYnN0cmFjdEZpbGU7XHJcblx0XHRcdGNvbnN0IGxpbmtUZXh0ID0gdGhpcy5zdG9yYWdlTWFuYWdlci5nZW5lcmF0ZU1hcmtkb3duTGluayhcclxuXHRcdFx0XHRyZW5hbWVkRmlsZSxcclxuXHRcdFx0XHRhY3RpdmVGaWxlLnBhdGgsXHJcblx0XHRcdFx0ZGlzcGxheVRleHQsXHJcblx0XHRcdFx0dGhpcy5zZXR0aW5ncy5pbnNlcnRTaXplXHJcblx0XHRcdCk7XHJcblxyXG5cdFx0XHRyZXR1cm4ge1xyXG5cdFx0XHRcdGZpbGU6IHJlbmFtZWRGaWxlLFxyXG5cdFx0XHRcdHBhdGg6IGZpbmFsUGF0aCxcclxuXHRcdFx0XHRsaW5rVGV4dCxcclxuXHRcdFx0XHRzdWNjZXNzOiB0cnVlLFxyXG5cdFx0XHR9O1xyXG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcignRXJyb3IgcmVuYW1pbmcgaW1hZ2UgZmlsZTonLCBlcnJvcik7XHJcblx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0ZmlsZTogbnVsbCxcclxuXHRcdFx0XHRwYXRoOiAnJyxcclxuXHRcdFx0XHRsaW5rVGV4dDogJycsXHJcblx0XHRcdFx0c3VjY2VzczogZmFsc2UsXHJcblx0XHRcdFx0ZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcclxuXHRcdFx0fTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIERlYnVnIGxvZ2dpbmdcclxuXHQgKi9cclxuXHRwcml2YXRlIGxvZyguLi5hcmdzOiB1bmtub3duW10pOiB2b2lkIHtcclxuXHRcdGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkge1xyXG5cdFx0XHRjb25zb2xlLmRlYnVnKCdbSW1hZ2UgTWFuYWdlcl0nLCAuLi5hcmdzKTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuIiwgIi8qKlxyXG4gKiBUZW1wbGF0ZSBFbmdpbmUgZm9yIEltYWdlIE5hbWluZ1xyXG4gKiBSZW5kZXJzIG5hbWUgdGVtcGxhdGVzIHdpdGggdmFyaWFibGUgc3Vic3RpdHV0aW9uXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgVEZpbGUsIEFwcCB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgTmFtZVRlbXBsYXRlVmFyaWFibGVzIH0gZnJvbSAnLi4vdHlwZXMnO1xyXG5cclxuLyoqXHJcbiAqIEF2YWlsYWJsZSB0ZW1wbGF0ZSB2YXJpYWJsZXMgYW5kIHRoZWlyIGRlc2NyaXB0aW9uc1xyXG4gKi9cclxuZXhwb3J0IGNvbnN0IFRFTVBMQVRFX1ZBUklBQkxFUyA9IHtcclxuXHQne3tmaWxlTmFtZX19JzogJ05hbWUgb2YgdGhlIGN1cnJlbnQgbm90ZSAod2l0aG91dCBleHRlbnNpb24pJyxcclxuXHQne3tkaXJOYW1lfX0nOiAnTmFtZSBvZiB0aGUgY29udGFpbmluZyBmb2xkZXInLFxyXG5cdCd7e2ltYWdlTmFtZUtleX19JzogJ1ZhbHVlIGZyb20gaW1hZ2VOYW1lS2V5IHByb3BlcnR5JyxcclxuXHQne3tmaXJzdEhlYWRpbmd9fSc6ICdGaXJzdCBIMSBoZWFkaW5nIGluIHRoZSBub3RlJyxcclxuXHQne3tEQVRFOmZvcm1hdH19JzogJ0N1cnJlbnQgZGF0ZSAoZS5nLiwge3tEQVRFOllZWVktTU0tRER9fSknLFxyXG5cdCd7e1RJTUU6Zm9ybWF0fX0nOiAnQ3VycmVudCB0aW1lIChlLmcuLCB7e1RJTUU6SEgtbW0tc3N9fSknLFxyXG59O1xyXG5cclxuLyoqXHJcbiAqIFJlbmRlciBhIHRlbXBsYXRlIHN0cmluZyB3aXRoIHZhcmlhYmxlIHN1YnN0aXR1dGlvblxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlclRlbXBsYXRlKFxyXG5cdHRlbXBsYXRlOiBzdHJpbmcsXHJcblx0dmFyaWFibGVzOiBOYW1lVGVtcGxhdGVWYXJpYWJsZXMsXHJcblx0ZnJvbnRtYXR0ZXI/OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPlxyXG4pOiBzdHJpbmcge1xyXG5cdGxldCByZXN1bHQgPSB0ZW1wbGF0ZTtcclxuXHJcblx0Ly8gQmFzaWMgdmFyaWFibGVzXHJcblx0cmVzdWx0ID0gcmVzdWx0LnJlcGxhY2UoL1xce1xce2ZpbGVOYW1lXFx9XFx9L2csIHZhcmlhYmxlcy5maWxlTmFtZSk7XHJcblx0cmVzdWx0ID0gcmVzdWx0LnJlcGxhY2UoL1xce1xce2Rpck5hbWVcXH1cXH0vZywgdmFyaWFibGVzLmRpck5hbWUpO1xyXG5cdHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKC9cXHtcXHtpbWFnZU5hbWVLZXlcXH1cXH0vZywgdmFyaWFibGVzLmltYWdlTmFtZUtleSA/PyAnJyk7XHJcblx0cmVzdWx0ID0gcmVzdWx0LnJlcGxhY2UoL1xce1xce2ZpcnN0SGVhZGluZ1xcfVxcfS9nLCB2YXJpYWJsZXMuZmlyc3RIZWFkaW5nID8/ICcnKTtcclxuXHJcblx0Ly8gRGF0ZSBmb3JtYXR0aW5nXHJcblx0cmVzdWx0ID0gcmVzdWx0LnJlcGxhY2UoL1xce1xce0RBVEU6KFtefV0rKVxcfVxcfS9nLCAoXywgZm9ybWF0OiBzdHJpbmcpID0+IHtcclxuXHRcdHJldHVybiBmb3JtYXREYXRlKG5ldyBEYXRlKCksIGZvcm1hdCk7XHJcblx0fSk7XHJcblxyXG5cdC8vIFRpbWUgZm9ybWF0dGluZ1xyXG5cdHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKC9cXHtcXHtUSU1FOihbXn1dKylcXH1cXH0vZywgKF8sIGZvcm1hdDogc3RyaW5nKSA9PiB7XHJcblx0XHRyZXR1cm4gZm9ybWF0VGltZShuZXcgRGF0ZSgpLCBmb3JtYXQpO1xyXG5cdH0pO1xyXG5cclxuXHQvLyBGcm9udG1hdHRlciB2YXJpYWJsZXMgKGlmIHByb3ZpZGVkKVxyXG5cdGlmIChmcm9udG1hdHRlcikge1xyXG5cdFx0cmVzdWx0ID0gcmVzdWx0LnJlcGxhY2UoL1xce1xce2ZtOihbXn1dKylcXH1cXH0vZywgKF8sIGtleTogc3RyaW5nKSA9PiB7XHJcblx0XHRcdGNvbnN0IHZhbHVlID0gZnJvbnRtYXR0ZXJba2V5LnRyaW0oKV07XHJcblx0XHRcdGlmICh2YWx1ZSA9PSBudWxsKSByZXR1cm4gJyc7XHJcblx0XHRcdGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSByZXR1cm4gdmFsdWU7XHJcblx0XHRcdGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInIHx8IHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nKSByZXR1cm4gU3RyaW5nKHZhbHVlKTtcclxuXHRcdFx0cmV0dXJuICcnO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG4vKipcclxuICogRm9ybWF0IGEgZGF0ZSB1c2luZyBhIHNpbXBsZSBmb3JtYXQgc3RyaW5nXHJcbiAqIFN1cHBvcnRzOiBZWVlZLCBZWSwgTU0sIERELCBNLCBEXHJcbiAqL1xyXG5mdW5jdGlvbiBmb3JtYXREYXRlKGRhdGU6IERhdGUsIGZvcm1hdDogc3RyaW5nKTogc3RyaW5nIHtcclxuXHRjb25zdCB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xyXG5cdGNvbnN0IG1vbnRoID0gZGF0ZS5nZXRNb250aCgpICsgMTtcclxuXHRjb25zdCBkYXkgPSBkYXRlLmdldERhdGUoKTtcclxuXHJcblx0cmV0dXJuIGZvcm1hdFxyXG5cdFx0LnJlcGxhY2UoJ1lZWVknLCBTdHJpbmcoeWVhcikpXHJcblx0XHQucmVwbGFjZSgnWVknLCBTdHJpbmcoeWVhcikuc2xpY2UoLTIpKVxyXG5cdFx0LnJlcGxhY2UoJ01NJywgU3RyaW5nKG1vbnRoKS5wYWRTdGFydCgyLCAnMCcpKVxyXG5cdFx0LnJlcGxhY2UoJ0REJywgU3RyaW5nKGRheSkucGFkU3RhcnQoMiwgJzAnKSlcclxuXHRcdC5yZXBsYWNlKCdNJywgU3RyaW5nKG1vbnRoKSlcclxuXHRcdC5yZXBsYWNlKCdEJywgU3RyaW5nKGRheSkpO1xyXG59XHJcblxyXG4vKipcclxuICogRm9ybWF0IHRpbWUgdXNpbmcgYSBzaW1wbGUgZm9ybWF0IHN0cmluZ1xyXG4gKiBTdXBwb3J0czogSEgsIG1tLCBzcywgSCwgbSwgc1xyXG4gKi9cclxuZnVuY3Rpb24gZm9ybWF0VGltZShkYXRlOiBEYXRlLCBmb3JtYXQ6IHN0cmluZyk6IHN0cmluZyB7XHJcblx0Y29uc3QgaG91cnMgPSBkYXRlLmdldEhvdXJzKCk7XHJcblx0Y29uc3QgbWludXRlcyA9IGRhdGUuZ2V0TWludXRlcygpO1xyXG5cdGNvbnN0IHNlY29uZHMgPSBkYXRlLmdldFNlY29uZHMoKTtcclxuXHJcblx0cmV0dXJuIGZvcm1hdFxyXG5cdFx0LnJlcGxhY2UoJ0hIJywgU3RyaW5nKGhvdXJzKS5wYWRTdGFydCgyLCAnMCcpKVxyXG5cdFx0LnJlcGxhY2UoJ21tJywgU3RyaW5nKG1pbnV0ZXMpLnBhZFN0YXJ0KDIsICcwJykpXHJcblx0XHQucmVwbGFjZSgnc3MnLCBTdHJpbmcoc2Vjb25kcykucGFkU3RhcnQoMiwgJzAnKSlcclxuXHRcdC5yZXBsYWNlKCdIJywgU3RyaW5nKGhvdXJzKSlcclxuXHRcdC5yZXBsYWNlKCdtJywgU3RyaW5nKG1pbnV0ZXMpKVxyXG5cdFx0LnJlcGxhY2UoJ3MnLCBTdHJpbmcoc2Vjb25kcykpO1xyXG59XHJcblxyXG4vKipcclxuICogQnVpbGQgdGVtcGxhdGUgdmFyaWFibGVzIGZyb20gYSBmaWxlIGFuZCBhcHAgY29udGV4dFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkVGVtcGxhdGVWYXJpYWJsZXMoXHJcblx0YXBwOiBBcHAsXHJcblx0YWN0aXZlRmlsZTogVEZpbGVcclxuKTogTmFtZVRlbXBsYXRlVmFyaWFibGVzIHtcclxuXHRjb25zdCBjYWNoZSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShhY3RpdmVGaWxlKTtcclxuXHRjb25zdCBmcm9udG1hdHRlciA9IGNhY2hlPy5mcm9udG1hdHRlcjtcclxuXHRcclxuXHQvLyBHZXQgZmlyc3QgSDEgaGVhZGluZ1xyXG5cdGxldCBmaXJzdEhlYWRpbmcgPSAnJztcclxuXHRpZiAoY2FjaGU/LmhlYWRpbmdzKSB7XHJcblx0XHRmb3IgKGNvbnN0IGhlYWRpbmcgb2YgY2FjaGUuaGVhZGluZ3MpIHtcclxuXHRcdFx0aWYgKGhlYWRpbmcubGV2ZWwgPT09IDEpIHtcclxuXHRcdFx0XHRmaXJzdEhlYWRpbmcgPSBoZWFkaW5nLmhlYWRpbmc7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHJldHVybiB7XHJcblx0XHRmaWxlTmFtZTogYWN0aXZlRmlsZS5iYXNlbmFtZSxcclxuXHRcdGRpck5hbWU6IGFjdGl2ZUZpbGUucGFyZW50Py5uYW1lID8/ICcnLFxyXG5cdFx0aW1hZ2VOYW1lS2V5OiBmcm9udG1hdHRlcj8uaW1hZ2VOYW1lS2V5IGFzIHN0cmluZyB8IHVuZGVmaW5lZCxcclxuXHRcdGZpcnN0SGVhZGluZyxcclxuXHRcdGRhdGU6IGZvcm1hdERhdGUobmV3IERhdGUoKSwgJ1lZWVktTU0tREQnKSxcclxuXHRcdHRpbWU6IGZvcm1hdFRpbWUobmV3IERhdGUoKSwgJ0hILW1tLXNzJyksXHJcblx0fTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENoZWNrIGlmIGEgcmVuZGVyZWQgdGVtcGxhdGUgcmVzdWx0IGlzIG1lYW5pbmdmdWwgKG5vdCBlbXB0eS93aGl0ZXNwYWNlKVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGlzVGVtcGxhdGVNZWFuaW5nZnVsKHJlc3VsdDogc3RyaW5nLCBkZWxpbWl0ZXI6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG5cdC8vIFJlbW92ZSBkZWxpbWl0ZXJzIGFuZCB3aGl0ZXNwYWNlIHRvIGNoZWNrIGlmIHRoZXJlJ3MgYWN0dWFsIGNvbnRlbnRcclxuXHRjb25zdCBtZWFuaW5nbGVzc1JlZ2V4ID0gbmV3IFJlZ0V4cChgWyR7ZXNjYXBlUmVnRXhwKGRlbGltaXRlcil9XFxcXHNdYCwgJ2dtJyk7XHJcblx0cmV0dXJuIHJlc3VsdC5yZXBsYWNlKG1lYW5pbmdsZXNzUmVnZXgsICcnKSAhPT0gJyc7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBFc2NhcGUgc3BlY2lhbCByZWdleCBjaGFyYWN0ZXJzXHJcbiAqL1xyXG5mdW5jdGlvbiBlc2NhcGVSZWdFeHAoc3RyaW5nOiBzdHJpbmcpOiBzdHJpbmcge1xyXG5cdHJldHVybiBzdHJpbmcucmVwbGFjZSgvWy4qKz9eJHt9KCl8W1xcXVxcXFxdL2csICdcXFxcJCYnKTtcclxufVxyXG4iLCAiLyoqXHJcbiAqIFJlbmFtZSBNb2RhbFxyXG4gKiBEaWFsb2cgZm9yIHJlbmFtaW5nIGltYWdlcyB3aXRoIHByZXZpZXcgYW5kIHRlbXBsYXRlIHN1Z2dlc3Rpb25zXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQXBwLCBNb2RhbCwgU2V0dGluZywgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFJlbmFtZVJlc3VsdCB7XHJcblx0bmV3TmFtZTogc3RyaW5nO1xyXG5cdGNhbmNlbGxlZDogYm9vbGVhbjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFJlbmFtZU1vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG5cdHByaXZhdGUgaW1hZ2VGaWxlOiBURmlsZTtcclxuXHRwcml2YXRlIHN1Z2dlc3RlZE5hbWU6IHN0cmluZztcclxuXHRwcml2YXRlIGN1cnJlbnROYW1lOiBzdHJpbmc7XHJcblx0cHJpdmF0ZSBvblN1Ym1pdDogKHJlc3VsdDogUmVuYW1lUmVzdWx0KSA9PiB2b2lkO1xyXG5cclxuXHRwcml2YXRlIG5hbWVJbnB1dDogSFRNTElucHV0RWxlbWVudCB8IG51bGwgPSBudWxsO1xyXG5cdHByaXZhdGUgcHJldmlld0VsOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xyXG5cdHByaXZhdGUgZXJyb3JFbDogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuXHJcblx0Y29uc3RydWN0b3IoXHJcblx0XHRhcHA6IEFwcCxcclxuXHRcdGltYWdlRmlsZTogVEZpbGUsXHJcblx0XHRzdWdnZXN0ZWROYW1lOiBzdHJpbmcsXHJcblx0XHRvblN1Ym1pdDogKHJlc3VsdDogUmVuYW1lUmVzdWx0KSA9PiB2b2lkXHJcblx0KSB7XHJcblx0XHRzdXBlcihhcHApO1xyXG5cdFx0dGhpcy5pbWFnZUZpbGUgPSBpbWFnZUZpbGU7XHJcblx0XHR0aGlzLnN1Z2dlc3RlZE5hbWUgPSBzdWdnZXN0ZWROYW1lO1xyXG5cdFx0dGhpcy5jdXJyZW50TmFtZSA9IHN1Z2dlc3RlZE5hbWU7XHJcblx0XHR0aGlzLm9uU3VibWl0ID0gb25TdWJtaXQ7XHJcblx0fVxyXG5cclxuXHRvbk9wZW4oKTogdm9pZCB7XHJcblx0XHRjb25zdCB7IGNvbnRlbnRFbCwgdGl0bGVFbCB9ID0gdGhpcztcclxuXHRcdFxyXG5cdFx0dGhpcy5jb250YWluZXJFbC5hZGRDbGFzcygnaW1hZ2UtbWFuYWdlci1yZW5hbWUtbW9kYWwnKTtcclxuXHRcdHRpdGxlRWwuc2V0VGV4dCgnUmVuYW1lIGltYWdlJyk7XHJcblxyXG5cdFx0Ly8gSW1hZ2UgcHJldmlld1xyXG5cdFx0dGhpcy5yZW5kZXJJbWFnZVByZXZpZXcoY29udGVudEVsKTtcclxuXHJcblx0XHQvLyBGaWxlIGluZm9cclxuXHRcdHRoaXMucmVuZGVyRmlsZUluZm8oY29udGVudEVsKTtcclxuXHJcblx0XHQvLyBOYW1lIGlucHV0XHJcblx0XHR0aGlzLnJlbmRlck5hbWVJbnB1dChjb250ZW50RWwpO1xyXG5cclxuXHRcdC8vIEVycm9yIGRpc3BsYXlcclxuXHRcdHRoaXMuZXJyb3JFbCA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdpbWFnZS1tYW5hZ2VyLWVycm9yIGltYWdlLW1hbmFnZXItZXJyb3ItaGlkZGVuJyB9KTtcclxuXHJcblx0XHQvLyBCdXR0b25zXHJcblx0XHR0aGlzLnJlbmRlckJ1dHRvbnMoY29udGVudEVsKTtcclxuXHJcblx0XHQvLyBGb2N1cyBhbmQgc2VsZWN0IGlucHV0XHJcblx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0aWYgKHRoaXMubmFtZUlucHV0KSB7XHJcblx0XHRcdFx0dGhpcy5uYW1lSW5wdXQuZm9jdXMoKTtcclxuXHRcdFx0XHR0aGlzLm5hbWVJbnB1dC5zZWxlY3QoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSwgNTApO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSByZW5kZXJJbWFnZVByZXZpZXcoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcblx0XHRjb25zdCBwcmV2aWV3Q29udGFpbmVyID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KHsgY2xzOiAnaW1hZ2UtbWFuYWdlci1wcmV2aWV3JyB9KTtcclxuXHRcdFxyXG5cdFx0Y29uc3QgaW1nID0gcHJldmlld0NvbnRhaW5lci5jcmVhdGVFbCgnaW1nJywge1xyXG5cdFx0XHRhdHRyOiB7XHJcblx0XHRcdFx0c3JjOiB0aGlzLmFwcC52YXVsdC5nZXRSZXNvdXJjZVBhdGgodGhpcy5pbWFnZUZpbGUpLFxyXG5cdFx0XHRcdGFsdDogdGhpcy5pbWFnZUZpbGUubmFtZSxcclxuXHRcdFx0fSxcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIEFkZCBjbGFzcyBmb3IgcHJldmlldyBzdHlsaW5nIChzdHlsZXMgaW4gc3R5bGVzLmNzcylcclxuXHRcdGltZy5hZGRDbGFzcygnaW1hZ2UtbWFuYWdlci1wcmV2aWV3LWltZycpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSByZW5kZXJGaWxlSW5mbyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuXHRcdGNvbnN0IGluZm9Db250YWluZXIgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoeyBjbHM6ICdpbWFnZS1tYW5hZ2VyLWluZm8nIH0pO1xyXG5cdFx0XHJcblx0XHRjb25zdCBpbmZvTGlzdCA9IGluZm9Db250YWluZXIuY3JlYXRlRWwoJ3VsJyk7XHJcblx0XHRcclxuXHRcdC8vIE9yaWdpbmFsIHBhdGhcclxuXHRcdGNvbnN0IG9yaWdpbmFsSXRlbSA9IGluZm9MaXN0LmNyZWF0ZUVsKCdsaScpO1xyXG5cdFx0b3JpZ2luYWxJdGVtLmNyZWF0ZUVsKCdzdHJvbmcnLCB7IHRleHQ6ICdPcmlnaW5hbDogJyB9KTtcclxuXHRcdG9yaWdpbmFsSXRlbS5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogdGhpcy5pbWFnZUZpbGUucGF0aCB9KTtcclxuXHJcblx0XHQvLyBOZXcgcGF0aCBwcmV2aWV3XHJcblx0XHRjb25zdCBuZXdJdGVtID0gaW5mb0xpc3QuY3JlYXRlRWwoJ2xpJyk7XHJcblx0XHRuZXdJdGVtLmNyZWF0ZUVsKCdzdHJvbmcnLCB7IHRleHQ6ICdOZXcgcGF0aDogJyB9KTtcclxuXHRcdHRoaXMucHJldmlld0VsID0gbmV3SXRlbS5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogdGhpcy5nZXROZXdQYXRoKHRoaXMuY3VycmVudE5hbWUpIH0pO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSByZW5kZXJOYW1lSW5wdXQoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ05ldyBuYW1lJylcclxuXHRcdFx0LnNldERlc2MoJ0VudGVyIGEgbmV3IG5hbWUgZm9yIHRoZSBpbWFnZSAod2l0aG91dCBleHRlbnNpb24pJylcclxuXHRcdFx0LmFkZFRleHQoKHRleHQpID0+IHtcclxuXHRcdFx0XHR0aGlzLm5hbWVJbnB1dCA9IHRleHQuaW5wdXRFbDtcclxuXHRcdFx0XHR0ZXh0XHJcblx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJ0VudGVyIG5hbWUnKVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMuY3VycmVudE5hbWUpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMuY3VycmVudE5hbWUgPSB0aGlzLnNhbml0aXplTmFtZSh2YWx1ZSk7XHJcblx0XHRcdFx0XHRcdHRoaXMudXBkYXRlUHJldmlldygpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdC8vIEhhbmRsZSBlbnRlciBrZXlcclxuXHRcdFx0XHR0ZXh0LmlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlOiBLZXlib2FyZEV2ZW50KSA9PiB7XHJcblx0XHRcdFx0XHRpZiAoZS5rZXkgPT09ICdFbnRlcicgJiYgIWUuaXNDb21wb3NpbmcpIHtcclxuXHRcdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdFx0XHR0aGlzLnN1Ym1pdCgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgcmVuZGVyQnV0dG9ucyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuYWRkQnV0dG9uKChidG4pID0+IHtcclxuXHRcdFx0XHRidG5cclxuXHRcdFx0XHRcdC5zZXRCdXR0b25UZXh0KCdSZW5hbWUnKVxyXG5cdFx0XHRcdFx0LnNldEN0YSgpXHJcblx0XHRcdFx0XHQub25DbGljaygoKSA9PiB0aGlzLnN1Ym1pdCgpKTtcclxuXHRcdFx0fSlcclxuXHRcdFx0LmFkZEJ1dHRvbigoYnRuKSA9PiB7XHJcblx0XHRcdFx0YnRuXHJcblx0XHRcdFx0XHQuc2V0QnV0dG9uVGV4dCgnU2tpcCcpXHJcblx0XHRcdFx0XHQub25DbGljaygoKSA9PiB0aGlzLmNhbmNlbCgpKTtcclxuXHRcdFx0fSk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGdldE5ld1BhdGgobmFtZTogc3RyaW5nKTogc3RyaW5nIHtcclxuXHRcdGNvbnN0IGZvbGRlciA9IHRoaXMuaW1hZ2VGaWxlLnBhcmVudD8ucGF0aCA/PyAnJztcclxuXHRcdGNvbnN0IGV4dGVuc2lvbiA9IHRoaXMuaW1hZ2VGaWxlLmV4dGVuc2lvbjtcclxuXHRcdGNvbnN0IGZpbGVOYW1lID0gYCR7bmFtZX0uJHtleHRlbnNpb259YDtcclxuXHRcdHJldHVybiBmb2xkZXIgPyBgJHtmb2xkZXJ9LyR7ZmlsZU5hbWV9YCA6IGZpbGVOYW1lO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSB1cGRhdGVQcmV2aWV3KCk6IHZvaWQge1xyXG5cdFx0aWYgKHRoaXMucHJldmlld0VsKSB7XHJcblx0XHRcdHRoaXMucHJldmlld0VsLnNldFRleHQodGhpcy5nZXROZXdQYXRoKHRoaXMuY3VycmVudE5hbWUpKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHByaXZhdGUgc2FuaXRpemVOYW1lKG5hbWU6IHN0cmluZyk6IHN0cmluZyB7XHJcblx0XHRyZXR1cm4gbmFtZVxyXG5cdFx0XHQucmVwbGFjZSgvW1xcXFwvOio/XCI8PnxdL2csICctJylcclxuXHRcdFx0LnJlcGxhY2UoL1xccysvZywgJyAnKVxyXG5cdFx0XHQudHJpbSgpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBzaG93RXJyb3IobWVzc2FnZTogc3RyaW5nKTogdm9pZCB7XHJcblx0XHRpZiAodGhpcy5lcnJvckVsKSB7XHJcblx0XHRcdHRoaXMuZXJyb3JFbC5zZXRUZXh0KG1lc3NhZ2UpO1xyXG5cdFx0XHR0aGlzLmVycm9yRWwuYWRkQ2xhc3MoJ2ltYWdlLW1hbmFnZXItZXJyb3ItdmlzaWJsZScpO1xyXG5cdFx0XHR0aGlzLmVycm9yRWwucmVtb3ZlQ2xhc3MoJ2ltYWdlLW1hbmFnZXItZXJyb3ItaGlkZGVuJyk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGhpZGVFcnJvcigpOiB2b2lkIHtcclxuXHRcdGlmICh0aGlzLmVycm9yRWwpIHtcclxuXHRcdFx0dGhpcy5lcnJvckVsLmFkZENsYXNzKCdpbWFnZS1tYW5hZ2VyLWVycm9yLWhpZGRlbicpO1xyXG5cdFx0XHR0aGlzLmVycm9yRWwucmVtb3ZlQ2xhc3MoJ2ltYWdlLW1hbmFnZXItZXJyb3ItdmlzaWJsZScpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBzdWJtaXQoKTogdm9pZCB7XHJcblx0XHR0aGlzLmhpZGVFcnJvcigpO1xyXG5cclxuXHRcdGlmICghdGhpcy5jdXJyZW50TmFtZSB8fCB0aGlzLmN1cnJlbnROYW1lLnRyaW0oKSA9PT0gJycpIHtcclxuXHRcdFx0dGhpcy5zaG93RXJyb3IoJ05hbWUgY2Fubm90IGJlIGVtcHR5Jyk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLm9uU3VibWl0KHtcclxuXHRcdFx0bmV3TmFtZTogdGhpcy5jdXJyZW50TmFtZSxcclxuXHRcdFx0Y2FuY2VsbGVkOiBmYWxzZSxcclxuXHRcdH0pO1xyXG5cdFx0dGhpcy5jbG9zZSgpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBjYW5jZWwoKTogdm9pZCB7XHJcblx0XHR0aGlzLm9uU3VibWl0KHtcclxuXHRcdFx0bmV3TmFtZTogJycsXHJcblx0XHRcdGNhbmNlbGxlZDogdHJ1ZSxcclxuXHRcdH0pO1xyXG5cdFx0dGhpcy5jbG9zZSgpO1xyXG5cdH1cclxuXHJcblx0b25DbG9zZSgpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XHJcblx0fVxyXG59XHJcblxyXG4vKipcclxuICogT3BlbiB0aGUgcmVuYW1lIG1vZGFsIGFuZCByZXR1cm4gdGhlIHJlc3VsdFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIG9wZW5SZW5hbWVNb2RhbChcclxuXHRhcHA6IEFwcCxcclxuXHRpbWFnZUZpbGU6IFRGaWxlLFxyXG5cdHN1Z2dlc3RlZE5hbWU6IHN0cmluZ1xyXG4pOiBQcm9taXNlPFJlbmFtZVJlc3VsdD4ge1xyXG5cdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgUmVuYW1lTW9kYWwoYXBwLCBpbWFnZUZpbGUsIHN1Z2dlc3RlZE5hbWUsIHJlc29sdmUpO1xyXG5cdFx0bW9kYWwub3BlbigpO1xyXG5cdH0pO1xyXG59XHJcbiIsICIvKipcclxuICogRGVzY3JpcHRpdmUgSW1hZ2UgTW9kYWxcclxuICogQXNrcyB1c2VyIHRvIGRlc2NyaWJlIHRoZSBpbWFnZSwgdXNlcyBkZXNjcmlwdGlvbiBhcyBkaXNwbGF5IHRleHQgYW5kIGtlYmFiLWNhc2UgZm9yIGZpbGVuYW1lXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQXBwLCBNb2RhbCwgU2V0dGluZywgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IHRvS2ViYWJDYXNlIH0gZnJvbSAnLi4vdXRpbHMva2ViYWItY2FzZSc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIERlc2NyaXB0aXZlSW1hZ2VSZXN1bHQge1xyXG5cdGRlc2NyaXB0aW9uOiBzdHJpbmc7XHJcblx0ZmlsZU5hbWU6IHN0cmluZzsgLy8ga2ViYWItY2FzZSB2ZXJzaW9uXHJcblx0Y2FuY2VsbGVkOiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRGVzY3JpcHRpdmVJbWFnZU1vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG5cdHByaXZhdGUgaW1hZ2VGaWxlOiBURmlsZTtcclxuXHRwcml2YXRlIGRlc2NyaXB0aW9uOiBzdHJpbmcgPSAnJztcclxuXHRwcml2YXRlIG9uU3VibWl0OiAocmVzdWx0OiBEZXNjcmlwdGl2ZUltYWdlUmVzdWx0KSA9PiB2b2lkO1xyXG5cclxuXHRwcml2YXRlIGRlc2NyaXB0aW9uSW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuXHRwcml2YXRlIHByZXZpZXdFbDogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuXHRwcml2YXRlIGZpbGVOYW1lUHJldmlld0VsOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xyXG5cdHByaXZhdGUgZXJyb3JFbDogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuXHJcblx0Y29uc3RydWN0b3IoXHJcblx0XHRhcHA6IEFwcCxcclxuXHRcdGltYWdlRmlsZTogVEZpbGUsXHJcblx0XHRvblN1Ym1pdDogKHJlc3VsdDogRGVzY3JpcHRpdmVJbWFnZVJlc3VsdCkgPT4gdm9pZCxcclxuXHRcdHN1Z2dlc3RlZERlc2NyaXB0aW9uPzogc3RyaW5nXHJcblx0KSB7XHJcblx0XHRzdXBlcihhcHApO1xyXG5cdFx0dGhpcy5pbWFnZUZpbGUgPSBpbWFnZUZpbGU7XHJcblx0XHR0aGlzLm9uU3VibWl0ID0gb25TdWJtaXQ7XHJcblx0XHR0aGlzLmRlc2NyaXB0aW9uID0gc3VnZ2VzdGVkRGVzY3JpcHRpb24gPz8gJyc7XHJcblx0fVxyXG5cclxuXHRvbk9wZW4oKTogdm9pZCB7XHJcblx0XHRjb25zdCB7IGNvbnRlbnRFbCwgdGl0bGVFbCB9ID0gdGhpcztcclxuXHRcdFxyXG5cdFx0dGhpcy5jb250YWluZXJFbC5hZGRDbGFzcygnaW1hZ2UtbWFuYWdlci1yZW5hbWUtbW9kYWwnKTtcclxuXHRcdHRpdGxlRWwuc2V0VGV4dCgnRGVzY3JpYmUgaW1hZ2UnKTtcclxuXHJcblx0XHQvLyBJbWFnZSBwcmV2aWV3XHJcblx0XHR0aGlzLnJlbmRlckltYWdlUHJldmlldyhjb250ZW50RWwpO1xyXG5cclxuXHRcdC8vIERlc2NyaXB0aW9uIGlucHV0XHJcblx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcblx0XHRcdC5zZXROYW1lKCdJbWFnZSBkZXNjcmlwdGlvbicpXHJcblx0XHRcdC5zZXREZXNjKCdEZXNjcmliZSB0aGlzIGltYWdlLiBUaGlzIHdpbGwgYmUgdXNlZCBhcyBkaXNwbGF5IHRleHQgYW5kIGZvciB0aGUgZmlsZW5hbWUuJylcclxuXHRcdFx0LmFkZFRleHQoKHRleHQpID0+IHtcclxuXHRcdFx0XHR0aGlzLmRlc2NyaXB0aW9uSW5wdXQgPSB0ZXh0LmlucHV0RWw7XHJcblx0XHRcdFx0dGV4dFxyXG5cdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKCdBIGJlYXV0aWZ1bCBzdW5zZXQgb3ZlciBtb3VudGFpbnMnKVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMuZGVzY3JpcHRpb24pXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMuZGVzY3JpcHRpb24gPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0dGhpcy51cGRhdGVQcmV2aWV3KCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdFx0Ly8gSGFuZGxlIGVudGVyIGtleSAoc3VibWl0KVxyXG5cdFx0XHRcdHRleHQuaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGU6IEtleWJvYXJkRXZlbnQpID0+IHtcclxuXHRcdFx0XHRcdGlmIChlLmtleSA9PT0gJ0VudGVyJyAmJiAhZS5pc0NvbXBvc2luZykge1xyXG5cdFx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRcdHRoaXMuc3VibWl0KCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdC8vIFByZXZpZXcgc2VjdGlvblxyXG5cdFx0Y29uc3QgcHJldmlld0NvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdpbWFnZS1tYW5hZ2VyLWluZm8nIH0pO1xyXG5cdFx0cHJldmlld0NvbnRhaW5lci5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1ByZXZpZXc6JyB9KTtcclxuXHRcdFxyXG5cdFx0Y29uc3QgZmlsZU5hbWVQcmV2aWV3ID0gcHJldmlld0NvbnRhaW5lci5jcmVhdGVFbCgncCcpO1xyXG5cdFx0ZmlsZU5hbWVQcmV2aWV3LmNyZWF0ZUVsKCdzdHJvbmcnLCB7IHRleHQ6ICdGaWxlbmFtZTogJyB9KTtcclxuXHRcdHRoaXMuZmlsZU5hbWVQcmV2aWV3RWwgPSBmaWxlTmFtZVByZXZpZXcuY3JlYXRlRWwoJ3NwYW4nKTtcclxuXHRcdFxyXG5cdFx0Y29uc3QgbGlua1ByZXZpZXcgPSBwcmV2aWV3Q29udGFpbmVyLmNyZWF0ZUVsKCdwJyk7XHJcblx0XHRsaW5rUHJldmlldy5jcmVhdGVFbCgnc3Ryb25nJywgeyB0ZXh0OiAnTGluazogJyB9KTtcclxuXHRcdHRoaXMucHJldmlld0VsID0gbGlua1ByZXZpZXcuY3JlYXRlRWwoJ3NwYW4nLCB7IGNsczogJ2NvZGUnIH0pO1xyXG5cclxuXHRcdC8vIEVycm9yIGRpc3BsYXlcclxuXHRcdHRoaXMuZXJyb3JFbCA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdpbWFnZS1tYW5hZ2VyLWVycm9yIGltYWdlLW1hbmFnZXItZXJyb3ItaGlkZGVuJyB9KTtcclxuXHJcblx0XHQvLyBCdXR0b25zXHJcblx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcblx0XHRcdC5hZGRCdXR0b24oKGJ0bikgPT4ge1xyXG5cdFx0XHRcdGJ0blxyXG5cdFx0XHRcdFx0LnNldEJ1dHRvblRleHQoJ0luc2VydCcpXHJcblx0XHRcdFx0XHQuc2V0Q3RhKClcclxuXHRcdFx0XHRcdC5vbkNsaWNrKCgpID0+IHRoaXMuc3VibWl0KCkpO1xyXG5cdFx0XHR9KVxyXG5cdFx0XHQuYWRkQnV0dG9uKChidG4pID0+IHtcclxuXHRcdFx0XHRidG5cclxuXHRcdFx0XHRcdC5zZXRCdXR0b25UZXh0KCdDYW5jZWwnKVxyXG5cdFx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4gdGhpcy5jYW5jZWwoKSk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdC8vIFVwZGF0ZSBwcmV2aWV3IGlmIHdlIGhhdmUgYSBzdWdnZXN0ZWQgZGVzY3JpcHRpb25cclxuXHRcdGlmICh0aGlzLmRlc2NyaXB0aW9uKSB7XHJcblx0XHRcdHRoaXMudXBkYXRlUHJldmlldygpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEZvY3VzIGlucHV0XHJcblx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0aWYgKHRoaXMuZGVzY3JpcHRpb25JbnB1dCkge1xyXG5cdFx0XHRcdHRoaXMuZGVzY3JpcHRpb25JbnB1dC5mb2N1cygpO1xyXG5cdFx0XHR9XHJcblx0XHR9LCA1MCk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHJlbmRlckltYWdlUHJldmlldyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHByZXZpZXdDb250YWluZXIgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoeyBjbHM6ICdpbWFnZS1tYW5hZ2VyLXByZXZpZXcnIH0pO1xyXG5cdFx0XHJcblx0XHRjb25zdCBpbWcgPSBwcmV2aWV3Q29udGFpbmVyLmNyZWF0ZUVsKCdpbWcnLCB7XHJcblx0XHRcdGF0dHI6IHtcclxuXHRcdFx0XHRzcmM6IHRoaXMuYXBwLnZhdWx0LmdldFJlc291cmNlUGF0aCh0aGlzLmltYWdlRmlsZSksXHJcblx0XHRcdFx0YWx0OiB0aGlzLmltYWdlRmlsZS5uYW1lLFxyXG5cdFx0XHR9LFxyXG5cdFx0fSk7XHJcblxyXG5cdFx0aW1nLmFkZENsYXNzKCdpbWFnZS1tYW5hZ2VyLXByZXZpZXctaW1nJyk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHVwZGF0ZVByZXZpZXcoKTogdm9pZCB7XHJcblx0XHRpZiAoIXRoaXMuZGVzY3JpcHRpb24gfHwgdGhpcy5kZXNjcmlwdGlvbi50cmltKCkgPT09ICcnKSB7XHJcblx0XHRcdGlmICh0aGlzLmZpbGVOYW1lUHJldmlld0VsKSB7XHJcblx0XHRcdFx0dGhpcy5maWxlTmFtZVByZXZpZXdFbC5zZXRUZXh0KCcoZW50ZXIgZGVzY3JpcHRpb24pJyk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKHRoaXMucHJldmlld0VsKSB7XHJcblx0XHRcdFx0dGhpcy5wcmV2aWV3RWwuc2V0VGV4dCgnKGVudGVyIGRlc2NyaXB0aW9uKScpO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCBrZWJhYk5hbWUgPSB0b0tlYmFiQ2FzZSh0aGlzLmRlc2NyaXB0aW9uKTtcclxuXHRcdGNvbnN0IGV4dGVuc2lvbiA9IHRoaXMuaW1hZ2VGaWxlLmV4dGVuc2lvbjtcclxuXHRcdGNvbnN0IGZpbGVOYW1lID0gYCR7a2ViYWJOYW1lfS4ke2V4dGVuc2lvbn1gO1xyXG5cdFx0Y29uc3QgZGlzcGxheVRleHQgPSB0aGlzLmRlc2NyaXB0aW9uLnRyaW0oKTtcclxuXHJcblx0XHRpZiAodGhpcy5maWxlTmFtZVByZXZpZXdFbCkge1xyXG5cdFx0XHR0aGlzLmZpbGVOYW1lUHJldmlld0VsLnNldFRleHQoZmlsZU5hbWUpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICh0aGlzLnByZXZpZXdFbCkge1xyXG5cdFx0XHQvLyBTaG93IHByZXZpZXcgYXM6ICFbW2ZpbGVuYW1lLmpwZ3xkaXNwbGF5IHRleHRdXVxyXG5cdFx0XHR0aGlzLnByZXZpZXdFbC5zZXRUZXh0KGAhW1ske2ZpbGVOYW1lfXwke2Rpc3BsYXlUZXh0fV1dYCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHNob3dFcnJvcihtZXNzYWdlOiBzdHJpbmcpOiB2b2lkIHtcclxuXHRcdGlmICh0aGlzLmVycm9yRWwpIHtcclxuXHRcdFx0dGhpcy5lcnJvckVsLnNldFRleHQobWVzc2FnZSk7XHJcblx0XHRcdHRoaXMuZXJyb3JFbC5hZGRDbGFzcygnaW1hZ2UtbWFuYWdlci1lcnJvci12aXNpYmxlJyk7XHJcblx0XHRcdHRoaXMuZXJyb3JFbC5yZW1vdmVDbGFzcygnaW1hZ2UtbWFuYWdlci1lcnJvci1oaWRkZW4nKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHByaXZhdGUgaGlkZUVycm9yKCk6IHZvaWQge1xyXG5cdFx0aWYgKHRoaXMuZXJyb3JFbCkge1xyXG5cdFx0XHR0aGlzLmVycm9yRWwuYWRkQ2xhc3MoJ2ltYWdlLW1hbmFnZXItZXJyb3ItaGlkZGVuJyk7XHJcblx0XHRcdHRoaXMuZXJyb3JFbC5yZW1vdmVDbGFzcygnaW1hZ2UtbWFuYWdlci1lcnJvci12aXNpYmxlJyk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHN1Ym1pdCgpOiB2b2lkIHtcclxuXHRcdHRoaXMuaGlkZUVycm9yKCk7XHJcblxyXG5cdFx0aWYgKCF0aGlzLmRlc2NyaXB0aW9uIHx8IHRoaXMuZGVzY3JpcHRpb24udHJpbSgpID09PSAnJykge1xyXG5cdFx0XHR0aGlzLnNob3dFcnJvcignRGVzY3JpcHRpb24gY2Fubm90IGJlIGVtcHR5Jyk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCBrZWJhYk5hbWUgPSB0b0tlYmFiQ2FzZSh0aGlzLmRlc2NyaXB0aW9uKTtcclxuXHRcdGlmICgha2ViYWJOYW1lIHx8IGtlYmFiTmFtZSA9PT0gJycpIHtcclxuXHRcdFx0dGhpcy5zaG93RXJyb3IoJ0Rlc2NyaXB0aW9uIG11c3QgY29udGFpbiB2YWxpZCBjaGFyYWN0ZXJzJyk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLm9uU3VibWl0KHtcclxuXHRcdFx0ZGVzY3JpcHRpb246IHRoaXMuZGVzY3JpcHRpb24udHJpbSgpLFxyXG5cdFx0XHRmaWxlTmFtZToga2ViYWJOYW1lLFxyXG5cdFx0XHRjYW5jZWxsZWQ6IGZhbHNlLFxyXG5cdFx0fSk7XHJcblx0XHR0aGlzLmNsb3NlKCk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGNhbmNlbCgpOiB2b2lkIHtcclxuXHRcdHRoaXMub25TdWJtaXQoe1xyXG5cdFx0XHRkZXNjcmlwdGlvbjogJycsXHJcblx0XHRcdGZpbGVOYW1lOiAnJyxcclxuXHRcdFx0Y2FuY2VsbGVkOiB0cnVlLFxyXG5cdFx0fSk7XHJcblx0XHR0aGlzLmNsb3NlKCk7XHJcblx0fVxyXG5cclxuXHRvbkNsb3NlKCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcclxuXHR9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBPcGVuIHRoZSBkZXNjcmlwdGl2ZSBpbWFnZSBtb2RhbCBhbmQgcmV0dXJuIHRoZSByZXN1bHRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBvcGVuRGVzY3JpcHRpdmVJbWFnZU1vZGFsKFxyXG5cdGFwcDogQXBwLFxyXG5cdGltYWdlRmlsZTogVEZpbGUsXHJcblx0c3VnZ2VzdGVkRGVzY3JpcHRpb24/OiBzdHJpbmdcclxuKTogUHJvbWlzZTxEZXNjcmlwdGl2ZUltYWdlUmVzdWx0PiB7XHJcblx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcblx0XHRjb25zdCBtb2RhbCA9IG5ldyBEZXNjcmlwdGl2ZUltYWdlTW9kYWwoYXBwLCBpbWFnZUZpbGUsIHJlc29sdmUsIHN1Z2dlc3RlZERlc2NyaXB0aW9uKTtcclxuXHRcdG1vZGFsLm9wZW4oKTtcclxuXHR9KTtcclxufVxyXG4iLCAiLyoqXHJcbiAqIEtlYmFiLWNhc2UgdXRpbGl0eVxyXG4gKiBDb252ZXJ0cyBzdHJpbmdzIHRvIGtlYmFiLWNhc2UgZm9yIHNhZmUgZmlsZW5hbWVzXHJcbiAqIEJhc2VkIG9uIEFzdHJvIENvbXBvc2VyJ3MgaW1wbGVtZW50YXRpb25cclxuICovXHJcblxyXG4vKipcclxuICogQ29udmVydCBhIHN0cmluZyB0byBrZWJhYi1jYXNlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gdG9LZWJhYkNhc2Uoc3RyOiBzdHJpbmcpOiBzdHJpbmcge1xyXG5cdHJldHVybiBzdHJcclxuXHRcdC50b0xvd2VyQ2FzZSgpXHJcblx0XHQvLyBSZW1vdmUgb3IgcmVwbGFjZSBwcm9ibGVtYXRpYyBjaGFyYWN0ZXJzIGZvciBmaWxlbmFtZXNcclxuXHRcdC5yZXBsYWNlKC9bPD46XCIvXFxcXHw/Kl0vZywgJycpIC8vIFJlbW92ZSBXaW5kb3dzL1VuaXggaW52YWxpZCBmaWxlbmFtZSBjaGFyYWN0ZXJzXHJcblx0XHQucmVwbGFjZSgvWydcIl0vZywgJycpIC8vIFJlbW92ZSBxdW90ZXNcclxuXHRcdC5yZXBsYWNlKC9bXlxcd1xccy1dL2csICcnKSAvLyBSZW1vdmUgb3RoZXIgc3BlY2lhbCBjaGFyYWN0ZXJzIGJ1dCBrZWVwIGxldHRlcnMsIG51bWJlcnMsIHNwYWNlcywgaHlwaGVuc1xyXG5cdFx0LnRyaW0oKVxyXG5cdFx0LnJlcGxhY2UoL1xccysvZywgJy0nKVxyXG5cdFx0LnJlcGxhY2UoLy0rL2csICctJylcclxuXHRcdC5yZXBsYWNlKC9eLXwtJC9nLCAnJyk7XHJcbn1cclxuIiwgIi8qKlxyXG4gKiBQcm9wZXJ0eSBIYW5kbGVyIFNlcnZpY2VcclxuICogSGFuZGxlcyBpbnNlcnRpbmcgaW1hZ2VzIGludG8gZnJvbnRtYXR0ZXIgcHJvcGVydGllcyAoTUQgYW5kIE1EWClcclxuICovXHJcblxyXG5pbXBvcnQgeyBBcHAsIFRGaWxlLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IEltYWdlTWFuYWdlclNldHRpbmdzLCBQcm9wZXJ0eUxpbmtGb3JtYXQsIFJlbW90ZUltYWdlIH0gZnJvbSAnLi4vdHlwZXMnO1xyXG5pbXBvcnQgeyBpc01keEZpbGUsIHByb2Nlc3NNZHhGcm9udE1hdHRlciB9IGZyb20gJy4uL3V0aWxzL21keC1mcm9udG1hdHRlcic7XHJcbmltcG9ydCB7IFN0b3JhZ2VNYW5hZ2VyIH0gZnJvbSAnLi9TdG9yYWdlTWFuYWdlcic7XHJcbmltcG9ydCB7IEltYWdlUHJvY2Vzc29yIH0gZnJvbSAnLi9JbWFnZVByb2Nlc3Nvcic7XHJcbmltcG9ydCB0eXBlIHsgUmVtb3RlSW1hZ2VTZXJ2aWNlIH0gZnJvbSAnLi9SZW1vdGVJbWFnZVNlcnZpY2UnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFByb3BlcnR5SGFuZGxlciB7XHJcblx0cHJpdmF0ZSBhcHA6IEFwcDtcclxuXHRwcml2YXRlIHNldHRpbmdzOiBJbWFnZU1hbmFnZXJTZXR0aW5ncztcclxuXHRwcml2YXRlIHN0b3JhZ2VNYW5hZ2VyOiBTdG9yYWdlTWFuYWdlcjtcclxuXHRwcml2YXRlIGltYWdlUHJvY2Vzc29yOiBJbWFnZVByb2Nlc3NvcjtcclxuXHRwcml2YXRlIHJlbW90ZVNlcnZpY2U/OiBSZW1vdGVJbWFnZVNlcnZpY2U7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBzZXR0aW5nczogSW1hZ2VNYW5hZ2VyU2V0dGluZ3MsIHN0b3JhZ2VNYW5hZ2VyOiBTdG9yYWdlTWFuYWdlciwgaW1hZ2VQcm9jZXNzb3I6IEltYWdlUHJvY2Vzc29yLCByZW1vdGVTZXJ2aWNlPzogUmVtb3RlSW1hZ2VTZXJ2aWNlLCBvYnNlcnZhYmxlPzogeyBzdWJzY3JpYmUoZm46IChzZXR0aW5nczogSW1hZ2VNYW5hZ2VyU2V0dGluZ3MpID0+IHZvaWQpOiB2b2lkIH0pIHtcclxuXHRcdHRoaXMuYXBwID0gYXBwO1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xyXG5cdFx0dGhpcy5zdG9yYWdlTWFuYWdlciA9IHN0b3JhZ2VNYW5hZ2VyO1xyXG5cdFx0dGhpcy5pbWFnZVByb2Nlc3NvciA9IGltYWdlUHJvY2Vzc29yO1xyXG5cdFx0dGhpcy5yZW1vdGVTZXJ2aWNlID0gcmVtb3RlU2VydmljZTtcclxuXHJcblx0XHQvLyBTdWJzY3JpYmUgdG8gc2V0dGluZ3MgdXBkYXRlcyBpZiBvYnNlcnZhYmxlIGlzIHByb3ZpZGVkXHJcblx0XHRvYnNlcnZhYmxlPy5zdWJzY3JpYmUoKG5ld1NldHRpbmdzKSA9PiB7XHJcblx0XHRcdHRoaXMudXBkYXRlU2V0dGluZ3MobmV3U2V0dGluZ3MpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBVcGRhdGUgc2V0dGluZ3MgcmVmZXJlbmNlXHJcblx0ICovXHJcblx0dXBkYXRlU2V0dGluZ3Moc2V0dGluZ3M6IEltYWdlTWFuYWdlclNldHRpbmdzKTogdm9pZCB7XHJcblx0XHR0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XHJcblx0XHR0aGlzLmltYWdlUHJvY2Vzc29yPy51cGRhdGVTZXR0aW5ncyhzZXR0aW5ncyk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBTZXQgYW4gaW1hZ2UgcHJvcGVydHkgdmFsdWUgaW4gZnJvbnRtYXR0ZXJcclxuXHQgKi9cclxuXHRhc3luYyBzZXRQcm9wZXJ0eVZhbHVlKFxyXG5cdFx0bm90ZUZpbGU6IFRGaWxlLFxyXG5cdFx0cHJvcGVydHlOYW1lOiBzdHJpbmcsXHJcblx0XHRpbWFnZUZpbGU6IFRGaWxlLFxyXG5cdFx0YWx0VGV4dD86IHN0cmluZ1xyXG5cdCk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0Y29uc3QgbGlua1ZhbHVlID0gdGhpcy5mb3JtYXRQcm9wZXJ0eUxpbmsoaW1hZ2VGaWxlLCBub3RlRmlsZSk7XHJcblxyXG5cdFx0dHJ5IHtcclxuXHRcdFx0aWYgKGlzTWR4RmlsZShub3RlRmlsZSkpIHtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLnNldE1keFByb3BlcnR5KG5vdGVGaWxlLCBwcm9wZXJ0eU5hbWUsIGxpbmtWYWx1ZSwgYWx0VGV4dCk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5zZXRNZFByb3BlcnR5KG5vdGVGaWxlLCBwcm9wZXJ0eU5hbWUsIGxpbmtWYWx1ZSwgYWx0VGV4dCk7XHJcblx0XHRcdH1cclxuXHRcdFx0bmV3IE5vdGljZShgSW1hZ2UgYWRkZWQgdG8gcHJvcGVydHk6ICR7cHJvcGVydHlOYW1lfWApO1xyXG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcignRmFpbGVkIHRvIHVwZGF0ZSBwcm9wZXJ0eTonLCBlcnJvcik7XHJcblx0XHRcdG5ldyBOb3RpY2UoYEZhaWxlZCB0byB1cGRhdGUgcHJvcGVydHk6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpfWApO1xyXG5cdFx0XHR0aHJvdyBlcnJvcjtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNldCBwcm9wZXJ0eSBpbiBNRCBmaWxlIHVzaW5nIE9ic2lkaWFuJ3MgQVBJXHJcblx0ICovXHJcblx0cHJpdmF0ZSBhc3luYyBzZXRNZFByb3BlcnR5KFxyXG5cdFx0ZmlsZTogVEZpbGUsXHJcblx0XHRwcm9wZXJ0eU5hbWU6IHN0cmluZyxcclxuXHRcdHZhbHVlOiBzdHJpbmcsXHJcblx0XHRhbHRUZXh0Pzogc3RyaW5nXHJcblx0KTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHRhd2FpdCB0aGlzLmFwcC5maWxlTWFuYWdlci5wcm9jZXNzRnJvbnRNYXR0ZXIoZmlsZSwgKGZyb250bWF0dGVyOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPikgPT4ge1xyXG5cdFx0XHRmcm9udG1hdHRlcltwcm9wZXJ0eU5hbWVdID0gdmFsdWU7XHJcblx0XHRcdGlmIChhbHRUZXh0ICYmIHRoaXMuc2V0dGluZ3MuYWx0VGV4dFByb3BlcnR5KSB7XHJcblx0XHRcdFx0ZnJvbnRtYXR0ZXJbdGhpcy5zZXR0aW5ncy5hbHRUZXh0UHJvcGVydHldID0gYWx0VGV4dDtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBTZXQgcHJvcGVydHkgaW4gTURYIGZpbGUgdXNpbmcgY3VzdG9tIGhhbmRsZXJcclxuXHQgKi9cclxuXHRwcml2YXRlIGFzeW5jIHNldE1keFByb3BlcnR5KFxyXG5cdFx0ZmlsZTogVEZpbGUsXHJcblx0XHRwcm9wZXJ0eU5hbWU6IHN0cmluZyxcclxuXHRcdHZhbHVlOiBzdHJpbmcsXHJcblx0XHRhbHRUZXh0Pzogc3RyaW5nXHJcblx0KTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHRhd2FpdCBwcm9jZXNzTWR4RnJvbnRNYXR0ZXIodGhpcy5hcHAsIGZpbGUsIChmcm9udG1hdHRlcikgPT4ge1xyXG5cdFx0XHRmcm9udG1hdHRlcltwcm9wZXJ0eU5hbWVdID0gdmFsdWU7XHJcblx0XHRcdGlmIChhbHRUZXh0ICYmIHRoaXMuc2V0dGluZ3MuYWx0VGV4dFByb3BlcnR5KSB7XHJcblx0XHRcdFx0ZnJvbnRtYXR0ZXJbdGhpcy5zZXR0aW5ncy5hbHRUZXh0UHJvcGVydHldID0gYWx0VGV4dDtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBGb3JtYXQgdGhlIGltYWdlIGxpbmsgYWNjb3JkaW5nIHRvIHNldHRpbmdzXHJcblx0ICogUHVibGljIG1ldGhvZCBzbyBQYXN0ZUhhbmRsZXIgY2FuIGdldCB0aGUgZm9ybWF0dGVkIHZhbHVlIGZvciBVSSB1cGRhdGVzXHJcblx0ICovXHJcblx0Zm9ybWF0UHJvcGVydHlMaW5rKGltYWdlRmlsZTogVEZpbGUsIG5vdGVGaWxlOiBURmlsZSk6IHN0cmluZyB7XHJcblx0XHQvLyBIYW5kbGUgT2JzaWRpYW5EZWZhdWx0IGZpcnN0IC0gdXNlIE9ic2lkaWFuJ3MgZ2VuZXJhdGVNYXJrZG93bkxpbmsgQVBJXHJcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5wcm9wZXJ0eUxpbmtGb3JtYXQgPT09IFByb3BlcnR5TGlua0Zvcm1hdC5PYnNpZGlhbkRlZmF1bHQpIHtcclxuXHRcdFx0Ly8gVXNlIE9ic2lkaWFuJ3MgQVBJIHdoaWNoIHJlc3BlY3RzIHVzZU1hcmtkb3duTGlua3MsIG5ld0xpbmtGb3JtYXQsIGV0Yy5cclxuXHRcdFx0Y29uc3QgZ2VuZXJhdGVkTGluayA9IHRoaXMuYXBwLmZpbGVNYW5hZ2VyLmdlbmVyYXRlTWFya2Rvd25MaW5rKGltYWdlRmlsZSwgbm90ZUZpbGUucGF0aCk7XHJcblxyXG5cdFx0XHQvLyBFeHRyYWN0IHRoZSBsaW5rIHBhcnQgZm9yIHByb3BlcnRpZXNcclxuXHRcdFx0Ly8gT2JzaWRpYW4gbWF5IGdlbmVyYXRlOiAhW1twYXRoXV0gb3IgIVtdKHBhdGgpIG9yIFtbcGF0aF1dIG9yIFtdKHBhdGgpXHJcblx0XHRcdGlmIChnZW5lcmF0ZWRMaW5rLnN0YXJ0c1dpdGgoJyFbJykgJiYgZ2VuZXJhdGVkTGluay5pbmNsdWRlcygnXV0nKSkge1xyXG5cdFx0XHRcdC8vIFdpa2lsaW5rIHdpdGggZW1iZWQ6ICFbW3BhdGhdXSAtPiBbW3BhdGhdXVxyXG5cdFx0XHRcdHJldHVybiBnZW5lcmF0ZWRMaW5rLnN1YnN0cmluZygxKTtcclxuXHRcdFx0fSBlbHNlIGlmIChnZW5lcmF0ZWRMaW5rLnN0YXJ0c1dpdGgoJyFbJykgJiYgZ2VuZXJhdGVkTGluay5pbmNsdWRlcygnXSgnKSkge1xyXG5cdFx0XHRcdC8vIE1hcmtkb3duIGxpbmsgd2l0aCBlbWJlZDogIVtdKHBhdGgpIC0+IGV4dHJhY3QgcGF0aCBmcm9tIHBhcmVudGhlc2VzXHJcblx0XHRcdFx0Y29uc3QgbWF0Y2ggPSBnZW5lcmF0ZWRMaW5rLm1hdGNoKC8hXFxbLio/XFxdXFwoKC4qPylcXCkvKTtcclxuXHRcdFx0XHRyZXR1cm4gbWF0Y2ggJiYgbWF0Y2hbMV0gPyBtYXRjaFsxXSA6IGdlbmVyYXRlZExpbms7XHJcblx0XHRcdH0gZWxzZSBpZiAoZ2VuZXJhdGVkTGluay5zdGFydHNXaXRoKCdbWycpICYmIGdlbmVyYXRlZExpbmsuZW5kc1dpdGgoJ11dJykpIHtcclxuXHRcdFx0XHQvLyBXaWtpbGluayB3aXRob3V0IGVtYmVkOiBbW3BhdGhdXSAtPiBrZWVwIGFzIGlzXHJcblx0XHRcdFx0cmV0dXJuIGdlbmVyYXRlZExpbms7XHJcblx0XHRcdH0gZWxzZSBpZiAoZ2VuZXJhdGVkTGluay5pbmNsdWRlcygnXSgnKSkge1xyXG5cdFx0XHRcdC8vIE1hcmtkb3duIGxpbmsgd2l0aG91dCBlbWJlZDogW10ocGF0aCkgLT4gZXh0cmFjdCBwYXRoXHJcblx0XHRcdFx0Y29uc3QgbWF0Y2ggPSBnZW5lcmF0ZWRMaW5rLm1hdGNoKC9cXFsuKj9cXF1cXCgoLio/KVxcKS8pO1xyXG5cdFx0XHRcdHJldHVybiBtYXRjaCAmJiBtYXRjaFsxXSA/IG1hdGNoWzFdIDogZ2VuZXJhdGVkTGluaztcclxuXHRcdFx0fVxyXG5cdFx0XHQvLyBGYWxsYmFjazogcmV0dXJuIGFzLWlzXHJcblx0XHRcdHJldHVybiBnZW5lcmF0ZWRMaW5rO1xyXG5cdFx0fVxyXG5cclxuXHRcdGxldCBwYXRoVG9Vc2U6IHN0cmluZztcclxuXHJcblx0XHRzd2l0Y2ggKHRoaXMuc2V0dGluZ3MucHJvcGVydHlMaW5rRm9ybWF0KSB7XHJcblx0XHRcdGNhc2UgUHJvcGVydHlMaW5rRm9ybWF0LlJlbGF0aXZlUGF0aDpcclxuXHRcdFx0XHQvLyBVc2UgcmVsYXRpdmUgcGF0aDogYWx3YXlzIHVzZSAuL2ltYWdlLmpwZyBmb3JtYXQgZm9yIGNvbnNpc3RlbmN5XHJcblx0XHRcdFx0Ly8gVGhpcyB3b3JrcyB3aGV0aGVyIHNhbWUgZm9sZGVyIG9yIGRpZmZlcmVudCBmb2xkZXJcclxuXHRcdFx0XHRwYXRoVG9Vc2UgPSBgLi8ke2ltYWdlRmlsZS5uYW1lfWA7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgUHJvcGVydHlMaW5rRm9ybWF0LkN1c3RvbTpcclxuXHRcdFx0XHQvLyBGb3IgY3VzdG9tIGZvcm1hdCwgdXNlIGp1c3QgdGhlIGZpbGVuYW1lIHNvIHVzZXIgY2FuIGNvbnRyb2wgdGhlIGZ1bGwgcGF0aFxyXG5cdFx0XHRcdHBhdGhUb1VzZSA9IGltYWdlRmlsZS5uYW1lO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlIFByb3BlcnR5TGlua0Zvcm1hdC5QYXRoOlxyXG5cdFx0XHRkZWZhdWx0OlxyXG5cdFx0XHRcdHBhdGhUb1VzZSA9IHRoaXMuZ2V0UmVsYXRpdmVQYXRoKG5vdGVGaWxlLCBpbWFnZUZpbGUpO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0fVxyXG5cclxuXHRcdHN3aXRjaCAodGhpcy5zZXR0aW5ncy5wcm9wZXJ0eUxpbmtGb3JtYXQpIHtcclxuXHRcdFx0Y2FzZSBQcm9wZXJ0eUxpbmtGb3JtYXQuV2lraWxpbms6XHJcblx0XHRcdFx0cmV0dXJuIGBbWyR7cGF0aFRvVXNlfV1dYDtcclxuXHRcdFx0Y2FzZSBQcm9wZXJ0eUxpbmtGb3JtYXQuTWFya2Rvd246XHJcblx0XHRcdFx0cmV0dXJuIGAhW10oJHtlbmNvZGVVUkkocGF0aFRvVXNlKX0pYDtcclxuXHRcdFx0Y2FzZSBQcm9wZXJ0eUxpbmtGb3JtYXQuQ3VzdG9tOlxyXG5cdFx0XHRcdC8vIFJlcGxhY2Uge2ltYWdlLXVybH0gcGxhY2Vob2xkZXIgd2l0aCB0aGUgaW1hZ2UgZmlsZW5hbWVcclxuXHRcdFx0XHRyZXR1cm4gdGhpcy5zZXR0aW5ncy5jdXN0b21Qcm9wZXJ0eUxpbmtGb3JtYXQucmVwbGFjZShcclxuXHRcdFx0XHRcdC9cXHtpbWFnZS11cmxcXH0vZ2ksXHJcblx0XHRcdFx0XHRwYXRoVG9Vc2VcclxuXHRcdFx0XHQpO1xyXG5cdFx0XHRjYXNlIFByb3BlcnR5TGlua0Zvcm1hdC5SZWxhdGl2ZVBhdGg6XHJcblx0XHRcdGNhc2UgUHJvcGVydHlMaW5rRm9ybWF0LlBhdGg6XHJcblx0XHRcdGRlZmF1bHQ6XHJcblx0XHRcdFx0cmV0dXJuIHBhdGhUb1VzZTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldCByZWxhdGl2ZSBwYXRoIGZyb20gbm90ZSB0byBpbWFnZVxyXG5cdCAqL1xyXG5cdHByaXZhdGUgZ2V0UmVsYXRpdmVQYXRoKGZyb21GaWxlOiBURmlsZSwgdG9GaWxlOiBURmlsZSk6IHN0cmluZyB7XHJcblx0XHQvLyBJZiB1c2luZyB3aWtpbGlua3MsIHdlIGNhbiB1c2UganVzdCB0aGUgZmlsZSBuYW1lXHJcblx0XHQvLyBBY2Nlc3MgT2JzaWRpYW4ncyBpbnRlcm5hbCBjb25maWcgKG5vdCBpbiBwdWJsaWMgQVBJIHR5cGVzIGJ1dCBhY2Nlc3NpYmxlIGF0IHJ1bnRpbWUpXHJcblx0XHRjb25zdCB2YXVsdENvbmZpZyA9ICh0aGlzLmFwcC52YXVsdCBhcyB1bmtub3duIGFzIHsgY29uZmlnPzogeyB1c2VNYXJrZG93bkxpbmtzPzogYm9vbGVhbiB9IH0pLmNvbmZpZztcclxuXHRcdGNvbnN0IHVzZU1hcmtkb3duTGlua3MgPSB2YXVsdENvbmZpZz8udXNlTWFya2Rvd25MaW5rcyA/PyBmYWxzZTtcclxuXHRcdGNvbnN0IHVzZVdpa2lsaW5rcyA9ICF1c2VNYXJrZG93bkxpbmtzO1xyXG5cclxuXHRcdGlmICh1c2VXaWtpbGlua3MgJiYgdGhpcy5zZXR0aW5ncy5wcm9wZXJ0eUxpbmtGb3JtYXQgPT09IFByb3BlcnR5TGlua0Zvcm1hdC5XaWtpbGluaykge1xyXG5cdFx0XHQvLyBGb3Igd2lraWxpbmtzLCBqdXN0IHVzZSB0aGUgZmlsZSBuYW1lXHJcblx0XHRcdHJldHVybiB0b0ZpbGUubmFtZTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBGb3IgbWFya2Rvd24gbGlua3MgYW5kIHBhdGhzLCB1c2UgcmVsYXRpdmUgcGF0aFxyXG5cdFx0cmV0dXJuIHRoaXMuc3RvcmFnZU1hbmFnZXIuZ2V0UmVsYXRpdmVQYXRoKGZyb21GaWxlLCB0b0ZpbGUpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogR2V0IHRoZSBjdXJyZW50IHZhbHVlIG9mIGEgcHJvcGVydHlcclxuXHQgKi9cclxuXHRnZXRQcm9wZXJ0eVZhbHVlKFxyXG5cdFx0ZmlsZTogVEZpbGUsXHJcblx0XHRwcm9wZXJ0eU5hbWU6IHN0cmluZ1xyXG5cdCk6IHVua25vd24ge1xyXG5cdFx0Y29uc3QgY2FjaGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKTtcclxuXHRcdHJldHVybiBjYWNoZT8uZnJvbnRtYXR0ZXI/Lltwcm9wZXJ0eU5hbWVdO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2hlY2sgaWYgYSBwcm9wZXJ0eSBleGlzdHMgaW4gZnJvbnRtYXR0ZXJcclxuXHQgKi9cclxuXHRoYXNQcm9wZXJ0eShmaWxlOiBURmlsZSwgcHJvcGVydHlOYW1lOiBzdHJpbmcpOiBib29sZWFuIHtcclxuXHRcdGNvbnN0IGNhY2hlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XHJcblx0XHRyZXR1cm4gY2FjaGU/LmZyb250bWF0dGVyPy5bcHJvcGVydHlOYW1lXSAhPT0gdW5kZWZpbmVkO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogSW5zZXJ0IGFuIGltYWdlIGZyb20gYSBVUkwgaW50byBhIHByb3BlcnR5XHJcblx0ICogRG93bmxvYWRzIHRoZSBpbWFnZSwgc2F2ZXMgaXQgbG9jYWxseSwgYW5kIHNldHMgdGhlIHByb3BlcnR5XHJcblx0ICogQHBhcmFtIHJlbW90ZUltYWdlIE9wdGlvbmFsIFJlbW90ZUltYWdlIG9iamVjdCBmb3IgZ2VuZXJhdGluZyByZWZlcnJhbCB0ZXh0XHJcblx0ICogQHBhcmFtIHN1Z2dlc3RlZE5hbWVPdmVycmlkZSBPcHRpb25hbCBvdmVycmlkZSBmb3Igc3VnZ2VzdGVkIG5hbWUgKGUuZy4sIGZyb20gc2VhcmNoIHRlcm0pXHJcblx0ICovXHJcblx0YXN5bmMgaW5zZXJ0SW1hZ2VGcm9tVXJsKFxyXG5cdFx0aW1hZ2VVcmw6IHN0cmluZyxcclxuXHRcdG5vdGVGaWxlOiBURmlsZSxcclxuXHRcdHByb3BlcnR5TmFtZTogc3RyaW5nLFxyXG5cdFx0cmVtb3RlSW1hZ2U/OiBSZW1vdGVJbWFnZSxcclxuXHRcdHN1Z2dlc3RlZE5hbWVPdmVycmlkZT86IHN0cmluZ1xyXG5cdCk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0Ly8gVXNlIEltYWdlUHJvY2Vzc29yIHRvIGhhbmRsZSB0aGUgZG93bmxvYWQgYW5kIHNhdmVcclxuXHRcdC8vIFRoaXMgZW5zdXJlcyBjb25zaXN0ZW50IG5hbWluZywgZGVkdXBsaWNhdGlvbiwgYW5kIHJlbmFtZSBtb2RhbCBoYW5kbGluZ1xyXG5cdFx0Ly8gU2tpcCBkZXNjcmlwdGl2ZSBpbWFnZXMgZm9yIHByb3BlcnR5IGluc2VydGlvbnMgKGRpc3BsYXkgdGV4dCBkb2Vzbid0IGFwcGx5IHRvIHByb3BlcnRpZXMpXHJcblx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmltYWdlUHJvY2Vzc29yLnByb2Nlc3NJbWFnZVVybChcclxuXHRcdFx0aW1hZ2VVcmwsXHJcblx0XHRcdG5vdGVGaWxlLFxyXG5cdFx0XHR0cnVlLCAvLyBTaG93IHJlbmFtZSBtb2RhbCBpZiBlbmFibGVkXHJcblx0XHRcdHRydWUsIC8vIGlzUHJvcGVydHlJbnNlcnRpb24gLSBza2lwIGRlc2NyaXB0aXZlIGltYWdlc1xyXG5cdFx0XHRzdWdnZXN0ZWROYW1lT3ZlcnJpZGUgLy8gUGFzcyBzZWFyY2ggdGVybSBhcyBzdWdnZXN0ZWQgbmFtZVxyXG5cdFx0KTtcclxuXHJcblx0XHRpZiAoIXJlc3VsdC5zdWNjZXNzIHx8ICFyZXN1bHQuZmlsZSkge1xyXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IocmVzdWx0LmVycm9yIHx8ICdGYWlsZWQgdG8gcHJvY2VzcyBpbWFnZScpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFNldCB0aGUgcHJvcGVydHlcclxuXHRcdGF3YWl0IHRoaXMuc2V0UHJvcGVydHlWYWx1ZShub3RlRmlsZSwgcHJvcGVydHlOYW1lLCByZXN1bHQuZmlsZSwgcmVzdWx0LmRlc2NyaXB0aW9uKTtcclxuXHJcblx0XHQvLyBBcHBlbmQgcmVmZXJyYWwgdGV4dCBhdCBlbmQgb2YgZmlsZSBpZiBlbmFibGVkIGFuZCB3ZSBoYXZlIFJlbW90ZUltYWdlIGluZm9cclxuXHRcdGlmICh0aGlzLnNldHRpbmdzLmFwcGVuZFJlZmVycmFsICYmIHJlbW90ZUltYWdlICYmIHRoaXMucmVtb3RlU2VydmljZSkge1xyXG5cdFx0XHRjb25zdCByZWZlcnJhbFRleHQgPSB0aGlzLnJlbW90ZVNlcnZpY2UuZ2VuZXJhdGVSZWZlcnJhbFRleHQocmVtb3RlSW1hZ2UpO1xyXG5cdFx0XHRpZiAocmVmZXJyYWxUZXh0KSB7XHJcblx0XHRcdFx0Y29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQobm90ZUZpbGUpO1xyXG5cdFx0XHRcdGNvbnN0IHVwZGF0ZWRDb250ZW50ID0gY29udGVudCArIHJlZmVycmFsVGV4dDtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLmFwcC52YXVsdC5tb2RpZnkobm90ZUZpbGUsIHVwZGF0ZWRDb250ZW50KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufVxyXG4iLCAiLyoqXHJcbiAqIE1EWCBGcm9udG1hdHRlciBVdGlsaXRpZXNcclxuICogTWFudWFsIGZyb250bWF0dGVyIHBhcnNpbmcgYW5kIG1vZGlmaWNhdGlvbiBmb3IgTURYIGZpbGVzXHJcbiAqIE9ic2lkaWFuJ3MgbWV0YWRhdGFDYWNoZSBhbmQgcHJvY2Vzc0Zyb250TWF0dGVyIG9ubHkgd29yayBmb3IgLm1kIGZpbGVzXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQXBwLCBURmlsZSwgcGFyc2VZYW1sLCBzdHJpbmdpZnlZYW1sIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuLyoqXHJcbiAqIENoZWNrIGlmIGEgZmlsZSBpcyBhbiBNRFggZmlsZVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGlzTWR4RmlsZShmaWxlOiBURmlsZSk6IGJvb2xlYW4ge1xyXG5cdHJldHVybiBmaWxlLmV4dGVuc2lvbiA9PT0gJ21keCc7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiBhIGZpbGUgaXMgYSBtYXJrZG93biBmaWxlIChNRCBvciBNRFgpXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaXNNYXJrZG93bkZpbGUoZmlsZTogVEZpbGUpOiBib29sZWFuIHtcclxuXHRyZXR1cm4gZmlsZS5leHRlbnNpb24gPT09ICdtZCcgfHwgZmlsZS5leHRlbnNpb24gPT09ICdtZHgnO1xyXG59XHJcblxyXG4vKipcclxuICogUGFyc2UgZnJvbnRtYXR0ZXIgZnJvbSByYXcgZmlsZSBjb250ZW50XHJcbiAqIFJldHVybnMgdGhlIGZyb250bWF0dGVyIG9iamVjdCBhbmQgdGhlIGJvZHkgY29udGVudCBzZXBhcmF0ZWx5XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VNZHhGcm9udG1hdHRlcihcclxuXHRjb250ZW50OiBzdHJpbmdcclxuKTogeyBmcm9udG1hdHRlcjogUmVjb3JkPHN0cmluZywgdW5rbm93bj47IGJvZHk6IHN0cmluZyB9IHwgbnVsbCB7XHJcblx0Y29uc3QgZnJvbnRtYXR0ZXJSZWdleCA9IC9eLS0tXFxyP1xcbihbXFxzXFxTXSo/KVxccj9cXG4tLS1cXHI/XFxuLztcclxuXHRjb25zdCBtYXRjaCA9IGNvbnRlbnQubWF0Y2goZnJvbnRtYXR0ZXJSZWdleCk7XHJcblxyXG5cdGlmICghbWF0Y2gpIHtcclxuXHRcdC8vIE5vIGZyb250bWF0dGVyIGZvdW5kXHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRmcm9udG1hdHRlcjoge30sXHJcblx0XHRcdGJvZHk6IGNvbnRlbnQsXHJcblx0XHR9O1xyXG5cdH1cclxuXHJcblx0Y29uc3QgZnJvbnRtYXR0ZXJUZXh0ID0gbWF0Y2hbMV0gPz8gJyc7XHJcblx0Y29uc3QgYm9keUNvbnRlbnQgPSBjb250ZW50LnNsaWNlKG1hdGNoWzBdLmxlbmd0aCk7XHJcblxyXG5cdHRyeSB7XHJcblx0XHRjb25zdCBwYXJzZWQgPSBwYXJzZVlhbWwoZnJvbnRtYXR0ZXJUZXh0KSBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB8IG51bGwgfCB1bmRlZmluZWQ7XHJcblx0XHRjb25zdCBmcm9udG1hdHRlciA9IHBhcnNlZCAmJiB0eXBlb2YgcGFyc2VkID09PSAnb2JqZWN0JyA/IHBhcnNlZCA6IHt9O1xyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0ZnJvbnRtYXR0ZXIsXHJcblx0XHRcdGJvZHk6IGJvZHlDb250ZW50LFxyXG5cdFx0fTtcclxuXHR9IGNhdGNoIChlKSB7XHJcblx0XHRjb25zb2xlLmVycm9yKCdFcnJvciBwYXJzaW5nIE1EWCBwcm9wZXJ0aWVzOicsIGUpO1xyXG5cdFx0Ly8gUmV0dXJuIGVtcHR5IGZyb250bWF0dGVyIGJ1dCBwcmVzZXJ2ZSBib2R5XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRmcm9udG1hdHRlcjoge30sXHJcblx0XHRcdGJvZHk6IGJvZHlDb250ZW50LFxyXG5cdFx0fTtcclxuXHR9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZWFkIGFuZCBwYXJzZSBmcm9udG1hdHRlciBmcm9tIGFuIE1EWCBmaWxlXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVhZE1keEZyb250bWF0dGVyKFxyXG5cdGFwcDogQXBwLFxyXG5cdGZpbGU6IFRGaWxlXHJcbik6IFByb21pc2U8UmVjb3JkPHN0cmluZywgdW5rbm93bj4gfCBudWxsPiB7XHJcblx0aWYgKCFpc01keEZpbGUoZmlsZSkpIHtcclxuXHRcdHJldHVybiBudWxsO1xyXG5cdH1cclxuXHJcblx0dHJ5IHtcclxuXHRcdGNvbnN0IGNvbnRlbnQgPSBhd2FpdCBhcHAudmF1bHQucmVhZChmaWxlKTtcclxuXHRcdGNvbnN0IHBhcnNlZCA9IHBhcnNlTWR4RnJvbnRtYXR0ZXIoY29udGVudCk7XHJcblx0XHRyZXR1cm4gcGFyc2VkID8gcGFyc2VkLmZyb250bWF0dGVyIDogbnVsbDtcclxuXHR9IGNhdGNoIChlKSB7XHJcblx0XHRjb25zb2xlLmVycm9yKGBFcnJvciByZWFkaW5nIE1EWCBwcm9wZXJ0aWVzIGZyb20gJHtmaWxlLnBhdGh9OmAsIGUpO1xyXG5cdFx0cmV0dXJuIG51bGw7XHJcblx0fVxyXG59XHJcblxyXG4vKipcclxuICogV3JpdGUgdXBkYXRlZCBmcm9udG1hdHRlciB0byBhbiBNRFggZmlsZVxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHdyaXRlTWR4RnJvbnRtYXR0ZXIoXHJcblx0YXBwOiBBcHAsXHJcblx0ZmlsZTogVEZpbGUsXHJcblx0ZnJvbnRtYXR0ZXI6IFJlY29yZDxzdHJpbmcsIHVua25vd24+XHJcbik6IFByb21pc2U8dm9pZD4ge1xyXG5cdGlmICghaXNNZHhGaWxlKGZpbGUpKSB7XHJcblx0XHR0aHJvdyBuZXcgRXJyb3IoYEZpbGUgJHtmaWxlLnBhdGh9IGlzIG5vdCBhbiBNRFggZmlsZWApO1xyXG5cdH1cclxuXHJcblx0dHJ5IHtcclxuXHRcdGNvbnN0IGNvbnRlbnQgPSBhd2FpdCBhcHAudmF1bHQucmVhZChmaWxlKTtcclxuXHRcdGNvbnN0IHBhcnNlZCA9IHBhcnNlTWR4RnJvbnRtYXR0ZXIoY29udGVudCk7XHJcblxyXG5cdFx0aWYgKCFwYXJzZWQpIHtcclxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gcGFyc2UgZXhpc3RpbmcgZnJvbnRtYXR0ZXInKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBTdHJpbmdpZnkgdGhlIHVwZGF0ZWQgZnJvbnRtYXR0ZXJcclxuXHRcdGNvbnN0IG5ld0Zyb250bWF0dGVyVGV4dCA9IHN0cmluZ2lmeVlhbWwoZnJvbnRtYXR0ZXIpLnRyaW0oKTtcclxuXHJcblx0XHQvLyBSZWNvbnN0cnVjdCBmaWxlIGNvbnRlbnRcclxuXHRcdGNvbnN0IG5ld0NvbnRlbnQgPSBgLS0tXFxuJHtuZXdGcm9udG1hdHRlclRleHR9XFxuLS0tXFxuJHtwYXJzZWQuYm9keX1gO1xyXG5cclxuXHRcdC8vIFdyaXRlIGJhY2sgdG8gZmlsZVxyXG5cdFx0YXdhaXQgYXBwLnZhdWx0Lm1vZGlmeShmaWxlLCBuZXdDb250ZW50KTtcclxuXHR9IGNhdGNoIChlKSB7XHJcblx0XHRjb25zb2xlLmVycm9yKGBFcnJvciB3cml0aW5nIE1EWCBwcm9wZXJ0aWVzIHRvICR7ZmlsZS5wYXRofTpgLCBlKTtcclxuXHRcdHRocm93IGU7XHJcblx0fVxyXG59XHJcblxyXG4vKipcclxuICogUHJvY2VzcyBmcm9udG1hdHRlciBmb3IgYW4gTURYIGZpbGUgKHNpbWlsYXIgQVBJIHRvIHByb2Nlc3NGcm9udE1hdHRlcilcclxuICogVGhlIGNhbGxiYWNrIHJlY2VpdmVzIHRoZSBmcm9udG1hdHRlciBvYmplY3QgYW5kIGNhbiBtb2RpZnkgaXRcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcm9jZXNzTWR4RnJvbnRNYXR0ZXIoXHJcblx0YXBwOiBBcHAsXHJcblx0ZmlsZTogVEZpbGUsXHJcblx0Y2FsbGJhY2s6IChmcm9udG1hdHRlcjogUmVjb3JkPHN0cmluZywgdW5rbm93bj4pID0+IHZvaWRcclxuKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0aWYgKCFpc01keEZpbGUoZmlsZSkpIHtcclxuXHRcdHRocm93IG5ldyBFcnJvcihgRmlsZSAke2ZpbGUucGF0aH0gaXMgbm90IGFuIE1EWCBmaWxlYCk7XHJcblx0fVxyXG5cclxuXHR0cnkge1xyXG5cdFx0Y29uc3QgY29udGVudCA9IGF3YWl0IGFwcC52YXVsdC5yZWFkKGZpbGUpO1xyXG5cdFx0Y29uc3QgcGFyc2VkID0gcGFyc2VNZHhGcm9udG1hdHRlcihjb250ZW50KTtcclxuXHJcblx0XHRpZiAoIXBhcnNlZCkge1xyXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBwYXJzZSBleGlzdGluZyBmcm9udG1hdHRlcicpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENyZWF0ZSBhIGNvcHkgb2YgdGhlIGZyb250bWF0dGVyIGZvciB0aGUgY2FsbGJhY2sgdG8gbW9kaWZ5XHJcblx0XHRjb25zdCBmcm9udG1hdHRlciA9IHsgLi4ucGFyc2VkLmZyb250bWF0dGVyIH07XHJcblxyXG5cdFx0Ly8gQ2FsbCB0aGUgY2FsbGJhY2sgdG8gbW9kaWZ5IGZyb250bWF0dGVyXHJcblx0XHRjYWxsYmFjayhmcm9udG1hdHRlcik7XHJcblxyXG5cdFx0Ly8gU3RyaW5naWZ5IHRoZSB1cGRhdGVkIGZyb250bWF0dGVyXHJcblx0XHRjb25zdCBuZXdGcm9udG1hdHRlclRleHQgPSBzdHJpbmdpZnlZYW1sKGZyb250bWF0dGVyKS50cmltKCk7XHJcblxyXG5cdFx0Ly8gUmVjb25zdHJ1Y3QgZmlsZSBjb250ZW50XHJcblx0XHRjb25zdCBuZXdDb250ZW50ID0gYC0tLVxcbiR7bmV3RnJvbnRtYXR0ZXJUZXh0fVxcbi0tLVxcbiR7cGFyc2VkLmJvZHl9YDtcclxuXHJcblx0XHQvLyBXcml0ZSBiYWNrIHRvIGZpbGVcclxuXHRcdGF3YWl0IGFwcC52YXVsdC5tb2RpZnkoZmlsZSwgbmV3Q29udGVudCk7XHJcblx0fSBjYXRjaCAoZSkge1xyXG5cdFx0Y29uc29sZS5lcnJvcihgRXJyb3IgcHJvY2Vzc2luZyBNRFggcHJvcGVydGllcyBmb3IgJHtmaWxlLnBhdGh9OmAsIGUpO1xyXG5cdFx0dGhyb3cgZTtcclxuXHR9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgZnJvbnRtYXR0ZXIgZnJvbSBhbnkgbWFya2Rvd24gZmlsZSAoTUQgb3IgTURYKVxyXG4gKiBVc2VzIE9ic2lkaWFuJ3MgbWV0YWRhdGFDYWNoZSBmb3IgTUQgZmlsZXMsIG1hbnVhbCBwYXJzaW5nIGZvciBNRFhcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRGcm9udG1hdHRlcihcclxuXHRhcHA6IEFwcCxcclxuXHRmaWxlOiBURmlsZVxyXG4pOiBQcm9taXNlPFJlY29yZDxzdHJpbmcsIHVua25vd24+IHwgbnVsbD4ge1xyXG5cdGlmIChpc01keEZpbGUoZmlsZSkpIHtcclxuXHRcdHJldHVybiBhd2FpdCByZWFkTWR4RnJvbnRtYXR0ZXIoYXBwLCBmaWxlKTtcclxuXHR9XHJcblx0XHJcblx0Ly8gRm9yIE1EIGZpbGVzLCB1c2UgT2JzaWRpYW4ncyBtZXRhZGF0YSBjYWNoZVxyXG5cdGNvbnN0IGNhY2hlID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xyXG5cdHJldHVybiBjYWNoZT8uZnJvbnRtYXR0ZXIgPz8gbnVsbDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFByb2Nlc3MgZnJvbnRtYXR0ZXIgZm9yIGFueSBtYXJrZG93biBmaWxlIChNRCBvciBNRFgpXHJcbiAqIFVzZXMgT2JzaWRpYW4ncyBwcm9jZXNzRnJvbnRNYXR0ZXIgZm9yIE1EIGZpbGVzLCBjdXN0b20gaGFuZGxpbmcgZm9yIE1EWFxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NGcm9udG1hdHRlcihcclxuXHRhcHA6IEFwcCxcclxuXHRmaWxlOiBURmlsZSxcclxuXHRjYWxsYmFjazogKGZyb250bWF0dGVyOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPikgPT4gdm9pZFxyXG4pOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRpZiAoaXNNZHhGaWxlKGZpbGUpKSB7XHJcblx0XHRhd2FpdCBwcm9jZXNzTWR4RnJvbnRNYXR0ZXIoYXBwLCBmaWxlLCBjYWxsYmFjayk7XHJcblx0fSBlbHNlIHtcclxuXHRcdGF3YWl0IGFwcC5maWxlTWFuYWdlci5wcm9jZXNzRnJvbnRNYXR0ZXIoZmlsZSwgY2FsbGJhY2spO1xyXG5cdH1cclxufVxyXG4iLCAiLyoqXHJcbiAqIFBhc3RlIEhhbmRsZXIgU2VydmljZVxyXG4gKiBIYW5kbGVzIHBhc3RlIGV2ZW50cyBmb3IgaW1hZ2VzIGluIHRoZSBlZGl0b3IgYW5kIGZyb250bWF0dGVyIHByb3BlcnRpZXNcclxuICovXHJcblxyXG5pbXBvcnQgeyBBcHAsIE1hcmtkb3duVmlldywgTm90aWNlLCBFZGl0b3IgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IEltYWdlTWFuYWdlclNldHRpbmdzIH0gZnJvbSAnLi4vdHlwZXMnO1xyXG5pbXBvcnQgeyBJbWFnZVByb2Nlc3NvciB9IGZyb20gJy4vSW1hZ2VQcm9jZXNzb3InO1xyXG5pbXBvcnQgeyBQcm9wZXJ0eUhhbmRsZXIgfSBmcm9tICcuL1Byb3BlcnR5SGFuZGxlcic7XHJcblxyXG5leHBvcnQgY2xhc3MgUGFzdGVIYW5kbGVyIHtcclxuXHRwcml2YXRlIGFwcDogQXBwO1xyXG5cdHByaXZhdGUgc2V0dGluZ3M6IEltYWdlTWFuYWdlclNldHRpbmdzO1xyXG5cdHByaXZhdGUgaW1hZ2VQcm9jZXNzb3I6IEltYWdlUHJvY2Vzc29yO1xyXG5cdHByaXZhdGUgcHJvcGVydHlIYW5kbGVyOiBQcm9wZXJ0eUhhbmRsZXI7XHJcblxyXG5cdGNvbnN0cnVjdG9yKFxyXG5cdFx0YXBwOiBBcHAsXHJcblx0XHRzZXR0aW5nczogSW1hZ2VNYW5hZ2VyU2V0dGluZ3MsXHJcblx0XHRpbWFnZVByb2Nlc3NvcjogSW1hZ2VQcm9jZXNzb3IsXHJcblx0XHRwcm9wZXJ0eUhhbmRsZXI6IFByb3BlcnR5SGFuZGxlcixcclxuXHRcdG9ic2VydmFibGU/OiB7IHN1YnNjcmliZShmbjogKHNldHRpbmdzOiBJbWFnZU1hbmFnZXJTZXR0aW5ncykgPT4gdm9pZCk6IHZvaWQgfVxyXG5cdCkge1xyXG5cdFx0dGhpcy5hcHAgPSBhcHA7XHJcblx0XHR0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XHJcblx0XHR0aGlzLmltYWdlUHJvY2Vzc29yID0gaW1hZ2VQcm9jZXNzb3I7XHJcblx0XHR0aGlzLnByb3BlcnR5SGFuZGxlciA9IHByb3BlcnR5SGFuZGxlcjtcclxuXHJcblx0XHQvLyBTdWJzY3JpYmUgdG8gc2V0dGluZ3MgdXBkYXRlcyBpZiBvYnNlcnZhYmxlIGlzIHByb3ZpZGVkXHJcblx0XHRvYnNlcnZhYmxlPy5zdWJzY3JpYmUoKG5ld1NldHRpbmdzKSA9PiB7XHJcblx0XHRcdHRoaXMudXBkYXRlU2V0dGluZ3MobmV3U2V0dGluZ3MpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBVcGRhdGUgc2V0dGluZ3MgcmVmZXJlbmNlXHJcblx0ICovXHJcblx0dXBkYXRlU2V0dGluZ3Moc2V0dGluZ3M6IEltYWdlTWFuYWdlclNldHRpbmdzKTogdm9pZCB7XHJcblx0XHR0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBIYW5kbGUgZWRpdG9yIHBhc3RlIGV2ZW50XHJcblx0ICogVGhpcyBpcyByZWdpc3RlcmVkIHZpYSB3b3Jrc3BhY2Uub24oJ2VkaXRvci1wYXN0ZScpXHJcblx0ICovXHJcblx0YXN5bmMgaGFuZGxlRWRpdG9yUGFzdGUoXHJcblx0XHRldnQ6IENsaXBib2FyZEV2ZW50LFxyXG5cdFx0ZWRpdG9yOiBFZGl0b3IsXHJcblx0XHR2aWV3OiBNYXJrZG93blZpZXdcclxuXHQpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuXHRcdGlmICghdGhpcy5zZXR0aW5ncy5zaG93UmVuYW1lRGlhbG9nIHx8ICF0aGlzLnNldHRpbmdzLmVuYWJsZVJlbmFtZU9uUGFzdGUpIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlOyAvLyBMZXQgT2JzaWRpYW4gaGFuZGxlIGl0XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQ2hlY2sgaWYgd2UncmUgaW4gYSBmcm9udG1hdHRlciBwcm9wZXJ0eSBmaWVsZCAtIGlmIHNvLCBsZXQgcHJvcGVydHkgcGFzdGUgaGFuZGxlciB0YWtlIG92ZXJcclxuXHRcdGNvbnN0IGFjdGl2ZUVsID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCBhcyBIVE1MRWxlbWVudDtcclxuXHRcdGlmIChhY3RpdmVFbCAmJiB0aGlzLmlzRnJvbnRtYXR0ZXJGaWVsZChhY3RpdmVFbCkpIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlOyAvLyBMZXQgcHJvcGVydHkgcGFzdGUgaGFuZGxlciBoYW5kbGUgaXRcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCBmaWxlcyA9IGV2dC5jbGlwYm9hcmREYXRhPy5maWxlcztcclxuXHRcdGlmICghZmlsZXMgfHwgZmlsZXMubGVuZ3RoID09PSAwKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTsgLy8gTm8gZmlsZXMsIGxldCBPYnNpZGlhbiBoYW5kbGUgaXRcclxuXHRcdH1cclxuXHJcblx0XHQvLyBDaGVjayBpZiBhbnkgb2YgdGhlIGZpbGVzIGFyZSBpbWFnZXNcclxuXHRcdGNvbnN0IGltYWdlRmlsZXM6IEZpbGVbXSA9IFtdO1xyXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBmaWxlcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRjb25zdCBmaWxlID0gZmlsZXMuaXRlbShpKTtcclxuXHRcdFx0aWYgKGZpbGUgJiYgZmlsZS50eXBlLnN0YXJ0c1dpdGgoJ2ltYWdlLycpKSB7XHJcblx0XHRcdFx0aW1hZ2VGaWxlcy5wdXNoKGZpbGUpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKGltYWdlRmlsZXMubGVuZ3RoID09PSAwKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTsgLy8gTm8gaW1hZ2VzLCBsZXQgT2JzaWRpYW4gaGFuZGxlIGl0XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gV2UncmUgaGFuZGxpbmcgdGhpcyAtIHByZXZlbnQgZGVmYXVsdFxyXG5cdFx0ZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG5cdFx0Y29uc3QgYWN0aXZlRmlsZSA9IHZpZXcuZmlsZTtcclxuXHRcdGlmICghYWN0aXZlRmlsZSkge1xyXG5cdFx0XHRuZXcgTm90aWNlKCdObyBhY3RpdmUgZmlsZScpO1xyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBQcm9jZXNzIGVhY2ggaW1hZ2VcclxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgaW1hZ2VGaWxlcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRjb25zdCBpbWFnZUZpbGUgPSBpbWFnZUZpbGVzW2ldO1xyXG5cdFx0XHRpZiAoIWltYWdlRmlsZSkgY29udGludWU7XHJcblxyXG5cdFx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmltYWdlUHJvY2Vzc29yLnByb2Nlc3NJbWFnZUZpbGUoXHJcblx0XHRcdFx0aW1hZ2VGaWxlLFxyXG5cdFx0XHRcdGFjdGl2ZUZpbGUsXHJcblx0XHRcdFx0dHJ1ZSAvLyBTaG93IHJlbmFtZSBtb2RhbFxyXG5cdFx0XHQpO1xyXG5cclxuXHRcdFx0aWYgKHJlc3VsdC5zdWNjZXNzICYmIHJlc3VsdC5saW5rVGV4dCkge1xyXG5cdFx0XHRcdC8vIEluc2VydCB0aGUgbGluayBhdCBjdXJzb3JcclxuXHRcdFx0XHRlZGl0b3IucmVwbGFjZVNlbGVjdGlvbihyZXN1bHQubGlua1RleHQpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRydWU7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBIYW5kbGUgcGFzdGUgaW50byBmcm9udG1hdHRlciBwcm9wZXJ0eVxyXG5cdCAqIFRoaXMgaXMgcmVnaXN0ZXJlZCB2aWEgZG9jdW1lbnQgcGFzdGUgZXZlbnQgd2l0aCBwcm9wZXJ0eSBkZXRlY3Rpb25cclxuXHQgKi9cclxuXHRhc3luYyBoYW5kbGVQcm9wZXJ0eVBhc3RlKGV2dDogQ2xpcGJvYXJkRXZlbnQpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuXHRcdGlmICghdGhpcy5zZXR0aW5ncy5zaG93UmVuYW1lRGlhbG9nIHx8ICF0aGlzLnNldHRpbmdzLmVuYWJsZVByb3BlcnR5UGFzdGUpIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IGFjdGl2ZUVsID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCBhcyBIVE1MRWxlbWVudDtcclxuXHRcdGlmICghYWN0aXZlRWwpIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENoZWNrIGlmIHdlJ3JlIGluIGEgZnJvbnRtYXR0ZXIgcHJvcGVydHkgZmllbGRcclxuXHRcdGlmICghdGhpcy5pc0Zyb250bWF0dGVyRmllbGQoYWN0aXZlRWwpKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBEZWJ1ZzogTG9nIHRoYXQgd2UgZGV0ZWN0ZWQgYSBwcm9wZXJ0eSBmaWVsZFxyXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MuZGVidWdNb2RlKSB7XHJcblx0XHRcdGNvbnNvbGUuZGVidWcoJ1tJbWFnZSBNYW5hZ2VyXSBQcm9wZXJ0eSBwYXN0ZSBkZXRlY3RlZCcsIHtcclxuXHRcdFx0XHRhY3RpdmVFbGVtZW50OiBhY3RpdmVFbC50YWdOYW1lLFxyXG5cdFx0XHRcdGNsYXNzZXM6IGFjdGl2ZUVsLmNsYXNzTmFtZSxcclxuXHRcdFx0XHRwcm9wZXJ0eU5hbWU6IHRoaXMuZ2V0UHJvcGVydHlOYW1lKGFjdGl2ZUVsKVxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCBmaWxlcyA9IGV2dC5jbGlwYm9hcmREYXRhPy5maWxlcztcclxuXHRcdGlmICghZmlsZXMgfHwgZmlsZXMubGVuZ3RoID09PSAwKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBDaGVjayBmb3IgaW1hZ2UgZmlsZXNcclxuXHRcdGxldCBpbWFnZUZpbGU6IEZpbGUgfCBudWxsID0gbnVsbDtcclxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgZmlsZXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0Y29uc3QgZiA9IGZpbGVzLml0ZW0oaSk7XHJcblx0XHRcdGlmIChmICYmIGYudHlwZS5zdGFydHNXaXRoKCdpbWFnZS8nKSkge1xyXG5cdFx0XHRcdGltYWdlRmlsZSA9IGY7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIWltYWdlRmlsZSkge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gRG91YmxlLWNoZWNrIHdlJ3JlIHN0aWxsIGluIGEgcHJvcGVydHkgZmllbGQgKGVsZW1lbnQgbWlnaHQgaGF2ZSBjaGFuZ2VkKVxyXG5cdFx0Ly8gYW5kIHRoYXQgd2UgaGF2ZSBhbiBhY3RpdmUgZmlsZSBiZWZvcmUgcHJldmVudGluZyBkZWZhdWx0XHJcblx0XHRjb25zdCBjdXJyZW50RWwgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50IGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0aWYgKCFjdXJyZW50RWwgfHwgIXRoaXMuaXNGcm9udG1hdHRlckZpZWxkKGN1cnJlbnRFbCkpIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xyXG5cdFx0aWYgKCFhY3RpdmVGaWxlKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBXZSdyZSBoYW5kbGluZyB0aGlzIC0gc3RvcCBhbGwgcHJvcGFnYXRpb25cclxuXHRcdGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0ZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0ZXZ0LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG5cclxuXHRcdC8vIEdldCB0aGUgcHJvcGVydHkgbmFtZSBiZWZvcmUgcHJvY2Vzc2luZ1xyXG5cdFx0Y29uc3QgcHJvcGVydHlOYW1lID0gdGhpcy5nZXRQcm9wZXJ0eU5hbWUoY3VycmVudEVsKTtcclxuXHRcdGlmICghcHJvcGVydHlOYW1lKSB7XHJcblx0XHRcdG5ldyBOb3RpY2UoJ0NvdWxkIG5vdCBkZXRlcm1pbmUgcHJvcGVydHkgbmFtZScpO1xyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBQcm9jZXNzIHRoZSBpbWFnZSAtIHNob3cgcmVuYW1lIG1vZGFsIGZvciBwcm9wZXJ0eSBwYXN0ZVxyXG5cdFx0Ly8gU2tpcCBkZXNjcmlwdGl2ZSBpbWFnZXMgZm9yIHByb3BlcnR5IGluc2VydGlvbnMgKGRpc3BsYXkgdGV4dCBkb2Vzbid0IGFwcGx5IHRvIHByb3BlcnRpZXMpXHJcblx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmltYWdlUHJvY2Vzc29yLnByb2Nlc3NJbWFnZUZpbGUoXHJcblx0XHRcdGltYWdlRmlsZSxcclxuXHRcdFx0YWN0aXZlRmlsZSxcclxuXHRcdFx0dHJ1ZSwgLy8gU2hvdyByZW5hbWUgbW9kYWwgZm9yIHByb3BlcnR5IHBhc3RlXHJcblx0XHRcdHRydWUgLy8gaXNQcm9wZXJ0eUluc2VydGlvbiAtIHNraXAgZGVzY3JpcHRpdmUgaW1hZ2VzXHJcblx0XHQpO1xyXG5cclxuXHRcdGlmIChyZXN1bHQuc3VjY2VzcyAmJiByZXN1bHQuZmlsZSkge1xyXG5cdFx0XHQvLyBHZXQgdGhlIGZvcm1hdHRlZCBsaW5rIHZhbHVlXHJcblx0XHRcdGNvbnN0IGxpbmtWYWx1ZSA9IHRoaXMucHJvcGVydHlIYW5kbGVyLmZvcm1hdFByb3BlcnR5TGluayhyZXN1bHQuZmlsZSwgYWN0aXZlRmlsZSk7XHJcblxyXG5cdFx0XHQvLyBVcGRhdGUgdGhlIGZyb250bWF0dGVyIHByb3BlcnR5IGRpcmVjdGx5XHJcblx0XHRcdGF3YWl0IHRoaXMucHJvcGVydHlIYW5kbGVyLnNldFByb3BlcnR5VmFsdWUoXHJcblx0XHRcdFx0YWN0aXZlRmlsZSxcclxuXHRcdFx0XHRwcm9wZXJ0eU5hbWUsXHJcblx0XHRcdFx0cmVzdWx0LmZpbGUsXHJcblx0XHRcdFx0cmVzdWx0LmRlc2NyaXB0aW9uXHJcblx0XHRcdCk7XHJcblxyXG5cdFx0XHQvLyBXYWl0IGZvciBPYnNpZGlhbiB0byBwcm9jZXNzIHRoZSBmaWxlIGNoYW5nZSBhbmQgdXBkYXRlIG1ldGFkYXRhIGNhY2hlXHJcblx0XHRcdGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAzMDApKTtcclxuXHJcblx0XHRcdC8vIFRyeSBtdWx0aXBsZSBhcHByb2FjaGVzIHRvIHVwZGF0ZSB0aGUgVUlcclxuXHRcdFx0Ly8gQXBwcm9hY2ggMTogRmluZCBhbmQgdXBkYXRlIHRoZSBpbnB1dCBmaWVsZCBkaXJlY3RseVxyXG5cdFx0XHRjb25zdCBwcm9wZXJ0eUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuXHRcdFx0XHRgLm1ldGFkYXRhLXByb3BlcnR5W2RhdGEtcHJvcGVydHkta2V5PVwiJHtwcm9wZXJ0eU5hbWV9XCJdYFxyXG5cdFx0XHQpO1xyXG5cclxuXHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MuZGVidWdNb2RlKSB7XHJcblx0XHRcdFx0Y29uc29sZS5kZWJ1ZygnW0ltYWdlIE1hbmFnZXJdIFVwZGF0aW5nIHByb3BlcnR5IFVJJywge1xyXG5cdFx0XHRcdFx0cHJvcGVydHlOYW1lLFxyXG5cdFx0XHRcdFx0bGlua1ZhbHVlLFxyXG5cdFx0XHRcdFx0cHJvcGVydHlFbEZvdW5kOiAhIXByb3BlcnR5RWxcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Y29uc3QgaW5wdXRFbCA9IHByb3BlcnR5RWw/LnF1ZXJ5U2VsZWN0b3IoXHJcblx0XHRcdFx0Jy5tZXRhZGF0YS1pbnB1dC1sb25ndGV4dCwgLm1ldGFkYXRhLWlucHV0LXRleHQsIGlucHV0Lm1ldGFkYXRhLWlucHV0LCB0ZXh0YXJlYS5tZXRhZGF0YS1pbnB1dCdcclxuXHRcdFx0KSBhcyBIVE1MRWxlbWVudCB8IEhUTUxJbnB1dEVsZW1lbnQgfCBIVE1MVGV4dEFyZWFFbGVtZW50IHwgbnVsbDtcclxuXHJcblx0XHRcdGlmIChpbnB1dEVsKSB7XHJcblx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MuZGVidWdNb2RlKSB7XHJcblx0XHRcdFx0XHRjb25zdCBjdXJyZW50VmFsdWUgPSBpbnB1dEVsIGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCB8fCBpbnB1dEVsIGluc3RhbmNlb2YgSFRNTFRleHRBcmVhRWxlbWVudFxyXG5cdFx0XHRcdFx0XHQ/IGlucHV0RWwudmFsdWVcclxuXHRcdFx0XHRcdFx0OiBpbnB1dEVsLnRleHRDb250ZW50IHx8IGlucHV0RWwuaW5uZXJUZXh0O1xyXG5cdFx0XHRcdFx0Y29uc29sZS5kZWJ1ZygnW0ltYWdlIE1hbmFnZXJdIEZvdW5kIGlucHV0IGZpZWxkLCB1cGRhdGluZyB2YWx1ZScsIHtcclxuXHRcdFx0XHRcdFx0ZWxlbWVudFR5cGU6IGlucHV0RWwudGFnTmFtZSxcclxuXHRcdFx0XHRcdFx0Y3VycmVudFZhbHVlLFxyXG5cdFx0XHRcdFx0XHRuZXdWYWx1ZTogbGlua1ZhbHVlXHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIEhhbmRsZSBib3RoIGlucHV0L3RleHRhcmVhIGVsZW1lbnRzIGFuZCBjb250ZW50ZWRpdGFibGUgZGl2c1xyXG5cdFx0XHRcdGlmIChpbnB1dEVsIGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCB8fCBpbnB1dEVsIGluc3RhbmNlb2YgSFRNTFRleHRBcmVhRWxlbWVudCkge1xyXG5cdFx0XHRcdFx0Ly8gU3RhbmRhcmQgaW5wdXQvdGV4dGFyZWFcclxuXHRcdFx0XHRcdGlucHV0RWwudmFsdWUgPSBsaW5rVmFsdWU7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdC8vIENvbnRlbnRlZGl0YWJsZSBkaXYgKHVzZWQgZm9yIGxvbmd0ZXh0IHByb3BlcnRpZXMpXHJcblx0XHRcdFx0XHRpbnB1dEVsLnRleHRDb250ZW50ID0gbGlua1ZhbHVlO1xyXG5cdFx0XHRcdFx0aW5wdXRFbC5pbm5lclRleHQgPSBsaW5rVmFsdWU7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBUcmlnZ2VyIG11bHRpcGxlIGV2ZW50cyB0byBlbnN1cmUgT2JzaWRpYW4gcmVjb2duaXplcyB0aGUgY2hhbmdlXHJcblx0XHRcdFx0Y29uc3QgaW5wdXRFdmVudCA9IG5ldyBFdmVudCgnaW5wdXQnLCB7IGJ1YmJsZXM6IHRydWUsIGNhbmNlbGFibGU6IHRydWUgfSk7XHJcblx0XHRcdFx0Y29uc3QgY2hhbmdlRXZlbnQgPSBuZXcgRXZlbnQoJ2NoYW5nZScsIHsgYnViYmxlczogdHJ1ZSwgY2FuY2VsYWJsZTogdHJ1ZSB9KTtcclxuXHRcdFx0XHRjb25zdCBibHVyRXZlbnQgPSBuZXcgRXZlbnQoJ2JsdXInLCB7IGJ1YmJsZXM6IHRydWUsIGNhbmNlbGFibGU6IHRydWUgfSk7XHJcblxyXG5cdFx0XHRcdGlucHV0RWwuZGlzcGF0Y2hFdmVudChpbnB1dEV2ZW50KTtcclxuXHJcblx0XHRcdFx0Ly8gU21hbGwgZGVsYXkgYmVmb3JlIGNoYW5nZSBldmVudFxyXG5cdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdFx0aW5wdXRFbC5kaXNwYXRjaEV2ZW50KGNoYW5nZUV2ZW50KTtcclxuXHJcblx0XHRcdFx0XHQvLyBGb2N1cyBhbmQgYmx1ciB0byB0cmlnZ2VyIE9ic2lkaWFuJ3MgdXBkYXRlIG1lY2hhbmlzbVxyXG5cdFx0XHRcdFx0aWYgKGlucHV0RWwgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xyXG5cdFx0XHRcdFx0XHRpbnB1dEVsLmZvY3VzKCk7XHJcblx0XHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGlucHV0RWwuYmx1cigpO1xyXG5cdFx0XHRcdFx0XHRcdGlucHV0RWwuZGlzcGF0Y2hFdmVudChibHVyRXZlbnQpO1xyXG5cclxuXHRcdFx0XHRcdFx0XHQvLyBGb2N1cyB0aGUgZWRpdG9yIHRvIGNvbXBsZXRlIHRoZSBhY3Rpb25cclxuXHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKHZpZXc/LmVkaXRvcikge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR2aWV3LmVkaXRvci5mb2N1cygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH0sIDUwKTtcclxuXHRcdFx0XHRcdFx0fSwgNTApO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0sIDUwKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyBJZiB3ZSBjYW4ndCBmaW5kIHRoZSBpbnB1dCwganVzdCBmb2N1cyB0aGUgZWRpdG9yXHJcblx0XHRcdFx0Y29uc3QgdmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XHJcblx0XHRcdFx0aWYgKHZpZXc/LmVkaXRvcikge1xyXG5cdFx0XHRcdFx0dmlldy5lZGl0b3IuZm9jdXMoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdHJ1ZTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENoZWNrIGlmIGFuIGVsZW1lbnQgaXMgYSBzdXBwb3J0ZWQgZnJvbnRtYXR0ZXIgZmllbGRcclxuXHQgKiBXb3JrcyBmb3IgYm90aCBNRCBhbmQgTURYIGZpbGVzXHJcblx0ICovXHJcblx0cHJpdmF0ZSBpc0Zyb250bWF0dGVyRmllbGQoZWxlbWVudDogSFRNTEVsZW1lbnQpOiBib29sZWFuIHtcclxuXHRcdC8vIENoZWNrIGlmIGVsZW1lbnQgaXMgaW5zaWRlIGEgbWV0YWRhdGEgcHJvcGVydHkgY29udGFpbmVyXHJcblx0XHRjb25zdCBwcm9wZXJ0eUVsID0gZWxlbWVudC5jbG9zZXN0KCcubWV0YWRhdGEtcHJvcGVydHknKTtcclxuXHRcdGlmICghcHJvcGVydHlFbCkge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQ2hlY2sgZm9yIHZhcmlvdXMgcHJvcGVydHkgaW5wdXQgdHlwZXMgdGhhdCBjYW4gYWNjZXB0IHRleHQvaW1hZ2VzXHJcblx0XHQvLyBPYnNpZGlhbiB1c2VzIGRpZmZlcmVudCBjbGFzc2VzIGZvciBkaWZmZXJlbnQgcHJvcGVydHkgdHlwZXNcclxuXHRcdC8vIExvbmd0ZXh0IHByb3BlcnRpZXMgdXNlIGNvbnRlbnRlZGl0YWJsZSBkaXZzLCBub3QgaW5wdXQvdGV4dGFyZWFcclxuXHRcdHJldHVybiAoXHJcblx0XHRcdGVsZW1lbnQubWF0Y2hlcygnLm1ldGFkYXRhLWlucHV0LWxvbmd0ZXh0JykgfHxcclxuXHRcdFx0ZWxlbWVudC5tYXRjaGVzKCcubWV0YWRhdGEtaW5wdXQtdGV4dCcpIHx8XHJcblx0XHRcdGVsZW1lbnQubWF0Y2hlcygnaW5wdXQubWV0YWRhdGEtaW5wdXQnKSB8fFxyXG5cdFx0XHRlbGVtZW50Lm1hdGNoZXMoJ3RleHRhcmVhLm1ldGFkYXRhLWlucHV0JykgfHxcclxuXHRcdFx0Ly8gQWxzbyBjaGVjayBpZiB0aGUgZWxlbWVudCBpdHNlbGYgaXMgYW4gaW5wdXQvdGV4dGFyZWEvZGl2IGluc2lkZSBhIHByb3BlcnR5XHJcblx0XHRcdCgoZWxlbWVudCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQgfHxcclxuXHRcdFx0XHRlbGVtZW50IGluc3RhbmNlb2YgSFRNTFRleHRBcmVhRWxlbWVudCB8fFxyXG5cdFx0XHRcdChlbGVtZW50IGluc3RhbmNlb2YgSFRNTERpdkVsZW1lbnQgJiYgZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ21ldGFkYXRhLWlucHV0LWxvbmd0ZXh0JykpKSAmJlxyXG5cdFx0XHRcdHByb3BlcnR5RWwgIT09IG51bGwpXHJcblx0XHQpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogR2V0IHRoZSBwcm9wZXJ0eSBuYW1lIGZyb20gYSBmcm9udG1hdHRlciBmaWVsZCBlbGVtZW50XHJcblx0ICovXHJcblx0cHJpdmF0ZSBnZXRQcm9wZXJ0eU5hbWUoZWxlbWVudDogSFRNTEVsZW1lbnQpOiBzdHJpbmcgfCBudWxsIHtcclxuXHRcdGNvbnN0IHByb3BlcnR5RWwgPSBlbGVtZW50LmNsb3Nlc3QoJy5tZXRhZGF0YS1wcm9wZXJ0eScpO1xyXG5cdFx0cmV0dXJuIHByb3BlcnR5RWw/LmdldEF0dHJpYnV0ZSgnZGF0YS1wcm9wZXJ0eS1rZXknKSA/PyBudWxsO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIERyb3BIYW5kbGVyIHtcclxuXHRwcml2YXRlIGFwcDogQXBwO1xyXG5cdHByaXZhdGUgc2V0dGluZ3M6IEltYWdlTWFuYWdlclNldHRpbmdzO1xyXG5cdHByaXZhdGUgaW1hZ2VQcm9jZXNzb3I6IEltYWdlUHJvY2Vzc29yO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihcclxuXHRcdGFwcDogQXBwLFxyXG5cdFx0c2V0dGluZ3M6IEltYWdlTWFuYWdlclNldHRpbmdzLFxyXG5cdFx0aW1hZ2VQcm9jZXNzb3I6IEltYWdlUHJvY2Vzc29yLFxyXG5cdFx0b2JzZXJ2YWJsZT86IHsgc3Vic2NyaWJlKGZuOiAoc2V0dGluZ3M6IEltYWdlTWFuYWdlclNldHRpbmdzKSA9PiB2b2lkKTogdm9pZCB9XHJcblx0KSB7XHJcblx0XHR0aGlzLmFwcCA9IGFwcDtcclxuXHRcdHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuXHRcdHRoaXMuaW1hZ2VQcm9jZXNzb3IgPSBpbWFnZVByb2Nlc3NvcjtcclxuXHJcblx0XHQvLyBTdWJzY3JpYmUgdG8gc2V0dGluZ3MgdXBkYXRlcyBpZiBvYnNlcnZhYmxlIGlzIHByb3ZpZGVkXHJcblx0XHRvYnNlcnZhYmxlPy5zdWJzY3JpYmUoKG5ld1NldHRpbmdzKSA9PiB7XHJcblx0XHRcdHRoaXMudXBkYXRlU2V0dGluZ3MobmV3U2V0dGluZ3MpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBVcGRhdGUgc2V0dGluZ3MgcmVmZXJlbmNlXHJcblx0ICovXHJcblx0dXBkYXRlU2V0dGluZ3Moc2V0dGluZ3M6IEltYWdlTWFuYWdlclNldHRpbmdzKTogdm9pZCB7XHJcblx0XHR0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBIYW5kbGUgZWRpdG9yIGRyb3AgZXZlbnRcclxuXHQgKi9cclxuXHRhc3luYyBoYW5kbGVFZGl0b3JEcm9wKFxyXG5cdFx0ZXZ0OiBEcmFnRXZlbnQsXHJcblx0XHRlZGl0b3I6IEVkaXRvcixcclxuXHRcdHZpZXc6IE1hcmtkb3duVmlld1xyXG5cdCk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG5cdFx0aWYgKCF0aGlzLnNldHRpbmdzLnNob3dSZW5hbWVEaWFsb2cgfHwgIXRoaXMuc2V0dGluZ3MuZW5hYmxlUmVuYW1lT25Ecm9wKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCBmaWxlcyA9IGV2dC5kYXRhVHJhbnNmZXI/LmZpbGVzO1xyXG5cdFx0aWYgKCFmaWxlcyB8fCBmaWxlcy5sZW5ndGggPT09IDApIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENoZWNrIGZvciBpbWFnZSBmaWxlc1xyXG5cdFx0Y29uc3QgaW1hZ2VGaWxlczogRmlsZVtdID0gW107XHJcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGZpbGVzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdGNvbnN0IGYgPSBmaWxlcy5pdGVtKGkpO1xyXG5cdFx0XHRpZiAoZiAmJiBmLnR5cGUuc3RhcnRzV2l0aCgnaW1hZ2UvJykpIHtcclxuXHRcdFx0XHRpbWFnZUZpbGVzLnB1c2goZik7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRpZiAoaW1hZ2VGaWxlcy5sZW5ndGggPT09IDApIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFdlJ3JlIGhhbmRsaW5nIHRoaXNcclxuXHRcdGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuXHRcdGNvbnN0IGFjdGl2ZUZpbGUgPSB2aWV3LmZpbGU7XHJcblx0XHRpZiAoIWFjdGl2ZUZpbGUpIHtcclxuXHRcdFx0bmV3IE5vdGljZSgnTm8gYWN0aXZlIGZpbGUnKTtcclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gUHJvY2VzcyBlYWNoIGltYWdlXHJcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGltYWdlRmlsZXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0Y29uc3QgaW1hZ2VGaWxlID0gaW1hZ2VGaWxlc1tpXTtcclxuXHRcdFx0aWYgKCFpbWFnZUZpbGUpIGNvbnRpbnVlO1xyXG5cclxuXHRcdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5pbWFnZVByb2Nlc3Nvci5wcm9jZXNzSW1hZ2VGaWxlKFxyXG5cdFx0XHRcdGltYWdlRmlsZSxcclxuXHRcdFx0XHRhY3RpdmVGaWxlLFxyXG5cdFx0XHRcdHRydWVcclxuXHRcdFx0KTtcclxuXHJcblx0XHRcdGlmIChyZXN1bHQuc3VjY2VzcyAmJiByZXN1bHQubGlua1RleHQpIHtcclxuXHRcdFx0XHRlZGl0b3IucmVwbGFjZVNlbGVjdGlvbihyZXN1bHQubGlua1RleHQpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRydWU7XHJcblx0fVxyXG59XHJcbiIsICIvKipcclxuICogUmVtb3RlIEltYWdlIFNlcnZpY2VcclxuICogQVBJIGludGVncmF0aW9ucyBmb3IgVW5zcGxhc2gsIFBleGVscywgYW5kIFBpeGFiYXlcclxuICovXHJcblxyXG5pbXBvcnQgeyBBcHAsIHJlcXVlc3RVcmwsIHJlcXVpcmVBcGlWZXJzaW9uIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBJbWFnZU1hbmFnZXJTZXR0aW5ncywgSW1hZ2VQcm92aWRlciwgSW1hZ2VPcmllbnRhdGlvbiwgUmVtb3RlSW1hZ2UsIEltYWdlU2l6ZSB9IGZyb20gJy4uL3R5cGVzJztcclxuXHJcbi8vIFVuc3BsYXNoIHByb3h5IFVSTCAoYnVpbHQtaW4gZmFsbGJhY2spIC0gbWF0Y2hlcyBJbWFnZSBNYW5hZ2VyIHBhdHRlcm5cclxuY29uc3QgVU5TUExBU0hfUFJPWFkgPSAnaHR0cHM6Ly9pbnNlcnQtdW5zcGxhc2gtaW1hZ2UuY2xvdWR5OTEwMS5jb20vJztcclxuXHJcbmV4cG9ydCBjbGFzcyBSZW1vdGVJbWFnZVNlcnZpY2Uge1xyXG5cdHByaXZhdGUgc2V0dGluZ3M6IEltYWdlTWFuYWdlclNldHRpbmdzO1xyXG5cdHByaXZhdGUgYXBwOiBBcHA7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBzZXR0aW5nczogSW1hZ2VNYW5hZ2VyU2V0dGluZ3MsIG9ic2VydmFibGU/OiB7IHN1YnNjcmliZShmbjogKHNldHRpbmdzOiBJbWFnZU1hbmFnZXJTZXR0aW5ncykgPT4gdm9pZCk6IHZvaWQgfSkge1xyXG5cdFx0dGhpcy5hcHAgPSBhcHA7XHJcblx0XHR0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XHJcblxyXG5cdFx0Ly8gU3Vic2NyaWJlIHRvIHNldHRpbmdzIHVwZGF0ZXMgaWYgb2JzZXJ2YWJsZSBpcyBwcm92aWRlZFxyXG5cdFx0b2JzZXJ2YWJsZT8uc3Vic2NyaWJlKChuZXdTZXR0aW5ncykgPT4ge1xyXG5cdFx0XHR0aGlzLnVwZGF0ZVNldHRpbmdzKG5ld1NldHRpbmdzKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogVXBkYXRlIHNldHRpbmdzIHJlZmVyZW5jZVxyXG5cdCAqL1xyXG5cdHVwZGF0ZVNldHRpbmdzKHNldHRpbmdzOiBJbWFnZU1hbmFnZXJTZXR0aW5ncyk6IHZvaWQge1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogU2VhcmNoIGZvciBpbWFnZXMgZnJvbSB0aGUgc3BlY2lmaWVkIHByb3ZpZGVyXHJcblx0ICovXHJcblx0YXN5bmMgc2VhcmNoKHF1ZXJ5OiBzdHJpbmcsIHByb3ZpZGVyPzogSW1hZ2VQcm92aWRlciwgcGFnZTogbnVtYmVyID0gMSk6IFByb21pc2U8UmVtb3RlSW1hZ2VbXT4ge1xyXG5cdFx0Y29uc3QgdGFyZ2V0UHJvdmlkZXIgPSBwcm92aWRlciA/PyB0aGlzLnNldHRpbmdzLmRlZmF1bHRQcm92aWRlcjtcclxuXHJcblx0XHRzd2l0Y2ggKHRhcmdldFByb3ZpZGVyKSB7XHJcblx0XHRcdGNhc2UgSW1hZ2VQcm92aWRlci5VbnNwbGFzaDpcclxuXHRcdFx0XHRyZXR1cm4gYXdhaXQgdGhpcy5zZWFyY2hVbnNwbGFzaChxdWVyeSwgcGFnZSk7XHJcblx0XHRcdGNhc2UgSW1hZ2VQcm92aWRlci5QZXhlbHM6XHJcblx0XHRcdFx0cmV0dXJuIGF3YWl0IHRoaXMuc2VhcmNoUGV4ZWxzKHF1ZXJ5LCBwYWdlKTtcclxuXHRcdFx0Y2FzZSBJbWFnZVByb3ZpZGVyLlBpeGFiYXk6XHJcblx0XHRcdFx0cmV0dXJuIGF3YWl0IHRoaXMuc2VhcmNoUGl4YWJheShxdWVyeSwgcGFnZSk7XHJcblx0XHRcdGRlZmF1bHQ6XHJcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCBwcm92aWRlcjogJHt0YXJnZXRQcm92aWRlcn1gKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNlYXJjaCBVbnNwbGFzaFxyXG5cdCAqL1xyXG5cdHByaXZhdGUgYXN5bmMgc2VhcmNoVW5zcGxhc2gocXVlcnk6IHN0cmluZywgcGFnZTogbnVtYmVyKTogUHJvbWlzZTxSZW1vdGVJbWFnZVtdPiB7XHJcblx0XHRsZXQgcHJveHlVcmwgPSB0aGlzLnNldHRpbmdzLnVuc3BsYXNoUHJveHlTZXJ2ZXIgfHwgVU5TUExBU0hfUFJPWFk7XHJcblx0XHQvLyBFbnN1cmUgcHJveHkgVVJMIGVuZHMgd2l0aCBzbGFzaCBmb3IgVVJMIGNvbnN0cnVjdG9yXHJcblx0XHRpZiAoIXByb3h5VXJsLmVuZHNXaXRoKCcvJykpIHtcclxuXHRcdFx0cHJveHlVcmwgKz0gJy8nO1xyXG5cdFx0fVxyXG5cdFx0Y29uc3Qgb3JpZW50YXRpb24gPSB0aGlzLm1hcE9yaWVudGF0aW9uKHRoaXMuc2V0dGluZ3MuZGVmYXVsdE9yaWVudGF0aW9uKTtcclxuXHJcblx0XHQvLyBVc2UgVVJMIGNvbnN0cnVjdG9yIHBhdHRlcm5cclxuXHRcdGNvbnN0IHVybCA9IG5ldyBVUkwoJy9zZWFyY2gvcGhvdG9zJywgcHJveHlVcmwpO1xyXG5cdFx0dXJsLnNlYXJjaFBhcmFtcy5zZXQoJ3F1ZXJ5JywgcXVlcnkpO1xyXG5cdFx0dXJsLnNlYXJjaFBhcmFtcy5zZXQoJ3BhZ2UnLCBTdHJpbmcocGFnZSkpO1xyXG5cdFx0dXJsLnNlYXJjaFBhcmFtcy5zZXQoJ3Blcl9wYWdlJywgJzIwJyk7XHJcblxyXG5cdFx0aWYgKG9yaWVudGF0aW9uKSB7XHJcblx0XHRcdHVybC5zZWFyY2hQYXJhbXMuc2V0KCdvcmllbnRhdGlvbicsIG9yaWVudGF0aW9uKTtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RVcmwoeyB1cmw6IHVybC50b1N0cmluZygpIH0pO1xyXG5cdFx0aWYgKHJlc3BvbnNlLnN0YXR1cyA+PSA0MDApIHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcignVW5zcGxhc2ggQVBJIGVycm9yOicsIHJlc3BvbnNlLnN0YXR1cywgcmVzcG9uc2UudGV4dCk7XHJcblx0XHRcdHRocm93IG5ldyBFcnJvcihgVW5zcGxhc2ggc2VhcmNoIGZhaWxlZDogJHtyZXNwb25zZS5zdGF0dXN9IC0gJHtyZXNwb25zZS50ZXh0fWApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IGRhdGEgPSByZXNwb25zZS5qc29uIGFzIFVuc3BsYXNoU2VhcmNoUmVzcG9uc2U7XHJcblx0XHRpZiAoIWRhdGEgfHwgIWRhdGEucmVzdWx0cykge1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKCdJbnZhbGlkIFVuc3BsYXNoIHJlc3BvbnNlOicsIGRhdGEpO1xyXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcmVzcG9uc2UgZnJvbSBVbnNwbGFzaCBBUEknKTtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCByZXN1bHRzOiBVbnNwbGFzaFBob3RvW10gPSBkYXRhLnJlc3VsdHMgPz8gW107XHJcblxyXG5cdFx0cmV0dXJuIHJlc3VsdHMubWFwKChwaG90bykgPT4gdGhpcy5tYXBVbnNwbGFzaFBob3RvKHBob3RvKSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBHZXQgUGV4ZWxzIEFQSSBrZXkgZnJvbSBTZWNyZXRTdG9yYWdlIG9yIGZhbGwgYmFjayB0byBwbGFpbnRleHRcclxuXHQgKi9cclxuXHRwcml2YXRlIGdldFBleGVsc0FwaUtleSgpOiBzdHJpbmcgfCBudWxsIHtcclxuXHRcdC8vIFRyeSBzZWNyZXQgZmlyc3QgaWYgYXZhaWxhYmxlICgxLjExLjQrKVxyXG5cdFx0aWYgKHJlcXVpcmVBcGlWZXJzaW9uKCcxLjExLjQnKSAmJiB0aGlzLnNldHRpbmdzLnBleGVsc0FwaUtleVNlY3JldElkKSB7XHJcblx0XHRcdC8vIEFjY2VzcyBzZWNyZXRTdG9yYWdlIHZpYSB0eXBlIGFzc2VydGlvbiAobWF5IG5vdCBiZSBpbiB0eXBlIGRlZmluaXRpb25zKVxyXG5cdFx0XHRjb25zdCBzZWNyZXRTdG9yYWdlID0gKHRoaXMuYXBwIGFzIHVua25vd24gYXMgeyBzZWNyZXRTdG9yYWdlPzogeyBnZXRTZWNyZXQoaWQ6IHN0cmluZyk6IHN0cmluZyB8IG51bGwgfSB9KS5zZWNyZXRTdG9yYWdlO1xyXG5cdFx0XHRpZiAoc2VjcmV0U3RvcmFnZSkge1xyXG5cdFx0XHRcdGNvbnN0IHNlY3JldCA9IHNlY3JldFN0b3JhZ2UuZ2V0U2VjcmV0KHRoaXMuc2V0dGluZ3MucGV4ZWxzQXBpS2V5U2VjcmV0SWQpO1xyXG5cdFx0XHRcdGlmIChzZWNyZXQpIHtcclxuXHRcdFx0XHRcdHJldHVybiBzZWNyZXQ7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHQvLyBGYWxsIGJhY2sgdG8gcGxhaW50ZXh0XHJcblx0XHRyZXR1cm4gdGhpcy5zZXR0aW5ncy5wZXhlbHNBcGlLZXkgfHwgbnVsbDtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldCBQaXhhYmF5IEFQSSBrZXkgZnJvbSBTZWNyZXRTdG9yYWdlIG9yIGZhbGwgYmFjayB0byBwbGFpbnRleHRcclxuXHQgKi9cclxuXHRwcml2YXRlIGdldFBpeGFiYXlBcGlLZXkoKTogc3RyaW5nIHwgbnVsbCB7XHJcblx0XHQvLyBUcnkgc2VjcmV0IGZpcnN0IGlmIGF2YWlsYWJsZSAoMS4xMS40KylcclxuXHRcdGlmIChyZXF1aXJlQXBpVmVyc2lvbignMS4xMS40JykgJiYgdGhpcy5zZXR0aW5ncy5waXhhYmF5QXBpS2V5U2VjcmV0SWQpIHtcclxuXHRcdFx0Ly8gQWNjZXNzIHNlY3JldFN0b3JhZ2UgdmlhIHR5cGUgYXNzZXJ0aW9uIChtYXkgbm90IGJlIGluIHR5cGUgZGVmaW5pdGlvbnMpXHJcblx0XHRcdGNvbnN0IHNlY3JldFN0b3JhZ2UgPSAodGhpcy5hcHAgYXMgdW5rbm93biBhcyB7IHNlY3JldFN0b3JhZ2U/OiB7IGdldFNlY3JldChpZDogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB9IH0pLnNlY3JldFN0b3JhZ2U7XHJcblx0XHRcdGlmIChzZWNyZXRTdG9yYWdlKSB7XHJcblx0XHRcdFx0Y29uc3Qgc2VjcmV0ID0gc2VjcmV0U3RvcmFnZS5nZXRTZWNyZXQodGhpcy5zZXR0aW5ncy5waXhhYmF5QXBpS2V5U2VjcmV0SWQpO1xyXG5cdFx0XHRcdGlmIChzZWNyZXQpIHtcclxuXHRcdFx0XHRcdHJldHVybiBzZWNyZXQ7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHQvLyBGYWxsIGJhY2sgdG8gcGxhaW50ZXh0XHJcblx0XHRyZXR1cm4gdGhpcy5zZXR0aW5ncy5waXhhYmF5QXBpS2V5IHx8IG51bGw7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBTZWFyY2ggUGV4ZWxzXHJcblx0ICovXHJcblx0cHJpdmF0ZSBhc3luYyBzZWFyY2hQZXhlbHMocXVlcnk6IHN0cmluZywgcGFnZTogbnVtYmVyKTogUHJvbWlzZTxSZW1vdGVJbWFnZVtdPiB7XHJcblx0XHRjb25zdCBhcGlLZXkgPSB0aGlzLmdldFBleGVsc0FwaUtleSgpO1xyXG5cdFx0aWYgKCFhcGlLZXkpIHtcclxuXHRcdFx0Y29uc3QgZXJyb3JNc2cgPSByZXF1aXJlQXBpVmVyc2lvbignMS4xMS40JylcclxuXHRcdFx0XHQ/ICdQZXhlbHMgQVBJIGtleSBpcyByZXF1aXJlZC4gUGxlYXNlIGNvbmZpZ3VyZSBpdCBpbiBzZXR0aW5ncyAodXNlIFNlY3JldFN0b3JhZ2Ugb24gT2JzaWRpYW4gMS4xMS40KyBvciBlbnRlciBwbGFpbnRleHQgb24gb2xkZXIgdmVyc2lvbnMpLidcclxuXHRcdFx0XHQ6ICdQZXhlbHMgQVBJIGtleSBpcyByZXF1aXJlZC4gUGxlYXNlIGNvbmZpZ3VyZSBpdCBpbiBzZXR0aW5ncy4nO1xyXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoZXJyb3JNc2cpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IG9yaWVudGF0aW9uID0gdGhpcy5tYXBPcmllbnRhdGlvbih0aGlzLnNldHRpbmdzLmRlZmF1bHRPcmllbnRhdGlvbik7XHJcblxyXG5cdFx0Y29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7XHJcblx0XHRcdHF1ZXJ5LFxyXG5cdFx0XHRwYWdlOiBTdHJpbmcocGFnZSksXHJcblx0XHRcdHBlcl9wYWdlOiAnMjAnLFxyXG5cdFx0fSk7XHJcblxyXG5cdFx0aWYgKG9yaWVudGF0aW9uKSB7XHJcblx0XHRcdHBhcmFtcy5zZXQoJ29yaWVudGF0aW9uJywgb3JpZW50YXRpb24pO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IHVybCA9IGBodHRwczovL2FwaS5wZXhlbHMuY29tL3YxL3NlYXJjaD8ke3BhcmFtcy50b1N0cmluZygpfWA7XHJcblxyXG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHtcclxuXHRcdFx0dXJsLFxyXG5cdFx0XHRoZWFkZXJzOiB7XHJcblx0XHRcdFx0QXV0aG9yaXphdGlvbjogYXBpS2V5LFxyXG5cdFx0XHR9LFxyXG5cdFx0fSk7XHJcblxyXG5cdFx0aWYgKHJlc3BvbnNlLnN0YXR1cyA+PSA0MDApIHtcclxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKGBQZXhlbHMgc2VhcmNoIGZhaWxlZDogJHtyZXNwb25zZS5zdGF0dXN9YCk7XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3QgZGF0YSA9IHJlc3BvbnNlLmpzb24gYXMgUGV4ZWxzU2VhcmNoUmVzcG9uc2U7XHJcblx0XHRjb25zdCBwaG90b3M6IFBleGVsc1Bob3RvW10gPSBkYXRhLnBob3RvcyA/PyBbXTtcclxuXHJcblx0XHRyZXR1cm4gcGhvdG9zLm1hcCgocGhvdG8pID0+IHRoaXMubWFwUGV4ZWxzUGhvdG8ocGhvdG8pKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNlYXJjaCBQaXhhYmF5XHJcblx0ICovXHJcblx0cHJpdmF0ZSBhc3luYyBzZWFyY2hQaXhhYmF5KHF1ZXJ5OiBzdHJpbmcsIHBhZ2U6IG51bWJlcik6IFByb21pc2U8UmVtb3RlSW1hZ2VbXT4ge1xyXG5cdFx0Y29uc3QgYXBpS2V5ID0gdGhpcy5nZXRQaXhhYmF5QXBpS2V5KCk7XHJcblx0XHRpZiAoIWFwaUtleSkge1xyXG5cdFx0XHRjb25zdCBlcnJvck1zZyA9IHJlcXVpcmVBcGlWZXJzaW9uKCcxLjExLjQnKVxyXG5cdFx0XHRcdD8gJ1BpeGFiYXkgQVBJIGtleSBpcyByZXF1aXJlZC4gUGxlYXNlIGNvbmZpZ3VyZSBpdCBpbiBzZXR0aW5ncyAodXNlIFNlY3JldFN0b3JhZ2Ugb24gT2JzaWRpYW4gMS4xMS40KyBvciBlbnRlciBwbGFpbnRleHQgb24gb2xkZXIgdmVyc2lvbnMpLidcclxuXHRcdFx0XHQ6ICdQaXhhYmF5IEFQSSBrZXkgaXMgcmVxdWlyZWQuIFBsZWFzZSBjb25maWd1cmUgaXQgaW4gc2V0dGluZ3MuJztcclxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKGVycm9yTXNnKTtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCBvcmllbnRhdGlvbiA9IHRoaXMubWFwUGl4YWJheU9yaWVudGF0aW9uKHRoaXMuc2V0dGluZ3MuZGVmYXVsdE9yaWVudGF0aW9uKTtcclxuXHJcblx0XHRjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcclxuXHRcdFx0a2V5OiBhcGlLZXksXHJcblx0XHRcdHE6IHF1ZXJ5LFxyXG5cdFx0XHRwYWdlOiBTdHJpbmcocGFnZSksXHJcblx0XHRcdHBlcl9wYWdlOiAnMjAnLFxyXG5cdFx0XHRpbWFnZV90eXBlOiAncGhvdG8nLFxyXG5cdFx0fSk7XHJcblxyXG5cdFx0aWYgKG9yaWVudGF0aW9uKSB7XHJcblx0XHRcdHBhcmFtcy5zZXQoJ29yaWVudGF0aW9uJywgb3JpZW50YXRpb24pO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IHVybCA9IGBodHRwczovL3BpeGFiYXkuY29tL2FwaS8/JHtwYXJhbXMudG9TdHJpbmcoKX1gO1xyXG5cclxuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdFVybCh7IHVybCB9KTtcclxuXHRcdGlmIChyZXNwb25zZS5zdGF0dXMgPj0gNDAwKSB7XHJcblx0XHRcdHRocm93IG5ldyBFcnJvcihgUGl4YWJheSBzZWFyY2ggZmFpbGVkOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCBkYXRhID0gcmVzcG9uc2UuanNvbiBhcyBQaXhhYmF5U2VhcmNoUmVzcG9uc2U7XHJcblx0XHRjb25zdCBoaXRzOiBQaXhhYmF5SGl0W10gPSBkYXRhLmhpdHMgPz8gW107XHJcblxyXG5cdFx0cmV0dXJuIGhpdHMubWFwKChoaXQpID0+IHRoaXMubWFwUGl4YWJheUhpdChoaXQpKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldCB0aGUgZG93bmxvYWQgVVJMIGZvciBhbiBpbWFnZSBiYXNlZCBvbiBzaXplIHByZWZlcmVuY2VcclxuXHQgKi9cclxuXHRnZXREb3dubG9hZFVybChpbWFnZTogUmVtb3RlSW1hZ2UsIHNpemU/OiBJbWFnZVNpemUpOiBzdHJpbmcge1xyXG5cdFx0Y29uc3QgdGFyZ2V0U2l6ZSA9IHNpemUgPz8gdGhpcy5zZXR0aW5ncy5kZWZhdWx0SW1hZ2VTaXplO1xyXG5cdFx0c3dpdGNoICh0YXJnZXRTaXplKSB7XHJcblx0XHRcdGNhc2UgSW1hZ2VTaXplLk9yaWdpbmFsOlxyXG5cdFx0XHRcdHJldHVybiBpbWFnZS5mdWxsVXJsO1xyXG5cdFx0XHRjYXNlIEltYWdlU2l6ZS5MYXJnZTpcclxuXHRcdFx0XHRyZXR1cm4gaW1hZ2UucmVndWxhclVybDtcclxuXHRcdFx0Y2FzZSBJbWFnZVNpemUuTWVkaXVtOlxyXG5cdFx0XHRcdHJldHVybiBpbWFnZS5yZWd1bGFyVXJsO1xyXG5cdFx0XHRjYXNlIEltYWdlU2l6ZS5TbWFsbDpcclxuXHRcdFx0XHRyZXR1cm4gaW1hZ2UudGh1bWJuYWlsVXJsO1xyXG5cdFx0XHRkZWZhdWx0OlxyXG5cdFx0XHRcdHJldHVybiBpbWFnZS5yZWd1bGFyVXJsO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogRG93bmxvYWQgYW4gaW1hZ2UgYW5kIHJldHVybiB0aGUgYmluYXJ5IGRhdGFcclxuXHQgKi9cclxuXHRhc3luYyBkb3dubG9hZEltYWdlKGltYWdlOiBSZW1vdGVJbWFnZSk6IFByb21pc2U8QXJyYXlCdWZmZXI+IHtcclxuXHRcdGNvbnN0IHVybCA9IHRoaXMuZ2V0RG93bmxvYWRVcmwoaW1hZ2UpO1xyXG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHsgdXJsIH0pO1xyXG5cclxuXHRcdGlmIChyZXNwb25zZS5zdGF0dXMgPj0gNDAwKSB7XHJcblx0XHRcdHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGRvd25sb2FkIGltYWdlOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gcmVzcG9uc2UuYXJyYXlCdWZmZXI7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBHZW5lcmF0ZSByZWZlcnJhbCB0ZXh0IGZvciBhbiBpbWFnZSAoYXR0cmlidXRpb24pXHJcblx0ICovXHJcblx0Z2VuZXJhdGVSZWZlcnJhbFRleHQoaW1hZ2U6IFJlbW90ZUltYWdlKTogc3RyaW5nIHtcclxuXHRcdGlmICghdGhpcy5zZXR0aW5ncy5pbnNlcnRSZWZlcnJhbCkge1xyXG5cdFx0XHRyZXR1cm4gJyc7XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3QgYmFja2xpbmsgPSB0aGlzLnNldHRpbmdzLmluc2VydEJhY2tMaW5rICYmIGltYWdlLnBhZ2VVcmxcclxuXHRcdFx0PyBgW0JhY2tsaW5rXSgke2ltYWdlLnBhZ2VVcmx9KSB8IGBcclxuXHRcdFx0OiAnJztcclxuXHJcblx0XHRsZXQgcmVmZXJyYWwgPSAnJztcclxuXHRcdHN3aXRjaCAoaW1hZ2UucHJvdmlkZXIpIHtcclxuXHRcdFx0Y2FzZSBJbWFnZVByb3ZpZGVyLlVuc3BsYXNoOlxyXG5cdFx0XHRcdGlmIChpbWFnZS5hdXRob3IgJiYgaW1hZ2UuYXV0aG9yVXJsKSB7XHJcblx0XHRcdFx0XHRjb25zdCB1dG0gPSAndXRtX3NvdXJjZT1PYnNpZGlhbiUyMEltYWdlJTIwTWFuYWdlciZ1dG1fbWVkaXVtPXJlZmVycmFsJztcclxuXHRcdFx0XHRcdHJlZmVycmFsID0gYFxcbioke2JhY2tsaW5rfVBob3RvIGJ5IFske2ltYWdlLmF1dGhvcn1dKCR7aW1hZ2UuYXV0aG9yVXJsfSkgb24gW1Vuc3BsYXNoXShodHRwczovL3Vuc3BsYXNoLmNvbS8/JHt1dG19KSpcXG5gO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSBJbWFnZVByb3ZpZGVyLlBleGVsczpcclxuXHRcdFx0XHRpZiAoaW1hZ2UuYXV0aG9yICYmIGltYWdlLmF1dGhvclVybCkge1xyXG5cdFx0XHRcdFx0cmVmZXJyYWwgPSBgXFxuKiR7YmFja2xpbmt9UGhvdG8gYnkgWyR7aW1hZ2UuYXV0aG9yfV0oJHtpbWFnZS5hdXRob3JVcmx9KSBvbiBbUGV4ZWxzXShodHRwczovL3d3dy5wZXhlbHMuY29tLykqXFxuYDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgSW1hZ2VQcm92aWRlci5QaXhhYmF5OlxyXG5cdFx0XHRcdGlmIChpbWFnZS5hdXRob3IgJiYgaW1hZ2UuYXV0aG9yVXJsKSB7XHJcblx0XHRcdFx0XHRyZWZlcnJhbCA9IGBcXG4qJHtiYWNrbGlua31JbWFnZSBieSBbJHtpbWFnZS5hdXRob3J9XSgke2ltYWdlLmF1dGhvclVybH0pIG9uIFtQaXhhYmF5XShodHRwczovL3BpeGFiYXkuY29tLykqXFxuYDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHJlZmVycmFsO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogTWFwIG9yaWVudGF0aW9uIHNldHRpbmcgdG8gQVBJIHBhcmFtZXRlclxyXG5cdCAqL1xyXG5cdHByaXZhdGUgbWFwT3JpZW50YXRpb24ob3JpZW50YXRpb246IEltYWdlT3JpZW50YXRpb24pOiBzdHJpbmcgfCBudWxsIHtcclxuXHRcdHN3aXRjaCAob3JpZW50YXRpb24pIHtcclxuXHRcdFx0Y2FzZSBJbWFnZU9yaWVudGF0aW9uLkxhbmRzY2FwZTpcclxuXHRcdFx0XHRyZXR1cm4gJ2xhbmRzY2FwZSc7XHJcblx0XHRcdGNhc2UgSW1hZ2VPcmllbnRhdGlvbi5Qb3J0cmFpdDpcclxuXHRcdFx0XHRyZXR1cm4gJ3BvcnRyYWl0JztcclxuXHRcdFx0Y2FzZSBJbWFnZU9yaWVudGF0aW9uLlNxdWFyZTpcclxuXHRcdFx0XHRyZXR1cm4gJ3NxdWFyaXNoJztcclxuXHRcdFx0ZGVmYXVsdDpcclxuXHRcdFx0XHRyZXR1cm4gbnVsbDtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIE1hcCBvcmllbnRhdGlvbiBmb3IgUGl4YWJheSAoZGlmZmVyZW50IHZhbHVlcylcclxuXHQgKi9cclxuXHRwcml2YXRlIG1hcFBpeGFiYXlPcmllbnRhdGlvbihvcmllbnRhdGlvbjogSW1hZ2VPcmllbnRhdGlvbik6IHN0cmluZyB8IG51bGwge1xyXG5cdFx0c3dpdGNoIChvcmllbnRhdGlvbikge1xyXG5cdFx0XHRjYXNlIEltYWdlT3JpZW50YXRpb24uTGFuZHNjYXBlOlxyXG5cdFx0XHRcdHJldHVybiAnaG9yaXpvbnRhbCc7XHJcblx0XHRcdGNhc2UgSW1hZ2VPcmllbnRhdGlvbi5Qb3J0cmFpdDpcclxuXHRcdFx0XHRyZXR1cm4gJ3ZlcnRpY2FsJztcclxuXHRcdFx0ZGVmYXVsdDpcclxuXHRcdFx0XHRyZXR1cm4gbnVsbDtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIE1hcCBVbnNwbGFzaCBwaG90byB0byBSZW1vdGVJbWFnZVxyXG5cdCAqL1xyXG5cdHByaXZhdGUgbWFwVW5zcGxhc2hQaG90byhwaG90bzogVW5zcGxhc2hQaG90byk6IFJlbW90ZUltYWdlIHtcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdGlkOiBwaG90by5pZCxcclxuXHRcdFx0cHJvdmlkZXI6IEltYWdlUHJvdmlkZXIuVW5zcGxhc2gsXHJcblx0XHRcdHRodW1ibmFpbFVybDogcGhvdG8udXJscy50aHVtYixcclxuXHRcdFx0cmVndWxhclVybDogcGhvdG8udXJscy5yZWd1bGFyLFxyXG5cdFx0XHRmdWxsVXJsOiBwaG90by51cmxzLmZ1bGwsXHJcblx0XHRcdGRvd25sb2FkVXJsOiBwaG90by5saW5rcy5kb3dubG9hZF9sb2NhdGlvbiB8fCBwaG90by5saW5rcy5kb3dubG9hZCxcclxuXHRcdFx0d2lkdGg6IHBob3RvLndpZHRoLFxyXG5cdFx0XHRoZWlnaHQ6IHBob3RvLmhlaWdodCxcclxuXHRcdFx0ZGVzY3JpcHRpb246IHBob3RvLmRlc2NyaXB0aW9uID8/IHBob3RvLmFsdF9kZXNjcmlwdGlvbiA/PyAnJyxcclxuXHRcdFx0YXV0aG9yOiBwaG90by51c2VyLm5hbWUsXHJcblx0XHRcdGF1dGhvclVybDogcGhvdG8udXNlci5saW5rcy5odG1sLFxyXG5cdFx0XHRwYWdlVXJsOiBwaG90by5saW5rcy5odG1sLFxyXG5cdFx0fTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIE1hcCBQZXhlbHMgcGhvdG8gdG8gUmVtb3RlSW1hZ2VcclxuXHQgKi9cclxuXHRwcml2YXRlIG1hcFBleGVsc1Bob3RvKHBob3RvOiBQZXhlbHNQaG90byk6IFJlbW90ZUltYWdlIHtcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdGlkOiBTdHJpbmcocGhvdG8uaWQpLFxyXG5cdFx0XHRwcm92aWRlcjogSW1hZ2VQcm92aWRlci5QZXhlbHMsXHJcblx0XHRcdHRodW1ibmFpbFVybDogcGhvdG8uc3JjLnRpbnksXHJcblx0XHRcdHJlZ3VsYXJVcmw6IHBob3RvLnNyYy5sYXJnZSxcclxuXHRcdFx0ZnVsbFVybDogcGhvdG8uc3JjLm9yaWdpbmFsLFxyXG5cdFx0XHRkb3dubG9hZFVybDogcGhvdG8uc3JjLm9yaWdpbmFsLFxyXG5cdFx0XHR3aWR0aDogcGhvdG8ud2lkdGgsXHJcblx0XHRcdGhlaWdodDogcGhvdG8uaGVpZ2h0LFxyXG5cdFx0XHRkZXNjcmlwdGlvbjogcGhvdG8uYWx0ID8/ICcnLFxyXG5cdFx0XHRhdXRob3I6IHBob3RvLnBob3RvZ3JhcGhlcixcclxuXHRcdFx0YXV0aG9yVXJsOiBwaG90by5waG90b2dyYXBoZXJfdXJsLFxyXG5cdFx0XHRwYWdlVXJsOiBwaG90by51cmwsXHJcblx0XHR9O1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogTWFwIFBpeGFiYXkgaGl0IHRvIFJlbW90ZUltYWdlXHJcblx0ICovXHJcblx0cHJpdmF0ZSBtYXBQaXhhYmF5SGl0KGhpdDogUGl4YWJheUhpdCk6IFJlbW90ZUltYWdlIHtcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdGlkOiBTdHJpbmcoaGl0LmlkKSxcclxuXHRcdFx0cHJvdmlkZXI6IEltYWdlUHJvdmlkZXIuUGl4YWJheSxcclxuXHRcdFx0dGh1bWJuYWlsVXJsOiBoaXQucHJldmlld1VSTCxcclxuXHRcdFx0cmVndWxhclVybDogaGl0LndlYmZvcm1hdFVSTCxcclxuXHRcdFx0ZnVsbFVybDogaGl0LmxhcmdlSW1hZ2VVUkwsXHJcblx0XHRcdGRvd25sb2FkVXJsOiBoaXQubGFyZ2VJbWFnZVVSTCxcclxuXHRcdFx0d2lkdGg6IGhpdC5pbWFnZVdpZHRoLFxyXG5cdFx0XHRoZWlnaHQ6IGhpdC5pbWFnZUhlaWdodCxcclxuXHRcdFx0ZGVzY3JpcHRpb246IGhpdC50YWdzLFxyXG5cdFx0XHRhdXRob3I6IGhpdC51c2VyLFxyXG5cdFx0XHRhdXRob3JVcmw6IGBodHRwczovL3BpeGFiYXkuY29tL3VzZXJzLyR7aGl0LnVzZXJ9LSR7aGl0LnVzZXJfaWR9L2AsXHJcblx0XHRcdHBhZ2VVcmw6IGhpdC5wYWdlVVJMLFxyXG5cdFx0fTtcclxuXHR9XHJcbn1cclxuXHJcbi8vIFR5cGUgZGVmaW5pdGlvbnMgZm9yIEFQSSByZXNwb25zZXNcclxuXHJcbmludGVyZmFjZSBVbnNwbGFzaFNlYXJjaFJlc3BvbnNlIHtcclxuXHRyZXN1bHRzOiBVbnNwbGFzaFBob3RvW107XHJcbn1cclxuXHJcbmludGVyZmFjZSBQZXhlbHNTZWFyY2hSZXNwb25zZSB7XHJcblx0cGhvdG9zOiBQZXhlbHNQaG90b1tdO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgUGl4YWJheVNlYXJjaFJlc3BvbnNlIHtcclxuXHRoaXRzOiBQaXhhYmF5SGl0W107XHJcbn1cclxuXHJcbmludGVyZmFjZSBVbnNwbGFzaFBob3RvIHtcclxuXHRpZDogc3RyaW5nO1xyXG5cdHdpZHRoOiBudW1iZXI7XHJcblx0aGVpZ2h0OiBudW1iZXI7XHJcblx0ZGVzY3JpcHRpb246IHN0cmluZyB8IG51bGw7XHJcblx0YWx0X2Rlc2NyaXB0aW9uOiBzdHJpbmcgfCBudWxsO1xyXG5cdHVybHM6IHtcclxuXHRcdHJhdzogc3RyaW5nO1xyXG5cdFx0ZnVsbDogc3RyaW5nO1xyXG5cdFx0cmVndWxhcjogc3RyaW5nO1xyXG5cdFx0c21hbGw6IHN0cmluZztcclxuXHRcdHRodW1iOiBzdHJpbmc7XHJcblx0fTtcclxuXHRsaW5rczoge1xyXG5cdFx0aHRtbDogc3RyaW5nO1xyXG5cdFx0ZG93bmxvYWQ6IHN0cmluZztcclxuXHRcdGRvd25sb2FkX2xvY2F0aW9uPzogc3RyaW5nO1xyXG5cdH07XHJcblx0dXNlcjoge1xyXG5cdFx0bmFtZTogc3RyaW5nO1xyXG5cdFx0bGlua3M6IHtcclxuXHRcdFx0aHRtbDogc3RyaW5nO1xyXG5cdFx0fTtcclxuXHR9O1xyXG59XHJcblxyXG5pbnRlcmZhY2UgUGV4ZWxzUGhvdG8ge1xyXG5cdGlkOiBudW1iZXI7XHJcblx0d2lkdGg6IG51bWJlcjtcclxuXHRoZWlnaHQ6IG51bWJlcjtcclxuXHR1cmw6IHN0cmluZztcclxuXHRwaG90b2dyYXBoZXI6IHN0cmluZztcclxuXHRwaG90b2dyYXBoZXJfdXJsOiBzdHJpbmc7XHJcblx0YWx0OiBzdHJpbmcgfCBudWxsO1xyXG5cdHNyYzoge1xyXG5cdFx0b3JpZ2luYWw6IHN0cmluZztcclxuXHRcdGxhcmdlOiBzdHJpbmc7XHJcblx0XHRtZWRpdW06IHN0cmluZztcclxuXHRcdHNtYWxsOiBzdHJpbmc7XHJcblx0XHR0aW55OiBzdHJpbmc7XHJcblx0fTtcclxufVxyXG5cclxuaW50ZXJmYWNlIFBpeGFiYXlIaXQge1xyXG5cdGlkOiBudW1iZXI7XHJcblx0cGFnZVVSTDogc3RyaW5nO1xyXG5cdHByZXZpZXdVUkw6IHN0cmluZztcclxuXHR3ZWJmb3JtYXRVUkw6IHN0cmluZztcclxuXHRsYXJnZUltYWdlVVJMOiBzdHJpbmc7XHJcblx0aW1hZ2VXaWR0aDogbnVtYmVyO1xyXG5cdGltYWdlSGVpZ2h0OiBudW1iZXI7XHJcblx0dGFnczogc3RyaW5nO1xyXG5cdHVzZXI6IHN0cmluZztcclxuXHR1c2VyX2lkOiBudW1iZXI7XHJcbn1cclxuIiwgIi8qKlxyXG4gKiBMb2NhbCBDb252ZXJzaW9uIFNlcnZpY2VcclxuICogQ29udmVydHMgcmVtb3RlL2V4dGVybmFsIGltYWdlcyB0byBsb2NhbCBmaWxlc1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IEFwcCwgVEZpbGUsIHJlcXVlc3RVcmwgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IEltYWdlTWFuYWdlclNldHRpbmdzIH0gZnJvbSAnLi4vdHlwZXMnO1xyXG5pbXBvcnQgeyBTdG9yYWdlTWFuYWdlciB9IGZyb20gJy4vU3RvcmFnZU1hbmFnZXInO1xyXG5pbXBvcnQgeyBJbWFnZVByb2Nlc3NvciB9IGZyb20gJy4vSW1hZ2VQcm9jZXNzb3InO1xyXG5pbXBvcnQgeyBpc01hcmtkb3duRmlsZSB9IGZyb20gJy4uL3V0aWxzL21keC1mcm9udG1hdHRlcic7XHJcblxyXG4vLyBSZWdleCBwYXR0ZXJucyBmb3IgZmluZGluZyBleHRlcm5hbCBpbWFnZXNcclxuLy8gVXBkYXRlZCB0byBoYW5kbGUgVVJMcyB3aXRoIHF1ZXJ5IHBhcmFtZXRlcnMgYW5kIGZyYWdtZW50c1xyXG5jb25zdCBNQVJLRE9XTl9JTUFHRV9SRUdFWCA9IC8hXFxbKFteXFxdXSopXFxdXFwoKGh0dHBzPzpcXC9cXC9bXlxccyldKylcXCkvZztcclxuY29uc3QgSFRNTF9JTUFHRV9SRUdFWCA9IC88aW1nW14+XStzcmM9W1wiJ10oaHR0cHM/OlxcL1xcL1teXCInXSspW1wiJ11bXj5dKj4vZztcclxuXHJcbmV4cG9ydCBjbGFzcyBMb2NhbENvbnZlcnNpb25TZXJ2aWNlIHtcclxuXHRwcml2YXRlIGFwcDogQXBwO1xyXG5cdHByaXZhdGUgc2V0dGluZ3M6IEltYWdlTWFuYWdlclNldHRpbmdzO1xyXG5cdHByaXZhdGUgc3RvcmFnZU1hbmFnZXI6IFN0b3JhZ2VNYW5hZ2VyO1xyXG5cdHByaXZhdGUgaW1hZ2VQcm9jZXNzb3I6IEltYWdlUHJvY2Vzc29yO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgc2V0dGluZ3M6IEltYWdlTWFuYWdlclNldHRpbmdzLCBzdG9yYWdlTWFuYWdlcjogU3RvcmFnZU1hbmFnZXIsIGltYWdlUHJvY2Vzc29yOiBJbWFnZVByb2Nlc3Nvciwgb2JzZXJ2YWJsZT86IHsgc3Vic2NyaWJlKGZuOiAoc2V0dGluZ3M6IEltYWdlTWFuYWdlclNldHRpbmdzKSA9PiB2b2lkKTogdm9pZCB9KSB7XHJcblx0XHR0aGlzLmFwcCA9IGFwcDtcclxuXHRcdHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuXHRcdHRoaXMuc3RvcmFnZU1hbmFnZXIgPSBzdG9yYWdlTWFuYWdlcjtcclxuXHRcdHRoaXMuaW1hZ2VQcm9jZXNzb3IgPSBpbWFnZVByb2Nlc3NvcjtcclxuXHJcblx0XHQvLyBTdWJzY3JpYmUgdG8gc2V0dGluZ3MgdXBkYXRlcyBpZiBvYnNlcnZhYmxlIGlzIHByb3ZpZGVkXHJcblx0XHRvYnNlcnZhYmxlPy5zdWJzY3JpYmUoKG5ld1NldHRpbmdzKSA9PiB7XHJcblx0XHRcdHRoaXMudXBkYXRlU2V0dGluZ3MobmV3U2V0dGluZ3MpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBVcGRhdGUgc2V0dGluZ3MgcmVmZXJlbmNlXHJcblx0ICovXHJcblx0dXBkYXRlU2V0dGluZ3Moc2V0dGluZ3M6IEltYWdlTWFuYWdlclNldHRpbmdzKTogdm9pZCB7XHJcblx0XHR0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XHJcblx0XHR0aGlzLmltYWdlUHJvY2Vzc29yPy51cGRhdGVTZXR0aW5ncyhzZXR0aW5ncyk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBQcm9jZXNzIGEgZmlsZSB0byBjb252ZXJ0IGFsbCByZW1vdGUgaW1hZ2VzIHRvIGxvY2FsXHJcblx0ICogQHBhcmFtIGZpbGUgLSBUaGUgZmlsZSB0byBwcm9jZXNzXHJcblx0ICogQHBhcmFtIGlzQmFja2dyb3VuZCAtIElmIHRydWUsIHNraXAgY29udmVyc2lvbiBpZiB1c2VyIGludGVyYWN0aW9uIChtb2RhbCkgd291bGQgYmUgcmVxdWlyZWRcclxuXHQgKi9cclxuXHRhc3luYyBwcm9jZXNzRmlsZShmaWxlOiBURmlsZSwgaXNCYWNrZ3JvdW5kOiBib29sZWFuID0gZmFsc2UpOiBQcm9taXNlPG51bWJlcj4ge1xyXG5cdFx0aWYgKCFpc01hcmtkb3duRmlsZShmaWxlKSkge1xyXG5cdFx0XHRyZXR1cm4gMDtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcclxuXHRcdGNvbnN0IHsgbmV3Q29udGVudCwgY291bnQgfSA9IGF3YWl0IHRoaXMucHJvY2Vzc0NvbnRlbnQoY29udGVudCwgZmlsZSwgaXNCYWNrZ3JvdW5kKTtcclxuXHJcblx0XHRpZiAoY291bnQgPiAwKSB7XHJcblx0XHRcdGF3YWl0IHRoaXMuYXBwLnZhdWx0Lm1vZGlmeShmaWxlLCBuZXdDb250ZW50KTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gY291bnQ7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBQcm9jZXNzIGNvbnRlbnQgYW5kIHJlcGxhY2UgcmVtb3RlIGltYWdlcyB3aXRoIGxvY2FsXHJcblx0ICovXHJcblx0cHJpdmF0ZSBhc3luYyBwcm9jZXNzQ29udGVudChcclxuXHRcdGNvbnRlbnQ6IHN0cmluZyxcclxuXHRcdHNvdXJjZUZpbGU6IFRGaWxlLFxyXG5cdFx0aXNCYWNrZ3JvdW5kOiBib29sZWFuID0gZmFsc2VcclxuXHQpOiBQcm9taXNlPHsgbmV3Q29udGVudDogc3RyaW5nOyBjb3VudDogbnVtYmVyIH0+IHtcclxuXHRcdGxldCBuZXdDb250ZW50ID0gY29udGVudDtcclxuXHRcdGxldCBjb3VudCA9IDA7XHJcblxyXG5cdFx0Ly8gRmluZCBhbGwgZXh0ZXJuYWwgaW1hZ2UgVVJMcyAobm93IGFzeW5jIC0gdmVyaWZpZXMgd2l0aCBIRUFEIHJlcXVlc3RzKVxyXG5cdFx0Y29uc3QgZXh0ZXJuYWxJbWFnZXMgPSBhd2FpdCB0aGlzLmZpbmRFeHRlcm5hbEltYWdlcyhjb250ZW50LCBzb3VyY2VGaWxlKTtcclxuXHJcblx0XHRmb3IgKGNvbnN0IGltYWdlIG9mIGV4dGVybmFsSW1hZ2VzKSB7XHJcblx0XHRcdHRyeSB7XHJcblx0XHRcdFx0Ly8gSWYgYmFja2dyb3VuZCBhbmQgbW9kYWxzIGFyZSByZXF1aXJlZCBidXQgbm90IGFsbG93ZWQsIHNraXAgdGhpcyBpbWFnZVxyXG5cdFx0XHRcdC8vIE5vdGU6IGF1dG9SZW5hbWUgc2V0dGluZyBpcyBoYW5kbGVkIHdpdGhpbiByZW5hbWVJbWFnZUZpbGUsIFxyXG5cdFx0XHRcdC8vIGJ1dCB3ZSBjaGVjayBpdCBoZXJlIHRvIGF2b2lkIGRvd25sb2FkaW5nIGlmIHdlJ3JlIGdvaW5nIHRvIHNraXAgYW55d2F5XHJcblx0XHRcdFx0aWYgKGlzQmFja2dyb3VuZCAmJiAhdGhpcy5zZXR0aW5ncy5hdXRvUmVuYW1lKSB7XHJcblx0XHRcdFx0XHQvLyBTa2lwIGNvbnZlcnNpb24gdG8gYXZvaWQgc2hvd2luZyBhIG1vZGFsIGluIHRoZSBiYWNrZ3JvdW5kXHJcblx0XHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIERvd25sb2FkIGFuZCBzYXZlIHRlbXBvcmFyaWx5XHJcblx0XHRcdFx0Y29uc3QgdGVtcFBhdGggPSBhd2FpdCB0aGlzLmRvd25sb2FkQW5kU2F2ZShpbWFnZS51cmwsIHNvdXJjZUZpbGUpO1xyXG5cdFx0XHRcdGlmICghdGVtcFBhdGgpIHtcclxuXHRcdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Y29uc3QgdGVtcEZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodGVtcFBhdGgpO1xyXG5cdFx0XHRcdGlmICghKHRlbXBGaWxlIGluc3RhbmNlb2YgVEZpbGUpKSB7XHJcblx0XHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIFNob3cgcmVuYW1lIG1vZGFsIGlmIGVuYWJsZWQgKGFsd2F5cyBzaG93IGZvciBjb252ZXJzaW9uLCB1bmxlc3MgYXV0by1yZW5hbWUgaXMgb24pXHJcblx0XHRcdFx0bGV0IGZpbmFsRmlsZTogVEZpbGUgPSB0ZW1wRmlsZTtcclxuXHJcblx0XHRcdFx0Ly8gR2VuZXJhdGUgc3VnZ2VzdGVkIG5hbWUgZnJvbSBhbHQgdGV4dCBvciBVUkxcclxuXHRcdFx0XHRjb25zdCBzdWdnZXN0ZWROYW1lID0gaW1hZ2UuYWx0XHJcblx0XHRcdFx0XHQ/IHRoaXMuc3RvcmFnZU1hbmFnZXIuc2FuaXRpemVGaWxlTmFtZShpbWFnZS5hbHQpXHJcblx0XHRcdFx0XHQ6IHRlbXBGaWxlLmJhc2VuYW1lO1xyXG5cclxuXHRcdFx0XHQvLyBVc2UgSW1hZ2VQcm9jZXNzb3IncyByZW5hbWUgZmxvdyAod2hpY2ggaGFuZGxlcyBkZXNjcmlwdGl2ZSBpbWFnZXMgYW5kIHJlbmFtZSBtb2RhbClcclxuXHRcdFx0XHQvLyBGb3IgY29udmVyc2lvbiwgYWx3YXlzIHNob3cgcmVuYW1lIG1vZGFsIHVubGVzcyBhdXRvLXJlbmFtZSBpcyBlbmFibGVkXHJcblx0XHRcdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5pbWFnZVByb2Nlc3Nvci5yZW5hbWVJbWFnZUZpbGUoXHJcblx0XHRcdFx0XHR0ZW1wRmlsZSxcclxuXHRcdFx0XHRcdHN1Z2dlc3RlZE5hbWUsXHJcblx0XHRcdFx0XHRzb3VyY2VGaWxlXHJcblx0XHRcdFx0KTtcclxuXHJcblx0XHRcdFx0aWYgKHJlc3VsdCAmJiByZXN1bHQuZmlsZSkge1xyXG5cdFx0XHRcdFx0ZmluYWxGaWxlID0gcmVzdWx0LmZpbGU7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdC8vIFVzZXIgY2FuY2VsbGVkIHJlbmFtZSwgc2tpcCB0aGlzIGltYWdlXHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwcC5maWxlTWFuYWdlci50cmFzaEZpbGUodGVtcEZpbGUpO1xyXG5cdFx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBVcGRhdGUgdGhlIGNvbnRlbnQgd2l0aCB0aGUgZmluYWwgZmlsZVxyXG5cdFx0XHRcdC8vIFRoZSByZXBsYWNlbWVudCBmdW5jdGlvbiBuZWVkcyB0aGUgZnVsbCBwYXRoIHRvIGdlbmVyYXRlIHByb3BlciByZWxhdGl2ZSBsaW5rc1xyXG5cdFx0XHRcdG5ld0NvbnRlbnQgPSBuZXdDb250ZW50LnJlcGxhY2UoaW1hZ2UuZnVsbE1hdGNoLCBpbWFnZS5yZXBsYWNlbWVudChmaW5hbEZpbGUucGF0aCkpO1xyXG5cdFx0XHRcdGNvdW50Kys7XHJcblx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdFx0Y29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGNvbnZlcnQgaW1hZ2U6ICR7aW1hZ2UudXJsfWAsIGVycm9yKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB7IG5ld0NvbnRlbnQsIGNvdW50IH07XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDaGVjayBpZiBhIHBvc2l0aW9uIGluIGNvbnRlbnQgaXMgaW5zaWRlIGEgY29kZSBibG9ja1xyXG5cdCAqL1xyXG5cdHByaXZhdGUgaXNJbnNpZGVDb2RlQmxvY2soY29udGVudDogc3RyaW5nLCBwb3NpdGlvbjogbnVtYmVyKTogYm9vbGVhbiB7XHJcblx0XHQvLyBDaGVjayBmb3IgZmVuY2VkIGNvZGUgYmxvY2tzIChgYGAuLi5gYGApXHJcblx0XHRjb25zdCBmZW5jZWRDb2RlQmxvY2tSZWdleCA9IC9gYGBbXFxzXFxTXSo/YGBgL2c7XHJcblx0XHRsZXQgbWF0Y2g7XHJcblx0XHR3aGlsZSAoKG1hdGNoID0gZmVuY2VkQ29kZUJsb2NrUmVnZXguZXhlYyhjb250ZW50KSkgIT09IG51bGwpIHtcclxuXHRcdFx0Y29uc3Qgc3RhcnQgPSBtYXRjaC5pbmRleDtcclxuXHRcdFx0Y29uc3QgZW5kID0gc3RhcnQgKyBtYXRjaFswXS5sZW5ndGg7XHJcblx0XHRcdGlmIChwb3NpdGlvbiA+PSBzdGFydCAmJiBwb3NpdGlvbiA8IGVuZCkge1xyXG5cdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQ2hlY2sgZm9yIGlubGluZSBjb2RlIChgLi4uYClcclxuXHRcdC8vIFdlIG5lZWQgdG8gYmUgY2FyZWZ1bCAtIG9ubHkgbWF0Y2ggYmFja3RpY2tzIHRoYXQgYXJlbid0IHBhcnQgb2YgZmVuY2VkIGJsb2Nrc1xyXG5cdFx0Ly8gRmlyc3QsIG1hcmsgYWxsIGZlbmNlZCBjb2RlIGJsb2NrIHBvc2l0aW9uc1xyXG5cdFx0Y29uc3QgZmVuY2VkUG9zaXRpb25zOiBib29sZWFuW10gPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiBjb250ZW50Lmxlbmd0aCB9LCAoKSA9PiBmYWxzZSk7XHJcblx0XHRjb25zdCBmZW5jZWRSZWdleCA9IC9gYGBbXFxzXFxTXSo/YGBgL2c7XHJcblx0XHR3aGlsZSAoKG1hdGNoID0gZmVuY2VkUmVnZXguZXhlYyhjb250ZW50KSkgIT09IG51bGwpIHtcclxuXHRcdFx0Zm9yIChsZXQgaSA9IG1hdGNoLmluZGV4OyBpIDwgbWF0Y2guaW5kZXggKyBtYXRjaFswXS5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdGZlbmNlZFBvc2l0aW9uc1tpXSA9IHRydWU7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBOb3cgY2hlY2sgZm9yIGlubGluZSBjb2RlLCBidXQgc2tpcCBwb3NpdGlvbnMgaW5zaWRlIGZlbmNlZCBibG9ja3NcclxuXHRcdGNvbnN0IGlubGluZUNvZGVSZWdleCA9IC9gW15gXFxuXStgL2c7XHJcblx0XHR3aGlsZSAoKG1hdGNoID0gaW5saW5lQ29kZVJlZ2V4LmV4ZWMoY29udGVudCkpICE9PSBudWxsKSB7XHJcblx0XHRcdC8vIFNraXAgaWYgdGhpcyBtYXRjaCBpcyBpbnNpZGUgYSBmZW5jZWQgY29kZSBibG9ja1xyXG5cdFx0XHRpZiAoZmVuY2VkUG9zaXRpb25zW21hdGNoLmluZGV4XSkge1xyXG5cdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHR9XHJcblx0XHRcdGNvbnN0IHN0YXJ0ID0gbWF0Y2guaW5kZXg7XHJcblx0XHRcdGNvbnN0IGVuZCA9IHN0YXJ0ICsgbWF0Y2hbMF0ubGVuZ3RoO1xyXG5cdFx0XHRpZiAocG9zaXRpb24gPj0gc3RhcnQgJiYgcG9zaXRpb24gPCBlbmQpIHtcclxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBmYWxzZTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEZpbmQgYWxsIGV4dGVybmFsIGltYWdlcyBpbiBjb250ZW50XHJcblx0ICogVmVyaWZpZXMgZWFjaCBVUkwgd2l0aCBIRUFEIHJlcXVlc3QgdG8gZW5zdXJlIGl0IGFjdHVhbGx5IHNlcnZlcyBhbiBpbWFnZVxyXG5cdCAqL1xyXG5cdHByaXZhdGUgYXN5bmMgZmluZEV4dGVybmFsSW1hZ2VzKGNvbnRlbnQ6IHN0cmluZywgc291cmNlRmlsZTogVEZpbGUpOiBQcm9taXNlPEV4dGVybmFsSW1hZ2VNYXRjaFtdPiB7XHJcblx0XHRjb25zdCBjYW5kaWRhdGVNYXRjaGVzOiBBcnJheTx7XHJcblx0XHRcdGZ1bGxNYXRjaDogc3RyaW5nO1xyXG5cdFx0XHR1cmw6IHN0cmluZztcclxuXHRcdFx0YWx0Pzogc3RyaW5nO1xyXG5cdFx0XHRyZXBsYWNlbWVudDogKGxvY2FsUGF0aDogc3RyaW5nKSA9PiBzdHJpbmc7XHJcblx0XHR9PiA9IFtdO1xyXG5cclxuXHRcdC8vIE1hcmtkb3duIGltYWdlczogIVthbHRdKHVybClcclxuXHRcdGxldCBtYXRjaDtcclxuXHRcdGNvbnN0IG1kUmVnZXggPSBuZXcgUmVnRXhwKE1BUktET1dOX0lNQUdFX1JFR0VYLnNvdXJjZSwgJ2cnKTtcclxuXHRcdHdoaWxlICgobWF0Y2ggPSBtZFJlZ2V4LmV4ZWMoY29udGVudCkpICE9PSBudWxsKSB7XHJcblx0XHRcdGNvbnN0IG1hdGNoSW5kZXggPSBtYXRjaC5pbmRleDtcclxuXHRcdFx0Ly8gU2tpcCBpZiBpbnNpZGUgYSBjb2RlIGJsb2NrXHJcblx0XHRcdGlmICh0aGlzLmlzSW5zaWRlQ29kZUJsb2NrKGNvbnRlbnQsIG1hdGNoSW5kZXgpKSB7XHJcblx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGNvbnN0IGZ1bGxNYXRjaCA9IG1hdGNoWzBdO1xyXG5cdFx0XHRjb25zdCBhbHQgPSBtYXRjaFsxXSA/PyAnJztcclxuXHRcdFx0Y29uc3QgdXJsID0gbWF0Y2hbMl07XHJcblx0XHRcdC8vIE9ubHkgcHJvY2VzcyBpZiBpdCdzIGFuIGV4dGVybmFsIFVSTCBhbmQgcGFzc2VzIHByZWxpbWluYXJ5IGZpbHRlclxyXG5cdFx0XHRpZiAodXJsICYmIHRoaXMuaXNFeHRlcm5hbFVybCh1cmwpICYmIHRoaXMuaXNJbWFnZVVybCh1cmwpKSB7XHJcblx0XHRcdFx0Y29uc3Qgc291cmNlRmlsZVJlZiA9IHNvdXJjZUZpbGU7IC8vIENhcHR1cmUgZm9yIGNsb3N1cmVcclxuXHRcdFx0XHRjYW5kaWRhdGVNYXRjaGVzLnB1c2goe1xyXG5cdFx0XHRcdFx0ZnVsbE1hdGNoLFxyXG5cdFx0XHRcdFx0dXJsLFxyXG5cdFx0XHRcdFx0YWx0LFxyXG5cdFx0XHRcdFx0cmVwbGFjZW1lbnQ6IChsb2NhbFBhdGg6IHN0cmluZykgPT4ge1xyXG5cdFx0XHRcdFx0XHQvLyBHZXQgdGhlIHNhdmVkIGZpbGUgdG8gZ2VuZXJhdGUgcHJvcGVyIG1hcmtkb3duIGxpbmtcclxuXHRcdFx0XHRcdFx0Y29uc3Qgc2F2ZWRGaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGxvY2FsUGF0aCk7XHJcblx0XHRcdFx0XHRcdGlmIChzYXZlZEZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGxpbmsgPSB0aGlzLnN0b3JhZ2VNYW5hZ2VyLmdlbmVyYXRlTWFya2Rvd25MaW5rKHNhdmVkRmlsZSwgc291cmNlRmlsZVJlZi5wYXRoKTtcclxuXHRcdFx0XHRcdFx0XHQvLyBJZiB3ZSBoYXZlIGFsdCB0ZXh0IGFuZCBsaW5rIGlzIHdpa2lsaW5rLCBhZGQgZGlzcGxheSB0ZXh0XHJcblx0XHRcdFx0XHRcdFx0aWYgKGFsdCAmJiBsaW5rLnN0YXJ0c1dpdGgoJyFbJykgJiYgbGluay5pbmNsdWRlcygnXV0nKSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGxpbmsucmVwbGFjZSgnXV0nLCBgfCR7YWx0fV1dYCk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdC8vIEZvciBtYXJrZG93biBsaW5rcywgcmVwbGFjZSB0aGUgVVJMIGJ1dCBrZWVwIGFsdFxyXG5cdFx0XHRcdFx0XHRcdGlmIChsaW5rLnN0YXJ0c1dpdGgoJyFbJykgJiYgbGluay5pbmNsdWRlcygnXSgnKSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gRXh0cmFjdCBqdXN0IHRoZSBwYXRoIHBhcnQgZnJvbSB0aGUgZ2VuZXJhdGVkIGxpbmsgYW5kIHVzZSBpdCB3aXRoIGFsdFxyXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgcGF0aE1hdGNoID0gbGluay5tYXRjaCgvXFxdXFwoKFteKV0rKVxcKS8pO1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKHBhdGhNYXRjaCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gYCFbJHthbHR9XSgke3BhdGhNYXRjaFsxXX0pYDtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdHJldHVybiBgIVske2FsdH1dKCR7ZW5jb2RlVVJJKGxvY2FsUGF0aCl9KWA7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdHJldHVybiBsaW5rO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdC8vIEZhbGxiYWNrIC0gdXNlIHJlbGF0aXZlIHBhdGhcclxuXHRcdFx0XHRcdFx0Y29uc3QgbG9jYWxGaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGxvY2FsUGF0aCk7XHJcblx0XHRcdFx0XHRcdGlmIChsb2NhbEZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHJlbGF0aXZlUGF0aCA9IHRoaXMuc3RvcmFnZU1hbmFnZXIuZ2V0UmVsYXRpdmVQYXRoKHNvdXJjZUZpbGVSZWYsIGxvY2FsRmlsZSk7XHJcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGAhWyR7YWx0fV0oJHtlbmNvZGVVUkkocmVsYXRpdmVQYXRoKX0pYDtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRyZXR1cm4gYCFbJHthbHR9XSgke2VuY29kZVVSSShsb2NhbFBhdGgpfSlgO1xyXG5cdFx0XHRcdFx0fSxcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEhUTUwgaW1hZ2VzOiA8aW1nIHNyYz1cInVybFwiPlxyXG5cdFx0Y29uc3QgaHRtbFJlZ2V4ID0gbmV3IFJlZ0V4cChIVE1MX0lNQUdFX1JFR0VYLnNvdXJjZSwgJ2cnKTtcclxuXHRcdHdoaWxlICgobWF0Y2ggPSBodG1sUmVnZXguZXhlYyhjb250ZW50KSkgIT09IG51bGwpIHtcclxuXHRcdFx0Y29uc3QgbWF0Y2hJbmRleCA9IG1hdGNoLmluZGV4O1xyXG5cdFx0XHQvLyBTa2lwIGlmIGluc2lkZSBhIGNvZGUgYmxvY2tcclxuXHRcdFx0aWYgKHRoaXMuaXNJbnNpZGVDb2RlQmxvY2soY29udGVudCwgbWF0Y2hJbmRleCkpIHtcclxuXHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRjb25zdCBmdWxsTWF0Y2ggPSBtYXRjaFswXTtcclxuXHRcdFx0Y29uc3QgdXJsID0gbWF0Y2hbMV07XHJcblx0XHRcdC8vIE9ubHkgcHJvY2VzcyBpZiBpdCdzIGFuIGV4dGVybmFsIFVSTCBhbmQgcGFzc2VzIHByZWxpbWluYXJ5IGZpbHRlclxyXG5cdFx0XHRpZiAodXJsICYmIHRoaXMuaXNFeHRlcm5hbFVybCh1cmwpICYmIHRoaXMuaXNJbWFnZVVybCh1cmwpKSB7XHJcblx0XHRcdFx0Y2FuZGlkYXRlTWF0Y2hlcy5wdXNoKHtcclxuXHRcdFx0XHRcdGZ1bGxNYXRjaCxcclxuXHRcdFx0XHRcdHVybCxcclxuXHRcdFx0XHRcdHJlcGxhY2VtZW50OiAobG9jYWxQYXRoOiBzdHJpbmcpID0+IGAhW10oJHtlbmNvZGVVUkkobG9jYWxQYXRoKX0pYCxcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFZlcmlmeSBlYWNoIGNhbmRpZGF0ZSBVUkwgd2l0aCBIRUFEIHJlcXVlc3RcclxuXHRcdGNvbnN0IHZlcmlmaWVkTWF0Y2hlczogRXh0ZXJuYWxJbWFnZU1hdGNoW10gPSBbXTtcclxuXHRcdGZvciAoY29uc3QgY2FuZGlkYXRlIG9mIGNhbmRpZGF0ZU1hdGNoZXMpIHtcclxuXHRcdFx0Y29uc3QgaXNJbWFnZSA9IGF3YWl0IHRoaXMudmVyaWZ5SW1hZ2VVcmwoY2FuZGlkYXRlLnVybCk7XHJcblx0XHRcdGlmIChpc0ltYWdlKSB7XHJcblx0XHRcdFx0dmVyaWZpZWRNYXRjaGVzLnB1c2goY2FuZGlkYXRlKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB2ZXJpZmllZE1hdGNoZXM7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDaGVjayBpZiBhIFVSTCBpcyBleHRlcm5hbFxyXG5cdCAqL1xyXG5cdHByaXZhdGUgaXNFeHRlcm5hbFVybCh1cmw6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Y29uc3QgcGFyc2VkID0gbmV3IFVSTCh1cmwpO1xyXG5cdFx0XHRyZXR1cm4gWydodHRwOicsICdodHRwczonXS5pbmNsdWRlcyhwYXJzZWQucHJvdG9jb2wpO1xyXG5cdFx0fSBjYXRjaCB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENoZWNrIGlmIGEgVVJMIHNob3VsZCBiZSBjb25zaWRlcmVkIGZvciBpbWFnZSBjb252ZXJzaW9uXHJcblx0ICogUmV0dXJucyBmYWxzZSBmb3Iga25vd24gbm9uLWltYWdlIGVtYmVkIGRvbWFpbnMgKFlvdVR1YmUsIGV0Yy4pXHJcblx0ICogVGhpcyBpcyBhIHByZWxpbWluYXJ5IGZpbHRlciAtIGFjdHVhbCBpbWFnZSB2ZXJpZmljYXRpb24gaGFwcGVucyB2aWEgSEVBRCByZXF1ZXN0XHJcblx0ICovXHJcblx0cHJpdmF0ZSBpc0ltYWdlVXJsKHVybDogc3RyaW5nKTogYm9vbGVhbiB7XHJcblx0XHR0cnkge1xyXG5cdFx0XHRjb25zdCBwYXJzZWQgPSBuZXcgVVJMKHVybCk7XHJcblx0XHRcdGNvbnN0IGhvc3RuYW1lID0gcGFyc2VkLmhvc3RuYW1lLnRvTG93ZXJDYXNlKCk7XHJcblxyXG5cdFx0XHQvLyBFeGNsdWRlIGtub3duIG5vbi1pbWFnZSBlbWJlZCBkb21haW5zXHJcblx0XHRcdGNvbnN0IG5vbkltYWdlRG9tYWlucyA9IFtcclxuXHRcdFx0XHQneW91dHViZS5jb20nLFxyXG5cdFx0XHRcdCd3d3cueW91dHViZS5jb20nLFxyXG5cdFx0XHRcdCd5b3V0dS5iZScsXHJcblx0XHRcdFx0J20ueW91dHViZS5jb20nLFxyXG5cdFx0XHRcdCd5b3V0dWJlLW5vY29va2llLmNvbScsXHJcblx0XHRcdFx0J3d3dy55b3V0dWJlLW5vY29va2llLmNvbScsXHJcblx0XHRcdFx0J3ZpbWVvLmNvbScsXHJcblx0XHRcdFx0J3d3dy52aW1lby5jb20nLFxyXG5cdFx0XHRcdCdzcG90aWZ5LmNvbScsXHJcblx0XHRcdFx0J29wZW4uc3BvdGlmeS5jb20nLFxyXG5cdFx0XHRcdCdzb3VuZGNsb3VkLmNvbScsXHJcblx0XHRcdFx0J3d3dy5zb3VuZGNsb3VkLmNvbScsXHJcblx0XHRcdF07XHJcblxyXG5cdFx0XHRpZiAobm9uSW1hZ2VEb21haW5zLnNvbWUoZG9tYWluID0+IGhvc3RuYW1lID09PSBkb21haW4gfHwgaG9zdG5hbWUuZW5kc1dpdGgoJy4nICsgZG9tYWluKSkpIHtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIEFsbG93IGFsbCBvdGhlciBleHRlcm5hbCBVUkxzIC0gd2UnbGwgdmVyaWZ5IHdpdGggSEVBRCByZXF1ZXN0XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fSBjYXRjaCB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFZlcmlmeSBpZiBhIFVSTCBhY3R1YWxseSBzZXJ2ZXMgYW4gaW1hZ2UgYnkgY2hlY2tpbmcgQ29udGVudC1UeXBlIGhlYWRlclxyXG5cdCAqIFVzZXMgSEVBRCByZXF1ZXN0IHRvIGF2b2lkIGRvd25sb2FkaW5nIG5vbi1pbWFnZSBjb250ZW50XHJcblx0ICovXHJcblx0cHJpdmF0ZSBhc3luYyB2ZXJpZnlJbWFnZVVybCh1cmw6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHsgdXJsLCBtZXRob2Q6ICdIRUFEJyB9KTtcclxuXHRcdFx0Y29uc3QgY29udGVudFR5cGUgPSByZXNwb25zZS5oZWFkZXJzWydjb250ZW50LXR5cGUnXT8udG9Mb3dlckNhc2UoKSA/PyAnJztcclxuXHJcblx0XHRcdC8vIENoZWNrIGlmIENvbnRlbnQtVHlwZSBzdGFydHMgd2l0aCAnaW1hZ2UvJ1xyXG5cdFx0XHRyZXR1cm4gY29udGVudFR5cGUuc3RhcnRzV2l0aCgnaW1hZ2UvJyk7XHJcblx0XHR9IGNhdGNoIHtcclxuXHRcdFx0Ly8gT24gZXJyb3IgKG5ldHdvcmsgaXNzdWVzLCBDT1JTLCBldGMuKSwgcmV0dXJuIGZhbHNlIHRvIHNraXAgdGhpcyBVUkxcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogRG93bmxvYWQgYW4gaW1hZ2UgYW5kIHNhdmUgaXQgbG9jYWxseVxyXG5cdCAqIEluY2x1ZGVzIENvbnRlbnQtVHlwZSB2YWxpZGF0aW9uIGFzIGEgc2FmZXR5IG5ldFxyXG5cdCAqL1xyXG5cdHByaXZhdGUgYXN5bmMgZG93bmxvYWRBbmRTYXZlKHVybDogc3RyaW5nLCBzb3VyY2VGaWxlOiBURmlsZSk6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHsgdXJsIH0pO1xyXG5cdFx0XHRpZiAocmVzcG9uc2Uuc3RhdHVzID49IDQwMCkge1xyXG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcihgSFRUUCAke3Jlc3BvbnNlLnN0YXR1c31gKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Y29uc3QgY29udGVudFR5cGUgPSByZXNwb25zZS5oZWFkZXJzWydjb250ZW50LXR5cGUnXSA/PyAnJztcclxuXHJcblx0XHRcdC8vIFNhZmV0eSBuZXQ6IHZlcmlmeSBDb250ZW50LVR5cGUgaXMgYWN0dWFsbHkgYW4gaW1hZ2VcclxuXHRcdFx0Ly8gVGhpcyBwcm92aWRlcyBkZWZlbnNlIGluIGRlcHRoIGluIGNhc2UgSEVBRCByZXF1ZXN0IHdhcyBieXBhc3NlZCBvciBDb250ZW50LVR5cGUgY2hhbmdlZFxyXG5cdFx0XHRpZiAoIWNvbnRlbnRUeXBlLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aCgnaW1hZ2UvJykpIHtcclxuXHRcdFx0XHRjb25zb2xlLndhcm4oYFNraXBwaW5nICR7dXJsfTogQ29udGVudC1UeXBlIGlzICR7Y29udGVudFR5cGV9LCBub3QgYW4gaW1hZ2VgKTtcclxuXHRcdFx0XHRyZXR1cm4gbnVsbDtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Y29uc3QgZXh0ZW5zaW9uID0gdGhpcy5zdG9yYWdlTWFuYWdlci5nZXRFeHRlbnNpb25Gcm9tTWltZVR5cGUoY29udGVudFR5cGUpO1xyXG5cdFx0XHRjb25zdCBhcnJheUJ1ZmZlciA9IHJlc3BvbnNlLmFycmF5QnVmZmVyO1xyXG5cclxuXHRcdFx0Ly8gR2VuZXJhdGUgYSBuYW1lIGJhc2VkIG9uIFVSTCBvciBoYXNoXHJcblx0XHRcdGNvbnN0IHVybFBhdGggPSBuZXcgVVJMKHVybCkucGF0aG5hbWU7XHJcblx0XHRcdGNvbnN0IHVybEZpbGVOYW1lID0gdXJsUGF0aC5zcGxpdCgnLycpLnBvcCgpPy5zcGxpdCgnLicpWzBdID8/ICdpbWFnZSc7XHJcblx0XHRcdGNvbnN0IGJhc2VOYW1lID0gdGhpcy5zdG9yYWdlTWFuYWdlci5zYW5pdGl6ZUZpbGVOYW1lKHVybEZpbGVOYW1lKTtcclxuXHJcblx0XHRcdGNvbnN0IGZpbGVQYXRoID0gYXdhaXQgdGhpcy5zdG9yYWdlTWFuYWdlci5nZXRBdmFpbGFibGVQYXRoKGJhc2VOYW1lLCBleHRlbnNpb24sIHNvdXJjZUZpbGUpO1xyXG5cdFx0XHRhd2FpdCB0aGlzLnN0b3JhZ2VNYW5hZ2VyLnNhdmVGaWxlKGFycmF5QnVmZmVyLCBmaWxlUGF0aCk7XHJcblxyXG5cdFx0XHQvLyBSZXR1cm4gZnVsbCB2YXVsdCBwYXRoIC0gdGhlIHJlcGxhY2VtZW50IGZ1bmN0aW9uIHdpbGwgaGFuZGxlIGNvbnZlcnNpb25cclxuXHRcdFx0cmV0dXJuIGZpbGVQYXRoO1xyXG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGRvd25sb2FkICR7dXJsfTpgLCBlcnJvcik7XHJcblx0XHRcdHJldHVybiBudWxsO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogUHJvY2VzcyBhbGwgZmlsZXMgaW4gdGhlIHZhdWx0XHJcblx0ICovXHJcblx0YXN5bmMgcHJvY2Vzc0FsbEZpbGVzKCk6IFByb21pc2U8bnVtYmVyPiB7XHJcblx0XHRjb25zdCBmaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcclxuXHRcdGxldCB0b3RhbENvdW50ID0gMDtcclxuXHJcblx0XHRmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMpIHtcclxuXHRcdFx0aWYgKHRoaXMuc2V0dGluZ3Muc3VwcG9ydGVkRXh0ZW5zaW9ucy5pbmNsdWRlcyhmaWxlLmV4dGVuc2lvbikpIHtcclxuXHRcdFx0XHRjb25zdCBjb3VudCA9IGF3YWl0IHRoaXMucHJvY2Vzc0ZpbGUoZmlsZSk7XHJcblx0XHRcdFx0dG90YWxDb3VudCArPSBjb3VudDtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0b3RhbENvdW50O1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogUmVnaXN0ZXIgZXZlbnQgaGFuZGxlcnMgZm9yIGF1dG9tYXRpYyBjb252ZXJzaW9uXHJcblx0ICovXHJcblx0cmVnaXN0ZXJFdmVudEhhbmRsZXJzKFxyXG5cdFx0b25Ob3RlT3BlbjogKGZpbGU6IFRGaWxlKSA9PiB2b2lkLFxyXG5cdFx0b25Ob3RlU2F2ZTogKGZpbGU6IFRGaWxlKSA9PiB2b2lkXHJcblx0KTogdm9pZCB7XHJcblx0XHQvLyBUaGVzZSBoYW5kbGVycyBzaG91bGQgYmUgcmVnaXN0ZXJlZCBieSB0aGUgbWFpbiBwbHVnaW5cclxuXHRcdC8vIFRoaXMgbWV0aG9kIGlzIHByb3ZpZGVkIGZvciBkb2N1bWVudGF0aW9uIHB1cnBvc2VzXHJcblx0fVxyXG59XHJcblxyXG5pbnRlcmZhY2UgRXh0ZXJuYWxJbWFnZU1hdGNoIHtcclxuXHRmdWxsTWF0Y2g6IHN0cmluZztcclxuXHR1cmw6IHN0cmluZztcclxuXHRhbHQ/OiBzdHJpbmc7XHJcblx0cmVwbGFjZW1lbnQ6IChsb2NhbFBhdGg6IHN0cmluZykgPT4gc3RyaW5nO1xyXG59XHJcbiIsICIvKipcbiAqIEJhbm5lciBTZXJ2aWNlXG4gKiBIYW5kbGVzIGJhbm5lciBpbWFnZSByZW5kZXJpbmcgZnJvbSBmcm9udG1hdHRlciBwcm9wZXJ0aWVzXG4gKiBTdXBwb3J0cyBib3RoIE1EIGFuZCBNRFggZmlsZXMgdmlhIG1keC1mcm9udG1hdHRlciB1dGlsaXRpZXNcbiAqL1xuXG5pbXBvcnQge1xuXHRBcHAsXG5cdE1hcmtkb3duVmlldyxcblx0UGxhdGZvcm0sXG5cdFRGaWxlLFxuXHRXb3Jrc3BhY2VMZWFmLFxuXHRyZXF1ZXN0VXJsLFxufSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgKiBhcyBPYnNpZGlhbk1vZHVsZSBmcm9tICdvYnNpZGlhbic7XG5cbi8qKlxuICogSGVscGVyIHRvIHNldCBDU1MgcHJvcGVydGllcyBvbiBhbiBlbGVtZW50XG4gKiBVc2VzIHNldENzc1Byb3BlcnRpZXMgaWYgYXZhaWxhYmxlIChPYnNpZGlhbiAxLjExLjArKSwgZmFsbHMgYmFjayB0byBzdHlsZS5zZXRQcm9wZXJ0eVxuICovXG5mdW5jdGlvbiBzZXRDc3NQcm9wZXJ0aWVzKGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBwcm9wczogUmVjb3JkPHN0cmluZywgc3RyaW5nPik6IHZvaWQge1xuXHQvLyBUcnkgdG8gdXNlIHNldENzc1Byb3BlcnRpZXMgaWYgYXZhaWxhYmxlXG5cdGNvbnN0IG9ic2lkaWFuID0gT2JzaWRpYW5Nb2R1bGUgYXMgdW5rbm93biBhcyB7IHNldENzc1Byb3BlcnRpZXM/OiAoZWw6IEhUTUxFbGVtZW50LCBwcm9wczogUmVjb3JkPHN0cmluZywgc3RyaW5nPikgPT4gdm9pZCB9O1xuXHRpZiAodHlwZW9mIG9ic2lkaWFuLnNldENzc1Byb3BlcnRpZXMgPT09ICdmdW5jdGlvbicpIHtcblx0XHRvYnNpZGlhbi5zZXRDc3NQcm9wZXJ0aWVzKGVsZW1lbnQsIHByb3BzKTtcblx0fSBlbHNlIHtcblx0XHQvLyBGYWxsYmFjayBmb3Igb2xkZXIgdmVyc2lvbnNcblx0XHRmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhwcm9wcykpIHtcblx0XHRcdGVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoa2V5LCB2YWx1ZSk7XG5cdFx0fVxuXHR9XG59XG5pbXBvcnQge1xuXHRJbWFnZU1hbmFnZXJTZXR0aW5ncyxcblx0QmFubmVyRGV2aWNlU2V0dGluZ3MsXG5cdEJhbm5lckltYWdlT3B0aW9ucyxcblx0QmFubmVyRGF0YSxcblx0QmFubmVyQ29udGVudFR5cGUsXG5cdEJhbm5lckljb25UeXBlLFxuXHREZXZpY2VUeXBlLFxufSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgeyBnZXRGcm9udG1hdHRlciB9IGZyb20gJy4uL3V0aWxzL21keC1mcm9udG1hdHRlcic7XG5cbi8vIENTUyBjbGFzcyBuYW1lc1xuY29uc3QgQ1NTX0NMQVNTRVMgPSB7XG5cdE1haW46ICdpbWFnZS1tYW5hZ2VyLWJhbm5lcicsXG5cdENvbnRlbnQ6ICdiYW5uZXItY29udGVudCcsXG5cdEljb246ICdiYW5uZXItaWNvbicsXG5cdFN0YXRpYzogJ3N0YXRpYycsXG59IGFzIGNvbnN0O1xuXG4vLyBSZWd1bGFyIGV4cHJlc3Npb25zIGZvciBwYXJzaW5nIGltYWdlIGxpbmtzXG5jb25zdCBQQVRURVJOUyA9IHtcblx0V2lraWxpbms6IC9eIT9cXFtcXFsoW15cXF1dKz8pKFxcfChbXlxcXV0rPykpP1xcXVxcXSQvLFxuXHRNYXJrZG93bjogL14hP1xcWyhbXlxcXV0qKVxcXVxcKChbXildKz8pXFwpJC8sXG5cdE1hcmtkb3duQmFyZTogL14hPzwoW14+XSspPiQvLFxuXHRXZWJsaW5rOiAvXmh0dHBzPzpcXC9cXC8vaSxcbn07XG5cbi8qKlxuICogU3RvcmUgZm9yIGJhbm5lciBkYXRhIHBlciBsZWFmXG4gKi9cbmNvbnN0IGJhbm5lckRhdGFTdG9yZSA9IG5ldyBNYXA8c3RyaW5nLCBCYW5uZXJEYXRhPigpO1xuXG5leHBvcnQgY2xhc3MgQmFubmVyU2VydmljZSB7XG5cdHByaXZhdGUgYXBwOiBBcHA7XG5cdHByaXZhdGUgc2V0dGluZ3M6IEltYWdlTWFuYWdlclNldHRpbmdzO1xuXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBzZXR0aW5nczogSW1hZ2VNYW5hZ2VyU2V0dGluZ3MsIG9ic2VydmFibGU/OiB7IHN1YnNjcmliZShmbjogKHNldHRpbmdzOiBJbWFnZU1hbmFnZXJTZXR0aW5ncykgPT4gdm9pZCk6IHZvaWQgfSkge1xuXHRcdHRoaXMuYXBwID0gYXBwO1xuXHRcdHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcblxuXHRcdC8vIFN1YnNjcmliZSB0byBzZXR0aW5ncyB1cGRhdGVzIGlmIG9ic2VydmFibGUgaXMgcHJvdmlkZWRcblx0XHRvYnNlcnZhYmxlPy5zdWJzY3JpYmUoKG5ld1NldHRpbmdzKSA9PiB7XG5cdFx0XHR0aGlzLnVwZGF0ZVNldHRpbmdzKG5ld1NldHRpbmdzKTtcblx0XHRcdHRoaXMuYXBwbHlTZXR0aW5ncygpO1xuXHRcdH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIFVwZGF0ZSBzZXR0aW5ncyByZWZlcmVuY2Vcblx0ICovXG5cdHVwZGF0ZVNldHRpbmdzKHNldHRpbmdzOiBJbWFnZU1hbmFnZXJTZXR0aW5ncyk6IHZvaWQge1xuXHRcdHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcblx0fVxuXG5cdC8qKlxuXHQgKiBHZXQgdGhlIGN1cnJlbnQgZGV2aWNlIHR5cGVcblx0ICovXG5cdGdldEN1cnJlbnREZXZpY2UoKTogRGV2aWNlVHlwZSB7XG5cdFx0aWYgKFBsYXRmb3JtLmlzUGhvbmUpIHtcblx0XHRcdHJldHVybiBEZXZpY2VUeXBlLlBob25lO1xuXHRcdH1cblx0XHRpZiAoUGxhdGZvcm0uaXNUYWJsZXQpIHtcblx0XHRcdHJldHVybiBEZXZpY2VUeXBlLlRhYmxldDtcblx0XHR9XG5cdFx0cmV0dXJuIERldmljZVR5cGUuRGVza3RvcDtcblx0fVxuXG5cdC8qKlxuXHQgKiBHZXQgZGV2aWNlLXNwZWNpZmljIHNldHRpbmdzXG5cdCAqL1xuXHRnZXREZXZpY2VTZXR0aW5ncygpOiBCYW5uZXJEZXZpY2VTZXR0aW5ncyB7XG5cdFx0Y29uc3QgZGV2aWNlID0gdGhpcy5nZXRDdXJyZW50RGV2aWNlKCk7XG5cdFx0cmV0dXJuIHRoaXMuc2V0dGluZ3MuYmFubmVyW2RldmljZV07XG5cdH1cblxuXHQvKipcblx0ICogUHJvY2VzcyBhbGwgb3BlbiBtYXJrZG93biB2aWV3c1xuXHQgKi9cblx0cHJvY2Vzc0FsbChmb3JjZTogYm9vbGVhbiA9IGZhbHNlKTogdm9pZCB7XG5cdFx0Y29uc3QgZGV2aWNlU2V0dGluZ3MgPSB0aGlzLmdldERldmljZVNldHRpbmdzKCk7XG5cblx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuaXRlcmF0ZVJvb3RMZWF2ZXMoKGxlYWY6IFdvcmtzcGFjZUxlYWYpID0+IHtcblx0XHRcdGNvbnN0IHZpZXcgPSBsZWFmLnZpZXcgYXMgTWFya2Rvd25WaWV3O1xuXHRcdFx0aWYgKHZpZXcgaW5zdGFuY2VvZiBNYXJrZG93blZpZXcpIHtcblx0XHRcdFx0aWYgKGRldmljZVNldHRpbmdzLmVuYWJsZWQpIHtcblx0XHRcdFx0XHRjb25zdCBmaWxlID0gdmlldz8uZmlsZSB8fCBudWxsO1xuXHRcdFx0XHRcdHZvaWQgdGhpcy5wcm9jZXNzKGZpbGUsIHZpZXcsIGZvcmNlKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0aGlzLnJlbW92ZSh2aWV3KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIFByb2Nlc3MgYSBzaW5nbGUgZmlsZS92aWV3XG5cdCAqL1xuXHRhc3luYyBwcm9jZXNzKGZpbGU6IFRGaWxlIHwgbnVsbCwgdmlldz86IE1hcmtkb3duVmlldywgZm9yY2U6IGJvb2xlYW4gPSBmYWxzZSk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLmNvbXB1dGUoZmlsZSwgdmlldyk7XG5cdFx0aWYgKCFkYXRhKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKGZvcmNlKSB7XG5cdFx0XHRkYXRhLm5lZWRzVXBkYXRlID0gdHJ1ZTtcblx0XHR9XG5cblx0XHRpZiAoIWRhdGEuaW1hZ2UpIHtcblx0XHRcdHRoaXMucmVtb3ZlKHZpZXcsIGRhdGEpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRpZiAoIWRhdGEuaWNvbikge1xuXHRcdFx0ZGF0YS5uZWVkc1VwZGF0ZSA9IHRydWU7XG5cdFx0fVxuXG5cdFx0Y29uc3QgZGV2aWNlU2V0dGluZ3MgPSB0aGlzLmdldERldmljZVNldHRpbmdzKCk7XG5cdFx0aWYgKGRldmljZVNldHRpbmdzLmVuYWJsZWQpIHtcblx0XHRcdGF3YWl0IHRoaXMucmVuZGVyKGRhdGEsIHZpZXcsIGZvcmNlKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogQ29tcHV0ZSBiYW5uZXIgZGF0YSBmcm9tIGZyb250bWF0dGVyXG5cdCAqL1xuXHRhc3luYyBjb21wdXRlKGZpbGU6IFRGaWxlIHwgbnVsbCwgdGFyZ2V0Vmlldz86IE1hcmtkb3duVmlldyk6IFByb21pc2U8QmFubmVyRGF0YSB8IG51bGw+IHtcblx0XHRjb25zdCB2aWV3ID0gdGFyZ2V0VmlldyB8fCB0aGlzLmdldEFjdGl2ZVZpZXcoKTtcblx0XHRpZiAoIWZpbGUgfHwgISh2aWV3IGluc3RhbmNlb2YgTWFya2Rvd25WaWV3KSkge1xuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXG5cdFx0Ly8gRWFybHkgZXhpdDogY2hlY2sgaWYgYmFubmVyIGlzIGVuYWJsZWRcblx0XHRjb25zdCBkZXZpY2VTZXR0aW5ncyA9IHRoaXMuZ2V0RGV2aWNlU2V0dGluZ3MoKTtcblx0XHRpZiAoIWRldmljZVNldHRpbmdzLmVuYWJsZWQpIHtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblxuXHRcdC8vIEVhcmx5IGV4aXQ6IGNoZWNrIGlmIGZpbGUgZXh0ZW5zaW9uIGlzIHN1cHBvcnRlZFxuXHRcdC8vIEFsc28gYWxsb3cgJ21kJyBhcyBhIGZhbGxiYWNrIGluIGNhc2UgdXNlciBkaWRuJ3QgaW5jbHVkZSBpdCBpbiBzdXBwb3J0ZWRFeHRlbnNpb25zXG5cdFx0aWYgKCF0aGlzLnNldHRpbmdzLnN1cHBvcnRlZEV4dGVuc2lvbnMuaW5jbHVkZXMoZmlsZS5leHRlbnNpb24pICYmIGZpbGUuZXh0ZW5zaW9uICE9PSAnbWQnKSB7XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cblx0XHQvLyBHZXQgbGVhZiBJRCBmb3IgZGF0YSBzdG9yZVxuXHRcdC8vIEB0cy1leHBlY3QtZXJyb3IgLSBsZWFmLmlkIGV4aXN0cyBidXQgaXMgbm90IGluIHR5cGUgZGVmaW5pdGlvbnNcblx0XHRjb25zdCBsZWFmSWQgPSB2aWV3Py5sZWFmPy5pZCBhcyBzdHJpbmcgfCB1bmRlZmluZWQ7XG5cdFx0aWYgKCFsZWFmSWQpIHtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblxuXHRcdGNvbnN0IG9sZERhdGEgPSBiYW5uZXJEYXRhU3RvcmUuZ2V0KGxlYWZJZCkgfHwgdGhpcy5jcmVhdGVEZWZhdWx0QmFubmVyRGF0YSgpO1xuXHRcdGNvbnN0IG5ld0RhdGEgPSB0aGlzLmNyZWF0ZURlZmF1bHRCYW5uZXJEYXRhKHZpZXcsIG9sZERhdGEudmlld01vZGUpO1xuXG5cdFx0Ly8gRm9yIE1EIGZpbGVzICh3aGljaCBoYXZlIG1ldGFkYXRhIGNhY2hlKSwgY2hlY2sgY2FjaGUgZmlyc3QgdG8gc2VlIGlmIGJhbm5lciBwcm9wZXJ0eSBleGlzdHNcblx0XHQvLyBUaGlzIGF2b2lkcyByZWFkaW5nIHRoZSBmdWxsIGZpbGUgaWYgdGhlcmUncyBubyBiYW5uZXIgcHJvcGVydHlcblx0XHQvLyBCVVQ6IE9ubHkgdXNlIHRoaXMgYXMgYW4gb3B0aW1pemF0aW9uIGlmIGNhY2hlIGlzIGFscmVhZHkgcG9wdWxhdGVkXG5cdFx0Ly8gSWYgY2FjaGUgaXMgbnVsbCAobm90IHJlYWR5IHlldCksIHdlIG11c3QgcmVhZCBmcm9udG1hdHRlciB0byBiZSBzdXJlXG5cdFx0Ly8gTm90ZTogT25seSBNRCBmaWxlcyBoYXZlIG1ldGFkYXRhIGNhY2hlIGluIE9ic2lkaWFuOyBvdGhlciBleHRlbnNpb25zIChNRFgsIGV0Yy4pIGRvbid0XG5cdFx0aWYgKGZpbGUuZXh0ZW5zaW9uID09PSAnbWQnKSB7XG5cdFx0XHRjb25zdCBjYWNoZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xuXHRcdFx0Ly8gT25seSBza2lwIGlmIGNhY2hlIGV4aXN0cyBBTkQgaGFzIGJlZW4gcG9wdWxhdGVkIChmcm9udG1hdHRlciBpcyBub3QgbnVsbC91bmRlZmluZWQpXG5cdFx0XHQvLyBJZiBjYWNoZSBpcyBudWxsIG9yIGZyb250bWF0dGVyIGlzIG1pc3NpbmcsIHdlIG5lZWQgdG8gcmVhZCB0aGUgZmlsZSB0byBiZSBzdXJlXG5cdFx0XHRpZiAoY2FjaGU/LmZyb250bWF0dGVyICE9IG51bGwpIHtcblx0XHRcdFx0Y29uc3QgcHJvcGVydHlTZXR0aW5ncyA9IHRoaXMuc2V0dGluZ3MuYmFubmVyLnByb3BlcnRpZXM7XG5cdFx0XHRcdGNvbnN0IGltYWdlUHJvcCA9IHByb3BlcnR5U2V0dGluZ3MuaW1hZ2VQcm9wZXJ0eTtcblx0XHRcdFx0Y29uc3QgaWNvblByb3AgPSBwcm9wZXJ0eVNldHRpbmdzLmljb25Qcm9wZXJ0eTtcblxuXHRcdFx0XHQvLyBDaGVjayBpZiBoaWRlIHByb3BlcnR5IGlzIGVuYWJsZWQgYW5kIHNldCB0byB0cnV0aHkgdmFsdWVcblx0XHRcdFx0aWYgKHByb3BlcnR5U2V0dGluZ3MuaGlkZVByb3BlcnR5RW5hYmxlZCAmJiBwcm9wZXJ0eVNldHRpbmdzLmhpZGVQcm9wZXJ0eSkge1xuXHRcdFx0XHRcdGNvbnN0IGhpZGVQcm9wID0gcHJvcGVydHlTZXR0aW5ncy5oaWRlUHJvcGVydHk7XG5cdFx0XHRcdFx0Y29uc3QgaGlkZVZhbHVlOiB1bmtub3duID0gY2FjaGUuZnJvbnRtYXR0ZXJbaGlkZVByb3BdO1xuXHRcdFx0XHRcdGlmIChoaWRlVmFsdWUgPT09IHRydWUgfHwgaGlkZVZhbHVlID09PSAndHJ1ZScgfHwgaGlkZVZhbHVlID09PSAxIHx8IGhpZGVWYWx1ZSA9PT0gJzEnKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gbmV3RGF0YTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBDaGVjayBpZiBiYW5uZXIgb3IgaWNvbiBwcm9wZXJ0eSBleGlzdHMgaW4gY2FjaGVcblx0XHRcdFx0Y29uc3QgaGFzQmFubmVyUHJvcGVydHkgPSBjYWNoZS5mcm9udG1hdHRlcltpbWFnZVByb3BdICE9IG51bGw7XG5cdFx0XHRcdGNvbnN0IGhhc0ljb25Qcm9wZXJ0eSA9IGRldmljZVNldHRpbmdzLmljb25FbmFibGVkICYmIGNhY2hlLmZyb250bWF0dGVyW2ljb25Qcm9wXSAhPSBudWxsO1xuXG5cdFx0XHRcdC8vIElmIGNhY2hlIGlzIHBvcHVsYXRlZCBhbmQgbm8gYmFubmVyL2ljb24gcHJvcGVydHkgZXhpc3RzLCByZXR1cm4gZWFybHlcblx0XHRcdFx0Ly8gVGhpcyBpcyBzYWZlIGJlY2F1c2UgdGhlIGNhY2hlIGlzIGRlZmluaXRpdmUgZm9yIE1EIGZpbGVzXG5cdFx0XHRcdGlmICghaGFzQmFubmVyUHJvcGVydHkgJiYgIWhhc0ljb25Qcm9wZXJ0eSkge1xuXHRcdFx0XHRcdHJldHVybiBuZXdEYXRhO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHQvLyBJZiBjYWNoZSBpcyBudWxsIG9yIGZyb250bWF0dGVyIG5vdCBwb3B1bGF0ZWQgeWV0LCBjb250aW51ZSB0byByZWFkIGZyb250bWF0dGVyXG5cdFx0XHQvLyBUaGlzIGVuc3VyZXMgYmFubmVycyBsb2FkIGNvcnJlY3RseSBldmVuIGlmIGNhY2hlIGlzbid0IHJlYWR5XG5cdFx0fVxuXHRcdC8vIEZvciBub24tTUQgZmlsZXMgKE1EWCwgZXRjLiksIHdlIGFsd2F5cyBuZWVkIHRvIHJlYWQgdGhlIGZpbGUgKG5vIGNhY2hlIGF2YWlsYWJsZSlcblxuXHRcdC8vIEdldCBmcm9udG1hdHRlciB1c2luZyBNRFgtY29tcGF0aWJsZSB1dGlsaXR5XG5cdFx0Y29uc3QgZnJvbnRtYXR0ZXIgPSBhd2FpdCBnZXRGcm9udG1hdHRlcih0aGlzLmFwcCwgZmlsZSk7XG5cdFx0aWYgKCFmcm9udG1hdHRlcikge1xuXHRcdFx0cmV0dXJuIG5ld0RhdGE7XG5cdFx0fVxuXG5cdFx0Y29uc3QgcHJvcGVydHlTZXR0aW5ncyA9IHRoaXMuc2V0dGluZ3MuYmFubmVyLnByb3BlcnRpZXM7XG5cblx0XHQvLyBDaGVjayBpZiBoaWRlIHByb3BlcnR5IGlzIGVuYWJsZWQgYW5kIHNldCB0byB0cnV0aHkgdmFsdWVcblx0XHRpZiAocHJvcGVydHlTZXR0aW5ncy5oaWRlUHJvcGVydHlFbmFibGVkICYmIHByb3BlcnR5U2V0dGluZ3MuaGlkZVByb3BlcnR5KSB7XG5cdFx0XHRjb25zdCBoaWRlUHJvcCA9IHByb3BlcnR5U2V0dGluZ3MuaGlkZVByb3BlcnR5O1xuXHRcdFx0Y29uc3QgaGlkZVZhbHVlOiB1bmtub3duID0gZnJvbnRtYXR0ZXJbaGlkZVByb3BdO1xuXHRcdFx0aWYgKGhpZGVWYWx1ZSA9PT0gdHJ1ZSB8fCBoaWRlVmFsdWUgPT09ICd0cnVlJyB8fCBoaWRlVmFsdWUgPT09IDEgfHwgaGlkZVZhbHVlID09PSAnMScpIHtcblx0XHRcdFx0cmV0dXJuIG5ld0RhdGE7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Y29uc3QgaW1hZ2VQcm9wID0gcHJvcGVydHlTZXR0aW5ncy5pbWFnZVByb3BlcnR5O1xuXHRcdGNvbnN0IGljb25Qcm9wID0gcHJvcGVydHlTZXR0aW5ncy5pY29uUHJvcGVydHk7XG5cblx0XHQvLyBQYXJzZSBpbWFnZSBwcm9wZXJ0eVxuXHRcdGNvbnN0IGltYWdlVmFsdWUgPSBmcm9udG1hdHRlcltpbWFnZVByb3BdO1xuXHRcdGlmIChpbWFnZVZhbHVlICYmIHR5cGVvZiBpbWFnZVZhbHVlID09PSAnc3RyaW5nJykge1xuXHRcdFx0bmV3RGF0YS5pbWFnZSA9IGltYWdlVmFsdWU7XG5cdFx0XHRuZXdEYXRhLmZpbGVwYXRoID0gZmlsZS5wYXRoO1xuXG5cdFx0XHRpZiAob2xkRGF0YS5maWxlcGF0aCAhPT0gbmV3RGF0YS5maWxlcGF0aCkge1xuXHRcdFx0XHRuZXdEYXRhLm5lZWRzVXBkYXRlID0gdHJ1ZTtcblx0XHRcdFx0bmV3RGF0YS5pc0ltYWdlQ2hhbmdlID0gdHJ1ZTtcblx0XHRcdH0gZWxzZSBpZiAob2xkRGF0YS5pbWFnZSAhPT0gbmV3RGF0YS5pbWFnZSkge1xuXHRcdFx0XHRuZXdEYXRhLm5lZWRzVXBkYXRlID0gdHJ1ZTtcblx0XHRcdFx0bmV3RGF0YS5pc0ltYWdlQ2hhbmdlID0gdHJ1ZTtcblxuXHRcdFx0XHQvLyBDaGVjayBpZiBvbmx5IGltYWdlIHByb3BlcnRpZXMgKG9mZnNldCwgcmVwZWF0KSBjaGFuZ2VkXG5cdFx0XHRcdGlmIChhd2FpdCB0aGlzLmlzSW1hZ2VQcm9wZXJ0aWVzVXBkYXRlKG9sZERhdGEuaW1hZ2UsIG5ld0RhdGEuaW1hZ2UsIHZpZXcpKSB7XG5cdFx0XHRcdFx0bmV3RGF0YS5pc0ltYWdlUHJvcHNVcGRhdGUgPSB0cnVlO1xuXHRcdFx0XHRcdG5ld0RhdGEuaXNJbWFnZUNoYW5nZSA9IGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gUGFyc2UgaWNvbiBwcm9wZXJ0eSBpZiBlbmFibGVkXG5cdFx0aWYgKGRldmljZVNldHRpbmdzLmljb25FbmFibGVkKSB7XG5cdFx0XHRjb25zdCBpY29uVmFsdWUgPSBmcm9udG1hdHRlcltpY29uUHJvcF07XG5cdFx0XHRpZiAoaWNvblZhbHVlICYmIHR5cGVvZiBpY29uVmFsdWUgPT09ICdzdHJpbmcnKSB7XG5cdFx0XHRcdG5ld0RhdGEuaWNvbiA9IGljb25WYWx1ZTtcblx0XHRcdFx0aWYgKG9sZERhdGEuaWNvbiAhPT0gbmV3RGF0YS5pY29uKSB7XG5cdFx0XHRcdFx0bmV3RGF0YS5uZWVkc1VwZGF0ZSA9IHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAob2xkRGF0YS5pY29uKSB7XG5cdFx0XHRcdG5ld0RhdGEuaWNvbiA9IG51bGw7XG5cdFx0XHRcdG5ld0RhdGEubmVlZHNVcGRhdGUgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBuZXdEYXRhO1xuXHR9XG5cblx0LyoqXG5cdCAqIFJlbmRlciBiYW5uZXIgaW4gdGhlIHZpZXdcblx0ICovXG5cdGFzeW5jIHJlbmRlcihkYXRhOiBCYW5uZXJEYXRhLCB0YXJnZXRWaWV3PzogTWFya2Rvd25WaWV3LCBmb3JjZTogYm9vbGVhbiA9IGZhbHNlKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3QgeyBpbWFnZSwgdmlld01vZGUsIGxhc3RWaWV3TW9kZSwgbmVlZHNVcGRhdGUsIGlzSW1hZ2VDaGFuZ2UgfSA9IGRhdGE7XG5cdFx0Y29uc3QgdmlldyA9IHRhcmdldFZpZXcgfHwgdGhpcy5nZXRBY3RpdmVWaWV3KCk7XG5cblx0XHRpZiAoIXZpZXcgfHwgISh2aWV3IGluc3RhbmNlb2YgTWFya2Rvd25WaWV3KSkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGNvbnN0IGNvbnRhaW5lciA9IHZpZXcuY29udGFpbmVyRWw7XG5cdFx0aWYgKCFjb250YWluZXIgfHwgKCFmb3JjZSAmJiAhbmVlZHNVcGRhdGUgJiYgbGFzdFZpZXdNb2RlID09PSB2aWV3TW9kZSkpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRjb25zdCBjb250YWluZXJzOiBOb2RlTGlzdE9mPEhUTUxFbGVtZW50PiA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKFxuXHRcdFx0Jy5jbS1zY3JvbGxlciwgLm1hcmtkb3duLXJlYWRpbmctdmlldyA+IC5tYXJrZG93bi1wcmV2aWV3LXZpZXcnXG5cdFx0KTtcblxuXHRcdGlmIChjb250YWluZXJzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGNvbnN0IGltYWdlT3B0aW9ucyA9IGF3YWl0IHRoaXMucGFyc2VMaW5rKGltYWdlIHx8ICcnLCB2aWV3KTtcblx0XHRjb25zdCBiYW5uZXJzID0gdGhpcy51cGRhdGVCYW5uZXJFbGVtZW50cyhkYXRhLCBpbWFnZU9wdGlvbnMsIGNvbnRhaW5lcnMpO1xuXG5cdFx0Ly8gVXBkYXRlIGljb25cblx0XHRhd2FpdCB0aGlzLnVwZGF0ZUljb25zKGRhdGEsIGJhbm5lcnMsIHZpZXcpO1xuXG5cdFx0aWYgKGlzSW1hZ2VDaGFuZ2UpIHtcblx0XHRcdHRoaXMuaW5qZWN0QmFubmVycyhiYW5uZXJzLCBjb250YWluZXJzKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5yZXBsYWNlQmFubmVycyhiYW5uZXJzKTtcblx0XHR9XG5cblx0XHRkYXRhLmxhc3RWaWV3TW9kZSA9IHZpZXdNb2RlO1xuXHRcdGNvbnRhaW5lci5kYXRhc2V0LmltQmFubmVyID0gJyc7XG5cblx0XHQvLyBTdG9yZSBkYXRhIGZvciB0aGlzIGxlYWZcblx0XHQvLyBAdHMtZXhwZWN0LWVycm9yIC0gbGVhZi5pZCBleGlzdHMgYnV0IGlzIG5vdCBpbiB0eXBlIGRlZmluaXRpb25zXG5cdFx0Y29uc3QgbGVhZklkID0gdmlldz8ubGVhZj8uaWQgYXMgc3RyaW5nIHwgdW5kZWZpbmVkO1xuXHRcdGlmIChsZWFmSWQpIHtcblx0XHRcdGJhbm5lckRhdGFTdG9yZS5zZXQobGVhZklkLCBkYXRhKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogVXBkYXRlIGJhbm5lciBET00gZWxlbWVudHNcblx0ICovXG5cdHByaXZhdGUgdXBkYXRlQmFubmVyRWxlbWVudHMoXG5cdFx0ZGF0YTogQmFubmVyRGF0YSxcblx0XHRpbWdPcHRpb25zOiBCYW5uZXJJbWFnZU9wdGlvbnMsXG5cdFx0Y29udGFpbmVyczogTm9kZUxpc3RPZjxIVE1MRWxlbWVudD5cblx0KTogSFRNTEVsZW1lbnRbXSB7XG5cdFx0Y29uc3QgeyBpc0ltYWdlQ2hhbmdlLCBpc0ltYWdlUHJvcHNVcGRhdGUgfSA9IGRhdGE7XG5cdFx0Y29uc3QgYmFubmVyczogSFRNTEVsZW1lbnRbXSA9IFtdO1xuXG5cdFx0Y29udGFpbmVycy5mb3JFYWNoKGNvbnRhaW5lciA9PiB7XG5cdFx0XHRsZXQgZWxlbWVudCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKGAuJHtDU1NfQ0xBU1NFUy5NYWlufWApIGFzIEhUTUxFbGVtZW50O1xuXHRcdFx0aWYgKCFlbGVtZW50KSB7XG5cdFx0XHRcdGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRcdFx0ZWxlbWVudC5jbGFzc0xpc3QuYWRkKENTU19DTEFTU0VTLk1haW4pO1xuXHRcdFx0fVxuXG5cdFx0XHRsZXQgY29udGVudCA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7Q1NTX0NMQVNTRVMuQ29udGVudH1gKSBhcyBIVE1MRWxlbWVudDtcblx0XHRcdGlmICghY29udGVudCkge1xuXHRcdFx0XHRjb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0XHRcdGNvbnRlbnQuY2xhc3NMaXN0LmFkZChDU1NfQ0xBU1NFUy5Db250ZW50KTtcblx0XHRcdFx0ZWxlbWVudC5hcHBlbmRDaGlsZChjb250ZW50KTtcblx0XHRcdH1cblxuXHRcdFx0YmFubmVycy5wdXNoKGVsZW1lbnQpO1xuXG5cdFx0XHRpZiAoaXNJbWFnZUNoYW5nZSB8fCBpc0ltYWdlUHJvcHNVcGRhdGUpIHtcblx0XHRcdFx0aWYgKGlzSW1hZ2VDaGFuZ2UpIHtcblx0XHRcdFx0XHRlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoQ1NTX0NMQVNTRVMuU3RhdGljKTtcblx0XHRcdFx0XHRjb250ZW50LmZpcnN0Q2hpbGQ/LnJlbW92ZSgpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gVXNlIHNldENzc1Byb3BlcnRpZXMgZm9yIGR5bmFtaWMgc3R5bGVzXG5cdFx0XHRcdGNvbnN0IGNzc1ZhcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG5cdFx0XHRcdFx0Jy0taW0tYmFubmVyLWltZy14JzogYCR7aW1nT3B0aW9ucy54fXB4YCxcblx0XHRcdFx0XHQnLS1pbS1iYW5uZXItaW1nLXknOiBgJHtpbWdPcHRpb25zLnl9cHhgLFxuXHRcdFx0XHRcdCctLWltLWJhbm5lci1zaXplJzogaW1nT3B0aW9ucy5yZXBlYXRhYmxlID8gJ2F1dG8nIDogJ2NvdmVyJyxcblx0XHRcdFx0XHQnLS1pbS1iYW5uZXItcmVwZWF0JzogaW1nT3B0aW9ucy5yZXBlYXRhYmxlID8gJ3JlcGVhdCcgOiAnbm8tcmVwZWF0Jyxcblx0XHRcdFx0XHQnLS1pbS1iYW5uZXItdXJsJzogJ25vbmUnLFxuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdGlmIChpbWdPcHRpb25zLnR5cGUgPT09IEJhbm5lckNvbnRlbnRUeXBlLlZpZGVvKSB7XG5cdFx0XHRcdFx0Y29uc3QgdmlkZW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpO1xuXHRcdFx0XHRcdHZpZGVvLmNvbnRyb2xzID0gZmFsc2U7XG5cdFx0XHRcdFx0dmlkZW8uYXV0b3BsYXkgPSB0cnVlO1xuXHRcdFx0XHRcdHZpZGVvLm11dGVkID0gdHJ1ZTtcblx0XHRcdFx0XHR2aWRlby5sb29wID0gdHJ1ZTtcblx0XHRcdFx0XHR2aWRlby5zcmMgPSBpbWdPcHRpb25zLnVybC5yZXBsYWNlKC9eXCJ8XCIkL2csICcnKTtcblx0XHRcdFx0XHRjb250ZW50LmFwcGVuZENoaWxkKHZpZGVvKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjc3NWYXJzWyctLWltLWJhbm5lci11cmwnXSA9IGB1cmwoJHtpbWdPcHRpb25zLnVybH0pYDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHNldENzc1Byb3BlcnRpZXMoY29udGFpbmVyLCBjc3NWYXJzKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHJldHVybiBiYW5uZXJzO1xuXHR9XG5cblx0LyoqXG5cdCAqIFVwZGF0ZSBpY29uIGVsZW1lbnRzIG9uIGJhbm5lcnNcblx0ICovXG5cdHByaXZhdGUgYXN5bmMgdXBkYXRlSWNvbnMoZGF0YTogQmFubmVyRGF0YSwgYmFubmVyczogSFRNTEVsZW1lbnRbXSwgdmlldz86IE1hcmtkb3duVmlldyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGNvbnN0IGRldmljZVNldHRpbmdzID0gdGhpcy5nZXREZXZpY2VTZXR0aW5ncygpO1xuXHRcdGxldCBjYWxjdWxhdGVkRm9udFNpemU6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuXG5cdFx0Zm9yIChjb25zdCBiYW5uZXIgb2YgYmFubmVycykge1xuXHRcdFx0Y29uc3QgeyBpY29uIH0gPSBkYXRhO1xuXHRcdFx0bGV0IGljb25Db250YWluZXI6IEhUTUxFbGVtZW50IHwgbnVsbCA9IGJhbm5lci5xdWVyeVNlbGVjdG9yKGAuJHtDU1NfQ0xBU1NFUy5JY29ufWApO1xuXHRcdFx0Y29uc3QgaGFzQ29udGFpbmVyID0gaWNvbkNvbnRhaW5lciAhPT0gbnVsbDtcblxuXHRcdFx0aWYgKGhhc0NvbnRhaW5lcikge1xuXHRcdFx0XHRpY29uQ29udGFpbmVyPy5jbGFzc0xpc3QuYWRkKENTU19DTEFTU0VTLlN0YXRpYyk7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChkZXZpY2VTZXR0aW5ncy5pY29uRW5hYmxlZCAmJiBpY29uKSB7XG5cdFx0XHRcdGlmICghaGFzQ29udGFpbmVyKSB7XG5cdFx0XHRcdFx0aWNvbkNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdFx0XHRcdGljb25Db250YWluZXIuY2xhc3NMaXN0LmFkZChDU1NfQ0xBU1NFUy5JY29uKTtcblx0XHRcdFx0XHRjb25zdCBpbm5lckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdFx0XHRcdGljb25Db250YWluZXIuYXBwZW5kQ2hpbGQoaW5uZXJEaXYpO1xuXHRcdFx0XHRcdGJhbm5lci5wcmVwZW5kKGljb25Db250YWluZXIpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29uc3QgaWNvbkVsZW1lbnQgPSBpY29uQ29udGFpbmVyPy5xdWVyeVNlbGVjdG9yKCdkaXYnKSBhcyBIVE1MRWxlbWVudDtcblx0XHRcdFx0aWYgKCFpY29uRWxlbWVudCkgY29udGludWU7XG5cblx0XHRcdFx0Y29uc3QgaWNvbkRhdGEgPSBhd2FpdCB0aGlzLnBhcnNlSWNvbihpY29uLCB2aWV3KTtcblxuXHRcdFx0XHQvLyBFc2NhcGUgc3BlY2lhbCBjaGFyYWN0ZXJzIGluIHRoZSB2YWx1ZSBmb3IgQ1NTXG5cdFx0XHRcdGxldCB2YWx1ZSA9IGljb25EYXRhLnZhbHVlPy5yZXBsYWNlKC8oWyMuOltcXFxcXVwiXSkvZywgJ1xcXFwkMScpIHx8ICcnO1xuXHRcdFx0XHRpY29uRWxlbWVudC5kYXRhc2V0LnR5cGUgPSBpY29uRGF0YS50eXBlO1xuXG5cdFx0XHRcdGlmIChpY29uRGF0YS50eXBlID09PSBCYW5uZXJJY29uVHlwZS5MaW5rKSB7XG5cdFx0XHRcdFx0c2V0Q3NzUHJvcGVydGllcyhpY29uRWxlbWVudCwge1xuXHRcdFx0XHRcdFx0Jy0taW0tYmFubmVyLWljb24tdmFsdWUnOiBgdXJsKCR7dmFsdWV9KWAsXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gVGV4dC9lbW9qaSBpY29uXG5cdFx0XHRcdFx0Y2FsY3VsYXRlZEZvbnRTaXplID0gY2FsY3VsYXRlZEZvbnRTaXplID8/IHRoaXMuY2FsY3VsYXRlRm9udFNpemUodmFsdWUsIGRldmljZVNldHRpbmdzLmljb25TaXplKTtcblx0XHRcdFx0XHRzZXRDc3NQcm9wZXJ0aWVzKGljb25FbGVtZW50LCB7XG5cdFx0XHRcdFx0XHQnLS1pbS1iYW5uZXItaWNvbi12YWx1ZSc6IGBcIiR7dmFsdWV9XCJgLFxuXHRcdFx0XHRcdFx0Jy0taW0tYmFubmVyLWljb24tZm9udHNpemUnOiBjYWxjdWxhdGVkRm9udFNpemUsXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAoaGFzQ29udGFpbmVyICYmIGljb25Db250YWluZXIpIHtcblx0XHRcdFx0ZGF0YS5pY29uID0gbnVsbDtcblx0XHRcdFx0aWNvbkNvbnRhaW5lci5yZW1vdmUoKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogSW5qZWN0IGJhbm5lcnMgaW50byBjb250YWluZXJzXG5cdCAqL1xuXHRwcml2YXRlIGluamVjdEJhbm5lcnMoYmFubmVyczogSFRNTEVsZW1lbnRbXSwgY29udGFpbmVyczogTm9kZUxpc3RPZjxIVE1MRWxlbWVudD4pOiB2b2lkIHtcblx0XHRjb25zdCBkZXZpY2VTZXR0aW5ncyA9IHRoaXMuZ2V0RGV2aWNlU2V0dGluZ3MoKTtcblx0XHRjb25zdCBzaG91bGRBbmltYXRlID0gZGV2aWNlU2V0dGluZ3MuYW5pbWF0aW9uO1xuXG5cdFx0Y29udGFpbmVycy5mb3JFYWNoKChjb250YWluZXIsIGluZGV4KSA9PiB7XG5cdFx0XHRjb25zdCBiYW5uZXIgPSBiYW5uZXJzW2luZGV4XTtcblx0XHRcdGlmIChiYW5uZXIpIHtcblx0XHRcdFx0Ly8gUmVtb3ZlIHN0YXRpYyBjbGFzcyBpZiBpdCBleGlzdHMgdG8gYWxsb3cgYW5pbWF0aW9uXG5cdFx0XHRcdGJhbm5lci5jbGFzc0xpc3QucmVtb3ZlKENTU19DTEFTU0VTLlN0YXRpYyk7XG5cdFx0XHRcdGNvbnRhaW5lci5wcmVwZW5kKGJhbm5lcik7XG5cblx0XHRcdFx0aWYgKHNob3VsZEFuaW1hdGUpIHtcblx0XHRcdFx0XHQvLyBGb3JjZSByZWZsb3cgYW5kIHN0YXJ0IGFuaW1hdGlvbiBvbiBuZXh0IGZyYW1lXG5cdFx0XHRcdFx0dm9pZCBiYW5uZXIub2Zmc2V0SGVpZ2h0OyAvLyBGb3JjZSByZWZsb3dcblx0XHRcdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuXHRcdFx0XHRcdFx0Ly8gQW5pbWF0aW9uIHNob3VsZCBzdGFydCBub3dcblx0XHRcdFx0XHRcdGJhbm5lci5vbmFuaW1hdGlvbmVuZCA9ICgpID0+IHtcblx0XHRcdFx0XHRcdFx0YmFubmVyLmNsYXNzTGlzdC5hZGQoQ1NTX0NMQVNTRVMuU3RhdGljKTtcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gQW5pbWF0aW9uIGRpc2FibGVkIC0gYWRkIHN0YXRpYyBjbGFzcyBpbW1lZGlhdGVseVxuXHRcdFx0XHRcdGJhbm5lci5jbGFzc0xpc3QuYWRkKENTU19DTEFTU0VTLlN0YXRpYyk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZXBsYWNlIGJhbm5lcnMgKG5vIGFuaW1hdGlvbilcblx0ICovXG5cdHByaXZhdGUgcmVwbGFjZUJhbm5lcnMoYmFubmVyczogSFRNTEVsZW1lbnRbXSk6IHZvaWQge1xuXHRcdGJhbm5lcnMuZm9yRWFjaChiYW5uZXIgPT4ge1xuXHRcdFx0YmFubmVyLmNsYXNzTGlzdC5hZGQoQ1NTX0NMQVNTRVMuU3RhdGljKTtcblx0XHR9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZW1vdmUgYmFubmVyIGZyb20gdmlld1xuXHQgKi9cblx0cmVtb3ZlKHZpZXc/OiBNYXJrZG93blZpZXcsIGRhdGE/OiBCYW5uZXJEYXRhKTogdm9pZCB7XG5cdFx0Y29uc3QgdGFyZ2V0VmlldyA9IHZpZXcgfHwgZGF0YT8uZmlsZXBhdGggPyB0aGlzLmdldEFjdGl2ZVZpZXcoKSA6IG51bGw7XG5cdFx0aWYgKCEodGFyZ2V0VmlldyBpbnN0YW5jZW9mIE1hcmtkb3duVmlldykpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRjb25zdCBjb250YWluZXIgPSB0YXJnZXRWaWV3LmNvbnRhaW5lckVsO1xuXHRcdGlmICghY29udGFpbmVyKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3QgdGFyZ2V0cyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKGAuJHtDU1NfQ0xBU1NFUy5NYWlufWApO1xuXHRcdHRhcmdldHMuZm9yRWFjaCh0ID0+IHQucmVtb3ZlKCkpO1xuXG5cdFx0Ly8gQHRzLWV4cGVjdC1lcnJvciAtIGxlYWYuaWQgZXhpc3RzIGJ1dCBpcyBub3QgaW4gdHlwZSBkZWZpbml0aW9uc1xuXHRcdGNvbnN0IGxlYWZJZCA9IHRhcmdldFZpZXc/LmxlYWY/LmlkIGFzIHN0cmluZyB8IHVuZGVmaW5lZDtcblx0XHRpZiAobGVhZklkKSB7XG5cdFx0XHRiYW5uZXJEYXRhU3RvcmUuZGVsZXRlKGxlYWZJZCk7XG5cdFx0fVxuXHRcdGRlbGV0ZSBjb250YWluZXIuZGF0YXNldC5pbUJhbm5lcjtcblx0fVxuXG5cdC8qKlxuXHQgKiBBcHBseSBjdXJyZW50IHNldHRpbmdzIHRvIERPTVxuXHQgKi9cblx0YXBwbHlTZXR0aW5ncygpOiB2b2lkIHtcblx0XHRjb25zdCBkZXZpY2VTZXR0aW5ncyA9IHRoaXMuZ2V0RGV2aWNlU2V0dGluZ3MoKTtcblx0XHRjb25zdCBoZWlnaHQgPSBkZXZpY2VTZXR0aW5ncy5oZWlnaHQ7XG5cdFx0Y29uc3Qgbm90ZU9mZnNldCA9IGRldmljZVNldHRpbmdzLm5vdGVPZmZzZXQ7XG5cdFx0Y29uc3Qgdmlld09mZnNldCA9IGRldmljZVNldHRpbmdzLnZpZXdPZmZzZXQ7XG5cdFx0Y29uc3QgcmFkaXVzID0gZGV2aWNlU2V0dGluZ3MuYmFubmVyUmFkaXVzRW5hYmxlZCA/IGRldmljZVNldHRpbmdzLmJvcmRlclJhZGl1cyA6IFswLCAwLCAwLCAwXTtcblx0XHRjb25zdCBwYWRkaW5nID0gZGV2aWNlU2V0dGluZ3MucGFkZGluZztcblx0XHRjb25zdCBmYWRlID0gZGV2aWNlU2V0dGluZ3MuZmFkZTtcblxuXHRcdGNvbnN0IGNzc1ZhcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG5cdFx0XHQnLS1pbS1iYW5uZXItaGVpZ2h0JzogYCR7aGVpZ2h0fXB4YCxcblx0XHRcdCctLWltLWJhbm5lci1ub3RlLW9mZnNldCc6IGAke25vdGVPZmZzZXR9cHhgLFxuXHRcdFx0Jy0taW0tYmFubmVyLXZpZXctb2Zmc2V0JzogYCR7dmlld09mZnNldH1weGAsXG5cdFx0XHQnLS1pbS1iYW5uZXItcmFkaXVzJzogYCR7cmFkaXVzWzBdfXB4ICR7cmFkaXVzWzFdfXB4ICR7cmFkaXVzWzJdfXB4ICR7cmFkaXVzWzNdfXB4YCxcblx0XHRcdCctLWltLWJhbm5lci1wYWRkaW5nJzogYCR7cGFkZGluZ31weGAsXG5cdFx0XHQnLS1pbS1iYW5uZXItbWFzayc6IGZhZGUgPyAncmV2ZXJ0LWxheWVyJyA6ICdpbml0aWFsJyxcblx0XHRcdCctLWltLWJhbm5lci1tYXNrLXdlYmtpdCc6IGZhZGUgPyAncmV2ZXJ0LWxheWVyJyA6ICdpbml0aWFsJyxcblx0XHR9O1xuXG5cdFx0aWYgKGRldmljZVNldHRpbmdzLmljb25FbmFibGVkKSB7XG5cdFx0XHRjb25zdCBpY29uRnJhbWUgPSBkZXZpY2VTZXR0aW5ncy5pY29uRnJhbWUgPz8gdHJ1ZTtcblx0XHRcdGNzc1ZhcnNbJy0taW0tYmFubmVyLWljb24tc2l6ZS13J10gPSBgJHtkZXZpY2VTZXR0aW5ncy5pY29uU2l6ZX1weGA7XG5cdFx0XHRjc3NWYXJzWyctLWltLWJhbm5lci1pY29uLXNpemUtaCddID0gYCR7ZGV2aWNlU2V0dGluZ3MuaWNvblNpemV9cHhgO1xuXHRcdFx0Y3NzVmFyc1snLS1pbS1iYW5uZXItaWNvbi1yYWRpdXMnXSA9IGAke2RldmljZVNldHRpbmdzLmljb25SYWRpdXN9cHhgO1xuXHRcdFx0Y3NzVmFyc1snLS1pbS1iYW5uZXItaWNvbi1hbGlnbi1oJ10gPSBkZXZpY2VTZXR0aW5ncy5pY29uQWxpZ25tZW50SDtcblx0XHRcdGNzc1ZhcnNbJy0taW0tYmFubmVyLWljb24tYWxpZ24tdiddID0gZGV2aWNlU2V0dGluZ3MuaWNvbkFsaWdubWVudFY7XG5cdFx0XHRjc3NWYXJzWyctLWltLWJhbm5lci1pY29uLW9mZnNldC14J10gPSBgJHtkZXZpY2VTZXR0aW5ncy5pY29uT2Zmc2V0WH1weGA7XG5cdFx0XHRjc3NWYXJzWyctLWltLWJhbm5lci1pY29uLW9mZnNldC15J10gPSBgJHtkZXZpY2VTZXR0aW5ncy5pY29uT2Zmc2V0WX1weGA7XG5cdFx0XHRjc3NWYXJzWyctLWltLWJhbm5lci1pY29uLWJvcmRlciddID0gaWNvbkZyYW1lID8gYCR7ZGV2aWNlU2V0dGluZ3MuaWNvbkJvcmRlcn1weGAgOiAnMHB4Jztcblx0XHRcdGNzc1ZhcnNbJy0taW0tYmFubmVyLWljb24tYmFja2dyb3VuZCddID0gaWNvbkZyYW1lICYmIGRldmljZVNldHRpbmdzLmljb25CYWNrZ3JvdW5kID8gJ3JldmVydC1sYXllcicgOiAndHJhbnNwYXJlbnQnO1xuXHRcdH1cblxuXHRcdHNldENzc1Byb3BlcnRpZXMoZG9jdW1lbnQuYm9keSwgY3NzVmFycyk7XG5cblx0XHR0aGlzLnByb2Nlc3NBbGwodHJ1ZSk7XG5cdH1cblxuXHQvKipcblx0ICogUGFyc2UgaW1hZ2UgbGluayBzdHJpbmcgaW50byBvcHRpb25zXG5cdCAqL1xuXHRhc3luYyBwYXJzZUxpbmsoc3RyOiBzdHJpbmcsIHZpZXc/OiBNYXJrZG93blZpZXcgfCBudWxsKTogUHJvbWlzZTxCYW5uZXJJbWFnZU9wdGlvbnM+IHtcblx0XHRsZXQgdXJsOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcblx0XHRsZXQgZGlzcGxheVRleHQ6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuXHRcdGxldCBleHRlcm5hbCA9IGZhbHNlO1xuXHRcdGxldCBvYnNpZGlhblVybCA9IGZhbHNlO1xuXHRcdGxldCBvcHRpb25zID0geyB4OiAwLCB5OiAwLCByZXBlYXRhYmxlOiBmYWxzZSB9O1xuXG5cdFx0Ly8gVHJ5IHdpa2lsaW5rIGZvcm1hdFxuXHRcdGNvbnN0IHdpa2lsaW5rTWF0Y2ggPSBzdHIubWF0Y2goUEFUVEVSTlMuV2lraWxpbmspO1xuXHRcdGlmICh3aWtpbGlua01hdGNoKSB7XG5cdFx0XHR1cmwgPSB3aWtpbGlua01hdGNoWzFdPy50cmltKCkgPz8gbnVsbDtcblx0XHRcdGRpc3BsYXlUZXh0ID0gd2lraWxpbmtNYXRjaFszXT8udHJpbSgpID8/IG51bGw7XG5cdFx0fVxuXG5cdFx0Ly8gVHJ5IG1hcmtkb3duIGZvcm1hdFxuXHRcdGNvbnN0IG1hcmtkb3duTWF0Y2ggPSBzdHIubWF0Y2goUEFUVEVSTlMuTWFya2Rvd24pO1xuXHRcdGNvbnN0IG1hcmtkb3duQmFyZU1hdGNoID0gc3RyLm1hdGNoKFBBVFRFUk5TLk1hcmtkb3duQmFyZSk7XG5cdFx0aWYgKG1hcmtkb3duTWF0Y2gpIHtcblx0XHRcdGRpc3BsYXlUZXh0ID0gbWFya2Rvd25NYXRjaFsxXT8udHJpbSgpID8/IG51bGw7XG5cdFx0XHR1cmwgPSBtYXJrZG93bk1hdGNoWzJdPy50cmltKCkgPz8gbnVsbDtcblx0XHR9IGVsc2UgaWYgKG1hcmtkb3duQmFyZU1hdGNoKSB7XG5cdFx0XHR1cmwgPSBtYXJrZG93bkJhcmVNYXRjaFsxXT8udHJpbSgpID8/IG51bGw7XG5cdFx0XHRkaXNwbGF5VGV4dCA9IG51bGw7XG5cdFx0fVxuXG5cdFx0Ly8gRGVmYXVsdCB0byByYXcgc3RyaW5nXG5cdFx0aWYgKCF1cmwpIHtcblx0XHRcdHVybCA9IHN0cjtcblx0XHRcdGRpc3BsYXlUZXh0ID0gbnVsbDtcblx0XHR9XG5cblx0XHRleHRlcm5hbCA9IFBBVFRFUk5TLldlYmxpbmsudGVzdCh1cmwpO1xuXG5cdFx0Ly8gSGFuZGxlIG9ic2lkaWFuOi8vIFVSTHNcblx0XHRpZiAodGhpcy5pc09ic2lkaWFuVXJsKHVybCkpIHtcblx0XHRcdGNvbnN0IHVybFN0ciA9IHVybC5yZXBsYWNlKCdvYnNpZGlhbjovL29wZW4nLCAnJyk7XG5cdFx0XHRjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHVybFN0cik7XG5cdFx0XHRjb25zdCBmaWxlID0gcGFyYW1zLmdldCgnZmlsZScpO1xuXHRcdFx0aWYgKGZpbGUpIHtcblx0XHRcdFx0dXJsID0gZmlsZTtcblx0XHRcdFx0b2JzaWRpYW5VcmwgPSB0cnVlO1xuXHRcdFx0XHRleHRlcm5hbCA9IGZhbHNlO1xuXHRcdFx0XHRkaXNwbGF5VGV4dCA9IG51bGw7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gSGFuZGxlIGZpbGU6Ly8gVVJMc1xuXHRcdGlmICh1cmwuc3RhcnRzV2l0aCgnZmlsZTonKSkge1xuXHRcdFx0dXJsID0gdXJsLnJlcGxhY2UoL15maWxlOlxcL3sxLH0vLCBQbGF0Zm9ybS5yZXNvdXJjZVBhdGhQcmVmaXgpO1xuXHRcdFx0ZXh0ZXJuYWwgPSB0cnVlO1xuXHRcdH1cblxuXHRcdC8vIFBhcnNlIG9mZnNldC9yZXBlYXQgZnJvbSBoYXNoIGZvciBleHRlcm5hbCBVUkxzXG5cdFx0Y29uc3QgaGFzaEluZGV4ID0gdXJsLmluZGV4T2YoJyMnKTtcblx0XHRpZiAoKGV4dGVybmFsIHx8IG9ic2lkaWFuVXJsKSAmJiBoYXNoSW5kZXggIT09IC0xKSB7XG5cdFx0XHRvcHRpb25zID0gdGhpcy5wYXJzZUltYWdlUHJvcGVydGllcyh1cmwuc3Vic3RyaW5nKGhhc2hJbmRleCArIDEpKTtcblx0XHRcdHVybCA9IHVybC5yZXBsYWNlKC8jLiovLCAnJykudHJpbSgpO1xuXHRcdH1cblxuXHRcdC8vIFBhcnNlIG9mZnNldC9yZXBlYXQgZnJvbSBkaXNwbGF5IHRleHRcblx0XHRpZiAoZGlzcGxheVRleHQpIHtcblx0XHRcdG9wdGlvbnMgPSB0aGlzLnBhcnNlSW1hZ2VQcm9wZXJ0aWVzKGRpc3BsYXlUZXh0KTtcblx0XHR9XG5cblx0XHQvLyBSZXNvbHZlIGludGVybmFsIHBhdGhzXG5cdFx0aWYgKCFleHRlcm5hbCkge1xuXHRcdFx0Y29uc3QgdmF1bHQgPSB0aGlzLmFwcC52YXVsdDtcblx0XHRcdGxldCBmaWxlOiBURmlsZSB8IG51bGwgPSBudWxsO1xuXG5cdFx0XHQvLyBUcnkgcmVsYXRpdmUgcGF0aCByZXNvbHV0aW9uXG5cdFx0XHRpZiAodmlldz8uZmlsZSAmJiAodXJsLmluY2x1ZGVzKCcuLi8nKSB8fCB1cmwuaW5jbHVkZXMoJy4vJykgfHwgKCF1cmwuc3RhcnRzV2l0aCgnLycpICYmIHVybC5pbmNsdWRlcygnLycpKSkpIHtcblx0XHRcdFx0Y29uc3QgcmVzb2x2ZWRQYXRoID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdCh1cmwsIHZpZXcuZmlsZS5wYXRoKTtcblx0XHRcdFx0aWYgKHJlc29sdmVkUGF0aCkge1xuXHRcdFx0XHRcdGZpbGUgPSByZXNvbHZlZFBhdGg7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gRmFsbGJhY2sgdG8gZXhhY3QgcGF0aC9uYW1lIG1hdGNoaW5nXG5cdFx0XHRpZiAoIWZpbGUpIHtcblx0XHRcdFx0Y29uc3QgZmlsZXMgPSB2YXVsdC5nZXRGaWxlcygpLmZpbHRlcihmID0+IGYucGF0aCA9PT0gdXJsIHx8IGYubmFtZSA9PT0gdXJsKTtcblx0XHRcdFx0ZmlsZSA9IGZpbGVzLmZpbmQoZiA9PiBmLnBhdGggPT09IHVybCkgfHwgZmlsZXMuZmluZChmID0+IGYubmFtZSA9PT0gdXJsKSB8fCBudWxsO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoZmlsZSkge1xuXHRcdFx0XHR1cmwgPSB2YXVsdC5nZXRSZXNvdXJjZVBhdGgoZmlsZSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gRGV0ZWN0IGNvbnRlbnQgdHlwZVxuXHRcdGxldCB0eXBlOiBCYW5uZXJDb250ZW50VHlwZSB8IG51bGwgPSBudWxsO1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCB1cmxPYmogPSBuZXcgVVJMKHVybCk7XG5cdFx0XHRjb25zdCBleHRlbnNpb24gPSB1cmxPYmoucGF0aG5hbWUuc3BsaXQoJy4nKS5wb3AoKT8udG9Mb3dlckNhc2UoKTtcblx0XHRcdGNvbnN0IGltYWdlRXh0ZW5zaW9ucyA9IFsnanBnJywgJ2pwZWcnLCAncG5nJywgJ2dpZicsICdzdmcnLCAnd2VicCddO1xuXHRcdFx0Y29uc3QgdmlkZW9FeHRlbnNpb25zID0gWydtcDQnLCAnd2VibScsICdvZ2cnLCAnb2d2JywgJ21vdiddO1xuXG5cdFx0XHRpZiAoZXh0ZW5zaW9uICYmIGltYWdlRXh0ZW5zaW9ucy5pbmNsdWRlcyhleHRlbnNpb24pKSB7XG5cdFx0XHRcdHR5cGUgPSBCYW5uZXJDb250ZW50VHlwZS5JbWFnZTtcblx0XHRcdH0gZWxzZSBpZiAoZXh0ZW5zaW9uICYmIHZpZGVvRXh0ZW5zaW9ucy5pbmNsdWRlcyhleHRlbnNpb24pKSB7XG5cdFx0XHRcdHR5cGUgPSBCYW5uZXJDb250ZW50VHlwZS5WaWRlbztcblx0XHRcdH1cblxuXHRcdFx0Ly8gRmFsbGJhY2sgdG8gSEVBRCByZXF1ZXN0IGlmIHR5cGUgbm90IGRldGVjdGVkXG5cdFx0XHRpZiAoIXR5cGUpIHtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RVcmwoeyB1cmwsIG1ldGhvZDogJ0hFQUQnIH0pO1xuXHRcdFx0XHRcdGNvbnN0IGNvbnRlbnRUeXBlID0gcmVzcG9uc2U/LmhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddIHx8IG51bGw7XG5cdFx0XHRcdFx0aWYgKGNvbnRlbnRUeXBlKSB7XG5cdFx0XHRcdFx0XHRpZiAoY29udGVudFR5cGUuaW5jbHVkZXMoJ2ltYWdlJykpIHtcblx0XHRcdFx0XHRcdFx0dHlwZSA9IEJhbm5lckNvbnRlbnRUeXBlLkltYWdlO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmIChjb250ZW50VHlwZS5pbmNsdWRlcygndmlkZW8nKSkge1xuXHRcdFx0XHRcdFx0XHR0eXBlID0gQmFubmVyQ29udGVudFR5cGUuVmlkZW87XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGNhdGNoIHtcblx0XHRcdFx0XHQvLyBJZ25vcmUgSEVBRCByZXF1ZXN0IGVycm9yc1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCB7XG5cdFx0XHQvLyBJZ25vcmUgVVJMIHBhcnNpbmcgZXJyb3JzXG5cdFx0fVxuXG5cdFx0cmV0dXJuIHtcblx0XHRcdHVybDogYFwiJHt1cmwudHJpbSgpLnJlcGxhY2UoLyhbXCJcXFxcXSkvZywgJ1xcXFwkMScpfVwiYCxcblx0XHRcdGV4dGVybmFsLFxuXHRcdFx0dHlwZSxcblx0XHRcdC4uLm9wdGlvbnMsXG5cdFx0fTtcblx0fVxuXG5cdC8qKlxuXHQgKiBQYXJzZSBpbWFnZSBwcm9wZXJ0aWVzIChvZmZzZXQsIHJlcGVhdCkgZnJvbSBzdHJpbmdcblx0ICovXG5cdHByaXZhdGUgcGFyc2VJbWFnZVByb3BlcnRpZXMoc3RyOiBzdHJpbmcpOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyOyByZXBlYXRhYmxlOiBib29sZWFuIH0ge1xuXHRcdGNvbnN0IHZhbHVlcyA9IHN0ci50b0xvd2VyQ2FzZSgpO1xuXHRcdGNvbnN0IHJlcGVhdGFibGUgPSB2YWx1ZXMuaW5jbHVkZXMoJ3JlcGVhdCcpO1xuXG5cdFx0Y29uc3Qgc2l6ZXMgPSBzdHIuc3BsaXQoL3h8LC8pO1xuXHRcdGNvbnN0IG51bWJlcnMgPSBzaXplcy5maWx0ZXIodiA9PiAhaXNOYU4ocGFyc2VJbnQodi50cmltKCksIDEwKSkpO1xuXG5cdFx0bGV0IHggPSAwO1xuXHRcdGxldCB5ID0gMDtcblxuXHRcdGNvbnN0IG51bTAgPSBudW1iZXJzWzBdO1xuXHRcdGNvbnN0IG51bTEgPSBudW1iZXJzWzFdO1xuXHRcdGlmIChudW1iZXJzLmxlbmd0aCA9PT0gMiAmJiBudW0wICYmIG51bTEpIHtcblx0XHRcdHggPSBwYXJzZUludChudW0wLnRyaW0oKSwgMTApO1xuXHRcdFx0eSA9IHBhcnNlSW50KG51bTEudHJpbSgpLCAxMCk7XG5cdFx0fSBlbHNlIGlmIChudW1iZXJzLmxlbmd0aCA9PT0gMSAmJiBudW0wKSB7XG5cdFx0XHR5ID0gcGFyc2VJbnQobnVtMC50cmltKCksIDEwKTtcblx0XHR9XG5cblx0XHRyZXR1cm4geyB4LCB5LCByZXBlYXRhYmxlIH07XG5cdH1cblxuXHQvKipcblx0ICogUGFyc2UgaWNvbiBwcm9wZXJ0eVxuXHQgKi9cblx0YXN5bmMgcGFyc2VJY29uKGljb246IHN0cmluZywgdmlldz86IE1hcmtkb3duVmlldyB8IG51bGwpOiBQcm9taXNlPHsgdmFsdWU6IHN0cmluZyB8IG51bGw7IHR5cGU6IEJhbm5lckljb25UeXBlIH0+IHtcblx0XHRjb25zdCBzdHIgPSBpY29uIHx8ICcnO1xuXHRcdGNvbnN0IHJlc3VsdCA9IHsgdmFsdWU6IG51bGwgYXMgc3RyaW5nIHwgbnVsbCwgdHlwZTogQmFubmVySWNvblR5cGUuVGV4dCB9O1xuXG5cdFx0Ly8gQ2hlY2sgaWYgaXQncyBhIGxpbmsgZm9ybWF0IChleHBsaWNpdCBwYXR0ZXJucyBvciBmaWxlIHBhdGggd2l0aCBpbWFnZSBleHRlbnNpb24pXG5cdFx0Y29uc3QgaXNFeHBsaWNpdExpbmsgPVxuXHRcdFx0UEFUVEVSTlMuV2lraWxpbmsudGVzdChzdHIpIHx8XG5cdFx0XHRQQVRURVJOUy5NYXJrZG93bi50ZXN0KHN0cikgfHxcblx0XHRcdFBBVFRFUk5TLk1hcmtkb3duQmFyZS50ZXN0KHN0cikgfHxcblx0XHRcdFBBVFRFUk5TLldlYmxpbmsudGVzdChzdHIpIHx8XG5cdFx0XHR0aGlzLmlzT2JzaWRpYW5Vcmwoc3RyKTtcblxuXHRcdC8vIENoZWNrIGlmIGl0IGxvb2tzIGxpa2UgYSBmaWxlIHBhdGggKGhhcyBpbWFnZSBleHRlbnNpb24pXG5cdFx0Y29uc3QgaW1hZ2VFeHRlbnNpb25zID0gL1xcLihqcGd8anBlZ3xwbmd8Z2lmfHN2Z3x3ZWJwfGJtcHxpY298YXZpZikkL2k7XG5cdFx0Y29uc3QgaXNGaWxlUGF0aCA9IGltYWdlRXh0ZW5zaW9ucy50ZXN0KHN0cik7XG5cblx0XHRpZiAoaXNFeHBsaWNpdExpbmsgfHwgaXNGaWxlUGF0aCkge1xuXHRcdFx0cmVzdWx0LnR5cGUgPSBCYW5uZXJJY29uVHlwZS5MaW5rO1xuXHRcdFx0Y29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucGFyc2VMaW5rKHN0ciwgdmlldyk7XG5cdFx0XHRyZXN1bHQudmFsdWUgPSBkYXRhLnVybDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmVzdWx0LnZhbHVlID0gc3RyO1xuXHRcdH1cblxuXHRcdHJldHVybiByZXN1bHQ7XG5cdH1cblxuXHQvKipcblx0ICogQ2hlY2sgaWYgb25seSBpbWFnZSBwcm9wZXJ0aWVzIGNoYW5nZWQgKG5vdCB0aGUgVVJMKVxuXHQgKi9cblx0cHJpdmF0ZSBhc3luYyBpc0ltYWdlUHJvcGVydGllc1VwZGF0ZShcblx0XHRvbGRTdHI6IHN0cmluZyB8IG51bGwsXG5cdFx0bmV3U3RyOiBzdHJpbmcgfCBudWxsLFxuXHRcdHZpZXc/OiBNYXJrZG93blZpZXcgfCBudWxsXG5cdCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuXHRcdGlmICghb2xkU3RyIHx8ICFuZXdTdHIpIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdFx0Y29uc3Qgb2xkT3B0ID0gYXdhaXQgdGhpcy5wYXJzZUxpbmsob2xkU3RyLCB2aWV3KTtcblx0XHRjb25zdCBuZXdPcHQgPSBhd2FpdCB0aGlzLnBhcnNlTGluayhuZXdTdHIsIHZpZXcpO1xuXHRcdHJldHVybiBvbGRPcHQudXJsID09PSBuZXdPcHQudXJsO1xuXHR9XG5cblx0LyoqXG5cdCAqIENoZWNrIGlmIFVSTCBpcyBhbiBvYnNpZGlhbjovLyBVUkxcblx0ICovXG5cdHByaXZhdGUgaXNPYnNpZGlhblVybCh1cmw6IHN0cmluZyk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB1cmwuc3RhcnRzV2l0aCgnb2JzaWRpYW46Ly9vcGVuJyk7XG5cdH1cblxuXHQvKipcblx0ICogQ2FsY3VsYXRlIGZvbnQgc2l6ZSB0byBmaXQgdGV4dCBpbiBpY29uXG5cdCAqIFVzZXMgYWN0dWFsIERPTSBtZWFzdXJlbWVudCBmb3IgYWNjdXJhdGUgc2l6aW5nXG5cdCAqL1xuXHRwcml2YXRlIGNhbGN1bGF0ZUZvbnRTaXplKHRleHRDb250ZW50OiBzdHJpbmcsIGljb25TaXplOiBudW1iZXIpOiBzdHJpbmcge1xuXHRcdGNvbnN0IHRlbXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG5cdFx0dGVtcC5hZGRDbGFzcygnaW0tbWVhc3VyZS10ZW1wJyk7XG5cdFx0Ly8gVXNlIHNldENzc1Byb3BlcnRpZXMgZm9yIHN0eWxlIG1hbmlwdWxhdGlvbiAocmVxdWlyZWQgZm9yIG1lYXN1cmVtZW50IGVsZW1lbnQpXG5cdFx0Ly8gVGhpcyBlbGVtZW50IGlzIHRlbXBvcmFyeSBhbmQgaW1tZWRpYXRlbHkgcmVtb3ZlZCBhZnRlciBtZWFzdXJlbWVudFxuXHRcdHNldENzc1Byb3BlcnRpZXModGVtcCwge1xuXHRcdFx0cG9zaXRpb246ICdhYnNvbHV0ZScsXG5cdFx0XHR2aXNpYmlsaXR5OiAnaGlkZGVuJyxcblx0XHRcdCd3aGl0ZS1zcGFjZSc6ICdub3dyYXAnLFxuXHRcdFx0cGFkZGluZzogJzAnLFxuXHRcdFx0bWFyZ2luOiAnMCcsXG5cdFx0XHRsZWZ0OiAnLTk5OTlweCcsXG5cdFx0fSk7XG5cdFx0dGVtcC50ZXh0Q29udGVudCA9IHRleHRDb250ZW50LnRvVXBwZXJDYXNlKCk7XG5cdFx0ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0ZW1wKTtcblxuXHRcdGNvbnN0IGNoZWNrV2lkdGggPSBpY29uU2l6ZSAtIDE2O1xuXHRcdGxldCBmb250U2l6ZSA9IGljb25TaXplOyAvLyBTdGFydCBiaWdcblx0XHRzZXRDc3NQcm9wZXJ0aWVzKHRlbXAsIHsgJ2ZvbnQtc2l6ZSc6IGAke2ZvbnRTaXplfXB4YCB9KTtcblxuXHRcdHdoaWxlICh0ZW1wLm9mZnNldFdpZHRoID4gY2hlY2tXaWR0aCAmJiBmb250U2l6ZSA+IDEpIHtcblx0XHRcdGZvbnRTaXplIC09IDE7XG5cdFx0XHRzZXRDc3NQcm9wZXJ0aWVzKHRlbXAsIHsgJ2ZvbnQtc2l6ZSc6IGAke2ZvbnRTaXplfXB4YCB9KTtcblx0XHR9XG5cblx0XHRkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRlbXApO1xuXHRcdHJldHVybiBgJHtmb250U2l6ZX1weGA7XG5cdH1cblxuXHQvKipcblx0ICogR2V0IGFjdGl2ZSBtYXJrZG93biB2aWV3XG5cdCAqL1xuXHRwcml2YXRlIGdldEFjdGl2ZVZpZXcoKTogTWFya2Rvd25WaWV3IHwgbnVsbCB7XG5cdFx0cmV0dXJuIHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG5cdH1cblxuXHQvKipcblx0ICogQ3JlYXRlIGRlZmF1bHQgYmFubmVyIGRhdGEgb2JqZWN0XG5cdCAqL1xuXHRwcml2YXRlIGNyZWF0ZURlZmF1bHRCYW5uZXJEYXRhKHZpZXc/OiBNYXJrZG93blZpZXcgfCBudWxsLCBsYXN0Vmlld01vZGU/OiAnc291cmNlJyB8ICdwcmV2aWV3JyB8IG51bGwpOiBCYW5uZXJEYXRhIHtcblx0XHRsZXQgdmlld01vZGU6ICdzb3VyY2UnIHwgJ3ByZXZpZXcnIHwgbnVsbCA9IG51bGw7XG5cdFx0aWYgKHZpZXcpIHtcblx0XHRcdGNvbnN0IG1vZGUgPSB2aWV3LmdldE1vZGUoKTtcblx0XHRcdHZpZXdNb2RlID0gbW9kZSA9PT0gJ3ByZXZpZXcnID8gJ3ByZXZpZXcnIDogJ3NvdXJjZSc7XG5cdFx0fVxuXHRcdHJldHVybiB7XG5cdFx0XHRmaWxlcGF0aDogbnVsbCxcblx0XHRcdGltYWdlOiBudWxsLFxuXHRcdFx0aWNvbjogbnVsbCxcblx0XHRcdHZpZXdNb2RlLFxuXHRcdFx0bGFzdFZpZXdNb2RlOiBsYXN0Vmlld01vZGUgfHwgbnVsbCxcblx0XHRcdGlzSW1hZ2VQcm9wc1VwZGF0ZTogZmFsc2UsXG5cdFx0XHRpc0ltYWdlQ2hhbmdlOiBmYWxzZSxcblx0XHRcdG5lZWRzVXBkYXRlOiBmYWxzZSxcblx0XHR9O1xuXHR9XG5cblx0LyoqXG5cdCAqIENsZWFudXAgd2hlbiBwbHVnaW4gdW5sb2Fkc1xuXHQgKi9cblx0ZGVzdHJveSgpOiB2b2lkIHtcblx0XHQvLyBSZW1vdmUgYWxsIGJhbm5lcnNcblx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAuJHtDU1NfQ0xBU1NFUy5NYWlufWApLmZvckVhY2goZWwgPT4gZWwucmVtb3ZlKCkpO1xuXG5cdFx0Ly8gQ2xlYXIgZGF0YSBzdG9yZVxuXHRcdGJhbm5lckRhdGFTdG9yZS5jbGVhcigpO1xuXHR9XG59XG4iLCAiLyoqXHJcbiAqIEZpbGUgUGlja2VyIE1vZGFsXHJcbiAqIE9wZW5zIHRoZSBPUyBuYXRpdmUgZmlsZSBkaWFsb2cgZm9yIHNlbGVjdGluZyBsb2NhbCBpbWFnZXNcclxuICovXHJcblxyXG5pbXBvcnQgeyBBcHAsIE1vZGFsLCBOb3RpY2UsIE1hcmtkb3duVmlldywgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IEltYWdlUHJvY2Vzc29yIH0gZnJvbSAnLi4vc2VydmljZXMvSW1hZ2VQcm9jZXNzb3InO1xyXG5pbXBvcnQgeyBQcm9wZXJ0eUhhbmRsZXIgfSBmcm9tICcuLi9zZXJ2aWNlcy9Qcm9wZXJ0eUhhbmRsZXInO1xyXG5cclxuZXhwb3J0IGNsYXNzIEZpbGVQaWNrZXJNb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuXHRwcml2YXRlIGltYWdlUHJvY2Vzc29yOiBJbWFnZVByb2Nlc3NvcjtcclxuXHRwcml2YXRlIHByb3BlcnR5SGFuZGxlcjogUHJvcGVydHlIYW5kbGVyO1xyXG5cdHByaXZhdGUgaW5zZXJ0VG9Qcm9wZXJ0eTogYm9vbGVhbjtcclxuXHRwcml2YXRlIHByb3BlcnR5TmFtZT86IHN0cmluZztcclxuXHJcblx0Y29uc3RydWN0b3IoXHJcblx0XHRhcHA6IEFwcCxcclxuXHRcdGltYWdlUHJvY2Vzc29yOiBJbWFnZVByb2Nlc3NvcixcclxuXHRcdHByb3BlcnR5SGFuZGxlcjogUHJvcGVydHlIYW5kbGVyLFxyXG5cdFx0aW5zZXJ0VG9Qcm9wZXJ0eTogYm9vbGVhbiA9IGZhbHNlLFxyXG5cdFx0cHJvcGVydHlOYW1lPzogc3RyaW5nXHJcblx0KSB7XHJcblx0XHRzdXBlcihhcHApO1xyXG5cdFx0dGhpcy5pbWFnZVByb2Nlc3NvciA9IGltYWdlUHJvY2Vzc29yO1xyXG5cdFx0dGhpcy5wcm9wZXJ0eUhhbmRsZXIgPSBwcm9wZXJ0eUhhbmRsZXI7XHJcblx0XHR0aGlzLmluc2VydFRvUHJvcGVydHkgPSBpbnNlcnRUb1Byb3BlcnR5O1xyXG5cdFx0dGhpcy5wcm9wZXJ0eU5hbWUgPSBwcm9wZXJ0eU5hbWU7XHJcblx0fVxyXG5cclxuXHRvbk9wZW4oKTogdm9pZCB7XHJcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuXHJcblx0XHQvLyBDcmVhdGUgaGlkZGVuIGZpbGUgaW5wdXRcclxuXHRcdGNvbnN0IGlucHV0ID0gY29udGVudEVsLmNyZWF0ZUVsKCdpbnB1dCcsIHtcclxuXHRcdFx0dHlwZTogJ2ZpbGUnLFxyXG5cdFx0XHRhdHRyOiB7XHJcblx0XHRcdFx0YWNjZXB0OiAnaW1hZ2UvKicsXHJcblx0XHRcdFx0bXVsdGlwbGU6ICd0cnVlJyxcclxuXHRcdFx0XHRzdHlsZTogJ2Rpc3BsYXk6IG5vbmU7JyxcclxuXHRcdFx0fSxcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIEhhbmRsZSBmaWxlIHNlbGVjdGlvblxyXG5cdFx0aW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4geyB2b2lkIHRoaXMuaGFuZGxlRmlsZVNlbGVjdGlvbihpbnB1dCk7IH0pO1xyXG5cclxuXHRcdC8vIEhhbmRsZSBjYW5jZWxcclxuXHRcdGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NhbmNlbCcsICgpID0+IHtcclxuXHRcdFx0dGhpcy5jbG9zZSgpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gVHJpZ2dlciB0aGUgZmlsZSBkaWFsb2cgaW1tZWRpYXRlbHlcclxuXHRcdGlucHV0LmNsaWNrKCk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGFzeW5jIGhhbmRsZUZpbGVTZWxlY3Rpb24oaW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdFx0dGhpcy5jbG9zZSgpO1xyXG5cclxuXHRcdFx0Y29uc3QgZmlsZXMgPSBpbnB1dC5maWxlcztcclxuXHRcdFx0aWYgKCFmaWxlcyB8fCBmaWxlcy5sZW5ndGggPT09IDApIHtcclxuXHRcdFx0XHRuZXcgTm90aWNlKCdObyBmaWxlcyBzZWxlY3RlZCcpO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Y29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuZ2V0QWN0aXZlRmlsZSgpO1xyXG5cdFx0XHRpZiAoIWFjdGl2ZUZpbGUpIHtcclxuXHRcdFx0XHRuZXcgTm90aWNlKCdObyBhY3RpdmUgZmlsZScpO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Y29uc3QgdmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XHJcblx0XHRcdGNvbnN0IGVkaXRvciA9IHZpZXc/LmVkaXRvcjtcclxuXHJcblx0XHRcdC8vIFByb2Nlc3MgZWFjaCBzZWxlY3RlZCBmaWxlXHJcblx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgZmlsZXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHRjb25zdCBmaWxlID0gZmlsZXMuaXRlbShpKTtcclxuXHRcdFx0XHRpZiAoIWZpbGUgfHwgIWZpbGUudHlwZS5zdGFydHNXaXRoKCdpbWFnZS8nKSkge1xyXG5cdFx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpZiAodGhpcy5pbnNlcnRUb1Byb3BlcnR5KSB7XHJcblx0XHRcdFx0XHQvLyBWYWxpZGF0ZSBwcm9wZXJ0eSBuYW1lXHJcblx0XHRcdFx0XHRpZiAoIXRoaXMucHJvcGVydHlOYW1lIHx8IHRoaXMucHJvcGVydHlOYW1lLnRyaW0oKSA9PT0gJycpIHtcclxuXHRcdFx0XHRcdFx0bmV3IE5vdGljZSgnUGxlYXNlIHNwZWNpZnkgYSBwcm9wZXJ0eSBuYW1lIGluIHNldHRpbmdzJyk7XHJcblx0XHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHQvLyBJbnNlcnQgaW50byBwcm9wZXJ0eSAoY3JlYXRlIGlmIGl0IGRvZXNuJ3QgZXhpc3QpXHJcblx0XHRcdFx0XHQvLyBTa2lwIGRlc2NyaXB0aXZlIGltYWdlcyBmb3IgcHJvcGVydHkgaW5zZXJ0aW9ucyAoZGlzcGxheSB0ZXh0IGRvZXNuJ3QgYXBwbHkgdG8gcHJvcGVydGllcylcclxuXHRcdFx0XHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuaW1hZ2VQcm9jZXNzb3IucHJvY2Vzc0ltYWdlRmlsZShcclxuXHRcdFx0XHRcdFx0ZmlsZSxcclxuXHRcdFx0XHRcdFx0YWN0aXZlRmlsZSxcclxuXHRcdFx0XHRcdFx0dHJ1ZSwgLy8gU2hvdyByZW5hbWUgbW9kYWxcclxuXHRcdFx0XHRcdFx0dHJ1ZSAvLyBpc1Byb3BlcnR5SW5zZXJ0aW9uIC0gc2tpcCBkZXNjcmlwdGl2ZSBpbWFnZXNcclxuXHRcdFx0XHRcdCk7XHJcblxyXG5cdFx0XHRcdFx0aWYgKHJlc3VsdC5zdWNjZXNzICYmIHJlc3VsdC5maWxlKSB7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucHJvcGVydHlIYW5kbGVyLnNldFByb3BlcnR5VmFsdWUoXHJcblx0XHRcdFx0XHRcdFx0YWN0aXZlRmlsZSxcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnByb3BlcnR5TmFtZSxcclxuXHRcdFx0XHRcdFx0XHRyZXN1bHQuZmlsZVxyXG5cdFx0XHRcdFx0XHQpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHQvLyBJbnNlcnQgaW50byBub3RlIGJvZHlcclxuXHRcdFx0XHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuaW1hZ2VQcm9jZXNzb3IucHJvY2Vzc0ltYWdlRmlsZShcclxuXHRcdFx0XHRcdFx0ZmlsZSxcclxuXHRcdFx0XHRcdFx0YWN0aXZlRmlsZSxcclxuXHRcdFx0XHRcdFx0dHJ1ZSAvLyBTaG93IHJlbmFtZSBtb2RhbFxyXG5cdFx0XHRcdFx0KTtcclxuXHJcblx0XHRcdFx0XHRpZiAocmVzdWx0LnN1Y2Nlc3MgJiYgcmVzdWx0LmxpbmtUZXh0ICYmIGVkaXRvcikge1xyXG5cdFx0XHRcdFx0XHRlZGl0b3IucmVwbGFjZVNlbGVjdGlvbihyZXN1bHQubGlua1RleHQpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdG5ldyBOb3RpY2UoYEFkZGVkICR7ZmlsZXMubGVuZ3RofSBpbWFnZShzKWApO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBnZXRBY3RpdmVGaWxlKCk6IFRGaWxlIHwgbnVsbCB7XHJcblx0XHRjb25zdCB2aWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcclxuXHRcdHJldHVybiB2aWV3Py5maWxlID8/IG51bGw7XHJcblx0fVxyXG5cclxuXHRvbkNsb3NlKCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcclxuXHR9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBPcGVuIHRoZSBmaWxlIHBpY2tlciBhbmQgcHJvY2VzcyBzZWxlY3RlZCBpbWFnZXNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBvcGVuRmlsZVBpY2tlcihcclxuXHRhcHA6IEFwcCxcclxuXHRpbWFnZVByb2Nlc3NvcjogSW1hZ2VQcm9jZXNzb3IsXHJcblx0cHJvcGVydHlIYW5kbGVyOiBQcm9wZXJ0eUhhbmRsZXIsXHJcblx0aW5zZXJ0VG9Qcm9wZXJ0eTogYm9vbGVhbiA9IGZhbHNlLFxyXG5cdHByb3BlcnR5TmFtZT86IHN0cmluZ1xyXG4pOiB2b2lkIHtcclxuXHRuZXcgRmlsZVBpY2tlck1vZGFsKGFwcCwgaW1hZ2VQcm9jZXNzb3IsIHByb3BlcnR5SGFuZGxlciwgaW5zZXJ0VG9Qcm9wZXJ0eSwgcHJvcGVydHlOYW1lKS5vcGVuKCk7XHJcbn1cclxuIiwgIi8qKlxyXG4gKiBSZW1vdGUgU2VhcmNoIE1vZGFsXHJcbiAqIFNlYXJjaCBhbmQgaW5zZXJ0IGltYWdlcyBmcm9tIFVuc3BsYXNoLCBQZXhlbHMsIGFuZCBQaXhhYmF5XHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQXBwLCBNb2RhbCwgTm90aWNlLCBNYXJrZG93blZpZXcsIFRGaWxlLCBkZWJvdW5jZSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgSW1hZ2VQcm92aWRlciwgUmVtb3RlSW1hZ2UsIEltYWdlTWFuYWdlclNldHRpbmdzLCBJbWFnZVNpemUgfSBmcm9tICcuLi90eXBlcyc7XHJcbmltcG9ydCB7IFJlbW90ZUltYWdlU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL1JlbW90ZUltYWdlU2VydmljZSc7XHJcbmltcG9ydCB7IEltYWdlUHJvY2Vzc29yIH0gZnJvbSAnLi4vc2VydmljZXMvSW1hZ2VQcm9jZXNzb3InO1xyXG5pbXBvcnQgeyBQcm9wZXJ0eUhhbmRsZXIgfSBmcm9tICcuLi9zZXJ2aWNlcy9Qcm9wZXJ0eUhhbmRsZXInO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBSZW1vdGVTZWFyY2hPcHRpb25zIHtcclxuXHRpbnNlcnRUb1Byb3BlcnR5PzogYm9vbGVhbjtcclxuXHRwcm9wZXJ0eU5hbWU/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBSZW1vdGVTZWFyY2hNb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuXHRwcml2YXRlIHNldHRpbmdzOiBJbWFnZU1hbmFnZXJTZXR0aW5ncztcclxuXHRwcml2YXRlIHJlbW90ZVNlcnZpY2U6IFJlbW90ZUltYWdlU2VydmljZTtcclxuXHRwcml2YXRlIGltYWdlUHJvY2Vzc29yOiBJbWFnZVByb2Nlc3NvcjtcclxuXHRwcml2YXRlIHByb3BlcnR5SGFuZGxlcjogUHJvcGVydHlIYW5kbGVyO1xyXG5cdHByaXZhdGUgb3B0aW9uczogUmVtb3RlU2VhcmNoT3B0aW9ucztcclxuXHJcblx0cHJpdmF0ZSBjb250YWluZXI6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XHJcblx0cHJpdmF0ZSBxdWVyeUlucHV0OiBIVE1MSW5wdXRFbGVtZW50IHwgbnVsbCA9IG51bGw7XHJcblx0cHJpdmF0ZSBwcm92aWRlclNlbGVjdDogSFRNTFNlbGVjdEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuXHRwcml2YXRlIHNpemVTZWxlY3Q6IEhUTUxTZWxlY3RFbGVtZW50IHwgbnVsbCA9IG51bGw7XHJcblx0cHJpdmF0ZSBzY3JvbGxBcmVhOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xyXG5cdHByaXZhdGUgaW1hZ2VzTGlzdDogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuXHRwcml2YXRlIGxvYWRpbmdDb250YWluZXI6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XHJcblxyXG5cdHByaXZhdGUgY3VycmVudFF1ZXJ5OiBzdHJpbmcgPSAnJztcclxuXHRwcml2YXRlIGN1cnJlbnRQcm92aWRlcjogSW1hZ2VQcm92aWRlcjtcclxuXHRwcml2YXRlIGN1cnJlbnRQYWdlOiBudW1iZXIgPSAxO1xyXG5cdHByaXZhdGUgY3VycmVudFJlc3VsdHM6IFJlbW90ZUltYWdlW10gPSBbXTtcclxuXHRwcml2YXRlIGlzTG9hZGluZzogYm9vbGVhbiA9IGZhbHNlO1xyXG5cdHByaXZhdGUgc2VsZWN0ZWRJbWFnZTogbnVtYmVyID0gMDtcclxuXHJcblx0Y29uc3RydWN0b3IoXHJcblx0XHRhcHA6IEFwcCxcclxuXHRcdHNldHRpbmdzOiBJbWFnZU1hbmFnZXJTZXR0aW5ncyxcclxuXHRcdHJlbW90ZVNlcnZpY2U6IFJlbW90ZUltYWdlU2VydmljZSxcclxuXHRcdGltYWdlUHJvY2Vzc29yOiBJbWFnZVByb2Nlc3NvcixcclxuXHRcdHByb3BlcnR5SGFuZGxlcjogUHJvcGVydHlIYW5kbGVyLFxyXG5cdFx0b3B0aW9uczogUmVtb3RlU2VhcmNoT3B0aW9ucyA9IHt9XHJcblx0KSB7XHJcblx0XHRzdXBlcihhcHApO1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xyXG5cdFx0dGhpcy5yZW1vdGVTZXJ2aWNlID0gcmVtb3RlU2VydmljZTtcclxuXHRcdHRoaXMuaW1hZ2VQcm9jZXNzb3IgPSBpbWFnZVByb2Nlc3NvcjtcclxuXHRcdHRoaXMucHJvcGVydHlIYW5kbGVyID0gcHJvcGVydHlIYW5kbGVyO1xyXG5cdFx0dGhpcy5vcHRpb25zID0gb3B0aW9ucztcclxuXHRcdHRoaXMuY3VycmVudFByb3ZpZGVyID0gc2V0dGluZ3MuZGVmYXVsdFByb3ZpZGVyO1xyXG5cdFx0dGhpcy5jb250YWluZXJFbC5hZGRDbGFzcygnaW1hZ2UtaW5zZXJ0ZXItY29udGFpbmVyJyk7XHJcblx0fVxyXG5cclxuXHRvbk9wZW4oKTogdm9pZCB7XHJcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuXHJcblx0XHQvLyBNYWluIGNvbnRhaW5lclxyXG5cdFx0dGhpcy5jb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnY29udGFpbmVyJyB9KTtcclxuXHJcblx0XHQvLyBJbnB1dCBncm91cFxyXG5cdFx0Y29uc3QgaW5wdXRHcm91cCA9IHRoaXMuY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2lucHV0LWdyb3VwJyB9KTtcclxuXHJcblx0XHQvLyBRdWVyeSBpbnB1dFxyXG5cdFx0dGhpcy5xdWVyeUlucHV0ID0gaW5wdXRHcm91cC5jcmVhdGVFbCgnaW5wdXQnLCB7XHJcblx0XHRcdHR5cGU6ICd0ZXh0JyxcclxuXHRcdFx0Y2xzOiAncXVlcnktaW5wdXQnLFxyXG5cdFx0XHRhdHRyOiB7IHBsYWNlaG9sZGVyOiAnU2VhcmNoIGltYWdlcy4uLicsIGF1dG9mb2N1czogJ3RydWUnIH0sXHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBQcm92aWRlciBzZWxlY3RvclxyXG5cdFx0dGhpcy5wcm92aWRlclNlbGVjdCA9IGlucHV0R3JvdXAuY3JlYXRlRWwoJ3NlbGVjdCcsIHsgY2xzOiAnc2VsZWN0b3InIH0pO1xyXG5cdFx0dGhpcy5wcm92aWRlclNlbGVjdC5jcmVhdGVFbCgnb3B0aW9uJywgeyB0ZXh0OiAnVW5zcGxhc2gnLCB2YWx1ZTogSW1hZ2VQcm92aWRlci5VbnNwbGFzaCB9KTtcclxuXHRcdHRoaXMucHJvdmlkZXJTZWxlY3QuY3JlYXRlRWwoJ29wdGlvbicsIHsgdGV4dDogJ1BleGVscycsIHZhbHVlOiBJbWFnZVByb3ZpZGVyLlBleGVscyB9KTtcclxuXHRcdHRoaXMucHJvdmlkZXJTZWxlY3QuY3JlYXRlRWwoJ29wdGlvbicsIHsgdGV4dDogJ1BpeGFiYXknLCB2YWx1ZTogSW1hZ2VQcm92aWRlci5QaXhhYmF5IH0pO1xyXG5cdFx0dGhpcy5wcm92aWRlclNlbGVjdC52YWx1ZSA9IHRoaXMuY3VycmVudFByb3ZpZGVyO1xyXG5cclxuXHRcdC8vIFNpemUgc2VsZWN0b3JcclxuXHRcdHRoaXMuc2l6ZVNlbGVjdCA9IGlucHV0R3JvdXAuY3JlYXRlRWwoJ3NlbGVjdCcsIHsgY2xzOiAnc2VsZWN0b3InIH0pO1xyXG5cdFx0dGhpcy5zaXplU2VsZWN0LmNyZWF0ZUVsKCdvcHRpb24nLCB7IHRleHQ6ICdPcmlnaW5hbCcsIHZhbHVlOiBJbWFnZVNpemUuT3JpZ2luYWwgfSk7XHJcblx0XHR0aGlzLnNpemVTZWxlY3QuY3JlYXRlRWwoJ29wdGlvbicsIHsgdGV4dDogJ0xhcmdlJywgdmFsdWU6IEltYWdlU2l6ZS5MYXJnZSB9KTtcclxuXHRcdHRoaXMuc2l6ZVNlbGVjdC5jcmVhdGVFbCgnb3B0aW9uJywgeyB0ZXh0OiAnTWVkaXVtJywgdmFsdWU6IEltYWdlU2l6ZS5NZWRpdW0gfSk7XHJcblx0XHR0aGlzLnNpemVTZWxlY3QuY3JlYXRlRWwoJ29wdGlvbicsIHsgdGV4dDogJ1NtYWxsJywgdmFsdWU6IEltYWdlU2l6ZS5TbWFsbCB9KTtcclxuXHRcdHRoaXMuc2l6ZVNlbGVjdC52YWx1ZSA9IHRoaXMuc2V0dGluZ3MuZGVmYXVsdEltYWdlU2l6ZTtcclxuXHJcblx0XHQvLyBMb2FkaW5nIGNvbnRhaW5lclxyXG5cdFx0dGhpcy5sb2FkaW5nQ29udGFpbmVyID0gdGhpcy5jb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnbG9hZGluZy1jb250YWluZXInIH0pO1xyXG5cdFx0Y29uc3QgbG9hZGVySWNvbiA9IHRoaXMubG9hZGluZ0NvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdsb2FkZXItaWNvbicgfSk7XHJcblx0XHRjb25zdCBzdmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3N2ZycpO1xyXG5cdFx0c3ZnLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCAnMjQnKTtcclxuXHRcdHN2Zy5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsICcyNCcpO1xyXG5cdFx0c3ZnLnNldEF0dHJpYnV0ZSgndmlld0JveCcsICcwIDAgMjQgMjQnKTtcclxuXHRcdHN2Zy5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCAnbm9uZScpO1xyXG5cdFx0c3ZnLnNldEF0dHJpYnV0ZSgnc3Ryb2tlJywgJ2N1cnJlbnRDb2xvcicpO1xyXG5cdFx0c3ZnLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLXdpZHRoJywgJzInKTtcclxuXHRcdHN2Zy5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS1saW5lY2FwJywgJ3JvdW5kJyk7XHJcblx0XHRzdmcuc2V0QXR0cmlidXRlKCdzdHJva2UtbGluZWpvaW4nLCAncm91bmQnKTtcclxuXHRcdHN2Zy5jbGFzc0xpc3QuYWRkKCdsdWNpZGUnLCAnbHVjaWRlLWxvYWRlci1jaXJjbGUnKTtcclxuXHRcdGNvbnN0IHBhdGggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3BhdGgnKTtcclxuXHRcdHBhdGguc2V0QXR0cmlidXRlKCdkJywgJ00yMSAxMmE5IDkgMCAxIDEtNi4yMTktOC41NicpO1xyXG5cdFx0c3ZnLmFwcGVuZENoaWxkKHBhdGgpO1xyXG5cdFx0bG9hZGVySWNvbi5hcHBlbmRDaGlsZChzdmcpO1xyXG5cdFx0dGhpcy5zaG93TG9hZGluZyhmYWxzZSk7XHJcblxyXG5cdFx0Ly8gU2Nyb2xsIGFyZWFcclxuXHRcdHRoaXMuc2Nyb2xsQXJlYSA9IHRoaXMuY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3Njcm9sbC1hcmVhJyB9KTtcclxuXHRcdHRoaXMuaW1hZ2VzTGlzdCA9IHRoaXMuc2Nyb2xsQXJlYS5jcmVhdGVEaXYoeyBjbHM6ICdpbWFnZXMtbGlzdCcgfSk7XHJcblxyXG5cdFx0Ly8gRXZlbnQgbGlzdGVuZXJzXHJcblx0XHR0aGlzLnNldHVwRXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcblx0XHQvLyBGb2N1cyBpbnB1dFxyXG5cdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdHRoaXMucXVlcnlJbnB1dD8uZm9jdXMoKTtcclxuXHRcdH0sIDUwKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgc2V0dXBFdmVudExpc3RlbmVycygpOiB2b2lkIHtcclxuXHRcdC8vIERlYm91bmNlZCBzZWFyY2hcclxuXHRcdGNvbnN0IGRlYm91bmNlZFNlYXJjaCA9IGRlYm91bmNlKChxdWVyeTogc3RyaW5nKSA9PiB7XHJcblx0XHRcdGlmIChxdWVyeS50cmltKCkpIHtcclxuXHRcdFx0XHR2b2lkIHRoaXMucGVyZm9ybVNlYXJjaChxdWVyeSwgdHJ1ZSk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dGhpcy5jbGVhclJlc3VsdHMoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSwgMTAwMCwgdHJ1ZSk7XHJcblxyXG5cdFx0Ly8gUXVlcnkgaW5wdXRcclxuXHRcdHRoaXMucXVlcnlJbnB1dD8uYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoZSkgPT4ge1xyXG5cdFx0XHRjb25zdCBxdWVyeSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcclxuXHRcdFx0dGhpcy5jdXJyZW50UXVlcnkgPSBxdWVyeTtcclxuXHRcdFx0dGhpcy5zaG93TG9hZGluZyh0cnVlKTtcclxuXHRcdFx0ZGVib3VuY2VkU2VhcmNoKHF1ZXJ5KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMucXVlcnlJbnB1dD8uYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XHJcblx0XHRcdGlmIChlLmtleSA9PT0gJ0VudGVyJykge1xyXG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRjb25zdCBxdWVyeSA9IHRoaXMucXVlcnlJbnB1dD8udmFsdWUudHJpbSgpIHx8ICcnO1xyXG5cdFx0XHRcdGlmIChxdWVyeSkge1xyXG5cdFx0XHRcdFx0dm9pZCB0aGlzLnBlcmZvcm1TZWFyY2gocXVlcnksIHRydWUpO1xyXG5cdFx0XHRcdH0gZWxzZSBpZiAodGhpcy5jdXJyZW50UmVzdWx0cy5sZW5ndGggPiAwICYmIHRoaXMuc2VsZWN0ZWRJbWFnZSA8IHRoaXMuY3VycmVudFJlc3VsdHMubGVuZ3RoKSB7XHJcblx0XHRcdFx0XHQvLyBJbnNlcnQgc2VsZWN0ZWQgaW1hZ2Ugb24gRW50ZXJcclxuXHRcdFx0XHRcdGNvbnN0IGltYWdlID0gdGhpcy5jdXJyZW50UmVzdWx0c1t0aGlzLnNlbGVjdGVkSW1hZ2VdO1xyXG5cdFx0XHRcdFx0aWYgKGltYWdlKSB7XHJcblx0XHRcdFx0XHRcdHZvaWQgdGhpcy5pbnNlcnRJbWFnZShpbWFnZSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2UgaWYgKGUuY3RybEtleSAmJiBlLmtleSA9PT0gJ24nKSB7XHJcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdGlmICh0aGlzLmN1cnJlbnRSZXN1bHRzLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0XHRcdHRoaXMuc2VsZWN0ZWRJbWFnZSA9ICh0aGlzLnNlbGVjdGVkSW1hZ2UgKyAxKSAlIHRoaXMuY3VycmVudFJlc3VsdHMubGVuZ3RoO1xyXG5cdFx0XHRcdFx0dGhpcy5yZW5kZXJSZXN1bHRzKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2UgaWYgKGUuY3RybEtleSAmJiBlLmtleSA9PT0gJ3AnKSB7XHJcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdGlmICh0aGlzLmN1cnJlbnRSZXN1bHRzLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0XHRcdHRoaXMuc2VsZWN0ZWRJbWFnZSA9ICh0aGlzLnNlbGVjdGVkSW1hZ2UgLSAxICsgdGhpcy5jdXJyZW50UmVzdWx0cy5sZW5ndGgpICUgdGhpcy5jdXJyZW50UmVzdWx0cy5sZW5ndGg7XHJcblx0XHRcdFx0XHR0aGlzLnJlbmRlclJlc3VsdHMoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIFByb3ZpZGVyIGNoYW5nZVxyXG5cdFx0dGhpcy5wcm92aWRlclNlbGVjdD8uYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IHtcclxuXHRcdFx0dGhpcy5jdXJyZW50UHJvdmlkZXIgPSAoZS50YXJnZXQgYXMgSFRNTFNlbGVjdEVsZW1lbnQpLnZhbHVlIGFzIEltYWdlUHJvdmlkZXI7XHJcblx0XHRcdGlmICh0aGlzLmN1cnJlbnRRdWVyeSkge1xyXG5cdFx0XHRcdHRoaXMuc2hvd0xvYWRpbmcodHJ1ZSk7XHJcblx0XHRcdFx0dm9pZCB0aGlzLnBlcmZvcm1TZWFyY2godGhpcy5jdXJyZW50UXVlcnksIHRydWUpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBTaXplIGNoYW5nZVxyXG5cdFx0dGhpcy5zaXplU2VsZWN0Py5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZSkgPT4ge1xyXG5cdFx0XHRjb25zdCBzaXplID0gKGUudGFyZ2V0IGFzIEhUTUxTZWxlY3RFbGVtZW50KS52YWx1ZSBhcyBJbWFnZVNpemU7XHJcblx0XHRcdHRoaXMuc2V0dGluZ3MuZGVmYXVsdEltYWdlU2l6ZSA9IHNpemU7XHJcblx0XHRcdC8vIFJlLXNlYXJjaCBpZiB3ZSBoYXZlIGEgcXVlcnlcclxuXHRcdFx0aWYgKHRoaXMuY3VycmVudFF1ZXJ5KSB7XHJcblx0XHRcdFx0dGhpcy5zaG93TG9hZGluZyh0cnVlKTtcclxuXHRcdFx0XHR2b2lkIHRoaXMucGVyZm9ybVNlYXJjaCh0aGlzLmN1cnJlbnRRdWVyeSwgdHJ1ZSk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBhc3luYyBwZXJmb3JtU2VhcmNoKHF1ZXJ5OiBzdHJpbmcsIHJlc2V0UGFnZTogYm9vbGVhbiA9IGZhbHNlKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHRpZiAodGhpcy5pc0xvYWRpbmcpIHJldHVybjtcclxuXHJcblx0XHR0aGlzLmN1cnJlbnRRdWVyeSA9IHF1ZXJ5O1xyXG5cdFx0aWYgKHJlc2V0UGFnZSkge1xyXG5cdFx0XHR0aGlzLmN1cnJlbnRQYWdlID0gMTtcclxuXHRcdH1cclxuXHRcdHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTtcclxuXHRcdHRoaXMuc2hvd0xvYWRpbmcodHJ1ZSk7XHJcblxyXG5cdFx0dHJ5IHtcclxuXHRcdFx0dGhpcy5jdXJyZW50UmVzdWx0cyA9IGF3YWl0IHRoaXMucmVtb3RlU2VydmljZS5zZWFyY2goXHJcblx0XHRcdFx0cXVlcnksXHJcblx0XHRcdFx0dGhpcy5jdXJyZW50UHJvdmlkZXIsXHJcblx0XHRcdFx0dGhpcy5jdXJyZW50UGFnZVxyXG5cdFx0XHQpO1xyXG5cdFx0XHR0aGlzLnNlbGVjdGVkSW1hZ2UgPSAwO1xyXG5cdFx0XHR0aGlzLnJlbmRlclJlc3VsdHMoKTtcclxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ1NlYXJjaCBmYWlsZWQ6JywgZXJyb3IpO1xyXG5cdFx0XHRjb25zdCBlcnJvck1zZyA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1NlYXJjaCBmYWlsZWQnO1xyXG5cdFx0XHRuZXcgTm90aWNlKGBSZXF1ZXN0IGZhaWxlZCwgc3RhdHVzICR7ZXJyb3JNc2d9YCk7XHJcblx0XHRcdHRoaXMucmVuZGVyRXJyb3IoZXJyb3JNc2cpO1xyXG5cdFx0fSBmaW5hbGx5IHtcclxuXHRcdFx0dGhpcy5pc0xvYWRpbmcgPSBmYWxzZTtcclxuXHRcdFx0dGhpcy5zaG93TG9hZGluZyhmYWxzZSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHJlbmRlclJlc3VsdHMoKTogdm9pZCB7XHJcblx0XHRpZiAoIXRoaXMuaW1hZ2VzTGlzdCkgcmV0dXJuO1xyXG5cdFx0dGhpcy5pbWFnZXNMaXN0LmVtcHR5KCk7XHJcblxyXG5cdFx0aWYgKHRoaXMuY3VycmVudFJlc3VsdHMubGVuZ3RoID09PSAwKSB7XHJcblx0XHRcdGNvbnN0IG5vUmVzdWx0ID0gdGhpcy5pbWFnZXNMaXN0LmNyZWF0ZURpdih7IGNsczogJ25vLXJlc3VsdC1jb250YWluZXInIH0pO1xyXG5cdFx0XHRub1Jlc3VsdC5zZXRUZXh0KCdObyByZXN1bHRzIGZvdW5kJyk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY3VycmVudFJlc3VsdHMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0Y29uc3QgaW1hZ2UgPSB0aGlzLmN1cnJlbnRSZXN1bHRzW2ldO1xyXG5cdFx0XHRpZiAoIWltYWdlKSBjb250aW51ZTtcclxuXHJcblx0XHRcdGNvbnN0IHJlc3VsdCA9IHRoaXMuaW1hZ2VzTGlzdC5jcmVhdGVEaXYoe1xyXG5cdFx0XHRcdGNsczogYHF1ZXJ5LXJlc3VsdCR7aSA9PT0gdGhpcy5zZWxlY3RlZEltYWdlID8gJyBpcy1zZWxlY3RlZCcgOiAnJ31gLFxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHJlc3VsdC5jcmVhdGVFbCgnaW1nJywge1xyXG5cdFx0XHRcdGF0dHI6IHtcclxuXHRcdFx0XHRcdHNyYzogaW1hZ2UudGh1bWJuYWlsVXJsLFxyXG5cdFx0XHRcdFx0YWx0OiBpbWFnZS5kZXNjcmlwdGlvbiB8fCAnSW1hZ2UnLFxyXG5cdFx0XHRcdH0sXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0cmVzdWx0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0XHRcdHZvaWQgdGhpcy5pbnNlcnRJbWFnZShpbWFnZSk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0cmVzdWx0LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsICgpID0+IHtcclxuXHRcdFx0XHR0aGlzLnNlbGVjdGVkSW1hZ2UgPSBpO1xyXG5cdFx0XHRcdHRoaXMucmVuZGVyUmVzdWx0cygpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBQYWdpbmF0aW9uXHJcblx0XHR0aGlzLnJlbmRlclBhZ2luYXRpb24oKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgcmVuZGVyUGFnaW5hdGlvbigpOiB2b2lkIHtcclxuXHRcdGlmICghdGhpcy5zY3JvbGxBcmVhKSByZXR1cm47XHJcblxyXG5cdFx0Ly8gUmVtb3ZlIGV4aXN0aW5nIHBhZ2luYXRpb25cclxuXHRcdGNvbnN0IGV4aXN0aW5nUGFnaW5hdGlvbiA9IHRoaXMuc2Nyb2xsQXJlYS5xdWVyeVNlbGVjdG9yKCcucGFnaW5hdGlvbicpO1xyXG5cdFx0aWYgKGV4aXN0aW5nUGFnaW5hdGlvbikge1xyXG5cdFx0XHRleGlzdGluZ1BhZ2luYXRpb24ucmVtb3ZlKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQ2hlY2sgaWYgd2UgaGF2ZSBtb3JlIHBhZ2VzIChzaW1wbGlmaWVkIC0gd291bGQgbmVlZCBhY3R1YWwgcGFnaW5hdGlvbiBpbmZvIGZyb20gQVBJKVxyXG5cdFx0Y29uc3QgaGFzTW9yZSA9IHRoaXMuY3VycmVudFJlc3VsdHMubGVuZ3RoID49IDIwO1xyXG5cclxuXHRcdGlmIChoYXNNb3JlIHx8IHRoaXMuY3VycmVudFBhZ2UgPiAxKSB7XHJcblx0XHRcdGNvbnN0IHBhZ2luYXRpb24gPSB0aGlzLnNjcm9sbEFyZWEuY3JlYXRlRGl2KHsgY2xzOiAncGFnaW5hdGlvbicgfSk7XHJcblxyXG5cdFx0XHRpZiAodGhpcy5jdXJyZW50UGFnZSA+IDEpIHtcclxuXHRcdFx0XHRjb25zdCBwcmV2QnRuID0gcGFnaW5hdGlvbi5jcmVhdGVFbCgnYnV0dG9uJywgeyBjbHM6ICdidG4nLCB0ZXh0OiAnUHJldmlvdXMnIH0pO1xyXG5cdFx0XHRcdHByZXZCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLmN1cnJlbnRQYWdlLS07XHJcblx0XHRcdFx0XHR0aGlzLnNob3dMb2FkaW5nKHRydWUpO1xyXG5cdFx0XHRcdFx0dm9pZCB0aGlzLnBlcmZvcm1TZWFyY2godGhpcy5jdXJyZW50UXVlcnkpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoaGFzTW9yZSkge1xyXG5cdFx0XHRcdGNvbnN0IG5leHRCdG4gPSBwYWdpbmF0aW9uLmNyZWF0ZUVsKCdidXR0b24nLCB7IGNsczogJ2J0bicsIHRleHQ6ICdOZXh0JyB9KTtcclxuXHRcdFx0XHRuZXh0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5jdXJyZW50UGFnZSsrO1xyXG5cdFx0XHRcdFx0dGhpcy5zaG93TG9hZGluZyh0cnVlKTtcclxuXHRcdFx0XHRcdHZvaWQgdGhpcy5wZXJmb3JtU2VhcmNoKHRoaXMuY3VycmVudFF1ZXJ5KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSByZW5kZXJFcnJvcihtZXNzYWdlOiBzdHJpbmcpOiB2b2lkIHtcclxuXHRcdGlmICghdGhpcy5pbWFnZXNMaXN0KSByZXR1cm47XHJcblx0XHR0aGlzLmltYWdlc0xpc3QuZW1wdHkoKTtcclxuXHRcdGNvbnN0IGVycm9yRGl2ID0gdGhpcy5pbWFnZXNMaXN0LmNyZWF0ZURpdih7IGNsczogJ25vLXJlc3VsdC1jb250YWluZXIgZXJyb3ItdGV4dCcgfSk7XHJcblx0XHRlcnJvckRpdi5zZXRUZXh0KGBFcnJvcjogJHttZXNzYWdlfWApO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBjbGVhclJlc3VsdHMoKTogdm9pZCB7XHJcblx0XHRpZiAodGhpcy5pbWFnZXNMaXN0KSB7XHJcblx0XHRcdHRoaXMuaW1hZ2VzTGlzdC5lbXB0eSgpO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5jdXJyZW50UmVzdWx0cyA9IFtdO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBzaG93TG9hZGluZyhzaG93OiBib29sZWFuKTogdm9pZCB7XHJcblx0XHRpZiAodGhpcy5sb2FkaW5nQ29udGFpbmVyKSB7XHJcblx0XHRcdHRoaXMubG9hZGluZ0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gc2hvdyA/ICdmbGV4JyA6ICdub25lJztcclxuXHRcdH1cclxuXHRcdGlmICh0aGlzLnNjcm9sbEFyZWEpIHtcclxuXHRcdFx0aWYgKHNob3cpIHtcclxuXHRcdFx0XHR0aGlzLnNjcm9sbEFyZWEuYWRkQ2xhc3MoJ2xvYWRpbmcnKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR0aGlzLnNjcm9sbEFyZWEucmVtb3ZlQ2xhc3MoJ2xvYWRpbmcnKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBhc3luYyBpbnNlcnRJbWFnZShpbWFnZTogUmVtb3RlSW1hZ2UpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdHRoaXMuY2xvc2UoKTtcclxuXHJcblx0XHRjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5nZXRBY3RpdmVGaWxlKCk7XHJcblx0XHRpZiAoIWFjdGl2ZUZpbGUpIHtcclxuXHRcdFx0bmV3IE5vdGljZSgnTm8gYWN0aXZlIGZpbGUnKTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRyeSB7XHJcblx0XHRcdC8vIEdldCBkb3dubG9hZCBVUkwgYmFzZWQgb24gc2l6ZVxyXG5cdFx0XHRjb25zdCBkb3dubG9hZFVybCA9IHRoaXMucmVtb3RlU2VydmljZS5nZXREb3dubG9hZFVybChpbWFnZSwgdGhpcy5zZXR0aW5ncy5kZWZhdWx0SW1hZ2VTaXplKTtcclxuXHJcblx0XHRcdGlmICh0aGlzLm9wdGlvbnMuaW5zZXJ0VG9Qcm9wZXJ0eSkge1xyXG5cdFx0XHRcdC8vIFZhbGlkYXRlIHByb3BlcnR5IG5hbWVcclxuXHRcdFx0XHRpZiAoIXRoaXMub3B0aW9ucy5wcm9wZXJ0eU5hbWUgfHwgdGhpcy5vcHRpb25zLnByb3BlcnR5TmFtZS50cmltKCkgPT09ICcnKSB7XHJcblx0XHRcdFx0XHRuZXcgTm90aWNlKCdQbGVhc2Ugc3BlY2lmeSBhIHByb3BlcnR5IG5hbWUgaW4gc2V0dGluZ3MnKTtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIEluc2VydCBpbnRvIHByb3BlcnR5IChjcmVhdGUgaWYgaXQgZG9lc24ndCBleGlzdClcclxuXHRcdFx0XHQvLyBQYXNzIFJlbW90ZUltYWdlIHNvIFByb3BlcnR5SGFuZGxlciBjYW4gZ2VuZXJhdGUgcmVmZXJyYWwgdGV4dCBpZiBuZWVkZWRcclxuXHRcdFx0XHRhd2FpdCB0aGlzLnByb3BlcnR5SGFuZGxlci5pbnNlcnRJbWFnZUZyb21VcmwoXHJcblx0XHRcdFx0XHRkb3dubG9hZFVybCxcclxuXHRcdFx0XHRcdGFjdGl2ZUZpbGUsXHJcblx0XHRcdFx0XHR0aGlzLm9wdGlvbnMucHJvcGVydHlOYW1lLFxyXG5cdFx0XHRcdFx0aW1hZ2UsIC8vIFBhc3MgUmVtb3RlSW1hZ2UgZm9yIHJlZmVycmFsIHRleHQgZ2VuZXJhdGlvblxyXG5cdFx0XHRcdFx0dGhpcy5jdXJyZW50UXVlcnkgLy8gUGFzcyBzZWFyY2ggdGVybSBhcyBzdWdnZXN0ZWQgbmFtZVxyXG5cdFx0XHRcdCk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Ly8gSW5zZXJ0IGludG8gbm90ZSBib2R5XHJcblx0XHRcdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5pbWFnZVByb2Nlc3Nvci5wcm9jZXNzSW1hZ2VVcmwoXHJcblx0XHRcdFx0XHRkb3dubG9hZFVybCxcclxuXHRcdFx0XHRcdGFjdGl2ZUZpbGUsXHJcblx0XHRcdFx0XHR0cnVlLCAvLyBTaG93IHJlbmFtZSBtb2RhbFxyXG5cdFx0XHRcdFx0ZmFsc2UsIC8vIE5vdCBwcm9wZXJ0eSBpbnNlcnRpb25cclxuXHRcdFx0XHRcdHRoaXMuY3VycmVudFF1ZXJ5IC8vIFBhc3Mgc2VhcmNoIHRlcm0gYXMgc3VnZ2VzdGVkIG5hbWVcclxuXHRcdFx0XHQpO1xyXG5cclxuXHRcdFx0XHRpZiAocmVzdWx0LnN1Y2Nlc3MgJiYgcmVzdWx0LmxpbmtUZXh0KSB7XHJcblx0XHRcdFx0XHQvLyBHZW5lcmF0ZSByZWZlcnJhbCB0ZXh0IGFuZCBhcHBlbmQgaXRcclxuXHRcdFx0XHRcdGNvbnN0IHJlZmVycmFsVGV4dCA9IHRoaXMucmVtb3RlU2VydmljZS5nZW5lcmF0ZVJlZmVycmFsVGV4dChpbWFnZSk7XHJcblx0XHRcdFx0XHRjb25zdCBmdWxsVGV4dCA9IHJlc3VsdC5saW5rVGV4dCArIHJlZmVycmFsVGV4dDtcclxuXHJcblx0XHRcdFx0XHRjb25zdCB2aWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcclxuXHRcdFx0XHRcdGlmICh2aWV3Py5lZGl0b3IpIHtcclxuXHRcdFx0XHRcdFx0dmlldy5lZGl0b3IucmVwbGFjZVNlbGVjdGlvbihmdWxsVGV4dCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gaW5zZXJ0IGltYWdlOicsIGVycm9yKTtcclxuXHRcdFx0bmV3IE5vdGljZShgRmFpbGVkIHRvIGluc2VydCBpbWFnZTogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcil9YCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGdldEFjdGl2ZUZpbGUoKTogVEZpbGUgfCBudWxsIHtcclxuXHRcdGNvbnN0IHZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xyXG5cdFx0cmV0dXJuIHZpZXc/LmZpbGUgPz8gbnVsbDtcclxuXHR9XHJcblxyXG5cdG9uQ2xvc2UoKTogdm9pZCB7XHJcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xyXG5cdH1cclxufVxyXG5cclxuLyoqXHJcbiAqIE9wZW4gdGhlIHJlbW90ZSBzZWFyY2ggbW9kYWxcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBvcGVuUmVtb3RlU2VhcmNoKFxyXG5cdGFwcDogQXBwLFxyXG5cdHNldHRpbmdzOiBJbWFnZU1hbmFnZXJTZXR0aW5ncyxcclxuXHRyZW1vdGVTZXJ2aWNlOiBSZW1vdGVJbWFnZVNlcnZpY2UsXHJcblx0aW1hZ2VQcm9jZXNzb3I6IEltYWdlUHJvY2Vzc29yLFxyXG5cdHByb3BlcnR5SGFuZGxlcjogUHJvcGVydHlIYW5kbGVyLFxyXG5cdG9wdGlvbnM6IFJlbW90ZVNlYXJjaE9wdGlvbnMgPSB7fVxyXG4pOiB2b2lkIHtcclxuXHRuZXcgUmVtb3RlU2VhcmNoTW9kYWwoYXBwLCBzZXR0aW5ncywgcmVtb3RlU2VydmljZSwgaW1hZ2VQcm9jZXNzb3IsIHByb3BlcnR5SGFuZGxlciwgb3B0aW9ucykub3BlbigpO1xyXG59XHJcbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBaUZPLFNBQVMsaUJBQ2YsS0FDQSxPQUNBLFNBQ0EsY0FBc0IsV0FDdEIsYUFBcUIsVUFDSTtBQUN6QixRQUFNLFFBQVEsSUFBSSxhQUFhLEtBQUssT0FBTyxTQUFTLGFBQWEsVUFBVTtBQUMzRSxTQUFPLE1BQU0sbUJBQW1CO0FBQ2pDO0FBMUZBLElBS0FBLG1CQU1hO0FBWGI7QUFBQTtBQUtBLElBQUFBLG9CQUEyQjtBQU1wQixJQUFNLGVBQU4sY0FBMkIsd0JBQU07QUFBQSxNQU92QyxZQUNDLEtBQ0EsT0FDQSxTQUNBLGNBQXNCLFdBQ3RCLGFBQXFCLFVBQ3BCO0FBQ0QsY0FBTSxHQUFHO0FBQ1QsYUFBSyxRQUFRO0FBQ2IsYUFBSyxVQUFVO0FBQ2YsYUFBSyxjQUFjO0FBQ25CLGFBQUssYUFBYTtBQUFBLE1BQ25CO0FBQUEsTUFFQSxTQUFlO0FBQ2QsY0FBTSxFQUFFLFdBQVcsUUFBUSxJQUFJO0FBQy9CLGdCQUFRLFFBQVEsS0FBSyxLQUFLO0FBRzFCLGNBQU0sWUFBWSxVQUFVLFVBQVUsRUFBRSxLQUFLLGdDQUFnQyxDQUFDO0FBQzlFLGtCQUFVLFNBQVMsS0FBSyxFQUFFLE1BQU0sS0FBSyxRQUFRLENBQUM7QUFHOUMsY0FBTSxrQkFBa0IsVUFBVSxVQUFVLEVBQUUsS0FBSyxnQ0FBZ0MsQ0FBQztBQUVwRix3QkFBZ0IsU0FBUyxVQUFVO0FBQUEsVUFDbEMsTUFBTSxLQUFLO0FBQUEsVUFDWCxLQUFLO0FBQUEsUUFDTixDQUFDLEVBQUUsaUJBQWlCLFNBQVMsTUFBTTtBQUNsQyxlQUFLLFFBQVEsRUFBRSxXQUFXLEtBQUssQ0FBQztBQUNoQyxlQUFLLE1BQU07QUFBQSxRQUNaLENBQUM7QUFFRCx3QkFBZ0IsU0FBUyxVQUFVO0FBQUEsVUFDbEMsTUFBTSxLQUFLO0FBQUEsUUFDWixDQUFDLEVBQUUsaUJBQWlCLFNBQVMsTUFBTTtBQUNsQyxlQUFLLFFBQVEsRUFBRSxXQUFXLE1BQU0sQ0FBQztBQUNqQyxlQUFLLE1BQU07QUFBQSxRQUNaLENBQUM7QUFHRCxtQkFBVyxNQUFNO0FBQ2hCLGdCQUFNLGdCQUFnQixnQkFBZ0IsY0FBYyxVQUFVO0FBQzlELHlEQUFlO0FBQUEsUUFDaEIsR0FBRyxFQUFFO0FBQUEsTUFDTjtBQUFBLE1BRUEsVUFBZ0I7QUFDZixjQUFNLEVBQUUsVUFBVSxJQUFJO0FBQ3RCLGtCQUFVLE1BQU07QUFBQSxNQUNqQjtBQUFBLE1BRU8scUJBQTZDO0FBQ25ELGVBQU8sSUFBSSxRQUFRLENBQUMsWUFBWTtBQUMvQixlQUFLLFVBQVU7QUFDZixlQUFLLEtBQUs7QUFBQSxRQUNYLENBQUM7QUFBQSxNQUNGO0FBQUEsSUFDRDtBQUFBO0FBQUE7OztBQzVFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBS0EsSUFBQUMsb0JBQThGOzs7QUNBOUYsSUFBQUMsbUJBQWtGOzs7QUNBbEYsc0JBQTJDO0FBQzNDLHFCQUFnQztBQXFCekIsU0FBUyxvQkFDZixhQUNBLFNBQ0EsWUFDb0I7QUFHcEIsVUFBSSxtQ0FBa0IsUUFBUSxHQUFHO0FBS2hDLFVBQU0sb0JBS0Q7QUFFTCxRQUFJLG1CQUFtQjtBQUN0QixZQUFNLFFBQVEsVUFDWCxJQUFJLGtCQUFrQixXQUFXLEVBQUUsV0FBVyxPQUFPLElBQ3JELElBQUksa0JBQWtCLFdBQVc7QUFDcEMsYUFBTztBQUFBLFFBQ04sV0FBVyxJQUFnQztBQUMxQyxnQkFBTSxXQUFXLEVBQUU7QUFBQSxRQUNwQjtBQUFBLE1BQ0Q7QUFBQSxJQUNEO0FBQUEsRUFDRDtBQUlBLE1BQUksWUFBWTtBQUNmLGdCQUFZLFNBQVMsR0FBRyxVQUFVLGtCQUFrQjtBQUFBLEVBQ3JEO0FBRUE7QUFJQyxRQUFJLFNBQVM7QUFDWixZQUFNLFlBQVksWUFBWSxVQUFVLHVCQUF1QjtBQUMvRCxnQkFBVSxTQUFTLE1BQU0sRUFBRSxNQUFNLFFBQVEsQ0FBQztBQUFBLElBQzNDO0FBRUEsV0FBTztBQUFBLE1BQ04sV0FBVyxJQUFnQztBQUMxQyxjQUFNLFVBQVUsSUFBSSx3QkFBUSxXQUFXO0FBQ3ZDLFdBQUcsT0FBTztBQUFBLE1BQ1g7QUFBQSxJQUNEO0FBQUEsRUFDRDtBQUNEOzs7QUMrRU8sSUFBTSxpQ0FBMkU7QUFBQSxFQUN2RixDQUFDLHVCQUFrQixHQUFHO0FBQUEsSUFDckIsU0FBUztBQUFBLElBQ1QsUUFBUTtBQUFBLElBQ1IsWUFBWTtBQUFBLElBQ1osWUFBWTtBQUFBLElBQ1oscUJBQXFCO0FBQUEsSUFDckIsY0FBYyxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUM7QUFBQSxJQUN6QixTQUFTO0FBQUEsSUFDVCxNQUFNO0FBQUEsSUFDTixXQUFXO0FBQUEsSUFDWCxhQUFhO0FBQUEsSUFDYixVQUFVO0FBQUEsSUFDVixZQUFZO0FBQUEsSUFDWixnQkFBZ0I7QUFBQSxJQUNoQixZQUFZO0FBQUEsSUFDWixXQUFXO0FBQUEsSUFDWCxnQkFBZ0I7QUFBQSxJQUNoQixnQkFBZ0I7QUFBQSxJQUNoQixhQUFhO0FBQUEsSUFDYixhQUFhO0FBQUEsRUFDZDtBQUFBLEVBQ0EsQ0FBQyxxQkFBaUIsR0FBRztBQUFBLElBQ3BCLFNBQVM7QUFBQSxJQUNULFFBQVE7QUFBQSxJQUNSLFlBQVk7QUFBQSxJQUNaLFlBQVk7QUFBQSxJQUNaLHFCQUFxQjtBQUFBLElBQ3JCLGNBQWMsQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDO0FBQUEsSUFDekIsU0FBUztBQUFBLElBQ1QsTUFBTTtBQUFBLElBQ04sV0FBVztBQUFBLElBQ1gsYUFBYTtBQUFBLElBQ2IsVUFBVTtBQUFBLElBQ1YsWUFBWTtBQUFBLElBQ1osZ0JBQWdCO0FBQUEsSUFDaEIsWUFBWTtBQUFBLElBQ1osV0FBVztBQUFBLElBQ1gsZ0JBQWdCO0FBQUEsSUFDaEIsZ0JBQWdCO0FBQUEsSUFDaEIsYUFBYTtBQUFBLElBQ2IsYUFBYTtBQUFBLEVBQ2Q7QUFBQSxFQUNBLENBQUMsbUJBQWdCLEdBQUc7QUFBQSxJQUNuQixTQUFTO0FBQUEsSUFDVCxRQUFRO0FBQUEsSUFDUixZQUFZO0FBQUEsSUFDWixZQUFZO0FBQUEsSUFDWixxQkFBcUI7QUFBQSxJQUNyQixjQUFjLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQztBQUFBLElBQ3pCLFNBQVM7QUFBQSxJQUNULE1BQU07QUFBQSxJQUNOLFdBQVc7QUFBQSxJQUNYLGFBQWE7QUFBQSxJQUNiLFVBQVU7QUFBQSxJQUNWLFlBQVk7QUFBQSxJQUNaLGdCQUFnQjtBQUFBLElBQ2hCLFlBQVk7QUFBQSxJQUNaLFdBQVc7QUFBQSxJQUNYLGdCQUFnQjtBQUFBLElBQ2hCLGdCQUFnQjtBQUFBLElBQ2hCLGFBQWE7QUFBQSxJQUNiLGFBQWE7QUFBQSxFQUNkO0FBQ0Q7QUFLTyxJQUFNLDBCQUEwQztBQUFBLEVBQ3RELFlBQVk7QUFBQSxJQUNYLGVBQWU7QUFBQSxJQUNmLGNBQWM7QUFBQSxJQUNkLHFCQUFxQjtBQUFBLElBQ3JCLGNBQWM7QUFBQSxFQUNmO0FBQUEsRUFDQSxTQUFTLEVBQUUsR0FBRywrQkFBK0IsdUJBQWtCLEVBQUU7QUFBQSxFQUNqRSxRQUFRLEVBQUUsR0FBRywrQkFBK0IscUJBQWlCLEVBQUU7QUFBQSxFQUMvRCxPQUFPLEVBQUUsR0FBRywrQkFBK0IsbUJBQWdCLEVBQUU7QUFDOUQ7QUFnRU8sSUFBTSxtQkFBeUM7QUFBQTtBQUFBLEVBRXJELHFCQUFxQjtBQUFBLEVBQ3JCLG9CQUFvQjtBQUFBLEVBQ3BCLG1CQUFtQjtBQUFBLEVBQ25CLG9CQUFvQjtBQUFBLEVBQ3BCLHNCQUFzQjtBQUFBO0FBQUEsRUFHdEIsaUJBQWlCO0FBQUEsRUFDakIscUJBQXFCO0FBQUEsRUFDckIsY0FBYztBQUFBLEVBQ2Qsc0JBQXNCO0FBQUEsRUFDdEIsZUFBZTtBQUFBLEVBQ2YsdUJBQXVCO0FBQUEsRUFDdkIsb0JBQW9CO0FBQUEsRUFDcEIsa0JBQWtCO0FBQUE7QUFBQSxFQUdsQixxQkFBcUI7QUFBQSxFQUNyQixvQkFBb0I7QUFBQSxFQUNwQiwwQkFBMEI7QUFBQSxFQUMxQixxQkFBcUI7QUFBQSxFQUNyQix5QkFBeUI7QUFBQSxFQUN6QixpQkFBaUI7QUFBQTtBQUFBLEVBR2pCLHlCQUF5QjtBQUFBLEVBQ3pCLG1CQUFtQjtBQUFBLEVBQ25CLG1CQUFtQjtBQUFBLEVBQ25CLDBCQUEwQjtBQUFBO0FBQUEsRUFHMUIsa0JBQWtCO0FBQUEsRUFDbEIsWUFBWTtBQUFBLEVBQ1osb0JBQW9CO0FBQUEsRUFDcEIsa0JBQWtCO0FBQUEsRUFDbEIscUJBQXFCO0FBQUEsRUFDckIseUJBQXlCO0FBQUE7QUFBQSxFQUd6QixZQUFZO0FBQUE7QUFBQSxFQUNaLGdCQUFnQjtBQUFBO0FBQUEsRUFDaEIsZ0JBQWdCO0FBQUE7QUFBQSxFQUNoQixnQkFBZ0I7QUFBQTtBQUFBO0FBQUEsRUFHaEIsUUFBUSxFQUFFLEdBQUcsd0JBQXdCO0FBQUE7QUFBQSxFQUdyQyxxQkFBcUIsQ0FBQyxNQUFNLEtBQUs7QUFBQSxFQUNqQyxXQUFXO0FBQ1o7OztBRmhVTyxJQUFNLHlCQUFOLGNBQXFDLGtDQUFpQjtBQUFBLEVBSTVELFlBQVksS0FBVSxRQUE0QjtBQUNqRCxVQUFNLEtBQUssTUFBTTtBQUhsQixTQUFPLE9BQU87QUFJYixTQUFLLFNBQVM7QUFBQSxFQUNmO0FBQUEsRUFFQSxVQUFnQjtBQUNmLFVBQU0sRUFBRSxZQUFZLElBQUk7QUFDeEIsZ0JBQVksTUFBTTtBQUdsQixTQUFLLHNCQUFzQixXQUFXO0FBR3RDLFNBQUssNEJBQTRCLFdBQVc7QUFHNUMsU0FBSyx1QkFBdUIsV0FBVztBQUd2QyxTQUFLLHlCQUF5QixXQUFXO0FBR3pDLFNBQUsscUJBQXFCLFdBQVc7QUFHckMsU0FBSyxxQkFBcUIsV0FBVztBQUdyQyxTQUFLLHVCQUF1QixXQUFXO0FBQUEsRUFDeEM7QUFBQSxFQUVRLHNCQUFzQixhQUFnQztBQUU3RCxVQUFNLFFBQVEsb0JBQW9CLGFBQWEsUUFBVyxlQUFlO0FBRXpFLFVBQU0sV0FBVyxDQUFDLFlBQVk7QUFDN0IsY0FDRSxRQUFRLHFCQUFxQixFQUM3QixRQUFRLGtIQUFrSCxFQUMxSCxRQUFRLENBQUMsU0FBUztBQUNsQixhQUNFLGVBQWUsY0FBYyxFQUM3QixTQUFTLEtBQUssT0FBTyxTQUFTLGlCQUFpQixFQUMvQyxTQUFTLE9BQU8sVUFBVTtBQUMxQixlQUFLLE9BQU8sU0FBUyxvQkFBb0I7QUFDekMsZ0JBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxRQUNoQyxDQUFDO0FBQUEsTUFDSCxDQUFDO0FBQUEsSUFDSCxDQUFDO0FBRUQsVUFBTSxXQUFXLENBQUMsWUFBWTtBQUM3QixjQUNFLFFBQVEscUJBQXFCLEVBQzdCLFFBQVEsK0JBQStCLEVBQ3ZDLFlBQVksQ0FBQyxhQUFhO0FBQzFCLGlCQUNFLDRDQUE4Qyx5QkFBeUIsRUFDdkUsbUNBQXlDLHFCQUFxQixFQUM5RCx1Q0FBd0MsNkJBQTZCLEVBQ3JFLHFDQUEwQyxnQ0FBZ0MsRUFDMUUsU0FBUyxLQUFLLE9BQU8sU0FBUyxrQkFBa0IsRUFDaEQsU0FBUyxPQUFPLFVBQVU7QUFDMUIsZUFBSyxPQUFPLFNBQVMscUJBQXFCO0FBQzFDLGdCQUFNLEtBQUssT0FBTyxhQUFhO0FBRy9CLGdCQUFNLGtCQUFrQixZQUFZLFFBQVEsdUJBQXVCLEtBQ2xFLFlBQVksUUFBUSxtQkFBbUIsS0FDdkMsWUFBWTtBQUNiLGdCQUFNLGFBQVksbURBQWlCLGNBQWE7QUFFaEQsZUFBSyxRQUFRO0FBR2IsZ0NBQXNCLE1BQU07QUFDM0IsZ0JBQUksaUJBQWlCO0FBQ3BCLDhCQUFnQixZQUFZO0FBQUEsWUFDN0I7QUFBQSxVQUNELENBQUM7QUFBQSxRQUNGLENBQUM7QUFBQSxNQUNILENBQUM7QUFBQSxJQUNILENBQUM7QUFHRCxRQUFJLEtBQUssT0FBTyxTQUFTLDJEQUN4QixLQUFLLE9BQU8sU0FBUyxnREFBc0Q7QUFDM0UsWUFBTSxXQUFXLENBQUMsWUFBWTtBQUM3QixnQkFDRSxRQUFRLHdCQUF3QixFQUNoQyxRQUFRLDZFQUE2RSxFQUNyRixRQUFRLENBQUMsU0FBUztBQUNsQixlQUNFLGVBQWUsVUFBVSxFQUN6QixTQUFTLEtBQUssT0FBTyxTQUFTLG9CQUFvQixFQUNsRCxTQUFTLE9BQU8sVUFBVTtBQUMxQixpQkFBSyxPQUFPLFNBQVMsdUJBQXVCO0FBQzVDLGtCQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsVUFDaEMsQ0FBQztBQUFBLFFBQ0gsQ0FBQztBQUFBLE1BQ0gsQ0FBQztBQUFBLElBQ0Y7QUFBQSxFQUNEO0FBQUEsRUFFUSw0QkFBNEIsYUFBZ0M7QUFDbkUsVUFBTSxRQUFRLG9CQUFvQixhQUFhLGtCQUFrQixlQUFlO0FBRWhGLFVBQU0sV0FBVyxDQUFDLFlBQVk7QUFDN0IsY0FDRSxRQUFRLGtCQUFrQixFQUMxQixRQUFRLG1DQUFtQyxFQUMzQyxZQUFZLENBQUMsYUFBYTtBQUMxQixpQkFDRSxxQ0FBa0MsVUFBVSxFQUM1QyxpQ0FBZ0MsUUFBUSxFQUN4QyxtQ0FBaUMsU0FBUyxFQUMxQywrQkFBK0IsYUFBYSxFQUM1QyxTQUFTLEtBQUssT0FBTyxTQUFTLGVBQWUsRUFDN0MsU0FBUyxPQUFPLFVBQVU7QUFDMUIsZUFBSyxPQUFPLFNBQVMsa0JBQWtCO0FBQ3ZDLGdCQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsUUFDaEMsQ0FBQztBQUFBLE1BQ0gsQ0FBQztBQUFBLElBQ0gsQ0FBQztBQUVELFVBQU0sV0FBVyxDQUFDLFlBQVk7QUFDN0IsY0FDRSxRQUFRLHFCQUFxQixFQUM3QixRQUFRLDhCQUE4QixFQUN0QyxZQUFZLENBQUMsYUFBYTtBQUMxQixpQkFDRSwyQkFBZ0MsS0FBSyxFQUNyQyx1Q0FBc0MsV0FBVyxFQUNqRCxxQ0FBcUMsVUFBVSxFQUMvQyxpQ0FBbUMsUUFBUSxFQUMzQyxTQUFTLEtBQUssT0FBTyxTQUFTLGtCQUFrQixFQUNoRCxTQUFTLE9BQU8sVUFBVTtBQUMxQixlQUFLLE9BQU8sU0FBUyxxQkFBcUI7QUFDMUMsZ0JBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxRQUNoQyxDQUFDO0FBQUEsTUFDSCxDQUFDO0FBQUEsSUFDSCxDQUFDO0FBRUQsVUFBTSxXQUFXLENBQUMsWUFBWTtBQUM3QixjQUNFLFFBQVEsb0JBQW9CLEVBQzVCLFFBQVEsd0NBQXdDLEVBQ2hELFlBQVksQ0FBQyxhQUFhO0FBQzFCLGlCQUNFLHFDQUE4QixVQUFVLEVBQ3hDLCtCQUEyQixPQUFPLEVBQ2xDLGlDQUE0QixRQUFRLEVBQ3BDLCtCQUEyQixPQUFPLEVBQ2xDLFNBQVMsS0FBSyxPQUFPLFNBQVMsZ0JBQWdCLEVBQzlDLFNBQVMsT0FBTyxVQUFVO0FBQzFCLGVBQUssT0FBTyxTQUFTLG1CQUFtQjtBQUN4QyxnQkFBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLFFBQ2hDLENBQUM7QUFBQSxNQUNILENBQUM7QUFBQSxJQUNILENBQUM7QUFFRCxVQUFNLFdBQVcsQ0FBQyxZQUFZO0FBQzdCLGNBQ0UsUUFBUSx1QkFBdUIsRUFDL0IsUUFBUSxxREFBcUQsRUFDN0QsUUFBUSxDQUFDLFNBQVM7QUFDbEIsYUFDRSxlQUFlLHlCQUF5QixFQUN4QyxTQUFTLEtBQUssT0FBTyxTQUFTLG1CQUFtQixFQUNqRCxTQUFTLE9BQU8sVUFBVTtBQUMxQixlQUFLLE9BQU8sU0FBUyxzQkFBc0I7QUFDM0MsZ0JBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxRQUNoQyxDQUFDO0FBQUEsTUFDSCxDQUFDO0FBQUEsSUFDSCxDQUFDO0FBRUQsVUFBTSxXQUFXLENBQUMsWUFBWTtBQUM3QixjQUFRLFFBQVEsZ0JBQWdCO0FBRWhDLGNBQUksb0NBQWtCLFFBQVEsR0FBRztBQUVoQyxnQkFDRSxRQUFRLG9EQUFvRCxFQUM1RCxhQUFhLENBQUMsT0FBTztBQUdyQixnQkFBTSxXQUFXLFFBQVEsVUFBVTtBQUNuQyxnQkFBTSxrQkFBa0IsU0FBUztBQUNqQyxnQkFBTSxZQUFZLElBQUksZ0JBQWdCLEtBQUssS0FBSyxFQUFFO0FBQ2xELG9CQUFVLFNBQVMsS0FBSyxPQUFPLFNBQVMsb0JBQW9CO0FBQzVELG9CQUFVLFNBQVMsQ0FBQyxVQUFrQjtBQUNyQyxrQkFBTSxZQUFZO0FBQ2pCLG1CQUFLLE9BQU8sU0FBUyx1QkFBdUI7QUFDNUMsb0JBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxZQUNoQyxHQUFHO0FBQUEsVUFDSixDQUFDO0FBQ0QsaUJBQU87QUFBQSxRQUNSLENBQUM7QUFBQSxNQUNILE9BQU87QUFFTixnQkFDRSxRQUFRLHVEQUF1RCxFQUMvRCxRQUFRLENBQUMsU0FBUztBQUNsQixlQUNFLGVBQWUsZ0JBQWdCLEVBQy9CLFNBQVMsS0FBSyxPQUFPLFNBQVMsWUFBWSxFQUMxQyxTQUFTLE9BQU8sVUFBVTtBQUMxQixpQkFBSyxPQUFPLFNBQVMsZUFBZTtBQUNwQyxrQkFBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLFVBQ2hDLENBQUM7QUFBQSxRQUNILENBQUM7QUFBQSxNQUNIO0FBQUEsSUFDRCxDQUFDO0FBRUQsVUFBTSxXQUFXLENBQUMsWUFBWTtBQUM3QixjQUFRLFFBQVEsaUJBQWlCO0FBRWpDLGNBQUksb0NBQWtCLFFBQVEsR0FBRztBQUVoQyxnQkFDRSxRQUFRLHFEQUFxRCxFQUM3RCxhQUFhLENBQUMsT0FBTztBQUdyQixnQkFBTSxXQUFXLFFBQVEsVUFBVTtBQUNuQyxnQkFBTSxrQkFBa0IsU0FBUztBQUNqQyxnQkFBTSxZQUFZLElBQUksZ0JBQWdCLEtBQUssS0FBSyxFQUFFO0FBQ2xELG9CQUFVLFNBQVMsS0FBSyxPQUFPLFNBQVMscUJBQXFCO0FBQzdELG9CQUFVLFNBQVMsQ0FBQyxVQUFrQjtBQUNyQyxrQkFBTSxZQUFZO0FBQ2pCLG1CQUFLLE9BQU8sU0FBUyx3QkFBd0I7QUFDN0Msb0JBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxZQUNoQyxHQUFHO0FBQUEsVUFDSixDQUFDO0FBQ0QsaUJBQU87QUFBQSxRQUNSLENBQUM7QUFBQSxNQUNILE9BQU87QUFFTixnQkFDRSxRQUFRLHFEQUFxRCxFQUM3RCxRQUFRLENBQUMsU0FBUztBQUNsQixlQUNFLGVBQWUsaUJBQWlCLEVBQ2hDLFNBQVMsS0FBSyxPQUFPLFNBQVMsYUFBYSxFQUMzQyxTQUFTLE9BQU8sVUFBVTtBQUMxQixpQkFBSyxPQUFPLFNBQVMsZ0JBQWdCO0FBQ3JDLGtCQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsVUFDaEMsQ0FBQztBQUFBLFFBQ0gsQ0FBQztBQUFBLE1BQ0g7QUFBQSxJQUNELENBQUM7QUFFRCxVQUFNLFdBQVcsQ0FBQyxZQUFZO0FBQzdCLGNBQ0UsUUFBUSxhQUFhLEVBQ3JCLFFBQVEsNElBQTRJLEVBQ3BKLFFBQVEsQ0FBQyxTQUFTO0FBQ2xCLGFBQ0UsZUFBZSxnQkFBZ0IsRUFDL0IsU0FBUyxLQUFLLE9BQU8sU0FBUyxVQUFVLEVBQ3hDLFNBQVMsT0FBTyxVQUFVO0FBQzFCLGVBQUssT0FBTyxTQUFTLGFBQWE7QUFDbEMsZ0JBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxRQUNoQyxDQUFDO0FBQUEsTUFDSCxDQUFDO0FBQUEsSUFDSCxDQUFDO0FBRUQsVUFBTSxXQUFXLENBQUMsWUFBWTtBQUM3QixjQUNFLFFBQVEsaUJBQWlCLEVBQ3pCLFFBQVEsMkJBQTJCLEVBQ25DLFVBQVUsQ0FBQyxXQUFXO0FBQ3RCLGVBQ0UsU0FBUyxLQUFLLE9BQU8sU0FBUyxjQUFjLEVBQzVDLFNBQVMsT0FBTyxVQUFVO0FBQzFCLGVBQUssT0FBTyxTQUFTLGlCQUFpQjtBQUN0QyxnQkFBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLFFBQ2hDLENBQUM7QUFBQSxNQUNILENBQUM7QUFBQSxJQUNILENBQUM7QUFFRCxVQUFNLFdBQVcsQ0FBQyxZQUFZO0FBQzdCLGNBQ0UsUUFBUSxpQkFBaUIsRUFDekIsUUFBUSxrREFBa0QsRUFDMUQsVUFBVSxDQUFDLFdBQVc7QUFDdEIsZUFDRSxTQUFTLEtBQUssT0FBTyxTQUFTLGNBQWMsRUFDNUMsU0FBUyxPQUFPLFVBQVU7QUFDMUIsZUFBSyxPQUFPLFNBQVMsaUJBQWlCO0FBQ3RDLGdCQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsUUFDaEMsQ0FBQztBQUFBLE1BQ0gsQ0FBQztBQUFBLElBQ0gsQ0FBQztBQUFBLEVBQ0Y7QUFBQSxFQUVRLHVCQUF1QixhQUFnQztBQUM5RCxVQUFNLFFBQVEsb0JBQW9CLGFBQWEsc0JBQXNCLGVBQWU7QUFFcEYsVUFBTSxXQUFXLENBQUMsWUFBWTtBQUM3QixjQUNFLFFBQVEsOEJBQThCLEVBQ3RDLFFBQVEsK0NBQStDLEVBQ3ZELFVBQVUsQ0FBQyxXQUFXO0FBQ3RCLGVBQ0UsU0FBUyxLQUFLLE9BQU8sU0FBUyxtQkFBbUIsRUFDakQsU0FBUyxPQUFPLFVBQVU7QUFDMUIsZUFBSyxPQUFPLFNBQVMsc0JBQXNCO0FBQzNDLGdCQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsUUFDaEMsQ0FBQztBQUFBLE1BQ0gsQ0FBQztBQUFBLElBQ0gsQ0FBQztBQUVELFVBQU0sV0FBVyxDQUFDLFlBQVk7QUFDN0IsY0FDRSxRQUFRLHNCQUFzQixFQUM5QixRQUFRLDRDQUE0QyxFQUNwRCxZQUFZLENBQUMsYUFBYTtBQUMxQixpQkFDRSw0Q0FBOEMseUJBQXlCLEVBQ3ZFLDZCQUFtQyxnQ0FBZ0MsRUFDbkUseUNBQTJDLDZCQUE2QixFQUN4RSxxQ0FBdUMsa0NBQWtDLEVBQ3pFLHFDQUF1QyxtQ0FBbUMsRUFDMUUsaUNBQXFDLGVBQWUsRUFDcEQsU0FBUyxLQUFLLE9BQU8sU0FBUyxrQkFBa0IsRUFDaEQsU0FBUyxPQUFPLFVBQVU7QUFDMUIsZUFBSyxPQUFPLFNBQVMscUJBQXFCO0FBQzFDLGdCQUFNLEtBQUssT0FBTyxhQUFhO0FBRy9CLGdCQUFNLGtCQUFrQixZQUFZLFFBQVEsdUJBQXVCLEtBQ2xFLFlBQVksUUFBUSxtQkFBbUIsS0FDdkMsWUFBWTtBQUNiLGdCQUFNLGFBQVksbURBQWlCLGNBQWE7QUFFaEQsZUFBSyxRQUFRO0FBR2IsZ0NBQXNCLE1BQU07QUFDM0IsZ0JBQUksaUJBQWlCO0FBQ3BCLDhCQUFnQixZQUFZO0FBQUEsWUFDN0I7QUFBQSxVQUNELENBQUM7QUFBQSxRQUNGLENBQUM7QUFBQSxNQUNILENBQUM7QUFBQSxJQUNILENBQUM7QUFHRCxRQUFJLEtBQUssT0FBTyxTQUFTLDhDQUFrRDtBQUMxRSxZQUFNLFdBQVcsQ0FBQyxZQUFZO0FBQzdCLGdCQUNFLFFBQVEsd0JBQXdCLEVBQ2hDLFFBQVEsbURBQW1ELEVBQzNELFFBQVEsQ0FBQyxTQUFTO0FBQ2xCLGVBQ0UsZUFBZSxhQUFhLEVBQzVCLFNBQVMsS0FBSyxPQUFPLFNBQVMsd0JBQXdCLEVBQ3RELFNBQVMsT0FBTyxVQUFVO0FBQzFCLGlCQUFLLE9BQU8sU0FBUywyQkFBMkI7QUFDaEQsa0JBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxVQUNoQyxDQUFDO0FBQUEsUUFDSCxDQUFDO0FBQUEsTUFDSCxDQUFDO0FBQUEsSUFDRjtBQUVBLFVBQU0sV0FBVyxDQUFDLFlBQVk7QUFDN0IsY0FDRSxRQUFRLHVCQUF1QixFQUMvQixRQUFRLGdFQUFnRSxFQUN4RSxRQUFRLENBQUMsU0FBUztBQUNsQixhQUNFLGVBQWUsUUFBUSxFQUN2QixTQUFTLEtBQUssT0FBTyxTQUFTLG1CQUFtQixFQUNqRCxTQUFTLE9BQU8sVUFBVTtBQUMxQixlQUFLLE9BQU8sU0FBUyxzQkFBc0I7QUFDM0MsZ0JBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxRQUNoQyxDQUFDO0FBQUEsTUFDSCxDQUFDO0FBQUEsSUFDSCxDQUFDO0FBRUQsVUFBTSxXQUFXLENBQUMsWUFBWTtBQUM3QixjQUNFLFFBQVEsNEJBQTRCLEVBQ3BDLFFBQVEsbUVBQW1FLEVBQzNFLFFBQVEsQ0FBQyxTQUFTO0FBQ2xCLGFBQ0UsZUFBZSxNQUFNLEVBQ3JCLFNBQVMsS0FBSyxPQUFPLFNBQVMsdUJBQXVCLEVBQ3JELFNBQVMsT0FBTyxVQUFVO0FBQzFCLGVBQUssT0FBTyxTQUFTLDBCQUEwQjtBQUMvQyxnQkFBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLFFBQ2hDLENBQUM7QUFBQSxNQUNILENBQUM7QUFBQSxJQUNILENBQUM7QUFFRCxVQUFNLFdBQVcsQ0FBQyxZQUFZO0FBQzdCLGNBQ0UsUUFBUSx3QkFBd0IsRUFDaEMsUUFBUSx3UEFBd1AsRUFDaFEsUUFBUSxDQUFDLFNBQVM7QUFDbEIsYUFDRSxlQUFlLEtBQUssRUFDcEIsU0FBUyxLQUFLLE9BQU8sU0FBUyxlQUFlLEVBQzdDLFNBQVMsT0FBTyxVQUFVO0FBQzFCLGVBQUssT0FBTyxTQUFTLGtCQUFrQjtBQUN2QyxnQkFBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLFFBQ2hDLENBQUM7QUFBQSxNQUNILENBQUM7QUFBQSxJQUNILENBQUM7QUFBQSxFQUNGO0FBQUEsRUFFUSx5QkFBeUIsYUFBZ0M7QUFDaEUsVUFBTSxRQUFRLG9CQUFvQixhQUFhLDJCQUEyQixlQUFlO0FBRXpGLFVBQU0sV0FBVyxDQUFDLFlBQVk7QUFDN0IsY0FDRSxRQUFRLDRCQUE0QixFQUNwQyxRQUFRLHVFQUF1RSxFQUMvRSxVQUFVLENBQUMsV0FBVztBQUN0QixlQUNFLFNBQVMsS0FBSyxPQUFPLFNBQVMsdUJBQXVCLEVBQ3JELFNBQVMsT0FBTyxVQUFVO0FBQzFCLGVBQUssT0FBTyxTQUFTLDBCQUEwQjtBQUMvQyxnQkFBTSxLQUFLLE9BQU8sYUFBYTtBQUcvQixnQkFBTSxrQkFBa0IsWUFBWSxRQUFRLHVCQUF1QixLQUNsRSxZQUFZLFFBQVEsbUJBQW1CLEtBQ3ZDLFlBQVk7QUFDYixnQkFBTSxhQUFZLG1EQUFpQixjQUFhO0FBRWhELGVBQUssUUFBUTtBQUdiLGdDQUFzQixNQUFNO0FBQzNCLGdCQUFJLGlCQUFpQjtBQUNwQiw4QkFBZ0IsWUFBWTtBQUFBLFlBQzdCO0FBQUEsVUFDRCxDQUFDO0FBQUEsUUFDRixDQUFDO0FBQUEsTUFDSCxDQUFDO0FBQUEsSUFDSCxDQUFDO0FBRUQsUUFBSSxLQUFLLE9BQU8sU0FBUyx5QkFBeUI7QUFDakQsWUFBTSxXQUFXLENBQUMsWUFBWTtBQUM3QixnQkFDRSxRQUFRLHNCQUFzQixFQUM5QixRQUFRLDJDQUEyQyxFQUNuRCxVQUFVLENBQUMsV0FBVztBQUN0QixpQkFDRSxTQUFTLEtBQUssT0FBTyxTQUFTLGlCQUFpQixFQUMvQyxTQUFTLE9BQU8sVUFBVTtBQUMxQixpQkFBSyxPQUFPLFNBQVMsb0JBQW9CO0FBQ3pDLGtCQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsVUFDaEMsQ0FBQztBQUFBLFFBQ0gsQ0FBQztBQUFBLE1BQ0gsQ0FBQztBQUVELFlBQU0sV0FBVyxDQUFDLFlBQVk7QUFDN0IsZ0JBQ0UsUUFBUSxzQkFBc0IsRUFDOUIsUUFBUSwwQ0FBMEMsRUFDbEQsVUFBVSxDQUFDLFdBQVc7QUFDdEIsaUJBQ0UsU0FBUyxLQUFLLE9BQU8sU0FBUyxpQkFBaUIsRUFDL0MsU0FBUyxPQUFPLFVBQVU7QUFDMUIsaUJBQUssT0FBTyxTQUFTLG9CQUFvQjtBQUN6QyxrQkFBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLFVBQ2hDLENBQUM7QUFBQSxRQUNILENBQUM7QUFBQSxNQUNILENBQUM7QUFBQSxJQUNGO0FBQUEsRUFDRDtBQUFBLEVBRVEscUJBQXFCLGFBQWdDO0FBQzVELFVBQU0sUUFBUSxvQkFBb0IsYUFBYSxrQkFBa0IsZUFBZTtBQUVoRixVQUFNLFdBQVcsQ0FBQyxZQUFZO0FBQzdCLGNBQ0UsUUFBUSx3Q0FBd0MsRUFDaEQsUUFBUSxzRkFBc0YsRUFDOUYsVUFBVSxDQUFDLFdBQVc7QUFDdEIsZUFDRSxTQUFTLEtBQUssT0FBTyxTQUFTLGdCQUFnQixFQUM5QyxTQUFTLE9BQU8sVUFBVTtBQUMxQixlQUFLLE9BQU8sU0FBUyxtQkFBbUI7QUFDeEMsZ0JBQU0sS0FBSyxPQUFPLGFBQWE7QUFDL0IsZUFBSywwQkFBMEIsV0FBVztBQUFBLFFBQzNDLENBQUM7QUFBQSxNQUNILENBQUM7QUFBQSxJQUNILENBQUM7QUFFRCxRQUFJLEtBQUssT0FBTyxTQUFTLGtCQUFrQjtBQUMxQyxZQUFNLFdBQVcsQ0FBQyxZQUFZO0FBQzdCLGdCQUNFLFFBQVEsaUJBQWlCLEVBQ3pCLFFBQVEsdURBQXVELEVBQy9ELFVBQVUsQ0FBQyxXQUFXO0FBQ3RCLGlCQUNFLFNBQVMsS0FBSyxPQUFPLFNBQVMsbUJBQW1CLEVBQ2pELFNBQVMsT0FBTyxVQUFVO0FBQzFCLGlCQUFLLE9BQU8sU0FBUyxzQkFBc0I7QUFDM0Msa0JBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxVQUNoQyxDQUFDO0FBQUEsUUFDSCxDQUFDO0FBQUEsTUFDSCxDQUFDO0FBRUQsWUFBTSxXQUFXLENBQUMsWUFBWTtBQUM3QixnQkFDRSxRQUFRLHlCQUF5QixFQUNqQyxRQUFRLHdEQUF3RCxFQUNoRSxVQUFVLENBQUMsV0FBVztBQUN0QixpQkFDRSxTQUFTLEtBQUssT0FBTyxTQUFTLGtCQUFrQixFQUNoRCxTQUFTLE9BQU8sVUFBVTtBQUMxQixpQkFBSyxPQUFPLFNBQVMscUJBQXFCO0FBQzFDLGtCQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsVUFDaEMsQ0FBQztBQUFBLFFBQ0gsQ0FBQztBQUFBLE1BQ0gsQ0FBQztBQUFBLElBQ0Y7QUFFQSxVQUFNLFdBQVcsQ0FBQyxZQUFZO0FBQzdCLGNBQ0UsUUFBUSxpQ0FBaUMsRUFDekMsUUFBUSxzUEFBdVAsRUFDL1AsVUFBVSxDQUFDLFdBQVc7QUFDdEIsZUFDRSxTQUFTLEtBQUssT0FBTyxTQUFTLHdCQUF3QixFQUN0RCxTQUFTLE9BQU8sVUFBVTtBQUMxQixlQUFLLE9BQU8sU0FBUywyQkFBMkI7QUFDaEQsZ0JBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxRQUNoQyxDQUFDO0FBQUEsTUFDSCxDQUFDO0FBQUEsSUFDSCxDQUFDO0FBRUQsVUFBTSxXQUFXLENBQUMsWUFBWTtBQUM3QixjQUNFLFFBQVEsb0JBQW9CLEVBQzVCLFFBQVEsbUlBQW1JLEVBQzNJLFVBQVUsQ0FBQyxXQUFXO0FBQ3RCLGVBQ0UsU0FBUyxLQUFLLE9BQU8sU0FBUyx1QkFBdUIsRUFDckQsU0FBUyxPQUFPLFVBQVU7QUFDMUIsZUFBSyxPQUFPLFNBQVMsMEJBQTBCO0FBQy9DLGdCQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsUUFDaEMsQ0FBQztBQUFBLE1BQ0gsQ0FBQztBQUFBLElBQ0gsQ0FBQztBQUVELFVBQU0sV0FBVyxDQUFDLFlBQVk7QUFDN0IsY0FDRSxRQUFRLGFBQWEsRUFDckIsUUFBUSw2REFBNkQsRUFDckUsVUFBVSxDQUFDLFdBQVc7QUFDdEIsZUFDRSxTQUFTLEtBQUssT0FBTyxTQUFTLFVBQVUsRUFDeEMsU0FBUyxPQUFPLFVBQVU7QUFDMUIsZUFBSyxPQUFPLFNBQVMsYUFBYTtBQUNsQyxnQkFBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLFFBQ2hDLENBQUM7QUFBQSxNQUNILENBQUM7QUFBQSxJQUNILENBQUM7QUFFRCxVQUFNLFdBQVcsQ0FBQyxZQUFZO0FBQzdCLGNBQ0UsUUFBUSw0QkFBNEIsRUFDcEMsUUFBUSxpRkFBaUYsRUFDekYsUUFBUSxDQUFDLFNBQVM7QUFDbEIsYUFDRSxlQUFlLEdBQUcsRUFDbEIsU0FBUyxLQUFLLE9BQU8sU0FBUyxrQkFBa0IsRUFDaEQsU0FBUyxPQUFPLFVBQVU7QUFDMUIsZUFBSyxPQUFPLFNBQVMscUJBQXFCO0FBQzFDLGdCQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsUUFDaEMsQ0FBQztBQUFBLE1BQ0gsQ0FBQztBQUFBLElBQ0gsQ0FBQztBQUVELFVBQU0sV0FBVyxDQUFDLFlBQVk7QUFDN0IsY0FDRSxRQUFRLDJCQUEyQixFQUNuQyxRQUFRLDhFQUE4RSxFQUN0RixVQUFVLENBQUMsV0FBVztBQUN0QixlQUNFLFNBQVMsS0FBSyxPQUFPLFNBQVMsZ0JBQWdCLEVBQzlDLFNBQVMsT0FBTyxVQUFVO0FBQzFCLGVBQUssT0FBTyxTQUFTLG1CQUFtQjtBQUN4QyxnQkFBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLFFBQ2hDLENBQUM7QUFBQSxNQUNILENBQUM7QUFBQSxJQUNILENBQUM7QUFFRCxVQUFNLFdBQVcsQ0FBQyxZQUFZO0FBQzdCLGNBQ0UsUUFBUSx1QkFBdUIsRUFDL0IsUUFBUSw4Q0FBOEMsRUFDdEQsVUFBVSxDQUFDLFdBQVc7QUFDdEIsZUFDRSxTQUFTLEtBQUssT0FBTyxTQUFTLG1CQUFtQixFQUNqRCxTQUFTLE9BQU8sVUFBVTtBQUMxQixlQUFLLE9BQU8sU0FBUyxzQkFBc0I7QUFDM0MsZ0JBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxRQUNoQyxDQUFDO0FBQUEsTUFDSCxDQUFDO0FBQUEsSUFDSCxDQUFDO0FBQUEsRUFDRjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS1EsbUJBQStCO0FBQ3RDLFFBQUksMEJBQVMsU0FBUztBQUNyQjtBQUFBLElBQ0Q7QUFDQSxRQUFJLDBCQUFTLFVBQVU7QUFDdEI7QUFBQSxJQUNEO0FBQ0E7QUFBQSxFQUNEO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLUSwwQkFBMEIsYUFBZ0M7QUFDakUsVUFBTSxrQkFBa0IsWUFBWSxRQUFRLHVCQUF1QixLQUNsRSxZQUFZLFFBQVEsbUJBQW1CLEtBQ3ZDLFlBQVk7QUFDYixVQUFNLGFBQVksbURBQWlCLGNBQWE7QUFFaEQsU0FBSyxRQUFRO0FBRWIsMEJBQXNCLE1BQU07QUFDM0IsVUFBSSxpQkFBaUI7QUFDcEIsd0JBQWdCLFlBQVk7QUFBQSxNQUM3QjtBQUFBLElBQ0QsQ0FBQztBQUFBLEVBQ0Y7QUFBQSxFQUVRLHFCQUFxQixhQUFnQztBQUM1RCxVQUFNLFFBQVEsb0JBQW9CLGFBQWEsaUJBQWlCLGVBQWU7QUFDL0UsVUFBTSxnQkFBZ0IsS0FBSyxpQkFBaUI7QUFDNUMsVUFBTSxpQkFBaUIsS0FBSyxPQUFPLFNBQVMsT0FBTyxhQUFhO0FBQ2hFLFVBQU0sd0JBQXdCLCtCQUErQixhQUFhO0FBQzFFLFVBQU0sbUJBQW1CLEtBQUssT0FBTyxTQUFTLE9BQU87QUFHckQsVUFBTSxXQUFXLENBQUMsWUFBWTtBQUM3QixjQUNFLFFBQVEsYUFBYSxFQUNyQixRQUFRLHFDQUFxQyxhQUFhLFNBQVMsRUFDbkUsVUFBVSxDQUFDLFdBQVc7QUFDdEIsZUFDRSxTQUFTLGVBQWUsT0FBTyxFQUMvQixTQUFTLE9BQU8sVUFBVTtBQUMxQixlQUFLLE9BQU8sU0FBUyxPQUFPLGFBQWEsRUFBRSxVQUFVO0FBQ3JELGdCQUFNLEtBQUssT0FBTyxhQUFhO0FBQy9CLGVBQUssMEJBQTBCLFdBQVc7QUFBQSxRQUMzQyxDQUFDO0FBQUEsTUFDSCxDQUFDO0FBQUEsSUFDSCxDQUFDO0FBR0QsUUFBSSxDQUFDLGVBQWUsU0FBUztBQUM1QjtBQUFBLElBQ0Q7QUFHQSxVQUFNLFdBQVcsQ0FBQyxZQUFZO0FBQzdCLGNBQ0UsUUFBUSxRQUFRLEVBQ2hCLFFBQVEsZ0NBQWdDLGFBQWEscUJBQXFCLEVBQzFFLFFBQVEsQ0FBQyxTQUFTO0FBQ2xCLGFBQ0UsZUFBZSxPQUFPLHNCQUFzQixNQUFNLENBQUMsRUFDbkQsU0FBUyxPQUFPLGVBQWUsTUFBTSxDQUFDLEVBQ3RDLFNBQVMsT0FBTyxVQUFVO0FBQzFCLGdCQUFNLE1BQU0sU0FBUyxPQUFPLEVBQUU7QUFDOUIsY0FBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLE1BQU0sR0FBRztBQUMzQixpQkFBSyxPQUFPLFNBQVMsT0FBTyxhQUFhLEVBQUUsU0FBUztBQUNwRCxrQkFBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLFVBQ2hDO0FBQUEsUUFDRCxDQUFDO0FBQUEsTUFDSCxDQUFDO0FBQUEsSUFDSCxDQUFDO0FBR0QsVUFBTSxXQUFXLENBQUMsWUFBWTtBQUM3QixjQUNFLFFBQVEsU0FBUyxFQUNqQixRQUFRLDhEQUE4RCxFQUN0RSxRQUFRLENBQUMsU0FBUztBQUNsQixhQUNFLGVBQWUsT0FBTyxzQkFBc0IsT0FBTyxDQUFDLEVBQ3BELFNBQVMsT0FBTyxlQUFlLE9BQU8sQ0FBQyxFQUN2QyxTQUFTLE9BQU8sVUFBVTtBQUMxQixnQkFBTSxNQUFNLFNBQVMsT0FBTyxFQUFFO0FBQzlCLGNBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxPQUFPLEdBQUc7QUFDNUIsaUJBQUssT0FBTyxTQUFTLE9BQU8sYUFBYSxFQUFFLFVBQVU7QUFDckQsa0JBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxVQUNoQztBQUFBLFFBQ0QsQ0FBQztBQUFBLE1BQ0gsQ0FBQztBQUFBLElBQ0gsQ0FBQztBQUdELFVBQU0sV0FBVyxDQUFDLFlBQVk7QUFDN0IsY0FDRSxRQUFRLGFBQWEsRUFDckIsUUFBUSxtREFBbUQsRUFDM0QsUUFBUSxDQUFDLFNBQVM7QUFDbEIsYUFDRSxlQUFlLE9BQU8sc0JBQXNCLFVBQVUsQ0FBQyxFQUN2RCxTQUFTLE9BQU8sZUFBZSxVQUFVLENBQUMsRUFDMUMsU0FBUyxPQUFPLFVBQVU7QUFDMUIsZ0JBQU0sTUFBTSxTQUFTLE9BQU8sRUFBRTtBQUM5QixjQUFJLENBQUMsTUFBTSxHQUFHLEdBQUc7QUFDaEIsaUJBQUssT0FBTyxTQUFTLE9BQU8sYUFBYSxFQUFFLGFBQWE7QUFDeEQsa0JBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxVQUNoQztBQUFBLFFBQ0QsQ0FBQztBQUFBLE1BQ0gsQ0FBQztBQUFBLElBQ0gsQ0FBQztBQUdELFVBQU0sV0FBVyxDQUFDLFlBQVk7QUFDN0IsY0FDRSxRQUFRLGFBQWEsRUFDckIsUUFBUSxtREFBbUQsRUFDM0QsUUFBUSxDQUFDLFNBQVM7QUFDbEIsYUFDRSxlQUFlLE9BQU8sc0JBQXNCLFVBQVUsQ0FBQyxFQUN2RCxTQUFTLE9BQU8sZUFBZSxVQUFVLENBQUMsRUFDMUMsU0FBUyxPQUFPLFVBQVU7QUFDMUIsZ0JBQU0sTUFBTSxTQUFTLE9BQU8sRUFBRTtBQUM5QixjQUFJLENBQUMsTUFBTSxHQUFHLEdBQUc7QUFDaEIsaUJBQUssT0FBTyxTQUFTLE9BQU8sYUFBYSxFQUFFLGFBQWE7QUFDeEQsa0JBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxVQUNoQztBQUFBLFFBQ0QsQ0FBQztBQUFBLE1BQ0gsQ0FBQztBQUFBLElBQ0gsQ0FBQztBQUdELFVBQU0sV0FBVyxDQUFDLFlBQVk7QUFDN0IsY0FDRSxRQUFRLE1BQU0sRUFDZCxRQUFRLHdDQUF3QyxFQUNoRCxVQUFVLENBQUMsV0FBVztBQUN0QixlQUNFLFNBQVMsZUFBZSxJQUFJLEVBQzVCLFNBQVMsT0FBTyxVQUFVO0FBQzFCLGVBQUssT0FBTyxTQUFTLE9BQU8sYUFBYSxFQUFFLE9BQU87QUFDbEQsZ0JBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxRQUNoQyxDQUFDO0FBQUEsTUFDSCxDQUFDO0FBQUEsSUFDSCxDQUFDO0FBR0QsVUFBTSxXQUFXLENBQUMsWUFBWTtBQUM3QixjQUNFLFFBQVEsaUJBQWlCLEVBQ3pCLFFBQVEsdUNBQXVDLEVBQy9DLFVBQVUsQ0FBQyxXQUFXO0FBQ3RCLGVBQ0UsU0FBUyxlQUFlLG1CQUFtQixFQUMzQyxTQUFTLE9BQU8sVUFBVTtBQUMxQixlQUFLLE9BQU8sU0FBUyxPQUFPLGFBQWEsRUFBRSxzQkFBc0I7QUFDakUsZ0JBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxRQUNoQyxDQUFDO0FBQUEsTUFDSCxDQUFDO0FBQUEsSUFDSCxDQUFDO0FBR0QsVUFBTSxXQUFXLENBQUMsWUFBWTtBQUM3QixjQUNFLFFBQVEsV0FBVyxFQUNuQixRQUFRLDRDQUE0QyxFQUNwRCxVQUFVLENBQUMsV0FBVztBQUN0QixlQUNFLFNBQVMsZUFBZSxTQUFTLEVBQ2pDLFNBQVMsT0FBTyxVQUFVO0FBQzFCLGVBQUssT0FBTyxTQUFTLE9BQU8sYUFBYSxFQUFFLFlBQVk7QUFDdkQsZ0JBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxRQUNoQyxDQUFDO0FBQUEsTUFDSCxDQUFDO0FBQUEsSUFDSCxDQUFDO0FBR0QsVUFBTSxXQUFXLENBQUMsWUFBWTtBQUM3QixjQUNFLFFBQVEsaUJBQWlCLEVBQ3pCLFFBQVEseUVBQXlFLEVBQ2pGLFFBQVEsQ0FBQyxTQUFTO0FBQ2xCLGFBQ0UsZUFBZSxRQUFRLEVBQ3ZCLFNBQVMsaUJBQWlCLGFBQWEsRUFDdkMsU0FBUyxPQUFPLFVBQVU7QUFDMUIsZUFBSyxPQUFPLFNBQVMsT0FBTyxXQUFXLGdCQUFnQixTQUFTO0FBQ2hFLGdCQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsUUFDaEMsQ0FBQztBQUFBLE1BQ0gsQ0FBQztBQUFBLElBQ0gsQ0FBQztBQUVELFVBQU0sV0FBVyxDQUFDLFlBQVk7QUFDN0IsY0FDRSxRQUFRLGVBQWUsRUFDdkIsUUFBUSx1RUFBdUUsRUFDL0UsUUFBUSxDQUFDLFNBQVM7QUFDbEIsYUFDRSxlQUFlLE1BQU0sRUFDckIsU0FBUyxpQkFBaUIsWUFBWSxFQUN0QyxTQUFTLE9BQU8sVUFBVTtBQUMxQixlQUFLLE9BQU8sU0FBUyxPQUFPLFdBQVcsZUFBZSxTQUFTO0FBQy9ELGdCQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsUUFDaEMsQ0FBQztBQUFBLE1BQ0gsQ0FBQztBQUFBLElBQ0gsQ0FBQztBQUVELFVBQU0sV0FBVyxDQUFDLFlBQVk7QUFDN0IsY0FDRSxRQUFRLCtCQUErQixFQUN2QyxRQUFRLHNFQUFzRSxFQUM5RSxVQUFVLENBQUMsV0FBVztBQUN0QixlQUNFLFNBQVMsaUJBQWlCLG1CQUFtQixFQUM3QyxTQUFTLE9BQU8sVUFBVTtBQUMxQixlQUFLLE9BQU8sU0FBUyxPQUFPLFdBQVcsc0JBQXNCO0FBQzdELGdCQUFNLEtBQUssT0FBTyxhQUFhO0FBQy9CLGVBQUssMEJBQTBCLFdBQVc7QUFBQSxRQUMzQyxDQUFDO0FBQUEsTUFDSCxDQUFDO0FBQUEsSUFDSCxDQUFDO0FBR0QsUUFBSSxpQkFBaUIscUJBQXFCO0FBQ3pDLFlBQU0sV0FBVyxDQUFDLFlBQVk7QUFDN0IsZ0JBQ0UsUUFBUSxzQkFBc0IsRUFDOUIsUUFBUSxpRkFBaUYsRUFDekYsUUFBUSxDQUFDLFNBQVM7QUFDbEIsZUFDRSxlQUFlLFlBQVksRUFDM0IsU0FBUyxpQkFBaUIsWUFBWSxFQUN0QyxTQUFTLE9BQU8sVUFBVTtBQUMxQixpQkFBSyxPQUFPLFNBQVMsT0FBTyxXQUFXLGVBQWUsU0FBUztBQUMvRCxrQkFBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLFVBQ2hDLENBQUM7QUFBQSxRQUNILENBQUM7QUFBQSxNQUNILENBQUM7QUFBQSxJQUNGO0FBR0EsVUFBTSxXQUFXLENBQUMsWUFBWTtBQUM3QixjQUNFLFFBQVEsV0FBVyxFQUNuQixRQUFRLDRCQUE0QixFQUNwQyxVQUFVLENBQUMsV0FBVztBQUN0QixlQUNFLFNBQVMsZUFBZSxXQUFXLEVBQ25DLFNBQVMsT0FBTyxVQUFVO0FBQzFCLGVBQUssT0FBTyxTQUFTLE9BQU8sYUFBYSxFQUFFLGNBQWM7QUFDekQsZ0JBQU0sS0FBSyxPQUFPLGFBQWE7QUFDL0IsZUFBSywwQkFBMEIsV0FBVztBQUFBLFFBQzNDLENBQUM7QUFBQSxNQUNILENBQUM7QUFBQSxJQUNILENBQUM7QUFHRCxRQUFJLGVBQWUsYUFBYTtBQUMvQixZQUFNLFdBQVcsQ0FBQyxZQUFZO0FBQzdCLGdCQUNFLFFBQVEsV0FBVyxFQUNuQixRQUFRLDhCQUE4QixFQUN0QyxRQUFRLENBQUMsU0FBUztBQUNsQixlQUNFLGVBQWUsT0FBTyxzQkFBc0IsUUFBUSxDQUFDLEVBQ3JELFNBQVMsT0FBTyxlQUFlLFFBQVEsQ0FBQyxFQUN4QyxTQUFTLE9BQU8sVUFBVTtBQUMxQixrQkFBTSxNQUFNLFNBQVMsT0FBTyxFQUFFO0FBQzlCLGdCQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssTUFBTSxHQUFHO0FBQzNCLG1CQUFLLE9BQU8sU0FBUyxPQUFPLGFBQWEsRUFBRSxXQUFXO0FBQ3RELG9CQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsWUFDaEM7QUFBQSxVQUNELENBQUM7QUFBQSxRQUNILENBQUM7QUFBQSxNQUNILENBQUM7QUFFRCxZQUFNLFdBQVcsQ0FBQyxZQUFZO0FBQzdCLGdCQUNFLFFBQVEsaUJBQWlCLEVBQ3pCLFFBQVEsdUNBQXVDLEVBQy9DLFVBQVUsQ0FBQyxXQUFXO0FBQ3RCLGlCQUNFLFNBQVMsZUFBZSxjQUFjLEVBQ3RDLFNBQVMsT0FBTyxVQUFVO0FBQzFCLGlCQUFLLE9BQU8sU0FBUyxPQUFPLGFBQWEsRUFBRSxpQkFBaUI7QUFDNUQsa0JBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxVQUNoQyxDQUFDO0FBQUEsUUFDSCxDQUFDO0FBQUEsTUFDSCxDQUFDO0FBRUQsWUFBTSxXQUFXLENBQUMsWUFBWTtBQUM3QixnQkFDRSxRQUFRLFlBQVksRUFDcEIsUUFBUSw2RkFBNkYsRUFDckcsVUFBVSxDQUFDLFdBQVc7QUFDdEIsaUJBQ0UsU0FBUyxlQUFlLFNBQVMsRUFDakMsU0FBUyxPQUFPLFVBQVU7QUFDMUIsaUJBQUssT0FBTyxTQUFTLE9BQU8sYUFBYSxFQUFFLFlBQVk7QUFDdkQsa0JBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxVQUNoQyxDQUFDO0FBQUEsUUFDSCxDQUFDO0FBQUEsTUFDSCxDQUFDO0FBRUQsWUFBTSxXQUFXLENBQUMsWUFBWTtBQUM3QixnQkFDRSxRQUFRLGtCQUFrQixFQUMxQixRQUFRLHFDQUFxQyxFQUM3QyxRQUFRLENBQUMsU0FBUztBQUNsQixlQUNFLGVBQWUsT0FBTyxzQkFBc0IsVUFBVSxDQUFDLEVBQ3ZELFNBQVMsT0FBTyxlQUFlLFVBQVUsQ0FBQyxFQUMxQyxTQUFTLE9BQU8sVUFBVTtBQUMxQixrQkFBTSxNQUFNLFNBQVMsT0FBTyxFQUFFO0FBQzlCLGdCQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssT0FBTyxHQUFHO0FBQzVCLG1CQUFLLE9BQU8sU0FBUyxPQUFPLGFBQWEsRUFBRSxhQUFhO0FBQ3hELG9CQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsWUFDaEM7QUFBQSxVQUNELENBQUM7QUFBQSxRQUNILENBQUM7QUFBQSxNQUNILENBQUM7QUFFRCxZQUFNLFdBQVcsQ0FBQyxZQUFZO0FBQzdCLGdCQUNFLFFBQVEsb0JBQW9CLEVBQzVCLFFBQVEsNENBQTRDLEVBQ3BELFFBQVEsQ0FBQyxTQUFTO0FBQ2xCLGVBQ0UsZUFBZSxPQUFPLHNCQUFzQixVQUFVLENBQUMsRUFDdkQsU0FBUyxPQUFPLGVBQWUsVUFBVSxDQUFDLEVBQzFDLFNBQVMsT0FBTyxVQUFVO0FBQzFCLGtCQUFNLE1BQU0sU0FBUyxPQUFPLEVBQUU7QUFDOUIsZ0JBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxPQUFPLEdBQUc7QUFDNUIsbUJBQUssT0FBTyxTQUFTLE9BQU8sYUFBYSxFQUFFLGFBQWE7QUFDeEQsb0JBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxZQUNoQztBQUFBLFVBQ0QsQ0FBQztBQUFBLFFBQ0gsQ0FBQztBQUFBLE1BQ0gsQ0FBQztBQUVELFlBQU0sV0FBVyxDQUFDLFlBQVk7QUFDN0IsZ0JBQ0UsUUFBUSw2QkFBNkIsRUFDckMsUUFBUSxrQ0FBa0MsRUFDMUMsWUFBWSxDQUFDLGFBQWE7QUFDMUIsbUJBQ0UsVUFBVSxjQUFjLE1BQU0sRUFDOUIsVUFBVSxVQUFVLFFBQVEsRUFDNUIsVUFBVSxZQUFZLE9BQU8sRUFDN0IsU0FBUyxlQUFlLGNBQWMsRUFDdEMsU0FBUyxPQUFPLFVBQVU7QUFDMUIsaUJBQUssT0FBTyxTQUFTLE9BQU8sYUFBYSxFQUFFLGlCQUFpQjtBQUM1RCxrQkFBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLFVBQ2hDLENBQUM7QUFBQSxRQUNILENBQUM7QUFBQSxNQUNILENBQUM7QUFFRCxZQUFNLFdBQVcsQ0FBQyxZQUFZO0FBQzdCLGdCQUNFLFFBQVEsMkJBQTJCLEVBQ25DLFFBQVEsZ0NBQWdDLEVBQ3hDLFlBQVksQ0FBQyxhQUFhO0FBQzFCLG1CQUNFLFVBQVUsY0FBYyxLQUFLLEVBQzdCLFVBQVUsVUFBVSxRQUFRLEVBQzVCLFVBQVUsWUFBWSxRQUFRLEVBQzlCLFNBQVMsZUFBZSxjQUFjLEVBQ3RDLFNBQVMsT0FBTyxVQUFVO0FBQzFCLGlCQUFLLE9BQU8sU0FBUyxPQUFPLGFBQWEsRUFBRSxpQkFBaUI7QUFDNUQsa0JBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxVQUNoQyxDQUFDO0FBQUEsUUFDSCxDQUFDO0FBQUEsTUFDSCxDQUFDO0FBQUEsSUFDRjtBQUFBLEVBQ0Q7QUFBQSxFQUVRLHVCQUF1QixhQUFnQztBQUM5RCxVQUFNLFFBQVEsb0JBQW9CLGFBQWEsWUFBWSxlQUFlO0FBRTFFLFVBQU0sV0FBVyxDQUFDLFlBQVk7QUFDN0IsY0FDRSxRQUFRLDJCQUEyQixFQUNuQyxRQUFRLDhDQUE4QyxFQUN0RCxRQUFRLENBQUMsU0FBUztBQUNsQixjQUFNLGVBQWUsS0FBSyxPQUFPLFNBQVMsb0JBQW9CLFNBQVMsSUFDcEUsS0FBSyxPQUFPLFNBQVMsb0JBQW9CLEtBQUssSUFBSSxJQUNsRDtBQUNILGFBQ0UsZUFBZSxpQkFBaUIsRUFDaEMsU0FBUyxZQUFZLEVBQ3JCLFNBQVMsT0FBTyxVQUFVO0FBQzFCLGdCQUFNLGFBQWEsTUFDakIsTUFBTSxHQUFHLEVBQ1QsSUFBSSxDQUFDLFFBQVEsSUFBSSxLQUFLLEVBQUUsWUFBWSxDQUFDLEVBQ3JDLE9BQU8sQ0FBQyxRQUFRLElBQUksU0FBUyxDQUFDO0FBRWhDLGVBQUssT0FBTyxTQUFTLHNCQUFzQixXQUFXLFNBQVMsSUFBSSxhQUFhLENBQUMsSUFBSTtBQUNyRixnQkFBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLFFBQ2hDLENBQUM7QUFBQSxNQUNILENBQUM7QUFBQSxJQUNILENBQUM7QUFFRCxVQUFNLFdBQVcsQ0FBQyxZQUFZO0FBQzdCLGNBQ0UsUUFBUSxZQUFZLEVBQ3BCLFFBQVEsaUNBQWlDLEVBQ3pDLFVBQVUsQ0FBQyxXQUFXO0FBQ3RCLGVBQ0UsU0FBUyxLQUFLLE9BQU8sU0FBUyxTQUFTLEVBQ3ZDLFNBQVMsT0FBTyxVQUFVO0FBQzFCLGVBQUssT0FBTyxTQUFTLFlBQVk7QUFDakMsZ0JBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxRQUNoQyxDQUFDO0FBQUEsTUFDSCxDQUFDO0FBQUEsSUFDSCxDQUFDO0FBQUEsRUFDRjtBQUNEOzs7QUdyaUNBLElBQUFDLG1CQUFtRDtBQUc1QyxJQUFNLGlCQUFOLE1BQXFCO0FBQUEsRUFJM0IsWUFBWSxLQUFVLFVBQWdDLFlBQWdGO0FBQ3JJLFNBQUssTUFBTTtBQUNYLFNBQUssV0FBVztBQUdoQiw2Q0FBWSxVQUFVLENBQUMsZ0JBQWdCO0FBQ3RDLFdBQUssZUFBZSxXQUFXO0FBQUEsSUFDaEM7QUFBQSxFQUNEO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxlQUFlLFVBQXNDO0FBQ3BELFNBQUssV0FBVztBQUFBLEVBQ2pCO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxvQkFBb0IsVUFBeUI7QUFoQzlDO0FBaUNFLFVBQU0sWUFBVyxvQkFBUyxXQUFULG1CQUFpQixTQUFqQixZQUF5QjtBQUUxQyxZQUFRLEtBQUssU0FBUyxvQkFBb0I7QUFBQSxNQUN6QztBQUNDLGVBQU87QUFBQSxNQUVSO0FBQ0MsbUJBQU8sZ0NBQWMsS0FBSyxVQUFVLFVBQVUsS0FBSyxTQUFTLG9CQUFvQixDQUFDO0FBQUEsTUFFbEY7QUFDQyxtQkFBTyxnQ0FBYyxLQUFLLFNBQVMsb0JBQW9CO0FBQUEsTUFFeEQ7QUFBQSxNQUNBO0FBQ0MsZUFBTyxLQUFLLDRCQUE0QixRQUFRO0FBQUEsSUFDbEQ7QUFBQSxFQUNEO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLUSw0QkFBNEIsVUFBeUI7QUF0RDlEO0FBd0RFLFVBQU0sY0FBZSxLQUFLLElBQUksTUFBb0U7QUFDbEcsVUFBTSx3QkFBK0IsZ0RBQWEseUJBQWIsWUFBcUM7QUFDMUUsVUFBTSxZQUFXLG9CQUFTLFdBQVQsbUJBQWlCLFNBQWpCLFlBQXlCO0FBRTFDLFFBQUkseUJBQXlCLEtBQUs7QUFFakMsYUFBTztBQUFBLElBQ1IsV0FBVyx5QkFBeUIsTUFBTTtBQUV6QyxhQUFPO0FBQUEsSUFDUixXQUFXLHFCQUFxQixXQUFXLElBQUksR0FBRztBQUVqRCxZQUFNLGVBQWUscUJBQXFCLE1BQU0sQ0FBQztBQUNqRCxpQkFBTyxnQ0FBYyxLQUFLLFVBQVUsVUFBVSxZQUFZLENBQUM7QUFBQSxJQUM1RCxPQUFPO0FBRU4saUJBQU8sZ0NBQWMsb0JBQW9CO0FBQUEsSUFDMUM7QUFBQSxFQUNEO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLUSxhQUFhLE9BQXlCO0FBQzdDLFdBQU8sTUFBTSxPQUFPLE9BQUssQ0FBQyxFQUFFLEtBQUssR0FBRztBQUFBLEVBQ3JDO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxNQUFNLG1CQUFtQixZQUFtQztBQUMzRCxRQUFJLENBQUMsV0FBWTtBQUVqQixVQUFNLHFCQUFpQixnQ0FBYyxVQUFVO0FBQy9DLFVBQU0sU0FBUyxLQUFLLElBQUksTUFBTSxzQkFBc0IsY0FBYztBQUVsRSxRQUFJLENBQUMsUUFBUTtBQUNaLFlBQU0sS0FBSyxJQUFJLE1BQU0sYUFBYSxjQUFjO0FBQUEsSUFDakQsV0FBVyxFQUFFLGtCQUFrQiwyQkFBVTtBQUN4QyxZQUFNLElBQUksTUFBTSxvQ0FBb0MsY0FBYyxFQUFFO0FBQUEsSUFDckU7QUFBQSxFQUNEO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxNQUFNLGlCQUFpQixVQUFrQixXQUFtQixVQUFrQztBQUM3RixVQUFNLFNBQVMsS0FBSyxvQkFBb0IsUUFBUTtBQUNoRCxVQUFNLEtBQUssbUJBQW1CLE1BQU07QUFFcEMsVUFBTSxnQkFBZ0IsS0FBSyxpQkFBaUIsUUFBUTtBQUNwRCxRQUFJLFdBQVcsR0FBRyxhQUFhLElBQUksU0FBUztBQUM1QyxRQUFJLFdBQVcsYUFBUyxnQ0FBYyxLQUFLLFVBQVUsUUFBUSxRQUFRLENBQUMsUUFBSSxnQ0FBYyxRQUFRO0FBR2hHLFFBQUksVUFBVTtBQUNkLFdBQU8sS0FBSyxJQUFJLE1BQU0sc0JBQXNCLFFBQVEsR0FBRztBQUN0RCxVQUFJLEtBQUssU0FBUyxrQkFBa0I7QUFDbkMsbUJBQVcsR0FBRyxPQUFPLEdBQUcsS0FBSyxTQUFTLGtCQUFrQixHQUFHLGFBQWEsSUFBSSxTQUFTO0FBQUEsTUFDdEYsT0FBTztBQUNOLG1CQUFXLEdBQUcsYUFBYSxHQUFHLEtBQUssU0FBUyxrQkFBa0IsR0FBRyxPQUFPLElBQUksU0FBUztBQUFBLE1BQ3RGO0FBQ0EsaUJBQVcsYUFBUyxnQ0FBYyxLQUFLLFVBQVUsUUFBUSxRQUFRLENBQUMsUUFBSSxnQ0FBYyxRQUFRO0FBQzVGO0FBQUEsSUFDRDtBQUVBLFdBQU87QUFBQSxFQUNSO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxNQUFNLFNBQVMsTUFBbUIsVUFBa0M7QUFDbkUsVUFBTSxxQkFBaUIsZ0NBQWMsUUFBUTtBQUc3QyxVQUFNLFlBQVksZUFBZSxZQUFZLEdBQUc7QUFDaEQsVUFBTSxhQUFhLFlBQVksSUFBSSxlQUFlLE1BQU0sR0FBRyxTQUFTLElBQUk7QUFDeEUsUUFBSSxZQUFZO0FBQ2YsWUFBTSxLQUFLLG1CQUFtQixVQUFVO0FBQUEsSUFDekM7QUFFQSxXQUFPLE1BQU0sS0FBSyxJQUFJLE1BQU0sYUFBYSxnQkFBZ0IsSUFBSTtBQUFBLEVBQzlEO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFRQSxxQkFBcUIsTUFBYSxZQUFvQixhQUFzQixZQUE2QjtBQUN4RyxVQUFNLE9BQU8sS0FBSyxJQUFJLFlBQVkscUJBQXFCLE1BQU0sVUFBVTtBQUV2RSxRQUFJLFlBQVk7QUFDaEIsUUFBSSxLQUFLLFlBQVksSUFBSSxLQUFLLENBQUMsS0FBSyxXQUFXLEdBQUcsR0FBRztBQUVwRCxrQkFBWSxJQUFJLElBQUk7QUFBQSxJQUNyQjtBQUdBLFFBQUksS0FBSyxTQUFTLFdBQVc7QUFDNUIsY0FBUSxNQUFNLHdDQUF3QztBQUFBLFFBQ3JELGNBQWM7QUFBQSxRQUNkO0FBQUEsUUFDQTtBQUFBLFFBQ0E7QUFBQSxRQUNBLFNBQVMsQ0FBQyxFQUFFLGNBQWMsV0FBVyxLQUFLO0FBQUEsTUFDM0MsQ0FBQztBQUFBLElBQ0Y7QUFLQSxRQUFJLFVBQVUsV0FBVyxJQUFJLEtBQUssVUFBVSxTQUFTLElBQUksR0FBRztBQUUzRCxVQUFJLGNBQWMsV0FBVyxLQUFLLEdBQUc7QUFFcEMsY0FBTSxXQUFXLElBQUksVUFBVTtBQUMvQixZQUFJLGVBQWUsWUFBWSxLQUFLLEdBQUc7QUFFdEMsc0JBQVksVUFBVSxRQUFRLGtCQUFrQixLQUFLLFdBQVcsR0FBRyxRQUFRLEdBQUc7QUFBQSxRQUMvRSxPQUFPO0FBR04sZ0JBQU0sV0FBVyxVQUFVLE1BQU0sZ0JBQWdCO0FBQ2pELGNBQUksVUFBVTtBQUNiLGtCQUFNLE1BQU0sU0FBUyxDQUFDLEtBQUs7QUFDM0Isd0JBQVksVUFBVSxRQUFRLGtCQUFrQixLQUFLLEdBQUcsR0FBRyxRQUFRLEdBQUc7QUFBQSxVQUN2RTtBQUFBLFFBQ0Q7QUFBQSxNQUNELFdBQVcsZUFBZSxZQUFZLEtBQUssR0FBRztBQUU3QyxvQkFBWSxVQUFVLFFBQVEsa0JBQWtCLEtBQUssV0FBVyxHQUFHO0FBQUEsTUFDcEU7QUFBQSxJQUNELFdBQVcsVUFBVSxXQUFXLElBQUksS0FBSyxVQUFVLFNBQVMsSUFBSSxHQUFHO0FBRWxFLFlBQU0sUUFBa0IsQ0FBQztBQUN6QixVQUFJLGNBQWMsV0FBVyxLQUFLLEdBQUc7QUFDcEMsY0FBTSxLQUFLLFVBQVU7QUFBQSxNQUN0QjtBQUNBLFVBQUksZUFBZSxZQUFZLEtBQUssR0FBRztBQUN0QyxjQUFNLEtBQUssV0FBVztBQUFBLE1BQ3ZCO0FBQ0EsVUFBSSxNQUFNLFNBQVMsR0FBRztBQUVyQixvQkFBWSxVQUFVLFFBQVEsU0FBUyxJQUFJLE1BQU0sS0FBSyxHQUFHLENBQUMsSUFBSTtBQUFBLE1BQy9EO0FBQUEsSUFDRDtBQUdBLFFBQUksS0FBSyxTQUFTLFdBQVc7QUFDNUIsY0FBUSxNQUFNLCtDQUErQztBQUFBLFFBQzVELFdBQVc7QUFBQSxNQUNaLENBQUM7QUFBQSxJQUNGO0FBRUEsV0FBTztBQUFBLEVBQ1I7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLGdCQUFnQixNQUFhLElBQW1CO0FBM05qRDtBQTRORSxVQUFNLFdBQVUsZ0JBQUssV0FBTCxtQkFBYSxTQUFiLFlBQXFCO0FBQ3JDLFVBQU0sU0FBUyxHQUFHO0FBRWxCLFFBQUksQ0FBQyxTQUFTO0FBQ2IsYUFBTztBQUFBLElBQ1I7QUFJQSxVQUFNLFNBQVEsY0FBRyxXQUFILG1CQUFXLFNBQVgsWUFBbUI7QUFDakMsUUFBSSxZQUFZLE9BQU87QUFDdEIsYUFBTyxHQUFHO0FBQUEsSUFDWDtBQUdBLFdBQU87QUFBQSxFQUNSO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxpQkFBaUIsTUFBc0I7QUFFdEMsV0FBTyxLQUNMLFFBQVEsaUJBQWlCLEdBQUcsRUFDNUIsUUFBUSxRQUFRLEdBQUcsRUFDbkIsUUFBUSxRQUFRLEVBQUUsRUFDbEIsUUFBUSxRQUFRLEVBQUUsRUFDbEIsS0FBSztBQUFBLEVBQ1I7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLHlCQUF5QixVQUEwQjtBQTlQcEQ7QUErUEUsVUFBTSxZQUFvQztBQUFBLE1BQ3pDLGNBQWM7QUFBQSxNQUNkLGFBQWE7QUFBQSxNQUNiLGFBQWE7QUFBQSxNQUNiLGFBQWE7QUFBQSxNQUNiLGNBQWM7QUFBQSxNQUNkLGlCQUFpQjtBQUFBLE1BQ2pCLGFBQWE7QUFBQSxNQUNiLGNBQWM7QUFBQSxNQUNkLGNBQWM7QUFBQSxJQUNmO0FBRUEsWUFBTyxlQUFVLFFBQVEsTUFBbEIsWUFBdUI7QUFBQSxFQUMvQjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsWUFBWSxNQUFzQjtBQUNqQyxVQUFNLGtCQUFrQixDQUFDLE9BQU8sUUFBUSxPQUFPLE9BQU8sUUFBUSxPQUFPLE9BQU8sUUFBUSxNQUFNO0FBQzFGLFdBQU8sZ0JBQWdCLFNBQVMsS0FBSyxVQUFVLFlBQVksQ0FBQztBQUFBLEVBQzdEO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxtQkFBbUIsS0FBc0I7QUFDeEMsUUFBSTtBQUNILFlBQU0sU0FBUyxJQUFJLElBQUksR0FBRztBQUMxQixVQUFJLENBQUMsQ0FBQyxTQUFTLFFBQVEsRUFBRSxTQUFTLE9BQU8sUUFBUSxHQUFHO0FBQ25ELGVBQU87QUFBQSxNQUNSO0FBR0EsWUFBTSxXQUFXLE9BQU8sU0FBUyxZQUFZO0FBQzdDLFlBQU0sa0JBQWtCLENBQUMsUUFBUSxTQUFTLFFBQVEsUUFBUSxTQUFTLFFBQVEsUUFBUSxTQUFTLE9BQU87QUFHbkcsVUFBSSxnQkFBZ0IsS0FBSyxTQUFPLFNBQVMsU0FBUyxHQUFHLENBQUMsR0FBRztBQUN4RCxlQUFPO0FBQUEsTUFDUjtBQUdBLFlBQU0sYUFBYTtBQUFBLFFBQ2xCO0FBQUEsUUFDQTtBQUFBLFFBQ0E7QUFBQSxRQUNBO0FBQUEsUUFDQTtBQUFBLE1BQ0Q7QUFFQSxhQUFPLFdBQVcsS0FBSyxVQUFRLE9BQU8sU0FBUyxTQUFTLElBQUksQ0FBQztBQUFBLElBQzlELFNBQVE7QUFDUCxhQUFPO0FBQUEsSUFDUjtBQUFBLEVBQ0Q7QUFDRDs7O0FDbFRBLElBQUFDLG1CQUE2RDs7O0FDa0J0RCxTQUFTLGVBQ2YsVUFDQSxXQUNBLGFBQ1M7QUEzQlY7QUE0QkMsTUFBSSxTQUFTO0FBR2IsV0FBUyxPQUFPLFFBQVEscUJBQXFCLFVBQVUsUUFBUTtBQUMvRCxXQUFTLE9BQU8sUUFBUSxvQkFBb0IsVUFBVSxPQUFPO0FBQzdELFdBQVMsT0FBTyxRQUFRLDBCQUF5QixlQUFVLGlCQUFWLFlBQTBCLEVBQUU7QUFDN0UsV0FBUyxPQUFPLFFBQVEsMEJBQXlCLGVBQVUsaUJBQVYsWUFBMEIsRUFBRTtBQUc3RSxXQUFTLE9BQU8sUUFBUSx5QkFBeUIsQ0FBQyxHQUFHLFdBQW1CO0FBQ3ZFLFdBQU8sV0FBVyxvQkFBSSxLQUFLLEdBQUcsTUFBTTtBQUFBLEVBQ3JDLENBQUM7QUFHRCxXQUFTLE9BQU8sUUFBUSx5QkFBeUIsQ0FBQyxHQUFHLFdBQW1CO0FBQ3ZFLFdBQU8sV0FBVyxvQkFBSSxLQUFLLEdBQUcsTUFBTTtBQUFBLEVBQ3JDLENBQUM7QUFHRCxNQUFJLGFBQWE7QUFDaEIsYUFBUyxPQUFPLFFBQVEsdUJBQXVCLENBQUMsR0FBRyxRQUFnQjtBQUNsRSxZQUFNLFFBQVEsWUFBWSxJQUFJLEtBQUssQ0FBQztBQUNwQyxVQUFJLFNBQVMsS0FBTSxRQUFPO0FBQzFCLFVBQUksT0FBTyxVQUFVLFNBQVUsUUFBTztBQUN0QyxVQUFJLE9BQU8sVUFBVSxZQUFZLE9BQU8sVUFBVSxVQUFXLFFBQU8sT0FBTyxLQUFLO0FBQ2hGLGFBQU87QUFBQSxJQUNSLENBQUM7QUFBQSxFQUNGO0FBRUEsU0FBTztBQUNSO0FBTUEsU0FBUyxXQUFXLE1BQVksUUFBd0I7QUFDdkQsUUFBTSxPQUFPLEtBQUssWUFBWTtBQUM5QixRQUFNLFFBQVEsS0FBSyxTQUFTLElBQUk7QUFDaEMsUUFBTSxNQUFNLEtBQUssUUFBUTtBQUV6QixTQUFPLE9BQ0wsUUFBUSxRQUFRLE9BQU8sSUFBSSxDQUFDLEVBQzVCLFFBQVEsTUFBTSxPQUFPLElBQUksRUFBRSxNQUFNLEVBQUUsQ0FBQyxFQUNwQyxRQUFRLE1BQU0sT0FBTyxLQUFLLEVBQUUsU0FBUyxHQUFHLEdBQUcsQ0FBQyxFQUM1QyxRQUFRLE1BQU0sT0FBTyxHQUFHLEVBQUUsU0FBUyxHQUFHLEdBQUcsQ0FBQyxFQUMxQyxRQUFRLEtBQUssT0FBTyxLQUFLLENBQUMsRUFDMUIsUUFBUSxLQUFLLE9BQU8sR0FBRyxDQUFDO0FBQzNCO0FBTUEsU0FBUyxXQUFXLE1BQVksUUFBd0I7QUFDdkQsUUFBTSxRQUFRLEtBQUssU0FBUztBQUM1QixRQUFNLFVBQVUsS0FBSyxXQUFXO0FBQ2hDLFFBQU0sVUFBVSxLQUFLLFdBQVc7QUFFaEMsU0FBTyxPQUNMLFFBQVEsTUFBTSxPQUFPLEtBQUssRUFBRSxTQUFTLEdBQUcsR0FBRyxDQUFDLEVBQzVDLFFBQVEsTUFBTSxPQUFPLE9BQU8sRUFBRSxTQUFTLEdBQUcsR0FBRyxDQUFDLEVBQzlDLFFBQVEsTUFBTSxPQUFPLE9BQU8sRUFBRSxTQUFTLEdBQUcsR0FBRyxDQUFDLEVBQzlDLFFBQVEsS0FBSyxPQUFPLEtBQUssQ0FBQyxFQUMxQixRQUFRLEtBQUssT0FBTyxPQUFPLENBQUMsRUFDNUIsUUFBUSxLQUFLLE9BQU8sT0FBTyxDQUFDO0FBQy9CO0FBS08sU0FBUyx1QkFDZixLQUNBLFlBQ3dCO0FBdEd6QjtBQXVHQyxRQUFNLFFBQVEsSUFBSSxjQUFjLGFBQWEsVUFBVTtBQUN2RCxRQUFNLGNBQWMsK0JBQU87QUFHM0IsTUFBSSxlQUFlO0FBQ25CLE1BQUksK0JBQU8sVUFBVTtBQUNwQixlQUFXLFdBQVcsTUFBTSxVQUFVO0FBQ3JDLFVBQUksUUFBUSxVQUFVLEdBQUc7QUFDeEIsdUJBQWUsUUFBUTtBQUN2QjtBQUFBLE1BQ0Q7QUFBQSxJQUNEO0FBQUEsRUFDRDtBQUVBLFNBQU87QUFBQSxJQUNOLFVBQVUsV0FBVztBQUFBLElBQ3JCLFVBQVMsc0JBQVcsV0FBWCxtQkFBbUIsU0FBbkIsWUFBMkI7QUFBQSxJQUNwQyxjQUFjLDJDQUFhO0FBQUEsSUFDM0I7QUFBQSxJQUNBLE1BQU0sV0FBVyxvQkFBSSxLQUFLLEdBQUcsWUFBWTtBQUFBLElBQ3pDLE1BQU0sV0FBVyxvQkFBSSxLQUFLLEdBQUcsVUFBVTtBQUFBLEVBQ3hDO0FBQ0Q7QUFLTyxTQUFTLHFCQUFxQixRQUFnQixXQUE0QjtBQUVoRixRQUFNLG1CQUFtQixJQUFJLE9BQU8sSUFBSSxhQUFhLFNBQVMsQ0FBQyxRQUFRLElBQUk7QUFDM0UsU0FBTyxPQUFPLFFBQVEsa0JBQWtCLEVBQUUsTUFBTTtBQUNqRDtBQUtBLFNBQVMsYUFBYSxRQUF3QjtBQUM3QyxTQUFPLE9BQU8sUUFBUSx1QkFBdUIsTUFBTTtBQUNwRDs7O0FDeElBLElBQUFDLG1CQUEyQztBQU9wQyxJQUFNLGNBQU4sY0FBMEIsdUJBQU07QUFBQSxFQVV0QyxZQUNDLEtBQ0EsV0FDQSxlQUNBLFVBQ0M7QUFDRCxVQUFNLEdBQUc7QUFWVixTQUFRLFlBQXFDO0FBQzdDLFNBQVEsWUFBZ0M7QUFDeEMsU0FBUSxVQUE4QjtBQVNyQyxTQUFLLFlBQVk7QUFDakIsU0FBSyxnQkFBZ0I7QUFDckIsU0FBSyxjQUFjO0FBQ25CLFNBQUssV0FBVztBQUFBLEVBQ2pCO0FBQUEsRUFFQSxTQUFlO0FBQ2QsVUFBTSxFQUFFLFdBQVcsUUFBUSxJQUFJO0FBRS9CLFNBQUssWUFBWSxTQUFTLDRCQUE0QjtBQUN0RCxZQUFRLFFBQVEsY0FBYztBQUc5QixTQUFLLG1CQUFtQixTQUFTO0FBR2pDLFNBQUssZUFBZSxTQUFTO0FBRzdCLFNBQUssZ0JBQWdCLFNBQVM7QUFHOUIsU0FBSyxVQUFVLFVBQVUsVUFBVSxFQUFFLEtBQUssaURBQWlELENBQUM7QUFHNUYsU0FBSyxjQUFjLFNBQVM7QUFHNUIsZUFBVyxNQUFNO0FBQ2hCLFVBQUksS0FBSyxXQUFXO0FBQ25CLGFBQUssVUFBVSxNQUFNO0FBQ3JCLGFBQUssVUFBVSxPQUFPO0FBQUEsTUFDdkI7QUFBQSxJQUNELEdBQUcsRUFBRTtBQUFBLEVBQ047QUFBQSxFQUVRLG1CQUFtQixhQUFnQztBQUMxRCxVQUFNLG1CQUFtQixZQUFZLFVBQVUsRUFBRSxLQUFLLHdCQUF3QixDQUFDO0FBRS9FLFVBQU0sTUFBTSxpQkFBaUIsU0FBUyxPQUFPO0FBQUEsTUFDNUMsTUFBTTtBQUFBLFFBQ0wsS0FBSyxLQUFLLElBQUksTUFBTSxnQkFBZ0IsS0FBSyxTQUFTO0FBQUEsUUFDbEQsS0FBSyxLQUFLLFVBQVU7QUFBQSxNQUNyQjtBQUFBLElBQ0QsQ0FBQztBQUdELFFBQUksU0FBUywyQkFBMkI7QUFBQSxFQUN6QztBQUFBLEVBRVEsZUFBZSxhQUFnQztBQUN0RCxVQUFNLGdCQUFnQixZQUFZLFVBQVUsRUFBRSxLQUFLLHFCQUFxQixDQUFDO0FBRXpFLFVBQU0sV0FBVyxjQUFjLFNBQVMsSUFBSTtBQUc1QyxVQUFNLGVBQWUsU0FBUyxTQUFTLElBQUk7QUFDM0MsaUJBQWEsU0FBUyxVQUFVLEVBQUUsTUFBTSxhQUFhLENBQUM7QUFDdEQsaUJBQWEsU0FBUyxRQUFRLEVBQUUsTUFBTSxLQUFLLFVBQVUsS0FBSyxDQUFDO0FBRzNELFVBQU0sVUFBVSxTQUFTLFNBQVMsSUFBSTtBQUN0QyxZQUFRLFNBQVMsVUFBVSxFQUFFLE1BQU0sYUFBYSxDQUFDO0FBQ2pELFNBQUssWUFBWSxRQUFRLFNBQVMsUUFBUSxFQUFFLE1BQU0sS0FBSyxXQUFXLEtBQUssV0FBVyxFQUFFLENBQUM7QUFBQSxFQUN0RjtBQUFBLEVBRVEsZ0JBQWdCLGFBQWdDO0FBQ3ZELFFBQUkseUJBQVEsV0FBVyxFQUNyQixRQUFRLFVBQVUsRUFDbEIsUUFBUSxvREFBb0QsRUFDNUQsUUFBUSxDQUFDLFNBQVM7QUFDbEIsV0FBSyxZQUFZLEtBQUs7QUFDdEIsV0FDRSxlQUFlLFlBQVksRUFDM0IsU0FBUyxLQUFLLFdBQVcsRUFDekIsU0FBUyxDQUFDLFVBQVU7QUFDcEIsYUFBSyxjQUFjLEtBQUssYUFBYSxLQUFLO0FBQzFDLGFBQUssY0FBYztBQUFBLE1BQ3BCLENBQUM7QUFHRixXQUFLLFFBQVEsaUJBQWlCLFdBQVcsQ0FBQyxNQUFxQjtBQUM5RCxZQUFJLEVBQUUsUUFBUSxXQUFXLENBQUMsRUFBRSxhQUFhO0FBQ3hDLFlBQUUsZUFBZTtBQUNqQixlQUFLLE9BQU87QUFBQSxRQUNiO0FBQUEsTUFDRCxDQUFDO0FBQUEsSUFDRixDQUFDO0FBQUEsRUFDSDtBQUFBLEVBRVEsY0FBYyxhQUFnQztBQUNyRCxRQUFJLHlCQUFRLFdBQVcsRUFDckIsVUFBVSxDQUFDLFFBQVE7QUFDbkIsVUFDRSxjQUFjLFFBQVEsRUFDdEIsT0FBTyxFQUNQLFFBQVEsTUFBTSxLQUFLLE9BQU8sQ0FBQztBQUFBLElBQzlCLENBQUMsRUFDQSxVQUFVLENBQUMsUUFBUTtBQUNuQixVQUNFLGNBQWMsTUFBTSxFQUNwQixRQUFRLE1BQU0sS0FBSyxPQUFPLENBQUM7QUFBQSxJQUM5QixDQUFDO0FBQUEsRUFDSDtBQUFBLEVBRVEsV0FBVyxNQUFzQjtBQXRJMUM7QUF1SUUsVUFBTSxVQUFTLGdCQUFLLFVBQVUsV0FBZixtQkFBdUIsU0FBdkIsWUFBK0I7QUFDOUMsVUFBTSxZQUFZLEtBQUssVUFBVTtBQUNqQyxVQUFNLFdBQVcsR0FBRyxJQUFJLElBQUksU0FBUztBQUNyQyxXQUFPLFNBQVMsR0FBRyxNQUFNLElBQUksUUFBUSxLQUFLO0FBQUEsRUFDM0M7QUFBQSxFQUVRLGdCQUFzQjtBQUM3QixRQUFJLEtBQUssV0FBVztBQUNuQixXQUFLLFVBQVUsUUFBUSxLQUFLLFdBQVcsS0FBSyxXQUFXLENBQUM7QUFBQSxJQUN6RDtBQUFBLEVBQ0Q7QUFBQSxFQUVRLGFBQWEsTUFBc0I7QUFDMUMsV0FBTyxLQUNMLFFBQVEsaUJBQWlCLEdBQUcsRUFDNUIsUUFBUSxRQUFRLEdBQUcsRUFDbkIsS0FBSztBQUFBLEVBQ1I7QUFBQSxFQUVRLFVBQVUsU0FBdUI7QUFDeEMsUUFBSSxLQUFLLFNBQVM7QUFDakIsV0FBSyxRQUFRLFFBQVEsT0FBTztBQUM1QixXQUFLLFFBQVEsU0FBUyw2QkFBNkI7QUFDbkQsV0FBSyxRQUFRLFlBQVksNEJBQTRCO0FBQUEsSUFDdEQ7QUFBQSxFQUNEO0FBQUEsRUFFUSxZQUFrQjtBQUN6QixRQUFJLEtBQUssU0FBUztBQUNqQixXQUFLLFFBQVEsU0FBUyw0QkFBNEI7QUFDbEQsV0FBSyxRQUFRLFlBQVksNkJBQTZCO0FBQUEsSUFDdkQ7QUFBQSxFQUNEO0FBQUEsRUFFUSxTQUFlO0FBQ3RCLFNBQUssVUFBVTtBQUVmLFFBQUksQ0FBQyxLQUFLLGVBQWUsS0FBSyxZQUFZLEtBQUssTUFBTSxJQUFJO0FBQ3hELFdBQUssVUFBVSxzQkFBc0I7QUFDckM7QUFBQSxJQUNEO0FBRUEsU0FBSyxTQUFTO0FBQUEsTUFDYixTQUFTLEtBQUs7QUFBQSxNQUNkLFdBQVc7QUFBQSxJQUNaLENBQUM7QUFDRCxTQUFLLE1BQU07QUFBQSxFQUNaO0FBQUEsRUFFUSxTQUFlO0FBQ3RCLFNBQUssU0FBUztBQUFBLE1BQ2IsU0FBUztBQUFBLE1BQ1QsV0FBVztBQUFBLElBQ1osQ0FBQztBQUNELFNBQUssTUFBTTtBQUFBLEVBQ1o7QUFBQSxFQUVBLFVBQWdCO0FBQ2YsVUFBTSxFQUFFLFVBQVUsSUFBSTtBQUN0QixjQUFVLE1BQU07QUFBQSxFQUNqQjtBQUNEO0FBS08sU0FBUyxnQkFDZixLQUNBLFdBQ0EsZUFDd0I7QUFDeEIsU0FBTyxJQUFJLFFBQVEsQ0FBQyxZQUFZO0FBQy9CLFVBQU0sUUFBUSxJQUFJLFlBQVksS0FBSyxXQUFXLGVBQWUsT0FBTztBQUNwRSxVQUFNLEtBQUs7QUFBQSxFQUNaLENBQUM7QUFDRjs7O0FDN01BLElBQUFDLG1CQUEyQzs7O0FDSXBDLFNBQVMsWUFBWSxLQUFxQjtBQUNoRCxTQUFPLElBQ0wsWUFBWSxFQUVaLFFBQVEsaUJBQWlCLEVBQUUsRUFDM0IsUUFBUSxTQUFTLEVBQUUsRUFDbkIsUUFBUSxhQUFhLEVBQUUsRUFDdkIsS0FBSyxFQUNMLFFBQVEsUUFBUSxHQUFHLEVBQ25CLFFBQVEsT0FBTyxHQUFHLEVBQ2xCLFFBQVEsVUFBVSxFQUFFO0FBQ3ZCOzs7QUROTyxJQUFNLHdCQUFOLGNBQW9DLHVCQUFNO0FBQUEsRUFVaEQsWUFDQyxLQUNBLFdBQ0EsVUFDQSxzQkFDQztBQUNELFVBQU0sR0FBRztBQWRWLFNBQVEsY0FBc0I7QUFHOUIsU0FBUSxtQkFBNEM7QUFDcEQsU0FBUSxZQUFnQztBQUN4QyxTQUFRLG9CQUF3QztBQUNoRCxTQUFRLFVBQThCO0FBU3JDLFNBQUssWUFBWTtBQUNqQixTQUFLLFdBQVc7QUFDaEIsU0FBSyxjQUFjLHNEQUF3QjtBQUFBLEVBQzVDO0FBQUEsRUFFQSxTQUFlO0FBQ2QsVUFBTSxFQUFFLFdBQVcsUUFBUSxJQUFJO0FBRS9CLFNBQUssWUFBWSxTQUFTLDRCQUE0QjtBQUN0RCxZQUFRLFFBQVEsZ0JBQWdCO0FBR2hDLFNBQUssbUJBQW1CLFNBQVM7QUFHakMsUUFBSSx5QkFBUSxTQUFTLEVBQ25CLFFBQVEsbUJBQW1CLEVBQzNCLFFBQVEsOEVBQThFLEVBQ3RGLFFBQVEsQ0FBQyxTQUFTO0FBQ2xCLFdBQUssbUJBQW1CLEtBQUs7QUFDN0IsV0FDRSxlQUFlLG1DQUFtQyxFQUNsRCxTQUFTLEtBQUssV0FBVyxFQUN6QixTQUFTLENBQUMsVUFBVTtBQUNwQixhQUFLLGNBQWM7QUFDbkIsYUFBSyxjQUFjO0FBQUEsTUFDcEIsQ0FBQztBQUdGLFdBQUssUUFBUSxpQkFBaUIsV0FBVyxDQUFDLE1BQXFCO0FBQzlELFlBQUksRUFBRSxRQUFRLFdBQVcsQ0FBQyxFQUFFLGFBQWE7QUFDeEMsWUFBRSxlQUFlO0FBQ2pCLGVBQUssT0FBTztBQUFBLFFBQ2I7QUFBQSxNQUNELENBQUM7QUFBQSxJQUNGLENBQUM7QUFHRixVQUFNLG1CQUFtQixVQUFVLFVBQVUsRUFBRSxLQUFLLHFCQUFxQixDQUFDO0FBQzFFLHFCQUFpQixTQUFTLEtBQUssRUFBRSxNQUFNLFdBQVcsQ0FBQztBQUVuRCxVQUFNLGtCQUFrQixpQkFBaUIsU0FBUyxHQUFHO0FBQ3JELG9CQUFnQixTQUFTLFVBQVUsRUFBRSxNQUFNLGFBQWEsQ0FBQztBQUN6RCxTQUFLLG9CQUFvQixnQkFBZ0IsU0FBUyxNQUFNO0FBRXhELFVBQU0sY0FBYyxpQkFBaUIsU0FBUyxHQUFHO0FBQ2pELGdCQUFZLFNBQVMsVUFBVSxFQUFFLE1BQU0sU0FBUyxDQUFDO0FBQ2pELFNBQUssWUFBWSxZQUFZLFNBQVMsUUFBUSxFQUFFLEtBQUssT0FBTyxDQUFDO0FBRzdELFNBQUssVUFBVSxVQUFVLFVBQVUsRUFBRSxLQUFLLGlEQUFpRCxDQUFDO0FBRzVGLFFBQUkseUJBQVEsU0FBUyxFQUNuQixVQUFVLENBQUMsUUFBUTtBQUNuQixVQUNFLGNBQWMsUUFBUSxFQUN0QixPQUFPLEVBQ1AsUUFBUSxNQUFNLEtBQUssT0FBTyxDQUFDO0FBQUEsSUFDOUIsQ0FBQyxFQUNBLFVBQVUsQ0FBQyxRQUFRO0FBQ25CLFVBQ0UsY0FBYyxRQUFRLEVBQ3RCLFFBQVEsTUFBTSxLQUFLLE9BQU8sQ0FBQztBQUFBLElBQzlCLENBQUM7QUFHRixRQUFJLEtBQUssYUFBYTtBQUNyQixXQUFLLGNBQWM7QUFBQSxJQUNwQjtBQUdBLGVBQVcsTUFBTTtBQUNoQixVQUFJLEtBQUssa0JBQWtCO0FBQzFCLGFBQUssaUJBQWlCLE1BQU07QUFBQSxNQUM3QjtBQUFBLElBQ0QsR0FBRyxFQUFFO0FBQUEsRUFDTjtBQUFBLEVBRVEsbUJBQW1CLGFBQWdDO0FBQzFELFVBQU0sbUJBQW1CLFlBQVksVUFBVSxFQUFFLEtBQUssd0JBQXdCLENBQUM7QUFFL0UsVUFBTSxNQUFNLGlCQUFpQixTQUFTLE9BQU87QUFBQSxNQUM1QyxNQUFNO0FBQUEsUUFDTCxLQUFLLEtBQUssSUFBSSxNQUFNLGdCQUFnQixLQUFLLFNBQVM7QUFBQSxRQUNsRCxLQUFLLEtBQUssVUFBVTtBQUFBLE1BQ3JCO0FBQUEsSUFDRCxDQUFDO0FBRUQsUUFBSSxTQUFTLDJCQUEyQjtBQUFBLEVBQ3pDO0FBQUEsRUFFUSxnQkFBc0I7QUFDN0IsUUFBSSxDQUFDLEtBQUssZUFBZSxLQUFLLFlBQVksS0FBSyxNQUFNLElBQUk7QUFDeEQsVUFBSSxLQUFLLG1CQUFtQjtBQUMzQixhQUFLLGtCQUFrQixRQUFRLHFCQUFxQjtBQUFBLE1BQ3JEO0FBQ0EsVUFBSSxLQUFLLFdBQVc7QUFDbkIsYUFBSyxVQUFVLFFBQVEscUJBQXFCO0FBQUEsTUFDN0M7QUFDQTtBQUFBLElBQ0Q7QUFFQSxVQUFNLFlBQVksWUFBWSxLQUFLLFdBQVc7QUFDOUMsVUFBTSxZQUFZLEtBQUssVUFBVTtBQUNqQyxVQUFNLFdBQVcsR0FBRyxTQUFTLElBQUksU0FBUztBQUMxQyxVQUFNLGNBQWMsS0FBSyxZQUFZLEtBQUs7QUFFMUMsUUFBSSxLQUFLLG1CQUFtQjtBQUMzQixXQUFLLGtCQUFrQixRQUFRLFFBQVE7QUFBQSxJQUN4QztBQUVBLFFBQUksS0FBSyxXQUFXO0FBRW5CLFdBQUssVUFBVSxRQUFRLE1BQU0sUUFBUSxJQUFJLFdBQVcsSUFBSTtBQUFBLElBQ3pEO0FBQUEsRUFDRDtBQUFBLEVBRVEsVUFBVSxTQUF1QjtBQUN4QyxRQUFJLEtBQUssU0FBUztBQUNqQixXQUFLLFFBQVEsUUFBUSxPQUFPO0FBQzVCLFdBQUssUUFBUSxTQUFTLDZCQUE2QjtBQUNuRCxXQUFLLFFBQVEsWUFBWSw0QkFBNEI7QUFBQSxJQUN0RDtBQUFBLEVBQ0Q7QUFBQSxFQUVRLFlBQWtCO0FBQ3pCLFFBQUksS0FBSyxTQUFTO0FBQ2pCLFdBQUssUUFBUSxTQUFTLDRCQUE0QjtBQUNsRCxXQUFLLFFBQVEsWUFBWSw2QkFBNkI7QUFBQSxJQUN2RDtBQUFBLEVBQ0Q7QUFBQSxFQUVRLFNBQWU7QUFDdEIsU0FBSyxVQUFVO0FBRWYsUUFBSSxDQUFDLEtBQUssZUFBZSxLQUFLLFlBQVksS0FBSyxNQUFNLElBQUk7QUFDeEQsV0FBSyxVQUFVLDZCQUE2QjtBQUM1QztBQUFBLElBQ0Q7QUFFQSxVQUFNLFlBQVksWUFBWSxLQUFLLFdBQVc7QUFDOUMsUUFBSSxDQUFDLGFBQWEsY0FBYyxJQUFJO0FBQ25DLFdBQUssVUFBVSwyQ0FBMkM7QUFDMUQ7QUFBQSxJQUNEO0FBRUEsU0FBSyxTQUFTO0FBQUEsTUFDYixhQUFhLEtBQUssWUFBWSxLQUFLO0FBQUEsTUFDbkMsVUFBVTtBQUFBLE1BQ1YsV0FBVztBQUFBLElBQ1osQ0FBQztBQUNELFNBQUssTUFBTTtBQUFBLEVBQ1o7QUFBQSxFQUVRLFNBQWU7QUFDdEIsU0FBSyxTQUFTO0FBQUEsTUFDYixhQUFhO0FBQUEsTUFDYixVQUFVO0FBQUEsTUFDVixXQUFXO0FBQUEsSUFDWixDQUFDO0FBQ0QsU0FBSyxNQUFNO0FBQUEsRUFDWjtBQUFBLEVBRUEsVUFBZ0I7QUFDZixVQUFNLEVBQUUsVUFBVSxJQUFJO0FBQ3RCLGNBQVUsTUFBTTtBQUFBLEVBQ2pCO0FBQ0Q7QUFLTyxTQUFTLDBCQUNmLEtBQ0EsV0FDQSxzQkFDa0M7QUFDbEMsU0FBTyxJQUFJLFFBQVEsQ0FBQyxZQUFZO0FBQy9CLFVBQU0sUUFBUSxJQUFJLHNCQUFzQixLQUFLLFdBQVcsU0FBUyxvQkFBb0I7QUFDckYsVUFBTSxLQUFLO0FBQUEsRUFDWixDQUFDO0FBQ0Y7OztBSHpNTyxJQUFNLGlCQUFOLE1BQXFCO0FBQUEsRUFLM0IsWUFBWSxLQUFVLFVBQWdDLGdCQUFnQyxZQUFnRjtBQUNySyxTQUFLLE1BQU07QUFDWCxTQUFLLFdBQVc7QUFDaEIsU0FBSyxpQkFBaUI7QUFHdEIsNkNBQVksVUFBVSxDQUFDLGdCQUFnQjtBQUN0QyxXQUFLLGVBQWUsV0FBVztBQUFBLElBQ2hDO0FBQUEsRUFDRDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsZUFBZSxVQUFzQztBQUNwRCxTQUFLLFdBQVc7QUFDaEIsU0FBSyxlQUFlLGVBQWUsUUFBUTtBQUFBLEVBQzVDO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBT0EsTUFBTSxpQkFDTCxNQUNBLFlBQ0Esa0JBQTJCLE1BQzNCLHNCQUErQixPQUNMO0FBQzFCLFFBQUk7QUFFSCxZQUFNLGNBQWMsTUFBTSxLQUFLLFlBQVk7QUFDM0MsWUFBTSxZQUFZLEtBQUssYUFBYSxJQUFJO0FBR3hDLFlBQU0sZ0JBQWdCLEtBQUssdUJBQXVCLFVBQVU7QUFHNUQsVUFBSSxZQUFZO0FBRWhCLFVBQUksbUJBQW1CLENBQUMsS0FBSyxTQUFTLFlBQVk7QUFFakQsY0FBTSxXQUFXLE1BQU0sS0FBSyxlQUFlO0FBQUEsVUFDMUMsUUFBUSxLQUFLLElBQUksQ0FBQztBQUFBLFVBQ2xCO0FBQUEsVUFDQTtBQUFBLFFBQ0Q7QUFDQSxjQUFNLFdBQVcsTUFBTSxLQUFLLGVBQWUsU0FBUyxhQUFhLFFBQVE7QUFFekUsWUFBSUM7QUFDSixZQUFJO0FBR0osWUFBSSxLQUFLLFNBQVMseUJBQXlCO0FBQzFDLGdCQUFNLGFBQWEsTUFBTSwwQkFBMEIsS0FBSyxLQUFLLFVBQVUsYUFBYTtBQUVwRixjQUFJLFdBQVcsV0FBVztBQUV6QixrQkFBTSxLQUFLLElBQUksWUFBWSxVQUFVLFFBQVE7QUFDN0MsbUJBQU87QUFBQSxjQUNOLE1BQU07QUFBQSxjQUNOLE1BQU07QUFBQSxjQUNOLFVBQVU7QUFBQSxjQUNWLFNBQVM7QUFBQSxjQUNULE9BQU87QUFBQSxZQUNSO0FBQUEsVUFDRDtBQUVBLFVBQUFBLGFBQVksV0FBVztBQUN2Qix3QkFBYyxXQUFXO0FBQUEsUUFDMUIsT0FBTztBQUVOLGdCQUFNLFNBQVMsTUFBTSxnQkFBZ0IsS0FBSyxLQUFLLFVBQVUsYUFBYTtBQUV0RSxjQUFJLE9BQU8sV0FBVztBQUVyQixrQkFBTSxLQUFLLElBQUksWUFBWSxVQUFVLFFBQVE7QUFDN0MsbUJBQU87QUFBQSxjQUNOLE1BQU07QUFBQSxjQUNOLE1BQU07QUFBQSxjQUNOLFVBQVU7QUFBQSxjQUNWLFNBQVM7QUFBQSxjQUNULE9BQU87QUFBQSxZQUNSO0FBQUEsVUFDRDtBQUVBLFVBQUFBLGFBQVksT0FBTztBQUFBLFFBQ3BCO0FBR0EsY0FBTSxZQUFZLE1BQU0sS0FBSyxvQkFBb0JBLFlBQVcsV0FBVyxVQUFVO0FBQ2pGLGNBQU0sS0FBSyxJQUFJLFlBQVksV0FBVyxVQUFVLFNBQVM7QUFFekQsY0FBTSxlQUFlLEtBQUssSUFBSSxNQUFNLHNCQUFzQixTQUFTO0FBQ25FLFlBQUksRUFBRSx3QkFBd0IseUJBQVE7QUFDckMsZ0JBQU0sSUFBSSxNQUFNLHdCQUF3QjtBQUFBLFFBQ3pDO0FBQ0EsY0FBTSxjQUFjO0FBQ3BCLGNBQU0sV0FBVyxLQUFLLGVBQWU7QUFBQSxVQUNwQztBQUFBLFVBQ0EsV0FBVztBQUFBLFVBQ1g7QUFBQSxVQUNBLEtBQUssU0FBUztBQUFBLFFBQ2Y7QUFFQSxZQUFJLENBQUMsS0FBSyxTQUFTLHFCQUFxQjtBQUN2QyxjQUFJLHdCQUFPLG1CQUFtQixZQUFZLElBQUksRUFBRTtBQUFBLFFBQ2pEO0FBRUEsZUFBTztBQUFBLFVBQ04sTUFBTTtBQUFBLFVBQ04sTUFBTTtBQUFBLFVBQ047QUFBQSxVQUNBLGFBQWE7QUFBQSxVQUNiLFNBQVM7QUFBQSxRQUNWO0FBQUEsTUFDRCxPQUFPO0FBRU4sY0FBTSxZQUFZLE1BQU0sS0FBSyxvQkFBb0IsV0FBVyxXQUFXLFVBQVU7QUFDakYsY0FBTSxZQUFZLE1BQU0sS0FBSyxlQUFlLFNBQVMsYUFBYSxTQUFTO0FBQzNFLGNBQU0sV0FBVyxLQUFLLGVBQWU7QUFBQSxVQUNwQztBQUFBLFVBQ0EsV0FBVztBQUFBLFVBQ1g7QUFBQSxVQUNBLEtBQUssU0FBUztBQUFBLFFBQ2Y7QUFFQSxZQUFJLENBQUMsS0FBSyxTQUFTLHFCQUFxQjtBQUN2QyxjQUFJLHdCQUFPLG1CQUFtQixVQUFVLElBQUksRUFBRTtBQUFBLFFBQy9DO0FBRUEsZUFBTztBQUFBLFVBQ04sTUFBTTtBQUFBLFVBQ04sTUFBTTtBQUFBLFVBQ047QUFBQSxVQUNBLGFBQWE7QUFBQSxVQUNiLFNBQVM7QUFBQSxRQUNWO0FBQUEsTUFDRDtBQUFBLElBQ0QsU0FBUyxPQUFPO0FBQ2YsY0FBUSxNQUFNLDJCQUEyQixLQUFLO0FBQzlDLGFBQU87QUFBQSxRQUNOLE1BQU07QUFBQSxRQUNOLE1BQU07QUFBQSxRQUNOLFVBQVU7QUFBQSxRQUNWLFNBQVM7QUFBQSxRQUNULE9BQU8saUJBQWlCLFFBQVEsTUFBTSxVQUFVLE9BQU8sS0FBSztBQUFBLE1BQzdEO0FBQUEsSUFDRDtBQUFBLEVBQ0Q7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFPQSxNQUFNLGdCQUNMLEtBQ0EsWUFDQSxrQkFBMkIsTUFDM0Isc0JBQStCLE9BQy9CLHVCQUMwQjtBQXBMNUI7QUFxTEUsUUFBSTtBQUVILFlBQU0sV0FBVyxVQUFNLDZCQUFXLEVBQUUsSUFBSSxDQUFDO0FBQ3pDLFVBQUksU0FBUyxVQUFVLEtBQUs7QUFDM0IsY0FBTSxJQUFJLE1BQU0sNkJBQTZCLFNBQVMsTUFBTSxFQUFFO0FBQUEsTUFDL0Q7QUFFQSxZQUFNLGNBQWMsU0FBUztBQUM3QixZQUFNLGVBQWMsY0FBUyxRQUFRLGNBQWMsTUFBL0IsWUFBb0M7QUFDeEQsWUFBTSxZQUFZLEtBQUssZUFBZSx5QkFBeUIsV0FBVztBQUcxRSxZQUFNLGdCQUFnQixLQUFLLHVCQUF1QixZQUFZLHFCQUFxQjtBQUduRixVQUFJLFlBQVk7QUFFaEIsVUFBSSxtQkFBbUIsQ0FBQyxLQUFLLFNBQVMsWUFBWTtBQUVqRCxjQUFNLFdBQVcsTUFBTSxLQUFLLGVBQWU7QUFBQSxVQUMxQyxRQUFRLEtBQUssSUFBSSxDQUFDO0FBQUEsVUFDbEI7QUFBQSxVQUNBO0FBQUEsUUFDRDtBQUNBLGNBQU0sV0FBVyxNQUFNLEtBQUssZUFBZSxTQUFTLGFBQWEsUUFBUTtBQUV6RSxZQUFJQTtBQUNKLFlBQUk7QUFJSixjQUFNLHdCQUF3QixLQUFLLFNBQVMsNEJBQTRCLENBQUMsdUJBQXVCLEtBQUssU0FBUyxvQkFBb0I7QUFFbEksWUFBSSx1QkFBdUI7QUFDMUIsZ0JBQU0sYUFBYSxNQUFNLDBCQUEwQixLQUFLLEtBQUssVUFBVSxhQUFhO0FBRXBGLGNBQUksV0FBVyxXQUFXO0FBQ3pCLGtCQUFNLEtBQUssSUFBSSxZQUFZLFVBQVUsUUFBUTtBQUM3QyxtQkFBTztBQUFBLGNBQ04sTUFBTTtBQUFBLGNBQ04sTUFBTTtBQUFBLGNBQ04sVUFBVTtBQUFBLGNBQ1YsU0FBUztBQUFBLGNBQ1QsT0FBTztBQUFBLFlBQ1I7QUFBQSxVQUNEO0FBRUEsVUFBQUEsYUFBWSxXQUFXO0FBQ3ZCLHdCQUFjLFdBQVc7QUFBQSxRQUMxQixPQUFPO0FBRU4sZ0JBQU0sU0FBUyxNQUFNLGdCQUFnQixLQUFLLEtBQUssVUFBVSxhQUFhO0FBRXRFLGNBQUksT0FBTyxXQUFXO0FBQ3JCLGtCQUFNLEtBQUssSUFBSSxZQUFZLFVBQVUsUUFBUTtBQUM3QyxtQkFBTztBQUFBLGNBQ04sTUFBTTtBQUFBLGNBQ04sTUFBTTtBQUFBLGNBQ04sVUFBVTtBQUFBLGNBQ1YsU0FBUztBQUFBLGNBQ1QsT0FBTztBQUFBLFlBQ1I7QUFBQSxVQUNEO0FBRUEsVUFBQUEsYUFBWSxPQUFPO0FBQUEsUUFDcEI7QUFFQSxjQUFNLFlBQVksTUFBTSxLQUFLLG9CQUFvQkEsWUFBVyxXQUFXLFVBQVU7QUFDakYsY0FBTSxLQUFLLElBQUksWUFBWSxXQUFXLFVBQVUsU0FBUztBQUV6RCxjQUFNLGVBQWUsS0FBSyxJQUFJLE1BQU0sc0JBQXNCLFNBQVM7QUFDbkUsWUFBSSxFQUFFLHdCQUF3Qix5QkFBUTtBQUNyQyxnQkFBTSxJQUFJLE1BQU0sd0JBQXdCO0FBQUEsUUFDekM7QUFDQSxjQUFNLGNBQWM7QUFDcEIsY0FBTSxXQUFXLEtBQUssZUFBZTtBQUFBLFVBQ3BDO0FBQUEsVUFDQSxXQUFXO0FBQUEsVUFDWDtBQUFBLFVBQ0EsS0FBSyxTQUFTO0FBQUEsUUFDZjtBQUVBLFlBQUksQ0FBQyxLQUFLLFNBQVMscUJBQXFCO0FBQ3ZDLGNBQUksd0JBQU8sa0NBQWtDLFlBQVksSUFBSSxFQUFFO0FBQUEsUUFDaEU7QUFFQSxlQUFPO0FBQUEsVUFDTixNQUFNO0FBQUEsVUFDTixNQUFNO0FBQUEsVUFDTjtBQUFBLFVBQ0EsYUFBYTtBQUFBLFVBQ2IsU0FBUztBQUFBLFFBQ1Y7QUFBQSxNQUNELE9BQU87QUFDTixjQUFNLFlBQVksTUFBTSxLQUFLLG9CQUFvQixXQUFXLFdBQVcsVUFBVTtBQUNqRixjQUFNLFlBQVksTUFBTSxLQUFLLGVBQWUsU0FBUyxhQUFhLFNBQVM7QUFDM0UsY0FBTSxXQUFXLEtBQUssZUFBZTtBQUFBLFVBQ3BDO0FBQUEsVUFDQSxXQUFXO0FBQUEsVUFDWDtBQUFBLFVBQ0EsS0FBSyxTQUFTO0FBQUEsUUFDZjtBQUVBLFlBQUksQ0FBQyxLQUFLLFNBQVMscUJBQXFCO0FBQ3ZDLGNBQUksd0JBQU8sa0NBQWtDLFVBQVUsSUFBSSxFQUFFO0FBQUEsUUFDOUQ7QUFFQSxlQUFPO0FBQUEsVUFDTixNQUFNO0FBQUEsVUFDTixNQUFNO0FBQUEsVUFDTjtBQUFBLFVBQ0EsYUFBYSxzQkFBc0Isd0JBQXdCO0FBQUEsVUFDM0QsU0FBUztBQUFBLFFBQ1Y7QUFBQSxNQUNEO0FBQUEsSUFDRCxTQUFTLE9BQU87QUFDZixjQUFRLE1BQU0sK0JBQStCLEtBQUs7QUFDbEQsYUFBTztBQUFBLFFBQ04sTUFBTTtBQUFBLFFBQ04sTUFBTTtBQUFBLFFBQ04sVUFBVTtBQUFBLFFBQ1YsU0FBUztBQUFBLFFBQ1QsT0FBTyxpQkFBaUIsUUFBUSxNQUFNLFVBQVUsT0FBTyxLQUFLO0FBQUEsTUFDN0Q7QUFBQSxJQUNEO0FBQUEsRUFDRDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsdUJBQXVCLFlBQW1CLFFBQXlCO0FBQ2xFLFVBQU0sWUFBWSx1QkFBdUIsS0FBSyxLQUFLLFVBQVU7QUFDN0QsVUFBTSxXQUFXLGVBQWUsS0FBSyxTQUFTLG1CQUFtQixTQUFTO0FBRTFFLFVBQU0sZUFBZSxxQkFBcUIsVUFBVSxLQUFLLFNBQVMsa0JBQWtCO0FBQ3BGLFVBQU0sT0FBTyxlQUFlLFdBQVc7QUFFdkMsUUFBSSxRQUFRLFFBQVE7QUFDbkIsYUFBTyxHQUFHLElBQUksTUFBTSxNQUFNO0FBQUEsSUFDM0IsV0FBVyxNQUFNO0FBQ2hCLGFBQU8sR0FBRyxJQUFJO0FBQUEsSUFDZixXQUFXLFFBQVE7QUFDbEIsYUFBTztBQUFBLElBQ1I7QUFFQSxXQUFPO0FBQUEsRUFDUjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0Esc0JBQXNCLFlBQTJCO0FBQ2hELFdBQU8sS0FBSyx1QkFBdUIsVUFBVTtBQUFBLEVBQzlDO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxNQUFjLG9CQUNiLFVBQ0EsV0FDQSxZQUNrQjtBQUNsQixXQUFPLE1BQU0sS0FBSyxlQUFlLGlCQUFpQixVQUFVLFdBQVcsVUFBVTtBQUFBLEVBQ2xGO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLUSxhQUFhLE1BQW9CO0FBOVYxQztBQWdXRSxVQUFNLFlBQVksS0FBSyxLQUFLLE1BQU0sR0FBRztBQUNyQyxRQUFJLFVBQVUsU0FBUyxHQUFHO0FBQ3pCLFlBQU0sV0FBVSxlQUFVLFVBQVUsU0FBUyxDQUFDLE1BQTlCLG1CQUFpQztBQUNqRCxVQUFJLFNBQVM7QUFDWixlQUFPO0FBQUEsTUFDUjtBQUFBLElBQ0Q7QUFHQSxXQUFPLEtBQUssZUFBZSx5QkFBeUIsS0FBSyxJQUFJO0FBQUEsRUFDOUQ7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLG1CQUFtQixVQUF3QjtBQUMxQyxVQUFNLE9BQU8sS0FBSyxJQUFJLFVBQVUsb0JBQW9CLDZCQUFZO0FBQ2hFLFFBQUksNkJBQU0sUUFBUTtBQUNqQixXQUFLLE9BQU8saUJBQWlCLFFBQVE7QUFBQSxJQUN0QztBQUFBLEVBQ0Q7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLGdCQUE4QjtBQXpYL0I7QUEwWEUsVUFBTSxPQUFPLEtBQUssSUFBSSxVQUFVLG9CQUFvQiw2QkFBWTtBQUNoRSxZQUFPLGtDQUFNLFNBQU4sWUFBYztBQUFBLEVBQ3RCO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU1BLE1BQU0sZ0JBQ0wsV0FDQSxlQUNBLFlBQ2lDO0FBQ2pDLFFBQUk7QUFDSCxZQUFNLFlBQVksVUFBVTtBQUM1QixVQUFJLFlBQVk7QUFDaEIsVUFBSSxjQUFjO0FBSWxCLFVBQUksS0FBSyxTQUFTLHlCQUF5QjtBQUMxQyxjQUFNLGFBQWEsTUFBTSwwQkFBMEIsS0FBSyxLQUFLLFdBQVcsYUFBYTtBQUNyRixZQUFJLFdBQVcsV0FBVztBQUN6QixpQkFBTztBQUFBLFFBQ1I7QUFDQSxzQkFBYyxXQUFXO0FBQ3pCLG9CQUFZLFdBQVc7QUFBQSxNQUN4QixXQUFXLENBQUMsS0FBSyxTQUFTLFlBQVk7QUFFckMsY0FBTSxTQUFTLE1BQU07QUFBQSxVQUNwQixLQUFLO0FBQUEsVUFDTDtBQUFBLFVBQ0E7QUFBQSxRQUNEO0FBQ0EsWUFBSSxPQUFPLFdBQVc7QUFDckIsaUJBQU87QUFBQSxRQUNSO0FBQ0Esb0JBQVksT0FBTztBQUFBLE1BQ3BCO0FBR0EsWUFBTSxZQUFZLE1BQU0sS0FBSyxvQkFBb0IsV0FBVyxXQUFXLFVBQVU7QUFDakYsWUFBTSxLQUFLLElBQUksWUFBWSxXQUFXLFdBQVcsU0FBUztBQUUxRCxZQUFNLGVBQWUsS0FBSyxJQUFJLE1BQU0sc0JBQXNCLFNBQVM7QUFDbkUsVUFBSSxFQUFFLHdCQUF3Qix5QkFBUTtBQUNyQyxjQUFNLElBQUksTUFBTSx3QkFBd0I7QUFBQSxNQUN6QztBQUNBLFlBQU0sY0FBYztBQUNwQixZQUFNLFdBQVcsS0FBSyxlQUFlO0FBQUEsUUFDcEM7QUFBQSxRQUNBLFdBQVc7QUFBQSxRQUNYO0FBQUEsUUFDQSxLQUFLLFNBQVM7QUFBQSxNQUNmO0FBRUEsYUFBTztBQUFBLFFBQ04sTUFBTTtBQUFBLFFBQ04sTUFBTTtBQUFBLFFBQ047QUFBQSxRQUNBLFNBQVM7QUFBQSxNQUNWO0FBQUEsSUFDRCxTQUFTLE9BQU87QUFDZixjQUFRLE1BQU0sOEJBQThCLEtBQUs7QUFDakQsYUFBTztBQUFBLFFBQ04sTUFBTTtBQUFBLFFBQ04sTUFBTTtBQUFBLFFBQ04sVUFBVTtBQUFBLFFBQ1YsU0FBUztBQUFBLFFBQ1QsT0FBTyxpQkFBaUIsUUFBUSxNQUFNLFVBQVUsT0FBTyxLQUFLO0FBQUEsTUFDN0Q7QUFBQSxJQUNEO0FBQUEsRUFDRDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS1EsT0FBTyxNQUF1QjtBQUNyQyxRQUFJLEtBQUssU0FBUyxXQUFXO0FBQzVCLGNBQVEsTUFBTSxtQkFBbUIsR0FBRyxJQUFJO0FBQUEsSUFDekM7QUFBQSxFQUNEO0FBQ0Q7OztBS3ZjQSxJQUFBQyxtQkFBbUM7OztBQ0NuQyxJQUFBQyxtQkFBcUQ7QUFLOUMsU0FBUyxVQUFVLE1BQXNCO0FBQy9DLFNBQU8sS0FBSyxjQUFjO0FBQzNCO0FBS08sU0FBUyxlQUFlLE1BQXNCO0FBQ3BELFNBQU8sS0FBSyxjQUFjLFFBQVEsS0FBSyxjQUFjO0FBQ3REO0FBTU8sU0FBUyxvQkFDZixTQUNnRTtBQTVCakU7QUE2QkMsUUFBTSxtQkFBbUI7QUFDekIsUUFBTSxRQUFRLFFBQVEsTUFBTSxnQkFBZ0I7QUFFNUMsTUFBSSxDQUFDLE9BQU87QUFFWCxXQUFPO0FBQUEsTUFDTixhQUFhLENBQUM7QUFBQSxNQUNkLE1BQU07QUFBQSxJQUNQO0FBQUEsRUFDRDtBQUVBLFFBQU0sbUJBQWtCLFdBQU0sQ0FBQyxNQUFQLFlBQVk7QUFDcEMsUUFBTSxjQUFjLFFBQVEsTUFBTSxNQUFNLENBQUMsRUFBRSxNQUFNO0FBRWpELE1BQUk7QUFDSCxVQUFNLGFBQVMsNEJBQVUsZUFBZTtBQUN4QyxVQUFNLGNBQWMsVUFBVSxPQUFPLFdBQVcsV0FBVyxTQUFTLENBQUM7QUFDckUsV0FBTztBQUFBLE1BQ047QUFBQSxNQUNBLE1BQU07QUFBQSxJQUNQO0FBQUEsRUFDRCxTQUFTLEdBQUc7QUFDWCxZQUFRLE1BQU0saUNBQWlDLENBQUM7QUFFaEQsV0FBTztBQUFBLE1BQ04sYUFBYSxDQUFDO0FBQUEsTUFDZCxNQUFNO0FBQUEsSUFDUDtBQUFBLEVBQ0Q7QUFDRDtBQUtBLGVBQXNCLG1CQUNyQixLQUNBLE1BQzBDO0FBQzFDLE1BQUksQ0FBQyxVQUFVLElBQUksR0FBRztBQUNyQixXQUFPO0FBQUEsRUFDUjtBQUVBLE1BQUk7QUFDSCxVQUFNLFVBQVUsTUFBTSxJQUFJLE1BQU0sS0FBSyxJQUFJO0FBQ3pDLFVBQU0sU0FBUyxvQkFBb0IsT0FBTztBQUMxQyxXQUFPLFNBQVMsT0FBTyxjQUFjO0FBQUEsRUFDdEMsU0FBUyxHQUFHO0FBQ1gsWUFBUSxNQUFNLHFDQUFxQyxLQUFLLElBQUksS0FBSyxDQUFDO0FBQ2xFLFdBQU87QUFBQSxFQUNSO0FBQ0Q7QUF3Q0EsZUFBc0Isc0JBQ3JCLEtBQ0EsTUFDQSxVQUNnQjtBQUNoQixNQUFJLENBQUMsVUFBVSxJQUFJLEdBQUc7QUFDckIsVUFBTSxJQUFJLE1BQU0sUUFBUSxLQUFLLElBQUkscUJBQXFCO0FBQUEsRUFDdkQ7QUFFQSxNQUFJO0FBQ0gsVUFBTSxVQUFVLE1BQU0sSUFBSSxNQUFNLEtBQUssSUFBSTtBQUN6QyxVQUFNLFNBQVMsb0JBQW9CLE9BQU87QUFFMUMsUUFBSSxDQUFDLFFBQVE7QUFDWixZQUFNLElBQUksTUFBTSxzQ0FBc0M7QUFBQSxJQUN2RDtBQUdBLFVBQU0sY0FBYyxFQUFFLEdBQUcsT0FBTyxZQUFZO0FBRzVDLGFBQVMsV0FBVztBQUdwQixVQUFNLHlCQUFxQixnQ0FBYyxXQUFXLEVBQUUsS0FBSztBQUczRCxVQUFNLGFBQWE7QUFBQSxFQUFRLGtCQUFrQjtBQUFBO0FBQUEsRUFBVSxPQUFPLElBQUk7QUFHbEUsVUFBTSxJQUFJLE1BQU0sT0FBTyxNQUFNLFVBQVU7QUFBQSxFQUN4QyxTQUFTLEdBQUc7QUFDWCxZQUFRLE1BQU0sdUNBQXVDLEtBQUssSUFBSSxLQUFLLENBQUM7QUFDcEUsVUFBTTtBQUFBLEVBQ1A7QUFDRDtBQU1BLGVBQXNCLGVBQ3JCLEtBQ0EsTUFDMEM7QUFuSzNDO0FBb0tDLE1BQUksVUFBVSxJQUFJLEdBQUc7QUFDcEIsV0FBTyxNQUFNLG1CQUFtQixLQUFLLElBQUk7QUFBQSxFQUMxQztBQUdBLFFBQU0sUUFBUSxJQUFJLGNBQWMsYUFBYSxJQUFJO0FBQ2pELFVBQU8sb0NBQU8sZ0JBQVAsWUFBc0I7QUFDOUI7OztBRC9KTyxJQUFNLGtCQUFOLE1BQXNCO0FBQUEsRUFPNUIsWUFBWSxLQUFVLFVBQWdDLGdCQUFnQyxnQkFBZ0MsZUFBb0MsWUFBZ0Y7QUFDek8sU0FBSyxNQUFNO0FBQ1gsU0FBSyxXQUFXO0FBQ2hCLFNBQUssaUJBQWlCO0FBQ3RCLFNBQUssaUJBQWlCO0FBQ3RCLFNBQUssZ0JBQWdCO0FBR3JCLDZDQUFZLFVBQVUsQ0FBQyxnQkFBZ0I7QUFDdEMsV0FBSyxlQUFlLFdBQVc7QUFBQSxJQUNoQztBQUFBLEVBQ0Q7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLGVBQWUsVUFBc0M7QUFuQ3REO0FBb0NFLFNBQUssV0FBVztBQUNoQixlQUFLLG1CQUFMLG1CQUFxQixlQUFlO0FBQUEsRUFDckM7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLE1BQU0saUJBQ0wsVUFDQSxjQUNBLFdBQ0EsU0FDZ0I7QUFDaEIsVUFBTSxZQUFZLEtBQUssbUJBQW1CLFdBQVcsUUFBUTtBQUU3RCxRQUFJO0FBQ0gsVUFBSSxVQUFVLFFBQVEsR0FBRztBQUN4QixjQUFNLEtBQUssZUFBZSxVQUFVLGNBQWMsV0FBVyxPQUFPO0FBQUEsTUFDckUsT0FBTztBQUNOLGNBQU0sS0FBSyxjQUFjLFVBQVUsY0FBYyxXQUFXLE9BQU87QUFBQSxNQUNwRTtBQUNBLFVBQUksd0JBQU8sNEJBQTRCLFlBQVksRUFBRTtBQUFBLElBQ3RELFNBQVMsT0FBTztBQUNmLGNBQVEsTUFBTSw4QkFBOEIsS0FBSztBQUNqRCxVQUFJLHdCQUFPLDhCQUE4QixpQkFBaUIsUUFBUSxNQUFNLFVBQVUsT0FBTyxLQUFLLENBQUMsRUFBRTtBQUNqRyxZQUFNO0FBQUEsSUFDUDtBQUFBLEVBQ0Q7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLE1BQWMsY0FDYixNQUNBLGNBQ0EsT0FDQSxTQUNnQjtBQUNoQixVQUFNLEtBQUssSUFBSSxZQUFZLG1CQUFtQixNQUFNLENBQUMsZ0JBQXlDO0FBQzdGLGtCQUFZLFlBQVksSUFBSTtBQUM1QixVQUFJLFdBQVcsS0FBSyxTQUFTLGlCQUFpQjtBQUM3QyxvQkFBWSxLQUFLLFNBQVMsZUFBZSxJQUFJO0FBQUEsTUFDOUM7QUFBQSxJQUNELENBQUM7QUFBQSxFQUNGO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxNQUFjLGVBQ2IsTUFDQSxjQUNBLE9BQ0EsU0FDZ0I7QUFDaEIsVUFBTSxzQkFBc0IsS0FBSyxLQUFLLE1BQU0sQ0FBQyxnQkFBZ0I7QUFDNUQsa0JBQVksWUFBWSxJQUFJO0FBQzVCLFVBQUksV0FBVyxLQUFLLFNBQVMsaUJBQWlCO0FBQzdDLG9CQUFZLEtBQUssU0FBUyxlQUFlLElBQUk7QUFBQSxNQUM5QztBQUFBLElBQ0QsQ0FBQztBQUFBLEVBQ0Y7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTUEsbUJBQW1CLFdBQWtCLFVBQXlCO0FBRTdELFFBQUksS0FBSyxTQUFTLHlEQUEyRDtBQUU1RSxZQUFNLGdCQUFnQixLQUFLLElBQUksWUFBWSxxQkFBcUIsV0FBVyxTQUFTLElBQUk7QUFJeEYsVUFBSSxjQUFjLFdBQVcsSUFBSSxLQUFLLGNBQWMsU0FBUyxJQUFJLEdBQUc7QUFFbkUsZUFBTyxjQUFjLFVBQVUsQ0FBQztBQUFBLE1BQ2pDLFdBQVcsY0FBYyxXQUFXLElBQUksS0FBSyxjQUFjLFNBQVMsSUFBSSxHQUFHO0FBRTFFLGNBQU0sUUFBUSxjQUFjLE1BQU0sbUJBQW1CO0FBQ3JELGVBQU8sU0FBUyxNQUFNLENBQUMsSUFBSSxNQUFNLENBQUMsSUFBSTtBQUFBLE1BQ3ZDLFdBQVcsY0FBYyxXQUFXLElBQUksS0FBSyxjQUFjLFNBQVMsSUFBSSxHQUFHO0FBRTFFLGVBQU87QUFBQSxNQUNSLFdBQVcsY0FBYyxTQUFTLElBQUksR0FBRztBQUV4QyxjQUFNLFFBQVEsY0FBYyxNQUFNLGtCQUFrQjtBQUNwRCxlQUFPLFNBQVMsTUFBTSxDQUFDLElBQUksTUFBTSxDQUFDLElBQUk7QUFBQSxNQUN2QztBQUVBLGFBQU87QUFBQSxJQUNSO0FBRUEsUUFBSTtBQUVKLFlBQVEsS0FBSyxTQUFTLG9CQUFvQjtBQUFBLE1BQ3pDO0FBR0Msb0JBQVksS0FBSyxVQUFVLElBQUk7QUFDL0I7QUFBQSxNQUNEO0FBRUMsb0JBQVksVUFBVTtBQUN0QjtBQUFBLE1BQ0Q7QUFBQSxNQUNBO0FBQ0Msb0JBQVksS0FBSyxnQkFBZ0IsVUFBVSxTQUFTO0FBQ3BEO0FBQUEsSUFDRjtBQUVBLFlBQVEsS0FBSyxTQUFTLG9CQUFvQjtBQUFBLE1BQ3pDO0FBQ0MsZUFBTyxLQUFLLFNBQVM7QUFBQSxNQUN0QjtBQUNDLGVBQU8sT0FBTyxVQUFVLFNBQVMsQ0FBQztBQUFBLE1BQ25DO0FBRUMsZUFBTyxLQUFLLFNBQVMseUJBQXlCO0FBQUEsVUFDN0M7QUFBQSxVQUNBO0FBQUEsUUFDRDtBQUFBLE1BQ0Q7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUNDLGVBQU87QUFBQSxJQUNUO0FBQUEsRUFDRDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS1EsZ0JBQWdCLFVBQWlCLFFBQXVCO0FBektqRTtBQTRLRSxVQUFNLGNBQWUsS0FBSyxJQUFJLE1BQWlFO0FBQy9GLFVBQU0sb0JBQW1CLGdEQUFhLHFCQUFiLFlBQWlDO0FBQzFELFVBQU0sZUFBZSxDQUFDO0FBRXRCLFFBQUksZ0JBQWdCLEtBQUssU0FBUyxrREFBb0Q7QUFFckYsYUFBTyxPQUFPO0FBQUEsSUFDZjtBQUdBLFdBQU8sS0FBSyxlQUFlLGdCQUFnQixVQUFVLE1BQU07QUFBQSxFQUM1RDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsaUJBQ0MsTUFDQSxjQUNVO0FBL0xaO0FBZ01FLFVBQU0sUUFBUSxLQUFLLElBQUksY0FBYyxhQUFhLElBQUk7QUFDdEQsWUFBTyxvQ0FBTyxnQkFBUCxtQkFBcUI7QUFBQSxFQUM3QjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsWUFBWSxNQUFhLGNBQStCO0FBdk16RDtBQXdNRSxVQUFNLFFBQVEsS0FBSyxJQUFJLGNBQWMsYUFBYSxJQUFJO0FBQ3RELGFBQU8sb0NBQU8sZ0JBQVAsbUJBQXFCLG1CQUFrQjtBQUFBLEVBQy9DO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFRQSxNQUFNLG1CQUNMLFVBQ0EsVUFDQSxjQUNBLGFBQ0EsdUJBQ2dCO0FBSWhCLFVBQU0sU0FBUyxNQUFNLEtBQUssZUFBZTtBQUFBLE1BQ3hDO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQTtBQUFBLE1BQ0E7QUFBQTtBQUFBLE1BQ0E7QUFBQTtBQUFBLElBQ0Q7QUFFQSxRQUFJLENBQUMsT0FBTyxXQUFXLENBQUMsT0FBTyxNQUFNO0FBQ3BDLFlBQU0sSUFBSSxNQUFNLE9BQU8sU0FBUyx5QkFBeUI7QUFBQSxJQUMxRDtBQUdBLFVBQU0sS0FBSyxpQkFBaUIsVUFBVSxjQUFjLE9BQU8sTUFBTSxPQUFPLFdBQVc7QUFHbkYsUUFBSSxLQUFLLFNBQVMsa0JBQWtCLGVBQWUsS0FBSyxlQUFlO0FBQ3RFLFlBQU0sZUFBZSxLQUFLLGNBQWMscUJBQXFCLFdBQVc7QUFDeEUsVUFBSSxjQUFjO0FBQ2pCLGNBQU0sVUFBVSxNQUFNLEtBQUssSUFBSSxNQUFNLEtBQUssUUFBUTtBQUNsRCxjQUFNLGlCQUFpQixVQUFVO0FBQ2pDLGNBQU0sS0FBSyxJQUFJLE1BQU0sT0FBTyxVQUFVLGNBQWM7QUFBQSxNQUNyRDtBQUFBLElBQ0Q7QUFBQSxFQUNEO0FBQ0Q7OztBRWhQQSxJQUFBQyxtQkFBa0Q7QUFLM0MsSUFBTSxlQUFOLE1BQW1CO0FBQUEsRUFNekIsWUFDQyxLQUNBLFVBQ0EsZ0JBQ0EsaUJBQ0EsWUFDQztBQUNELFNBQUssTUFBTTtBQUNYLFNBQUssV0FBVztBQUNoQixTQUFLLGlCQUFpQjtBQUN0QixTQUFLLGtCQUFrQjtBQUd2Qiw2Q0FBWSxVQUFVLENBQUMsZ0JBQWdCO0FBQ3RDLFdBQUssZUFBZSxXQUFXO0FBQUEsSUFDaEM7QUFBQSxFQUNEO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxlQUFlLFVBQXNDO0FBQ3BELFNBQUssV0FBVztBQUFBLEVBQ2pCO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU1BLE1BQU0sa0JBQ0wsS0FDQSxRQUNBLE1BQ21CO0FBakRyQjtBQWtERSxRQUFJLENBQUMsS0FBSyxTQUFTLG9CQUFvQixDQUFDLEtBQUssU0FBUyxxQkFBcUI7QUFDMUUsYUFBTztBQUFBLElBQ1I7QUFHQSxVQUFNLFdBQVcsU0FBUztBQUMxQixRQUFJLFlBQVksS0FBSyxtQkFBbUIsUUFBUSxHQUFHO0FBQ2xELGFBQU87QUFBQSxJQUNSO0FBRUEsVUFBTSxTQUFRLFNBQUksa0JBQUosbUJBQW1CO0FBQ2pDLFFBQUksQ0FBQyxTQUFTLE1BQU0sV0FBVyxHQUFHO0FBQ2pDLGFBQU87QUFBQSxJQUNSO0FBR0EsVUFBTSxhQUFxQixDQUFDO0FBQzVCLGFBQVMsSUFBSSxHQUFHLElBQUksTUFBTSxRQUFRLEtBQUs7QUFDdEMsWUFBTSxPQUFPLE1BQU0sS0FBSyxDQUFDO0FBQ3pCLFVBQUksUUFBUSxLQUFLLEtBQUssV0FBVyxRQUFRLEdBQUc7QUFDM0MsbUJBQVcsS0FBSyxJQUFJO0FBQUEsTUFDckI7QUFBQSxJQUNEO0FBRUEsUUFBSSxXQUFXLFdBQVcsR0FBRztBQUM1QixhQUFPO0FBQUEsSUFDUjtBQUdBLFFBQUksZUFBZTtBQUVuQixVQUFNLGFBQWEsS0FBSztBQUN4QixRQUFJLENBQUMsWUFBWTtBQUNoQixVQUFJLHdCQUFPLGdCQUFnQjtBQUMzQixhQUFPO0FBQUEsSUFDUjtBQUdBLGFBQVMsSUFBSSxHQUFHLElBQUksV0FBVyxRQUFRLEtBQUs7QUFDM0MsWUFBTSxZQUFZLFdBQVcsQ0FBQztBQUM5QixVQUFJLENBQUMsVUFBVztBQUVoQixZQUFNLFNBQVMsTUFBTSxLQUFLLGVBQWU7QUFBQSxRQUN4QztBQUFBLFFBQ0E7QUFBQSxRQUNBO0FBQUE7QUFBQSxNQUNEO0FBRUEsVUFBSSxPQUFPLFdBQVcsT0FBTyxVQUFVO0FBRXRDLGVBQU8saUJBQWlCLE9BQU8sUUFBUTtBQUFBLE1BQ3hDO0FBQUEsSUFDRDtBQUVBLFdBQU87QUFBQSxFQUNSO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU1BLE1BQU0sb0JBQW9CLEtBQXVDO0FBL0dsRTtBQWdIRSxRQUFJLENBQUMsS0FBSyxTQUFTLG9CQUFvQixDQUFDLEtBQUssU0FBUyxxQkFBcUI7QUFDMUUsYUFBTztBQUFBLElBQ1I7QUFFQSxVQUFNLFdBQVcsU0FBUztBQUMxQixRQUFJLENBQUMsVUFBVTtBQUNkLGFBQU87QUFBQSxJQUNSO0FBR0EsUUFBSSxDQUFDLEtBQUssbUJBQW1CLFFBQVEsR0FBRztBQUN2QyxhQUFPO0FBQUEsSUFDUjtBQUdBLFFBQUksS0FBSyxTQUFTLFdBQVc7QUFDNUIsY0FBUSxNQUFNLDJDQUEyQztBQUFBLFFBQ3hELGVBQWUsU0FBUztBQUFBLFFBQ3hCLFNBQVMsU0FBUztBQUFBLFFBQ2xCLGNBQWMsS0FBSyxnQkFBZ0IsUUFBUTtBQUFBLE1BQzVDLENBQUM7QUFBQSxJQUNGO0FBRUEsVUFBTSxTQUFRLFNBQUksa0JBQUosbUJBQW1CO0FBQ2pDLFFBQUksQ0FBQyxTQUFTLE1BQU0sV0FBVyxHQUFHO0FBQ2pDLGFBQU87QUFBQSxJQUNSO0FBR0EsUUFBSSxZQUF5QjtBQUM3QixhQUFTLElBQUksR0FBRyxJQUFJLE1BQU0sUUFBUSxLQUFLO0FBQ3RDLFlBQU0sSUFBSSxNQUFNLEtBQUssQ0FBQztBQUN0QixVQUFJLEtBQUssRUFBRSxLQUFLLFdBQVcsUUFBUSxHQUFHO0FBQ3JDLG9CQUFZO0FBQ1o7QUFBQSxNQUNEO0FBQUEsSUFDRDtBQUVBLFFBQUksQ0FBQyxXQUFXO0FBQ2YsYUFBTztBQUFBLElBQ1I7QUFJQSxVQUFNLFlBQVksU0FBUztBQUMzQixRQUFJLENBQUMsYUFBYSxDQUFDLEtBQUssbUJBQW1CLFNBQVMsR0FBRztBQUN0RCxhQUFPO0FBQUEsSUFDUjtBQUVBLFVBQU0sYUFBYSxLQUFLLElBQUksVUFBVSxjQUFjO0FBQ3BELFFBQUksQ0FBQyxZQUFZO0FBQ2hCLGFBQU87QUFBQSxJQUNSO0FBR0EsUUFBSSxlQUFlO0FBQ25CLFFBQUksZ0JBQWdCO0FBQ3BCLFFBQUkseUJBQXlCO0FBRzdCLFVBQU0sZUFBZSxLQUFLLGdCQUFnQixTQUFTO0FBQ25ELFFBQUksQ0FBQyxjQUFjO0FBQ2xCLFVBQUksd0JBQU8sbUNBQW1DO0FBQzlDLGFBQU87QUFBQSxJQUNSO0FBSUEsVUFBTSxTQUFTLE1BQU0sS0FBSyxlQUFlO0FBQUEsTUFDeEM7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBO0FBQUEsTUFDQTtBQUFBO0FBQUEsSUFDRDtBQUVBLFFBQUksT0FBTyxXQUFXLE9BQU8sTUFBTTtBQUVsQyxZQUFNLFlBQVksS0FBSyxnQkFBZ0IsbUJBQW1CLE9BQU8sTUFBTSxVQUFVO0FBR2pGLFlBQU0sS0FBSyxnQkFBZ0I7QUFBQSxRQUMxQjtBQUFBLFFBQ0E7QUFBQSxRQUNBLE9BQU87QUFBQSxRQUNQLE9BQU87QUFBQSxNQUNSO0FBR0EsWUFBTSxJQUFJLFFBQVEsYUFBVyxXQUFXLFNBQVMsR0FBRyxDQUFDO0FBSXJELFlBQU0sYUFBYSxTQUFTO0FBQUEsUUFDM0IseUNBQXlDLFlBQVk7QUFBQSxNQUN0RDtBQUVBLFVBQUksS0FBSyxTQUFTLFdBQVc7QUFDNUIsZ0JBQVEsTUFBTSx3Q0FBd0M7QUFBQSxVQUNyRDtBQUFBLFVBQ0E7QUFBQSxVQUNBLGlCQUFpQixDQUFDLENBQUM7QUFBQSxRQUNwQixDQUFDO0FBQUEsTUFDRjtBQUVBLFlBQU0sVUFBVSx5Q0FBWTtBQUFBLFFBQzNCO0FBQUE7QUFHRCxVQUFJLFNBQVM7QUFDWixZQUFJLEtBQUssU0FBUyxXQUFXO0FBQzVCLGdCQUFNLGVBQWUsbUJBQW1CLG9CQUFvQixtQkFBbUIsc0JBQzVFLFFBQVEsUUFDUixRQUFRLGVBQWUsUUFBUTtBQUNsQyxrQkFBUSxNQUFNLHFEQUFxRDtBQUFBLFlBQ2xFLGFBQWEsUUFBUTtBQUFBLFlBQ3JCO0FBQUEsWUFDQSxVQUFVO0FBQUEsVUFDWCxDQUFDO0FBQUEsUUFDRjtBQUdBLFlBQUksbUJBQW1CLG9CQUFvQixtQkFBbUIscUJBQXFCO0FBRWxGLGtCQUFRLFFBQVE7QUFBQSxRQUNqQixPQUFPO0FBRU4sa0JBQVEsY0FBYztBQUN0QixrQkFBUSxZQUFZO0FBQUEsUUFDckI7QUFHQSxjQUFNLGFBQWEsSUFBSSxNQUFNLFNBQVMsRUFBRSxTQUFTLE1BQU0sWUFBWSxLQUFLLENBQUM7QUFDekUsY0FBTSxjQUFjLElBQUksTUFBTSxVQUFVLEVBQUUsU0FBUyxNQUFNLFlBQVksS0FBSyxDQUFDO0FBQzNFLGNBQU0sWUFBWSxJQUFJLE1BQU0sUUFBUSxFQUFFLFNBQVMsTUFBTSxZQUFZLEtBQUssQ0FBQztBQUV2RSxnQkFBUSxjQUFjLFVBQVU7QUFHaEMsbUJBQVcsTUFBTTtBQUNoQixrQkFBUSxjQUFjLFdBQVc7QUFHakMsY0FBSSxtQkFBbUIsYUFBYTtBQUNuQyxvQkFBUSxNQUFNO0FBQ2QsdUJBQVcsTUFBTTtBQUNoQixzQkFBUSxLQUFLO0FBQ2Isc0JBQVEsY0FBYyxTQUFTO0FBRy9CLHlCQUFXLE1BQU07QUFDaEIsc0JBQU0sT0FBTyxLQUFLLElBQUksVUFBVSxvQkFBb0IsNkJBQVk7QUFDaEUsb0JBQUksNkJBQU0sUUFBUTtBQUNqQix1QkFBSyxPQUFPLE1BQU07QUFBQSxnQkFDbkI7QUFBQSxjQUNELEdBQUcsRUFBRTtBQUFBLFlBQ04sR0FBRyxFQUFFO0FBQUEsVUFDTjtBQUFBLFFBQ0QsR0FBRyxFQUFFO0FBQUEsTUFDTixPQUFPO0FBRU4sY0FBTSxPQUFPLEtBQUssSUFBSSxVQUFVLG9CQUFvQiw2QkFBWTtBQUNoRSxZQUFJLDZCQUFNLFFBQVE7QUFDakIsZUFBSyxPQUFPLE1BQU07QUFBQSxRQUNuQjtBQUFBLE1BQ0Q7QUFBQSxJQUNEO0FBRUEsV0FBTztBQUFBLEVBQ1I7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTVEsbUJBQW1CLFNBQStCO0FBRXpELFVBQU0sYUFBYSxRQUFRLFFBQVEsb0JBQW9CO0FBQ3ZELFFBQUksQ0FBQyxZQUFZO0FBQ2hCLGFBQU87QUFBQSxJQUNSO0FBS0EsV0FDQyxRQUFRLFFBQVEsMEJBQTBCLEtBQzFDLFFBQVEsUUFBUSxzQkFBc0IsS0FDdEMsUUFBUSxRQUFRLHNCQUFzQixLQUN0QyxRQUFRLFFBQVEseUJBQXlCO0FBQUEsS0FFdkMsbUJBQW1CLG9CQUNwQixtQkFBbUIsdUJBQ2xCLG1CQUFtQixrQkFBa0IsUUFBUSxVQUFVLFNBQVMseUJBQXlCLE1BQzFGLGVBQWU7QUFBQSxFQUVsQjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS1EsZ0JBQWdCLFNBQXFDO0FBeFQ5RDtBQXlURSxVQUFNLGFBQWEsUUFBUSxRQUFRLG9CQUFvQjtBQUN2RCxZQUFPLDhDQUFZLGFBQWEseUJBQXpCLFlBQWlEO0FBQUEsRUFDekQ7QUFDRDtBQUVPLElBQU0sY0FBTixNQUFrQjtBQUFBLEVBS3hCLFlBQ0MsS0FDQSxVQUNBLGdCQUNBLFlBQ0M7QUFDRCxTQUFLLE1BQU07QUFDWCxTQUFLLFdBQVc7QUFDaEIsU0FBSyxpQkFBaUI7QUFHdEIsNkNBQVksVUFBVSxDQUFDLGdCQUFnQjtBQUN0QyxXQUFLLGVBQWUsV0FBVztBQUFBLElBQ2hDO0FBQUEsRUFDRDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsZUFBZSxVQUFzQztBQUNwRCxTQUFLLFdBQVc7QUFBQSxFQUNqQjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsTUFBTSxpQkFDTCxLQUNBLFFBQ0EsTUFDbUI7QUFqV3JCO0FBa1dFLFFBQUksQ0FBQyxLQUFLLFNBQVMsb0JBQW9CLENBQUMsS0FBSyxTQUFTLG9CQUFvQjtBQUN6RSxhQUFPO0FBQUEsSUFDUjtBQUVBLFVBQU0sU0FBUSxTQUFJLGlCQUFKLG1CQUFrQjtBQUNoQyxRQUFJLENBQUMsU0FBUyxNQUFNLFdBQVcsR0FBRztBQUNqQyxhQUFPO0FBQUEsSUFDUjtBQUdBLFVBQU0sYUFBcUIsQ0FBQztBQUM1QixhQUFTLElBQUksR0FBRyxJQUFJLE1BQU0sUUFBUSxLQUFLO0FBQ3RDLFlBQU0sSUFBSSxNQUFNLEtBQUssQ0FBQztBQUN0QixVQUFJLEtBQUssRUFBRSxLQUFLLFdBQVcsUUFBUSxHQUFHO0FBQ3JDLG1CQUFXLEtBQUssQ0FBQztBQUFBLE1BQ2xCO0FBQUEsSUFDRDtBQUVBLFFBQUksV0FBVyxXQUFXLEdBQUc7QUFDNUIsYUFBTztBQUFBLElBQ1I7QUFHQSxRQUFJLGVBQWU7QUFFbkIsVUFBTSxhQUFhLEtBQUs7QUFDeEIsUUFBSSxDQUFDLFlBQVk7QUFDaEIsVUFBSSx3QkFBTyxnQkFBZ0I7QUFDM0IsYUFBTztBQUFBLElBQ1I7QUFHQSxhQUFTLElBQUksR0FBRyxJQUFJLFdBQVcsUUFBUSxLQUFLO0FBQzNDLFlBQU0sWUFBWSxXQUFXLENBQUM7QUFDOUIsVUFBSSxDQUFDLFVBQVc7QUFFaEIsWUFBTSxTQUFTLE1BQU0sS0FBSyxlQUFlO0FBQUEsUUFDeEM7QUFBQSxRQUNBO0FBQUEsUUFDQTtBQUFBLE1BQ0Q7QUFFQSxVQUFJLE9BQU8sV0FBVyxPQUFPLFVBQVU7QUFDdEMsZUFBTyxpQkFBaUIsT0FBTyxRQUFRO0FBQUEsTUFDeEM7QUFBQSxJQUNEO0FBRUEsV0FBTztBQUFBLEVBQ1I7QUFDRDs7O0FDOVlBLElBQUFDLG9CQUFtRDtBQUluRCxJQUFNLGlCQUFpQjtBQUVoQixJQUFNLHFCQUFOLE1BQXlCO0FBQUEsRUFJL0IsWUFBWSxLQUFVLFVBQWdDLFlBQWdGO0FBQ3JJLFNBQUssTUFBTTtBQUNYLFNBQUssV0FBVztBQUdoQiw2Q0FBWSxVQUFVLENBQUMsZ0JBQWdCO0FBQ3RDLFdBQUssZUFBZSxXQUFXO0FBQUEsSUFDaEM7QUFBQSxFQUNEO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxlQUFlLFVBQXNDO0FBQ3BELFNBQUssV0FBVztBQUFBLEVBQ2pCO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxNQUFNLE9BQU8sT0FBZSxVQUEwQixPQUFlLEdBQTJCO0FBQy9GLFVBQU0saUJBQWlCLDhCQUFZLEtBQUssU0FBUztBQUVqRCxZQUFRLGdCQUFnQjtBQUFBLE1BQ3ZCO0FBQ0MsZUFBTyxNQUFNLEtBQUssZUFBZSxPQUFPLElBQUk7QUFBQSxNQUM3QztBQUNDLGVBQU8sTUFBTSxLQUFLLGFBQWEsT0FBTyxJQUFJO0FBQUEsTUFDM0M7QUFDQyxlQUFPLE1BQU0sS0FBSyxjQUFjLE9BQU8sSUFBSTtBQUFBLE1BQzVDO0FBQ0MsY0FBTSxJQUFJLE1BQU0seUJBQXlCLGNBQWMsRUFBRTtBQUFBLElBQzNEO0FBQUEsRUFDRDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsTUFBYyxlQUFlLE9BQWUsTUFBc0M7QUFyRG5GO0FBc0RFLFFBQUksV0FBVyxLQUFLLFNBQVMsdUJBQXVCO0FBRXBELFFBQUksQ0FBQyxTQUFTLFNBQVMsR0FBRyxHQUFHO0FBQzVCLGtCQUFZO0FBQUEsSUFDYjtBQUNBLFVBQU0sY0FBYyxLQUFLLGVBQWUsS0FBSyxTQUFTLGtCQUFrQjtBQUd4RSxVQUFNLE1BQU0sSUFBSSxJQUFJLGtCQUFrQixRQUFRO0FBQzlDLFFBQUksYUFBYSxJQUFJLFNBQVMsS0FBSztBQUNuQyxRQUFJLGFBQWEsSUFBSSxRQUFRLE9BQU8sSUFBSSxDQUFDO0FBQ3pDLFFBQUksYUFBYSxJQUFJLFlBQVksSUFBSTtBQUVyQyxRQUFJLGFBQWE7QUFDaEIsVUFBSSxhQUFhLElBQUksZUFBZSxXQUFXO0FBQUEsSUFDaEQ7QUFFQSxVQUFNLFdBQVcsVUFBTSw4QkFBVyxFQUFFLEtBQUssSUFBSSxTQUFTLEVBQUUsQ0FBQztBQUN6RCxRQUFJLFNBQVMsVUFBVSxLQUFLO0FBQzNCLGNBQVEsTUFBTSx1QkFBdUIsU0FBUyxRQUFRLFNBQVMsSUFBSTtBQUNuRSxZQUFNLElBQUksTUFBTSwyQkFBMkIsU0FBUyxNQUFNLE1BQU0sU0FBUyxJQUFJLEVBQUU7QUFBQSxJQUNoRjtBQUVBLFVBQU0sT0FBTyxTQUFTO0FBQ3RCLFFBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxTQUFTO0FBQzNCLGNBQVEsTUFBTSw4QkFBOEIsSUFBSTtBQUNoRCxZQUFNLElBQUksTUFBTSxvQ0FBb0M7QUFBQSxJQUNyRDtBQUVBLFVBQU0sV0FBMkIsVUFBSyxZQUFMLFlBQWdCLENBQUM7QUFFbEQsV0FBTyxRQUFRLElBQUksQ0FBQyxVQUFVLEtBQUssaUJBQWlCLEtBQUssQ0FBQztBQUFBLEVBQzNEO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLUSxrQkFBaUM7QUFFeEMsWUFBSSxxQ0FBa0IsUUFBUSxLQUFLLEtBQUssU0FBUyxzQkFBc0I7QUFFdEUsWUFBTSxnQkFBaUIsS0FBSyxJQUFnRjtBQUM1RyxVQUFJLGVBQWU7QUFDbEIsY0FBTSxTQUFTLGNBQWMsVUFBVSxLQUFLLFNBQVMsb0JBQW9CO0FBQ3pFLFlBQUksUUFBUTtBQUNYLGlCQUFPO0FBQUEsUUFDUjtBQUFBLE1BQ0Q7QUFBQSxJQUNEO0FBRUEsV0FBTyxLQUFLLFNBQVMsZ0JBQWdCO0FBQUEsRUFDdEM7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtRLG1CQUFrQztBQUV6QyxZQUFJLHFDQUFrQixRQUFRLEtBQUssS0FBSyxTQUFTLHVCQUF1QjtBQUV2RSxZQUFNLGdCQUFpQixLQUFLLElBQWdGO0FBQzVHLFVBQUksZUFBZTtBQUNsQixjQUFNLFNBQVMsY0FBYyxVQUFVLEtBQUssU0FBUyxxQkFBcUI7QUFDMUUsWUFBSSxRQUFRO0FBQ1gsaUJBQU87QUFBQSxRQUNSO0FBQUEsTUFDRDtBQUFBLElBQ0Q7QUFFQSxXQUFPLEtBQUssU0FBUyxpQkFBaUI7QUFBQSxFQUN2QztBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsTUFBYyxhQUFhLE9BQWUsTUFBc0M7QUFqSWpGO0FBa0lFLFVBQU0sU0FBUyxLQUFLLGdCQUFnQjtBQUNwQyxRQUFJLENBQUMsUUFBUTtBQUNaLFlBQU0sZUFBVyxxQ0FBa0IsUUFBUSxJQUN4Qyw4SUFDQTtBQUNILFlBQU0sSUFBSSxNQUFNLFFBQVE7QUFBQSxJQUN6QjtBQUVBLFVBQU0sY0FBYyxLQUFLLGVBQWUsS0FBSyxTQUFTLGtCQUFrQjtBQUV4RSxVQUFNLFNBQVMsSUFBSSxnQkFBZ0I7QUFBQSxNQUNsQztBQUFBLE1BQ0EsTUFBTSxPQUFPLElBQUk7QUFBQSxNQUNqQixVQUFVO0FBQUEsSUFDWCxDQUFDO0FBRUQsUUFBSSxhQUFhO0FBQ2hCLGFBQU8sSUFBSSxlQUFlLFdBQVc7QUFBQSxJQUN0QztBQUVBLFVBQU0sTUFBTSxvQ0FBb0MsT0FBTyxTQUFTLENBQUM7QUFFakUsVUFBTSxXQUFXLFVBQU0sOEJBQVc7QUFBQSxNQUNqQztBQUFBLE1BQ0EsU0FBUztBQUFBLFFBQ1IsZUFBZTtBQUFBLE1BQ2hCO0FBQUEsSUFDRCxDQUFDO0FBRUQsUUFBSSxTQUFTLFVBQVUsS0FBSztBQUMzQixZQUFNLElBQUksTUFBTSx5QkFBeUIsU0FBUyxNQUFNLEVBQUU7QUFBQSxJQUMzRDtBQUVBLFVBQU0sT0FBTyxTQUFTO0FBQ3RCLFVBQU0sVUFBd0IsVUFBSyxXQUFMLFlBQWUsQ0FBQztBQUU5QyxXQUFPLE9BQU8sSUFBSSxDQUFDLFVBQVUsS0FBSyxlQUFlLEtBQUssQ0FBQztBQUFBLEVBQ3hEO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxNQUFjLGNBQWMsT0FBZSxNQUFzQztBQTVLbEY7QUE2S0UsVUFBTSxTQUFTLEtBQUssaUJBQWlCO0FBQ3JDLFFBQUksQ0FBQyxRQUFRO0FBQ1osWUFBTSxlQUFXLHFDQUFrQixRQUFRLElBQ3hDLCtJQUNBO0FBQ0gsWUFBTSxJQUFJLE1BQU0sUUFBUTtBQUFBLElBQ3pCO0FBRUEsVUFBTSxjQUFjLEtBQUssc0JBQXNCLEtBQUssU0FBUyxrQkFBa0I7QUFFL0UsVUFBTSxTQUFTLElBQUksZ0JBQWdCO0FBQUEsTUFDbEMsS0FBSztBQUFBLE1BQ0wsR0FBRztBQUFBLE1BQ0gsTUFBTSxPQUFPLElBQUk7QUFBQSxNQUNqQixVQUFVO0FBQUEsTUFDVixZQUFZO0FBQUEsSUFDYixDQUFDO0FBRUQsUUFBSSxhQUFhO0FBQ2hCLGFBQU8sSUFBSSxlQUFlLFdBQVc7QUFBQSxJQUN0QztBQUVBLFVBQU0sTUFBTSw0QkFBNEIsT0FBTyxTQUFTLENBQUM7QUFFekQsVUFBTSxXQUFXLFVBQU0sOEJBQVcsRUFBRSxJQUFJLENBQUM7QUFDekMsUUFBSSxTQUFTLFVBQVUsS0FBSztBQUMzQixZQUFNLElBQUksTUFBTSwwQkFBMEIsU0FBUyxNQUFNLEVBQUU7QUFBQSxJQUM1RDtBQUVBLFVBQU0sT0FBTyxTQUFTO0FBQ3RCLFVBQU0sUUFBcUIsVUFBSyxTQUFMLFlBQWEsQ0FBQztBQUV6QyxXQUFPLEtBQUssSUFBSSxDQUFDLFFBQVEsS0FBSyxjQUFjLEdBQUcsQ0FBQztBQUFBLEVBQ2pEO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxlQUFlLE9BQW9CLE1BQTBCO0FBQzVELFVBQU0sYUFBYSxzQkFBUSxLQUFLLFNBQVM7QUFDekMsWUFBUSxZQUFZO0FBQUEsTUFDbkI7QUFDQyxlQUFPLE1BQU07QUFBQSxNQUNkO0FBQ0MsZUFBTyxNQUFNO0FBQUEsTUFDZDtBQUNDLGVBQU8sTUFBTTtBQUFBLE1BQ2Q7QUFDQyxlQUFPLE1BQU07QUFBQSxNQUNkO0FBQ0MsZUFBTyxNQUFNO0FBQUEsSUFDZjtBQUFBLEVBQ0Q7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLE1BQU0sY0FBYyxPQUEwQztBQUM3RCxVQUFNLE1BQU0sS0FBSyxlQUFlLEtBQUs7QUFDckMsVUFBTSxXQUFXLFVBQU0sOEJBQVcsRUFBRSxJQUFJLENBQUM7QUFFekMsUUFBSSxTQUFTLFVBQVUsS0FBSztBQUMzQixZQUFNLElBQUksTUFBTSw2QkFBNkIsU0FBUyxNQUFNLEVBQUU7QUFBQSxJQUMvRDtBQUVBLFdBQU8sU0FBUztBQUFBLEVBQ2pCO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxxQkFBcUIsT0FBNEI7QUFDaEQsUUFBSSxDQUFDLEtBQUssU0FBUyxnQkFBZ0I7QUFDbEMsYUFBTztBQUFBLElBQ1I7QUFFQSxVQUFNLFdBQVcsS0FBSyxTQUFTLGtCQUFrQixNQUFNLFVBQ3BELGNBQWMsTUFBTSxPQUFPLFNBQzNCO0FBRUgsUUFBSSxXQUFXO0FBQ2YsWUFBUSxNQUFNLFVBQVU7QUFBQSxNQUN2QjtBQUNDLFlBQUksTUFBTSxVQUFVLE1BQU0sV0FBVztBQUNwQyxnQkFBTSxNQUFNO0FBQ1oscUJBQVc7QUFBQSxHQUFNLFFBQVEsYUFBYSxNQUFNLE1BQU0sS0FBSyxNQUFNLFNBQVMseUNBQXlDLEdBQUc7QUFBQTtBQUFBLFFBQ25IO0FBQ0E7QUFBQSxNQUNEO0FBQ0MsWUFBSSxNQUFNLFVBQVUsTUFBTSxXQUFXO0FBQ3BDLHFCQUFXO0FBQUEsR0FBTSxRQUFRLGFBQWEsTUFBTSxNQUFNLEtBQUssTUFBTSxTQUFTO0FBQUE7QUFBQSxRQUN2RTtBQUNBO0FBQUEsTUFDRDtBQUNDLFlBQUksTUFBTSxVQUFVLE1BQU0sV0FBVztBQUNwQyxxQkFBVztBQUFBLEdBQU0sUUFBUSxhQUFhLE1BQU0sTUFBTSxLQUFLLE1BQU0sU0FBUztBQUFBO0FBQUEsUUFDdkU7QUFDQTtBQUFBLElBQ0Y7QUFFQSxXQUFPO0FBQUEsRUFDUjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS1EsZUFBZSxhQUE4QztBQUNwRSxZQUFRLGFBQWE7QUFBQSxNQUNwQjtBQUNDLGVBQU87QUFBQSxNQUNSO0FBQ0MsZUFBTztBQUFBLE1BQ1I7QUFDQyxlQUFPO0FBQUEsTUFDUjtBQUNDLGVBQU87QUFBQSxJQUNUO0FBQUEsRUFDRDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS1Esc0JBQXNCLGFBQThDO0FBQzNFLFlBQVEsYUFBYTtBQUFBLE1BQ3BCO0FBQ0MsZUFBTztBQUFBLE1BQ1I7QUFDQyxlQUFPO0FBQUEsTUFDUjtBQUNDLGVBQU87QUFBQSxJQUNUO0FBQUEsRUFDRDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS1EsaUJBQWlCLE9BQW1DO0FBclQ3RDtBQXNURSxXQUFPO0FBQUEsTUFDTixJQUFJLE1BQU07QUFBQSxNQUNWO0FBQUEsTUFDQSxjQUFjLE1BQU0sS0FBSztBQUFBLE1BQ3pCLFlBQVksTUFBTSxLQUFLO0FBQUEsTUFDdkIsU0FBUyxNQUFNLEtBQUs7QUFBQSxNQUNwQixhQUFhLE1BQU0sTUFBTSxxQkFBcUIsTUFBTSxNQUFNO0FBQUEsTUFDMUQsT0FBTyxNQUFNO0FBQUEsTUFDYixRQUFRLE1BQU07QUFBQSxNQUNkLGNBQWEsaUJBQU0sZ0JBQU4sWUFBcUIsTUFBTSxvQkFBM0IsWUFBOEM7QUFBQSxNQUMzRCxRQUFRLE1BQU0sS0FBSztBQUFBLE1BQ25CLFdBQVcsTUFBTSxLQUFLLE1BQU07QUFBQSxNQUM1QixTQUFTLE1BQU0sTUFBTTtBQUFBLElBQ3RCO0FBQUEsRUFDRDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS1EsZUFBZSxPQUFpQztBQXpVekQ7QUEwVUUsV0FBTztBQUFBLE1BQ04sSUFBSSxPQUFPLE1BQU0sRUFBRTtBQUFBLE1BQ25CO0FBQUEsTUFDQSxjQUFjLE1BQU0sSUFBSTtBQUFBLE1BQ3hCLFlBQVksTUFBTSxJQUFJO0FBQUEsTUFDdEIsU0FBUyxNQUFNLElBQUk7QUFBQSxNQUNuQixhQUFhLE1BQU0sSUFBSTtBQUFBLE1BQ3ZCLE9BQU8sTUFBTTtBQUFBLE1BQ2IsUUFBUSxNQUFNO0FBQUEsTUFDZCxjQUFhLFdBQU0sUUFBTixZQUFhO0FBQUEsTUFDMUIsUUFBUSxNQUFNO0FBQUEsTUFDZCxXQUFXLE1BQU07QUFBQSxNQUNqQixTQUFTLE1BQU07QUFBQSxJQUNoQjtBQUFBLEVBQ0Q7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtRLGNBQWMsS0FBOEI7QUFDbkQsV0FBTztBQUFBLE1BQ04sSUFBSSxPQUFPLElBQUksRUFBRTtBQUFBLE1BQ2pCO0FBQUEsTUFDQSxjQUFjLElBQUk7QUFBQSxNQUNsQixZQUFZLElBQUk7QUFBQSxNQUNoQixTQUFTLElBQUk7QUFBQSxNQUNiLGFBQWEsSUFBSTtBQUFBLE1BQ2pCLE9BQU8sSUFBSTtBQUFBLE1BQ1gsUUFBUSxJQUFJO0FBQUEsTUFDWixhQUFhLElBQUk7QUFBQSxNQUNqQixRQUFRLElBQUk7QUFBQSxNQUNaLFdBQVcsNkJBQTZCLElBQUksSUFBSSxJQUFJLElBQUksT0FBTztBQUFBLE1BQy9ELFNBQVMsSUFBSTtBQUFBLElBQ2Q7QUFBQSxFQUNEO0FBQ0Q7OztBQ3hXQSxJQUFBQyxvQkFBdUM7QUFRdkMsSUFBTSx1QkFBdUI7QUFDN0IsSUFBTSxtQkFBbUI7QUFFbEIsSUFBTSx5QkFBTixNQUE2QjtBQUFBLEVBTW5DLFlBQVksS0FBVSxVQUFnQyxnQkFBZ0MsZ0JBQWdDLFlBQWdGO0FBQ3JNLFNBQUssTUFBTTtBQUNYLFNBQUssV0FBVztBQUNoQixTQUFLLGlCQUFpQjtBQUN0QixTQUFLLGlCQUFpQjtBQUd0Qiw2Q0FBWSxVQUFVLENBQUMsZ0JBQWdCO0FBQ3RDLFdBQUssZUFBZSxXQUFXO0FBQUEsSUFDaEM7QUFBQSxFQUNEO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxlQUFlLFVBQXNDO0FBckN0RDtBQXNDRSxTQUFLLFdBQVc7QUFDaEIsZUFBSyxtQkFBTCxtQkFBcUIsZUFBZTtBQUFBLEVBQ3JDO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBT0EsTUFBTSxZQUFZLE1BQWEsZUFBd0IsT0FBd0I7QUFDOUUsUUFBSSxDQUFDLGVBQWUsSUFBSSxHQUFHO0FBQzFCLGFBQU87QUFBQSxJQUNSO0FBRUEsVUFBTSxVQUFVLE1BQU0sS0FBSyxJQUFJLE1BQU0sS0FBSyxJQUFJO0FBQzlDLFVBQU0sRUFBRSxZQUFZLE1BQU0sSUFBSSxNQUFNLEtBQUssZUFBZSxTQUFTLE1BQU0sWUFBWTtBQUVuRixRQUFJLFFBQVEsR0FBRztBQUNkLFlBQU0sS0FBSyxJQUFJLE1BQU0sT0FBTyxNQUFNLFVBQVU7QUFBQSxJQUM3QztBQUVBLFdBQU87QUFBQSxFQUNSO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxNQUFjLGVBQ2IsU0FDQSxZQUNBLGVBQXdCLE9BQ3lCO0FBQ2pELFFBQUksYUFBYTtBQUNqQixRQUFJLFFBQVE7QUFHWixVQUFNLGlCQUFpQixNQUFNLEtBQUssbUJBQW1CLFNBQVMsVUFBVTtBQUV4RSxlQUFXLFNBQVMsZ0JBQWdCO0FBQ25DLFVBQUk7QUFJSCxZQUFJLGdCQUFnQixDQUFDLEtBQUssU0FBUyxZQUFZO0FBRTlDO0FBQUEsUUFDRDtBQUdBLGNBQU0sV0FBVyxNQUFNLEtBQUssZ0JBQWdCLE1BQU0sS0FBSyxVQUFVO0FBQ2pFLFlBQUksQ0FBQyxVQUFVO0FBQ2Q7QUFBQSxRQUNEO0FBRUEsY0FBTSxXQUFXLEtBQUssSUFBSSxNQUFNLHNCQUFzQixRQUFRO0FBQzlELFlBQUksRUFBRSxvQkFBb0IsMEJBQVE7QUFDakM7QUFBQSxRQUNEO0FBR0EsWUFBSSxZQUFtQjtBQUd2QixjQUFNLGdCQUFnQixNQUFNLE1BQ3pCLEtBQUssZUFBZSxpQkFBaUIsTUFBTSxHQUFHLElBQzlDLFNBQVM7QUFJWixjQUFNLFNBQVMsTUFBTSxLQUFLLGVBQWU7QUFBQSxVQUN4QztBQUFBLFVBQ0E7QUFBQSxVQUNBO0FBQUEsUUFDRDtBQUVBLFlBQUksVUFBVSxPQUFPLE1BQU07QUFDMUIsc0JBQVksT0FBTztBQUFBLFFBQ3BCLE9BQU87QUFFTixnQkFBTSxLQUFLLElBQUksWUFBWSxVQUFVLFFBQVE7QUFDN0M7QUFBQSxRQUNEO0FBSUEscUJBQWEsV0FBVyxRQUFRLE1BQU0sV0FBVyxNQUFNLFlBQVksVUFBVSxJQUFJLENBQUM7QUFDbEY7QUFBQSxNQUNELFNBQVMsT0FBTztBQUNmLGdCQUFRLE1BQU0sNEJBQTRCLE1BQU0sR0FBRyxJQUFJLEtBQUs7QUFBQSxNQUM3RDtBQUFBLElBQ0Q7QUFFQSxXQUFPLEVBQUUsWUFBWSxNQUFNO0FBQUEsRUFDNUI7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtRLGtCQUFrQixTQUFpQixVQUEyQjtBQUVyRSxVQUFNLHVCQUF1QjtBQUM3QixRQUFJO0FBQ0osWUFBUSxRQUFRLHFCQUFxQixLQUFLLE9BQU8sT0FBTyxNQUFNO0FBQzdELFlBQU0sUUFBUSxNQUFNO0FBQ3BCLFlBQU0sTUFBTSxRQUFRLE1BQU0sQ0FBQyxFQUFFO0FBQzdCLFVBQUksWUFBWSxTQUFTLFdBQVcsS0FBSztBQUN4QyxlQUFPO0FBQUEsTUFDUjtBQUFBLElBQ0Q7QUFLQSxVQUFNLGtCQUE2QixNQUFNLEtBQUssRUFBRSxRQUFRLFFBQVEsT0FBTyxHQUFHLE1BQU0sS0FBSztBQUNyRixVQUFNLGNBQWM7QUFDcEIsWUFBUSxRQUFRLFlBQVksS0FBSyxPQUFPLE9BQU8sTUFBTTtBQUNwRCxlQUFTLElBQUksTUFBTSxPQUFPLElBQUksTUFBTSxRQUFRLE1BQU0sQ0FBQyxFQUFFLFFBQVEsS0FBSztBQUNqRSx3QkFBZ0IsQ0FBQyxJQUFJO0FBQUEsTUFDdEI7QUFBQSxJQUNEO0FBR0EsVUFBTSxrQkFBa0I7QUFDeEIsWUFBUSxRQUFRLGdCQUFnQixLQUFLLE9BQU8sT0FBTyxNQUFNO0FBRXhELFVBQUksZ0JBQWdCLE1BQU0sS0FBSyxHQUFHO0FBQ2pDO0FBQUEsTUFDRDtBQUNBLFlBQU0sUUFBUSxNQUFNO0FBQ3BCLFlBQU0sTUFBTSxRQUFRLE1BQU0sQ0FBQyxFQUFFO0FBQzdCLFVBQUksWUFBWSxTQUFTLFdBQVcsS0FBSztBQUN4QyxlQUFPO0FBQUEsTUFDUjtBQUFBLElBQ0Q7QUFFQSxXQUFPO0FBQUEsRUFDUjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFNQSxNQUFjLG1CQUFtQixTQUFpQixZQUFrRDtBQXBMckc7QUFxTEUsVUFBTSxtQkFLRCxDQUFDO0FBR04sUUFBSTtBQUNKLFVBQU0sVUFBVSxJQUFJLE9BQU8scUJBQXFCLFFBQVEsR0FBRztBQUMzRCxZQUFRLFFBQVEsUUFBUSxLQUFLLE9BQU8sT0FBTyxNQUFNO0FBQ2hELFlBQU0sYUFBYSxNQUFNO0FBRXpCLFVBQUksS0FBSyxrQkFBa0IsU0FBUyxVQUFVLEdBQUc7QUFDaEQ7QUFBQSxNQUNEO0FBRUEsWUFBTSxZQUFZLE1BQU0sQ0FBQztBQUN6QixZQUFNLE9BQU0sV0FBTSxDQUFDLE1BQVAsWUFBWTtBQUN4QixZQUFNLE1BQU0sTUFBTSxDQUFDO0FBRW5CLFVBQUksT0FBTyxLQUFLLGNBQWMsR0FBRyxLQUFLLEtBQUssV0FBVyxHQUFHLEdBQUc7QUFDM0QsY0FBTSxnQkFBZ0I7QUFDdEIseUJBQWlCLEtBQUs7QUFBQSxVQUNyQjtBQUFBLFVBQ0E7QUFBQSxVQUNBO0FBQUEsVUFDQSxhQUFhLENBQUMsY0FBc0I7QUFFbkMsa0JBQU0sWUFBWSxLQUFLLElBQUksTUFBTSxzQkFBc0IsU0FBUztBQUNoRSxnQkFBSSxxQkFBcUIseUJBQU87QUFDL0Isb0JBQU0sT0FBTyxLQUFLLGVBQWUscUJBQXFCLFdBQVcsY0FBYyxJQUFJO0FBRW5GLGtCQUFJLE9BQU8sS0FBSyxXQUFXLElBQUksS0FBSyxLQUFLLFNBQVMsSUFBSSxHQUFHO0FBQ3hELHVCQUFPLEtBQUssUUFBUSxNQUFNLElBQUksR0FBRyxJQUFJO0FBQUEsY0FDdEM7QUFFQSxrQkFBSSxLQUFLLFdBQVcsSUFBSSxLQUFLLEtBQUssU0FBUyxJQUFJLEdBQUc7QUFFakQsc0JBQU0sWUFBWSxLQUFLLE1BQU0sZUFBZTtBQUM1QyxvQkFBSSxXQUFXO0FBQ2QseUJBQU8sS0FBSyxHQUFHLEtBQUssVUFBVSxDQUFDLENBQUM7QUFBQSxnQkFDakM7QUFDQSx1QkFBTyxLQUFLLEdBQUcsS0FBSyxVQUFVLFNBQVMsQ0FBQztBQUFBLGNBQ3pDO0FBQ0EscUJBQU87QUFBQSxZQUNSO0FBRUEsa0JBQU0sWUFBWSxLQUFLLElBQUksTUFBTSxzQkFBc0IsU0FBUztBQUNoRSxnQkFBSSxxQkFBcUIseUJBQU87QUFDL0Isb0JBQU0sZUFBZSxLQUFLLGVBQWUsZ0JBQWdCLGVBQWUsU0FBUztBQUNqRixxQkFBTyxLQUFLLEdBQUcsS0FBSyxVQUFVLFlBQVksQ0FBQztBQUFBLFlBQzVDO0FBQ0EsbUJBQU8sS0FBSyxHQUFHLEtBQUssVUFBVSxTQUFTLENBQUM7QUFBQSxVQUN6QztBQUFBLFFBQ0QsQ0FBQztBQUFBLE1BQ0Y7QUFBQSxJQUNEO0FBR0EsVUFBTSxZQUFZLElBQUksT0FBTyxpQkFBaUIsUUFBUSxHQUFHO0FBQ3pELFlBQVEsUUFBUSxVQUFVLEtBQUssT0FBTyxPQUFPLE1BQU07QUFDbEQsWUFBTSxhQUFhLE1BQU07QUFFekIsVUFBSSxLQUFLLGtCQUFrQixTQUFTLFVBQVUsR0FBRztBQUNoRDtBQUFBLE1BQ0Q7QUFDQSxZQUFNLFlBQVksTUFBTSxDQUFDO0FBQ3pCLFlBQU0sTUFBTSxNQUFNLENBQUM7QUFFbkIsVUFBSSxPQUFPLEtBQUssY0FBYyxHQUFHLEtBQUssS0FBSyxXQUFXLEdBQUcsR0FBRztBQUMzRCx5QkFBaUIsS0FBSztBQUFBLFVBQ3JCO0FBQUEsVUFDQTtBQUFBLFVBQ0EsYUFBYSxDQUFDLGNBQXNCLE9BQU8sVUFBVSxTQUFTLENBQUM7QUFBQSxRQUNoRSxDQUFDO0FBQUEsTUFDRjtBQUFBLElBQ0Q7QUFHQSxVQUFNLGtCQUF3QyxDQUFDO0FBQy9DLGVBQVcsYUFBYSxrQkFBa0I7QUFDekMsWUFBTSxVQUFVLE1BQU0sS0FBSyxlQUFlLFVBQVUsR0FBRztBQUN2RCxVQUFJLFNBQVM7QUFDWix3QkFBZ0IsS0FBSyxTQUFTO0FBQUEsTUFDL0I7QUFBQSxJQUNEO0FBRUEsV0FBTztBQUFBLEVBQ1I7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtRLGNBQWMsS0FBc0I7QUFDM0MsUUFBSTtBQUNILFlBQU0sU0FBUyxJQUFJLElBQUksR0FBRztBQUMxQixhQUFPLENBQUMsU0FBUyxRQUFRLEVBQUUsU0FBUyxPQUFPLFFBQVE7QUFBQSxJQUNwRCxTQUFRO0FBQ1AsYUFBTztBQUFBLElBQ1I7QUFBQSxFQUNEO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBT1EsV0FBVyxLQUFzQjtBQUN4QyxRQUFJO0FBQ0gsWUFBTSxTQUFTLElBQUksSUFBSSxHQUFHO0FBQzFCLFlBQU0sV0FBVyxPQUFPLFNBQVMsWUFBWTtBQUc3QyxZQUFNLGtCQUFrQjtBQUFBLFFBQ3ZCO0FBQUEsUUFDQTtBQUFBLFFBQ0E7QUFBQSxRQUNBO0FBQUEsUUFDQTtBQUFBLFFBQ0E7QUFBQSxRQUNBO0FBQUEsUUFDQTtBQUFBLFFBQ0E7QUFBQSxRQUNBO0FBQUEsUUFDQTtBQUFBLFFBQ0E7QUFBQSxNQUNEO0FBRUEsVUFBSSxnQkFBZ0IsS0FBSyxZQUFVLGFBQWEsVUFBVSxTQUFTLFNBQVMsTUFBTSxNQUFNLENBQUMsR0FBRztBQUMzRixlQUFPO0FBQUEsTUFDUjtBQUdBLGFBQU87QUFBQSxJQUNSLFNBQVE7QUFDUCxhQUFPO0FBQUEsSUFDUjtBQUFBLEVBQ0Q7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTUEsTUFBYyxlQUFlLEtBQStCO0FBclU3RDtBQXNVRSxRQUFJO0FBQ0gsWUFBTSxXQUFXLFVBQU0sOEJBQVcsRUFBRSxLQUFLLFFBQVEsT0FBTyxDQUFDO0FBQ3pELFlBQU0sZUFBYyxvQkFBUyxRQUFRLGNBQWMsTUFBL0IsbUJBQWtDLGtCQUFsQyxZQUFtRDtBQUd2RSxhQUFPLFlBQVksV0FBVyxRQUFRO0FBQUEsSUFDdkMsU0FBUTtBQUVQLGFBQU87QUFBQSxJQUNSO0FBQUEsRUFDRDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFNQSxNQUFjLGdCQUFnQixLQUFhLFlBQTJDO0FBdFZ2RjtBQXVWRSxRQUFJO0FBQ0gsWUFBTSxXQUFXLFVBQU0sOEJBQVcsRUFBRSxJQUFJLENBQUM7QUFDekMsVUFBSSxTQUFTLFVBQVUsS0FBSztBQUMzQixjQUFNLElBQUksTUFBTSxRQUFRLFNBQVMsTUFBTSxFQUFFO0FBQUEsTUFDMUM7QUFFQSxZQUFNLGVBQWMsY0FBUyxRQUFRLGNBQWMsTUFBL0IsWUFBb0M7QUFJeEQsVUFBSSxDQUFDLFlBQVksWUFBWSxFQUFFLFdBQVcsUUFBUSxHQUFHO0FBQ3BELGdCQUFRLEtBQUssWUFBWSxHQUFHLHFCQUFxQixXQUFXLGdCQUFnQjtBQUM1RSxlQUFPO0FBQUEsTUFDUjtBQUVBLFlBQU0sWUFBWSxLQUFLLGVBQWUseUJBQXlCLFdBQVc7QUFDMUUsWUFBTSxjQUFjLFNBQVM7QUFHN0IsWUFBTSxVQUFVLElBQUksSUFBSSxHQUFHLEVBQUU7QUFDN0IsWUFBTSxlQUFjLG1CQUFRLE1BQU0sR0FBRyxFQUFFLElBQUksTUFBdkIsbUJBQTBCLE1BQU0sS0FBSyxPQUFyQyxZQUEyQztBQUMvRCxZQUFNLFdBQVcsS0FBSyxlQUFlLGlCQUFpQixXQUFXO0FBRWpFLFlBQU0sV0FBVyxNQUFNLEtBQUssZUFBZSxpQkFBaUIsVUFBVSxXQUFXLFVBQVU7QUFDM0YsWUFBTSxLQUFLLGVBQWUsU0FBUyxhQUFhLFFBQVE7QUFHeEQsYUFBTztBQUFBLElBQ1IsU0FBUyxPQUFPO0FBQ2YsY0FBUSxNQUFNLHNCQUFzQixHQUFHLEtBQUssS0FBSztBQUNqRCxhQUFPO0FBQUEsSUFDUjtBQUFBLEVBQ0Q7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLE1BQU0sa0JBQW1DO0FBQ3hDLFVBQU0sUUFBUSxLQUFLLElBQUksTUFBTSxpQkFBaUI7QUFDOUMsUUFBSSxhQUFhO0FBRWpCLGVBQVcsUUFBUSxPQUFPO0FBQ3pCLFVBQUksS0FBSyxTQUFTLG9CQUFvQixTQUFTLEtBQUssU0FBUyxHQUFHO0FBQy9ELGNBQU0sUUFBUSxNQUFNLEtBQUssWUFBWSxJQUFJO0FBQ3pDLHNCQUFjO0FBQUEsTUFDZjtBQUFBLElBQ0Q7QUFFQSxXQUFPO0FBQUEsRUFDUjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0Esc0JBQ0MsWUFDQSxZQUNPO0FBQUEsRUFHUjtBQUNEOzs7QUM5WUEsSUFBQUMsb0JBT087QUFDUCxJQUFBQyxrQkFBZ0M7QUFNaEMsU0FBUyxpQkFBaUIsU0FBc0IsT0FBcUM7QUFFcEYsUUFBTSxXQUFXQztBQUNqQixNQUFJLE9BQU8sU0FBUyxxQkFBcUIsWUFBWTtBQUNwRCxhQUFTLGlCQUFpQixTQUFTLEtBQUs7QUFBQSxFQUN6QyxPQUFPO0FBRU4sZUFBVyxDQUFDLEtBQUssS0FBSyxLQUFLLE9BQU8sUUFBUSxLQUFLLEdBQUc7QUFDakQsY0FBUSxNQUFNLFlBQVksS0FBSyxLQUFLO0FBQUEsSUFDckM7QUFBQSxFQUNEO0FBQ0Q7QUFhQSxJQUFNLGNBQWM7QUFBQSxFQUNuQixNQUFNO0FBQUEsRUFDTixTQUFTO0FBQUEsRUFDVCxNQUFNO0FBQUEsRUFDTixRQUFRO0FBQ1Q7QUFHQSxJQUFNLFdBQVc7QUFBQSxFQUNoQixVQUFVO0FBQUEsRUFDVixVQUFVO0FBQUEsRUFDVixjQUFjO0FBQUEsRUFDZCxTQUFTO0FBQ1Y7QUFLQSxJQUFNLGtCQUFrQixvQkFBSSxJQUF3QjtBQUU3QyxJQUFNLGdCQUFOLE1BQW9CO0FBQUEsRUFJMUIsWUFBWSxLQUFVLFVBQWdDLFlBQWdGO0FBQ3JJLFNBQUssTUFBTTtBQUNYLFNBQUssV0FBVztBQUdoQiw2Q0FBWSxVQUFVLENBQUMsZ0JBQWdCO0FBQ3RDLFdBQUssZUFBZSxXQUFXO0FBQy9CLFdBQUssY0FBYztBQUFBLElBQ3BCO0FBQUEsRUFDRDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsZUFBZSxVQUFzQztBQUNwRCxTQUFLLFdBQVc7QUFBQSxFQUNqQjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsbUJBQStCO0FBQzlCLFFBQUksMkJBQVMsU0FBUztBQUNyQjtBQUFBLElBQ0Q7QUFDQSxRQUFJLDJCQUFTLFVBQVU7QUFDdEI7QUFBQSxJQUNEO0FBQ0E7QUFBQSxFQUNEO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxvQkFBMEM7QUFDekMsVUFBTSxTQUFTLEtBQUssaUJBQWlCO0FBQ3JDLFdBQU8sS0FBSyxTQUFTLE9BQU8sTUFBTTtBQUFBLEVBQ25DO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxXQUFXLFFBQWlCLE9BQWE7QUFDeEMsVUFBTSxpQkFBaUIsS0FBSyxrQkFBa0I7QUFFOUMsU0FBSyxJQUFJLFVBQVUsa0JBQWtCLENBQUMsU0FBd0I7QUFDN0QsWUFBTSxPQUFPLEtBQUs7QUFDbEIsVUFBSSxnQkFBZ0IsZ0NBQWM7QUFDakMsWUFBSSxlQUFlLFNBQVM7QUFDM0IsZ0JBQU0sUUFBTyw2QkFBTSxTQUFRO0FBQzNCLGVBQUssS0FBSyxRQUFRLE1BQU0sTUFBTSxLQUFLO0FBQUEsUUFDcEMsT0FBTztBQUNOLGVBQUssT0FBTyxJQUFJO0FBQUEsUUFDakI7QUFBQSxNQUNEO0FBQUEsSUFDRCxDQUFDO0FBQUEsRUFDRjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsTUFBTSxRQUFRLE1BQW9CLE1BQXFCLFFBQWlCLE9BQXNCO0FBQzdGLFVBQU0sT0FBTyxNQUFNLEtBQUssUUFBUSxNQUFNLElBQUk7QUFDMUMsUUFBSSxDQUFDLE1BQU07QUFDVjtBQUFBLElBQ0Q7QUFFQSxRQUFJLE9BQU87QUFDVixXQUFLLGNBQWM7QUFBQSxJQUNwQjtBQUVBLFFBQUksQ0FBQyxLQUFLLE9BQU87QUFDaEIsV0FBSyxPQUFPLE1BQU0sSUFBSTtBQUN0QjtBQUFBLElBQ0Q7QUFDQSxRQUFJLENBQUMsS0FBSyxNQUFNO0FBQ2YsV0FBSyxjQUFjO0FBQUEsSUFDcEI7QUFFQSxVQUFNLGlCQUFpQixLQUFLLGtCQUFrQjtBQUM5QyxRQUFJLGVBQWUsU0FBUztBQUMzQixZQUFNLEtBQUssT0FBTyxNQUFNLE1BQU0sS0FBSztBQUFBLElBQ3BDO0FBQUEsRUFDRDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsTUFBTSxRQUFRLE1BQW9CLFlBQXVEO0FBNUoxRjtBQTZKRSxVQUFNLE9BQU8sY0FBYyxLQUFLLGNBQWM7QUFDOUMsUUFBSSxDQUFDLFFBQVEsRUFBRSxnQkFBZ0IsaUNBQWU7QUFDN0MsYUFBTztBQUFBLElBQ1I7QUFHQSxVQUFNLGlCQUFpQixLQUFLLGtCQUFrQjtBQUM5QyxRQUFJLENBQUMsZUFBZSxTQUFTO0FBQzVCLGFBQU87QUFBQSxJQUNSO0FBSUEsUUFBSSxDQUFDLEtBQUssU0FBUyxvQkFBb0IsU0FBUyxLQUFLLFNBQVMsS0FBSyxLQUFLLGNBQWMsTUFBTTtBQUMzRixhQUFPO0FBQUEsSUFDUjtBQUlBLFVBQU0sVUFBUyxrQ0FBTSxTQUFOLG1CQUFZO0FBQzNCLFFBQUksQ0FBQyxRQUFRO0FBQ1osYUFBTztBQUFBLElBQ1I7QUFFQSxVQUFNLFVBQVUsZ0JBQWdCLElBQUksTUFBTSxLQUFLLEtBQUssd0JBQXdCO0FBQzVFLFVBQU0sVUFBVSxLQUFLLHdCQUF3QixNQUFNLFFBQVEsUUFBUTtBQU9uRSxRQUFJLEtBQUssY0FBYyxNQUFNO0FBQzVCLFlBQU0sUUFBUSxLQUFLLElBQUksY0FBYyxhQUFhLElBQUk7QUFHdEQsV0FBSSwrQkFBTyxnQkFBZSxNQUFNO0FBQy9CLGNBQU1DLG9CQUFtQixLQUFLLFNBQVMsT0FBTztBQUM5QyxjQUFNQyxhQUFZRCxrQkFBaUI7QUFDbkMsY0FBTUUsWUFBV0Ysa0JBQWlCO0FBR2xDLFlBQUlBLGtCQUFpQix1QkFBdUJBLGtCQUFpQixjQUFjO0FBQzFFLGdCQUFNLFdBQVdBLGtCQUFpQjtBQUNsQyxnQkFBTSxZQUFxQixNQUFNLFlBQVksUUFBUTtBQUNyRCxjQUFJLGNBQWMsUUFBUSxjQUFjLFVBQVUsY0FBYyxLQUFLLGNBQWMsS0FBSztBQUN2RixtQkFBTztBQUFBLFVBQ1I7QUFBQSxRQUNEO0FBR0EsY0FBTSxvQkFBb0IsTUFBTSxZQUFZQyxVQUFTLEtBQUs7QUFDMUQsY0FBTSxrQkFBa0IsZUFBZSxlQUFlLE1BQU0sWUFBWUMsU0FBUSxLQUFLO0FBSXJGLFlBQUksQ0FBQyxxQkFBcUIsQ0FBQyxpQkFBaUI7QUFDM0MsaUJBQU87QUFBQSxRQUNSO0FBQUEsTUFDRDtBQUFBLElBR0Q7QUFJQSxVQUFNLGNBQWMsTUFBTSxlQUFlLEtBQUssS0FBSyxJQUFJO0FBQ3ZELFFBQUksQ0FBQyxhQUFhO0FBQ2pCLGFBQU87QUFBQSxJQUNSO0FBRUEsVUFBTSxtQkFBbUIsS0FBSyxTQUFTLE9BQU87QUFHOUMsUUFBSSxpQkFBaUIsdUJBQXVCLGlCQUFpQixjQUFjO0FBQzFFLFlBQU0sV0FBVyxpQkFBaUI7QUFDbEMsWUFBTSxZQUFxQixZQUFZLFFBQVE7QUFDL0MsVUFBSSxjQUFjLFFBQVEsY0FBYyxVQUFVLGNBQWMsS0FBSyxjQUFjLEtBQUs7QUFDdkYsZUFBTztBQUFBLE1BQ1I7QUFBQSxJQUNEO0FBRUEsVUFBTSxZQUFZLGlCQUFpQjtBQUNuQyxVQUFNLFdBQVcsaUJBQWlCO0FBR2xDLFVBQU0sYUFBYSxZQUFZLFNBQVM7QUFDeEMsUUFBSSxjQUFjLE9BQU8sZUFBZSxVQUFVO0FBQ2pELGNBQVEsUUFBUTtBQUNoQixjQUFRLFdBQVcsS0FBSztBQUV4QixVQUFJLFFBQVEsYUFBYSxRQUFRLFVBQVU7QUFDMUMsZ0JBQVEsY0FBYztBQUN0QixnQkFBUSxnQkFBZ0I7QUFBQSxNQUN6QixXQUFXLFFBQVEsVUFBVSxRQUFRLE9BQU87QUFDM0MsZ0JBQVEsY0FBYztBQUN0QixnQkFBUSxnQkFBZ0I7QUFHeEIsWUFBSSxNQUFNLEtBQUssd0JBQXdCLFFBQVEsT0FBTyxRQUFRLE9BQU8sSUFBSSxHQUFHO0FBQzNFLGtCQUFRLHFCQUFxQjtBQUM3QixrQkFBUSxnQkFBZ0I7QUFBQSxRQUN6QjtBQUFBLE1BQ0Q7QUFBQSxJQUNEO0FBR0EsUUFBSSxlQUFlLGFBQWE7QUFDL0IsWUFBTSxZQUFZLFlBQVksUUFBUTtBQUN0QyxVQUFJLGFBQWEsT0FBTyxjQUFjLFVBQVU7QUFDL0MsZ0JBQVEsT0FBTztBQUNmLFlBQUksUUFBUSxTQUFTLFFBQVEsTUFBTTtBQUNsQyxrQkFBUSxjQUFjO0FBQUEsUUFDdkI7QUFBQSxNQUNELFdBQVcsUUFBUSxNQUFNO0FBQ3hCLGdCQUFRLE9BQU87QUFDZixnQkFBUSxjQUFjO0FBQUEsTUFDdkI7QUFBQSxJQUNEO0FBRUEsV0FBTztBQUFBLEVBQ1I7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLE1BQU0sT0FBTyxNQUFrQixZQUEyQixRQUFpQixPQUFzQjtBQTNSbEc7QUE0UkUsVUFBTSxFQUFFLE9BQU8sVUFBVSxjQUFjLGFBQWEsY0FBYyxJQUFJO0FBQ3RFLFVBQU0sT0FBTyxjQUFjLEtBQUssY0FBYztBQUU5QyxRQUFJLENBQUMsUUFBUSxFQUFFLGdCQUFnQixpQ0FBZTtBQUM3QztBQUFBLElBQ0Q7QUFFQSxVQUFNLFlBQVksS0FBSztBQUN2QixRQUFJLENBQUMsYUFBYyxDQUFDLFNBQVMsQ0FBQyxlQUFlLGlCQUFpQixVQUFXO0FBQ3hFO0FBQUEsSUFDRDtBQUVBLFVBQU0sYUFBc0MsVUFBVTtBQUFBLE1BQ3JEO0FBQUEsSUFDRDtBQUVBLFFBQUksV0FBVyxXQUFXLEdBQUc7QUFDNUI7QUFBQSxJQUNEO0FBRUEsVUFBTSxlQUFlLE1BQU0sS0FBSyxVQUFVLFNBQVMsSUFBSSxJQUFJO0FBQzNELFVBQU0sVUFBVSxLQUFLLHFCQUFxQixNQUFNLGNBQWMsVUFBVTtBQUd4RSxVQUFNLEtBQUssWUFBWSxNQUFNLFNBQVMsSUFBSTtBQUUxQyxRQUFJLGVBQWU7QUFDbEIsV0FBSyxjQUFjLFNBQVMsVUFBVTtBQUFBLElBQ3ZDLE9BQU87QUFDTixXQUFLLGVBQWUsT0FBTztBQUFBLElBQzVCO0FBRUEsU0FBSyxlQUFlO0FBQ3BCLGNBQVUsUUFBUSxXQUFXO0FBSTdCLFVBQU0sVUFBUyxrQ0FBTSxTQUFOLG1CQUFZO0FBQzNCLFFBQUksUUFBUTtBQUNYLHNCQUFnQixJQUFJLFFBQVEsSUFBSTtBQUFBLElBQ2pDO0FBQUEsRUFDRDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS1EscUJBQ1AsTUFDQSxZQUNBLFlBQ2dCO0FBQ2hCLFVBQU0sRUFBRSxlQUFlLG1CQUFtQixJQUFJO0FBQzlDLFVBQU0sVUFBeUIsQ0FBQztBQUVoQyxlQUFXLFFBQVEsZUFBYTtBQWxWbEM7QUFtVkcsVUFBSSxVQUFVLFVBQVUsY0FBYyxJQUFJLFlBQVksSUFBSSxFQUFFO0FBQzVELFVBQUksQ0FBQyxTQUFTO0FBQ2Isa0JBQVUsU0FBUyxjQUFjLEtBQUs7QUFDdEMsZ0JBQVEsVUFBVSxJQUFJLFlBQVksSUFBSTtBQUFBLE1BQ3ZDO0FBRUEsVUFBSSxVQUFVLFFBQVEsY0FBYyxJQUFJLFlBQVksT0FBTyxFQUFFO0FBQzdELFVBQUksQ0FBQyxTQUFTO0FBQ2Isa0JBQVUsU0FBUyxjQUFjLEtBQUs7QUFDdEMsZ0JBQVEsVUFBVSxJQUFJLFlBQVksT0FBTztBQUN6QyxnQkFBUSxZQUFZLE9BQU87QUFBQSxNQUM1QjtBQUVBLGNBQVEsS0FBSyxPQUFPO0FBRXBCLFVBQUksaUJBQWlCLG9CQUFvQjtBQUN4QyxZQUFJLGVBQWU7QUFDbEIsa0JBQVEsVUFBVSxPQUFPLFlBQVksTUFBTTtBQUMzQyx3QkFBUSxlQUFSLG1CQUFvQjtBQUFBLFFBQ3JCO0FBR0EsY0FBTSxVQUFrQztBQUFBLFVBQ3ZDLHFCQUFxQixHQUFHLFdBQVcsQ0FBQztBQUFBLFVBQ3BDLHFCQUFxQixHQUFHLFdBQVcsQ0FBQztBQUFBLFVBQ3BDLG9CQUFvQixXQUFXLGFBQWEsU0FBUztBQUFBLFVBQ3JELHNCQUFzQixXQUFXLGFBQWEsV0FBVztBQUFBLFVBQ3pELG1CQUFtQjtBQUFBLFFBQ3BCO0FBRUEsWUFBSSxXQUFXLDhCQUFrQztBQUNoRCxnQkFBTSxRQUFRLFNBQVMsY0FBYyxPQUFPO0FBQzVDLGdCQUFNLFdBQVc7QUFDakIsZ0JBQU0sV0FBVztBQUNqQixnQkFBTSxRQUFRO0FBQ2QsZ0JBQU0sT0FBTztBQUNiLGdCQUFNLE1BQU0sV0FBVyxJQUFJLFFBQVEsVUFBVSxFQUFFO0FBQy9DLGtCQUFRLFlBQVksS0FBSztBQUFBLFFBQzFCLE9BQU87QUFDTixrQkFBUSxpQkFBaUIsSUFBSSxPQUFPLFdBQVcsR0FBRztBQUFBLFFBQ25EO0FBRUEseUJBQWlCLFdBQVcsT0FBTztBQUFBLE1BQ3BDO0FBQUEsSUFDRCxDQUFDO0FBRUQsV0FBTztBQUFBLEVBQ1I7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLE1BQWMsWUFBWSxNQUFrQixTQUF3QixNQUFvQztBQXZZekc7QUF3WUUsVUFBTSxpQkFBaUIsS0FBSyxrQkFBa0I7QUFDOUMsUUFBSSxxQkFBb0M7QUFFeEMsZUFBVyxVQUFVLFNBQVM7QUFDN0IsWUFBTSxFQUFFLEtBQUssSUFBSTtBQUNqQixVQUFJLGdCQUFvQyxPQUFPLGNBQWMsSUFBSSxZQUFZLElBQUksRUFBRTtBQUNuRixZQUFNLGVBQWUsa0JBQWtCO0FBRXZDLFVBQUksY0FBYztBQUNqQix1REFBZSxVQUFVLElBQUksWUFBWTtBQUFBLE1BQzFDO0FBRUEsVUFBSSxlQUFlLGVBQWUsTUFBTTtBQUN2QyxZQUFJLENBQUMsY0FBYztBQUNsQiwwQkFBZ0IsU0FBUyxjQUFjLEtBQUs7QUFDNUMsd0JBQWMsVUFBVSxJQUFJLFlBQVksSUFBSTtBQUM1QyxnQkFBTSxXQUFXLFNBQVMsY0FBYyxLQUFLO0FBQzdDLHdCQUFjLFlBQVksUUFBUTtBQUNsQyxpQkFBTyxRQUFRLGFBQWE7QUFBQSxRQUM3QjtBQUVBLGNBQU0sY0FBYywrQ0FBZSxjQUFjO0FBQ2pELFlBQUksQ0FBQyxZQUFhO0FBRWxCLGNBQU0sV0FBVyxNQUFNLEtBQUssVUFBVSxNQUFNLElBQUk7QUFHaEQsWUFBSSxVQUFRLGNBQVMsVUFBVCxtQkFBZ0IsUUFBUSxpQkFBaUIsWUFBVztBQUNoRSxvQkFBWSxRQUFRLE9BQU8sU0FBUztBQUVwQyxZQUFJLFNBQVMsNEJBQThCO0FBQzFDLDJCQUFpQixhQUFhO0FBQUEsWUFDN0IsMEJBQTBCLE9BQU8sS0FBSztBQUFBLFVBQ3ZDLENBQUM7QUFBQSxRQUNGLE9BQU87QUFFTiwrQkFBcUIsa0RBQXNCLEtBQUssa0JBQWtCLE9BQU8sZUFBZSxRQUFRO0FBQ2hHLDJCQUFpQixhQUFhO0FBQUEsWUFDN0IsMEJBQTBCLElBQUksS0FBSztBQUFBLFlBQ25DLDZCQUE2QjtBQUFBLFVBQzlCLENBQUM7QUFBQSxRQUNGO0FBQUEsTUFDRCxXQUFXLGdCQUFnQixlQUFlO0FBQ3pDLGFBQUssT0FBTztBQUNaLHNCQUFjLE9BQU87QUFBQSxNQUN0QjtBQUFBLElBQ0Q7QUFBQSxFQUNEO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLUSxjQUFjLFNBQXdCLFlBQTJDO0FBQ3hGLFVBQU0saUJBQWlCLEtBQUssa0JBQWtCO0FBQzlDLFVBQU0sZ0JBQWdCLGVBQWU7QUFFckMsZUFBVyxRQUFRLENBQUMsV0FBVyxVQUFVO0FBQ3hDLFlBQU0sU0FBUyxRQUFRLEtBQUs7QUFDNUIsVUFBSSxRQUFRO0FBRVgsZUFBTyxVQUFVLE9BQU8sWUFBWSxNQUFNO0FBQzFDLGtCQUFVLFFBQVEsTUFBTTtBQUV4QixZQUFJLGVBQWU7QUFFbEIsZUFBSyxPQUFPO0FBQ1osZ0NBQXNCLE1BQU07QUFFM0IsbUJBQU8saUJBQWlCLE1BQU07QUFDN0IscUJBQU8sVUFBVSxJQUFJLFlBQVksTUFBTTtBQUFBLFlBQ3hDO0FBQUEsVUFDRCxDQUFDO0FBQUEsUUFDRixPQUFPO0FBRU4saUJBQU8sVUFBVSxJQUFJLFlBQVksTUFBTTtBQUFBLFFBQ3hDO0FBQUEsTUFDRDtBQUFBLElBQ0QsQ0FBQztBQUFBLEVBQ0Y7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtRLGVBQWUsU0FBOEI7QUFDcEQsWUFBUSxRQUFRLFlBQVU7QUFDekIsYUFBTyxVQUFVLElBQUksWUFBWSxNQUFNO0FBQUEsSUFDeEMsQ0FBQztBQUFBLEVBQ0Y7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLE9BQU8sTUFBcUIsTUFBeUI7QUFwZXREO0FBcWVFLFVBQU0sYUFBYSxTQUFRLDZCQUFNLFlBQVcsS0FBSyxjQUFjLElBQUk7QUFDbkUsUUFBSSxFQUFFLHNCQUFzQixpQ0FBZTtBQUMxQztBQUFBLElBQ0Q7QUFFQSxVQUFNLFlBQVksV0FBVztBQUM3QixRQUFJLENBQUMsV0FBVztBQUNmO0FBQUEsSUFDRDtBQUVBLFVBQU0sVUFBVSxVQUFVLGlCQUFpQixJQUFJLFlBQVksSUFBSSxFQUFFO0FBQ2pFLFlBQVEsUUFBUSxPQUFLLEVBQUUsT0FBTyxDQUFDO0FBRy9CLFVBQU0sVUFBUyw4Q0FBWSxTQUFaLG1CQUFrQjtBQUNqQyxRQUFJLFFBQVE7QUFDWCxzQkFBZ0IsT0FBTyxNQUFNO0FBQUEsSUFDOUI7QUFDQSxXQUFPLFVBQVUsUUFBUTtBQUFBLEVBQzFCO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxnQkFBc0I7QUE3ZnZCO0FBOGZFLFVBQU0saUJBQWlCLEtBQUssa0JBQWtCO0FBQzlDLFVBQU0sU0FBUyxlQUFlO0FBQzlCLFVBQU0sYUFBYSxlQUFlO0FBQ2xDLFVBQU0sYUFBYSxlQUFlO0FBQ2xDLFVBQU0sU0FBUyxlQUFlLHNCQUFzQixlQUFlLGVBQWUsQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDO0FBQzdGLFVBQU0sVUFBVSxlQUFlO0FBQy9CLFVBQU0sT0FBTyxlQUFlO0FBRTVCLFVBQU0sVUFBa0M7QUFBQSxNQUN2QyxzQkFBc0IsR0FBRyxNQUFNO0FBQUEsTUFDL0IsMkJBQTJCLEdBQUcsVUFBVTtBQUFBLE1BQ3hDLDJCQUEyQixHQUFHLFVBQVU7QUFBQSxNQUN4QyxzQkFBc0IsR0FBRyxPQUFPLENBQUMsQ0FBQyxNQUFNLE9BQU8sQ0FBQyxDQUFDLE1BQU0sT0FBTyxDQUFDLENBQUMsTUFBTSxPQUFPLENBQUMsQ0FBQztBQUFBLE1BQy9FLHVCQUF1QixHQUFHLE9BQU87QUFBQSxNQUNqQyxvQkFBb0IsT0FBTyxpQkFBaUI7QUFBQSxNQUM1QywyQkFBMkIsT0FBTyxpQkFBaUI7QUFBQSxJQUNwRDtBQUVBLFFBQUksZUFBZSxhQUFhO0FBQy9CLFlBQU0sYUFBWSxvQkFBZSxjQUFmLFlBQTRCO0FBQzlDLGNBQVEseUJBQXlCLElBQUksR0FBRyxlQUFlLFFBQVE7QUFDL0QsY0FBUSx5QkFBeUIsSUFBSSxHQUFHLGVBQWUsUUFBUTtBQUMvRCxjQUFRLHlCQUF5QixJQUFJLEdBQUcsZUFBZSxVQUFVO0FBQ2pFLGNBQVEsMEJBQTBCLElBQUksZUFBZTtBQUNyRCxjQUFRLDBCQUEwQixJQUFJLGVBQWU7QUFDckQsY0FBUSwyQkFBMkIsSUFBSSxHQUFHLGVBQWUsV0FBVztBQUNwRSxjQUFRLDJCQUEyQixJQUFJLEdBQUcsZUFBZSxXQUFXO0FBQ3BFLGNBQVEseUJBQXlCLElBQUksWUFBWSxHQUFHLGVBQWUsVUFBVSxPQUFPO0FBQ3BGLGNBQVEsNkJBQTZCLElBQUksYUFBYSxlQUFlLGlCQUFpQixpQkFBaUI7QUFBQSxJQUN4RztBQUVBLHFCQUFpQixTQUFTLE1BQU0sT0FBTztBQUV2QyxTQUFLLFdBQVcsSUFBSTtBQUFBLEVBQ3JCO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxNQUFNLFVBQVUsS0FBYSxNQUF5RDtBQXJpQnZGO0FBc2lCRSxRQUFJLE1BQXFCO0FBQ3pCLFFBQUksY0FBNkI7QUFDakMsUUFBSSxXQUFXO0FBQ2YsUUFBSSxjQUFjO0FBQ2xCLFFBQUksVUFBVSxFQUFFLEdBQUcsR0FBRyxHQUFHLEdBQUcsWUFBWSxNQUFNO0FBRzlDLFVBQU0sZ0JBQWdCLElBQUksTUFBTSxTQUFTLFFBQVE7QUFDakQsUUFBSSxlQUFlO0FBQ2xCLGFBQU0seUJBQWMsQ0FBQyxNQUFmLG1CQUFrQixXQUFsQixZQUE0QjtBQUNsQyxxQkFBYyx5QkFBYyxDQUFDLE1BQWYsbUJBQWtCLFdBQWxCLFlBQTRCO0FBQUEsSUFDM0M7QUFHQSxVQUFNLGdCQUFnQixJQUFJLE1BQU0sU0FBUyxRQUFRO0FBQ2pELFVBQU0sb0JBQW9CLElBQUksTUFBTSxTQUFTLFlBQVk7QUFDekQsUUFBSSxlQUFlO0FBQ2xCLHFCQUFjLHlCQUFjLENBQUMsTUFBZixtQkFBa0IsV0FBbEIsWUFBNEI7QUFDMUMsYUFBTSx5QkFBYyxDQUFDLE1BQWYsbUJBQWtCLFdBQWxCLFlBQTRCO0FBQUEsSUFDbkMsV0FBVyxtQkFBbUI7QUFDN0IsYUFBTSw2QkFBa0IsQ0FBQyxNQUFuQixtQkFBc0IsV0FBdEIsWUFBZ0M7QUFDdEMsb0JBQWM7QUFBQSxJQUNmO0FBR0EsUUFBSSxDQUFDLEtBQUs7QUFDVCxZQUFNO0FBQ04sb0JBQWM7QUFBQSxJQUNmO0FBRUEsZUFBVyxTQUFTLFFBQVEsS0FBSyxHQUFHO0FBR3BDLFFBQUksS0FBSyxjQUFjLEdBQUcsR0FBRztBQUM1QixZQUFNLFNBQVMsSUFBSSxRQUFRLG1CQUFtQixFQUFFO0FBQ2hELFlBQU0sU0FBUyxJQUFJLGdCQUFnQixNQUFNO0FBQ3pDLFlBQU0sT0FBTyxPQUFPLElBQUksTUFBTTtBQUM5QixVQUFJLE1BQU07QUFDVCxjQUFNO0FBQ04sc0JBQWM7QUFDZCxtQkFBVztBQUNYLHNCQUFjO0FBQUEsTUFDZjtBQUFBLElBQ0Q7QUFHQSxRQUFJLElBQUksV0FBVyxPQUFPLEdBQUc7QUFDNUIsWUFBTSxJQUFJLFFBQVEsZ0JBQWdCLDJCQUFTLGtCQUFrQjtBQUM3RCxpQkFBVztBQUFBLElBQ1o7QUFHQSxVQUFNLFlBQVksSUFBSSxRQUFRLEdBQUc7QUFDakMsU0FBSyxZQUFZLGdCQUFnQixjQUFjLElBQUk7QUFDbEQsZ0JBQVUsS0FBSyxxQkFBcUIsSUFBSSxVQUFVLFlBQVksQ0FBQyxDQUFDO0FBQ2hFLFlBQU0sSUFBSSxRQUFRLE9BQU8sRUFBRSxFQUFFLEtBQUs7QUFBQSxJQUNuQztBQUdBLFFBQUksYUFBYTtBQUNoQixnQkFBVSxLQUFLLHFCQUFxQixXQUFXO0FBQUEsSUFDaEQ7QUFHQSxRQUFJLENBQUMsVUFBVTtBQUNkLFlBQU0sUUFBUSxLQUFLLElBQUk7QUFDdkIsVUFBSSxPQUFxQjtBQUd6QixXQUFJLDZCQUFNLFVBQVMsSUFBSSxTQUFTLEtBQUssS0FBSyxJQUFJLFNBQVMsSUFBSSxLQUFNLENBQUMsSUFBSSxXQUFXLEdBQUcsS0FBSyxJQUFJLFNBQVMsR0FBRyxJQUFLO0FBQzdHLGNBQU0sZUFBZSxLQUFLLElBQUksY0FBYyxxQkFBcUIsS0FBSyxLQUFLLEtBQUssSUFBSTtBQUNwRixZQUFJLGNBQWM7QUFDakIsaUJBQU87QUFBQSxRQUNSO0FBQUEsTUFDRDtBQUdBLFVBQUksQ0FBQyxNQUFNO0FBQ1YsY0FBTSxRQUFRLE1BQU0sU0FBUyxFQUFFLE9BQU8sT0FBSyxFQUFFLFNBQVMsT0FBTyxFQUFFLFNBQVMsR0FBRztBQUMzRSxlQUFPLE1BQU0sS0FBSyxPQUFLLEVBQUUsU0FBUyxHQUFHLEtBQUssTUFBTSxLQUFLLE9BQUssRUFBRSxTQUFTLEdBQUcsS0FBSztBQUFBLE1BQzlFO0FBRUEsVUFBSSxNQUFNO0FBQ1QsY0FBTSxNQUFNLGdCQUFnQixJQUFJO0FBQUEsTUFDakM7QUFBQSxJQUNEO0FBR0EsUUFBSSxPQUFpQztBQUNyQyxRQUFJO0FBQ0gsWUFBTSxTQUFTLElBQUksSUFBSSxHQUFHO0FBQzFCLFlBQU0sYUFBWSxZQUFPLFNBQVMsTUFBTSxHQUFHLEVBQUUsSUFBSSxNQUEvQixtQkFBa0M7QUFDcEQsWUFBTSxrQkFBa0IsQ0FBQyxPQUFPLFFBQVEsT0FBTyxPQUFPLE9BQU8sTUFBTTtBQUNuRSxZQUFNLGtCQUFrQixDQUFDLE9BQU8sUUFBUSxPQUFPLE9BQU8sS0FBSztBQUUzRCxVQUFJLGFBQWEsZ0JBQWdCLFNBQVMsU0FBUyxHQUFHO0FBQ3JEO0FBQUEsTUFDRCxXQUFXLGFBQWEsZ0JBQWdCLFNBQVMsU0FBUyxHQUFHO0FBQzVEO0FBQUEsTUFDRDtBQUdBLFVBQUksQ0FBQyxNQUFNO0FBQ1YsWUFBSTtBQUNILGdCQUFNLFdBQVcsVUFBTSw4QkFBVyxFQUFFLEtBQUssUUFBUSxPQUFPLENBQUM7QUFDekQsZ0JBQU0sZUFBYyxxQ0FBVSxRQUFRLG9CQUFtQjtBQUN6RCxjQUFJLGFBQWE7QUFDaEIsZ0JBQUksWUFBWSxTQUFTLE9BQU8sR0FBRztBQUNsQztBQUFBLFlBQ0QsV0FBVyxZQUFZLFNBQVMsT0FBTyxHQUFHO0FBQ3pDO0FBQUEsWUFDRDtBQUFBLFVBQ0Q7QUFBQSxRQUNELFNBQVE7QUFBQSxRQUVSO0FBQUEsTUFDRDtBQUFBLElBQ0QsU0FBUTtBQUFBLElBRVI7QUFFQSxXQUFPO0FBQUEsTUFDTixLQUFLLElBQUksSUFBSSxLQUFLLEVBQUUsUUFBUSxZQUFZLE1BQU0sQ0FBQztBQUFBLE1BQy9DO0FBQUEsTUFDQTtBQUFBLE1BQ0EsR0FBRztBQUFBLElBQ0o7QUFBQSxFQUNEO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLUSxxQkFBcUIsS0FBNEQ7QUFDeEYsVUFBTSxTQUFTLElBQUksWUFBWTtBQUMvQixVQUFNLGFBQWEsT0FBTyxTQUFTLFFBQVE7QUFFM0MsVUFBTSxRQUFRLElBQUksTUFBTSxLQUFLO0FBQzdCLFVBQU0sVUFBVSxNQUFNLE9BQU8sT0FBSyxDQUFDLE1BQU0sU0FBUyxFQUFFLEtBQUssR0FBRyxFQUFFLENBQUMsQ0FBQztBQUVoRSxRQUFJLElBQUk7QUFDUixRQUFJLElBQUk7QUFFUixVQUFNLE9BQU8sUUFBUSxDQUFDO0FBQ3RCLFVBQU0sT0FBTyxRQUFRLENBQUM7QUFDdEIsUUFBSSxRQUFRLFdBQVcsS0FBSyxRQUFRLE1BQU07QUFDekMsVUFBSSxTQUFTLEtBQUssS0FBSyxHQUFHLEVBQUU7QUFDNUIsVUFBSSxTQUFTLEtBQUssS0FBSyxHQUFHLEVBQUU7QUFBQSxJQUM3QixXQUFXLFFBQVEsV0FBVyxLQUFLLE1BQU07QUFDeEMsVUFBSSxTQUFTLEtBQUssS0FBSyxHQUFHLEVBQUU7QUFBQSxJQUM3QjtBQUVBLFdBQU8sRUFBRSxHQUFHLEdBQUcsV0FBVztBQUFBLEVBQzNCO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxNQUFNLFVBQVUsTUFBYyxNQUFxRjtBQUNsSCxVQUFNLE1BQU0sUUFBUTtBQUNwQixVQUFNLFNBQVMsRUFBRSxPQUFPLE1BQXVCLHdCQUEwQjtBQUd6RSxVQUFNLGlCQUNMLFNBQVMsU0FBUyxLQUFLLEdBQUcsS0FDMUIsU0FBUyxTQUFTLEtBQUssR0FBRyxLQUMxQixTQUFTLGFBQWEsS0FBSyxHQUFHLEtBQzlCLFNBQVMsUUFBUSxLQUFLLEdBQUcsS0FDekIsS0FBSyxjQUFjLEdBQUc7QUFHdkIsVUFBTSxrQkFBa0I7QUFDeEIsVUFBTSxhQUFhLGdCQUFnQixLQUFLLEdBQUc7QUFFM0MsUUFBSSxrQkFBa0IsWUFBWTtBQUNqQyxhQUFPO0FBQ1AsWUFBTSxPQUFPLE1BQU0sS0FBSyxVQUFVLEtBQUssSUFBSTtBQUMzQyxhQUFPLFFBQVEsS0FBSztBQUFBLElBQ3JCLE9BQU87QUFDTixhQUFPLFFBQVE7QUFBQSxJQUNoQjtBQUVBLFdBQU87QUFBQSxFQUNSO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxNQUFjLHdCQUNiLFFBQ0EsUUFDQSxNQUNtQjtBQUNuQixRQUFJLENBQUMsVUFBVSxDQUFDLFFBQVE7QUFDdkIsYUFBTztBQUFBLElBQ1I7QUFDQSxVQUFNLFNBQVMsTUFBTSxLQUFLLFVBQVUsUUFBUSxJQUFJO0FBQ2hELFVBQU0sU0FBUyxNQUFNLEtBQUssVUFBVSxRQUFRLElBQUk7QUFDaEQsV0FBTyxPQUFPLFFBQVEsT0FBTztBQUFBLEVBQzlCO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLUSxjQUFjLEtBQXNCO0FBQzNDLFdBQU8sSUFBSSxXQUFXLGlCQUFpQjtBQUFBLEVBQ3hDO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU1RLGtCQUFrQixhQUFxQixVQUEwQjtBQUN4RSxVQUFNLE9BQU8sU0FBUyxjQUFjLE1BQU07QUFDMUMsU0FBSyxTQUFTLGlCQUFpQjtBQUcvQixxQkFBaUIsTUFBTTtBQUFBLE1BQ3RCLFVBQVU7QUFBQSxNQUNWLFlBQVk7QUFBQSxNQUNaLGVBQWU7QUFBQSxNQUNmLFNBQVM7QUFBQSxNQUNULFFBQVE7QUFBQSxNQUNSLE1BQU07QUFBQSxJQUNQLENBQUM7QUFDRCxTQUFLLGNBQWMsWUFBWSxZQUFZO0FBQzNDLGFBQVMsS0FBSyxZQUFZLElBQUk7QUFFOUIsVUFBTSxhQUFhLFdBQVc7QUFDOUIsUUFBSSxXQUFXO0FBQ2YscUJBQWlCLE1BQU0sRUFBRSxhQUFhLEdBQUcsUUFBUSxLQUFLLENBQUM7QUFFdkQsV0FBTyxLQUFLLGNBQWMsY0FBYyxXQUFXLEdBQUc7QUFDckQsa0JBQVk7QUFDWix1QkFBaUIsTUFBTSxFQUFFLGFBQWEsR0FBRyxRQUFRLEtBQUssQ0FBQztBQUFBLElBQ3hEO0FBRUEsYUFBUyxLQUFLLFlBQVksSUFBSTtBQUM5QixXQUFPLEdBQUcsUUFBUTtBQUFBLEVBQ25CO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLUSxnQkFBcUM7QUFDNUMsV0FBTyxLQUFLLElBQUksVUFBVSxvQkFBb0IsOEJBQVk7QUFBQSxFQUMzRDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS1Esd0JBQXdCLE1BQTRCLGNBQXdEO0FBQ25ILFFBQUksV0FBd0M7QUFDNUMsUUFBSSxNQUFNO0FBQ1QsWUFBTSxPQUFPLEtBQUssUUFBUTtBQUMxQixpQkFBVyxTQUFTLFlBQVksWUFBWTtBQUFBLElBQzdDO0FBQ0EsV0FBTztBQUFBLE1BQ04sVUFBVTtBQUFBLE1BQ1YsT0FBTztBQUFBLE1BQ1AsTUFBTTtBQUFBLE1BQ047QUFBQSxNQUNBLGNBQWMsZ0JBQWdCO0FBQUEsTUFDOUIsb0JBQW9CO0FBQUEsTUFDcEIsZUFBZTtBQUFBLE1BQ2YsYUFBYTtBQUFBLElBQ2Q7QUFBQSxFQUNEO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxVQUFnQjtBQUVmLGFBQVMsaUJBQWlCLElBQUksWUFBWSxJQUFJLEVBQUUsRUFBRSxRQUFRLFFBQU0sR0FBRyxPQUFPLENBQUM7QUFHM0Usb0JBQWdCLE1BQU07QUFBQSxFQUN2QjtBQUNEOzs7QUN2ekJBLElBQUFDLG9CQUF3RDtBQUlqRCxJQUFNLGtCQUFOLGNBQThCLHdCQUFNO0FBQUEsRUFNMUMsWUFDQyxLQUNBLGdCQUNBLGlCQUNBLG1CQUE0QixPQUM1QixjQUNDO0FBQ0QsVUFBTSxHQUFHO0FBQ1QsU0FBSyxpQkFBaUI7QUFDdEIsU0FBSyxrQkFBa0I7QUFDdkIsU0FBSyxtQkFBbUI7QUFDeEIsU0FBSyxlQUFlO0FBQUEsRUFDckI7QUFBQSxFQUVBLFNBQWU7QUFDZCxVQUFNLEVBQUUsVUFBVSxJQUFJO0FBR3RCLFVBQU0sUUFBUSxVQUFVLFNBQVMsU0FBUztBQUFBLE1BQ3pDLE1BQU07QUFBQSxNQUNOLE1BQU07QUFBQSxRQUNMLFFBQVE7QUFBQSxRQUNSLFVBQVU7QUFBQSxRQUNWLE9BQU87QUFBQSxNQUNSO0FBQUEsSUFDRCxDQUFDO0FBR0QsVUFBTSxpQkFBaUIsVUFBVSxNQUFNO0FBQUUsV0FBSyxLQUFLLG9CQUFvQixLQUFLO0FBQUEsSUFBRyxDQUFDO0FBR2hGLFVBQU0saUJBQWlCLFVBQVUsTUFBTTtBQUN0QyxXQUFLLE1BQU07QUFBQSxJQUNaLENBQUM7QUFHRCxVQUFNLE1BQU07QUFBQSxFQUNiO0FBQUEsRUFFQSxNQUFjLG9CQUFvQixPQUF3QztBQUN4RSxTQUFLLE1BQU07QUFFWCxVQUFNLFFBQVEsTUFBTTtBQUNwQixRQUFJLENBQUMsU0FBUyxNQUFNLFdBQVcsR0FBRztBQUNqQyxVQUFJLHlCQUFPLG1CQUFtQjtBQUM5QjtBQUFBLElBQ0Q7QUFFQSxVQUFNLGFBQWEsS0FBSyxjQUFjO0FBQ3RDLFFBQUksQ0FBQyxZQUFZO0FBQ2hCLFVBQUkseUJBQU8sZ0JBQWdCO0FBQzNCO0FBQUEsSUFDRDtBQUVBLFVBQU0sT0FBTyxLQUFLLElBQUksVUFBVSxvQkFBb0IsOEJBQVk7QUFDaEUsVUFBTSxTQUFTLDZCQUFNO0FBR3JCLGFBQVMsSUFBSSxHQUFHLElBQUksTUFBTSxRQUFRLEtBQUs7QUFDdEMsWUFBTSxPQUFPLE1BQU0sS0FBSyxDQUFDO0FBQ3pCLFVBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxLQUFLLFdBQVcsUUFBUSxHQUFHO0FBQzdDO0FBQUEsTUFDRDtBQUVBLFVBQUksS0FBSyxrQkFBa0I7QUFFMUIsWUFBSSxDQUFDLEtBQUssZ0JBQWdCLEtBQUssYUFBYSxLQUFLLE1BQU0sSUFBSTtBQUMxRCxjQUFJLHlCQUFPLDRDQUE0QztBQUN2RDtBQUFBLFFBQ0Q7QUFJQSxjQUFNLFNBQVMsTUFBTSxLQUFLLGVBQWU7QUFBQSxVQUN4QztBQUFBLFVBQ0E7QUFBQSxVQUNBO0FBQUE7QUFBQSxVQUNBO0FBQUE7QUFBQSxRQUNEO0FBRUEsWUFBSSxPQUFPLFdBQVcsT0FBTyxNQUFNO0FBQ2xDLGdCQUFNLEtBQUssZ0JBQWdCO0FBQUEsWUFDMUI7QUFBQSxZQUNBLEtBQUs7QUFBQSxZQUNMLE9BQU87QUFBQSxVQUNSO0FBQUEsUUFDRDtBQUFBLE1BQ0QsT0FBTztBQUVOLGNBQU0sU0FBUyxNQUFNLEtBQUssZUFBZTtBQUFBLFVBQ3hDO0FBQUEsVUFDQTtBQUFBLFVBQ0E7QUFBQTtBQUFBLFFBQ0Q7QUFFQSxZQUFJLE9BQU8sV0FBVyxPQUFPLFlBQVksUUFBUTtBQUNoRCxpQkFBTyxpQkFBaUIsT0FBTyxRQUFRO0FBQUEsUUFDeEM7QUFBQSxNQUNEO0FBQUEsSUFDRDtBQUVELFFBQUkseUJBQU8sU0FBUyxNQUFNLE1BQU0sV0FBVztBQUFBLEVBQzVDO0FBQUEsRUFFUSxnQkFBOEI7QUF2SHZDO0FBd0hFLFVBQU0sT0FBTyxLQUFLLElBQUksVUFBVSxvQkFBb0IsOEJBQVk7QUFDaEUsWUFBTyxrQ0FBTSxTQUFOLFlBQWM7QUFBQSxFQUN0QjtBQUFBLEVBRUEsVUFBZ0I7QUFDZixVQUFNLEVBQUUsVUFBVSxJQUFJO0FBQ3RCLGNBQVUsTUFBTTtBQUFBLEVBQ2pCO0FBQ0Q7QUFLTyxTQUFTLGVBQ2YsS0FDQSxnQkFDQSxpQkFDQSxtQkFBNEIsT0FDNUIsY0FDTztBQUNQLE1BQUksZ0JBQWdCLEtBQUssZ0JBQWdCLGlCQUFpQixrQkFBa0IsWUFBWSxFQUFFLEtBQUs7QUFDaEc7OztBQ3hJQSxJQUFBQyxvQkFBa0U7QUFXM0QsSUFBTSxvQkFBTixjQUFnQyx3QkFBTTtBQUFBLEVBc0I1QyxZQUNDLEtBQ0EsVUFDQSxlQUNBLGdCQUNBLGlCQUNBLFVBQStCLENBQUMsR0FDL0I7QUFDRCxVQUFNLEdBQUc7QUF2QlYsU0FBUSxZQUFnQztBQUN4QyxTQUFRLGFBQXNDO0FBQzlDLFNBQVEsaUJBQTJDO0FBQ25ELFNBQVEsYUFBdUM7QUFDL0MsU0FBUSxhQUFpQztBQUN6QyxTQUFRLGFBQWlDO0FBQ3pDLFNBQVEsbUJBQXVDO0FBRS9DLFNBQVEsZUFBdUI7QUFFL0IsU0FBUSxjQUFzQjtBQUM5QixTQUFRLGlCQUFnQyxDQUFDO0FBQ3pDLFNBQVEsWUFBcUI7QUFDN0IsU0FBUSxnQkFBd0I7QUFXL0IsU0FBSyxXQUFXO0FBQ2hCLFNBQUssZ0JBQWdCO0FBQ3JCLFNBQUssaUJBQWlCO0FBQ3RCLFNBQUssa0JBQWtCO0FBQ3ZCLFNBQUssVUFBVTtBQUNmLFNBQUssa0JBQWtCLFNBQVM7QUFDaEMsU0FBSyxZQUFZLFNBQVMsMEJBQTBCO0FBQUEsRUFDckQ7QUFBQSxFQUVBLFNBQWU7QUFDZCxVQUFNLEVBQUUsVUFBVSxJQUFJO0FBR3RCLFNBQUssWUFBWSxVQUFVLFVBQVUsRUFBRSxLQUFLLFlBQVksQ0FBQztBQUd6RCxVQUFNLGFBQWEsS0FBSyxVQUFVLFVBQVUsRUFBRSxLQUFLLGNBQWMsQ0FBQztBQUdsRSxTQUFLLGFBQWEsV0FBVyxTQUFTLFNBQVM7QUFBQSxNQUM5QyxNQUFNO0FBQUEsTUFDTixLQUFLO0FBQUEsTUFDTCxNQUFNLEVBQUUsYUFBYSxvQkFBb0IsV0FBVyxPQUFPO0FBQUEsSUFDNUQsQ0FBQztBQUdELFNBQUssaUJBQWlCLFdBQVcsU0FBUyxVQUFVLEVBQUUsS0FBSyxXQUFXLENBQUM7QUFDdkUsU0FBSyxlQUFlLFNBQVMsVUFBVSxFQUFFLE1BQU0sWUFBWSxpQ0FBOEIsQ0FBQztBQUMxRixTQUFLLGVBQWUsU0FBUyxVQUFVLEVBQUUsTUFBTSxVQUFVLDZCQUE0QixDQUFDO0FBQ3RGLFNBQUssZUFBZSxTQUFTLFVBQVUsRUFBRSxNQUFNLFdBQVcsK0JBQTZCLENBQUM7QUFDeEYsU0FBSyxlQUFlLFFBQVEsS0FBSztBQUdqQyxTQUFLLGFBQWEsV0FBVyxTQUFTLFVBQVUsRUFBRSxLQUFLLFdBQVcsQ0FBQztBQUNuRSxTQUFLLFdBQVcsU0FBUyxVQUFVLEVBQUUsTUFBTSxZQUFZLGlDQUEwQixDQUFDO0FBQ2xGLFNBQUssV0FBVyxTQUFTLFVBQVUsRUFBRSxNQUFNLFNBQVMsMkJBQXVCLENBQUM7QUFDNUUsU0FBSyxXQUFXLFNBQVMsVUFBVSxFQUFFLE1BQU0sVUFBVSw2QkFBd0IsQ0FBQztBQUM5RSxTQUFLLFdBQVcsU0FBUyxVQUFVLEVBQUUsTUFBTSxTQUFTLDJCQUF1QixDQUFDO0FBQzVFLFNBQUssV0FBVyxRQUFRLEtBQUssU0FBUztBQUd0QyxTQUFLLG1CQUFtQixLQUFLLFVBQVUsVUFBVSxFQUFFLEtBQUssb0JBQW9CLENBQUM7QUFDN0UsVUFBTSxhQUFhLEtBQUssaUJBQWlCLFVBQVUsRUFBRSxLQUFLLGNBQWMsQ0FBQztBQUN6RSxVQUFNLE1BQU0sU0FBUyxnQkFBZ0IsOEJBQThCLEtBQUs7QUFDeEUsUUFBSSxhQUFhLFNBQVMsSUFBSTtBQUM5QixRQUFJLGFBQWEsVUFBVSxJQUFJO0FBQy9CLFFBQUksYUFBYSxXQUFXLFdBQVc7QUFDdkMsUUFBSSxhQUFhLFFBQVEsTUFBTTtBQUMvQixRQUFJLGFBQWEsVUFBVSxjQUFjO0FBQ3pDLFFBQUksYUFBYSxnQkFBZ0IsR0FBRztBQUNwQyxRQUFJLGFBQWEsa0JBQWtCLE9BQU87QUFDMUMsUUFBSSxhQUFhLG1CQUFtQixPQUFPO0FBQzNDLFFBQUksVUFBVSxJQUFJLFVBQVUsc0JBQXNCO0FBQ2xELFVBQU0sT0FBTyxTQUFTLGdCQUFnQiw4QkFBOEIsTUFBTTtBQUMxRSxTQUFLLGFBQWEsS0FBSyw2QkFBNkI7QUFDcEQsUUFBSSxZQUFZLElBQUk7QUFDcEIsZUFBVyxZQUFZLEdBQUc7QUFDMUIsU0FBSyxZQUFZLEtBQUs7QUFHdEIsU0FBSyxhQUFhLEtBQUssVUFBVSxVQUFVLEVBQUUsS0FBSyxjQUFjLENBQUM7QUFDakUsU0FBSyxhQUFhLEtBQUssV0FBVyxVQUFVLEVBQUUsS0FBSyxjQUFjLENBQUM7QUFHbEUsU0FBSyxvQkFBb0I7QUFHekIsZUFBVyxNQUFNO0FBbEhuQjtBQW1IRyxpQkFBSyxlQUFMLG1CQUFpQjtBQUFBLElBQ2xCLEdBQUcsRUFBRTtBQUFBLEVBQ047QUFBQSxFQUVRLHNCQUE0QjtBQXZIckM7QUF5SEUsVUFBTSxzQkFBa0IsNEJBQVMsQ0FBQyxVQUFrQjtBQUNuRCxVQUFJLE1BQU0sS0FBSyxHQUFHO0FBQ2pCLGFBQUssS0FBSyxjQUFjLE9BQU8sSUFBSTtBQUFBLE1BQ3BDLE9BQU87QUFDTixhQUFLLGFBQWE7QUFBQSxNQUNuQjtBQUFBLElBQ0QsR0FBRyxLQUFNLElBQUk7QUFHYixlQUFLLGVBQUwsbUJBQWlCLGlCQUFpQixTQUFTLENBQUMsTUFBTTtBQUNqRCxZQUFNLFFBQVMsRUFBRSxPQUE0QjtBQUM3QyxXQUFLLGVBQWU7QUFDcEIsV0FBSyxZQUFZLElBQUk7QUFDckIsc0JBQWdCLEtBQUs7QUFBQSxJQUN0QjtBQUVBLGVBQUssZUFBTCxtQkFBaUIsaUJBQWlCLFdBQVcsQ0FBQyxNQUFNO0FBekl0RCxVQUFBQztBQTBJRyxVQUFJLEVBQUUsUUFBUSxTQUFTO0FBQ3RCLFVBQUUsZUFBZTtBQUNqQixjQUFNLFVBQVFBLE1BQUEsS0FBSyxlQUFMLGdCQUFBQSxJQUFpQixNQUFNLFdBQVU7QUFDL0MsWUFBSSxPQUFPO0FBQ1YsZUFBSyxLQUFLLGNBQWMsT0FBTyxJQUFJO0FBQUEsUUFDcEMsV0FBVyxLQUFLLGVBQWUsU0FBUyxLQUFLLEtBQUssZ0JBQWdCLEtBQUssZUFBZSxRQUFRO0FBRTdGLGdCQUFNLFFBQVEsS0FBSyxlQUFlLEtBQUssYUFBYTtBQUNwRCxjQUFJLE9BQU87QUFDVixpQkFBSyxLQUFLLFlBQVksS0FBSztBQUFBLFVBQzVCO0FBQUEsUUFDRDtBQUFBLE1BQ0QsV0FBVyxFQUFFLFdBQVcsRUFBRSxRQUFRLEtBQUs7QUFDdEMsVUFBRSxlQUFlO0FBQ2pCLFlBQUksS0FBSyxlQUFlLFNBQVMsR0FBRztBQUNuQyxlQUFLLGlCQUFpQixLQUFLLGdCQUFnQixLQUFLLEtBQUssZUFBZTtBQUNwRSxlQUFLLGNBQWM7QUFBQSxRQUNwQjtBQUFBLE1BQ0QsV0FBVyxFQUFFLFdBQVcsRUFBRSxRQUFRLEtBQUs7QUFDdEMsVUFBRSxlQUFlO0FBQ2pCLFlBQUksS0FBSyxlQUFlLFNBQVMsR0FBRztBQUNuQyxlQUFLLGlCQUFpQixLQUFLLGdCQUFnQixJQUFJLEtBQUssZUFBZSxVQUFVLEtBQUssZUFBZTtBQUNqRyxlQUFLLGNBQWM7QUFBQSxRQUNwQjtBQUFBLE1BQ0Q7QUFBQSxJQUNEO0FBR0EsZUFBSyxtQkFBTCxtQkFBcUIsaUJBQWlCLFVBQVUsQ0FBQyxNQUFNO0FBQ3RELFdBQUssa0JBQW1CLEVBQUUsT0FBNkI7QUFDdkQsVUFBSSxLQUFLLGNBQWM7QUFDdEIsYUFBSyxZQUFZLElBQUk7QUFDckIsYUFBSyxLQUFLLGNBQWMsS0FBSyxjQUFjLElBQUk7QUFBQSxNQUNoRDtBQUFBLElBQ0Q7QUFHQSxlQUFLLGVBQUwsbUJBQWlCLGlCQUFpQixVQUFVLENBQUMsTUFBTTtBQUNsRCxZQUFNLE9BQVEsRUFBRSxPQUE2QjtBQUM3QyxXQUFLLFNBQVMsbUJBQW1CO0FBRWpDLFVBQUksS0FBSyxjQUFjO0FBQ3RCLGFBQUssWUFBWSxJQUFJO0FBQ3JCLGFBQUssS0FBSyxjQUFjLEtBQUssY0FBYyxJQUFJO0FBQUEsTUFDaEQ7QUFBQSxJQUNEO0FBQUEsRUFDRDtBQUFBLEVBRUEsTUFBYyxjQUFjLE9BQWUsWUFBcUIsT0FBc0I7QUFDckYsUUFBSSxLQUFLLFVBQVc7QUFFcEIsU0FBSyxlQUFlO0FBQ3BCLFFBQUksV0FBVztBQUNkLFdBQUssY0FBYztBQUFBLElBQ3BCO0FBQ0EsU0FBSyxZQUFZO0FBQ2pCLFNBQUssWUFBWSxJQUFJO0FBRXJCLFFBQUk7QUFDSCxXQUFLLGlCQUFpQixNQUFNLEtBQUssY0FBYztBQUFBLFFBQzlDO0FBQUEsUUFDQSxLQUFLO0FBQUEsUUFDTCxLQUFLO0FBQUEsTUFDTjtBQUNBLFdBQUssZ0JBQWdCO0FBQ3JCLFdBQUssY0FBYztBQUFBLElBQ3BCLFNBQVMsT0FBTztBQUNmLGNBQVEsTUFBTSxrQkFBa0IsS0FBSztBQUNyQyxZQUFNLFdBQVcsaUJBQWlCLFFBQVEsTUFBTSxVQUFVO0FBQzFELFVBQUkseUJBQU8sMEJBQTBCLFFBQVEsRUFBRTtBQUMvQyxXQUFLLFlBQVksUUFBUTtBQUFBLElBQzFCLFVBQUU7QUFDRCxXQUFLLFlBQVk7QUFDakIsV0FBSyxZQUFZLEtBQUs7QUFBQSxJQUN2QjtBQUFBLEVBQ0Q7QUFBQSxFQUVRLGdCQUFzQjtBQUM3QixRQUFJLENBQUMsS0FBSyxXQUFZO0FBQ3RCLFNBQUssV0FBVyxNQUFNO0FBRXRCLFFBQUksS0FBSyxlQUFlLFdBQVcsR0FBRztBQUNyQyxZQUFNLFdBQVcsS0FBSyxXQUFXLFVBQVUsRUFBRSxLQUFLLHNCQUFzQixDQUFDO0FBQ3pFLGVBQVMsUUFBUSxrQkFBa0I7QUFDbkM7QUFBQSxJQUNEO0FBRUEsYUFBUyxJQUFJLEdBQUcsSUFBSSxLQUFLLGVBQWUsUUFBUSxLQUFLO0FBQ3BELFlBQU0sUUFBUSxLQUFLLGVBQWUsQ0FBQztBQUNuQyxVQUFJLENBQUMsTUFBTztBQUVaLFlBQU0sU0FBUyxLQUFLLFdBQVcsVUFBVTtBQUFBLFFBQ3hDLEtBQUssZUFBZSxNQUFNLEtBQUssZ0JBQWdCLGlCQUFpQixFQUFFO0FBQUEsTUFDbkUsQ0FBQztBQUVELGFBQU8sU0FBUyxPQUFPO0FBQUEsUUFDdEIsTUFBTTtBQUFBLFVBQ0wsS0FBSyxNQUFNO0FBQUEsVUFDWCxLQUFLLE1BQU0sZUFBZTtBQUFBLFFBQzNCO0FBQUEsTUFDRCxDQUFDO0FBRUQsYUFBTyxpQkFBaUIsU0FBUyxNQUFNO0FBQ3RDLGFBQUssS0FBSyxZQUFZLEtBQUs7QUFBQSxNQUM1QixDQUFDO0FBRUQsYUFBTyxpQkFBaUIsYUFBYSxNQUFNO0FBQzFDLGFBQUssZ0JBQWdCO0FBQ3JCLGFBQUssY0FBYztBQUFBLE1BQ3BCLENBQUM7QUFBQSxJQUNGO0FBR0EsU0FBSyxpQkFBaUI7QUFBQSxFQUN2QjtBQUFBLEVBRVEsbUJBQXlCO0FBQ2hDLFFBQUksQ0FBQyxLQUFLLFdBQVk7QUFHdEIsVUFBTSxxQkFBcUIsS0FBSyxXQUFXLGNBQWMsYUFBYTtBQUN0RSxRQUFJLG9CQUFvQjtBQUN2Qix5QkFBbUIsT0FBTztBQUFBLElBQzNCO0FBR0EsVUFBTSxVQUFVLEtBQUssZUFBZSxVQUFVO0FBRTlDLFFBQUksV0FBVyxLQUFLLGNBQWMsR0FBRztBQUNwQyxZQUFNLGFBQWEsS0FBSyxXQUFXLFVBQVUsRUFBRSxLQUFLLGFBQWEsQ0FBQztBQUVsRSxVQUFJLEtBQUssY0FBYyxHQUFHO0FBQ3pCLGNBQU0sVUFBVSxXQUFXLFNBQVMsVUFBVSxFQUFFLEtBQUssT0FBTyxNQUFNLFdBQVcsQ0FBQztBQUM5RSxnQkFBUSxpQkFBaUIsU0FBUyxNQUFNO0FBQ3ZDLGVBQUs7QUFDTCxlQUFLLFlBQVksSUFBSTtBQUNyQixlQUFLLEtBQUssY0FBYyxLQUFLLFlBQVk7QUFBQSxRQUMxQyxDQUFDO0FBQUEsTUFDRjtBQUVBLFVBQUksU0FBUztBQUNaLGNBQU0sVUFBVSxXQUFXLFNBQVMsVUFBVSxFQUFFLEtBQUssT0FBTyxNQUFNLE9BQU8sQ0FBQztBQUMxRSxnQkFBUSxpQkFBaUIsU0FBUyxNQUFNO0FBQ3ZDLGVBQUs7QUFDTCxlQUFLLFlBQVksSUFBSTtBQUNyQixlQUFLLEtBQUssY0FBYyxLQUFLLFlBQVk7QUFBQSxRQUMxQyxDQUFDO0FBQUEsTUFDRjtBQUFBLElBQ0Q7QUFBQSxFQUNEO0FBQUEsRUFFUSxZQUFZLFNBQXVCO0FBQzFDLFFBQUksQ0FBQyxLQUFLLFdBQVk7QUFDdEIsU0FBSyxXQUFXLE1BQU07QUFDdEIsVUFBTSxXQUFXLEtBQUssV0FBVyxVQUFVLEVBQUUsS0FBSyxpQ0FBaUMsQ0FBQztBQUNwRixhQUFTLFFBQVEsVUFBVSxPQUFPLEVBQUU7QUFBQSxFQUNyQztBQUFBLEVBRVEsZUFBcUI7QUFDNUIsUUFBSSxLQUFLLFlBQVk7QUFDcEIsV0FBSyxXQUFXLE1BQU07QUFBQSxJQUN2QjtBQUNBLFNBQUssaUJBQWlCLENBQUM7QUFBQSxFQUN4QjtBQUFBLEVBRVEsWUFBWSxNQUFxQjtBQUN4QyxRQUFJLEtBQUssa0JBQWtCO0FBQzFCLFdBQUssaUJBQWlCLE1BQU0sVUFBVSxPQUFPLFNBQVM7QUFBQSxJQUN2RDtBQUNBLFFBQUksS0FBSyxZQUFZO0FBQ3BCLFVBQUksTUFBTTtBQUNULGFBQUssV0FBVyxTQUFTLFNBQVM7QUFBQSxNQUNuQyxPQUFPO0FBQ04sYUFBSyxXQUFXLFlBQVksU0FBUztBQUFBLE1BQ3RDO0FBQUEsSUFDRDtBQUFBLEVBQ0Q7QUFBQSxFQUVBLE1BQWMsWUFBWSxPQUFtQztBQUM1RCxTQUFLLE1BQU07QUFFWCxVQUFNLGFBQWEsS0FBSyxjQUFjO0FBQ3RDLFFBQUksQ0FBQyxZQUFZO0FBQ2hCLFVBQUkseUJBQU8sZ0JBQWdCO0FBQzNCO0FBQUEsSUFDRDtBQUVBLFFBQUk7QUFFSCxZQUFNLGNBQWMsS0FBSyxjQUFjLGVBQWUsT0FBTyxLQUFLLFNBQVMsZ0JBQWdCO0FBRTNGLFVBQUksS0FBSyxRQUFRLGtCQUFrQjtBQUVsQyxZQUFJLENBQUMsS0FBSyxRQUFRLGdCQUFnQixLQUFLLFFBQVEsYUFBYSxLQUFLLE1BQU0sSUFBSTtBQUMxRSxjQUFJLHlCQUFPLDRDQUE0QztBQUN2RDtBQUFBLFFBQ0Q7QUFJQSxjQUFNLEtBQUssZ0JBQWdCO0FBQUEsVUFDMUI7QUFBQSxVQUNBO0FBQUEsVUFDQSxLQUFLLFFBQVE7QUFBQSxVQUNiO0FBQUE7QUFBQSxVQUNBLEtBQUs7QUFBQTtBQUFBLFFBQ047QUFBQSxNQUNELE9BQU87QUFFTixjQUFNLFNBQVMsTUFBTSxLQUFLLGVBQWU7QUFBQSxVQUN4QztBQUFBLFVBQ0E7QUFBQSxVQUNBO0FBQUE7QUFBQSxVQUNBO0FBQUE7QUFBQSxVQUNBLEtBQUs7QUFBQTtBQUFBLFFBQ047QUFFQSxZQUFJLE9BQU8sV0FBVyxPQUFPLFVBQVU7QUFFdEMsZ0JBQU0sZUFBZSxLQUFLLGNBQWMscUJBQXFCLEtBQUs7QUFDbEUsZ0JBQU0sV0FBVyxPQUFPLFdBQVc7QUFFbkMsZ0JBQU0sT0FBTyxLQUFLLElBQUksVUFBVSxvQkFBb0IsOEJBQVk7QUFDaEUsY0FBSSw2QkFBTSxRQUFRO0FBQ2pCLGlCQUFLLE9BQU8saUJBQWlCLFFBQVE7QUFBQSxVQUN0QztBQUFBLFFBQ0Q7QUFBQSxNQUNEO0FBQUEsSUFDRCxTQUFTLE9BQU87QUFDZixjQUFRLE1BQU0sMkJBQTJCLEtBQUs7QUFDOUMsVUFBSSx5QkFBTywyQkFBMkIsaUJBQWlCLFFBQVEsTUFBTSxVQUFVLE9BQU8sS0FBSyxDQUFDLEVBQUU7QUFBQSxJQUMvRjtBQUFBLEVBQ0Q7QUFBQSxFQUVRLGdCQUE4QjtBQXBYdkM7QUFxWEUsVUFBTSxPQUFPLEtBQUssSUFBSSxVQUFVLG9CQUFvQiw4QkFBWTtBQUNoRSxZQUFPLGtDQUFNLFNBQU4sWUFBYztBQUFBLEVBQ3RCO0FBQUEsRUFFQSxVQUFnQjtBQUNmLFVBQU0sRUFBRSxVQUFVLElBQUk7QUFDdEIsY0FBVSxNQUFNO0FBQUEsRUFDakI7QUFDRDtBQUtPLFNBQVMsaUJBQ2YsS0FDQSxVQUNBLGVBQ0EsZ0JBQ0EsaUJBQ0EsVUFBK0IsQ0FBQyxHQUN6QjtBQUNQLE1BQUksa0JBQWtCLEtBQUssVUFBVSxlQUFlLGdCQUFnQixpQkFBaUIsT0FBTyxFQUFFLEtBQUs7QUFDcEc7OztBakJ0WEEsSUFBTSxxQkFBTixNQUF5QjtBQUFBLEVBQXpCO0FBQ0MsU0FBUSxZQUEwRCxDQUFDO0FBQUE7QUFBQSxFQUVuRSxVQUFVLElBQW9EO0FBQzdELFNBQUssVUFBVSxLQUFLLEVBQUU7QUFBQSxFQUN2QjtBQUFBLEVBRUEsT0FBTyxVQUFzQztBQUM1QyxTQUFLLFVBQVUsUUFBUSxRQUFNLEdBQUcsUUFBUSxDQUFDO0FBQUEsRUFDMUM7QUFDRDtBQUVBLElBQXFCLHFCQUFyQixjQUFnRCx5QkFBTztBQUFBLEVBQXZEO0FBQUE7QUFJQztBQUFBLFNBQVEscUJBQXFCLElBQUksbUJBQW1CO0FBQUE7QUFBQSxFQVlwRCxNQUFNLFNBQXdCO0FBQzdCLFVBQU0sS0FBSyxhQUFhO0FBR3hCLFVBQU0sS0FBSyx3QkFBd0I7QUFHbkMsU0FBSyxtQkFBbUI7QUFHeEIsU0FBSyxzQkFBc0I7QUFHM0IsU0FBSyxpQkFBaUI7QUFHdEIsU0FBSyxjQUFjLElBQUksdUJBQXVCLEtBQUssS0FBSyxJQUFJLENBQUM7QUFFN0QsU0FBSyxJQUFJLDZCQUE2QjtBQUFBLEVBQ3ZDO0FBQUEsRUFFQSxXQUFpQjtBQXRFbEI7QUF3RUUsZUFBSyxrQkFBTCxtQkFBb0I7QUFFcEIsU0FBSyxJQUFJLCtCQUErQjtBQUFBLEVBQ3pDO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU1BLE1BQWMsMEJBQXlDO0FBRXRELFFBQUksS0FBQyxxQ0FBa0IsUUFBUSxHQUFHO0FBQ2pDO0FBQUEsSUFDRDtBQUVBLFFBQUksV0FBVztBQUNmLFVBQU0sV0FBcUIsQ0FBQztBQUc1QixVQUFNLGdCQUFpQixLQUFLLElBQXVGO0FBQ25ILFFBQUksQ0FBQyxlQUFlO0FBQ25CO0FBQUEsSUFDRDtBQUdBLFFBQUksQ0FBQyxLQUFLLFNBQVMsd0JBQXdCLEtBQUssU0FBUyxjQUFjO0FBQ3RFLFlBQU0sV0FBVztBQUNqQixVQUFJO0FBQ0gsc0JBQWMsVUFBVSxVQUFVLEtBQUssU0FBUyxZQUFZO0FBQzVELGFBQUssU0FBUyx1QkFBdUI7QUFDckMsbUJBQVc7QUFDWCxnQkFBUSxLQUFLLHVFQUF1RTtBQUFBLE1BQ3JGLFNBQVMsT0FBTztBQUNmLGdCQUFRLE1BQU0sc0VBQXNFLEtBQUs7QUFDekYsaUJBQVMsS0FBSyxRQUFRO0FBQUEsTUFDdkI7QUFBQSxJQUNEO0FBR0EsUUFBSSxDQUFDLEtBQUssU0FBUyx5QkFBeUIsS0FBSyxTQUFTLGVBQWU7QUFDeEUsWUFBTSxXQUFXO0FBQ2pCLFVBQUk7QUFDSCxzQkFBYyxVQUFVLFVBQVUsS0FBSyxTQUFTLGFBQWE7QUFDN0QsYUFBSyxTQUFTLHdCQUF3QjtBQUN0QyxtQkFBVztBQUNYLGdCQUFRLEtBQUssd0VBQXdFO0FBQUEsTUFDdEYsU0FBUyxPQUFPO0FBQ2YsZ0JBQVEsTUFBTSx1RUFBdUUsS0FBSztBQUMxRixpQkFBUyxLQUFLLFNBQVM7QUFBQSxNQUN4QjtBQUFBLElBQ0Q7QUFHQSxRQUFJLFVBQVU7QUFDYixZQUFNLEtBQUssYUFBYTtBQUN4QixjQUFRLEtBQUssNkNBQTZDO0FBQUEsSUFDM0Q7QUFHQSxRQUFJLFNBQVMsU0FBUyxHQUFHO0FBQ3hCLFVBQUk7QUFBQSxRQUNILG9DQUFvQyxTQUFTLEtBQUssT0FBTyxDQUFDO0FBQUEsUUFFMUQ7QUFBQSxNQUNEO0FBQUEsSUFDRDtBQUFBLEVBQ0Q7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtRLHFCQUEyQjtBQUNsQyxTQUFLLGlCQUFpQixJQUFJLGVBQWUsS0FBSyxLQUFLLEtBQUssVUFBVSxLQUFLLGtCQUFrQjtBQUN6RixTQUFLLGdCQUFnQixJQUFJLG1CQUFtQixLQUFLLEtBQUssS0FBSyxVQUFVLEtBQUssa0JBQWtCO0FBQzVGLFNBQUssaUJBQWlCLElBQUksZUFBZSxLQUFLLEtBQUssS0FBSyxVQUFVLEtBQUssZ0JBQWdCLEtBQUssa0JBQWtCO0FBQzlHLFNBQUssa0JBQWtCLElBQUksZ0JBQWdCLEtBQUssS0FBSyxLQUFLLFVBQVUsS0FBSyxnQkFBZ0IsS0FBSyxnQkFBZ0IsS0FBSyxlQUFlLEtBQUssa0JBQWtCO0FBQ3pKLFNBQUssZUFBZSxJQUFJO0FBQUEsTUFDdkIsS0FBSztBQUFBLE1BQ0wsS0FBSztBQUFBLE1BQ0wsS0FBSztBQUFBLE1BQ0wsS0FBSztBQUFBLE1BQ0wsS0FBSztBQUFBLElBQ047QUFDQSxTQUFLLGNBQWMsSUFBSSxZQUFZLEtBQUssS0FBSyxLQUFLLFVBQVUsS0FBSyxnQkFBZ0IsS0FBSyxrQkFBa0I7QUFDeEcsU0FBSyxvQkFBb0IsSUFBSSx1QkFBdUIsS0FBSyxLQUFLLEtBQUssVUFBVSxLQUFLLGdCQUFnQixLQUFLLGdCQUFnQixLQUFLLGtCQUFrQjtBQUM5SSxTQUFLLGdCQUFnQixJQUFJLGNBQWMsS0FBSyxLQUFLLEtBQUssVUFBVSxLQUFLLGtCQUFrQjtBQUFBLEVBQ3hGO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLUSx3QkFBOEI7QUFFckMsU0FBSztBQUFBLE1BQ0osS0FBSyxJQUFJLFVBQVUsR0FBRyxnQkFBZ0IsQ0FBQyxLQUFxQixRQUFnQixTQUF1QjtBQUNsRyxhQUFLLEtBQUssYUFBYSxrQkFBa0IsS0FBSyxRQUFRLElBQUk7QUFBQSxNQUMzRCxDQUFDO0FBQUEsSUFDRjtBQUdBLFNBQUs7QUFBQSxNQUNKLEtBQUssSUFBSSxVQUFVLEdBQUcsZUFBZSxDQUFDLEtBQWdCLFFBQWdCLFNBQXVCO0FBQzVGLGFBQUssS0FBSyxZQUFZLGlCQUFpQixLQUFLLFFBQVEsSUFBSTtBQUFBLE1BQ3pELENBQUM7QUFBQSxJQUNGO0FBSUEsU0FBSyxpQkFBaUIsVUFBVSxTQUFTLENBQUMsUUFBd0I7QUFFakUsWUFBTSxTQUFTLElBQUk7QUFDbkIsVUFBSSxDQUFDLFVBQVUsQ0FBQyxPQUFPLFFBQVEsWUFBWSxHQUFHO0FBQzdDO0FBQUEsTUFDRDtBQUNBLFdBQUssS0FBSyxhQUFhLG9CQUFvQixHQUFHO0FBQUEsSUFDL0MsR0FBRyxFQUFFLFNBQVMsS0FBSyxDQUFDO0FBR3BCLFNBQUs7QUFBQSxNQUNKLEtBQUssSUFBSSxVQUFVLEdBQUcsYUFBYSxDQUFDLFNBQXVCO0FBQzFELFlBQUksQ0FBQyxNQUFNO0FBQ1Y7QUFBQSxRQUNEO0FBR0EsWUFBSSxLQUFLLFNBQVMsMkJBQTJCLEtBQUssU0FBUyxtQkFBbUI7QUFDN0UsY0FBSSxLQUFLLFNBQVMsb0JBQW9CLFNBQVMsS0FBSyxTQUFTLEdBQUc7QUFFL0Qsa0JBQU0sWUFBWTtBQUVqQixvQkFBTSxJQUFJLFFBQVEsYUFBVyxXQUFXLFNBQVMsR0FBRyxDQUFDO0FBR3JELG9CQUFNLGFBQWEsS0FBSyxJQUFJLFVBQVUsY0FBYztBQUNwRCxvQkFBTSxlQUFlLGNBQWMsV0FBVyxTQUFTLEtBQUs7QUFHNUQsa0JBQUksZ0JBQWdCLEtBQUssU0FBUywwQkFBMEI7QUFDM0Qsc0JBQU0sUUFBUSxNQUFNLEtBQUssa0JBQWtCLFlBQVksTUFBTSxDQUFDLFlBQVk7QUFDMUUsb0JBQUksUUFBUSxHQUFHO0FBQ2Qsc0JBQUkseUJBQU8sYUFBYSxLQUFLLDJCQUEyQjtBQUFBLGdCQUN6RDtBQUFBLGNBQ0Q7QUFBQSxZQUNELEdBQUc7QUFBQSxVQUNKO0FBQUEsUUFDRDtBQUlBLGNBQU0saUJBQWlCLEtBQUssY0FBYyxrQkFBa0I7QUFDNUQsWUFBSSxlQUFlLFlBQVksS0FBSyxTQUFTLG9CQUFvQixTQUFTLEtBQUssU0FBUyxLQUFLLEtBQUssY0FBYyxPQUFPO0FBQ3RILGdCQUFNLE9BQU8sS0FBSyxJQUFJLFVBQVUsb0JBQW9CLDhCQUFZO0FBQ2hFLGNBQUksZ0JBQWdCLGdDQUFjO0FBQ2pDLGlCQUFLLEtBQUssY0FBYyxRQUFRLE1BQU0sSUFBSTtBQUFBLFVBQzNDO0FBQUEsUUFDRDtBQUFBLE1BQ0QsQ0FBQztBQUFBLElBQ0Y7QUFHQSxTQUFLO0FBQUEsTUFDSixLQUFLLElBQUksVUFBVSxHQUFHLGlCQUFpQixNQUFNO0FBQzVDLGNBQU0saUJBQWlCLEtBQUssY0FBYyxrQkFBa0I7QUFDNUQsWUFBSSxDQUFDLGVBQWUsU0FBUztBQUM1QjtBQUFBLFFBQ0Q7QUFFQSxjQUFNLE9BQU8sS0FBSyxJQUFJLFVBQVUsb0JBQW9CLDhCQUFZO0FBRWhFLFlBQUksUUFBUSxLQUFLLFNBQVMsS0FBSyxTQUFTLG9CQUFvQixTQUFTLEtBQUssS0FBSyxTQUFTLEtBQUssS0FBSyxLQUFLLGNBQWMsT0FBTztBQUUzSCxlQUFLLEtBQUssY0FBYyxRQUFRLEtBQUssTUFBTSxJQUFJO0FBQUEsUUFDaEQ7QUFBQSxNQUNELENBQUM7QUFBQSxJQUNGO0FBR0EsU0FBSztBQUFBLE1BQ0osS0FBSyxJQUFJLGNBQWMsR0FBRyxXQUFXLENBQUMsU0FBZ0I7QUFFckQsWUFBSSxLQUFLLFNBQVMsMkJBQTJCLEtBQUssU0FBUyxtQkFBbUI7QUFDN0UsY0FBSSxLQUFLLFNBQVMsb0JBQW9CLFNBQVMsS0FBSyxTQUFTLEdBQUc7QUFDL0Qsa0JBQU0sWUFBWTtBQUVqQixvQkFBTSxhQUFhLEtBQUssSUFBSSxVQUFVLGNBQWM7QUFDcEQsb0JBQU0sZUFBZSxjQUFjLFdBQVcsU0FBUyxLQUFLO0FBRzVELGtCQUFJLGdCQUFnQixLQUFLLFNBQVMsMEJBQTBCO0FBQzNELHNCQUFNLFFBQVEsTUFBTSxLQUFLLGtCQUFrQixZQUFZLE1BQU0sQ0FBQyxZQUFZO0FBQzFFLG9CQUFJLFFBQVEsR0FBRztBQUNkLHNCQUFJLHlCQUFPLGFBQWEsS0FBSywyQkFBMkI7QUFBQSxnQkFDekQ7QUFBQSxjQUNEO0FBQUEsWUFDRCxHQUFHO0FBQUEsVUFDSjtBQUFBLFFBQ0Q7QUFFQSxjQUFNLGlCQUFpQixLQUFLLGNBQWMsa0JBQWtCO0FBRTVELFlBQUksQ0FBQyxlQUFlLFdBQVksQ0FBQyxLQUFLLFNBQVMsb0JBQW9CLFNBQVMsS0FBSyxTQUFTLEtBQUssS0FBSyxjQUFjLE1BQU87QUFDeEg7QUFBQSxRQUNEO0FBR0EsYUFBSyxJQUFJLFVBQVUsa0JBQWtCLENBQUMsU0FBd0I7QUFDN0QsZ0JBQU0sT0FBTyxLQUFLO0FBQ2xCLGNBQUksZ0JBQWdCLGtDQUFnQixLQUFLLFNBQVMsTUFBTTtBQUN2RCxpQkFBSyxLQUFLLGNBQWMsUUFBUSxNQUFNLElBQUk7QUFBQSxVQUMzQztBQUFBLFFBQ0QsQ0FBQztBQUFBLE1BQ0YsQ0FBQztBQUFBLElBQ0Y7QUFHQSxTQUFLLElBQUksVUFBVSxjQUFjLE1BQU07QUFDdEMsV0FBSyxjQUFjLGNBQWM7QUFBQSxJQUNsQyxDQUFDO0FBQUEsRUFDRjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS1EsbUJBQXlCO0FBRWhDLFNBQUssV0FBVztBQUFBLE1BQ2YsSUFBSTtBQUFBLE1BQ0osTUFBTTtBQUFBLE1BQ04sZ0JBQWdCLENBQUMsUUFBZ0IsU0FBdUI7QUFDdkQsdUJBQWUsS0FBSyxLQUFLLEtBQUssZ0JBQWdCLEtBQUssZUFBZTtBQUFBLE1BQ25FO0FBQUEsSUFDRCxDQUFDO0FBR0QsU0FBSyxXQUFXO0FBQUEsTUFDZixJQUFJO0FBQUEsTUFDSixNQUFNO0FBQUEsTUFDTixnQkFBZ0IsQ0FBQyxRQUFnQixTQUF1QjtBQUN2RDtBQUFBLFVBQ0MsS0FBSztBQUFBLFVBQ0wsS0FBSztBQUFBLFVBQ0wsS0FBSztBQUFBLFVBQ0wsS0FBSztBQUFBLFVBQ0wsS0FBSztBQUFBLFFBQ047QUFBQSxNQUNEO0FBQUEsSUFDRCxDQUFDO0FBR0QsU0FBSyxXQUFXO0FBQUEsTUFDZixJQUFJO0FBQUEsTUFDSixNQUFNO0FBQUEsTUFDTixnQkFBZ0IsQ0FBQyxRQUFnQixTQUF1QjtBQUN2RDtBQUFBLFVBQ0MsS0FBSztBQUFBLFVBQ0wsS0FBSztBQUFBLFVBQ0wsS0FBSztBQUFBLFVBQ0wsS0FBSztBQUFBLFVBQ0wsS0FBSztBQUFBLFVBQ0wsRUFBRSxrQkFBa0IsTUFBTSxjQUFjLEtBQUssU0FBUyxvQkFBb0I7QUFBQSxRQUMzRTtBQUFBLE1BQ0Q7QUFBQSxJQUNELENBQUM7QUFHRCxTQUFLLFdBQVc7QUFBQSxNQUNmLElBQUk7QUFBQSxNQUNKLE1BQU07QUFBQSxNQUNOLGdCQUFnQixDQUFDLFFBQWdCLFNBQXVCO0FBQ3ZEO0FBQUEsVUFDQyxLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQUEsVUFDTDtBQUFBO0FBQUEsVUFDQSxLQUFLLFNBQVM7QUFBQSxRQUNmO0FBQUEsTUFDRDtBQUFBLElBQ0QsQ0FBQztBQUdELFNBQUssV0FBVztBQUFBLE1BQ2YsSUFBSTtBQUFBLE1BQ0osTUFBTTtBQUFBLE1BQ04sZ0JBQWdCLENBQUMsUUFBZ0IsU0FBdUI7QUFDdkQ7QUFBQSxVQUNDLEtBQUs7QUFBQSxVQUNMLEtBQUs7QUFBQSxVQUNMLEtBQUs7QUFBQSxVQUNMLEtBQUs7QUFBQSxVQUNMLEtBQUs7QUFBQSxVQUNMLEVBQUUsa0JBQWtCLE1BQU0sY0FBYyxLQUFLLFNBQVMsd0JBQXdCO0FBQUEsUUFDL0U7QUFBQSxNQUNEO0FBQUEsSUFDRCxDQUFDO0FBR0QsU0FBSyxXQUFXO0FBQUEsTUFDZixJQUFJO0FBQUEsTUFDSixNQUFNO0FBQUEsTUFDTixnQkFBZ0IsQ0FBQyxRQUFnQixTQUF1QjtBQUN2RDtBQUFBLFVBQ0MsS0FBSztBQUFBLFVBQ0wsS0FBSztBQUFBLFVBQ0wsS0FBSztBQUFBLFVBQ0w7QUFBQTtBQUFBLFVBQ0EsS0FBSyxTQUFTO0FBQUEsUUFDZjtBQUFBLE1BQ0Q7QUFBQSxJQUNELENBQUM7QUFHRCxTQUFLLFdBQVc7QUFBQSxNQUNmLElBQUk7QUFBQSxNQUNKLE1BQU07QUFBQSxNQUNOLGdCQUFnQixPQUFPLFFBQWdCLFNBQXVCO0FBQzdELGNBQU0sT0FBTyxLQUFLO0FBQ2xCLFlBQUksQ0FBQyxNQUFNO0FBQ1YsY0FBSSx5QkFBTyxnQkFBZ0I7QUFDM0I7QUFBQSxRQUNEO0FBRUEsY0FBTSxRQUFRLE1BQU0sS0FBSyxrQkFBa0IsWUFBWSxJQUFJO0FBQzNELFlBQUksUUFBUSxHQUFHO0FBQ2QsY0FBSSx5QkFBTyxhQUFhLEtBQUssMkJBQTJCO0FBQUEsUUFDekQsT0FBTztBQUNOLGNBQUkseUJBQU8sd0JBQXdCO0FBQUEsUUFDcEM7QUFBQSxNQUNEO0FBQUEsSUFDRCxDQUFDO0FBR0QsU0FBSyxXQUFXO0FBQUEsTUFDZixJQUFJO0FBQUEsTUFDSixNQUFNO0FBQUEsTUFDTixVQUFVLFlBQVk7QUFDckIsY0FBTSxFQUFFLGtCQUFBQyxrQkFBaUIsSUFBSSxNQUFNO0FBQ25DLGNBQU0sU0FBUyxNQUFNQTtBQUFBLFVBQ3BCLEtBQUs7QUFBQSxVQUNMO0FBQUEsVUFDQTtBQUFBLFVBQ0E7QUFBQSxVQUNBO0FBQUEsUUFDRDtBQUVBLFlBQUksQ0FBQyxPQUFPLFdBQVc7QUFDdEI7QUFBQSxRQUNEO0FBRUEsWUFBSSx5QkFBTyxnREFBZ0Q7QUFDM0QsY0FBTSxRQUFRLE1BQU0sS0FBSyxrQkFBa0IsZ0JBQWdCO0FBQzNELFlBQUkseUJBQU8sYUFBYSxLQUFLLDJCQUEyQjtBQUFBLE1BQ3pEO0FBQUEsSUFDRCxDQUFDO0FBQUEsRUFDRjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsTUFBTSxlQUE4QjtBQUNuQyxVQUFNLE9BQU8sTUFBTSxLQUFLLFNBQVM7QUFDakMsU0FBSyxXQUFXLE9BQU8sT0FBTyxDQUFDLEdBQUcsa0JBQWtCLHNCQUFRLENBQUMsQ0FBQztBQUFBLEVBQy9EO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxNQUFNLGVBQThCO0FBQ25DLFVBQU0sS0FBSyxTQUFTLEtBQUssUUFBUTtBQUdqQyxTQUFLLG1CQUFtQixPQUFPLEtBQUssUUFBUTtBQUFBLEVBQzdDO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLUSxPQUFPLE1BQXVCO0FBaGN2QztBQWljRSxTQUFJLFVBQUssYUFBTCxtQkFBZSxXQUFXO0FBQzdCLGNBQVEsTUFBTSxtQkFBbUIsR0FBRyxJQUFJO0FBQUEsSUFDekM7QUFBQSxFQUNEO0FBQ0Q7IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJmaW5hbE5hbWUiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiT2JzaWRpYW5Nb2R1bGUiLCAiT2JzaWRpYW5Nb2R1bGUiLCAicHJvcGVydHlTZXR0aW5ncyIsICJpbWFnZVByb3AiLCAiaWNvblByb3AiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJfYSIsICJvcGVuQ29uZmlybU1vZGFsIl0KfQo=
